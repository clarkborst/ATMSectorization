{"version":3,"file":"voronoi.js","mappings":"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AK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAClwCC,EAAW,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAiGvgC,SAASC,EAAkBpZ,EAAQqZ,EAAMC,EAAMxkB,EAAOE,EAAQukB,GAC5D,KAAI18B,MAAM08B,IAAWA,EAAS,GAA9B,CAIAA,GAAU,EACV,IAAIC,EAlCN,SAAgCxZ,EAAQqZ,EAAMC,EAAMxkB,EAAOE,GAKzD,GAJsB,iBAAXgL,IACTA,EAAS3iB,SAAS8D,eAAe6e,KAG9BA,GAA8B,WAApBiZ,EAAQjZ,MAA0B,eAAgBA,GAC/D,MAAM,IAAIjqC,UAAU,2EAGtB,IAAI8oC,EAAUmB,EAAOC,WAAW,MAEhC,IACE,OAAOpB,EAAQ4a,aAAaJ,EAAMC,EAAMxkB,EAAOE,EACjD,CAAE,MAAO7+B,GACP,MAAM,IAAIqN,MAAM,gCAAkCrN,EACpD,CACF,CAkBkBujD,CAAuB1Z,EAAQqZ,EAAMC,EAAMxkB,EAAOE,GAClEwkB,EAcF,SAA8BA,EAAWH,EAAMC,EAAMxkB,EAAOE,EAAQukB,GAYlE,IAXA,IASII,EATAC,EAASJ,EAAU5lD,KACnBimD,EAAM,EAAIN,EAAS,EAEnBO,EAAchlB,EAAQ,EACtBilB,EAAe/kB,EAAS,EACxBglB,EAAcT,EAAS,EACvBU,EAAYD,GAAeA,EAAc,GAAK,EAC9CE,EAAa,IAAIC,EACjB9qB,EAAQ6qB,EAGHvnD,EAAI,EAAGA,EAAIknD,EAAKlnD,IACvB08B,EAAQA,EAAM75B,KAAO,IAAI2kD,EAErBxnD,IAAMqnD,IACRL,EAAWtqB,GAIfA,EAAM75B,KAAO0kD,EAQb,IAPA,IAAIE,EAAU,KACVC,EAAW,KACXC,EAAK,EACLnT,EAAK,EACLoT,EAASrB,EAASK,GAClBiB,EAASrB,EAASI,GAEbvkD,EAAI,EAAGA,EAAIggC,EAAQhgC,IAAK,CAC/Bq6B,EAAQ6qB,EAMR,IALA,IAAIO,EAAKb,EAAOzS,GACZuT,EAAKd,EAAOzS,EAAK,GACjBwT,EAAKf,EAAOzS,EAAK,GACjByT,EAAKhB,EAAOzS,EAAK,GAEZ1mC,EAAK,EAAGA,EAAKu5C,EAAav5C,IACjC4uB,EAAMr4B,EAAIyjD,EACVprB,EAAMn6B,EAAIwlD,EACVrrB,EAAM14B,EAAIgkD,EACVtrB,EAAM34B,EAAIkkD,EACVvrB,EAAQA,EAAM75B,KAgBhB,IAbA,IAAIqlD,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAUjB,EAAcS,EACxBS,EAAUlB,EAAcU,EACxBS,EAAUnB,EAAcW,EACxBS,EAAUpB,EAAcY,EACxBS,EAAOpB,EAAYQ,EACnBa,EAAOrB,EAAYS,EACnBpuB,EAAO2tB,EAAYU,EACnBtuB,EAAO4tB,EAAYW,EAEdW,EAAM,EAAGA,EAAMvB,EAAauB,IAAO,CAC1C,IAAIrhD,EAAIitC,IAAO2S,EAAcyB,EAAMzB,EAAcyB,IAAQ,GACrDvkD,EAAI4iD,EAAO1/C,GACXhF,EAAI0kD,EAAO1/C,EAAI,GACfvD,EAAIijD,EAAO1/C,EAAI,GACfxD,EAAIkjD,EAAO1/C,EAAI,GACfshD,EAAMxB,EAAcuB,EACxBF,IAAShsB,EAAMr4B,EAAIA,GAAKwkD,EACxBF,IAASjsB,EAAMn6B,EAAIA,GAAKsmD,EACxBlvB,IAAS+C,EAAM14B,EAAIA,GAAK6kD,EACxBnvB,IAASgD,EAAM34B,EAAIA,GAAK8kD,EACxBX,GAAU7jD,EACV8jD,GAAU5lD,EACV6lD,GAAUpkD,EACVqkD,GAAUtkD,EACV24B,EAAQA,EAAM75B,IAChB,CAEA4kD,EAAUF,EACVG,EAAWV,EAEX,IAAK,IAAIvhD,EAAI,EAAGA,EAAI08B,EAAO18B,IAAK,CAC9B,IAAIqjD,EAAYpvB,EAAOkuB,IAAWC,EAGlC,GAFAZ,EAAOzS,EAAK,GAAKsU,EAEC,IAAdA,EAAiB,CACnB,IAAIC,EAAM,IAAMD,EAEhB7B,EAAOzS,IAAOkU,EAAOd,IAAWC,GAAUkB,EAC1C9B,EAAOzS,EAAK,IAAMmU,EAAOf,IAAWC,GAAUkB,EAC9C9B,EAAOzS,EAAK,IAAM7a,EAAOiuB,IAAWC,GAAUkB,CAChD,MACE9B,EAAOzS,GAAMyS,EAAOzS,EAAK,GAAKyS,EAAOzS,EAAK,GAAK,EAGjDkU,GAAQJ,EACRK,GAAQJ,EACR5uB,GAAQ6uB,EACR9uB,GAAQ+uB,EACRH,GAAWb,EAAQpjD,EACnBkkD,GAAWd,EAAQllD,EACnBimD,GAAWf,EAAQzjD,EACnBykD,GAAWhB,EAAQ1jD,EAEnB,IAAIilD,EAAKvjD,EAAImhD,EAAS,EAEtBoC,EAAKrB,GAAMqB,EAAK7B,EAAc6B,EAAK7B,IAAgB,EAKnDuB,GAJAR,GAAUT,EAAQpjD,EAAI4iD,EAAO+B,GAK7BL,GAJAR,GAAUV,EAAQllD,EAAI0kD,EAAO+B,EAAK,GAKlCrvB,GAJAyuB,GAAUX,EAAQzjD,EAAIijD,EAAO+B,EAAK,GAKlCtvB,GAJA2uB,GAAUZ,EAAQ1jD,EAAIkjD,EAAO+B,EAAK,GAKlCvB,EAAUA,EAAQ5kD,KAClB,IAAIomD,GAAYvB,EACZwB,GAAKD,GAAU5kD,EACf8kD,GAAKF,GAAU1mD,EACf6mD,GAAKH,GAAUjlD,EACfwC,GAAKyiD,GAAUllD,EACnBukD,GAAWY,GACXX,GAAWY,GACXX,GAAWY,GACXX,GAAWjiD,GACX0hD,GAAUgB,GACVf,GAAUgB,GACVf,GAAUgB,GACVf,GAAU7hD,GACVkhD,EAAWA,EAAS7kD,KACpB2xC,GAAM,CACR,CAEAmT,GAAMxlB,CACR,CAEA,IAAK,IAAIknB,GAAK,EAAGA,GAAKlnB,EAAOknB,KAAM,CAGjC,IAAIC,GAAMrC,EAFVzS,EAAK6U,IAAM,GAGPE,GAAMtC,EAAOzS,EAAK,GAClBgV,GAAMvC,EAAOzS,EAAK,GAClBiV,GAAMxC,EAAOzS,EAAK,GAClBkV,GAAWrC,EAAciC,GACzBK,GAAWtC,EAAckC,GACzBK,GAAWvC,EAAcmC,GACzBK,GAAWxC,EAAcoC,GACzBK,GAAQxC,EAAYgC,GACpBS,GAAQzC,EAAYiC,GACpBS,GAAQ1C,EAAYkC,GACpBS,GAAQ3C,EAAYmC,GAExB/sB,EAAQ6qB,EAER,IAAK,IAAI2C,GAAM,EAAGA,GAAM7C,EAAa6C,KACnCxtB,EAAMr4B,EAAIilD,GACV5sB,EAAMn6B,EAAIgnD,GACV7sB,EAAM14B,EAAIwlD,GACV9sB,EAAM34B,EAAI0lD,GACV/sB,EAAQA,EAAM75B,KAShB,IANA,IAAIsnD,GAAKhoB,EACLioB,GAAU,EACVC,GAAU,EACVC,GAAU,EACVC,GAAU,EAELC,GAAM,EAAGA,IAAO5D,EAAQ4D,KAAO,CACtChW,EAAK2V,GAAKd,IAAM,EAEhB,IAAIoB,GAAOpD,EAAcmD,GAEzBV,KAAUptB,EAAMr4B,EAAIilD,GAAMrC,EAAOzS,IAAOiW,GACxCV,KAAUrtB,EAAMn6B,EAAIgnD,GAAMtC,EAAOzS,EAAK,IAAMiW,GAC5CT,KAAUttB,EAAM14B,EAAIwlD,GAAMvC,EAAOzS,EAAK,IAAMiW,GAC5CR,KAAUvtB,EAAM34B,EAAI0lD,GAAMxC,EAAOzS,EAAK,IAAMiW,GAC5CF,IAAWjB,GACXc,IAAWb,GACXc,IAAWb,GACXc,IAAWb,GACX/sB,EAAQA,EAAM75B,KAEV2nD,GAAMpD,IACR+C,IAAMhoB,EAEV,CAEAqS,EAAK6U,GACL5B,EAAUF,EACVG,EAAWV,EAEX,IAAK,IAAI0D,GAAK,EAAGA,GAAKroB,EAAQqoB,KAAM,CAClC,IAAIC,GAAMnW,GAAM,EAEhByS,EAAO0D,GAAM,GAAKlB,GAAMQ,GAAQrC,IAAWC,EAEvC4B,GAAM,GACRA,GAAM,IAAMA,GACZxC,EAAO0D,KAAQb,GAAQlC,IAAWC,GAAU4B,GAC5CxC,EAAO0D,GAAM,IAAMZ,GAAQnC,IAAWC,GAAU4B,GAChDxC,EAAO0D,GAAM,IAAMX,GAAQpC,IAAWC,GAAU4B,IAEhDxC,EAAO0D,IAAO1D,EAAO0D,GAAM,GAAK1D,EAAO0D,GAAM,GAAK,EAGpDb,IAASJ,GACTK,IAASJ,GACTK,IAASJ,GACTK,IAASJ,GACTH,IAAYjC,EAAQpjD,EACpBslD,IAAYlC,EAAQllD,EACpBqnD,IAAYnC,EAAQzjD,EACpB6lD,IAAYpC,EAAQ1jD,EACpB4mD,GAAMtB,KAAOsB,GAAMD,GAAKrD,GAAeD,EAAeuD,GAAMvD,GAAgBjlB,GAAS,EACrF2nB,IAASS,IAAW9C,EAAQpjD,EAAI4iD,EAAO0D,IACvCZ,IAASK,IAAW3C,EAAQllD,EAAI0kD,EAAO0D,GAAM,GAC7CX,IAASK,IAAW5C,EAAQzjD,EAAIijD,EAAO0D,GAAM,GAC7CV,IAASK,IAAW7C,EAAQ1jD,EAAIkjD,EAAO0D,GAAM,GAC7ClD,EAAUA,EAAQ5kD,KAClB6mD,IAAYJ,GAAM5B,EAASrjD,EAC3BslD,IAAYJ,GAAM7B,EAASnlD,EAC3BqnD,IAAYJ,GAAM9B,EAAS1jD,EAC3B6lD,IAAYJ,GAAM/B,EAAS3jD,EAC3BwmD,IAAWjB,GACXc,IAAWb,GACXc,IAAWb,GACXc,IAAWb,GACX/B,EAAWA,EAAS7kD,KACpB2xC,GAAMrS,CACR,CACF,CAEA,OAAO0kB,CACT,CApPc+D,CAAqB/D,EAAWH,EAAMC,EAAMxkB,EAAOE,EAAQukB,GACvEvZ,EAAOC,WAAW,MAAMud,aAAahE,EAAWH,EAAMC,EALtD,CAMF,CAmcA,IAAIa,EAIJ,SAASA,KApmBT,SAAyBnM,EAAUyP,GACjC,KAAMzP,aAAoByP,GACxB,MAAM,IAAI1nD,UAAU,oCAExB,CAimBE2nD,CAAgBvrD,KAAMgoD,GAEtBhoD,KAAK6E,EAAI,EACT7E,KAAK+C,EAAI,EACT/C,KAAKwE,EAAI,EACTxE,KAAKuE,EAAI,EACTvE,KAAKqD,KAAO,IACd,EC7jBI,SAASmoD,EAAeC,GACxB,OAAOA,EAAI3qC,QAAQ,kBAAmB,IAC1C,CAmBI,SAAS4qC,EAAUD,GACnB,MAAME,EAAUF,EAAIG,MAAM,sDAC1B,OAAOD,EAAUA,EAAQ1rD,IAAIqqB,YAAc,EAC/C,CAkBA,MAAMuhC,EAAe,YAejB,SAASC,EAAiBze,GAK1B,MAAM0e,EAAW,yCAAyCvhC,KAAK6iB,GAC/D,OAAK0e,IAGEA,EAAS,IAAMA,EAAS,IAAMA,EAAS,KAFnC,EAGf,CAgBA,MAAMC,EAAiB,gBACjBC,EAAU,mBACVC,EAAa,oBACbC,EAAqB,8DACrBC,EAA+B,uBAC/BC,EAAmB,mBACnBC,EAAe,kBACrB,SAASC,EAAkBC,EAAUC,GACjC,MAAMd,EAAUc,EAAMjiC,KAAKgiC,GAC3B,OAAKb,EAME,CACHa,EAAS1rC,QAAQ2rC,EAAO,KACxBd,EAAQrrD,QAPD,CACHksD,EACA,EAOZ,CAgCA,MAAME,EAAc,KAKhB,SAASC,EAAgBjpD,GACzB,OAAOiG,KAAKoG,KAAKpG,KAAKkB,IAAInH,EAAE,GAAI,GAAKiG,KAAKkB,IAAInH,EAAE,GAAI,GACxD,CAMI,SAASkpD,EAAa5/C,EAAGtJ,GACzB,OAAQsJ,EAAE,GAAKtJ,EAAE,GAAKsJ,EAAE,GAAKtJ,EAAE,KAAOipD,EAAgB3/C,GAAK2/C,EAAgBjpD,GAC/E,CAMI,SAASmpD,EAAa7/C,EAAGtJ,GACzB,OAAQsJ,EAAE,GAAKtJ,EAAE,GAAKsJ,EAAE,GAAKtJ,EAAE,IAAM,EAAI,GAAKiG,KAAK2zC,KAAKsP,EAAa5/C,EAAGtJ,GAC5E,CACA,SAASopD,EAAIhqD,GACT,OAAOA,EAAIA,EAAIA,CACnB,CACA,SAASiqD,EAAIjqD,GACT,OAAO,EAAIA,EAAIA,GAAK,EAAIA,EAC5B,CACA,SAASkqD,EAAIlqD,GACT,OAAO,EAAIA,GAAK,EAAIA,IAAM,EAAIA,EAClC,CACA,SAASmqD,EAAInqD,GACT,OAAQ,EAAIA,IAAM,EAAIA,IAAM,EAAIA,EACpC,CACA,SAASoqD,EAAIpqD,GACT,OAAOA,EAAIA,CACf,CACA,SAASqqD,EAAIrqD,GACT,OAAO,EAAIA,GAAK,EAAIA,EACxB,CACA,SAASsqD,EAAItqD,GACT,OAAQ,EAAIA,IAAM,EAAIA,EAC1B,CAEA,MAAMuqD,EACF,YAAOrhB,CAAM9gB,GACT,OAAO,IAAImiC,EAASniC,EAAU,QAAS,GAC3C,CACA,KAAAjmB,GACI,IAAIqoD,EAAYlwC,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,IACjF,MAAM,SAAE8N,EAAS,KAAE0wB,GAAU57C,KAC7B,OAAOwrD,EAAexrD,KAAKutD,aAAaC,OAAOvoD,MAAMqoD,GAAWrtD,KAAK6D,GAAQ,IAAIupD,EAASniC,EAAU0wB,EAAM93C,IAE9G,CACA,QAAA2pD,CAASC,GACL,MAAM5pD,EAAQ9D,KAAK8D,MACnB,OAAiB,OAAVA,GAA4B,KAAVA,IAAiB4pD,GAAyB,IAAV5pD,SAAiC,IAAVA,CACpF,CACA,QAAA6pD,CAASC,GACL,MAAM,MAAE9pD,GAAW9D,KACbusB,EAA0B,iBAAVzoB,EACtB,OAAKyoB,GAAWqhC,EAGTA,EAAOC,KAAK/pD,GAFRyoB,CAGf,CACA,eAAAuhC,GACI,OAAO9tD,KAAK2tD,SAAS,SACzB,CACA,QAAAI,GACI,IAAK/tD,KAAKytD,WACN,OAAO,EAEX,MAAMO,EAAWhuD,KAAKutD,YACtB,QAAO,GACH,KAAKS,EAASC,SAAS,MACvB,IAAK,WAAWJ,KAAKG,GACjB,OAAO,EACX,QACI,OAAO,EAEnB,CACA,QAAAE,CAASpqD,GAEL,OADA9D,KAAK8D,MAAQA,EACN9D,IACX,CACA,QAAAmuD,CAASC,GACL,YAAmB,IAARA,GAAuBpuD,KAAKytD,WAC5BztD,KAAK8D,MAETsqD,CACX,CACA,SAAAC,CAAUD,GACN,IAAKpuD,KAAKytD,WACN,YAAmB,IAARW,EACA,EAGJ9jC,WAAW8jC,GAEtB,MAAM,MAAEtqD,GAAW9D,KAEnB,IAAIyD,EAAI6mB,WAAWxmB,GAInB,OAHI9D,KAAK2tD,SAAS,QACdlqD,GAAK,KAEFA,CACX,CACA,SAAA8pD,CAAUa,GACN,YAAmB,IAARA,GAAuBpuD,KAAKytD,gBACN,IAAfztD,KAAK8D,MAAwB,GAAKqF,OAAOnJ,KAAK8D,OAEzDqF,OAAOilD,EAClB,CACA,QAAAE,CAASF,GACL,IAAI33B,EAAQz2B,KAAKutD,UAAUa,GAC3B,OAAIpuD,KAAKuuD,oBAGTvuD,KAAKuuD,mBAAoB,EACzB93B,EAxLJ,SAAwBA,GACxB,IAAKA,EAAM+3B,WAAW,OAClB,OAAO/3B,EAEX,IAAIg4B,EAAW,EAGf,OAFwBh4B,EAAM3V,QAAQ,gBAAgB,CAACgwB,EAAK4d,IAAWD,KAAeC,EAAUvlD,OAAOQ,KAAKwB,MAAMmf,WAAWwmB,KAASA,GAG1I,CAgLgB6d,CAAel4B,GACvBz2B,KAAK8D,MAAQ2yB,GAJFA,CAMf,CACA,MAAAm4B,GACI,OAAO,EAEX,CACA,MAAAC,GACI,OAAO7uD,KAAKkrB,SAAS4jC,UACzB,CACA,KAAAC,GACI,OAAO/uD,KAAKkrB,SAAS8jC,MACzB,CACA,QAAAC,GACI,OAAOjvD,KAAKutD,YAAYzsC,QAAQ,WAAY,GAChD,CACA,SAAAouC,CAAUC,GACN,IAAIC,EAAiBhyC,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GACjF,IAAKpd,KAAKytD,WACN,OAAO,EAEX,MAAO4B,EAAMC,GAA0C,kBAArBH,EAAiC,MAC/DruD,EACAquD,GACA,CACAA,IAEE,SAAEI,GAAcvvD,KAAKkrB,SAASskC,OACpC,QAAO,GACH,KAAKxvD,KAAK2tD,SAAS,SACf,OAAO3tD,KAAKquD,YAAc,IAAM1kD,KAAKzC,IAAIqoD,EAASE,YAAY,KAAMF,EAASE,YAAY,MAC7F,KAAKzvD,KAAK2tD,SAAS,SACf,OAAO3tD,KAAKquD,YAAc,IAAM1kD,KAAKvC,IAAImoD,EAASE,YAAY,KAAMF,EAASE,YAAY,MAC7F,KAAKzvD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAc,IAAMkB,EAASE,YAAY,KACzD,KAAKzvD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAc,IAAMkB,EAASE,YAAY,KACzD,KAAKzvD,KAAK2tD,SAAS,QACf,OAAO3tD,KAAKquD,YAAcruD,KAAK6uD,SACnC,KAAK7uD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAcruD,KAAK+uD,QACnC,KAAK/uD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAcruD,KAAK+uD,QAAU,EAC7C,KAAK/uD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAChB,KAAKruD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAcruD,KAAK4uD,UAAY,EAAI,IACnD,KAAK5uD,KAAK2tD,SAAS,OACf,OAA0B,GAAnB3tD,KAAKquD,YAChB,KAAKruD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAcruD,KAAK4uD,SAAW,KAC9C,KAAK5uD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAcruD,KAAK4uD,SAAW,KAC9C,KAAK5uD,KAAK2tD,SAAS,OACf,OAAO3tD,KAAKquD,YAAcruD,KAAK4uD,SACnC,KAAK5uD,KAAK2tD,SAAS,OAAS2B,EACxB,OAAOtvD,KAAKquD,YAAcruD,KAAK+uD,QACnC,KAAK/uD,KAAK2tD,SAAS,MACf,OAAO3tD,KAAKquD,YAAckB,EAASE,YAAYJ,GACnD,QACI,CACI,MAAM5rD,EAAIzD,KAAKquD,YACf,OAAIe,GAAkB3rD,EAAI,EACfA,EAAI8rD,EAASE,YAAYJ,GAE7B5rD,CACX,EAEZ,CACA,eAAAisD,GACI,OAAK1vD,KAAKytD,WAGNztD,KAAK2tD,SAAS,OACP3tD,KAAKquD,YAEU,IAAnBruD,KAAKquD,YALD,CAMf,CACA,UAAAsB,GACI,IAAK3vD,KAAKytD,WACN,OAAO,EAEX,QAAO,GACH,KAAKztD,KAAK2tD,SAAS,QACf,OAAO3tD,KAAKquD,aAAe1kD,KAAK2qC,GAAK,KACzC,KAAKt0C,KAAK2tD,SAAS,SACf,OAAO3tD,KAAKquD,aAAe1kD,KAAK2qC,GAAK,KACzC,KAAKt0C,KAAK2tD,SAAS,QACf,OAAO3tD,KAAKquD,YAChB,QACI,OAAOruD,KAAKquD,aAAe1kD,KAAK2qC,GAAK,KAEjD,CACA,aAAAsb,GACI,MAAM5B,EAAWhuD,KAAKutD,YAChB3B,EAAQ,aAAaphC,KAAKwjC,GAC1BpS,GAAQgQ,aAAqC,EAASA,EAAM,KAAOoC,EACzE,OAAOhuD,KAAKkrB,SAAS2kC,YAAY7mD,IAAI4yC,EACzC,CACA,sBAAAkU,CAAuB5hC,EAAS6hC,GAC5B,IAAI3B,EAAMpuD,KAAK4vD,gBACf,IAAKxB,EACD,OAAO,KAGX,GAAkC,mBAAvBA,EAAI4B,gBAAiC,mBAAoB9hC,EAChE,OAAOkgC,EAAI4B,eAAehwD,KAAKkrB,SAASzkB,IAAKynB,EAAS6hC,GAG1D,GAAiC,mBAAtB3B,EAAI6B,cAA8B,CACzC,GAAI7B,EAAI8B,mBAAmBzC,WAAY,CACnC,MAAM0C,EAAmB/B,EAAI9tB,aAAa,oBAC1C8tB,EAAMA,EAAI8B,mBAAmBN,gBACzBxB,GAAO+B,EAAiB1C,YACxBW,EAAI9tB,aAAa,oBAAoB,GAAM4tB,SAASiC,EAAiBrsD,MAE7E,CACA,GAAIsqD,EACA,OAAOA,EAAI6B,cAAcjwD,KAAKkrB,SAASzkB,IAAKynB,EAAS6hC,EAE7D,CACA,OAAO,IACX,CACA,eAAAK,GACI,IAAKpwD,KAAKytD,WACN,OAAO,KAEX,MAAMtpD,EAAMnE,KAAKutD,YACjB,OAAOF,EAASgD,oBAAoBlsD,IAAQ,IAChD,CACA,UAAAmsD,CAAWP,GACP,IAAIjsD,EAAQ9D,KAAKsuD,WACjB,MAAMiC,EAAMzsD,EAAMxD,OAClB,IAAIkwD,EAAS,EAEb,IAAI,IAAIhwD,EAAI,EAAGA,EAAI+vD,IACE,MAAbzsD,EAAMtD,IACNgwD,IAEW,IAAXA,GAJgBhwD,KAQxB,GAAIuvD,EAAQtC,YAAcztD,KAAK2tD,YAAyB,IAAX6C,EAAc,CACvD,MAAM/5B,EAAQ,IAAI,EAAS3yB,GACvB2yB,EAAM/V,KACN+V,EAAM9V,MAAQovC,EAAQ1B,YACtBvqD,EAAQ2yB,EAAM7L,SAEtB,CACA,OAAO,IAAIyiC,EAASrtD,KAAKkrB,SAAUlrB,KAAK47C,KAAM93C,EAClD,CACA,WAAAmH,CAAYigB,EAAU0wB,EAAM93C,GACxB9D,KAAKkrB,SAAWA,EAChBlrB,KAAK47C,KAAOA,EACZ57C,KAAK8D,MAAQA,EACb9D,KAAKuuD,mBAAoB,CAC7B,EAEJlB,EAASgD,oBAAsB,CAC3B,SAAY,aACZ,cAAe,MACf,mBAAoB,MACpB,OAAU,SACV,QAAW,SACX,aAAc,SACd,kBAAmB,SACnB,YAAe,cACf,WAAc,aACd,QAAW,UACX,aAAgB,cAGpB,MAAMI,GACF,KAAA7oD,GACI5H,KAAK0wD,UAAY,EACrB,CACA,UAAAC,CAAWhuB,EAAOE,GACd7iC,KAAK0wD,UAAUjxD,KAAK,CAChBkjC,QACAE,UAER,CACA,aAAA+tB,GACI5wD,KAAK0wD,UAAU3sD,KACnB,CACA,OAAA8sD,GACI,MAAO1rD,GAAQnF,KAAK0wD,UACpB,OAAKvrD,GACM2rD,IAGf,CACA,UAAAC,GACI,MAAM,UAAEL,GAAe1wD,KAEvB,OADgB0wD,EAAUA,EAAUpwD,OAAS,IAElCwwD,IAGf,CACA,SAAInuB,GACA,OAAO3iC,KAAK+wD,aAAapuB,KAC7B,CACA,UAAIE,GACA,OAAO7iC,KAAK+wD,aAAaluB,MAC7B,CACA,WAAA4sB,CAAYjoD,GACR,MAAiB,iBAANA,EACAA,EAED,MAANA,EACOxH,KAAK2iC,MAEN,MAANn7B,EACOxH,KAAK6iC,OAETl5B,KAAKoG,KAAKpG,KAAKkB,IAAI7K,KAAK2iC,MAAO,GAAKh5B,KAAKkB,IAAI7K,KAAK6iC,OAAQ,IAAMl5B,KAAKoG,KAAK,EACrF,CACA,WAAA9E,GACIjL,KAAK0wD,UAAY,EACrB,EAIJ,SAASI,KACL,MAAO,CACHnuB,MAAO8tB,GAASO,uBAChBnuB,OAAQ4tB,GAASQ,wBAEzB,CAPAR,GAASO,uBAAyB,IAClCP,GAASQ,wBAA0B,IAQnC,MAAMC,GACF,YAAOxuB,CAAMx4B,GACT,IAAIinD,EAAe/zC,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,EACpF,MAAOnX,EAAIkrD,EAActuD,EAAIsuD,GAAgBzF,EAAUxhD,GACvD,OAAO,IAAIgnD,GAAMjrD,EAAGpD,EACxB,CACA,iBAAOuuD,CAAWp4B,GACd,IAAIm4B,EAAe/zC,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,EACpF,MAAOnX,EAAIkrD,EAActuD,EAAIoD,GAAKylD,EAAU1yB,GAC5C,OAAO,IAAIk4B,GAAMjrD,EAAGpD,EACxB,CACA,gBAAOwuD,CAAUjf,GACb,MAAMv2B,EAAS6vC,EAAUtZ,GACnBme,EAAM10C,EAAOvb,OACbgxD,EAAa,GACnB,IAAI,IAAI9wD,EAAI,EAAGA,EAAI+vD,EAAK/vD,GAAK,EACzB8wD,EAAW7xD,KAAK,IAAIyxD,GAAMr1C,EAAOrb,GAAIqb,EAAOrb,EAAI,KAEpD,OAAO8wD,CACX,CACA,OAAAC,CAAQrnD,GACJ,OAAOP,KAAK+lC,MAAMxlC,EAAMrH,EAAI7C,KAAK6C,EAAGqH,EAAMjE,EAAIjG,KAAKiG,EACvD,CACA,cAAAurD,CAAe9pB,GACX,MAAM,EAAEzhC,EAAE,EAAEpD,GAAO7C,KACbyxD,EAAKxrD,EAAIyhC,EAAU,GAAK7kC,EAAI6kC,EAAU,GAAKA,EAAU,GACrDijB,EAAK1kD,EAAIyhC,EAAU,GAAK7kC,EAAI6kC,EAAU,GAAKA,EAAU,GAC3D1nC,KAAKiG,EAAIwrD,EACTzxD,KAAK6C,EAAI8nD,CACb,CACA,WAAA1/C,CAAYhF,EAAGpD,GACX7C,KAAKiG,EAAIA,EACTjG,KAAK6C,EAAIA,CACb,EAGJ,MAAM6uD,GACF,SAAAC,GACI,OAAO3xD,KAAK4xD,OAChB,CACA,KAAApoD,GACI,GAAIxJ,KAAK4xD,QACL,OAEJ,MAAM,OAAEpC,EAAO,QAAEqC,EAAQ,YAAEC,GAAiB9xD,KACtC6tC,EAAS2hB,EAAO/oD,IAAIonC,OAC1BA,EAAOkkB,QAAUF,EACjBhkB,EAAOmkB,YAAcF,EACrB9xD,KAAK4xD,SAAU,CACnB,CACA,IAAAz/B,GACI,IAAKnyB,KAAK4xD,QACN,OAEJ,MAAM/jB,EAAS7tC,KAAKwvD,OAAO/oD,IAAIonC,OAC/B7tC,KAAK4xD,SAAU,EACf/jB,EAAOkkB,QAAU,KACjBlkB,EAAOmkB,YAAc,IACzB,CACA,SAAAC,GACI,OAAOjyD,KAAK4xD,SAAW5xD,KAAKmR,OAAO7Q,OAAS,CAChD,CACA,SAAA4xD,GACI,IAAKlyD,KAAK4xD,QACN,OAEJ,MAAQpC,OAAQtkC,EAAS,OAAE/Z,EAAO,cAAEghD,GAAmBnyD,MACjD,MAAEyrB,GAAWP,EAASzkB,IAAIonC,OAChC,IAAI3f,EAEAzC,IACAA,EAAM2mC,OAAS,IAEnBjhD,EAAO5K,SAAQ,CAAC8rD,EAAO7xD,KACnB,IAAI,IAAEyd,GAASo0C,EAEf,IADAnkC,EAAUikC,EAAc3xD,GAClB0tB,GACFjQ,EAAIiQ,GACJA,EAAUA,EAAQkqB,MACtB,IAGJp4C,KAAKmR,OAAS,GACdnR,KAAKmyD,cAAgB,EACzB,CACA,SAAAG,CAAUpkC,EAASznB,GACf,IAAKzG,KAAK4xD,UAAYnrD,EAClB,OAEJ,MAAM,OAAE0K,EAAO,cAAEghD,GAAmBnyD,KACpCmR,EAAO5K,SAAQ,CAAC8rD,EAAO7xD,KACnB,IAAI,EAAEyF,EAAE,EAAEpD,GAAOwvD,GAEZF,EAAc3xD,IAAMiG,EAAI8rD,eAAiB9rD,EAAI8rD,cAActsD,EAAGpD,KAC/DsvD,EAAc3xD,GAAK0tB,EACvB,GAER,CACA,gBAAAskC,CAAiBtkC,EAASukC,GACtB,IAAKzyD,KAAK4xD,UAAYa,EAClB,OAEJ,MAAM,OAAEthD,EAAO,cAAEghD,GAAmBnyD,KACpCmR,EAAO5K,SAAQ,CAAC8rD,EAAO7xD,KACnB,IAAI,EAAEyF,EAAE,EAAEpD,GAAOwvD,GACZF,EAAc3xD,IAAMiyD,EAAYC,aAAazsD,EAAGpD,KACjDsvD,EAAc3xD,GAAK0tB,EACvB,GAER,CACA,KAAAykC,CAAM1sD,EAAGpD,GACL,MAAM,OAAEyc,EAAO,IAAE7Y,GAASzG,KAAKwvD,OACzBtlD,EAAQ,IAAIgnD,GAAMjrD,EAAGpD,GAC3B,IAAIqrB,EAAUznB,EAAIonC,OAClB,KAAM3f,GACFhkB,EAAMjE,GAAKioB,EAAQ0kC,WACnB1oD,EAAMrH,GAAKqrB,EAAQ2kC,UACnB3kC,EAAUA,EAAQ4kC,aAQtB,OANIxzC,aAAuC,EAASA,EAAOyzC,WACvD7oD,EAAMjE,GAAKqZ,EAAOyzC,UAElBzzC,aAAuC,EAASA,EAAO0zC,WACvD9oD,EAAMrH,GAAKyc,EAAO0zC,SAEf9oD,CACX,CACA,OAAA2nD,CAAQ72C,GACJ,MAAM,EAAE/U,EAAE,EAAEpD,GAAO7C,KAAK2yD,MAAM33C,EAAMi4C,QAASj4C,EAAMk4C,SACnDlzD,KAAKmR,OAAO1R,KAAK,CACbkZ,KAAM,UACN1S,IACApD,IACA,GAAAob,CAAKk1C,GACGA,EAAYtB,SACZsB,EAAYtB,SAEpB,GAER,CACA,WAAAC,CAAY92C,GACR,MAAM,EAAE/U,EAAE,EAAEpD,GAAO7C,KAAK2yD,MAAM33C,EAAMi4C,QAASj4C,EAAMk4C,SACnDlzD,KAAKmR,OAAO1R,KAAK,CACbkZ,KAAM,cACN1S,IACApD,IACA,GAAAob,CAAKk1C,GACGA,EAAYrB,aACZqB,EAAYrB,aAEpB,GAER,CACA,WAAA7mD,CAAYukD,GACRxvD,KAAKwvD,OAASA,EACdxvD,KAAK4xD,SAAU,EACf5xD,KAAKmR,OAAS,GACdnR,KAAKmyD,cAAgB,GACrBnyD,KAAK6xD,QAAU7xD,KAAK6xD,QAAQuB,KAAKpzD,MACjCA,KAAK8xD,YAAc9xD,KAAK8xD,YAAYsB,KAAKpzD,KAC7C,EAGJ,MAAMqzD,GAAkC,oBAAX/zC,OAAyBA,OAAS,KACzDg0C,GAAkC,oBAAVniC,MAAwBA,MAAMiiC,UAAKtyD,QAC9DA,EACH,MAAMyyD,GACF,IAAAC,CAAKC,GACDzzD,KAAK0zD,MAAMj0D,KAAKg0D,EACpB,CACA,KAAAE,GAEI,OAAK3zD,KAAK4zD,aAGH5zD,KAAK4zD,aAFD3gC,QAAQ7D,SAGvB,CACA,OAAAykC,GACI,GAAI7zD,KAAK8zD,YACL,OAAO,EAEX,MAAMA,EAAc9zD,KAAK0zD,MAAM5hB,OAAO9uC,GAAIA,MAS1C,OAPI8wD,IACA9zD,KAAK0zD,MAAQ,GACT1zD,KAAK+zD,cACL/zD,KAAK+zD,gBAGb/zD,KAAK8zD,YAAcA,EACZA,CACX,CACA,WAAAE,CAAYvtD,GAERA,EAAIwtD,YAAc,gBAClBxtD,EAAIytD,QAAU,OACdztD,EAAI0tD,SAAW,QACf1tD,EAAI2tD,WAAa,CACrB,CACA,UAAAC,CAAWhC,GACP,IAAI,SAAEnnC,EAAS,IAAEzkB,EAAI,YAAE6tD,EAAY,MAAE3xB,EAAM,aAAE4xB,EAAa,OAAE1xB,EAAO,cAAE2xB,EAAc,KAAEvlB,EAAM,EAAE,KAAEE,EAAM,EAAE,KAAEslB,EAAK,KAAEC,EAAK,KAAEC,GAAM,EAAM,MAAEC,EAAO,EAAE,MAAEC,EAAO,GAAOxC,EAE9J,MAAMyC,EAAmBtJ,EAAe8I,GAAaxzC,QAAQ,WAAY,KAElEi0C,EAAkBC,GAA0BF,EAAiB7vD,MAAM,KACpEgwD,EAAQF,GAAoB,WAC5BG,EAAcF,GAA0B,OAExCjlB,EAASpN,EAAQ4xB,EACjBvkB,EAASnN,EAAS2xB,EAClBW,EAAWxrD,KAAKzC,IAAI6oC,EAAQC,GAC5BolB,EAAWzrD,KAAKvC,IAAI2oC,EAAQC,GAClC,IAAIqlB,EAAoBd,EACpBe,EAAqBd,EACL,SAAhBU,IACAG,GAAqBF,EACrBG,GAAsBH,GAEN,UAAhBD,IACAG,GAAqBD,EACrBE,GAAsBF,GAE1B,MAAMG,EAAW,IAAIlI,EAASniC,EAAU,OAAQupC,GAC1Ce,EAAW,IAAInI,EAASniC,EAAU,OAAQwpC,GAC1Ce,EAAUF,EAAS9H,YAAc+H,EAAS/H,WAIhD,GAHIgI,GACAhvD,EAAIwiC,WAAWksB,EAAWI,EAASrG,UAAU,MAAOiG,EAAWK,EAAStG,UAAU,MAElFyF,EAAM,CACN,MAAMe,EAAcP,EAAWP,EACzBe,EAAcR,EAAWN,EAC/BpuD,EAAImvD,YACJnvD,EAAIovD,OAAOH,EAAaC,GACxBlvD,EAAIqvD,OAAOnzB,EAAOgzB,GAClBlvD,EAAIqvD,OAAOnzB,EAAOE,GAClBp8B,EAAIqvD,OAAOJ,EAAa7yB,GACxBp8B,EAAIsvD,YACJtvD,EAAIkuD,MACR,CACA,IAAKc,EAAS,CACV,MAAMO,EAA6B,SAAhBd,GAA0BC,IAAanlB,EACpDimB,EAA8B,UAAhBf,GAA2BE,IAAaplB,EACtDkmB,EAA6B,SAAhBhB,GAA0BC,IAAaplB,EACpDomB,EAA8B,UAAhBjB,GAA2BE,IAAarlB,EACxDklB,EAAMzG,WAAW,UAAYwH,GAAcC,IAC3CxvD,EAAIwiC,UAAUtG,EAAQ,EAAI0yB,EAAoB,EAAG,GAEjDJ,EAAMhH,SAAS,UAAYiI,GAAcC,IACzC1vD,EAAIwiC,UAAU,EAAGpG,EAAS,EAAIyyB,EAAqB,GAEnDL,EAAMzG,WAAW,UAAYwH,GAAcC,IAC3CxvD,EAAIwiC,UAAUtG,EAAQ0yB,EAAmB,GAEzCJ,EAAMhH,SAAS,UAAYiI,GAAcC,IACzC1vD,EAAIwiC,UAAU,EAAGpG,EAASyyB,EAElC,CAEA,QAAO,GACH,IAAe,SAAVL,EACDxuD,EAAIuyB,MAAM+W,EAAQC,GAClB,MACJ,IAAqB,SAAhBklB,EACDzuD,EAAIuyB,MAAMm8B,EAAUA,GACpB,MACJ,IAAqB,UAAhBD,EACDzuD,EAAIuyB,MAAMo8B,EAAUA,GAI5B3uD,EAAIwiC,WAAWgG,GAAOE,EAC1B,CACA,KAAA3lC,CAAM0kB,GACF,IAAI,aAAEkoC,GAAc,EAAM,YAAEC,GAAa,EAAM,gBAAEC,GAAiB,EAAM,iBAAEC,GAAkB,EAAM,YAAEC,GAAa,EAAM,YAAEC,EAAY,WAAEC,EAAW,YAAEC,EAAY,QAAEC,EAAQ,QAAEC,GAAaz5C,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAC3P,MAAM,MAAE05C,GAAW92D,KACb4f,EAAgB,IAAO2zC,GAAOwD,UASpC,GARA/2D,KAAK8zD,aAAc,EACnB9zD,KAAK4f,cAAgBA,EACrB5f,KAAK4zD,aAAe,IAAI3gC,SAAS7D,IAC7BpvB,KAAK+zD,aAAe3kC,CAAO,IAE3BpvB,KAAK6zD,WACL7zD,KAAKi/B,OAAO/Q,EAASqoC,EAAkBC,EAAaE,EAAYC,EAAaC,EAASC,IAErFT,EACD,OAEJ,IAAIl0D,EAAMI,KAAKJ,MACX60C,EAAO70C,EACP80D,EAAQ,EACZ,MAAMC,EAAO,KACT/0D,EAAMI,KAAKJ,MACX80D,EAAQ90D,EAAM60C,EACVigB,GAASp3C,IACTm3B,EAAO70C,EAAM80D,EAAQp3C,EACjB5f,KAAKk3D,aAAaZ,EAAiBG,KACnCz2D,KAAKi/B,OAAO/Q,EAASqoC,EAAkBC,EAAaE,EAAYC,EAAaC,EAASC,GACtFC,EAAM5E,cAGdlyD,KAAKozB,WAAa,EAAsB6jC,EAAK,EAE5CZ,GACDS,EAAMttD,QAEVxJ,KAAKozB,WAAa,EAAsB6jC,EAC5C,CACA,IAAA9kC,GACQnyB,KAAKozB,aACL,SAA6BpzB,KAAKozB,YAClCpzB,KAAKozB,WAAa,MAEtBpzB,KAAK82D,MAAM3kC,MACf,CACA,YAAA+kC,CAAaZ,EAAiBG,GAE1B,IAAKH,EAAiB,CAClB,MAAM,cAAE12C,GAAmB5f,KAG3B,GAFsBA,KAAKm3D,WAAWt/B,QAAO,CAACq/B,EAAcE,IAAYA,EAAUhuD,OAAOwW,IAAkBs3C,IACzG,GAEE,OAAO,CAEf,CAEA,QAA2B,mBAAhBT,IAA8BA,QAGpCz2D,KAAK8zD,cAAe9zD,KAAK6zD,cAI1B7zD,KAAK82D,MAAM7E,WAInB,CACA,MAAAhzB,CAAO/Q,EAASqoC,EAAkBC,EAAaE,EAAYC,EAAaC,EAASC,GAC7E,MAAM,SAAEtH,EAAS,IAAE9oD,EAAI,cAAE4wD,GAAmBr3D,KACtC6tC,EAASpnC,EAAIonC,OACnB0hB,EAAS3nD,QACLimC,EAAOlL,OAASkL,EAAOhL,QACvB0sB,EAASoB,WAAW9iB,EAAOlL,MAAOkL,EAAOhL,QAE7C,MAAMy0B,EAAappC,EAAQqpC,SAAS,SAC9BC,EAActpC,EAAQqpC,SAAS,WAChChB,IAAqBc,GAAuC,iBAAfX,GAAkD,iBAAhBC,KAE5EW,EAAW7J,aACX5f,EAAOlL,MAAQ20B,EAAWpI,UAAU,KAEhCrhB,EAAOpiB,QACPoiB,EAAOpiB,MAAMkX,MAAQ,GAAGtiC,OAAOwtC,EAAOlL,MAAO,QAGjD60B,EAAY/J,aACZ5f,EAAOhL,OAAS20B,EAAYtI,UAAU,KAElCrhB,EAAOpiB,QACPoiB,EAAOpiB,MAAMoX,OAAS,GAAGxiC,OAAOwtC,EAAOhL,OAAQ,SAI3D,IAAI40B,EAAS5pB,EAAO6pB,aAAe7pB,EAAOlL,MACtCg1B,EAAU9pB,EAAO+pB,cAAgB/pB,EAAOhL,OAY5C,GAXI0zB,GAAoBe,EAAW7J,YAAc+J,EAAY/J,aACzDgK,EAASH,EAAWpI,UAAU,KAC9ByI,EAAUH,EAAYtI,UAAU,MAEpCK,EAASoB,WAAW8G,EAAQE,GACL,iBAAZf,GACP1oC,EAAQoS,aAAa,KAAK,GAAM4tB,SAAS0I,GAEtB,iBAAZC,GACP3oC,EAAQoS,aAAa,KAAK,GAAM4tB,SAAS2I,GAEnB,iBAAfH,GAAkD,iBAAhBC,EAA0B,CACnE,MAAM/tB,EAAU8iB,EAAUx9B,EAAQoS,aAAa,WAAWitB,aAC1D,IAAIsK,EAAS,EACTC,EAAS,EACb,GAA0B,iBAAfpB,EAAyB,CAChC,MAAMY,EAAappC,EAAQqpC,SAAS,SAChCD,EAAW7J,WACXoK,EAASP,EAAWpI,UAAU,KAAOwH,EAC9B9tB,EAAQ,KAAOle,MAAMke,EAAQ,MACpCivB,EAASjvB,EAAQ,GAAK8tB,EAE9B,CACA,GAA2B,iBAAhBC,EAA0B,CACjC,MAAMa,EAActpC,EAAQqpC,SAAS,UACjCC,EAAY/J,WACZqK,EAASN,EAAYtI,UAAU,KAAOyH,EAC/B/tB,EAAQ,KAAOle,MAAMke,EAAQ,MACpCkvB,EAASlvB,EAAQ,GAAK+tB,EAE9B,CACKkB,IACDA,EAASC,GAERA,IACDA,EAASD,GAEb3pC,EAAQoS,aAAa,SAAS,GAAM4tB,SAASwI,GAC7CxoC,EAAQoS,aAAa,UAAU,GAAM4tB,SAASyI,GAC9C,MAAMoB,EAAiB7pC,EAAQqpC,SAAS,aAAa,GAAM,GAC3DQ,EAAe7J,SAAS,GAAG7tD,OAAO03D,EAAexK,YAAa,WAAWltD,OAAO,EAAIw3D,EAAQ,MAAMx3D,OAAO,EAAIy3D,EAAQ,KACzH,CAEKtB,GACD/vD,EAAIuxD,UAAU,EAAG,EAAGP,EAAQE,GAEhCzpC,EAAQ+Q,OAAOx4B,GACX4wD,IACAr3D,KAAKq3D,eAAgB,EAE7B,CACA,WAAApsD,CAAYxE,GAAK,MAAE0qB,EAAOmiC,GAAe,OAAEh0C,EAAQ+zC,IAAmB,CAAC,GAWnE,GAVArzD,KAAKyG,IAAMA,EACXzG,KAAKuvD,SAAW,IAAIkB,GACpBzwD,KAAK82D,MAAQ,IAAIpF,GAAM1xD,MACvBA,KAAKm3D,WAAa,GAClBn3D,KAAK0zD,MAAQ,GACb1zD,KAAK4f,cAAgB,EACrB5f,KAAK8zD,aAAc,EACnB9zD,KAAKq3D,eAAgB,EACrBr3D,KAAKozB,WAAa,KAClBpzB,KAAKsf,OAASA,GACT6R,EACD,MAAM,IAAI9f,MAAM,qEAEpBrR,KAAKmxB,MAAQA,CACjB,EAEJoiC,GAAOF,cAAgBA,GACvBE,GAAO0E,aAAe3E,GACtBC,GAAOwD,UAAY,GACnBxD,GAAO2E,mBAAqB,IAE5B,MAAM,aAAED,IAAkB1E,GACpB4E,GAAwC,oBAAdC,UAA4BA,eAAYt3D,EACxE,MAAMu3D,GACF,WAAM31B,CAAM41B,GACR,OAAIA,EAAS9J,WAAW,KACbxuD,KAAKu4D,gBAAgBD,GAEzBt4D,KAAKgI,KAAKswD,EACrB,CACA,eAAAC,CAAgBttC,GACZ,MAAMutC,EAAS,IAAIx4D,KAAKo4D,UACxB,IACI,OAAOp4D,KAAKy4D,cAAcD,EAAOD,gBAAgBttC,EAAK,iBAC1D,CAAE,MAAOisB,GACL,OAAOl3C,KAAKy4D,cAAcD,EAAOD,gBAAgBttC,EAAK,YAC1D,CACJ,CACA,aAAAwtC,CAAcvtC,GACV,MAAMwtC,EAAcxtC,EAASytC,qBAAqB,eAAe,GACjE,GAAID,EACA,MAAM,IAAIrnD,MAAMqnD,EAAY/iC,aAAe,uBAE/C,OAAOzK,CACX,CACA,UAAMljB,CAAKqlC,GACP,MAAMnc,QAAiBlxB,KAAKmxB,MAAMkc,GAC5BpiB,QAAYiG,EAAS8K,OAC3B,OAAOh8B,KAAKu4D,gBAAgBttC,EAChC,CACA,WAAAhgB,EAAY,MAAEkmB,EAAO8mC,GAAa,UAAEG,EAAWD,IAAsB,CAAC,GAClE,IAAKhnC,EACD,MAAM,IAAI9f,MAAM,qEAEpB,IAAK+mD,EACD,MAAM,IAAI/mD,MAAM,yEAEpBrR,KAAKmxB,MAAQA,EACbnxB,KAAKo4D,UAAYA,CACrB,EA+HJ,MAAMQ,GACF,KAAAx4C,CAAM3Z,GACF,MAAM,QAAEoyD,EAAQ,QAAEC,EAAQ,OAAErT,GAAYzlD,KAClC+4D,EAAKF,EAAQ3J,UAAU,KACvB8J,EAAKF,EAAQ5J,UAAU,KAC7BzoD,EAAIwiC,UAAU8vB,EAAIC,GAClBvyD,EAAIihC,UAAU+d,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAC5Eh/C,EAAIwiC,WAAW8vB,GAAKC,EACxB,CACA,OAAAC,CAAQxyD,GACJ,MAAM,QAAEoyD,EAAQ,QAAEC,EAAQ,OAAErT,GAAYzlD,KAClCuE,EAAIkhD,EAAO,GACXjhD,EAAIihD,EAAO,GACXx3C,EAAIw3C,EAAO,GACXj+C,EAAIi+C,EAAO,GACXzhD,EAAIyhD,EAAO,GACX7iD,EAAI6iD,EAAO,GAIX/3C,EAAM,GAAKnJ,GADP,EACYP,EAFZ,EAEoBpB,GAAS4B,GAD7B,EACkCgD,EAHlC,EAG0C5E,GAASqL,GAFnD,EAEwDzG,EAHxD,EAGgExD,IACpE+0D,EAAKF,EAAQ3J,UAAU,KACvB8J,EAAKF,EAAQ5J,UAAU,KAC7BzoD,EAAIwiC,UAAU8vB,EAAIC,GAClBvyD,EAAIihC,UAAUh6B,GALJ,EAKW1J,EANX,EAMmBpB,GAAQ8K,GAP3B,EAOkC9K,EALlC,EAK0C4E,GAAQkG,GANlD,EAMyDO,EALzD,EAKiEzJ,GAAQkJ,GALzE,EAKgFnJ,EAPhF,EAOwF0J,GAAQP,GAAOlJ,EAAI5B,EAAIqL,EAAIjK,GAAI0J,GAAOO,EAAIzG,EAAIjD,EAAI3B,IACpJ6D,EAAIwiC,WAAW8vB,GAAKC,EACxB,CACA,YAAAE,CAAahvD,GACTA,EAAMsnD,eAAexxD,KAAKylD,OAC9B,CACA,WAAAx6C,CAAYjI,EAAGyiD,EAAQ0T,GACnBn5D,KAAK2Y,KAAO,SACZ3Y,KAAKylD,OAvkCT,SAAuBgG,GACvB,MAAM2N,EAAU1N,EAAUD,GAS1B,MARe,CACX2N,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EACdA,EAAQ,IAAM,EAGtB,CA4jCsBC,CAAc5T,GAC5BzlD,KAAK64D,QAAUM,EAAgB,GAC/Bn5D,KAAK84D,QAAUK,EAAgB,EACnC,EAGJ,MAAMG,WAAaV,GACf,WAAA3tD,CAAYigB,EAAUquC,EAAMJ,GACxB/d,MAAMlwB,EAAUquC,EAAMJ,GACtBn5D,KAAK2Y,KAAO,OACZ3Y,KAAKq0C,MAAQ,IAAIgZ,EAASniC,EAAU,QAASquC,EACjD,EA2CJ,MAAMC,GACF,kBAAOC,CAAYvuC,EAAUgD,GACzB,MAAM6pC,EAAiB7pC,EAAQqpC,SAAS,aAAa,GAAO,GAC5D,GAAIQ,EAAetK,WAAY,CAC3B,MAAOiM,EAA0BC,EAA2BD,GAA4BxrC,EAAQqpC,SAAS,oBAAoB,GAAO,GAAMtyD,QAC1I,GAAIy0D,GAA4BC,EAA0B,CACtD,MAAMR,EAAkB,CACpBO,EACAC,GAEJ,OAAO,IAAIH,GAAUtuC,EAAU6sC,EAAexK,YAAa4L,EAC/D,CACJ,CACA,OAAO,IACX,CACA,KAAA/4C,CAAM3Z,GACFzG,KAAK45D,WAAWrzD,SAASmhC,GAAYA,EAAUtnB,MAAM3Z,IAEzD,CACA,OAAAwyD,CAAQxyD,GACJzG,KAAK45D,WAAWrzD,SAASmhC,GAAYA,EAAUuxB,QAAQxyD,IAE3D,CAEA,YAAAyyD,CAAahvD,GACTlK,KAAK45D,WAAWrzD,SAASmhC,GAAYA,EAAUwxB,aAAahvD,IAEhE,CACA,WAAAe,CAAYigB,EAAU2uC,EAAYV,GAC9Bn5D,KAAKkrB,SAAWA,EAChBlrB,KAAK45D,WAAa,GAvCfpO,EAwC0BqO,GAxCArM,OAAO1sC,QAAQ,gBAAiB,QAAQA,QAAQ,eAAgB,MAAM7b,MAAM,eAyCpGsB,SAASmhC,IACV,GAAkB,SAAdA,EACA,OAEJ,MAAO/uB,EAAM7U,GA3CzB,SAAwB4jC,GACpB,MAAO/uB,EAAO,GAAI7U,EAAQ,IAAM4jC,EAAUziC,MAAM,KAChD,MAAO,CACH0T,EAAK60C,OACL1pD,EAAM0pD,OAAO1sC,QAAQ,IAAK,IAElC,CAqCkCg5C,CAAepyB,GAC/BqyB,EAAgBP,GAAUQ,eAAerhD,GAC3CohD,GACA/5D,KAAK45D,WAAWn6D,KAAK,IAAIs6D,EAAc/5D,KAAKkrB,SAAUpnB,EAAOq1D,GACjE,GAER,EAEJK,GAAUQ,eAAiB,CACvB/wB,UA/PJ,MACI,KAAA7oB,CAAM3Z,GACF,MAAM,EAAER,EAAE,EAAEpD,GAAO7C,KAAKkK,MACxBzD,EAAIwiC,UAAUhjC,GAAK,EAAGpD,GAAK,EAC/B,CACA,OAAAo2D,CAAQxyD,GACJ,MAAM,EAAER,EAAE,EAAEpD,GAAO7C,KAAKkK,MACxBzD,EAAIwiC,WAAW,EAAIhjC,GAAK,GAAI,EAAIpD,GAAK,EACzC,CACA,YAAAq2D,CAAahvD,GACT,MAAM,EAAEjE,EAAE,EAAEpD,GAAO7C,KAAKkK,MACxBA,EAAMsnD,eAAe,CACjB,EACA,EACA,EACA,EACAvrD,GAAK,EACLpD,GAAK,GAEb,CACA,WAAAoI,CAAYjI,EAAGkH,GACXlK,KAAK2Y,KAAO,YACZ3Y,KAAKkK,MAAQgnD,GAAMxuB,MAAMx4B,EAC7B,GAyOAs7C,OAtOJ,MACI,KAAAplC,CAAM3Z,GACF,MAAM,GAAE6G,EAAG,GAAEC,EAAG,QAAEsrD,EAAQ,QAAEC,EAAQ,MAAEzkB,GAAWr0C,KAC3C+4D,EAAKzrD,EAAKurD,EAAQ3J,UAAU,KAC5B8J,EAAKzrD,EAAKurD,EAAQ5J,UAAU,KAClCzoD,EAAIwiC,UAAU8vB,EAAIC,GAClBvyD,EAAI++C,OAAOnR,EAAMsb,cACjBlpD,EAAIwiC,WAAW8vB,GAAKC,EACxB,CACA,OAAAC,CAAQxyD,GACJ,MAAM,GAAE6G,EAAG,GAAEC,EAAG,QAAEsrD,EAAQ,QAAEC,EAAQ,MAAEzkB,GAAWr0C,KAC3C+4D,EAAKzrD,EAAKurD,EAAQ3J,UAAU,KAC5B8J,EAAKzrD,EAAKurD,EAAQ5J,UAAU,KAClCzoD,EAAIwiC,UAAU8vB,EAAIC,GAClBvyD,EAAI++C,QAAQ,EAAInR,EAAMsb,cACtBlpD,EAAIwiC,WAAW8vB,GAAKC,EACxB,CACA,YAAAE,CAAahvD,GACT,MAAM,GAAEoD,EAAG,GAAEC,EAAG,MAAE8mC,GAAWr0C,KACvBi6D,EAAM5lB,EAAMsb,aAClBzlD,EAAMsnD,eAAe,CACjB,EACA,EACA,EACA,EACAlkD,GAAM,EACNC,GAAM,IAEVrD,EAAMsnD,eAAe,CACjB7nD,KAAK6qC,IAAIylB,GACTtwD,KAAK8qC,IAAIwlB,IACRtwD,KAAK8qC,IAAIwlB,GACVtwD,KAAK6qC,IAAIylB,GACT,EACA,IAEJ/vD,EAAMsnD,eAAe,CACjB,EACA,EACA,EACA,GACClkD,GAAM,GACNC,GAAM,GAEf,CACA,WAAAtC,CAAYigB,EAAUs6B,EAAQ2T,GAC1Bn5D,KAAK2Y,KAAO,SACZ,MAAMygD,EAAU1N,EAAUlG,GAC1BxlD,KAAKq0C,MAAQ,IAAIgZ,EAASniC,EAAU,QAASkuC,EAAQ,IACrDp5D,KAAK64D,QAAUM,EAAgB,GAC/Bn5D,KAAK84D,QAAUK,EAAgB,GAC/Bn5D,KAAKsN,GAAK8rD,EAAQ,IAAM,EACxBp5D,KAAKuN,GAAK6rD,EAAQ,IAAM,CAC5B,GAkLApgC,MA/KJ,MACI,KAAA5Y,CAAM3Z,GACF,MAAQuyB,OAAO,EAAE/yB,EAAE,EAAEpD,GAAK,QAAEg2D,EAAQ,QAAEC,GAAa94D,KAC7C+4D,EAAKF,EAAQ3J,UAAU,KACvB8J,EAAKF,EAAQ5J,UAAU,KAC7BzoD,EAAIwiC,UAAU8vB,EAAIC,GAClBvyD,EAAIuyB,MAAM/yB,EAAGpD,GAAKoD,GAClBQ,EAAIwiC,WAAW8vB,GAAKC,EACxB,CACA,OAAAC,CAAQxyD,GACJ,MAAQuyB,OAAO,EAAE/yB,EAAE,EAAEpD,GAAK,QAAEg2D,EAAQ,QAAEC,GAAa94D,KAC7C+4D,EAAKF,EAAQ3J,UAAU,KACvB8J,EAAKF,EAAQ5J,UAAU,KAC7BzoD,EAAIwiC,UAAU8vB,EAAIC,GAClBvyD,EAAIuyB,MAAM,EAAI/yB,EAAG,EAAIpD,GAAKoD,GAC1BQ,EAAIwiC,WAAW8vB,GAAKC,EACxB,CACA,YAAAE,CAAahvD,GACT,MAAM,EAAEjE,EAAE,EAAEpD,GAAO7C,KAAKg5B,MACxB9uB,EAAMsnD,eAAe,CACjBvrD,GAAK,EACL,EACA,EACApD,GAAK,EACL,EACA,GAER,CACA,WAAAoI,CAAYjI,EAAGg2B,EAAOmgC,GAClBn5D,KAAK2Y,KAAO,QACZ,MAAMuhD,EAAYhJ,GAAME,WAAWp4B,GAEf,IAAhBkhC,EAAUj0D,GAA2B,IAAhBi0D,EAAUr3D,IAC/Bq3D,EAAUj0D,EAAIymD,EACdwN,EAAUr3D,EAAI6pD,GAElB1sD,KAAKg5B,MAAQkhC,EACbl6D,KAAK64D,QAAUM,EAAgB,GAC/Bn5D,KAAK84D,QAAUK,EAAgB,EACnC,GAyIA1T,OAAQmT,GACRlT,MAzFJ,cAAoB4T,GAChB,WAAAruD,CAAYigB,EAAUquC,EAAMJ,GACxB/d,MAAMlwB,EAAUquC,EAAMJ,GACtBn5D,KAAK2Y,KAAO,QACZ3Y,KAAKylD,OAAS,CACV,EACA,EACA97C,KAAK0f,IAAIrpB,KAAKq0C,MAAMsb,cACpB,EACA,EACA,EAER,GA8EAhK,MA3EJ,cAAoB2T,GAChB,WAAAruD,CAAYigB,EAAUquC,EAAMJ,GACxB/d,MAAMlwB,EAAUquC,EAAMJ,GACtBn5D,KAAK2Y,KAAO,QACZ3Y,KAAKylD,OAAS,CACV,EACA97C,KAAK0f,IAAIrpB,KAAKq0C,MAAMsb,cACpB,EACA,EACA,EACA,EAER,IAkEJ,MAAMwK,GACF,YAAA75B,CAAasb,GACT,IAAIwe,EAAoBh9C,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GACpF,MAAMye,EAAO77B,KAAKmuB,WAAWnlB,IAAI4yC,GACjC,IAAK/f,GAAQu+B,EAAmB,CAC5B,MAAMv+B,EAAO,IAAIwxB,EAASrtD,KAAKkrB,SAAU0wB,EAAM,IAE/C,OADA57C,KAAKmuB,WAAWzb,IAAIkpC,EAAM/f,GACnBA,CACX,CACA,OAAOA,GAAQwxB,EAASrhB,MAAMhsC,KAAKkrB,SACvC,CACA,gBAAAglC,GACI,IAAI1iB,EACJ,IAAK,MAAOrpC,EAAKL,KAAU9D,KAAKmuB,WAC5B,GAAY,SAARhqB,GAAkBA,EAAI8pD,SAAS,SAAU,CACzCzgB,EAAO1pC,EACP,KACJ,CAEJ,OAAO0pC,GAAQ6f,EAASrhB,MAAMhsC,KAAKkrB,SACvC,CACA,QAAAqsC,CAAS3b,GACL,IAAIwe,EAAoBh9C,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GAAYi9C,EAAgBj9C,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GAC5K,MAAMqO,EAAQzrB,KAAKs6D,OAAOtxD,IAAI4yC,GAC9B,GAAInwB,EACA,OAAOA,EAEX,MAAMoQ,EAAO77B,KAAKsgC,aAAasb,GAC/B,GAAI/f,EAAK4xB,WAGL,OAFAztD,KAAKs6D,OAAO5nD,IAAIkpC,EAAM/f,GAEfA,EAEX,IAAKw+B,EAAe,CAChB,MAAM,OAAEjiB,GAAYp4C,KACpB,GAAIo4C,EAAQ,CACR,MAAMmiB,EAAcniB,EAAOmf,SAAS3b,GACpC,GAAI2e,EAAY9M,WACZ,OAAO8M,CAEf,CACJ,CACA,GAAIH,EAAmB,CACnB,MAAM3uC,EAAQ,IAAI4hC,EAASrtD,KAAKkrB,SAAU0wB,EAAM,IAEhD,OADA57C,KAAKs6D,OAAO5nD,IAAIkpC,EAAMnwB,GACfA,CACX,CACA,OAAO4hC,EAASrhB,MAAMhsC,KAAKkrB,SAC/B,CACA,MAAA+T,CAAOx4B,GAGH,GAA6C,SAAzCzG,KAAKu3D,SAAS,WAAWhK,aAAsE,WAA5CvtD,KAAKu3D,SAAS,cAAchK,YAAnF,CAIA,GADA9mD,EAAI+zD,OACAx6D,KAAKu3D,SAAS,QAAQ9J,WAAY,CAClC,MAAMgN,EAAOz6D,KAAKu3D,SAAS,QAAQ3H,gBAC/B6K,IACAz6D,KAAK06D,aAAaj0D,GAClBg0D,EAAKr6C,MAAM3Z,EAAKzG,MAExB,MAAO,GAAiD,SAA7CA,KAAKu3D,SAAS,UAAUpJ,SAAS,QAAoB,CAC5D,MAAM73B,EAASt2B,KAAKu3D,SAAS,UAAU3H,gBACnCt5B,IACAt2B,KAAK06D,aAAaj0D,GAClB6vB,EAAOlW,MAAM3Z,EAAKzG,MAE1B,MACIA,KAAK26D,WAAWl0D,GAChBzG,KAAK46D,eAAen0D,GACpBzG,KAAK66D,aAAap0D,GAEtBA,EAAIq0D,SAnBJ,CAoBJ,CACA,UAAAH,CAAW33D,GAEX,CACA,YAAA03D,CAAaj0D,GAET,MAAMihC,EAAY8xB,GAAUC,YAAYz5D,KAAKkrB,SAAUlrB,MACnD0nC,GACAA,EAAUtnB,MAAM3Z,GAGpB,MAAMs0D,EAAoB/6D,KAAKu3D,SAAS,aAAa,GAAO,GAC5D,GAAIwD,EAAkBtN,WAAY,CAC9B,MAAMkH,EAAOoG,EAAkBnL,gBAC3B+E,GACAA,EAAKv0C,MAAM3Z,EAEnB,CACJ,CACA,YAAAo0D,CAAa73D,GAEb,CACA,cAAA43D,CAAen0D,GACXzG,KAAKg7D,SAASz0D,SAAS00D,IACnBA,EAAMh8B,OAAOx4B,EAAI,GAEzB,CACA,QAAAy0D,CAASC,GACL,MAAMF,EAAQE,aAAqBhB,GAAUgB,EAAYn7D,KAAKkrB,SAASC,cAAcgwC,GACrFF,EAAM7iB,OAASp4C,KACVm6D,GAAQiB,iBAAiB10B,SAASu0B,EAAMtiD,OACzC3Y,KAAKg7D,SAASv7D,KAAKw7D,EAE3B,CACA,eAAAI,CAAgB7O,GACZ,IAAI8O,EACJ,MAAM,KAAEt2D,GAAUhF,KAClB,GAA4B,mBAAjBgF,EAAK2mD,QACZ,OAAO3mD,EAAK2mD,QAAQa,GAExB,MAAM+O,EAA6C,QAA7BD,EAAMt2D,EAAKs7B,oBAAkC,IAARg7B,OAAiB,EAASA,EAAI94D,KAAKwC,EAAM,SACpG,SAAKu2D,GAAiC,KAAjBA,IAGdA,EAAat2D,MAAM,KAAKu2D,MAAMC,GAAa,IAAIp7D,OAAOo7D,KAAgBjP,GAEjF,CACA,4BAAAkP,GACI,MAAM,OAAEpB,EAAO,kBAAEqB,GAAuB37D,KAAKkrB,SAC7C,IAAK,MAAOshC,EAAU/gC,KAAU6uC,EAC5B,IAAK9N,EAASgC,WAAW,MAAQxuD,KAAKq7D,gBAAgB7O,GAAW,CAC7D,MAAMoP,EAAcD,EAAkB3yD,IAAIwjD,GAC1C,GAAI/gC,EACA,IAAK,MAAOmwB,EAAMigB,KAAcpwC,EAAM,CAClC,IAAIqwC,EAAsB97D,KAAK27D,kBAAkB3yD,IAAI4yC,QAClB,IAAxBkgB,IACPA,EAAsB,OAEtBF,GAAeA,GAAeE,IAC1BD,GACA77D,KAAKs6D,OAAO5nD,IAAIkpC,EAAMigB,GAE1B77D,KAAK27D,kBAAkBjpD,IAAIkpC,EAAMggB,GAEzC,CAER,CAER,CACA,YAAAG,CAAa7tC,EAAS8tC,GAgBlB,OAfmBA,EAAankC,QAAO,CAACokC,EAAWrgB,KAC/C,MAAMigB,EAAY3tC,EAAQqpC,SAAS3b,GACnC,IAAKigB,EAAUpO,WACX,OAAOwO,EAEX,MAAMn4D,EAAQ+3D,EAAUtO,YAExB,OADAsO,EAAU3N,SAAS,IACZ,IACA+N,EACH,CACIrgB,EACA93C,GAEP,GACF,GAEP,CACA,aAAAo4D,CAAchuC,EAASosC,GACnBA,EAAO/zD,SAAS8rD,IACZ,IAAKzW,EAAM93C,GAASuuD,EACpBnkC,EAAQqpC,SAAS3b,GAAM,GAAMsS,SAASpqD,EAAM,GAEpD,CACA,YAAAq4D,GACI,IAAIb,EACJ,OAAkG,KAAlE,QAAvBA,EAAMt7D,KAAKo4C,cAA4B,IAARkjB,OAAiB,EAASA,EAAIN,SAAS3jD,QAAQrX,MAC3F,CACA,WAAAiL,CAAYigB,EAAUlmB,EAAMo3D,GAAmB,GAY3C,GAXAp8D,KAAKkrB,SAAWA,EAChBlrB,KAAKgF,KAAOA,EACZhF,KAAKo8D,iBAAmBA,EACxBp8D,KAAK2Y,KAAO,GACZ3Y,KAAKmuB,WAAa,IAAI7b,IACtBtS,KAAKs6D,OAAS,IAAIhoD,IAClBtS,KAAK27D,kBAAoB,IAAIrpD,IAC7BtS,KAAKq8D,iBAAkB,EACvBr8D,KAAKs8D,qBAAuB,GAC5Bt8D,KAAKo4C,OAAS,KACdp4C,KAAKg7D,SAAW,IACXh2D,GAA0B,IAAlBA,EAAKu3D,SACd,OASJ,GANAhjD,MAAM+vB,KAAKtkC,EAAKmpB,YAAY5nB,SAASi2D,IACjC,MAAMC,GA51CkB7gB,EA41CgB4gB,EAAUC,SA31CtD5Q,EAAagC,KAAKjS,GACXA,EAAK76B,cAET66B,GAJP,IAAgCA,EA61CxB57C,KAAKmuB,WAAWzb,IAAI+pD,EAAU,IAAIpP,EAASniC,EAAUuxC,EAAUD,EAAU14D,OAAO,IAEpF9D,KAAK07D,+BAED17D,KAAKsgC,aAAa,SAASmtB,WAAY,CACvC,MAAM6M,EAASt6D,KAAKsgC,aAAa,SAASitB,YAAYtoD,MAAM,KAAKhF,KAAK+C,GAAIA,EAAEwqD,SAE5E8M,EAAO/zD,SAASklB,IACZ,IAAKA,EACD,OAEJ,MAAOmwB,EAAM93C,GAAS2nB,EAAMxmB,MAAM,KAAKhF,KAAK+C,GAAIA,EAAEwqD,SAE9C5R,GACA57C,KAAKs6D,OAAO5nD,IAAIkpC,EAAM,IAAIyR,EAASniC,EAAU0wB,EAAM93C,GACvD,GAER,CACA,MAAM,YAAE+rD,GAAiB3kC,EACnBvrB,EAAKK,KAAKsgC,aAAa,MAEzB3gC,EAAG8tD,aACEoC,EAAYh9C,IAAIlT,EAAG4tD,cACpBsC,EAAYn9C,IAAI/S,EAAG4tD,YAAavtD,OAGxCuZ,MAAM+vB,KAAKtkC,EAAK03D,YAAYn2D,SAAS40D,IACjC,GAA2B,IAAvBA,EAAUoB,SACVv8D,KAAKk7D,SAASC,QAEX,GAAIiB,IAA4C,IAAvBjB,EAAUoB,UAAyC,IAAvBpB,EAAUoB,UAAiB,CACnF,MAAMI,EAAWzxC,EAASU,eAAeuvC,GACrCwB,EAASC,UAAUt8D,OAAS,GAC5BN,KAAKk7D,SAASyB,EAGtB,IAER,EAEJxC,GAAQiB,iBAAmB,CACvB,SAGJ,MAAMyB,WAAuB1C,GACzB,WAAAlvD,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,EAC1B,EAGJ,SAASU,GAAeC,GACpB,MAAMC,EAAUD,EAAWvP,OAC3B,MAAO,SAASK,KAAKmP,GAAWA,EAAU,IAAK38D,OAAO28D,EAAS,IACnE,CAQI,SAASC,GAAiBC,GAC1B,IAAKA,EACD,MAAO,GAEX,MAAMC,EAAkBD,EAAU1P,OAAOzsC,cACzC,OAAOo8C,GACH,IAAK,SACL,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,QACD,OAAOA,EACX,QACI,MAAI,yBAAyBtP,KAAKsP,GACvBA,EAEJ,GAEnB,CAKI,SAASC,GAAkBC,GAC3B,IAAKA,EACD,MAAO,GAEX,MAAMC,EAAmBD,EAAW7P,OAAOzsC,cAC3C,OAAOu8C,GACH,IAAK,SACL,IAAK,OACL,IAAK,UACL,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,QACD,OAAOA,EACX,QACI,MAAI,WAAWzP,KAAKyP,GACTA,EAEJ,GAEnB,CACA,MAAMC,GACF,YAAO76B,GACH,IAAgF86B,EAAUpgD,UAAU9c,OAAS,EAAI8c,UAAU,QAAK,EAC5H8/C,EAAY,GACZO,EAAc,GACdJ,EAAa,GACbK,EAAW,GACXX,EAAa,GACjB,MAAMY,EAAQnS,EANHpuC,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,IAMzCowC,OAAOvoD,MAAM,KAC1CyN,EAAM,CACRgrD,UAAU,EACVR,WAAW,EACXG,YAAY,EACZI,aAAa,GAwCjB,OAtCAE,EAAMp3D,SAASq3D,IACX,QAAO,GACH,KAAMlrD,EAAIwqD,WAAaK,GAAKjD,OAAO5zB,SAASk3B,GAC3B,YAATA,IACAV,EAAYU,GAEhBlrD,EAAIwqD,WAAY,EAChB,MACJ,KAAMxqD,EAAI+qD,aAAeF,GAAKM,SAASn3B,SAASk3B,GAC/B,YAATA,IACAH,EAAcG,GAElBlrD,EAAIwqD,WAAY,EAChBxqD,EAAI+qD,aAAc,EAClB,MACJ,KAAM/qD,EAAI2qD,YAAcE,GAAKxkC,QAAQ2N,SAASk3B,GAC7B,YAATA,IACAP,EAAaO,GAEjBlrD,EAAIwqD,WAAY,EAChBxqD,EAAI+qD,aAAc,EAClB/qD,EAAI2qD,YAAa,EACjB,MACJ,KAAM3qD,EAAIgrD,SACO,YAATE,IACAF,EAAWE,EAAK34D,MAAM,KAAK,IAAM,IAErCyN,EAAIwqD,WAAY,EAChBxqD,EAAI+qD,aAAc,EAClB/qD,EAAI2qD,YAAa,EACjB3qD,EAAIgrD,UAAW,EACf,MACJ,QACiB,YAATE,IACAb,GAAca,GAE1B,IAEG,IAAIL,GAAKL,EAAWO,EAAaJ,EAAYK,EAAUX,EAAYS,EAC9E,CACA,QAAAz9D,GACI,MAAO,CACHk9D,GAAiBj9D,KAAKk9D,WACtBl9D,KAAKy9D,YACLL,GAAkBp9D,KAAKq9D,YACvBr9D,KAAK09D,UAhHUX,EAkHG/8D,KAAK+8D,WAjHL,oBAAZ56D,QAA0B46D,EAAaA,EAAWvP,OAAOvoD,MAAM,KAAKhF,IAAI68D,IAAgBv8D,KAAK,OAkHrGA,KAAK,KAAKitD,OAnHpB,IAA2BuP,CAoHvB,CACA,WAAA9xD,CAAYiyD,EAAWO,EAAaJ,EAAYK,EAAUX,EAAYS,GAClE,MAAMM,EAAcN,EAA6B,iBAAZA,EAAuBD,GAAK76B,MAAM86B,GAAWA,EAAU,CAAC,EAC7Fx9D,KAAK+8D,WAAaA,GAAce,EAAYf,WAC5C/8D,KAAK09D,SAAWA,GAAYI,EAAYJ,SACxC19D,KAAKk9D,UAAYA,GAAaY,EAAYZ,UAC1Cl9D,KAAKq9D,WAAaA,GAAcS,EAAYT,WAC5Cr9D,KAAKy9D,YAAcA,GAAeK,EAAYL,WAClD,EAEJF,GAAKjD,OAAS,gCACdiD,GAAKM,SAAW,4BAChBN,GAAKxkC,QAAU,yEAEf,MAAMglC,GACF,KAAI93D,GACA,OAAOjG,KAAKuwC,EAChB,CACA,KAAI1tC,GACA,OAAO7C,KAAK8U,EAChB,CACA,SAAI6tB,GACA,OAAO3iC,KAAKwwC,GAAKxwC,KAAKuwC,EAC1B,CACA,UAAI1N,GACA,OAAO7iC,KAAK+U,GAAK/U,KAAK8U,EAC1B,CACA,QAAAkc,CAAS/qB,EAAGpD,QACS,IAANoD,KACHykB,MAAM1qB,KAAKuwC,KAAO7lB,MAAM1qB,KAAKwwC,OAC7BxwC,KAAKuwC,GAAKtqC,EACVjG,KAAKwwC,GAAKvqC,GAEVA,EAAIjG,KAAKuwC,KACTvwC,KAAKuwC,GAAKtqC,GAEVA,EAAIjG,KAAKwwC,KACTxwC,KAAKwwC,GAAKvqC,SAGD,IAANpD,KACH6nB,MAAM1qB,KAAK8U,KAAO4V,MAAM1qB,KAAK+U,OAC7B/U,KAAK8U,GAAKjS,EACV7C,KAAK+U,GAAKlS,GAEVA,EAAI7C,KAAK8U,KACT9U,KAAK8U,GAAKjS,GAEVA,EAAI7C,KAAK+U,KACT/U,KAAK+U,GAAKlS,GAGtB,CACA,IAAAm7D,CAAK/3D,GACDjG,KAAKgxB,SAAS/qB,EAAG,EACrB,CACA,IAAAg4D,CAAKp7D,GACD7C,KAAKgxB,SAAS,EAAGnuB,EACrB,CACA,cAAAq7D,CAAezL,GACX,IAAKA,EACD,OAEJ,MAAM,GAAEliB,EAAG,GAAEz7B,EAAG,GAAE07B,EAAG,GAAEz7B,GAAQ09C,EAC/BzyD,KAAKgxB,SAASuf,EAAIz7B,GAClB9U,KAAKgxB,SAASwf,EAAIz7B,EACtB,CACA,QAAAopD,CAASr7D,EAAGs7D,EAAI51D,EAAIC,EAAI6zC,GACpB,OAAO3yC,KAAKkB,IAAI,EAAI/H,EAAG,GAAKs7D,EAAK,EAAIz0D,KAAKkB,IAAI,EAAI/H,EAAG,GAAKA,EAAI0F,EAAK,GAAK,EAAI1F,GAAK6G,KAAKkB,IAAI/H,EAAG,GAAK2F,EAAKkB,KAAKkB,IAAI/H,EAAG,GAAKw5C,CAC5H,CACA,cAAA+hB,CAAeC,EAAMF,EAAI51D,EAAIC,EAAI6zC,GAC7B,MAAM93C,EAAI,EAAI45D,EAAK,GAAK51D,EAAK,EAAIC,EAC3BlE,GAAK,EAAI65D,EAAK,EAAI51D,EAAK,EAAIC,EAAK,EAAI6zC,EACpCruC,EAAI,EAAIzF,EAAK,EAAI41D,EACvB,GAAU,IAAN75D,EAAS,CACT,GAAU,IAANC,EACA,OAEJ,MAAM1B,GAAKmL,EAAIzJ,EAQf,YAPI,EAAI1B,GAAKA,EAAI,IACTw7D,EACAt+D,KAAKg+D,KAAKh+D,KAAKm+D,SAASr7D,EAAGs7D,EAAI51D,EAAIC,EAAI6zC,IAEvCt8C,KAAKi+D,KAAKj+D,KAAKm+D,SAASr7D,EAAGs7D,EAAI51D,EAAIC,EAAI6zC,KAInD,CACA,MAAMiiB,EAAO50D,KAAKkB,IAAIrG,EAAG,GAAK,EAAIyJ,EAAI1J,EACtC,GAAIg6D,EAAO,EACP,OAEJ,MAAM5vD,IAAOnK,EAAImF,KAAKoG,KAAKwuD,KAAU,EAAIh6D,GACrC,EAAIoK,GAAMA,EAAK,IACX2vD,EACAt+D,KAAKg+D,KAAKh+D,KAAKm+D,SAASxvD,EAAIyvD,EAAI51D,EAAIC,EAAI6zC,IAExCt8C,KAAKi+D,KAAKj+D,KAAKm+D,SAASxvD,EAAIyvD,EAAI51D,EAAIC,EAAI6zC,KAGhD,MAAM6E,IAAO38C,EAAImF,KAAKoG,KAAKwuD,KAAU,EAAIh6D,GACrC,EAAI48C,GAAMA,EAAK,IACXmd,EACAt+D,KAAKg+D,KAAKh+D,KAAKm+D,SAAShd,EAAIid,EAAI51D,EAAIC,EAAI6zC,IAExCt8C,KAAKi+D,KAAKj+D,KAAKm+D,SAAShd,EAAIid,EAAI51D,EAAIC,EAAI6zC,IAGpD,CAEA,cAAAkiB,CAAeC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAC9Ch/D,KAAKgxB,SAASytC,EAAKC,GACnB1+D,KAAKgxB,SAAS+tC,EAAKC,GACnBh/D,KAAKq+D,gBAAe,EAAMI,EAAKE,EAAKE,EAAKE,GACzC/+D,KAAKq+D,gBAAe,EAAOK,EAAKE,EAAKE,EAAKE,EAC9C,CACA,iBAAAC,CAAkBR,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACvC,MAAMI,EAAOT,EAAM,EAAI,GAAKE,EAAMF,GAE5BU,EAAOT,EAAM,EAAI,GAAKE,EAAMF,GAE5BU,EAAOF,EAAO,EAAI,GAAKL,EAAMJ,GAE7BY,EAAOF,EAAO,EAAI,GAAKL,EAAMJ,GAEnC1+D,KAAKw+D,eAAeC,EAAKC,EAAKQ,EAAME,EAAMD,EAAME,EAAMR,EAAKC,EAC/D,CACA,YAAApM,CAAazsD,EAAGpD,GACZ,MAAM,GAAE0tC,EAAG,GAAEz7B,EAAG,GAAE07B,EAAG,GAAEz7B,GAAQ/U,KAC/B,OAAOuwC,GAAMtqC,GAAKA,GAAKuqC,GAAM17B,GAAMjS,GAAKA,GAAKkS,CACjD,CACA,WAAA9J,CAAYslC,EAAK5lC,OAAO2jC,IAAKx5B,EAAKnK,OAAO2jC,IAAKkC,EAAK7lC,OAAO2jC,IAAKv5B,EAAKpK,OAAO2jC,KACvEtuC,KAAKuwC,GAAKA,EACVvwC,KAAK8U,GAAKA,EACV9U,KAAKwwC,GAAKA,EACVxwC,KAAK+U,GAAKA,EACV/U,KAAKgxB,SAASuf,EAAIz7B,GAClB9U,KAAKgxB,SAASwf,EAAIz7B,EACtB,EAGJ,MAAMuqD,WAAwBnF,GAC1B,gBAAAoF,GACI,IAAIxP,EAAU,EAEV7hC,EAAUluB,KACd,KAAMkuB,GAAQ,CACV,MAAMsxC,EAAetxC,EAAQqpC,SAAS,WAAW,GAAO,GAEpDiI,EAAa/R,UAAS,KACtBsC,GAAWyP,EAAanR,aAE5BngC,EAAUA,EAAQkqB,MACtB,CACA,OAAO2X,CACX,CACA,UAAA4K,CAAWl0D,GACP,IAAIg5D,EAAcriD,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GAC9E,IAAKqiD,EAAa,CAEd,MAAMC,EAAgB1/D,KAAKu3D,SAAS,QAC9BoI,EAAuB3/D,KAAKu3D,SAAS,gBACrCqI,EAAkB5/D,KAAKu3D,SAAS,UAChCsI,EAAoB7/D,KAAKu3D,SAAS,kBACxC,GAAImI,EAAc5R,kBAAmB,CACjC,MAAMgS,EAAYJ,EAAc5P,uBAAuB9vD,KAAM2/D,GACzDG,IACAr5D,EAAIq5D,UAAYA,EAExB,MAAO,GAAIJ,EAAcjS,WAAY,CACC,iBAA9BiS,EAAcnS,aACdmS,EAAcxR,SAASluD,KAAKu3D,SAAS,SAASjJ,YAElD,MAAMwR,EAAYJ,EAAcpR,WACd,YAAdwR,IACAr5D,EAAIq5D,UAA0B,SAAdA,EAAuB,gBAAkBA,EAEjE,CACA,GAAIH,EAAqBlS,WAAY,CACjC,MAAMqS,EAAY,IAAIzS,EAASrtD,KAAKkrB,SAAU,OAAQzkB,EAAIq5D,WAAWxP,WAAWqP,GAAsBrR,WACtG7nD,EAAIq5D,UAAYA,CACpB,CAEA,GAAIF,EAAgB9R,kBAAmB,CACnC,MAAMmG,EAAc2L,EAAgB9P,uBAAuB9vD,KAAM6/D,GAC7D5L,IACAxtD,EAAIwtD,YAAcA,EAE1B,MAAO,GAAI2L,EAAgBnS,WAAY,CACC,iBAAhCmS,EAAgBrS,aAChBqS,EAAgB1R,SAASluD,KAAKu3D,SAAS,SAASjJ,YAEpD,MAAM2F,EAAc2L,EAAgBrS,YAChB,YAAhB0G,IACAxtD,EAAIwtD,YAA8B,SAAhBA,EAAyB,gBAAkBA,EAErE,CACA,GAAI4L,EAAkBpS,WAAY,CAC9B,MAAMwG,EAAc,IAAI5G,EAASrtD,KAAKkrB,SAAU,SAAUzkB,EAAIwtD,aAAa3D,WAAWuP,GAAmBtS,YACzG9mD,EAAIwtD,YAAcA,CACtB,CACA,MAAM8L,EAAuB//D,KAAKu3D,SAAS,gBAC3C,GAAIwI,EAAqBtS,WAAY,CACjC,MAAMuS,EAAeD,EAAqB7Q,YAC1CzoD,EAAIw5D,UAAaD,GAAetT,CAEpC,CACA,MAAMwT,EAAyBlgE,KAAKu3D,SAAS,kBACvC4I,EAA0BngE,KAAKu3D,SAAS,mBACxC6I,EAAuBpgE,KAAKu3D,SAAS,qBAGrC8I,EAA2BrgE,KAAKu3D,SAAS,oBACzC+I,EAAuBtgE,KAAKu3D,SAAS,qBAe3C,GAdI2I,EAAuBzS,aACvBhnD,EAAIytD,QAAUgM,EAAuB3S,aAErC4S,EAAwB1S,aACxBhnD,EAAI0tD,SAAWgM,EAAwB5S,aAEvC6S,EAAqB3S,aACrBhnD,EAAI2tD,WAAagM,EAAqB/R,aAOtCgS,EAAyB5S,YAAuD,SAAzC4S,EAAyB9S,YAAwB,CACxF,MAAMgT,EAAO7U,EAAU2U,EAAyB9S,kBACjB,IAApB9mD,EAAI+5D,YACX/5D,EAAI+5D,YAAYD,QAEc,IAAvB95D,EAAIg6D,eAEXh6D,EAAIg6D,eAAiBF,OAEE,IAAhB95D,EAAIi6D,SAA6C,IAAhBH,EAAKjgE,QAA4B,IAAZigE,EAAK,KAElE95D,EAAIi6D,QAAUH,GAElB,MAAM9uB,EAAS6uB,EAAqBpR,iBACF,IAAvBzoD,EAAIk6D,eACXl6D,EAAIk6D,eAAiBlvB,OAEe,IAA7BhrC,EAAIm6D,qBAEXn6D,EAAIm6D,qBAAuBnvB,OAEE,IAAtBhrC,EAAIo6D,gBAEXp6D,EAAIo6D,cAAgBpvB,EAE5B,CACJ,CAGA,GADAzxC,KAAK8gE,qBAAsB,OACH,IAAbr6D,EAAIs6D,KAAsB,CACjC,MAAMC,EAAgBhhE,KAAKu3D,SAAS,QAC9B0J,EAAqBjhE,KAAKu3D,SAAS,cACnC2J,EAAuBlhE,KAAKu3D,SAAS,gBACrC4J,EAAsBnhE,KAAKu3D,SAAS,eACpC6J,EAAoBphE,KAAKu3D,SAAS,aAClC8J,EAAsBrhE,KAAKu3D,SAAS,eACpCwJ,EAAO,IAAIxD,GAAK0D,EAAmB1T,YAAa2T,EAAqB3T,YAAa4T,EAAoB5T,YAAa6T,EAAkB3T,WAAa,GAAGptD,OAAO+gE,EAAkBlS,WAAU,GAAO,MAAQ,GAAImS,EAAoB9T,YAAagQ,GAAK76B,MAAMs+B,EAAczT,YAAa9mD,EAAIs6D,OAC5RE,EAAmB/S,SAAS6S,EAAK7D,WACjCgE,EAAqBhT,SAAS6S,EAAKtD,aACnC0D,EAAoBjT,SAAS6S,EAAK1D,YAClC+D,EAAkBlT,SAAS6S,EAAKrD,UAChC2D,EAAoBnT,SAAS6S,EAAKhE,YAClCt2D,EAAIs6D,KAAOA,EAAKhhE,WACZqhE,EAAkBrT,aAClB/tD,KAAKkrB,SAAS8jC,OAASoS,EAAkBlS,YACzClvD,KAAK8gE,qBAAsB,EAEnC,CACKrB,IAEDz/D,KAAK06D,aAAaj0D,GAElBA,EAAI66D,YAActhE,KAAKu/D,mBAE/B,CACA,YAAA1E,CAAap0D,GACT20C,MAAMyf,aAAap0D,GACfzG,KAAK8gE,qBACL9gE,KAAKkrB,SAASq2C,WAEtB,CACA,WAAAt2D,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK8gE,qBAAsB,CAC/B,EAGJ,MAAMU,WAAoBlC,GACtB,UAAA3E,CAAWl0D,GACP,IAAIg5D,EAAcriD,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GAC9Eg+B,MAAMuf,WAAWl0D,EAAKg5D,GACtB,MAAMgC,EAAezhE,KAAKu3D,SAAS,qBAAqBnH,mBAAqBpwD,KAAKu3D,SAAS,sBAAsBnH,kBAC7GqR,IACAh7D,EAAIg7D,aAAeA,EAE3B,CACA,qBAAAC,GACI1hE,KAAKiG,EAAI,EACTjG,KAAK6C,EAAI,EACT7C,KAAK2hE,UAAY,GACjB3hE,KAAK4hE,eAAiB,EACtB5hE,KAAKivC,KAAOtkC,OAAO6P,kBACnBxa,KAAKkvC,KAAOvkC,OAAO8P,iBACvB,CACA,cAAAonD,CAAep7D,GACX,GAAkB,SAAdzG,KAAK2Y,KACL,OAAO3Y,KAAK8hE,uBAAuBr7D,GAGvCzG,KAAK0hE,wBACL1hE,KAAK+hE,gCAAgCt7D,GACrC,IAAIgsD,EAAc,KAUlB,OARAzyD,KAAKg7D,SAASz0D,SAAQ,CAACvD,EAAGxC,KACtB,MAAMwhE,EAAmBhiE,KAAKiiE,oBAAoBx7D,EAAKzG,KAAMA,KAAMQ,GAC9DiyD,EAGDA,EAAYyL,eAAe8D,GAF3BvP,EAAcuP,CAGlB,IAEGvP,CACX,CACA,WAAAyP,GACI,MAAM,SAAEh3C,EAAS,OAAEktB,GAAYp4C,KACzBmiE,EAAkB5E,GAAK76B,MAAMxX,EAASzkB,IAAIs6D,MAAMrD,SAEtD,OADiBtlB,EAAOmf,SAAS,aAAalJ,UAAU8T,EAE5D,CACA,sBAAAL,CAAuBr7D,GACnB,MAAMi3D,EAAW19D,KAAKkiE,cACtB,OAAO,IAAInE,GAAY/9D,KAAKiG,EAAGjG,KAAK6C,EAAI66D,EAAU19D,KAAKiG,EAAIjG,KAAKoiE,YAAY37D,GAAMzG,KAAK6C,EAC3F,CACA,QAAAw/D,CAAStB,EAAM/kC,EAAMx7B,GACjB,MAAM8hE,EAAOtmC,EAAKx7B,GAClB,IAAI+hE,EACJ,GAAIxB,EAAKyB,SAAU,CACf,IAAIlH,EACJ,MAAM/K,EAAMv0B,EAAK17B,OACXmiE,EAAWzmC,EAAKx7B,EAAI,GACpBkiE,EAAW1mC,EAAKx7B,EAAI,GAC1B,IAAImiE,EAAa,YACN,IAANniE,GAAwB,MAAbiiE,IAAqBjiE,EAAI+vD,EAAM,GAAkB,MAAbmS,IAChDC,EAAa,YAEbniE,EAAI,GAAkB,MAAbiiE,GAAoBjiE,EAAI+vD,EAAM,GAAkB,MAAbmS,IAC5CC,EAAa,UAEbniE,EAAI,GAAkB,MAAbiiE,IAAqBjiE,IAAM+vD,EAAM,GAAkB,MAAbmS,KAC/CC,EAAa,WAEjBJ,GAAiD,QAAvCjH,EAAMyF,EAAK6B,aAAa55D,IAAIs5D,UAA2B,IAARhH,OAAiB,EAASA,EAAItyD,IAAI25D,KAAgB5B,EAAK8B,OAAO75D,IAAIs5D,EAC/H,MACIC,EAAQxB,EAAK8B,OAAO75D,IAAIs5D,GAK5B,OAHKC,IACDA,EAAQxB,EAAK+B,cAEVP,CACX,CACA,OAAA3F,GACI,MAAO,EACX,CACA,eAAAmG,CAAgB/9D,GACZ,MAAM23D,EAAW33D,GAAQhF,KAAKgF,KACxB03D,EAAanjD,MAAM+vB,KAAKqzB,EAASruC,WAAWouC,YAC5Cn1D,EAAQm1D,EAAWrlD,QAAQslD,GAC3BqG,EAAYtG,EAAWp8D,OAAS,EACtC,IAAI07B,EAAOwvB,EAEXmR,EAAShnC,aAAe,IAOxB,OANc,IAAVpuB,IACAy0B,EAAgBA,EA16Dblb,QAAQ,YAAa,KA46DxBvZ,IAAUy7D,IACVhnC,EAAiBA,EAt6Ddlb,QAAQ,YAAa,KAw6DrBkb,CACX,CACA,cAAA4+B,CAAen0D,GACX,GAAkB,SAAdzG,KAAK2Y,KAEL,YADA3Y,KAAKijE,uBAAuBx8D,GAIhCzG,KAAK0hE,wBACL1hE,KAAK+hE,gCAAgCt7D,GAErCzG,KAAKg7D,SAASz0D,SAAQ,CAACvD,EAAGxC,KACtBR,KAAKkjE,YAAYz8D,EAAKzG,KAAMA,KAAMQ,EAAE,IAExC,MAAM,MAAEs2D,GAAW92D,KAAKkrB,SAASskC,OAE7BsH,EAAMnF,aACNmF,EAAMtE,iBAAiBxyD,KAAMA,KAAK6hE,eAAep7D,GAEzD,CACA,sBAAAw8D,CAAuBx8D,GACnB,MAAM,SAAEykB,EAAS,OAAEktB,GAAYp4C,KACzBmjE,EAAanjE,KAAK48D,UAClBwG,EAAahrB,EAAOmf,SAAS,eAAe3H,gBAClD,GAAIwT,EAAY,CACZ,MAAM,WAAEC,GAAgBD,EAAWE,SAC7BC,EAAUhG,GAAK76B,MAAMxX,EAASzkB,IAAIs6D,MAClCrD,EAAWtlB,EAAOmf,SAAS,aAAalJ,UAAUkV,EAAQ7F,UAC1DR,EAAY9kB,EAAOmf,SAAS,cAAchK,UAAUgW,EAAQrG,WAC5DlkC,EAAQ0kC,EAAW2F,EACnBrnC,EAAOonC,EAAWI,MAAQL,EAAWl+D,MAAM,IAAIyW,UAAUnb,KAAK,IAAM4iE,EACpEhvB,EAAKuX,EAAUtT,EAAO9X,aAAa,MAAMitB,aACzCgD,EAAMv0B,EAAK17B,OACjB,IAAI,IAAIE,EAAI,EAAGA,EAAI+vD,EAAK/vD,IAAI,CACxB,MAAM+hE,EAAQviE,KAAKqiE,SAASe,EAAYpnC,EAAMx7B,GAC9CiG,EAAIwiC,UAAUjpC,KAAKiG,EAAGjG,KAAK6C,GAC3B4D,EAAIuyB,MAAMA,GAAQA,GAClB,MAAMyqC,EAAKh9D,EAAIw5D,UACfx5D,EAAIw5D,UAAYx5D,EAAIw5D,UAAYoD,EAAa3F,EAC3B,WAAdR,GACAz2D,EAAIihC,UAAU,EAAG,EAAG,GAAK,EAAG,EAAG,GAEnC66B,EAAMtjC,OAAOx4B,GACK,WAAdy2D,GACAz2D,EAAIihC,UAAU,EAAG,GAAI,GAAK,EAAG,EAAG,GAEpCjhC,EAAIw5D,UAAYwD,EAChBh9D,EAAIuyB,MAAM,EAAIA,GAAQ,EAAIA,GAC1BvyB,EAAIwiC,WAAWjpC,KAAKiG,GAAIjG,KAAK6C,GAC7B7C,KAAKiG,GAAKy3D,GAAY6E,EAAMmB,WAAaN,EAAWM,WAAaL,OAC5C,IAAVlvB,EAAG3zC,IAAuBkqB,MAAMypB,EAAG3zC,MAC1CR,KAAKiG,GAAKkuC,EAAG3zC,GAErB,CACA,MACJ,CACA,MAAM,EAAEyF,EAAE,EAAEpD,GAAO7C,KAUfyG,EAAIq5D,WACJr5D,EAAIk9D,SAASR,EAAYl9D,EAAGpD,GAE5B4D,EAAIwtD,aACJxtD,EAAIm9D,WAAWT,EAAYl9D,EAAGpD,EAGtC,CACA,cAAAghE,GACI,GAAI7jE,KAAK4hE,gBAAkB5hE,KAAK2hE,UAAUrhE,OACtC,OAKJ,MAAMwjE,EAAe9jE,KAAK2hE,UAAU3hE,KAAK4hE,gBACnCmC,EAAaD,EAAavM,SAAS,eAAehK,UAAU,SAGlE,IAAIxxC,EAAQ,EAERA,EADe,UAAfgoD,EACQD,EAAa79D,EAAIjG,KAAKivC,KACR,QAAf80B,EACCD,EAAa79D,EAAIjG,KAAKkvC,KAEtB40B,EAAa79D,GAAKjG,KAAKivC,KAAOjvC,KAAKkvC,MAAQ,EAEvD,IAAI,IAAI1uC,EAAIR,KAAK4hE,eAAgBphE,EAAIR,KAAK2hE,UAAUrhE,OAAQE,IACxDR,KAAK2hE,UAAUnhE,GAAGyF,GAAK8V,EAG3B/b,KAAKivC,KAAOtkC,OAAO6P,kBACnBxa,KAAKkvC,KAAOvkC,OAAO8P,kBACnBza,KAAK4hE,eAAiB5hE,KAAK2hE,UAAUrhE,MACzC,CACA,+BAAAyhE,CAAgCt7D,GAC5BzG,KAAKg7D,SAASz0D,SAAQ,CAACvD,EAAGxC,KACtBR,KAAKgkE,oCAAoCv9D,EAAKzG,KAAMA,KAAMQ,EAAE,IAEhER,KAAK6jE,gBACT,CACA,mCAAAG,CAAoCv9D,EAAKw9D,EAAY7rB,EAAQoI,GACzD,MAAMya,EAAQ7iB,EAAO4iB,SAASxa,GAC1Bya,EAAMD,SAAS16D,OAAS,EACxB26D,EAAMD,SAASz0D,SAAQ,CAACvD,EAAGxC,KACvByjE,EAAWD,oCAAoCv9D,EAAKw9D,EAAYhJ,EAAOz6D,EAAE,IAI7ER,KAAKkkE,uBAAuBz9D,EAAKw9D,EAAY7rB,EAAQoI,EAE7D,CACA,sBAAA0jB,CAAuBz9D,EAAKw9D,EAAY7rB,EAAQ53C,GAC5C,MAAMy6D,EAAQ7iB,EAAO4iB,SAASx6D,GAC9B,GAAiC,mBAAtBy6D,EAAMmH,YACb,OAAOnH,EAEXx0D,EAAI+zD,OACJS,EAAMN,WAAWl0D,GAAK,GACtB,MAAM09D,EAAQlJ,EAAM36B,aAAa,KAC3B8jC,EAAQnJ,EAAM36B,aAAa,KAC3B+jC,EAASpJ,EAAM36B,aAAa,MAC5BgkC,EAASrJ,EAAM36B,aAAa,MAC5B8iC,EAAanI,EAAM1D,SAAS,eAAe3H,gBAC3C4T,EAAQe,QAAQnB,aAA+C,EAASA,EAAWI,OAC/E,IAANhjE,IAGK2jE,EAAM1W,YACP0W,EAAMjW,SAAS+M,EAAMuJ,sBAAsB,MAE1CJ,EAAM3W,YACP2W,EAAMlW,SAAS+M,EAAMuJ,sBAAsB,MAE1CH,EAAO5W,YACR4W,EAAOnW,SAAS+M,EAAMuJ,sBAAsB,OAE3CF,EAAO7W,YACR6W,EAAOpW,SAAS+M,EAAMuJ,sBAAsB,QAGpD,MAAM7hC,EAAQs4B,EAAMmH,YAAY37D,GAuChC,OAtCI+8D,IACAS,EAAWh+D,GAAK08B,GAEhBwhC,EAAM1W,YAENwW,EAAWJ,iBACX5I,EAAMh1D,EAAIk+D,EAAMjV,UAAU,KACtBmV,EAAO5W,aACPwN,EAAMh1D,GAAKo+D,EAAOnV,UAAU,QAG5BmV,EAAO5W,aACPwW,EAAWh+D,GAAKo+D,EAAOnV,UAAU,MAErC+L,EAAMh1D,EAAIg+D,EAAWh+D,GAEzBg+D,EAAWh+D,EAAIg1D,EAAMh1D,EAChBu9D,IACDS,EAAWh+D,GAAK08B,GAEhByhC,EAAM3W,YACNwN,EAAMp4D,EAAIuhE,EAAMlV,UAAU,KACtBoV,EAAO7W,aACPwN,EAAMp4D,GAAKyhE,EAAOpV,UAAU,QAG5BoV,EAAO7W,aACPwW,EAAWphE,GAAKyhE,EAAOpV,UAAU,MAErC+L,EAAMp4D,EAAIohE,EAAWphE,GAEzBohE,EAAWphE,EAAIo4D,EAAMp4D,EAErBohE,EAAWtC,UAAUliE,KAAKw7D,GAC1BgJ,EAAWh1B,KAAOtlC,KAAKzC,IAAI+8D,EAAWh1B,KAAMgsB,EAAMh1D,EAAGg1D,EAAMh1D,EAAI08B,GAC/DshC,EAAW/0B,KAAOvlC,KAAKvC,IAAI68D,EAAW/0B,KAAM+rB,EAAMh1D,EAAGg1D,EAAMh1D,EAAI08B,GAC/Ds4B,EAAMJ,aAAap0D,GACnBA,EAAIq0D,UACGG,CACX,CACA,mBAAAgH,CAAoBx7D,EAAKw9D,EAAY7rB,EAAQqsB,GACzC,MAAMxJ,EAAQ7iB,EAAO4iB,SAASyJ,GAE9B,GAAoC,mBAAzBxJ,EAAM4G,eACb,OAAO,KAEX,MAAMpP,EAAcwI,EAAM4G,eAAep7D,GAOzC,OANIgsD,GACAwI,EAAMD,SAASz0D,SAAQ,CAACvD,EAAGxC,KACvB,MAAMwhE,EAAmBiC,EAAWhC,oBAAoBx7D,EAAKw9D,EAAYhJ,EAAOz6D,GAChFiyD,EAAYyL,eAAe8D,EAAiB,IAG7CvP,CACX,CACA,WAAAyQ,CAAYz8D,EAAKw9D,EAAY7rB,EAAQssB,GACjC,MAAMzJ,EAAQ7iB,EAAO4iB,SAAS0J,GAC9BzJ,EAAMh8B,OAAOx4B,GACbw0D,EAAMD,SAASz0D,SAAQ,CAACvD,EAAGxC,KACvByjE,EAAWf,YAAYz8D,EAAKw9D,EAAYhJ,EAAOz6D,EAAE,GAEzD,CACA,WAAA4hE,CAAY37D,GACR,MAAM,aAAEk+D,GAAkB3kE,KAC1B,IAAK2kE,EACD,OAAOA,EAEX,MAAMxB,EAAanjE,KAAK48D,UAClBgI,EAAU5kE,KAAK6kE,kBAAkBp+D,EAAK08D,GAE5C,OADAnjE,KAAK2kE,aAAeC,EACbA,CACX,CACA,iBAAAC,CAAkBp+D,EAAKq+D,GACnB,IAAKA,EAAWxkE,OACZ,OAAO,EAEX,MAAM,OAAE83C,GAAYp4C,KACdojE,EAAahrB,EAAOmf,SAAS,eAAe3H,gBAClD,GAAIwT,EAAY,CACZ,MAAM1F,EAAW19D,KAAKkiE,cAChBlmC,EAAOonC,EAAWI,MAAQsB,EAAW7/D,MAAM,IAAIyW,UAAUnb,KAAK,IAAMukE,EACpE3wB,EAAKuX,EAAUtT,EAAO9X,aAAa,MAAMitB,aACzCgD,EAAMv0B,EAAK17B,OACjB,IAAIskE,EAAU,EACd,IAAI,IAAIpkE,EAAI,EAAGA,EAAI+vD,EAAK/vD,IAEpBokE,IADc5kE,KAAKqiE,SAASe,EAAYpnC,EAAMx7B,GAC5BkjE,WAAaN,EAAWM,WAAahG,EAAW0F,EAAWE,SAASD,gBACjE,IAAVlvB,EAAG3zC,IAAuBkqB,MAAMypB,EAAG3zC,MAC1CokE,GAAWzwB,EAAG3zC,IAGtB,OAAOokE,CACX,CAEA,IAAKn+D,EAAI27D,YACL,OAA2B,GAApB0C,EAAWxkE,OAEtBmG,EAAI+zD,OACJx6D,KAAK26D,WAAWl0D,GAAK,GACrB,MAAQk8B,MAAOiiC,GAAan+D,EAAI27D,YAAY0C,GAG5C,OAFA9kE,KAAK66D,aAAap0D,GAClBA,EAAIq0D,UACG8J,CACX,CAME,qBAAAJ,CAAsB5oB,GAEpB,IAAIz1C,EAAUnG,KACd,KAAMmG,aAAmBq7D,IAAer7D,EAAQg2D,gBAAkBh2D,EAAQiyC,QAAO,CAC7E,MAAM2sB,EAAa5+D,EAAQiyC,OAAO9X,aAAasb,GAC/C,GAAImpB,EAAWtX,UAAS,GACpB,OAAOsX,EAAWxX,UAAU,KAEhCpnD,EAAUA,EAAQiyC,MACtB,CACA,OAAO,IACX,CACA,WAAAntC,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,eAAqBw8D,IAAqBpF,GAC1Dp8D,KAAK2Y,KAAO,OACZ3Y,KAAKiG,EAAI,EACTjG,KAAK6C,EAAI,EACT7C,KAAK2hE,UAAY,GACjB3hE,KAAK4hE,eAAiB,EACtB5hE,KAAKivC,KAAOtkC,OAAO6P,kBACnBxa,KAAKkvC,KAAOvkC,OAAO8P,kBACnBza,KAAK2kE,cAAgB,CACzB,EAGJ,MAAMK,WAAqBxD,GACvB,OAAA5E,GACI,OAAO58D,KAAKg8B,IAChB,CACA,WAAA/wB,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,eAAqBggE,IAAsB5I,GAC3Dp8D,KAAK2Y,KAAO,QAEZ3Y,KAAKg8B,KAAOh8B,KAAKg7D,SAAS16D,OAAS,EAAI,GAAKN,KAAK+iE,iBACrD,EAGJ,MAAMkC,WAAiBD,GACnB,WAAA/5D,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,UAChB,EAGJ,MAAMusD,WAAmB,EACrB,KAAA15D,GACIxL,KAAKQ,GAAK,EACVR,KAAKqzB,QAAU,KACfrzB,KAAKmlE,gBAAkB,KACvBnlE,KAAKwJ,MAAQ,IAAI0nD,GAAM,EAAG,GAC1BlxD,KAAKolE,QAAU,IAAIlU,GAAM,EAAG,GAC5BlxD,KAAKmG,QAAU,IAAI+qD,GAAM,EAAG,GAC5BlxD,KAAK6b,OAAS,GACd7b,KAAKqlE,OAAS,EAClB,CACA,KAAAC,GACI,MAAM,EAAE9kE,EAAE,SAAEmmD,GAAc3mD,KAC1B,OAAOQ,GAAKmmD,EAASrmD,OAAS,CAClC,CACA,IAAA+C,GACI,MAAMgwB,EAAUrzB,KAAK2mD,WAAW3mD,KAAKQ,GAGrC,OAFAR,KAAKmlE,gBAAkBnlE,KAAKqzB,QAC5BrzB,KAAKqzB,QAAUA,EACRA,CACX,CACA,QAAAkyC,GACI,IAAIC,EAAQpoD,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,IAAKqoD,EAAQroD,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,IAC3J,MAAMlT,EAAQ,IAAIgnD,GAAMlxD,KAAKqzB,QAAQmyC,GAAQxlE,KAAKqzB,QAAQoyC,IAC1D,OAAOzlE,KAAK0lE,aAAax7D,EAC7B,CACA,iBAAAy7D,CAAkBH,EAAOC,GACrB,MAAMv7D,EAAQlK,KAAKulE,SAASC,EAAOC,GAEnC,OADAzlE,KAAKolE,QAAUl7D,EACRA,CACX,CACA,iBAAA07D,CAAkBJ,EAAOC,GACrB,MAAMv7D,EAAQlK,KAAKulE,SAASC,EAAOC,GAEnC,OADAzlE,KAAKmG,QAAU+D,EACRA,CACX,CACA,wBAAA27D,GACI,MAAMV,EAAkBnlE,KAAKmlE,gBAAgBxsD,KAC7C,GAAIwsD,IAAoB,EAAY5iB,UAAY4iB,IAAoB,EAAY7iB,iBAAmB6iB,IAAoB,EAAY1iB,SAAW0iB,IAAoB,EAAY3iB,eAC1K,OAAOxiD,KAAKmG,QAGhB,MAAQA,SAAWF,EAAGqH,EAAKzK,EAAG0K,GAAQ63D,SAAWn/D,EAAG6/D,EAAKjjE,EAAGkjE,IAAW/lE,KAEvE,OADc,IAAIkxD,GAAM,EAAI5jD,EAAKw4D,EAAI,EAAIv4D,EAAKw4D,EAElD,CACA,YAAAL,CAAax7D,GACT,GAAIlK,KAAKqzB,QAAQgvB,SAAU,CACvB,MAAM,EAAEp8C,EAAE,EAAEpD,GAAO7C,KAAKmG,QACxB+D,EAAMjE,GAAKA,EACXiE,EAAMrH,GAAKA,CACf,CACA,OAAOqH,CACX,CACA,SAAA87D,CAAU97D,EAAOo/B,EAAM28B,GACnB,MAAM,OAAEpqD,EAAO,OAAEwpD,GAAYrlE,KAEzBimE,GAAWZ,EAAO/kE,OAAS,IAAM+kE,EAAOA,EAAO/kE,OAAS,KACxD+kE,EAAOA,EAAO/kE,OAAS,GAAKub,EAAOA,EAAOvb,OAAS,GAAGixD,QAAQ0U,IAElEjmE,KAAKkmE,eAAeh8D,EAAOo/B,EAAOA,EAAKioB,QAAQrnD,GAAS,KAC5D,CACA,cAAAg8D,CAAeh8D,EAAOmqC,GAClBr0C,KAAK6b,OAAOpc,KAAKyK,GACjBlK,KAAKqlE,OAAO5lE,KAAK40C,EACrB,CACA,eAAA8xB,GACI,OAAOnmE,KAAK6b,MAChB,CACA,eAAAuqD,GACI,MAAM,OAAEf,GAAYrlE,KACduwD,EAAM8U,EAAO/kE,OACnB,IAAI,IAAIE,EAAI,EAAGA,EAAI+vD,EAAK/vD,IACpB,IAAK6kE,EAAO7kE,GACR,IAAI,IAAIsJ,EAAItJ,EAAI,EAAGsJ,EAAIymD,EAAKzmD,IACxB,GAAIu7D,EAAOv7D,GAAI,CACXu7D,EAAO7kE,GAAK6kE,EAAOv7D,GACnB,KACJ,CAIZ,OAAOu7D,CACX,CACA,WAAAp6D,CAAYmnC,GACRgJ,MAAMhJ,EACLtxB,QAAQ,gBAAiB,MACzBA,QAAQ,sCAAuC,KAChD9gB,KAAKolE,QAAU,IAAIlU,GAAM,EAAG,GAC5BlxD,KAAKwJ,MAAQ,IAAI0nD,GAAM,EAAG,GAC1BlxD,KAAKmG,QAAU,IAAI+qD,GAAM,EAAG,GAC5BlxD,KAAKqzB,QAAU,KACfrzB,KAAK2mD,SAAW3mD,KAAK2mD,SACrB3mD,KAAKQ,GAAK,EACVR,KAAKmlE,gBAAkB,KACvBnlE,KAAK6b,OAAS,GACd7b,KAAKqlE,OAAS,EAClB,EAGJ,MAAMgB,WAAoB/G,GACtB,IAAAltB,CAAK3rC,GACD,MAAM,WAAE6/D,GAAgBtmE,KAClByyD,EAAc,IAAIsL,GAKxB,IAJAuI,EAAW96D,QACP/E,GACAA,EAAImvD,aAED0Q,EAAWhB,SACd,OAAOgB,EAAWjjE,OAAOsV,MACrB,KAAKusD,GAAWxiB,QACZ1iD,KAAKumE,MAAM9/D,EAAKgsD,GAChB,MACJ,KAAKyS,GAAWriB,QACZ7iD,KAAKwmE,MAAM//D,EAAKgsD,GAChB,MACJ,KAAKyS,GAAWtiB,cACZ5iD,KAAKymE,MAAMhgE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAWpiB,aACZ9iD,KAAK0mE,MAAMjgE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAW3iB,SACZviD,KAAK2mE,MAAMlgE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAW5iB,gBACZtiD,KAAK4mE,MAAMngE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAWziB,QACZziD,KAAK6mE,MAAMpgE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAW1iB,eACZxiD,KAAK8mE,MAAMrgE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAWxhB,IACZ1jD,KAAK+mE,MAAMtgE,EAAKgsD,GAChB,MACJ,KAAKyS,GAAWviB,WACZ3iD,KAAKgnE,MAAMvgE,EAAKgsD,GAI5B,OAAOA,CACX,CACA,cAAAoP,CAAeoF,GACX,OAAOjnE,KAAKoyC,MAChB,CACA,UAAA80B,GACI,MAAM,WAAEZ,GAAgBtmE,KAClB6b,EAASyqD,EAAWH,kBACpBd,EAASiB,EAAWF,kBACpBe,EAAUtrD,EAAO5b,KAAI,CAACiK,EAAO1J,IAAI,CAC/B0J,EACAm7D,EAAO7kE,MAGf,OAAO2mE,CACX,CACA,cAAAvM,CAAen0D,GACXzG,KAAKoyC,KAAK3rC,GACVzG,KAAKkrB,SAASskC,OAAOsH,MAAMxE,UAAUtyD,KAAMyG,GAC3C,MAAM2gE,EAAoBpnE,KAAKu3D,SAAS,aAClB,KAAlB9wD,EAAIq5D,YAC2C,YAA3CsH,EAAkB7Z,UAAU,WAC5B9mD,EAAIgzB,KAAK2tC,EAAkB7Z,aAE3B9mD,EAAIgzB,QAGY,KAApBhzB,EAAIwtD,cACmD,uBAAnDj0D,KAAKsgC,aAAa,iBAAiBitB,aACnC9mD,EAAI+zD,OACJ/zD,EAAI4gE,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAChC5gE,EAAI6gE,SACJ7gE,EAAIq0D,WAEJr0D,EAAI6gE,UAGZ,MAAMH,EAAUnnE,KAAKknE,aACrB,GAAIC,EAAS,CACT,MAAMI,EAAmBJ,EAAQ7mE,OAAS,EACpCknE,EAAuBxnE,KAAKu3D,SAAS,gBACrCkQ,EAAqBznE,KAAKu3D,SAAS,cACnCmQ,EAAqB1nE,KAAKu3D,SAAS,cACzC,GAAIiQ,EAAqB1Z,kBAAmB,CACxC,MAAM6Z,EAASH,EAAqB5X,iBAC7B1lD,EAAOmqC,GAAS8yB,EAAQ,GAC/BQ,EAAO1oC,OAAOx4B,EAAKyD,EAAOmqC,EAC9B,CACA,GAAIozB,EAAmB3Z,kBAAmB,CACtC,MAAM6Z,EAASF,EAAmB7X,gBAClC,IAAI,IAAIpvD,EAAI,EAAGA,EAAI+mE,EAAkB/mE,IAAI,CACrC,MAAO0J,EAAOmqC,GAAS8yB,EAAQ3mE,GAC/BmnE,EAAO1oC,OAAOx4B,EAAKyD,EAAOmqC,EAC9B,CACJ,CACA,GAAIqzB,EAAmB5Z,kBAAmB,CACtC,MAAM6Z,EAASD,EAAmB9X,iBAC3B1lD,EAAOmqC,GAAS8yB,EAAQI,GAC/BI,EAAO1oC,OAAOx4B,EAAKyD,EAAOmqC,EAC9B,CACJ,CACJ,CACA,YAAOkyB,CAAMD,GACT,MAAMp8D,EAAQo8D,EAAWV,oBAEzB,OADAU,EAAW98D,MAAQ88D,EAAWngE,QACvB,CACH+D,QAER,CACA,KAAAq8D,CAAM9/D,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,MAAEkK,GAAWm8D,GAAYE,MAAMD,IAC/B,EAAErgE,EAAE,EAAEpD,GAAOqH,EACnBo8D,EAAWN,UAAU97D,GACrBuoD,EAAYzhC,SAAS/qB,EAAGpD,GACpB4D,GACAA,EAAIovD,OAAO5vD,EAAGpD,EAEtB,CACA,YAAO2jE,CAAMF,GACT,MAAM,QAAEngE,GAAamgE,EAErB,MAAO,CACHngE,UACA+D,MAHUo8D,EAAWV,oBAK7B,CACA,KAAAY,CAAM//D,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,MAAE+D,GAAWm8D,GAAYG,MAAMF,IACzC,EAAErgE,EAAE,EAAEpD,GAAOqH,EACnBo8D,EAAWN,UAAU97D,EAAO/D,GAC5BssD,EAAYzhC,SAAS/qB,EAAGpD,GACpB4D,GACAA,EAAIqvD,OAAO7vD,EAAGpD,EAEtB,CACA,YAAO4jE,CAAMH,GACT,MAAM,QAAEngE,EAAQ,QAAEktB,GAAaizC,EACzBp8D,EAAQ,IAAIgnD,IAAO79B,EAAQgvB,SAAWl8C,EAAQF,EAAI,GAAKotB,EAAQptB,EAAGE,EAAQtD,GAEhF,OADAyjE,EAAWngE,QAAU+D,EACd,CACH/D,UACA+D,QAER,CACA,KAAAu8D,CAAMhgE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,MAAE+D,GAAWm8D,GAAYI,MAAMH,IACzC,EAAErgE,EAAE,EAAEpD,GAAOqH,EACnBo8D,EAAWN,UAAU97D,EAAO/D,GAC5BssD,EAAYzhC,SAAS/qB,EAAGpD,GACpB4D,GACAA,EAAIqvD,OAAO7vD,EAAGpD,EAEtB,CACA,YAAO6jE,CAAMJ,GACT,MAAM,QAAEngE,EAAQ,QAAEktB,GAAaizC,EACzBp8D,EAAQ,IAAIgnD,GAAM/qD,EAAQF,GAAIotB,EAAQgvB,SAAWl8C,EAAQtD,EAAI,GAAKwwB,EAAQxwB,GAEhF,OADAyjE,EAAWngE,QAAU+D,EACd,CACH/D,UACA+D,QAER,CACA,KAAAw8D,CAAMjgE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,MAAE+D,GAAWm8D,GAAYK,MAAMJ,IACzC,EAAErgE,EAAE,EAAEpD,GAAOqH,EACnBo8D,EAAWN,UAAU97D,EAAO/D,GAC5BssD,EAAYzhC,SAAS/qB,EAAGpD,GACpB4D,GACAA,EAAIqvD,OAAO7vD,EAAGpD,EAEtB,CACA,YAAO8jE,CAAML,GACT,MAAM,QAAEngE,GAAamgE,EAIrB,MAAO,CACHngE,UACA+D,MALUo8D,EAAWf,SAAS,KAAM,MAMpCqC,aALiBtB,EAAWX,kBAAkB,KAAM,MAMpDkC,aALiBvB,EAAWV,oBAOpC,CACA,KAAAe,CAAMlgE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,MAAE+D,EAAM,aAAE09D,EAAa,aAAEC,GAAkBxB,GAAYM,MAAML,GAC7EA,EAAWN,UAAU6B,EAAcD,EAAc19D,GACjDuoD,EAAY+L,eAAer4D,EAAQF,EAAGE,EAAQtD,EAAGqH,EAAMjE,EAAGiE,EAAMrH,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,GAC5H4D,GACAA,EAAIqhE,cAAc59D,EAAMjE,EAAGiE,EAAMrH,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,EAEzG,CACA,YAAO+jE,CAAMN,GACT,MAAM,QAAEngE,GAAamgE,EAIrB,MAAO,CACHngE,UACA+D,MALUo8D,EAAWT,2BAMrB+B,aALiBtB,EAAWX,kBAAkB,KAAM,MAMpDkC,aALiBvB,EAAWV,oBAOpC,CACA,KAAAgB,CAAMngE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,MAAE+D,EAAM,aAAE09D,EAAa,aAAEC,GAAkBxB,GAAYO,MAAMN,GAC7EA,EAAWN,UAAU6B,EAAcD,EAAc19D,GACjDuoD,EAAY+L,eAAer4D,EAAQF,EAAGE,EAAQtD,EAAGqH,EAAMjE,EAAGiE,EAAMrH,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,GAC5H4D,GACAA,EAAIqhE,cAAc59D,EAAMjE,EAAGiE,EAAMrH,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,EAEzG,CACA,YAAOgkE,CAAMP,GACT,MAAM,QAAEngE,GAAamgE,EAGrB,MAAO,CACHngE,UACAyhE,aAJiBtB,EAAWX,kBAAkB,KAAM,MAKpDkC,aAJiBvB,EAAWV,oBAMpC,CACA,KAAAiB,CAAMpgE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,aAAEyhE,EAAa,aAAEC,GAAkBxB,GAAYQ,MAAMP,GACrEA,EAAWN,UAAU6B,EAAcD,EAAcA,GACjDnV,EAAYwM,kBAAkB94D,EAAQF,EAAGE,EAAQtD,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,GAC7G4D,GACAA,EAAIshE,iBAAiBH,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,EAE1F,CACA,YAAOikE,CAAMR,GACT,MAAM,QAAEngE,GAAamgE,EACfsB,EAAetB,EAAWT,2BAGhC,OAFAS,EAAWlB,QAAUwC,EAEd,CACHzhE,UACAyhE,eACAC,aAJiBvB,EAAWV,oBAMpC,CACA,KAAAkB,CAAMrgE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,QAAEmG,EAAQ,aAAEyhE,EAAa,aAAEC,GAAkBxB,GAAYS,MAAMR,GACrEA,EAAWN,UAAU6B,EAAcD,EAAcA,GACjDnV,EAAYwM,kBAAkB94D,EAAQF,EAAGE,EAAQtD,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,GAC7G4D,GACAA,EAAIshE,iBAAiBH,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,EAE1F,CACA,YAAOkkE,CAAMT,GACT,MAAM,QAAEngE,EAAQ,QAAEktB,GAAaizC,EAC/B,IAAI,GAAE3kB,EAAG,GAAEC,EAAG,KAAEC,EAAK,SAAEJ,EAAS,UAAEC,GAAeruB,EACjD,MAAM20C,EAAgBnmB,GAAQl4C,KAAK2qC,GAAK,KAClCuzB,EAAevB,EAAWV,oBAI1BqC,EAAQ,IAAI/W,GAAMvnD,KAAK6qC,IAAIwzB,IAAkB7hE,EAAQF,EAAI4hE,EAAa5hE,GAAK,EAAI0D,KAAK8qC,IAAIuzB,IAAkB7hE,EAAQtD,EAAIglE,EAAahlE,GAAK,GAAI8G,KAAK8qC,IAAIuzB,IAAkB7hE,EAAQF,EAAI4hE,EAAa5hE,GAAK,EAAI0D,KAAK6qC,IAAIwzB,IAAkB7hE,EAAQtD,EAAIglE,EAAahlE,GAAK,GAElQ+B,EAAI+E,KAAKkB,IAAIo9D,EAAMhiE,EAAG,GAAK0D,KAAKkB,IAAI82C,EAAI,GAAKh4C,KAAKkB,IAAIo9D,EAAMplE,EAAG,GAAK8G,KAAKkB,IAAI+2C,EAAI,GACnFh9C,EAAI,IACJ+8C,GAAMh4C,KAAKoG,KAAKnL,GAChBg9C,GAAMj4C,KAAKoG,KAAKnL,IAGpB,IAAIi8C,GAAKY,IAAaC,GAAa,EAAI,GAAK/3C,KAAKoG,MAAMpG,KAAKkB,IAAI82C,EAAI,GAAKh4C,KAAKkB,IAAI+2C,EAAI,GAAKj4C,KAAKkB,IAAI82C,EAAI,GAAKh4C,KAAKkB,IAAIo9D,EAAMplE,EAAG,GAAK8G,KAAKkB,IAAI+2C,EAAI,GAAKj4C,KAAKkB,IAAIo9D,EAAMhiE,EAAG,KAAO0D,KAAKkB,IAAI82C,EAAI,GAAKh4C,KAAKkB,IAAIo9D,EAAMplE,EAAG,GAAK8G,KAAKkB,IAAI+2C,EAAI,GAAKj4C,KAAKkB,IAAIo9D,EAAMhiE,EAAG,KACxPykB,MAAMm2B,KACNA,EAAI,GAER,MAAMqnB,EAAM,IAAIhX,GAAMrQ,EAAIc,EAAKsmB,EAAMplE,EAAI++C,EAAIf,GAAKe,EAAKqmB,EAAMhiE,EAAI07C,GAE3DwmB,EAAQ,IAAIjX,IAAO/qD,EAAQF,EAAI4hE,EAAa5hE,GAAK,EAAI0D,KAAK6qC,IAAIwzB,GAAiBE,EAAIjiE,EAAI0D,KAAK8qC,IAAIuzB,GAAiBE,EAAIrlE,GAAIsD,EAAQtD,EAAIglE,EAAahlE,GAAK,EAAI8G,KAAK8qC,IAAIuzB,GAAiBE,EAAIjiE,EAAI0D,KAAK6qC,IAAIwzB,GAAiBE,EAAIrlE,GAE3NulE,EAAKvb,EAAa,CACpB,EACA,GACD,EACEob,EAAMhiE,EAAIiiE,EAAIjiE,GAAK07C,GACnBsmB,EAAMplE,EAAIqlE,EAAIrlE,GAAK++C,IAIlB50C,EAAI,EACLi7D,EAAMhiE,EAAIiiE,EAAIjiE,GAAK07C,GACnBsmB,EAAMplE,EAAIqlE,EAAIrlE,GAAK++C,GAElBl+C,EAAI,GACJukE,EAAMhiE,EAAIiiE,EAAIjiE,GAAK07C,IACnBsmB,EAAMplE,EAAIqlE,EAAIrlE,GAAK++C,GAEzB,IAAIymB,EAAKxb,EAAa7/C,EAAGtJ,GAQzB,OANIkpD,EAAa5/C,EAAGtJ,KAAO,IACvB2kE,EAAK1+D,KAAK2qC,IAEVsY,EAAa5/C,EAAGtJ,IAAM,IACtB2kE,EAAK,GAEF,CACHR,eACAlmB,KACAC,KACAF,YACAsmB,gBACAG,QACAC,KACAC,KAER,CACA,KAAAtB,CAAMtgE,EAAKgsD,GACP,MAAM,WAAE6T,GAAgBtmE,MAClB,aAAE6nE,EAAa,GAAElmB,EAAG,GAAEC,EAAG,UAAEF,EAAU,cAAEsmB,EAAc,MAAEG,EAAM,GAAEC,EAAG,GAAEC,GAAQhC,GAAYU,MAAMT,GAE9FgC,EAAM,EAAI5mB,EAAY,GAAK,EAC3B6mB,EAAKH,EAAKE,GAAOD,EAAK,GACtBG,EAAU,IAAItX,GAAMiX,EAAMliE,EAAI07C,EAAKh4C,KAAK6qC,IAAI+zB,GAAKJ,EAAMtlE,EAAI++C,EAAKj4C,KAAK8qC,IAAI8zB,IAK/E,GAJAjC,EAAWJ,eAAesC,EAASD,EAAKD,EAAM3+D,KAAK2qC,GAAK,GACxDgyB,EAAWJ,eAAe2B,EAAcU,EAAKD,EAAM3+D,KAAK2qC,IACxDme,EAAYzhC,SAAS62C,EAAa5hE,EAAG4hE,EAAahlE,GAE9C4D,IAAQikB,MAAM09C,KAAQ19C,MAAM29C,GAAK,CACjC,MAAMxjE,EAAI88C,EAAKC,EAAKD,EAAKC,EACnBzR,EAAKwR,EAAKC,EAAK,EAAID,EAAKC,EACxBxR,EAAKuR,EAAKC,EAAKA,EAAKD,EAAK,EAC/Bl7C,EAAIwiC,UAAUk/B,EAAMliE,EAAGkiE,EAAMtlE,GAC7B4D,EAAI++C,OAAOwiB,GACXvhE,EAAIuyB,MAAMmX,EAAIC,GACd3pC,EAAIgiE,IAAI,EAAG,EAAG5jE,EAAGujE,EAAIA,EAAKC,EAAI9D,QAAQ,EAAI7iB,IAC1Cj7C,EAAIuyB,MAAM,EAAImX,EAAI,EAAIC,GACtB3pC,EAAI++C,QAAQwiB,GACZvhE,EAAIwiC,WAAWk/B,EAAMliE,GAAIkiE,EAAMtlE,EACnC,CACJ,CACA,YAAOmkE,CAAMV,GACTA,EAAWngE,QAAUmgE,EAAW98D,KACpC,CACA,KAAAw9D,CAAMvgE,EAAKgsD,GACP4T,GAAYW,MAAMhnE,KAAKsmE,YACnB7/D,GAEIgsD,EAAYliB,KAAOkiB,EAAYjiB,IAAMiiB,EAAY39C,KAAO29C,EAAY19C,IACpEtO,EAAIsvD,WAGhB,CACA,WAAA9qD,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,OACZ3Y,KAAKsmE,WAAa,IAAIpB,GAAWllE,KAAKsgC,aAAa,KAAKitB,YAC5D,EAGJ,MAAMmb,WAAmBpJ,GACrB,UAAA3E,CAAWl0D,GACP,IAAI60D,EACJ,MAAM,SAAEpwC,GAAclrB,MAChB,OAAEwvD,EAAO,OAAElwC,GAAY4L,EACvB2iB,EAASpnC,EAAIonC,OAEnB,GADA2hB,EAAOwE,YAAYvtD,GACf,UAAWonC,QAA8B,IAAbpnC,EAAIs6D,MAAwBzhD,QAA6C,IAA5BA,EAAOqpD,iBAAkC,CAClHliE,EAAIs6D,KAAOzhD,EAAOqpD,iBAAiB96B,GAAQ+6B,iBAAiB,QAC5D,MAAMC,EAAe,IAAIxb,EAASniC,EAAU,WAAYqyC,GAAK76B,MAAMj8B,EAAIs6D,MAAMrD,UACzEmL,EAAapb,aACbviC,EAAS4jC,WAAa+Z,EAAa3Z,UAAU,KAC7ChkC,EAAS8jC,OAAS9jC,EAAS4jC,WAEnC,CAEK9uD,KAAKsgC,aAAa,KAAKmtB,YACxBztD,KAAKsgC,aAAa,KAAK,GAAM4tB,SAAS,GAErCluD,KAAKsgC,aAAa,KAAKmtB,YACxBztD,KAAKsgC,aAAa,KAAK,GAAM4tB,SAAS,GAE1C,IAAI,MAAEvrB,EAAM,OAAEE,GAAY2sB,EAAOD,SAC5BvvD,KAAKu3D,SAAS,SAAS9J,YACxBztD,KAAKu3D,SAAS,SAAS,GAAMrJ,SAAS,QAErCluD,KAAKu3D,SAAS,UAAU9J,YACzBztD,KAAKu3D,SAAS,UAAU,GAAMrJ,SAAS,QAEtCluD,KAAKu3D,SAAS,SAAS9J,YACxBztD,KAAKu3D,SAAS,SAAS,GAAMrJ,SAAS,SAE1C,MAAM4a,EAAW9oE,KAAKsgC,aAAa,QAC7ByoC,EAAW/oE,KAAKsgC,aAAa,QAC7B0oC,EAAchpE,KAAKsgC,aAAa,WAChCsI,EAAUogC,EAAYvb,WAAa/B,EAAUsd,EAAYzb,aAAe,KACxEoH,GAAQ30D,KAAKmF,MAAyD,YAAjDnF,KAAKu3D,SAAS,YAAYpJ,SAAS,UAC9D,IAAIlf,EAAO,EACPE,EAAO,EACPylB,EAAQ,EACRC,EAAQ,EACRjsB,IACAqG,EAAOrG,EAAQ,GACfuG,EAAOvG,EAAQ,IAEd5oC,KAAKmF,OACNw9B,EAAQ3iC,KAAKu3D,SAAS,SAASrI,UAAU,KACzCrsB,EAAS7iC,KAAKu3D,SAAS,UAAUrI,UAAU,KACzB,WAAdlvD,KAAK2Y,OACLi8C,EAAQ3lB,EACR4lB,EAAQ1lB,EACRF,EAAO,EACPE,EAAO,IAGfqgB,EAAOD,SAASoB,WAAWhuB,EAAOE,IAG9B7iC,KAAKgF,MACHhF,KAAKo4C,QAAgG,mBAApD,QAAhCkjB,EAAMt7D,KAAKgF,KAAKspB,kBAAgC,IAARgtC,OAAiB,EAASA,EAAImB,YAAkCz8D,KAAKu3D,SAAS,aAAa,GAAO,GAAM9J,YAAeztD,KAAKu3D,SAAS,oBAAoB,GAAO,GAAM9J,YACjOztD,KAAKu3D,SAAS,oBAAoB,GAAM,GAAMrJ,SAAS,WAE3D9S,MAAMuf,WAAWl0D,GACjBA,EAAIwiC,UAAUjpC,KAAKsgC,aAAa,KAAK4uB,UAAU,KAAMlvD,KAAKsgC,aAAa,KAAK4uB,UAAU,MAClFtmB,IACAjG,EAAQiG,EAAQ,GAChB/F,EAAS+F,EAAQ,IAErB1d,EAASmpC,WAAW,CAChB5tD,MACA6tD,YAAat0D,KAAKsgC,aAAa,uBAAuBitB,YACtD5qB,MAAO6sB,EAAOD,SAAS5sB,MACvB4xB,aAAc5xB,EACdE,OAAQ2sB,EAAOD,SAAS1sB,OACxB2xB,cAAe3xB,EACfoM,OACAE,OACAslB,KAAMqU,EAAS3a,WACfuG,KAAMqU,EAAS5a,WACfwG,OACAC,QACAC,UAEAjsB,IACA4mB,EAAOD,SAASqB,gBAChBpB,EAAOD,SAASoB,WAAWhuB,EAAOE,GAE1C,CACA,YAAAg4B,CAAap0D,GACT20C,MAAMyf,aAAap0D,GACnBzG,KAAKkrB,SAASskC,OAAOD,SAASqB,eAClC,CAME,MAAAqY,CAAOtmC,GACL,IAAIE,EAASzlB,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAKulB,EAAOumC,EAAsB9rD,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GACvK,MAAM+rD,EAAYnpE,KAAKsgC,aAAa,SAAS,GACvC8oC,EAAappE,KAAKsgC,aAAa,UAAU,GACzC0oC,EAAchpE,KAAKsgC,aAAa,WAChC+oC,EAAYrpE,KAAKsgC,aAAa,SAC9BgpC,EAAcH,EAAU9a,UAAU,GAClCkb,EAAeH,EAAW/a,UAAU,GAC1C,GAAI6a,EACA,GAAmC,iBAAxBA,EACPlpE,KAAKsgC,aAAa,uBAAuB,GAAM4tB,SAASgb,OACrD,CACH,MAAMM,EAA0BxpE,KAAKsgC,aAAa,uBAC9CkpC,EAAwB/b,YACxB+b,EAAwBtb,SAASsb,EAAwBjc,YAAYzsC,QAAQ,mBAAoB,MAEzG,CAOJ,GALAqoD,EAAUjb,SAASvrB,GACnBymC,EAAWlb,SAASrrB,GACfmmC,EAAYvb,YACbub,EAAY9a,SAAS,OAAO7tD,OAAOipE,GAAe3mC,EAAO,KAAKtiC,OAAOkpE,GAAgB1mC,IAErFwmC,EAAU5b,WAAY,CACtB,MAAM6J,EAAat3D,KAAKu3D,SAAS,SAC3BC,EAAcx3D,KAAKu3D,SAAS,UAC9BD,EAAW7J,YACX6J,EAAWpJ,SAAS,GAAG7tD,OAAOsiC,EAAO,OAErC60B,EAAY/J,YACZ+J,EAAYtJ,SAAS,GAAG7tD,OAAOwiC,EAAQ,MAE/C,CACJ,CACA,WAAA53B,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MACZ3Y,KAAKmF,MAAO,CAChB,EAGJ,MAAMskE,WAAoBpD,GACtB,IAAAj0B,CAAK3rC,GACD,MAAMR,EAAIjG,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCrsD,EAAI7C,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCvsB,EAAQ3iC,KAAKu3D,SAAS,SAAS,GAAO,GAAMrI,UAAU,KACtDrsB,EAAS7iC,KAAKu3D,SAAS,UAAU,GAAO,GAAMrI,UAAU,KACxDwa,EAAS1pE,KAAKsgC,aAAa,MAC3BqpC,EAAS3pE,KAAKsgC,aAAa,MACjC,IAAIspC,EAAKF,EAAOxa,UAAU,KACtB2a,EAAKF,EAAOza,UAAU,KAS1B,GARIwa,EAAOjc,aAAekc,EAAOlc,aAC7Boc,EAAKD,GAELD,EAAOlc,aAAeic,EAAOjc,aAC7Bmc,EAAKC,GAETD,EAAKjgE,KAAKzC,IAAI0iE,EAAIjnC,EAAQ,GAC1BknC,EAAKlgE,KAAKzC,IAAI2iE,EAAIhnC,EAAS,GACvBp8B,EAAK,CACL,MAAMqjE,GAAcngE,KAAKoG,KAAK,GAAK,GAAK,EAA1B,EACdtJ,EAAImvD,YAEA/yB,EAAS,GAAKF,EAAQ,IACtBl8B,EAAIovD,OAAO5vD,EAAI2jE,EAAI/mE,GACnB4D,EAAIqvD,OAAO7vD,EAAI08B,EAAQinC,EAAI/mE,GAC3B4D,EAAIqhE,cAAc7hE,EAAI08B,EAAQinC,EAAKE,EAAQF,EAAI/mE,EAAGoD,EAAI08B,EAAO9/B,EAAIgnE,EAAKC,EAAQD,EAAI5jE,EAAI08B,EAAO9/B,EAAIgnE,GACjGpjE,EAAIqvD,OAAO7vD,EAAI08B,EAAO9/B,EAAIggC,EAASgnC,GACnCpjE,EAAIqhE,cAAc7hE,EAAI08B,EAAO9/B,EAAIggC,EAASgnC,EAAKC,EAAQD,EAAI5jE,EAAI08B,EAAQinC,EAAKE,EAAQF,EAAI/mE,EAAIggC,EAAQ58B,EAAI08B,EAAQinC,EAAI/mE,EAAIggC,GACxHp8B,EAAIqvD,OAAO7vD,EAAI2jE,EAAI/mE,EAAIggC,GACvBp8B,EAAIqhE,cAAc7hE,EAAI2jE,EAAKE,EAAQF,EAAI/mE,EAAIggC,EAAQ58B,EAAGpD,EAAIggC,EAASgnC,EAAKC,EAAQD,EAAI5jE,EAAGpD,EAAIggC,EAASgnC,GACpGpjE,EAAIqvD,OAAO7vD,EAAGpD,EAAIgnE,GAClBpjE,EAAIqhE,cAAc7hE,EAAGpD,EAAIgnE,EAAKC,EAAQD,EAAI5jE,EAAI2jE,EAAKE,EAAQF,EAAI/mE,EAAGoD,EAAI2jE,EAAI/mE,GAC1E4D,EAAIsvD,YAEZ,CACA,OAAO,IAAIgI,GAAY93D,EAAGpD,EAAGoD,EAAI08B,EAAO9/B,EAAIggC,EAChD,CACA,UAAAqkC,GACI,OAAO,IACX,CACA,WAAAj8D,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MAChB,EAuFJ,MAAMoxD,WAAwB1D,GAC1B,IAAAj0B,CAAK3rC,GACD,MAAM,OAAEoV,GAAY7b,OACXiG,EAAG+yC,EAAKn2C,EAAGw6B,IAASxhB,EACvB42C,EAAc,IAAIsL,GAAY/kB,EAAI3b,GAYxC,OAXI52B,IACAA,EAAImvD,YACJnvD,EAAIovD,OAAO7c,EAAI3b,IAEnBxhB,EAAOtV,SAAS8rD,IACZ,IAAI,EAAEpsD,EAAE,EAAEpD,GAAOwvD,EACjBI,EAAYzhC,SAAS/qB,EAAGpD,GACpB4D,GACAA,EAAIqvD,OAAO7vD,EAAGpD,EAClB,IAEG4vD,CACX,CACA,UAAAyU,GACI,MAAM,OAAErrD,GAAY7b,KACdgjE,EAAYnnD,EAAOvb,OAAS,EAC5B6mE,EAAU,GAgBhB,OAfAtrD,EAAOtV,SAAQ,CAAC2D,EAAO1J,KACfA,IAAMwiE,GAGVmE,EAAQ1nE,KAAK,CACTyK,EACAA,EAAMqnD,QAAQ11C,EAAOrb,EAAI,KAC3B,IAEF2mE,EAAQ7mE,OAAS,GACjB6mE,EAAQ1nE,KAAK,CACToc,EAAOA,EAAOvb,OAAS,GACvB6mE,EAAQA,EAAQ7mE,OAAS,GAAG,KAG7B6mE,CACX,CACA,WAAAl8D,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,WACZ3Y,KAAK6b,OAAS,GACd7b,KAAK6b,OAASq1C,GAAMG,UAAUrxD,KAAKsgC,aAAa,UAAUitB,YAC9D,EAmHJ,MAAMyc,WAAiB1K,GACnB,cAAAuC,CAAep7D,GACX,MAAMgsD,EAAc,IAAIsL,GAIxB,OAHA/9D,KAAKg7D,SAASz0D,SAAS00D,IACnBxI,EAAYyL,eAAejD,EAAM4G,eAAep7D,GAAK,IAElDgsD,CACX,CACA,WAAAxnD,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,GAChB,EAGJ,MAAMsxD,WAAwB9P,GAC1B,gBAAA+P,GACI,OAAOlqE,KAAKsgC,aAAa,iBAAiBitB,UAAU,oBACxD,CACA,cAAAyC,CAAevpD,EAAKynB,EAASi8C,GAEzB,IAAIC,EAAiBpqE,KACjBA,KAAKkwD,mBAAmBzC,aACxB2c,EAAiBpqE,KAAKkwD,mBAAmBN,gBACzC5vD,KAAKqqE,qBAAqBD,IAE9B,MAAM,MAAEE,GAAWF,EACbG,EAAWvqE,KAAKwqE,YAAY/jE,EAAKynB,GACvC,IAAKq8C,EACD,OAAOvqE,KAAKyqE,iBAAiBN,EAAmBG,EAAMA,EAAMhqE,OAAS,GAAGm2B,OAK5E,GAHA6zC,EAAM/jE,SAAS4rB,IACXo4C,EAASG,aAAav4C,EAAKsf,OAAQzxC,KAAKyqE,iBAAiBN,EAAmBh4C,EAAKsE,OAAO,IAExFz2B,KAAKsgC,aAAa,qBAAqBmtB,WAAY,CAEnD,MAAM,SAAEviC,GAAclrB,MAChB,mBAAEk4D,GAAwB3E,IAC1B,SAAEhE,GAAcrkC,EAASskC,OACzBmb,EAAWpb,EAASsB,UACpB+Z,EAAO,IAAInB,GAAYv+C,GAC7B0/C,EAAKz8C,WAAWzb,IAAI,IAAK,IAAI26C,EAASniC,EAAU,KAAMgtC,EAAqB,IAC3E0S,EAAKz8C,WAAWzb,IAAI,IAAK,IAAI26C,EAASniC,EAAU,KAAMgtC,EAAqB,IAC3E0S,EAAKz8C,WAAWzb,IAAI,QAAS,IAAI26C,EAASniC,EAAU,QAASgtC,IAC7D0S,EAAKz8C,WAAWzb,IAAI,SAAU,IAAI26C,EAASniC,EAAU,SAAUgtC,IAC/D,MAAM2S,EAAQ,IAAIb,GAAS9+C,GAC3B2/C,EAAM18C,WAAWzb,IAAI,YAAa,IAAI26C,EAASniC,EAAU,YAAalrB,KAAKsgC,aAAa,qBAAqB6tB,aAC7G0c,EAAM7P,SAAW,CACb4P,GAEJ,MAAME,EAAa,IAAIpC,GAAWx9C,GAClC4/C,EAAW38C,WAAWzb,IAAI,IAAK,IAAI26C,EAASniC,EAAU,IAAK,IAC3D4/C,EAAW38C,WAAWzb,IAAI,IAAK,IAAI26C,EAASniC,EAAU,IAAK,IAC3D4/C,EAAW38C,WAAWzb,IAAI,QAAS,IAAI26C,EAASniC,EAAU,QAASy/C,EAAShoC,QAC5EmoC,EAAW38C,WAAWzb,IAAI,SAAU,IAAI26C,EAASniC,EAAU,SAAUy/C,EAAS9nC,SAC9EioC,EAAW9P,SAAW,CAClB6P,GAEJ,MAAME,EAAgB7/C,EAAS8/C,aAAaL,EAAShoC,MAAOgoC,EAAS9nC,QAC/DooC,EAAaF,EAAcj9B,WAAW,MAG5C,OAFAm9B,EAAWnL,UAAYyK,EACvBO,EAAW7rC,OAAOgsC,GACXA,EAAWhb,cAAc8a,EAAe,YACnD,CACA,OAAOR,CACX,CACA,oBAAAF,CAAqBD,GACjBpqE,KAAKkrE,oBAAoB3kE,SAAS4kE,KACzBnrE,KAAKsgC,aAAa6qC,GAAoB1d,YAAc2c,EAAe9pC,aAAa6qC,GAAoB1d,YACrGztD,KAAKsgC,aAAa6qC,GAAoB,GAAMjd,SAASkc,EAAe9pC,aAAa6qC,GAAoBhd,WACzG,GAER,CACA,gBAAAsc,CAAiBN,EAAmB1zC,GAChC,OAAI0zC,EAAkB1c,WACA,IAAIJ,EAASrtD,KAAKkrB,SAAU,QAASuL,GACtC65B,WAAW6Z,GAAmB7b,WAE5C73B,CACX,CACA,WAAAxrB,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAKkrE,oBAAsB,CACvB,iBAEJlrE,KAAKsqE,MAAQ,GACb,MAAM,MAAEA,EAAM,SAAEtP,GAAch7D,KAC9Bg7D,EAASz0D,SAAS00D,IACK,SAAfA,EAAMtiD,MACN2xD,EAAM7qE,KAAKw7D,EACf,GAER,EAuFJ,MAAMmQ,WAAuBjR,GACzB,WAAAkR,GACI,MAAMC,EAAgBtrE,KAAKsgC,aAAa,iBAAiBitB,YACnDge,EAAgBvrE,KAAKsgC,aAAa,iBAAiBitB,YACzD,MAAsB,QAAlB+d,EACOtrE,KAAKo4C,OAAOmf,SAASgU,GAAe,GAExCvrE,KAAKo4C,OAAO9X,aAAairC,GAAe,EACnD,CACA,SAAAC,GACI,MAAM,aAAEC,GAAkBzrE,MACpB,SAAE0rE,EAAS,KAAEpiC,EAAK,GAAEqiC,GAAQ3rE,KAAK4rE,cAEvC,IAAIC,EAAWviC,EAAK+kB,aAAesd,EAAGtd,YAAc/kB,EAAK+kB,aAAeqd,EAKxE,MAJqB,MAAjBD,IACAI,GAAY,KAGT,GAAGxrE,OAAOwrE,GAAUxrE,OAAOorE,EACtC,CACA,MAAAriE,CAAO4tD,GACH,MAAM,OAAE5e,GAAYp4C,KACd8rE,EAAO9rE,KAAKqrE,cAOlB,GALKrrE,KAAK+rE,eACN/rE,KAAK+rE,aAAeD,EAAKve,YACzBvtD,KAAKyrE,aAAeK,EAAK7c,YAGzBjvD,KAAKgpC,SAAWhpC,KAAKgsE,YAAa,CAClC,MAAMvyC,EAAOz5B,KAAKsgC,aAAa,QAAQitB,UAAU,UAEjD,GAAqD,eAAjDvtD,KAAKsgC,aAAa,eAAeitB,aAA+E,eAA/CvtD,KAAKsgC,aAAa,aAAaitB,YAChGvtD,KAAKgpC,SAAW,OACb,GAAa,WAATvP,GAAsBz5B,KAAKisE,QAM/B,GAAa,WAATxyC,IAAsBz5B,KAAKksE,QAKlC,OAJAlsE,KAAKksE,SAAU,EACX9zB,GAAU0zB,GACVA,EAAK5d,SAAS9V,EAAOikB,gBAAkBjkB,EAAOkkB,qBAAuBt8D,KAAK+rE,eAEvE,OAVP/rE,KAAKisE,QAAS,EACV7zB,GAAU0zB,IACV1zB,EAAOikB,iBAAkB,EACzBjkB,EAAOkkB,qBAAuBwP,EAAKve,aAS3C,OAAO,CACX,CACAvtD,KAAKgpC,UAAYguB,EAEjB,IAAImV,GAAU,EACd,GAAInsE,KAAKosE,MAAQpsE,KAAKgpC,SAAU,CAC5B,IAAI6iC,EAAW7rE,KAAKwrE,YAEpB,MAAMa,EAAWrsE,KAAKsgC,aAAa,QACnC,GAAI+rC,EAAS5e,WAAY,CAErB,MAAM90C,EAAO0zD,EAAS9e,YACtBse,EAAW,GAAGxrE,OAAOsY,EAAM,KAAKtY,OAAOwrE,EAAU,IACrD,CACAC,EAAK5d,SAAS2d,GACdM,GAAU,CACd,CACA,OAAOA,CACX,CACA,WAAAP,GACI,MAAM,SAAE1gD,EAAS,OAAEjkB,GAAYjH,KAC/B,IACIspC,EACAqiC,EAFAD,GAAY1rE,KAAKgpC,SAAWhpC,KAAKosE,QAAUpsE,KAAKgsE,YAAchsE,KAAKosE,OAGvE,GAAInlE,EAAOwmD,WAAY,CACnB,MAAM1lD,EAAI2jE,GAAYzkE,EAAOknD,WAAW7tD,OAAS,GAC3CgsE,EAAK3iE,KAAKC,MAAM7B,GAChBwkE,EAAK5iE,KAAKwvB,KAAKpxB,GACrB,IAAIjE,EACJA,EAAQmD,EAAOknD,WAAWme,GAC1BhjC,EAAO,IAAI+jB,EAASniC,EAAU,OAAQpnB,EAAQwmB,WAAWxmB,GAAS,GAClEA,EAAQmD,EAAOknD,WAAWoe,GAC1BZ,EAAK,IAAIte,EAASniC,EAAU,KAAMpnB,EAAQwmB,WAAWxmB,GAAS,GAC9D4nE,GAAY3jE,EAAIukE,IAAOC,EAAKD,EAChC,MACIhjC,EAAOtpC,KAAKspC,KACZqiC,EAAK3rE,KAAK2rE,GAEd,MAAO,CACHD,WACApiC,OACAqiC,KAER,CACA,WAAA1gE,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,UACZ3Y,KAAKgpC,SAAW,EAChBhpC,KAAKyrE,aAAe,GACpBzrE,KAAKksE,SAAU,EACflsE,KAAKisE,QAAS,EACd/gD,EAASskC,OAAO2H,WAAW13D,KAAKO,MAChCA,KAAKosE,MAAQpsE,KAAKsgC,aAAa,SAASovB,kBACxC1vD,KAAKgsE,YAAchsE,KAAKosE,MAAQpsE,KAAKsgC,aAAa,OAAOovB,kBACzD1vD,KAAKspC,KAAOtpC,KAAKsgC,aAAa,QAC9BtgC,KAAK2rE,GAAK3rE,KAAKsgC,aAAa,MAC5BtgC,KAAKiH,OAAS,IAAIomD,EAASniC,EAAU,SAAU,MAC/C,MAAMshD,EAAaxsE,KAAKsgC,aAAa,UACjCksC,EAAW/e,YACXztD,KAAKiH,OAAOinD,SAASse,EAAWjf,YAAYtoD,MAAM,KAE1D,EA0CJ,MAAMwnE,WAAwBtS,GAC1B,WAAAlvD,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,YACZ3Y,KAAK0sE,OAAS1sE,KAAKsgC,aAAa,UAAU+tB,YAC1CruD,KAAK2sE,QAAU3sE,KAAKsgC,aAAa,WAAW+tB,YAC5CruD,KAAKqjE,WAAarjE,KAAKsgC,aAAa,gBAAgB+tB,WACxD,EAGJ,MAAMue,WAAqBvG,GACvB,WAAAp7D,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,QACZ3Y,KAAK0jE,UAAY1jE,KAAKsgC,aAAa,eAAe+tB,YAClDruD,KAAK6sE,QAAU7sE,KAAKsgC,aAAa,WAAWitB,YAC5CvtD,KAAK2iE,WAAa3iE,KAAKsgC,aAAa,eAAeitB,WACvD,EAGJ,MAAMuf,WAA4BF,GAC9B,WAAA3hE,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,gBACZ3Y,KAAK0jE,UAAY,CACrB,EA2tBJ,MAAMqJ,GAAe,6EAgHrB,MAAMC,GACF,UAAMhlE,CAAK+0D,EAAY1vB,GACnB,IACI,MAAM,SAAEniB,GAAclrB,KAEhBitE,SADoB/hD,EAASgiD,MAAM1U,OAAOxwD,KAAKqlC,IAC3BsrB,qBAAqB,QAC/Cp/C,MAAM+vB,KAAK2jC,GAAO1mE,SAAS4mE,IACvB,MAAMpM,EAAO71C,EAASC,cAAcgiD,GACpCjiD,EAAS2kC,YAAYn9C,IAAIqqD,EAAYgE,EAAK,GAElD,CAAE,MAAO7pB,GACL1lB,QAAQD,MAAM,6BAA8BlxB,OAAOgtC,EAAK,MAAQ6J,EACpE,CACAl3C,KAAKotE,QAAS,CAClB,CACA,WAAAniE,CAAYigB,GACRlrB,KAAKkrB,SAAWA,EAChBlrB,KAAKotE,QAAS,EACdliD,EAAS+hD,MAAMxtE,KAAKO,KACxB,EAGJ,MAAMqtE,WAAqBlT,GACvB,WAAAlvD,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,QACZ,MAAMoU,EAAMy+B,EAAejyC,MAAM+vB,KAAKtkC,EAAK03D,YAC1Cz8D,KAAK+C,GAAIA,EAAE2yB,cACVp1B,KAAK,IAAIugB,QAAQ,iEAAkE,IACpFA,QAAQ,cAAe,KAERiM,EAAI9nB,MAAM,KAClBsB,SAAS+mE,IACb,MAAMlf,EAAMkf,EAAG9f,OACf,IAAKY,EACD,OAEJ,MAAMmf,EAAWnf,EAAInpD,MAAM,KACrBuoE,EAAaD,EAAS,GAAGtoE,MAAM,KAC/BwoE,EAAWF,EAAS,GAAGtoE,MAAM,KACnCuoE,EAAWjnE,SAASvD,IAChB,MAAM0qE,EAAW1qE,EAAEwqD,OACnB,IAAKkgB,EACD,OAEJ,MAAMC,EAAQziD,EAASovC,OAAOtxD,IAAI0kE,IAAa,IAAIp7D,IAWnD,GAVAm7D,EAASlnE,SAASqnE,IACd,MAAM9B,EAAO8B,EAAQv2D,QAAQ,KACvBukC,EAAOgyB,EAAQ/sD,OAAO,EAAGirD,GAAMte,OAC/B1pD,EAAQ8pE,EAAQ/sD,OAAOirD,EAAO,EAAG8B,EAAQttE,OAASwrE,GAAMte,OAC1D5R,GAAQ93C,GACR6pE,EAAMj7D,IAAIkpC,EAAM,IAAIyR,EAASniC,EAAU0wB,EAAM93C,GACjD,IAEJonB,EAASovC,OAAO5nD,IAAIg7D,EAAUC,GAC9BziD,EAASywC,kBAAkBjpD,IAAIg7D,EAptI3C,SAAgClhB,GAChC,MAAMoP,EAAc,CAChB,EACA,EACA,GAEJ,IAAIiS,EAAkBrhB,EAAS1rC,QAAQ,mBAAoB,YAAYA,QAAQ,aAAc,KACzFk2C,EAAQ,EAiBZ,OAhBC6W,EAAiB7W,GAASzK,EAAkBshB,EAAiB7hB,GAC9D4P,EAAY,IAAM5E,GACjB6W,EAAiB7W,GAASzK,EAAkBshB,EAAiB5hB,GAC9D2P,EAAY,IAAM5E,GACjB6W,EAAiB7W,GAASzK,EAAkBshB,EAAiB3hB,GAC9D0P,EAAY,IAAM5E,GACjB6W,EAAiB7W,GAASzK,EAAkBshB,EAAiB1hB,GAC9DyP,EAAY,IAAM5E,GACjB6W,EAAiB7W,GAASzK,EAAkBshB,EAAiBzhB,GAC9DwP,EAAY,IAAM5E,GACjB6W,EAAiB7W,GAASzK,EAAkBshB,EAAiBxhB,GAC9DuP,EAAY,IAAM5E,EAClB6W,EAAkBA,EAAgB/sD,QAAQ,YAAa,KAAKA,QAAQ,QAAS,MAC5E+sD,EAAiB7W,GAASzK,EAAkBshB,EAAiBvhB,GAE9DsP,EAAY,IAAM5E,EACX4E,EAAYr7D,KAAK,GAC5B,CA2rIyDutE,CAAuBJ,IAC/C,eAAbA,EAA2B,CAC3B,MAAM3Q,EAAa4Q,EAAM3kE,IAAI,eAAeukD,YAAYzsC,QAAQ,OAAQ,IAC3D6sD,EAAM3kE,IAAI,OAAOukD,YAAYtoD,MAAM,KAC3CsB,SAASwnE,IACV,GAAIA,EAAI12D,QAAQ,iBAAmB,EAAG,CAClC,MAAMg2B,EAAMye,EAAiBiiB,GACzB1gC,GACK,IAAI2/B,GAAc9hD,GAAUljB,KAAK+0D,EAAY1vB,EAE1D,IAER,IACF,GAEV,EA+EJ,SAAS2gC,GAAMC,EAAKhoE,EAAGpD,EAAG8/B,EAAOurC,EAASC,GACtC,OAAOF,EAAIprE,EAAI8/B,EAAQ,EAAQ,EAAJ18B,EAAQkoE,EACvC,CACA,SAASC,GAAMH,EAAKhoE,EAAGpD,EAAG8/B,EAAOurC,EAASC,EAAM31C,GAC5Cy1C,EAAIprE,EAAI8/B,EAAQ,EAAQ,EAAJ18B,EAAQkoE,GAAQ31C,CACxC,CACA,SAAS,GAAEitB,EAAQjlD,EAAGkD,GAElB,OADW+hD,EAAOjlD,GACNkD,CAChB,CACA,SAAS,GAAEa,EAAG8pE,EAAIC,EAAIC,GAClB,OAAOF,EAAK1kE,KAAK6qC,IAAIjwC,GAAK+pE,EAAK3kE,KAAK8qC,IAAIlwC,GAAKgqE,CACjD,CAzFAlB,GAAavhB,iBAAmBA,EA0FhC,MAAM0iB,WAA6BrU,GAC/B,KAAA/5C,CAAM3Z,EAAKojD,EAAIqB,EAAIvoB,EAAOE,GAEtB,MAAM,eAAE4rC,EAAe,OAAEhpB,GAAYzlD,KAC/B0uE,EAAUjoE,EAAI6gD,aAAa,EAAG,EAAG3kB,EAAOE,GAC9C,IAAI,IAAIhgC,EAAI,EAAGA,EAAIggC,EAAQhgC,IACvB,IAAI,IAAIoD,EAAI,EAAGA,EAAI08B,EAAO18B,IAAI,CAC1B,MAAMpB,EAAImpE,GAAMU,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,GAC7C9/B,EAAIirE,GAAMU,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,GAC7Cr+B,EAAIwpE,GAAMU,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,GAC7Ct+B,EAAIypE,GAAMU,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,GACnD,IAAI8rC,EAAK,GAAElpB,EAAQ,EAAG5gD,GAAK,GAAE4gD,EAAQ,EAAG1iD,GAAK,GAAE0iD,EAAQ,EAAGjhD,GAAK,GAAEihD,EAAQ,EAAGlhD,GAAK,GAAEkhD,EAAQ,EAAG,GAC1FmpB,EAAK,GAAEnpB,EAAQ,EAAG5gD,GAAK,GAAE4gD,EAAQ,EAAG1iD,GAAK,GAAE0iD,EAAQ,EAAGjhD,GAAK,GAAEihD,EAAQ,EAAGlhD,GAAK,GAAEkhD,EAAQ,EAAG,GAC1FopB,EAAK,GAAEppB,EAAQ,GAAI5gD,GAAK,GAAE4gD,EAAQ,GAAI1iD,GAAK,GAAE0iD,EAAQ,GAAIjhD,GAAK,GAAEihD,EAAQ,GAAIlhD,GAAK,GAAEkhD,EAAQ,GAAI,GAC/FqpB,EAAK,GAAErpB,EAAQ,GAAI5gD,GAAK,GAAE4gD,EAAQ,GAAI1iD,GAAK,GAAE0iD,EAAQ,GAAIjhD,GAAK,GAAEihD,EAAQ,GAAIlhD,GAAK,GAAEkhD,EAAQ,GAAI,GAC/FgpB,IACAE,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,GAAMvqE,EAAI,KAEd6pE,GAAMM,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,EAAG8rC,GAC5CP,GAAMM,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,EAAG+rC,GAC5CR,GAAMM,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,EAAGgsC,GAC5CT,GAAMM,EAAQjtE,KAAMwE,EAAGpD,EAAG8/B,EAAOE,EAAQ,EAAGisC,EAChD,CAEJroE,EAAIuxD,UAAU,EAAG,EAAGr1B,EAAOE,GAC3Bp8B,EAAI4kD,aAAaqjB,EAAS,EAAG,EACjC,CACA,WAAAzjE,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,gBACZ,IAAI8sC,EAASiG,EAAU1rD,KAAKsgC,aAAa,UAAUitB,aACnD,OAAOvtD,KAAKsgC,aAAa,QAAQitB,UAAU,WACvC,IAAK,WACD,CACI,MAAM1M,EAAI4E,EAAO,GAC0BA,EAAS,CAChD,KAAQ,KAAQ5E,EAChB,KAAQ,KAAQA,EAChB,KAAQ,KAAQA,EAChB,EACA,EACA,KAAQ,KAAQA,EAChB,KAAQ,KAAQA,EAChB,KAAQ,KAAQA,EAChB,EACA,EACA,KAAQ,KAAQA,EAChB,KAAQ,KAAQA,EAChB,KAAQ,KAAQA,EAChB,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAEJ,KACJ,CACJ,IAAK,YACD,CACI,MAAMt8C,EAAIkhD,EAAO,GAAK97C,KAAK2qC,GAAK,IACWmR,EAAS,CAChD,GAAElhD,EAAG,KAAO,MAAQ,MACpB,GAAEA,EAAG,MAAQ,MAAQ,MACrB,GAAEA,EAAG,MAAQ,KAAO,MACpB,EACA,EACA,GAAEA,EAAG,MAAQ,KAAO,MACpB,GAAEA,EAAG,KAAO,KAAO,KACnB,GAAEA,EAAG,MAAQ,MAAQ,MACrB,EACA,EACA,GAAEA,EAAG,MAAQ,MAAQ,MACrB,GAAEA,EAAG,MAAQ,KAAO,MACpB,GAAEA,EAAG,KAAO,KAAO,MACnB,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAEJ,KACJ,CACJ,IAAK,mBAC0CkhD,EAAS,CAChD,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,MACA,MACA,MACA,EACA,EACA,EACA,EACA,EACA,EACA,GAIZzlD,KAAKylD,OAASA,EACdzlD,KAAKyuE,eAAiBzuE,KAAKsgC,aAAa,kBAAkBmtB,UAC9D,EAGJ,MAAMshB,WAAoB5U,GACtB,KAAA/5C,CAAM3Z,EAAKynB,GACP,MAAM,SAAEhD,GAAclrB,KAEtB,IAAIiG,EAAIjG,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCrsD,EAAI7C,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCvsB,EAAQ3iC,KAAKu3D,SAAS,SAASrI,UAAU,KACzCrsB,EAAS7iC,KAAKu3D,SAAS,UAAUrI,UAAU,KAC/C,IAAKvsB,IAAUE,EAAQ,CACnB,MAAM4vB,EAAc,IAAIsL,GACxB/9D,KAAKg7D,SAASz0D,SAAS00D,IACnBxI,EAAYyL,eAAejD,EAAM4G,eAAep7D,GAAK,IAEzDR,EAAI0D,KAAKC,MAAM6oD,EAAYliB,IAC3B1tC,EAAI8G,KAAKC,MAAM6oD,EAAY39C,IAC3B6tB,EAAQh5B,KAAKC,MAAM6oD,EAAY9vB,OAC/BE,EAASl5B,KAAKC,MAAM6oD,EAAY5vB,OACpC,CACA,MAAMmsC,EAAgBhvE,KAAK+7D,aAAa7tC,EAAS6gD,GAAY/S,cACvDiT,EAAa/jD,EAAS8/C,aAAa/kE,EAAI08B,EAAO9/B,EAAIggC,GAClDqsC,EAAUD,EAAWnhC,WAAW,MACtC5iB,EAASskC,OAAOwE,YAAYkb,GAC5BlvE,KAAK46D,eAAesU,GAGpB,IAAIV,GAAqBtjD,EAAU,CAC/BqxC,SAAU,EACVG,WAAY,GACZvuC,WAAY,CACR,CACIsuC,SAAU,OACV34D,MAAO,oBAEX,CACI24D,SAAU,iBACV34D,MAAO,WAGhBsc,MAAM8uD,EAAS,EAAG,EAAGjpE,EAAI08B,EAAO9/B,EAAIggC,GACvC,MAAMssC,EAAYjkD,EAAS8/C,aAAa/kE,EAAI08B,EAAO9/B,EAAIggC,GACjDusC,EAASD,EAAUrhC,WAAW,MACpC5iB,EAASskC,OAAOwE,YAAYob,GAC5BlhD,EAAQ+Q,OAAOmwC,GACfA,EAAOC,yBAA2B,iBAClCD,EAAOtP,UAAYoP,EAAQjf,cAAcgf,EAAY,aACrDG,EAAOE,SAAS,EAAG,EAAGrpE,EAAI08B,EAAO9/B,EAAIggC,GACrCp8B,EAAIq5D,UAAYsP,EAAOnf,cAAckf,EAAW,aAChD1oE,EAAI6oE,SAAS,EAAG,EAAGrpE,EAAI08B,EAAO9/B,EAAIggC,GAElC7iC,KAAKk8D,cAAchuC,EAAS8gD,EAChC,CACA,MAAA/vC,CAAOj8B,GAEP,CACA,WAAAiI,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MAChB,EAEJo2D,GAAY/S,aAAe,CACvB,OACA,YACA,aAGJ,MAAMuT,GAAO,OAiDb,MAAMC,WAAsBrV,GACxB,KAAA/5C,CAAM3Z,EAAKynB,GAEP,MAAM,SAAEhD,EAAS,SAAE8vC,GAAch7D,KAC3ByyD,EAAc,mBAAoBvkC,EAAUA,EAAQ2zC,eAAep7D,GAAO,KAChF,IAAKgsD,EACD,OAEJ,IAAIxiB,EAAK,EACLC,EAAK,EACT8qB,EAASz0D,SAAS00D,IACd,MAAMwU,EAAMxU,EAAMyU,qBAAuB,EACzCz/B,EAAKtmC,KAAKvC,IAAI6oC,EAAIw/B,GAClBv/B,EAAKvmC,KAAKvC,IAAI8oC,EAAIu/B,EAAI,IAE1B,MAAM9sC,EAAQh5B,KAAKC,MAAM6oD,EAAY9vB,OAC/BE,EAASl5B,KAAKC,MAAM6oD,EAAY5vB,QAChC8sC,EAAiBhtC,EAAQ,EAAIsN,EAC7B2/B,EAAkB/sC,EAAS,EAAIqN,EACrC,GAAIy/B,EAAiB,GAAKC,EAAkB,EACxC,OAEJ,MAAM3pE,EAAI0D,KAAKC,MAAM6oD,EAAYxsD,GAC3BpD,EAAI8G,KAAKC,MAAM6oD,EAAY5vD,GAC3BmsE,EAAgBhvE,KAAK+7D,aAAa7tC,EAASshD,GAAcxT,cACzDmT,EAAYjkD,EAAS8/C,aAAa2E,EAAgBC,GAClDR,EAASD,EAAUrhC,WAAW,MACpC5iB,EAASskC,OAAOwE,YAAYob,GAC5BA,EAAOnmC,WAAWhjC,EAAIgqC,GAAKptC,EAAIqtC,GAC/BhiB,EAAQ+Q,OAAOmwC,GAEfpU,EAASz0D,SAAS00D,IACa,mBAAhBA,EAAM76C,OACb66C,EAAM76C,MAAMgvD,EAAQ,EAAG,EAAGO,EAAgBC,EAC9C,IAGJnpE,EAAIopE,UAAUV,EAAW,EAAG,EAAGQ,EAAgBC,EAAiB3pE,EAAIgqC,EAAIptC,EAAIqtC,EAAIy/B,EAAgBC,GAChG5vE,KAAKk8D,cAAchuC,EAAS8gD,EAChC,CACA,MAAA/vC,CAAOj8B,GAEP,CACA,WAAAiI,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,QAChB,EAEJ62D,GAAcxT,aAAe,CACzB,SACA,YACA,aAwEJ,MAAM,GAAW,CACb,IAAO0M,GACP,KAAQe,GACR,OAv7DJ,cAA4BpD,GACxB,IAAAj0B,CAAK3rC,GACD,MAAM6G,EAAKtN,KAAKsgC,aAAa,MAAM4uB,UAAU,KACvC3hD,EAAKvN,KAAKsgC,aAAa,MAAM4uB,UAAU,KACvCrqD,EAAI7E,KAAKsgC,aAAa,KAAK4uB,YAMjC,OALIzoD,GAAO5B,EAAI,IACX4B,EAAImvD,YACJnvD,EAAIgiE,IAAIn7D,EAAIC,EAAI1I,EAAG,EAAa,EAAV8E,KAAK2qC,IAAQ,GACnC7tC,EAAIsvD,aAED,IAAIgI,GAAYzwD,EAAKzI,EAAG0I,EAAK1I,EAAGyI,EAAKzI,EAAG0I,EAAK1I,EACxD,CACA,UAAAqiE,GACI,OAAO,IACX,CACA,WAAAj8D,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,QAChB,GAs6DA,QAn6DJ,cAA6B0tD,GACzB,IAAAj0B,CAAK3rC,GACD,MAAMqjE,GAAcngE,KAAKoG,KAAK,GAAK,GAAK,EAA1B,EACR65D,EAAK5pE,KAAKsgC,aAAa,MAAM4uB,UAAU,KACvC2a,EAAK7pE,KAAKsgC,aAAa,MAAM4uB,UAAU,KACvC5hD,EAAKtN,KAAKsgC,aAAa,MAAM4uB,UAAU,KACvC3hD,EAAKvN,KAAKsgC,aAAa,MAAM4uB,UAAU,KAU7C,OATIzoD,GAAOmjE,EAAK,GAAKC,EAAK,IACtBpjE,EAAImvD,YACJnvD,EAAIovD,OAAOvoD,EAAKs8D,EAAIr8D,GACpB9G,EAAIqhE,cAAcx6D,EAAKs8D,EAAIr8D,EAAKu8D,EAAQD,EAAIv8D,EAAKw8D,EAAQF,EAAIr8D,EAAKs8D,EAAIv8D,EAAIC,EAAKs8D,GAC/EpjE,EAAIqhE,cAAcx6D,EAAKw8D,EAAQF,EAAIr8D,EAAKs8D,EAAIv8D,EAAKs8D,EAAIr8D,EAAKu8D,EAAQD,EAAIv8D,EAAKs8D,EAAIr8D,GAC/E9G,EAAIqhE,cAAcx6D,EAAKs8D,EAAIr8D,EAAKu8D,EAAQD,EAAIv8D,EAAKw8D,EAAQF,EAAIr8D,EAAKs8D,EAAIv8D,EAAIC,EAAKs8D,GAC/EpjE,EAAIqhE,cAAcx6D,EAAKw8D,EAAQF,EAAIr8D,EAAKs8D,EAAIv8D,EAAKs8D,EAAIr8D,EAAKu8D,EAAQD,EAAIv8D,EAAKs8D,EAAIr8D,GAC/E9G,EAAIsvD,aAED,IAAIgI,GAAYzwD,EAAKs8D,EAAIr8D,EAAKs8D,EAAIv8D,EAAKs8D,EAAIr8D,EAAKs8D,EAC3D,CACA,UAAA3C,GACI,OAAO,IACX,CACA,WAAAj8D,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,SAChB,GA44DA,KAz4DJ,cAA0B0tD,GACtB,SAAAyJ,GACI,MAAO,CACH,IAAI5e,GAAMlxD,KAAKsgC,aAAa,MAAM4uB,UAAU,KAAMlvD,KAAKsgC,aAAa,MAAM4uB,UAAU,MACpF,IAAIgC,GAAMlxD,KAAKsgC,aAAa,MAAM4uB,UAAU,KAAMlvD,KAAKsgC,aAAa,MAAM4uB,UAAU,MAE5F,CACA,IAAA9c,CAAK3rC,GACD,OAASR,EAAG+yC,EAAKn2C,EAAGw6B,IAASp3B,EAAGsqC,EAAK1tC,EAAGiS,IAAS9U,KAAK8vE,YAMtD,OALIrpE,IACAA,EAAImvD,YACJnvD,EAAIovD,OAAO7c,EAAI3b,GACf52B,EAAIqvD,OAAOvlB,EAAIz7B,IAEZ,IAAIipD,GAAY/kB,EAAI3b,EAAIkT,EAAIz7B,EACvC,CACA,UAAAoyD,GACI,MAAO9I,EAAI51D,GAAMxI,KAAK8vE,YAChBvrE,EAAI65D,EAAG7M,QAAQ/oD,GACrB,MAAO,CACH,CACI41D,EACA75D,GAEJ,CACIiE,EACAjE,GAGZ,CACA,WAAA0G,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MAChB,GAy2DA,SAAYoxD,GACZ,QAxzDJ,cAA6BA,GACzB,IAAA33B,CAAK3rC,GACD,MAAMgsD,EAAcrX,MAAMhJ,KAAK3rC,KACxB,EAAER,EAAE,EAAEpD,IAAQ7C,KAAK6b,OAK1B,OAJIpV,IACAA,EAAIqvD,OAAO7vD,EAAGpD,GACd4D,EAAIsvD,aAEDtD,CACX,CACA,WAAAxnD,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,SAChB,GA4yDA,KAAQ0tD,GACR,QA1yDJ,cAA6BlM,GACzB,aAAAlK,CAAcxpD,EAAKzD,EAAGmnE,GAClB,MAAMxnC,EAAQ3iC,KAAKu3D,SAAS,SAASrI,UAAU,KAAK,GAC9CrsB,EAAS7iC,KAAKu3D,SAAS,UAAUrI,UAAU,KAAK,GAEhD4b,EAAa,IAAIpC,GAAW1oE,KAAKkrB,SAAU,MACjD4/C,EAAW38C,WAAWzb,IAAI,UAAW,IAAI26C,EAASrtD,KAAKkrB,SAAU,UAAWlrB,KAAKsgC,aAAa,WAAW6tB,aACzG2c,EAAW38C,WAAWzb,IAAI,QAAS,IAAI26C,EAASrtD,KAAKkrB,SAAU,QAAS,GAAG7qB,OAAOsiC,EAAO,QACzFmoC,EAAW38C,WAAWzb,IAAI,SAAU,IAAI26C,EAASrtD,KAAKkrB,SAAU,SAAU,GAAG7qB,OAAOwiC,EAAQ,QAC5FioC,EAAW38C,WAAWzb,IAAI,YAAa,IAAI26C,EAASrtD,KAAKkrB,SAAU,YAAalrB,KAAKsgC,aAAa,oBAAoB6tB,aACtH2c,EAAW9P,SAAWh7D,KAAKg7D,SAC3B,MAAM+P,EAAgB/qE,KAAKkrB,SAAS8/C,aAAaroC,EAAOE,GAClDooC,EAAaF,EAAcj9B,WAAW,MACtCq2B,EAAQnkE,KAAKsgC,aAAa,KAC1B8jC,EAAQpkE,KAAKsgC,aAAa,KAC5B6jC,EAAM1W,YAAc2W,EAAM3W,YAC1Bwd,EAAWhiC,UAAUk7B,EAAMjV,UAAU,KAAK,GAAOkV,EAAMlV,UAAU,KAAK,IAEtEib,EAAkB1c,WAClBztD,KAAKs6D,OAAO5nD,IAAI,eAAgBy3D,GAEhCnqE,KAAKs6D,OAAOnyB,OAAO,gBAGvB,IAAI,IAAIliC,GAAK,EAAGA,GAAK,EAAGA,IACpB,IAAI,IAAIpD,GAAK,EAAGA,GAAK,EAAGA,IACpBooE,EAAWzQ,OACXsQ,EAAW38C,WAAWzb,IAAI,IAAK,IAAI26C,EAASrtD,KAAKkrB,SAAU,IAAKjlB,EAAI8kE,EAAcpoC,QAClFmoC,EAAW38C,WAAWzb,IAAI,IAAK,IAAI26C,EAASrtD,KAAKkrB,SAAU,IAAKroB,EAAIkoE,EAAcloC,SAClFioC,EAAW7rC,OAAOgsC,GAClBA,EAAWnQ,UAInB,OADgBr0D,EAAIwpD,cAAc8a,EAAe,SAErD,CACA,WAAA9/D,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,SAChB,GAowDA,OAjwDJ,cAA4BwhD,GACxB,MAAAl7B,CAAOx4B,EAAKyD,EAAOmqC,GACf,IAAKnqC,EACD,OAEJ,MAAM,EAAEjE,EAAE,EAAEpD,GAAOqH,EACb6lE,EAAS/vE,KAAKsgC,aAAa,UAAUitB,UAAU,QAC/CyiB,EAAchwE,KAAKsgC,aAAa,eAAeitB,UAAU,eAC/D9mD,EAAIwiC,UAAUhjC,EAAGpD,GACF,SAAXktE,GACAtpE,EAAI++C,OAAOnR,GAEK,gBAAhB27B,GACAvpE,EAAIuyB,MAAMvyB,EAAIw5D,UAAWx5D,EAAIw5D,WAEjCx5D,EAAI+zD,OAEJ,MAAMyV,EAAY,IAAIvH,GAAW1oE,KAAKkrB,UACtC+kD,EAAUt3D,KAAO3Y,KAAK2Y,KACtBs3D,EAAU9hD,WAAWzb,IAAI,UAAW,IAAI26C,EAASrtD,KAAKkrB,SAAU,UAAWlrB,KAAKsgC,aAAa,WAAW6tB,aACxG8hB,EAAU9hD,WAAWzb,IAAI,OAAQ,IAAI26C,EAASrtD,KAAKkrB,SAAU,OAAQlrB,KAAKsgC,aAAa,QAAQ6tB,aAC/F8hB,EAAU9hD,WAAWzb,IAAI,OAAQ,IAAI26C,EAASrtD,KAAKkrB,SAAU,OAAQlrB,KAAKsgC,aAAa,QAAQ6tB,aAC/F8hB,EAAU9hD,WAAWzb,IAAI,QAAS,IAAI26C,EAASrtD,KAAKkrB,SAAU,QAASlrB,KAAKsgC,aAAa,eAAe6tB,aACxG8hB,EAAU9hD,WAAWzb,IAAI,SAAU,IAAI26C,EAASrtD,KAAKkrB,SAAU,SAAUlrB,KAAKsgC,aAAa,gBAAgB6tB,aAC3G8hB,EAAU9hD,WAAWzb,IAAI,WAAY,IAAI26C,EAASrtD,KAAKkrB,SAAU,WAAYlrB,KAAKsgC,aAAa,YAAY6tB,aAC3G8hB,EAAU9hD,WAAWzb,IAAI,OAAQ,IAAI26C,EAASrtD,KAAKkrB,SAAU,OAAQlrB,KAAKsgC,aAAa,QAAQguB,SAAS,WACxG2hB,EAAU9hD,WAAWzb,IAAI,SAAU,IAAI26C,EAASrtD,KAAKkrB,SAAU,SAAUlrB,KAAKsgC,aAAa,UAAU6tB,SAAS,UAC9G8hB,EAAUjV,SAAWh7D,KAAKg7D,SAC1BiV,EAAUhxC,OAAOx4B,GACjBA,EAAIq0D,UACgB,gBAAhBkV,GACAvpE,EAAIuyB,MAAM,EAAIvyB,EAAIw5D,UAAW,EAAIx5D,EAAIw5D,WAE1B,SAAX8P,GACAtpE,EAAI++C,QAAQnR,GAEhB5tC,EAAIwiC,WAAWhjC,GAAIpD,EACvB,CACA,WAAAoI,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,QAChB,GAytDA,KAttDJ,cAA0BwhD,GACtB,MAAAl7B,GAEA,CACA,WAAAh0B,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MAChB,GAgtDA,eA/mDJ,cAAoCsxD,GAChC,WAAAO,CAAY/jE,EAAKynB,GACb,MAAMgiD,EAAiD,sBAA5BlwE,KAAKkqE,mBAC1BzX,EAAcyd,EAAqBhiD,EAAQ2zC,eAAep7D,GAAO,KACvE,GAAIypE,IAAuBzd,EACvB,OAAO,KAENzyD,KAAKsgC,aAAa,MAAMmtB,YAAeztD,KAAKsgC,aAAa,MAAMmtB,YAAeztD,KAAKsgC,aAAa,MAAMmtB,YAAeztD,KAAKsgC,aAAa,MAAMmtB,aAC9IztD,KAAKsgC,aAAa,MAAM,GAAM4tB,SAAS,GACvCluD,KAAKsgC,aAAa,MAAM,GAAM4tB,SAAS,GACvCluD,KAAKsgC,aAAa,MAAM,GAAM4tB,SAAS,GACvCluD,KAAKsgC,aAAa,MAAM,GAAM4tB,SAAS,IAE3C,MAAM3d,EAAK2/B,EAAqBzd,EAAYxsD,EAAIwsD,EAAY9vB,MAAQ3iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,KACtIp6C,EAAKo7D,EAAqBzd,EAAY5vD,EAAI4vD,EAAY5vB,OAAS7iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,KACvI1e,EAAK0/B,EAAqBzd,EAAYxsD,EAAIwsD,EAAY9vB,MAAQ3iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,KACtIn6C,EAAKm7D,EAAqBzd,EAAY5vD,EAAI4vD,EAAY5vB,OAAS7iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,KAC7I,OAAI3e,IAAOC,GAAM17B,IAAOC,EACb,KAEJtO,EAAI0pE,qBAAqB5/B,EAAIz7B,EAAI07B,EAAIz7B,EAChD,CACA,WAAA9J,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,iBACZ3Y,KAAKkrE,oBAAoBzrE,KAAK,KAAM,KAAM,KAAM,KACpD,GAslDA,eAnlDJ,cAAoCwqE,GAChC,WAAAO,CAAY/jE,EAAKynB,GACb,MAAMgiD,EAAiD,sBAA5BlwE,KAAKkqE,mBAC1BzX,EAAcvkC,EAAQ2zC,eAAep7D,GAC3C,GAAIypE,IAAuBzd,EACvB,OAAO,KAENzyD,KAAKsgC,aAAa,MAAMmtB,YACzBztD,KAAKsgC,aAAa,MAAM,GAAM4tB,SAAS,OAEtCluD,KAAKsgC,aAAa,MAAMmtB,YACzBztD,KAAKsgC,aAAa,MAAM,GAAM4tB,SAAS,OAEtCluD,KAAKsgC,aAAa,KAAKmtB,YACxBztD,KAAKsgC,aAAa,KAAK,GAAM4tB,SAAS,OAE1C,MAAM5gD,EAAK4iE,EAAqBzd,EAAYxsD,EAAIwsD,EAAY9vB,MAAQ3iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,KACtI3hD,EAAK2iE,EAAqBzd,EAAY5vD,EAAI4vD,EAAY5vB,OAAS7iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,KAC7I,IAAIkhB,EAAK9iE,EACL+iE,EAAK9iE,EACLvN,KAAKsgC,aAAa,MAAMmtB,aACxB2iB,EAAKF,EAAqBzd,EAAYxsD,EAAIwsD,EAAY9vB,MAAQ3iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,MAEtIlvD,KAAKsgC,aAAa,MAAMmtB,aACxB4iB,EAAKH,EAAqBzd,EAAY5vD,EAAI4vD,EAAY5vB,OAAS7iC,KAAKsgC,aAAa,MAAM+tB,YAAcruD,KAAKsgC,aAAa,MAAM4uB,UAAU,MAE3I,MAAMrqD,EAAIqrE,GAAsBzd,EAAY9vB,MAAQ8vB,EAAY5vB,QAAU,EAAI7iC,KAAKsgC,aAAa,KAAK+tB,YAAcruD,KAAKsgC,aAAa,KAAK4uB,YACpIohB,EAAKtwE,KAAKsgC,aAAa,MAAM4uB,YACnC,OAAOzoD,EAAI8pE,qBAAqBH,EAAIC,EAAIC,EAAIhjE,EAAIC,EAAI1I,EACxD,CACA,WAAAoG,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,iBACZ3Y,KAAKkrE,oBAAoBzrE,KAAK,KAAM,KAAM,IAAK,KAAM,KAAM,KAC/D,GAkjDA,KA/iDJ,cAA0B06D,GACtB,WAAAlvD,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,OACZ,MAAM84B,EAAS9nC,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGlH,KAAKsgC,aAAa,UAAU+tB,cAC7DmiB,EAAcxwE,KAAKu3D,SAAS,gBAClC,IAAIkZ,EAAYzwE,KAAKu3D,SAAS,cAAc,GACd,KAA1BkZ,EAAUljB,aACVkjB,EAAUviB,SAAS,QAEnBsiB,EAAY/iB,aACZgjB,EAAYA,EAAUngB,WAAWkgB,IAErCxwE,KAAKyxC,OAASA,EACdzxC,KAAKy2B,MAAQg6C,EAAUniB,UAC3B,GAiiDA,QAAW8c,GACX,aAh7CJ,cAAkCA,GAC9B,SAAAI,GACI,MAAM,SAAEE,EAAS,KAAEpiC,EAAK,GAAEqiC,GAAQ3rE,KAAK4rE,cACjC8E,EAAY,IAAI,EAASpnC,EAAKglB,YAC9BqiB,EAAU,IAAI,EAAShF,EAAGrd,YAChC,GAAIoiB,EAAUhwD,IAAMiwD,EAAQjwD,GAAI,CAE5B,MAAM7b,EAAI6rE,EAAU7rE,GAAK8rE,EAAQ9rE,EAAI6rE,EAAU7rE,GAAK6mE,EAC9C3oE,EAAI2tE,EAAU3tE,GAAK4tE,EAAQ5tE,EAAI2tE,EAAU3tE,GAAK2oE,EAC9ClnE,EAAIksE,EAAUlsE,GAAKmsE,EAAQnsE,EAAIksE,EAAUlsE,GAAKknE,EAEpD,MAAO,OAAOrrE,OAAOsJ,KAAKC,MAAM/E,GAAI,MAAMxE,OAAOsJ,KAAKC,MAAM7G,GAAI,MAAM1C,OAAOsJ,KAAKC,MAAMpF,GAAI,IAChG,CACA,OAAOxE,KAAKsgC,aAAa,QAAQguB,UACrC,CACA,WAAArjD,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,cAChB,GA+5CA,iBA55CJ,cAAsCyyD,GAClC,SAAAI,GACI,MAAM,SAAEE,EAAWpiC,KAAMsnC,EAAQjF,GAAIkF,GAAS7wE,KAAK4rE,cAE7CkF,EAAgBplB,EAAUklB,EAAMrjB,aAChCwjB,EAAcrlB,EAAUmlB,EAAItjB,aAC5Bse,EAAWiF,EAAc7wE,KAAI,CAACqpC,EAAM9oC,IAE/B8oC,GADIynC,EAAYvwE,GACH8oC,GAAQoiC,IAC7BnrE,KAAK,KACR,OAAOsrE,CACX,CACA,WAAA5gE,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,kBAChB,GA84CA,KA/2CJ,cAA0BwhD,GACtB,MAAAl7B,GAEA,CACA,WAAAh0B,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,OACZ3Y,KAAKwiE,UAAW,EAChBxiE,KAAK6iE,OAAS,IAAIvwD,IAClBtS,KAAK4iE,aAAe,IAAItwD,IACxBtS,KAAKwjE,OAAQ,EACbxjE,KAAK0jE,UAAY1jE,KAAKsgC,aAAa,eAAe+tB,YAClD,MAAM,YAAEwB,GAAiB3kC,GACnB,SAAE8vC,GAAch7D,KACtB,IAAK,MAAMi7D,KAASD,EAChB,GAAIC,aAAiBwR,GAAiB,CAClCzsE,KAAKsjE,SAAWrI,EAChB,MAAM+V,EAAkB/V,EAAM1D,SAAS,eACnCyZ,EAAgBvjB,YAChBoC,EAAYn9C,IAAIs+D,EAAgBzjB,YAAavtD,KAErD,MAAO,GAAIi7D,aAAiB6R,GACxB9sE,KAAK8iE,aAAe7H,OACjB,GAAIA,aAAiB2R,GACxB,GAAI3R,EAAM0H,WAAY,CAClB3iE,KAAKwjE,OAAQ,EACbxjE,KAAKwiE,UAAW,EAChB,IAAIyO,EAAcjxE,KAAK4iE,aAAa55D,IAAIiyD,EAAM4R,cACnB,IAAhBoE,IACPA,EAAc,IAAI3+D,IAClBtS,KAAK4iE,aAAalwD,IAAIuoD,EAAM4R,QAASoE,IAEzCA,EAAYv+D,IAAIuoD,EAAM0H,WAAY1H,EACtC,MACIj7D,KAAK6iE,OAAOnwD,IAAIuoD,EAAM4R,QAAS5R,EAI/C,GA00CA,YAAawR,GACb,gBAAiBK,GACjB,MAASF,GACT,KAAQpL,GACR,MAASwD,GACT,KA50CJ,cAA0BxD,GACtB,OAAA5E,GACI,MAAM1uC,EAAUluB,KAAKkwD,mBAAmBN,gBACxC,GAAI1hC,EAAS,CACT,MAAMQ,EAAaR,EAAQ8sC,SAAS,GACpC,GAAItsC,EACA,OAAOA,EAAWkuC,SAE1B,CACA,MAAO,EACX,CACA,WAAA3xD,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MAChB,GA+zCA,EA5zCJ,cAAuB6oD,GACnB,OAAA5E,GACI,OAAO58D,KAAKg8B,IAChB,CACA,cAAA4+B,CAAen0D,GACX,GAAIzG,KAAKkxE,QAAS,CAEd91B,MAAMwf,eAAen0D,GACrB,MAAM,SAAEykB,EAAS,EAAEjlB,EAAE,EAAEpD,GAAO7C,MACxB,MAAE82D,GAAW5rC,EAASskC,OACtBkO,EAAW,IAAIrQ,EAASniC,EAAU,WAAYqyC,GAAK76B,MAAMxX,EAASzkB,IAAIs6D,MAAMrD,UAE9E5G,EAAMnF,aACNmF,EAAMtE,iBAAiBxyD,KAAM,IAAI+9D,GAAY93D,EAAGpD,EAAI66D,EAASxO,UAAU,KAAMjpD,EAAIjG,KAAKoiE,YAAY37D,GAAM5D,GAEhH,MAAO,GAAI7C,KAAKg7D,SAAS16D,OAAS,EAAG,CAEjC,MAAMyC,EAAI,IAAIinE,GAAShqE,KAAKkrB,UAC5BnoB,EAAEi4D,SAAWh7D,KAAKg7D,SAClBj4D,EAAEq1C,OAASp4C,KACX+C,EAAEk8B,OAAOx4B,EACb,CACJ,CACA,OAAAorD,GACI,MAAM,OAAEvyC,GAAYtf,KAAKkrB,SACrB5L,GACAA,EAAO6xD,KAAKnxE,KAAKkwD,mBAAmB3C,YAE5C,CACA,WAAAuE,GACgB9xD,KAAKkrB,SAASzkB,IACtBonC,OAAOpiB,MAAM2mC,OAAS,SAC9B,CACA,WAAAnnD,CAAYigB,EAAU4tB,EAAOsjB,GACzBhhB,MAAMlwB,EAAU4tB,EAAOsjB,GACvBp8D,KAAK2Y,KAAO,IACZ,MAAM,WAAE+jD,GAAgB5jB,EAClBpqB,EAAaguC,EAAW,GACxBwU,EAAUxU,EAAWp8D,OAAS,GAAKiZ,MAAM+vB,KAAKozB,GAAY5qB,OAAO9sC,GAAyB,IAAlBA,EAAKu3D,WAEnFv8D,KAAKkxE,QAAUA,EACflxE,KAAKg8B,KAAOk1C,EAAUlxE,KAAK+iE,gBAAgBr0C,GAAc,EAC7D,GAmxCA,SAhxCJ,cAA8B8yC,GAC1B,OAAA5E,GACI,OAAO58D,KAAKg8B,IAChB,CACA,IAAAoW,CAAK3rC,GACD,MAAM,UAAE2qE,GAAepxE,KACnByG,GACAA,EAAImvD,YAERwb,EAAU7qE,SAAS8rD,IACf,IAAI,KAAE15C,EAAK,OAAEkD,GAAYw2C,EACzB,OAAO15C,GACH,KAAKusD,GAAWriB,QACRp8C,GACAA,EAAIqvD,OAAOj6C,EAAO,GAAIA,EAAO,IAEjC,MACJ,KAAKqpD,GAAWxiB,QACRj8C,GACAA,EAAIovD,OAAOh6C,EAAO,GAAIA,EAAO,IAEjC,MACJ,KAAKqpD,GAAW3iB,SACR97C,GACAA,EAAIqhE,cAAcjsD,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAEpF,MACJ,KAAKqpD,GAAWziB,QACRh8C,GACAA,EAAIshE,iBAAiBlsD,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAEjE,MACJ,KAAKqpD,GAAWxhB,IACZ,CACI,MAAOp2C,EAAIC,EAAIq8D,EAAIC,EAAIwH,EAAOC,EAAQC,EAAKC,GAAM31D,EAC3ChX,EAAI+kE,EAAKC,EAAKD,EAAKC,EACnB95B,EAAS65B,EAAKC,EAAK,EAAID,EAAKC,EAC5B75B,EAAS45B,EAAKC,EAAKA,EAAKD,EAAK,EAC/BnjE,IACAA,EAAIwiC,UAAU37B,EAAIC,GAClB9G,EAAI++C,OAAO+rB,GACX9qE,EAAIuyB,MAAM+W,EAAQC,GAClBvpC,EAAIgiE,IAAI,EAAG,EAAG5jE,EAAGwsE,EAAOA,EAAQC,EAAQ/M,QAAQ,EAAIiN,IACpD/qE,EAAIuyB,MAAM,EAAI+W,EAAQ,EAAIC,GAC1BvpC,EAAI++C,QAAQ+rB,GACZ9qE,EAAIwiC,WAAW37B,GAAKC,IAExB,KACJ,CACJ,KAAK23D,GAAWviB,WACRl8C,GACAA,EAAIsvD,YAGhB,GAER,CACA,cAAA6E,CAAen0D,GACXzG,KAAKyxE,YAAYhrE,GACjBA,EAAI+zD,OACJ,MAAMkX,EAAiB1xE,KAAKo4C,OAAOmf,SAAS,mBAAmBhK,YACzDmQ,EAAW19D,KAAKkiE,eAChB,UAAEyP,GAAe3xE,KACjBy5B,EAAOhzB,EAAIq5D,UACM,cAAnB4R,GACAjrE,EAAImvD,YAER+b,EAAUprE,SAAQ,CAACg8D,EAAO/hE,KACtB,MAAM,GAAE49D,EAAG,GAAE51D,EAAG,SAAEopE,EAAW51C,KAAM61C,GAAiBtP,EACpD97D,EAAI+zD,OACJ/zD,EAAIwiC,UAAUm1B,EAAGn4D,EAAGm4D,EAAGv7D,GACvB4D,EAAI++C,OAAOosB,GACPnrE,EAAIq5D,WACJr5D,EAAIk9D,SAASkO,EAAa,EAAG,GAE7BprE,EAAIwtD,aACJxtD,EAAIm9D,WAAWiO,EAAa,EAAG,GAEnCprE,EAAIq0D,UACmB,cAAnB4W,IACU,IAANlxE,GACAiG,EAAIovD,OAAOuI,EAAGn4D,EAAGm4D,EAAGv7D,EAAI66D,EAAW,GAEvCj3D,EAAIqvD,OAAOttD,EAAGvC,EAAGuC,EAAG3F,EAAI66D,EAAW,GACvC,IAamB,cAAnBgU,IACAjrE,EAAIw5D,UAAYvC,EAAW,GAC3Bj3D,EAAIwtD,YAAcx6B,EAClBhzB,EAAI6gE,SACJ7gE,EAAIsvD,aAERtvD,EAAIq0D,SACR,CACA,kBAAAgX,GACI,IAAIC,EAAM30D,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,EAC3E,OAAOpd,KAAKgyE,mBAAmBD,IAAQ,CAC3C,CACA,oBAAAE,CAAqBxrE,EAAKyrE,EAAQC,EAAeC,EAAeC,EAAcC,EAAal+B,EAAInmC,EAAGskE,GAC9F,IAAI9gC,EAAS6gC,EACTE,EAAaxyE,KAAKoiE,YAAY37D,EAAKwH,GAC7B,MAANA,GAAwB,YAAXikE,GAAwBC,EAAgBC,IACrDI,IAAeJ,EAAgBD,GAAiBE,GAEhDE,GAAS,IACT9gC,GAAUzxC,KAAK8xE,mBAAmBS,IAEtC,MAAME,EAAazyE,KAAK0yE,WAAa,GAC/BtU,EAAKp+D,KAAK2yE,0BAA0BlhC,EAAQghC,EAAY,GACxDjqE,EAAKxI,KAAK2yE,0BAA0BlhC,EAAS+gC,EAAYC,EAAY,GACrEzhE,EAAU,CACZotD,KACA51D,MAEEopE,EAAWxT,GAAM51D,EAAKmB,KAAK+lC,MAAMlnC,EAAG3F,EAAIu7D,EAAGv7D,EAAG2F,EAAGvC,EAAIm4D,EAAGn4D,GAAK,EACnE,GAAImuC,EAAI,CACJ,MAAMw+B,EAAMjpE,KAAK6qC,IAAI7qC,KAAK2qC,GAAK,EAAIs9B,GAAYx9B,EACzCy+B,EAAMlpE,KAAK6qC,KAAKo9B,GAAYx9B,EAClCpjC,EAAQotD,GAAK,IACNA,EACHn4D,EAAGm4D,EAAGn4D,EAAI2sE,EACV/vE,EAAGu7D,EAAGv7D,EAAIgwE,GAEd7hE,EAAQxI,GAAK,IACNA,EACHvC,EAAGuC,EAAGvC,EAAI2sE,EACV/vE,EAAG2F,EAAG3F,EAAIgwE,EAElB,CAEA,OADAphC,GAAU+gC,EACH,CACH/gC,SACAzgC,UACA4gE,WAER,CACA,WAAAxP,CAAY37D,EAAKu1B,GACb,MAAM,cAAE82C,GAAmB9yE,KACrB8kE,EAAa9oC,GAAQh8B,KAAK48D,UAChC,GAAIkW,EAAcjgE,IAAIiyD,GAClB,OAAOgO,EAAc9pE,IAAI87D,GAE7B,MAAMF,EAAU5kE,KAAK6kE,kBAAkBp+D,EAAKq+D,GAE5C,OADAgO,EAAcpgE,IAAIoyD,EAAYF,GACvBA,CACX,CAIA,WAAA6M,CAAYhrE,GACR,GAAIzG,KAAK2xE,UACL,OAEJ,MAAMxO,EAAanjE,KAAK48D,UAClBmW,EAAQ5P,EAAWl+D,MAAM,IACzBotE,EAAelP,EAAWl+D,MAAM,KAAK3E,OAAS,EAC9C6zC,EAAKn0C,KAAKo4C,OAAO9X,aAAa,MAAMr7B,QAAQhF,KAAK+C,GAAIA,EAAEksD,UAAU,OAEjE9a,EAAKp0C,KAAKo4C,OAAO9X,aAAa,MAAM4uB,UAAU,KAC9CgjB,EAASlyE,KAAKo4C,OAAOmf,SAAS,eAAehK,UAAU,SACvDylB,EAAchzE,KAAKu3D,SAAS,kBAC5B0b,EAAgBjzE,KAAKo4C,OAAOmf,SAAS,kBAC3C,IAAI2b,EAAgB,EACfF,EAAYvlB,YAAyC,YAA3BulB,EAAY7kB,WAEhC6kB,EAAYvlB,YACY,YAA3BulB,EAAY7kB,YAAuD,UAA3B6kB,EAAY7kB,aACpD+kB,EAAgBF,EAAY9jB,aAHhCgkB,EAAgBD,EAAc/jB,YAOlC,MAAM8iB,EAAqB,GACrBmB,EAAUhQ,EAAW7iE,OAC3BN,KAAKgyE,mBAAqBA,EAC1B,IAAI,IAAIxxB,EAAK,EAAGA,EAAK2yB,EAAS3yB,IAC1BwxB,EAAmBvyE,UAAuB,IAAX00C,EAAGqM,GAAsBrM,EAAGqM,GAAM0yB,GAErE,MAAME,EAAQpB,EAAmBn6C,QAAO,CAACme,EAAKq9B,EAAK7yE,IAAU,IAANA,EAAU,EAAIw1C,EAAMq9B,GAAO,GAChF,GACIC,EAAYtzE,KAAKoiE,YAAY37D,GAC7B0rE,EAAgBxoE,KAAKvC,IAAIksE,EAAYF,EAAO,GAClDpzE,KAAKszE,UAAYA,EACjBtzE,KAAK0yE,WAAa1yE,KAAKkiE,cACvBliE,KAAK2xE,UAAY,GACjB,MAAMS,EAAgBpyE,KAAKuzE,gBACrBC,EAAcxzE,KAAKu3D,SAAS,eAAelJ,UAAU,GAAK+jB,EAChE,IAAI3gC,EAAS,EACE,WAAXygC,GAAkC,WAAXA,IACvBzgC,GAAU0gC,EAAgB,GAEf,QAAXD,GAA+B,UAAXA,IACpBzgC,GAAU0gC,GAEd1gC,GAAU+hC,EACVT,EAAMxsE,SAAQ,CAAC+7D,EAAM9hE,KAEjB,MAAQixC,OAAQgiC,EAAW,QAAEziE,EAAQ,SAAE4gE,GAAc5xE,KAAKiyE,qBAAqBxrE,EAAKyrE,EAAQC,EAAeC,EAAeC,EAAc5gC,EAAQ2C,EAAIkuB,EAAM9hE,GAC1JixC,EAASgiC,EACJziE,EAAQotD,IAAOptD,EAAQxI,IAkB5BxI,KAAK2xE,UAAUlyE,KAAK,CAGhBu8B,KAAM+2C,EAAMvyE,GACZ49D,GAAIptD,EAAQotD,GACZ51D,GAAIwI,EAAQxI,GACZopE,YACF,GAEV,CACA,aAAA8B,CAActhC,GAGV,GAFApyC,KAAK2zE,YAAc,GAEdvhC,EACD,MAAO,GAEX,MAAMwhC,EAAe,IACf,WAAEtN,GAAgBl0B,EAGxB,IAFAk0B,EAAW96D,SAEJ86D,EAAWhB,SAAQ,CACtB,MAAM,QAAEn/D,GAAamgE,EACfuN,EAAS1tE,EAAUA,EAAQF,EAAI,EAC/B6tE,EAAS3tE,EAAUA,EAAQtD,EAAI,EAC/BwwB,EAAUizC,EAAWjjE,OAC3B,IAAI0wE,EAAkB1gD,EAAQ1a,KAC1BkD,EAAS,GACb,OAAOwX,EAAQ1a,MACX,KAAKusD,GAAWxiB,QACZ1iD,KAAKumE,MAAMD,EAAYzqD,GACvB,MACJ,KAAKqpD,GAAWriB,QACZkxB,EAAkB/zE,KAAKwmE,MAAMF,EAAYzqD,GACzC,MACJ,KAAKqpD,GAAWtiB,cACZmxB,EAAkB/zE,KAAKymE,MAAMH,EAAYzqD,GACzC,MACJ,KAAKqpD,GAAWpiB,aACZixB,EAAkB/zE,KAAK0mE,MAAMJ,EAAYzqD,GACzC,MACJ,KAAKqpD,GAAW3iB,SACZviD,KAAK2mE,MAAML,EAAYzqD,GACvB,MACJ,KAAKqpD,GAAW5iB,gBACZyxB,EAAkB/zE,KAAK4mE,MAAMN,EAAYzqD,GACzC,MACJ,KAAKqpD,GAAWziB,QACZziD,KAAK6mE,MAAMP,EAAYzqD,GACvB,MACJ,KAAKqpD,GAAW1iB,eACZuxB,EAAkB/zE,KAAK8mE,MAAMR,EAAYzqD,GACzC,MACJ,KAAKqpD,GAAWxhB,IACZ7nC,EAAS7b,KAAK+mE,MAAMT,GACpB,MACJ,KAAKpB,GAAWviB,WACZ0jB,GAAYW,MAAMV,GAGtBjzC,EAAQ1a,OAASusD,GAAWviB,WAC5BixB,EAAan0E,KAAK,CACdkZ,KAAMo7D,EACNl4D,SACArS,MAAO,CACHvD,EAAG4tE,EACHhxE,EAAGixE,GAEPH,WAAY3zE,KAAKg0E,WAAWH,EAAQC,EAAQC,EAAiBl4D,KAGjE+3D,EAAan0E,KAAK,CACdkZ,KAAMusD,GAAWviB,WACjB9mC,OAAQ,GACR83D,WAAY,GAGxB,CACA,OAAOC,CACX,CACA,KAAArN,CAAMD,EAAYzqD,GACd,MAAM,EAAE5V,EAAE,EAAEpD,GAAOwjE,GAAYE,MAAMD,GAAYp8D,MACjD2R,EAAOpc,KAAKwG,EAAGpD,EACnB,CACA,KAAA2jE,CAAMF,EAAYzqD,GACd,MAAM,EAAE5V,EAAE,EAAEpD,GAAOwjE,GAAYG,MAAMF,GAAYp8D,MAEjD,OADA2R,EAAOpc,KAAKwG,EAAGpD,GACRqiE,GAAWriB,OACtB,CACA,KAAA4jB,CAAMH,EAAYzqD,GACd,MAAM,EAAE5V,EAAE,EAAEpD,GAAOwjE,GAAYI,MAAMH,GAAYp8D,MAEjD,OADA2R,EAAOpc,KAAKwG,EAAGpD,GACRqiE,GAAWriB,OACtB,CACA,KAAA6jB,CAAMJ,EAAYzqD,GACd,MAAM,EAAE5V,EAAE,EAAEpD,GAAOwjE,GAAYK,MAAMJ,GAAYp8D,MAEjD,OADA2R,EAAOpc,KAAKwG,EAAGpD,GACRqiE,GAAWriB,OACtB,CACA,KAAA8jB,CAAML,EAAYzqD,GACd,MAAM,MAAE3R,EAAM,aAAE09D,EAAa,aAAEC,GAAkBxB,GAAYM,MAAML,GACnEzqD,EAAOpc,KAAKyK,EAAMjE,EAAGiE,EAAMrH,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,EAC/F,CACA,KAAA+jE,CAAMN,EAAYzqD,GACd,MAAM,MAAE3R,EAAM,aAAE09D,EAAa,aAAEC,GAAkBxB,GAAYO,MAAMN,GAEnE,OADAzqD,EAAOpc,KAAKyK,EAAMjE,EAAGiE,EAAMrH,EAAG+kE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,GACpFqiE,GAAW3iB,QACtB,CACA,KAAAskB,CAAMP,EAAYzqD,GACd,MAAM,aAAE+rD,EAAa,aAAEC,GAAkBxB,GAAYQ,MAAMP,GAC3DzqD,EAAOpc,KAAKmoE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,EAC7E,CACA,KAAAikE,CAAMR,EAAYzqD,GACd,MAAM,aAAE+rD,EAAa,aAAEC,GAAkBxB,GAAYS,MAAMR,GAE3D,OADAzqD,EAAOpc,KAAKmoE,EAAa3hE,EAAG2hE,EAAa/kE,EAAGglE,EAAa5hE,EAAG4hE,EAAahlE,GAClEqiE,GAAWziB,OACtB,CACA,KAAAskB,CAAMT,GACF,IAAI,GAAE3kB,EAAG,GAAEC,EAAG,UAAEF,EAAU,cAAEsmB,EAAc,MAAEG,EAAM,GAAEC,EAAG,GAAEC,GAAQhC,GAAYU,MAAMT,GAOnF,OANkB,IAAd5kB,GAAmB2mB,EAAK,IACxBA,GAAM,EAAI1+D,KAAK2qC,IAED,IAAdoN,GAAmB2mB,EAAK,IACxBA,GAAM,EAAI1+D,KAAK2qC,IAEZ,CACH6zB,EAAMliE,EACNkiE,EAAMtlE,EACN8+C,EACAC,EACAwmB,EACAC,EACAL,EACAtmB,EAER,CACA,UAAAsyB,CAAW/tE,EAAGpD,EAAGoxE,EAAap4D,GAC1B,IAAI00C,EAAM,EACN/nD,EAAK,KACLC,EAAK,KACL3F,EAAI,EACR,OAAOmxE,GACH,KAAK/O,GAAWriB,QACZ,OAAO7iD,KAAKk0E,cAAcjuE,EAAGpD,EAAGgZ,EAAO,GAAIA,EAAO,IACtD,KAAKqpD,GAAW3iB,SAIZ,IAFAgO,EAAM,EACN/nD,EAAKxI,KAAKm0E,sBAAsB,EAAGluE,EAAGpD,EAAGgZ,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACnG/Y,EAAI,IAAMA,GAAK,EAAGA,GAAK,IACvB2F,EAAKzI,KAAKm0E,sBAAsBrxE,EAAGmD,EAAGpD,EAAGgZ,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACvG00C,GAAOvwD,KAAKk0E,cAAc1rE,EAAGvC,EAAGuC,EAAG3F,EAAG4F,EAAGxC,EAAGwC,EAAG5F,GAC/C2F,EAAKC,EAET,OAAO8nD,EACX,KAAK2U,GAAWziB,QAIZ,IAFA8N,EAAM,EACN/nD,EAAKxI,KAAKo0E,0BAA0B,EAAGnuE,EAAGpD,EAAGgZ,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACjF/Y,EAAI,IAAMA,GAAK,EAAGA,GAAK,IACvB2F,EAAKzI,KAAKo0E,0BAA0BtxE,EAAGmD,EAAGpD,EAAGgZ,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACrF00C,GAAOvwD,KAAKk0E,cAAc1rE,EAAGvC,EAAGuC,EAAG3F,EAAG4F,EAAGxC,EAAGwC,EAAG5F,GAC/C2F,EAAKC,EAET,OAAO8nD,EACX,KAAK2U,GAAWxhB,IACZ,CAEI6M,EAAM,EACN,MAAM/mD,EAAQqS,EAAO,GAEfy1D,EAASz1D,EAAO,GAEhBpS,EAAMoS,EAAO,GAAKy1D,EACxB,IAAI+C,EAAM1qE,KAAK2qC,GAAK,IAOpB,GALI3qC,KAAKiE,IAAIpE,EAAQC,GAAO4qE,IACxBA,EAAM1qE,KAAKiE,IAAIpE,EAAQC,IAG3BjB,EAAKxI,KAAKs0E,wBAAwBz4D,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIrS,EAAO,GACjF8nE,EAAS,EACT,IAAIxuE,EAAI0G,EAAQ6qE,EAAKvxE,EAAI2G,EAAK3G,GAAKuxE,EAC/B5rE,EAAKzI,KAAKs0E,wBAAwBz4D,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAI/Y,EAAG,GACjFytD,GAAOvwD,KAAKk0E,cAAc1rE,EAAGvC,EAAGuC,EAAG3F,EAAG4F,EAAGxC,EAAGwC,EAAG5F,GAC/C2F,EAAKC,OAGT,IAAI3F,EAAI0G,EAAQ6qE,EAAKvxE,EAAI2G,EAAK3G,GAAKuxE,EAC/B5rE,EAAKzI,KAAKs0E,wBAAwBz4D,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAI/Y,EAAG,GACjFytD,GAAOvwD,KAAKk0E,cAAc1rE,EAAGvC,EAAGuC,EAAG3F,EAAG4F,EAAGxC,EAAGwC,EAAG5F,GAC/C2F,EAAKC,EAKb,OAFAA,EAAKzI,KAAKs0E,wBAAwBz4D,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIpS,EAAK,GACnF8mD,GAAOvwD,KAAKk0E,cAAc1rE,EAAGvC,EAAGuC,EAAG3F,EAAG4F,EAAGxC,EAAGwC,EAAG5F,GACxC0tD,CACX,EAER,OAAO,CACX,CACA,cAAAgkB,CAAexzC,EAAM49B,EAAKC,EAAKC,EAAKC,GAChC,IAAI0V,EAAQp3D,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAKuhD,EAAK8V,EAAQr3D,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAKwhD,EAC3J,MAAM9c,GAAKgd,EAAMF,IAAQC,EAAMF,EAAMjS,GACrC,IAAIzuC,EAAMtU,KAAKoG,KAAKgxB,EAAOA,GAAQ,EAAI+gB,EAAIA,IACvC+c,EAAMF,IACN1gD,IAAQ,GAEZ,IAAIy2D,EAAO5yB,EAAI7jC,EACXzN,EAAK,KACT,GAAIquD,IAAQF,EACRnuD,EAAK,CACDvK,EAAGuuE,EACH3xE,EAAG4xE,EAAQC,QAEZ,IAAKD,EAAQ7V,IAAQ4V,EAAQ7V,EAAMjS,KAAiB5K,EACvDtxC,EAAK,CACDvK,EAAGuuE,EAAQv2D,EACXpb,EAAG4xE,EAAQC,OAEZ,CACH,IAAIC,EAAK,EACLC,EAAK,EACT,MAAMrkB,EAAMvwD,KAAKk0E,cAAcvV,EAAKC,EAAKC,EAAKC,GAC9C,GAAIvO,EAAM7D,EACN,OAAO,KAEX,IAAI1/C,GAAKwnE,EAAQ7V,IAAQE,EAAMF,IAAQ8V,EAAQ7V,IAAQE,EAAMF,GAC7D5xD,GAAKujD,EAAMA,EACXokB,EAAKhW,EAAM3xD,GAAK6xD,EAAMF,GACtBiW,EAAKhW,EAAM5xD,GAAK8xD,EAAMF,GACtB,MAAMiW,EAAQ70E,KAAKk0E,cAAcM,EAAOC,EAAOE,EAAIC,GAC7CE,EAAOnrE,KAAKoG,KAAKgxB,EAAOA,EAAO8zC,EAAQA,GAC7C52D,EAAMtU,KAAKoG,KAAK+kE,EAAOA,GAAQ,EAAIhzB,EAAIA,IACnC+c,EAAMF,IACN1gD,IAAQ,GAEZy2D,EAAO5yB,EAAI7jC,EACXzN,EAAK,CACDvK,EAAG0uE,EAAK12D,EACRpb,EAAG+xE,EAAKF,EAEhB,CACA,OAAOlkE,CACX,CACA,cAAAukE,CAAe58C,GACX,MAAM68C,EAAUh1E,KAAKuzE,gBACrB,IAAI0B,EAAuB,EACvBltE,EAAI,KACR,GAAIowB,GAAY,MAAWA,EAAW,KAAU68C,EAC5C,OAAO,KAEX,MAAM,UAAE5D,GAAepxE,KACvB,IAAK,MAAMqzB,KAAW+9C,EAAU,CAC5B,GAAI/9C,IAAYA,EAAQsgD,WAAa,MAAWsB,EAAuB5hD,EAAQsgD,WAAa,KAAUx7C,GAAW,CAC7G88C,GAAwB5hD,EAAQsgD,WAChC,QACJ,CACA,MAAM3c,EAAQ7+B,EAAW88C,EACzB,IAAIC,EAAW,EACf,OAAO7hD,EAAQ1a,MACX,KAAKusD,GAAWriB,QACZ96C,EAAI/H,KAAKu0E,eAAevd,EAAO3jC,EAAQ7pB,MAAMvD,EAAGotB,EAAQ7pB,MAAM3G,EAAGwwB,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQ7pB,MAAMvD,EAAGotB,EAAQ7pB,MAAM3G,GACtI,MACJ,KAAKqiE,GAAWxhB,IACZ,CACI,MAAMl6C,EAAQ6pB,EAAQxX,OAAO,GAEvBy1D,EAASj+C,EAAQxX,OAAO,GAExBpS,EAAM4pB,EAAQxX,OAAO,GAAKy1D,EAEhC,GADA4D,EAAW1rE,EAAQwtD,EAAQ3jC,EAAQsgD,WAAarC,EAC5CA,EAAS,GAAK4D,EAAWzrE,GAAO6nE,GAAU,GAAK4D,EAAWzrE,EAC1D,MAEJ1B,EAAI/H,KAAKs0E,wBAAwBjhD,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIq5D,EAAU7hD,EAAQxX,OAAO,IACtI,KACJ,CACJ,KAAKqpD,GAAW3iB,SACZ2yB,EAAWle,EAAQ3jC,EAAQsgD,WACvBuB,EAAW,IACXA,EAAW,GAEfntE,EAAI/H,KAAKm0E,sBAAsBe,EAAU7hD,EAAQ7pB,MAAMvD,EAAGotB,EAAQ7pB,MAAM3G,EAAGwwB,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,IACzL,MACJ,KAAKqpD,GAAWziB,QACZyyB,EAAWle,EAAQ3jC,EAAQsgD,WACvBuB,EAAW,IACXA,EAAW,GAEfntE,EAAI/H,KAAKo0E,0BAA0Bc,EAAU7hD,EAAQ7pB,MAAMvD,EAAGotB,EAAQ7pB,MAAM3G,EAAGwwB,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,GAAIwX,EAAQxX,OAAO,IAG/J,GAAI9T,EACA,OAAOA,EAEX,KACJ,CACA,OAAO,IACX,CACA,aAAAmsE,CAAc3jC,EAAIz7B,EAAI07B,EAAIz7B,GACtB,OAAOpL,KAAKoG,MAAMygC,EAAKD,IAAOC,EAAKD,IAAOx7B,EAAKD,IAAOC,EAAKD,GAC/D,CACA,aAAAy+D,GAKI,OAJyB,IAArBvzE,KAAK2zE,aACL3zE,KAAK2zE,WAAa3zE,KAAKoxE,UAAUv5C,QAAO,CAACv3B,EAAQ+yB,IAAUA,EAAQsgD,WAAa,EAAIrzE,EAAS+yB,EAAQsgD,WAAarzE,GAChH,IAECN,KAAK2zE,UAChB,CACA,qBAAAQ,CAAsBgB,EAAKxW,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKoW,EAAKC,GAG1D,MAAO,CACHpvE,EAHMmvE,EAAMtoB,EAAIqoB,GAAOpW,EAAMhS,EAAIooB,GAAOtW,EAAM7R,EAAImoB,GAAOxW,EAAM1R,EAAIkoB,GAInEtyE,EAHMwyE,EAAMvoB,EAAIqoB,GAAOnW,EAAMjS,EAAIooB,GAAOrW,EAAM9R,EAAImoB,GAAOvW,EAAM3R,EAAIkoB,GAK3E,CACA,yBAAAf,CAA0Be,EAAKxW,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAGpD,MAAO,CACH/4D,EAHM84D,EAAM7R,EAAIioB,GAAOtW,EAAM1R,EAAIgoB,GAAOxW,EAAMvR,EAAI+nB,GAIlDtyE,EAHMm8D,EAAM9R,EAAIioB,GAAOrW,EAAM3R,EAAIgoB,GAAOvW,EAAMxR,EAAI+nB,GAK1D,CACA,uBAAAb,CAAwBhnE,EAAIC,EAAIq8D,EAAIC,EAAIwH,EAAOE,GAC3C,MAAM+D,EAAS3rE,KAAK6qC,IAAI+8B,GAClBgE,EAAS5rE,KAAK8qC,IAAI88B,GAClB/gE,EACCo5D,EAAKjgE,KAAK6qC,IAAI68B,GADf7gE,EAECq5D,EAAKlgE,KAAK8qC,IAAI48B,GAErB,MAAO,CACHprE,EAAGqH,GAAMkD,EAAO8kE,EAAS9kE,EAAO+kE,GAChC1yE,EAAG0K,GAAMiD,EAAO+kE,EAAS/kE,EAAO8kE,GAExC,CAEA,qBAAAE,CAAsBC,EAAWC,GAC7B,MAAMV,EAAUh1E,KAAKuzE,gBACfoC,EAAYD,GAAkB,IAE9BzxE,EAAOwxE,GAAaT,EAAU,IACpC,IAAKh1E,KAAK41E,kBAAoB51E,KAAK41E,iBAAiB3xE,OAASA,GAAQjE,KAAK41E,iBAAiBD,YAAcA,EAAW,CAEhH31E,KAAK41E,iBAAmB,CACpB3xE,OACA0xE,YACA95D,OAAQ,IAGZ,IAAIglC,EAAI,EACR,IAAI,IAAIj8C,EAAI,EAAGA,GAAKowE,EAASpwE,GAAK+wE,EAAU,CACxC,MAAMvX,EAAKp+D,KAAK+0E,eAAenwE,GACzB4D,EAAKxI,KAAK+0E,eAAenwE,EAAI+wE,GAC9BvX,GAAO51D,IAGZq4C,GAAK7gD,KAAKk0E,cAAc9V,EAAGn4D,EAAGm4D,EAAGv7D,EAAG2F,EAAGvC,EAAGuC,EAAG3F,GACzCg+C,GAAK58C,IACLjE,KAAK41E,iBAAiB/5D,OAAOpc,KAAK,CAC9BwG,EAAGm4D,EAAGn4D,EACNpD,EAAGu7D,EAAGv7D,EACNs1B,SAAUvzB,IAEdi8C,GAAK58C,GAEb,CACJ,CACJ,CACA,yBAAA0uE,CAA0BkD,EAAgB5xE,EAAM0xE,GAE5C,GADA31E,KAAKw1E,sBAAsBvxE,EAAM0xE,GAC7BE,EAAiB,GAAKA,EAAiB71E,KAAKuzE,gBAAkB,KAC9D,OAAO,KAEX,MAAMxB,EAAMpoE,KAAKwB,MAAM0qE,EAAiB71E,KAAKuzE,iBAAmBvzE,KAAK41E,iBAAiB/5D,OAAOvb,OAAS,IACtG,OAAON,KAAK41E,iBAAiB/5D,OAAOk2D,IAAQ,IAChD,CACA,WAAA9mE,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,WACZ3Y,KAAKszE,UAAY,EACjBtzE,KAAK0yE,WAAa,EAClB1yE,KAAK2zE,YAAc,EACnB3zE,KAAK2xE,UAAY,KACjB3xE,KAAKgyE,mBAAqB,GAC1BhyE,KAAK8yE,cAAgB,IAAIxgE,IAAI,CACzB,CACI,GACA,KAGR,MAAMwjE,EAAc91E,KAAKkwD,mBAAmBN,gBAC5C5vD,KAAKg8B,KAAOh8B,KAAK+iE,kBACjB/iE,KAAKoxE,UAAYpxE,KAAK0zE,cAAcoC,EACxC,GAoqBA,MA/pBJ,cAA2BxW,GACvB,eAAMyW,CAAUvoC,GACZ,IACI,MAAMwoC,QAAch2E,KAAKkrB,SAAS+qD,YAAYzoC,GAC9CxtC,KAAKg2E,MAAQA,CACjB,CAAE,MAAO9+B,GACL1lB,QAAQD,MAAM,8BAA+BlxB,OAAOmtC,EAAM,MAAQ0J,EACtE,CACAl3C,KAAKotE,QAAS,CAClB,CACA,aAAM8I,CAAQ1oC,GACV,MAAMoe,EAAQmhB,GAAaviD,KAAKgjB,GAChC,GAAIoe,EAAO,CACP,MAAMnqD,EAAOmqD,EAAM,GACfnqD,IACiB,WAAbmqD,EAAM,GACN5rD,KAAKg2E,MAAQG,KAAK10E,GAElBzB,KAAKg2E,MAAQI,mBAAmB30E,GAG5C,MACI,IACI,MAAMyvB,QAAiBlxB,KAAKkrB,SAASiG,MAAMqc,GACrC1G,QAAY5V,EAAS8K,OAC3Bh8B,KAAKg2E,MAAQlvC,CACjB,CAAE,MAAOoQ,GACL1lB,QAAQD,MAAM,8BAA+BlxB,OAAOmtC,EAAM,MAAQ0J,EACtE,CAEJl3C,KAAKotE,QAAS,CAClB,CACA,cAAAxS,CAAen0D,GACX,MAAM,SAAEykB,EAAS,MAAE8qD,EAAM,OAAE5I,GAAYptE,KACjCiG,EAAIjG,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCrsD,EAAI7C,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCvsB,EAAQ3iC,KAAKu3D,SAAS,SAASrI,UAAU,KACzCrsB,EAAS7iC,KAAKu3D,SAAS,UAAUrI,UAAU,KACjD,GAAKke,GAAW4I,GAAUrzC,GAAUE,EAApC,CAKA,GAFAp8B,EAAI+zD,OACJ/zD,EAAIwiC,UAAUhjC,EAAGpD,GACI,iBAAVmzE,EAAoB,CAC3B,MAAMK,EAAcnrD,EAASgiD,MAAMoJ,WAAW7vE,EAAKuvE,EAAO,CACtD3f,aAAa,EACbC,iBAAiB,EACjBC,kBAAkB,EAClBC,aAAa,EACbI,QAAS,EACTC,QAAS,EACTH,WAAY/zB,EACZg0B,YAAa9zB,KAEX,gBAAE0zC,GAAqBF,EAAYnrD,SACrCqrD,IACAA,EAAgBn+B,OAASp4C,MAExBq2E,EAAYp3C,QACrB,MACI/T,EAASmpC,WAAW,CAChB5tD,MACA6tD,YAAat0D,KAAKsgC,aAAa,uBAAuBitB,YACtD5qB,QACA4xB,aAAcyhB,EAAMrzC,MACpBE,SACA2xB,cAAewhB,EAAMnzC,SAErB7iC,KAAKotE,SACC,aAAc4I,IAAUA,EAAMQ,UAChC/vE,EAAIopE,UAAUmG,EAAO,EAAG,IAIpCvvE,EAAIq0D,SAlCJ,CAmCJ,CACA,cAAA+G,GACI,MAAM57D,EAAIjG,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCrsD,EAAI7C,KAAKsgC,aAAa,KAAK4uB,UAAU,KACrCvsB,EAAQ3iC,KAAKu3D,SAAS,SAASrI,UAAU,KACzCrsB,EAAS7iC,KAAKu3D,SAAS,UAAUrI,UAAU,KACjD,OAAO,IAAI6O,GAAY93D,EAAGpD,EAAGoD,EAAI08B,EAAO9/B,EAAIggC,EAChD,CACA,WAAA53B,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,QACZ3Y,KAAKotE,QAAS,EACd,MAAM5/B,EAAOxtC,KAAKkwD,mBAAmB3C,YACrC,IAAK/f,EACD,OAEJ,MAAMipC,EAAQjpC,EAAKygB,SAAS,SAAW,4BAA4BJ,KAAKrgB,GACxEtiB,EAASwrD,OAAOj3E,KAAKO,MAChBy2E,EAGIz2E,KAAKk2E,QAAQ1oC,GAFbxtC,KAAK+1E,UAAUvoC,EAI5B,GA8jBA,EAAKw8B,GACL,OA5jBJ,cAA4B1K,GACxB,MAAArgC,CAAOj8B,GAEP,CACA,WAAAiI,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,QAChB,GAsjBA,MAAS00D,GACT,IA1eJ,cAAyB/N,GACrB,UAAA3E,CAAWl0D,GACP20C,MAAMuf,WAAWl0D,GACjB,MAAM09D,EAAQnkE,KAAKsgC,aAAa,KAC1B8jC,EAAQpkE,KAAKsgC,aAAa,KAC5B6jC,EAAM1W,YACNhnD,EAAIwiC,UAAUk7B,EAAMjV,UAAU,KAAM,GAEpCkV,EAAM3W,YACNhnD,EAAIwiC,UAAU,EAAGm7B,EAAMlV,UAAU,KAEzC,CACA,IAAA9c,CAAK3rC,GACD,MAAM,QAAEynB,GAAaluB,KACjBkuB,GACAA,EAAQkkB,KAAK3rC,EAErB,CACA,cAAAm0D,CAAen0D,GACX,MAAM,SAAEykB,EAAS,QAAEgD,GAAaluB,KAChC,GAAIkuB,EAAS,CACT,IAAIyoD,EAAUzoD,EAWd,GAVqB,WAAjBA,EAAQvV,OAERg+D,EAAU,IAAIjO,GAAWx9C,GACzByrD,EAAQxoD,WAAWzb,IAAI,UAAW,IAAI26C,EAASniC,EAAU,UAAWgD,EAAQoS,aAAa,WAAWitB,cACpGopB,EAAQxoD,WAAWzb,IAAI,sBAAuB,IAAI26C,EAASniC,EAAU,sBAAuBgD,EAAQoS,aAAa,uBAAuBitB,cACxIopB,EAAQxoD,WAAWzb,IAAI,WAAY,IAAI26C,EAASniC,EAAU,WAAYgD,EAAQoS,aAAa,YAAYitB,cACvGopB,EAAQ3b,SAAW9sC,EAAQ8sC,SAE3B9sC,EAAQosC,OAAO5nD,IAAI,UAAW,IAAI26C,EAASniC,EAAU,UAAWlrB,KAAKu/D,sBAEpD,QAAjBoX,EAAQh+D,KAAgB,CACxB,MAAM2+C,EAAat3D,KAAKu3D,SAAS,SAAS,GAAO,GAC3CC,EAAcx3D,KAAKu3D,SAAS,UAAU,GAAO,GAE/CD,EAAW7J,YACXkpB,EAAQxoD,WAAWzb,IAAI,QAAS,IAAI26C,EAASniC,EAAU,QAASosC,EAAW/J,cAE3EiK,EAAY/J,YACZkpB,EAAQxoD,WAAWzb,IAAI,SAAU,IAAI26C,EAASniC,EAAU,SAAUssC,EAAYjK,aAEtF,CACA,MAAMqpB,EAAYD,EAAQv+B,OAC1Bu+B,EAAQv+B,OAASp4C,KACjB22E,EAAQ13C,OAAOx4B,GACfkwE,EAAQv+B,OAASw+B,CACrB,CACJ,CACA,cAAA/U,CAAep7D,GACX,MAAM,QAAEynB,GAAaluB,KACrB,OAAIkuB,EACOA,EAAQ2zC,eAAep7D,GAE3B,IACX,CACA,gBAAAowE,GACI,MAAM,SAAE3rD,EAAS,QAAEgD,GAAaluB,KAChC,OAAKkuB,EAGEsrC,GAAUC,YAAYvuC,EAAUgD,GAF5B,IAGf,CACA,WAAIA,GAIA,OAHKluB,KAAK82E,gBACN92E,KAAK82E,cAAgB92E,KAAKkwD,mBAAmBN,iBAE1C5vD,KAAK82E,aAChB,CACA,WAAA7rE,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,KAChB,GAmaA,KAAQo2D,GACR,SA1MJ,cAA8B5U,GAC1B,KAAA/5C,CAAM3Z,GACF,MAAM,SAAEykB,GAAclrB,KAChB+2E,EAAeC,QAAQtwB,eAAejgD,IACtC,UAAEmvD,EAAU,UAAEG,GAAetvD,EAC/BswE,IACAA,EAAanhB,UAAY2Z,GACzBwH,EAAahhB,UAAYwZ,IAE7ByH,QAAQ52D,MAAMw1C,EAAWnvD,EAAK,IAC9BzG,KAAKg7D,SAASz0D,SAAS00D,IACnB,KAAM,SAAUA,GACZ,OAEJ,IAAIvzB,EAAY,qBAAsBuzB,EAAQA,EAAM4b,mBAAqB,KAEpEnvC,IACDA,EAAY8xB,GAAUC,YAAYvuC,EAAU+vC,IAE5CvzB,GACAA,EAAUtnB,MAAM3Z,GAEpBw0D,EAAM7oB,KAAK3rC,GACPswE,IACAA,EAAahhB,UAAYA,GAEzBruB,GACAA,EAAUuxB,QAAQxyD,EACtB,IAEJuwE,QAAQ52D,MAAM21C,EAAWtvD,EAAK,IAC9BA,EAAIkuD,OACAoiB,IACAA,EAAanhB,UAAYA,EACzBmhB,EAAahhB,UAAYA,EAEjC,CACA,MAAA92B,CAAOj8B,GAEP,CACA,WAAAiI,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,UAChB,GAgKA,OAAU62D,GACV,aAxGJ,cAAkCrV,GAC9B,KAAA/5C,CAAMpd,EAAG6mD,EAAIqB,EAAI+rB,EAAQ/I,GAEzB,CACA,WAAAjjE,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,eACZ3Y,KAAK07D,8BACT,GAiGA,aA9FJ,cAAkCvB,GAC9B,KAAA/5C,CAAMpd,EAAG6mD,EAAIqB,EAAI+rB,EAAQ/I,GAEzB,CACA,WAAAjjE,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,cAChB,GAwFA,YArFJ,cAAiCwhD,GAC7B,KAAA/5C,CAAMpd,EAAG6mD,EAAIqB,EAAI+rB,EAAQ/I,GAEzB,CACA,WAAAjjE,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,aAChB,GA+EA,cAAiB61D,GACjB,eA7EJ,cAAoCrU,GAChC,KAAA/5C,CAAM3Z,EAAKR,EAAGpD,EAAG8/B,EAAOE,GACpB,MAAM,SAAE3X,EAAS,WAAEgsD,GAAgBl3E,KAC7B2C,EAAOuoB,EAAS5L,OAAS4L,EAAS5L,OAAO4L,SAASvoB,KAAO,KACzDkrC,EAASpnC,EAAIonC,OAEnBA,EAAOluC,GAAKurB,EAASisD,cACjBx0E,IACAkrC,EAAOpiB,MAAMoK,QAAU,OACvBlzB,EAAKgpB,YAAYkiB,IAErB,EAAWA,EAAQ5nC,EAAGpD,EAAG8/B,EAAOE,EAAQq0C,GACpCv0E,GACAA,EAAK4rB,YAAYsf,EAEzB,CACA,WAAA5iC,CAAYigB,EAAUlmB,EAAMo3D,GACxBhhB,MAAMlwB,EAAUlmB,EAAMo3D,GACtBp8D,KAAK2Y,KAAO,iBACZ3Y,KAAKk3E,WAAavtE,KAAKC,MAAM5J,KAAKsgC,aAAa,gBAAgB+tB,aAC/DruD,KAAK0vE,oBAAsB1vE,KAAKk3E,UACpC,GAyDA,MAtDJ,cAA2B/c,GACvB,WAAAlvD,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,OAChB,GAmDA,KAhDJ,cAA0BwhD,GACtB,WAAAlvD,IAAe6oB,GACXsnB,SAAStnB,GACT9zB,KAAK2Y,KAAO,MAChB,IAsEJ,MAAMy+D,GACF,eAAAC,CAAgBC,EAAcC,GAC1B,MAAoC,kBAAzBA,EACA,CAACxiD,EAAQyiD,IAA4BF,EAAaviD,EAA6C,kBAA9ByiD,EAA0CA,EAA4BD,GAG3ID,CACX,CACA,UAAIh4D,GACA,OAAOtf,KAAKwvD,OAAOlwC,MACvB,CACA,SAAI6R,GACA,OAAOnxB,KAAKwvD,OAAOr+B,KACvB,CACA,OAAI1qB,GACA,OAAOzG,KAAKwvD,OAAO/oD,GACvB,CACA,UAAIuoD,GACA,MAAM,YAAEyoB,GAAiBz3E,KACzB,OAAOy3E,EAAYA,EAAYn3E,OAAS,IApBxB,EAqBpB,CACA,UAAI0uD,CAAOlrD,GACP,MAAM,YAAE2zE,GAAiBz3E,KACzBy3E,EAAYh4E,KAAKqE,EACrB,CACA,SAAAy9D,GACI,MAAM,YAAEkW,GAAiBz3E,KACzBy3E,EAAY1zE,KAChB,CACA,WAAAozE,GACI,MAAO,QAAQ92E,SAASL,KAAK03E,SACjC,CACA,cAAAC,GACI,OAAO33E,KAAK02E,OAAO5kC,OAAO9uC,GAAIA,EAAEoqE,QAEpC,CACA,aAAAwK,GACI,OAAO53E,KAAKitE,MAAMn7B,OAAO9uC,GAAIA,EAAEoqE,QAEnC,CACA,qBAAAyK,CAAsB3sD,GAClB,MAAMqrD,EAAkBv2E,KAAKmrB,cAAcD,EAASqrD,iBAIpD,OAHAA,EAAgBpxE,MAAO,EACvBoxE,EAAgB7a,+BAChB17D,KAAKu2E,gBAAkBA,EAChBA,CACX,CACA,aAAAprD,CAAcnmB,GACV,MAAM8yE,EAAc9yE,EAAKy3D,SAAS37C,QAAQ,UAAW,IAC/Ci3D,EAAcX,GAASY,aAAaF,GAC1C,OAAIC,EACO,IAAIA,EAAY/3E,KAAMgF,GAE1B,IAAI63D,GAAe78D,KAAMgF,EACpC,CACA,cAAA4mB,CAAe5mB,GACX,OAAO,IAAIigE,GAASjlE,KAAMgF,EAC9B,CACA,UAAAqvD,CAAW4jB,GACPj4E,KAAKwvD,OAAO6E,WAAW,CACnBnpC,SAAUlrB,QACPi4E,GAEX,CACA,WAAAhtE,CAAYiiE,GAAO,WAAEpe,EAjED,GAiE6B,OAAEE,EAjE/B,GAiEyDgc,aAAckN,EAAgBd,GAASpM,aAAeiL,YAAakC,EAAef,GAASnB,YAAY,qBAAEsB,GAA0B,CAAC,GAC7Mv3E,KAAKktE,MAAQA,EACbltE,KAAK6vD,YAAc,IAAIv9C,IACvBtS,KAAKs6D,OAAS,IAAIhoD,IAClBtS,KAAK27D,kBAAoB,IAAIrpD,IAC7BtS,KAAK02E,OAAS,GACd12E,KAAKitE,MAAQ,GACbjtE,KAAKy3E,YAAc,GACnBz3E,KAAK03E,SAAW,EAChB13E,KAAKwvD,OAAS0d,EAAM1d,OACpBxvD,KAAK8uD,WAAaA,EAClB9uD,KAAKgvD,OAASA,EACdhvD,KAAKgrE,aAAekN,EACpBl4E,KAAKi2E,YAAcj2E,KAAKq3E,gBAAgBc,EAAcZ,GACtDv3E,KAAKwvD,OAAOgE,MAAK,IAAIxzD,KAAK23E,mBAE1B33E,KAAKwvD,OAAOgE,MAAK,IAAIxzD,KAAK43E,iBAE9B,EAEJR,GAASpM,aA3GT,SAAsBroC,EAAOE,GACzB,MAAMgL,EAAS3iB,SAASC,cAAc,UAGtC,OAFA0iB,EAAOlL,MAAQA,EACfkL,EAAOhL,OAASA,EACTgL,CACX,EAuGAupC,GAASnB,YAtGT9hD,eAA2B45C,GACvB,IAAIwJ,EAAuBn6D,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GACvF,MAAM44D,EAAQ9qD,SAASC,cAAc,OAIrC,OAHIosD,IACAvB,EAAMoC,YAAc,aAEjB,IAAInlD,SAAQ,CAAC7D,EAASipD,KACzBrC,EAAMxzC,OAAS,KACXpT,EAAQ4mD,EAAM,EAElBA,EAAMsC,QAAU,CAACC,EAAQC,EAASC,EAASC,EAAQnnD,KAC/C8mD,EAAO9mD,EAAM,EAEjBykD,EAAMjI,IAAMA,CAAG,GAEvB,EAwFAqJ,GAASY,aAAe,GAIpB,MAAMW,GAOJ,iBAAarvC,CAAK7iC,EAAKqgC,GACrB,IAAIhb,EAAU1O,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAChF,MAAMo7C,EAAS,IAAIH,GAAOvsC,GACpB8sD,QAAoBpgB,EAAO91B,MAAMoE,GACvC,OAAO,IAAI6xC,GAAMlyE,EAAKmyE,EAAa9sD,EACvC,CAOE,iBAAOiiB,CAAWtnC,EAAKqgC,GACrB,IAAIhb,EAAU1O,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAChF,MACMw7D,EADS,IAAIvgB,GAAOvsC,GACCysC,gBAAgBzxB,GAC3C,OAAO,IAAI6xC,GAAMlyE,EAAKmyE,EAAa9sD,EACvC,CAOE,IAAA+sD,CAAKpyE,EAAKqgC,GACR,IAAIhb,EAAU1O,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAChF,OAAOu7D,GAAMrvC,KAAK7iC,EAAKqgC,EAAK,IACrB9mC,KAAK8rB,WACLA,GAEX,CAOE,UAAAwqD,CAAW7vE,EAAKqgC,GACd,IAAIhb,EAAU1O,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAChF,OAAOu7D,GAAM5qC,WAAWtnC,EAAKqgC,EAAK,IAC3B9mC,KAAK8rB,WACLA,GAEX,CAIE,KAAA6nC,GACE,OAAO3zD,KAAKwvD,OAAOmE,OACvB,CAIE,OAAAE,GACE,OAAO7zD,KAAKwvD,OAAOqE,SACvB,CAIE,YAAM50B,GACJ,IAAInT,EAAU1O,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAChFpd,KAAKwJ,MAAM,CACP4sD,cAAc,EACdE,iBAAiB,EACjBD,aAAa,KACVvqC,UAED9rB,KAAK2zD,QACX3zD,KAAKmyB,MACT,CAIE,KAAA3oB,GACE,IAAIsiB,EAAU1O,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAK,CAAC,EAChF,MAAM,gBAAEm5D,EAAgB,OAAE/mB,EAAS1jC,QAASgtD,GAAiB94E,KAC7DwvD,EAAOhmD,MAAM+sE,EAAiB,CAC1BngB,cAAc,KACX0iB,KACAhtD,GAEX,CAGE,IAAAqG,GACEnyB,KAAKwvD,OAAOr9B,MAChB,CAME,MAAA82C,CAAOtmC,GACL,IAAIE,EAASzlB,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,GAAgBA,UAAU,GAAKulB,EAAOumC,EAAsB9rD,UAAU9c,OAAS,QAAsB,IAAjB8c,UAAU,IAAgBA,UAAU,GACvKpd,KAAKu2E,gBAAgBtN,OAAOtmC,EAAOE,EAAQqmC,EAC/C,CAME,WAAAj+D,CAAYxE,EAAKqgC,EAAKhb,EAAU,CAAC,GAC/B9rB,KAAKw4D,OAAS,IAAIH,GAAOvsC,GACzB9rB,KAAKwvD,OAAS,IAAI+D,GAAO9sD,EAAKqlB,GAC9B9rB,KAAK8rB,QAAUA,EACf,MAAMZ,EAAW,IAAIksD,GAASp3E,KAAM8rB,GAC9ByqD,EAAkBrrD,EAAS2sD,sBAAsB/wC,GACvD9mC,KAAKkrB,SAAWA,EAChBlrB,KAAKu2E,gBAAkBA,CAC3B,+BC7mKW,SAASwC,EAAUx0E,EAAGC,GACnC,OAAY,MAALD,GAAkB,MAALC,EAAY8pC,IAAM/pC,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAI8pC,GAC9E,CCFe,SAAS0qC,EAAWz0E,EAAGC,GACpC,OAAY,MAALD,GAAkB,MAALC,EAAY8pC,IAC5B9pC,EAAID,GAAK,EACTC,EAAID,EAAI,EACRC,GAAKD,EAAI,EACT+pC,GACN,CCHe,SAAS2qC,EAASr2E,GAC/B,IAAIs2E,EAAUC,EAAUniB,EAiBxB,SAAS5yD,EAAKG,EAAG0B,EAAGmzE,EAAK,EAAGC,EAAK90E,EAAEjE,QACjC,GAAI84E,EAAKC,EAAI,CACX,GAAuB,IAAnBH,EAASjzE,EAAGA,GAAU,OAAOozE,EACjC,EAAG,CACD,MAAMC,EAAOF,EAAKC,IAAQ,EACtBF,EAAS50E,EAAE+0E,GAAMrzE,GAAK,EAAGmzE,EAAKE,EAAM,EACnCD,EAAKC,CACZ,OAASF,EAAKC,EAChB,CACA,OAAOD,CACT,CAmBA,OAvCiB,IAAbx2E,EAAEtC,QACJ44E,EAAWH,EACXI,EAAW,CAAC3xE,EAAGvB,IAAM8yE,EAAUn2E,EAAE4E,GAAIvB,GACrC+wD,EAAQ,CAACxvD,EAAGvB,IAAMrD,EAAE4E,GAAKvB,IAEzBizE,EAAWt2E,IAAMm2E,GAAan2E,IAAMo2E,EAAap2E,EAAI22E,EACrDJ,EAAWv2E,EACXo0D,EAAQp0D,GAgCH,CAACwB,OAAMo1E,OALd,SAAgBj1E,EAAG0B,EAAGmzE,EAAK,EAAGC,EAAK90E,EAAEjE,QACnC,MAAME,EAAI4D,EAAKG,EAAG0B,EAAGmzE,EAAIC,EAAK,GAC9B,OAAO74E,EAAI44E,GAAMpiB,EAAMzyD,EAAE/D,EAAI,GAAIyF,IAAM+wD,EAAMzyD,EAAE/D,GAAIyF,GAAKzF,EAAI,EAAIA,CAClE,EAEsB6D,MAjBtB,SAAeE,EAAG0B,EAAGmzE,EAAK,EAAGC,EAAK90E,EAAEjE,QAClC,GAAI84E,EAAKC,EAAI,CACX,GAAuB,IAAnBH,EAASjzE,EAAGA,GAAU,OAAOozE,EACjC,EAAG,CACD,MAAMC,EAAOF,EAAKC,IAAQ,EACtBF,EAAS50E,EAAE+0E,GAAMrzE,IAAM,EAAGmzE,EAAKE,EAAM,EACpCD,EAAKC,CACZ,OAASF,EAAKC,EAChB,CACA,OAAOD,CACT,EAQF,CAEA,SAASG,IACP,OAAO,CACT,CCvDe,SAASE,EAAOxzE,GAC7B,OAAa,OAANA,EAAaqoC,KAAOroC,CAC7B,25VCEA,MAAMyzE,EAAkBT,EAASF,GACpBY,EAAcD,EAAgBr1E,MAC9Bu1E,EAAaF,EAAgBt1E,KAC7By1E,EAAeZ,EAASQ,GAAQD,OAC7C,ICRO,SAAS,EAAKvyE,EAAQpC,GAC3B,MAAOA,GAAKA,IAAM,GAAI,MAAM,IAAIi1E,WAAW,aAC3C,IAAIx5E,EAAS2G,EAAO3G,OACpB,MAAOA,EAASqJ,KAAKC,MAAMtJ,KAAY,GAAI,MAAM,IAAIw5E,WAAW,kBAChE,IAAKx5E,IAAWuE,EAAG,OAAOoC,EAC1B,MAAM8yE,EAAOC,EAAMn1E,GACbo1E,EAAOhzE,EAAO+P,QAIpB,OAHA+iE,EAAK9yE,EAAQgzE,EAAM,EAAG35E,EAAQ,GAC9By5E,EAAKE,EAAMhzE,EAAQ,EAAG3G,EAAQ,GAC9By5E,EAAK9yE,EAAQgzE,EAAM,EAAG35E,EAAQ,GACvB2G,CACT,CAEO,MAAMizE,EAAQC,EAAMH,GAEdI,EAAYD,GA6CzB,SAAoB/yB,GAClB,MAAM2yB,EAAOC,EAAM5yB,GACnB,MAAO,CAACpF,EAAGoB,EAAG55C,EAAO2oB,EAAMluB,KAEzB81E,EAAK/3B,EAAGoB,EAAW,GADnB55C,IAAU,GACmB,GADhB2oB,IAAS,GAAGluB,IAAS,GAElC81E,EAAK/3B,EAAGoB,EAAG55C,EAAQ,EAAG2oB,EAAO,EAAGluB,GAChC81E,EAAK/3B,EAAGoB,EAAG55C,EAAQ,EAAG2oB,EAAO,EAAGluB,GAChC81E,EAAK/3B,EAAGoB,EAAG55C,EAAQ,EAAG2oB,EAAO,EAAGluB,EAAK,CAEzC,IApDA,SAASk2E,EAAMJ,GACb,OAAO,SAASt4E,EAAMmoE,EAAIC,EAAKD,GAC7B,MAAOA,GAAMA,IAAO,GAAI,MAAM,IAAIkQ,WAAW,cAC7C,MAAOjQ,GAAMA,IAAO,GAAI,MAAM,IAAIiQ,WAAW,cAC7C,IAAKr4E,KAAMwF,EAAM,MAAE07B,EAAK,OAAEE,GAAUphC,EACpC,MAAOkhC,EAAQh5B,KAAKC,MAAM+4B,KAAW,GAAI,MAAM,IAAIm3C,WAAW,iBAC9D,MAAOj3C,EAASl5B,KAAKC,WAAiB9I,IAAX+hC,EAAuBA,EAAS57B,EAAO3G,OAASqiC,KAAW,GAAI,MAAM,IAAIm3C,WAAW,kBAC/G,IAAKn3C,IAAUE,IAAY+mC,IAAOC,EAAK,OAAOpoE,EAC9C,MAAM44E,EAAQzQ,GAAMmQ,EAAKnQ,GACnB0Q,EAAQzQ,GAAMkQ,EAAKlQ,GACnBoQ,EAAOhzE,EAAO+P,QAiBpB,OAhBIqjE,GAASC,GACXC,EAAMF,EAAOJ,EAAMhzE,EAAQ07B,EAAOE,GAClC03C,EAAMF,EAAOpzE,EAAQgzE,EAAMt3C,EAAOE,GAClC03C,EAAMF,EAAOJ,EAAMhzE,EAAQ07B,EAAOE,GAClC23C,EAAMF,EAAOrzE,EAAQgzE,EAAMt3C,EAAOE,GAClC23C,EAAMF,EAAOL,EAAMhzE,EAAQ07B,EAAOE,GAClC23C,EAAMF,EAAOrzE,EAAQgzE,EAAMt3C,EAAOE,IACzBw3C,GACTE,EAAMF,EAAOpzE,EAAQgzE,EAAMt3C,EAAOE,GAClC03C,EAAMF,EAAOJ,EAAMhzE,EAAQ07B,EAAOE,GAClC03C,EAAMF,EAAOpzE,EAAQgzE,EAAMt3C,EAAOE,IACzBy3C,IACTE,EAAMF,EAAOrzE,EAAQgzE,EAAMt3C,EAAOE,GAClC23C,EAAMF,EAAOL,EAAMhzE,EAAQ07B,EAAOE,GAClC23C,EAAMF,EAAOrzE,EAAQgzE,EAAMt3C,EAAOE,IAE7BphC,CACT,CACF,CAEA,SAAS84E,EAAMR,EAAM/3B,EAAGoB,EAAG2B,EAAG94C,GAC5B,IAAK,IAAIpJ,EAAI,EAAGY,EAAIshD,EAAI94C,EAAGpJ,EAAIY,GAC7Bs2E,EAAK/3B,EAAGoB,EAAGvgD,EAAGA,GAAKkiD,EAAG,EAE1B,CAEA,SAASy1B,EAAMT,EAAM/3B,EAAGoB,EAAG2B,EAAG94C,GAC5B,IAAK,IAAIhG,EAAI,EAAGxC,EAAIshD,EAAI94C,EAAGhG,EAAI8+C,IAAK9+C,EAClC8zE,EAAK/3B,EAAGoB,EAAGn9C,EAAGA,EAAIxC,EAAGshD,EAEzB,CAmBA,SAASi1B,EAAM5yB,GACb,MAAMqzB,EAAU9wE,KAAKC,MAAMw9C,GAC3B,GAAIqzB,IAAYrzB,EAAQ,OAoB1B,SAAeA,GACb,MAAMrC,EAAI,EAAIqC,EAAS,EACvB,MAAO,CAACpF,EAAGoB,EAAG55C,EAAO2oB,EAAMluB,KACzB,MAAOkuB,GAAQluB,IAASuF,GAAQ,OAChC,IAAIsC,EAAMs7C,EAAShE,EAAE55C,GACrB,MAAMq3C,EAAI58C,EAAOmjD,EACjB,IAAK,IAAI5mD,EAAIgJ,EAAOM,EAAIN,EAAQq3C,EAAGrgD,EAAIsJ,EAAGtJ,GAAKyD,EAC7C6H,GAAOs3C,EAAEz5C,KAAKzC,IAAIirB,EAAM3xB,IAE1B,IAAK,IAAIA,EAAIgJ,EAAOM,EAAIqoB,EAAM3xB,GAAKsJ,EAAGtJ,GAAKyD,EACzC6H,GAAOs3C,EAAEz5C,KAAKzC,IAAIirB,EAAM3xB,EAAIqgD,IAC5BmB,EAAExhD,GAAKsL,EAAMi5C,EACbj5C,GAAOs3C,EAAEz5C,KAAKvC,IAAIoC,EAAOhJ,EAAIqgD,GAC/B,CAEJ,CAnCiC65B,CAAMtzB,GACrC,MAAMtkD,EAAIskD,EAASqzB,EACb11B,EAAI,EAAIqC,EAAS,EACvB,MAAO,CAACpF,EAAGoB,EAAG55C,EAAO2oB,EAAMluB,KACzB,MAAOkuB,GAAQluB,IAASuF,GAAQ,OAChC,IAAIsC,EAAM2uE,EAAUr3B,EAAE55C,GACtB,MAAMkF,EAAKzK,EAAOw2E,EACZhsE,EAAKC,EAAKzK,EAChB,IAAK,IAAIzD,EAAIgJ,EAAOM,EAAIN,EAAQkF,EAAIlO,EAAIsJ,EAAGtJ,GAAKyD,EAC9C6H,GAAOs3C,EAAEz5C,KAAKzC,IAAIirB,EAAM3xB,IAE1B,IAAK,IAAIA,EAAIgJ,EAAOM,EAAIqoB,EAAM3xB,GAAKsJ,EAAGtJ,GAAKyD,EACzC6H,GAAOs3C,EAAEz5C,KAAKzC,IAAIirB,EAAM3xB,EAAIkO,IAC5BszC,EAAExhD,IAAMsL,EAAMhJ,GAAKsgD,EAAEz5C,KAAKvC,IAAIoC,EAAOhJ,EAAIiO,IAAO20C,EAAEz5C,KAAKzC,IAAIirB,EAAM3xB,EAAIiO,MAASs2C,EAC9Ej5C,GAAOs3C,EAAEz5C,KAAKvC,IAAIoC,EAAOhJ,EAAIkO,GAC/B,CAEJ,CChGe,SAASke,EAAM3lB,EAAQ0zE,GACpC,IAAI/tD,EAAQ,EACZ,QAAgB9rB,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,EACH,MAATnD,IAAkBA,GAASA,IAAUA,KACrC8oB,MAGD,CACL,IAAIrlB,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAAqBnD,GAASA,IAAUA,KACzE8oB,CAGR,CACA,OAAOA,CACT,CCjBA,SAAS,EAAOguD,GACd,OAAsB,EAAfA,EAAMt6E,MACf,CAEA,SAAS0rC,EAAM1rC,GACb,QAASA,EAAS,EACpB,CAEA,SAASu6E,EAAS5zE,GAChB,MAAyB,iBAAXA,GAAuB,WAAYA,EAASA,EAASsS,MAAM+vB,KAAKriC,EAChF,CAMe,SAAS02C,KAAS12C,GAC/B,MAAM4wB,EAA8C,mBAA9B5wB,EAAOA,EAAO3G,OAAS,IAL/C,SAAiBu3B,GACf,OAAO5wB,GAAU4wB,KAAU5wB,EAC7B,CAGoE6zE,CAAQ7zE,EAAOlD,OAE3Eg3E,GADN9zE,EAASA,EAAOhH,IAAI46E,IACG56E,IAAI,GACrB6J,EAAI7C,EAAO3G,OAAS,EACpBiH,EAAQ,IAAIgS,MAAMzP,EAAI,GAAG2vB,KAAK,GAC9BuhD,EAAU,GAChB,GAAIlxE,EAAI,GAAKixE,EAAQvf,KAAKxvB,GAAQ,OAAOgvC,EACzC,OAAa,CACXA,EAAQv7E,KAAK8H,EAAMtH,KAAI,CAAC6J,EAAGtJ,IAAMyG,EAAOzG,GAAGsJ,MAC3C,IAAItJ,EAAIsJ,EACR,OAASvC,EAAM/G,KAAOu6E,EAAQv6E,IAAI,CAChC,GAAU,IAANA,EAAS,OAAOq3B,EAASmjD,EAAQ/6E,IAAI43B,GAAUmjD,EACnDzzE,EAAM/G,KAAO,CACf,CACF,CACF,CChCe,SAASy6E,EAAOh0E,EAAQ0zE,GACrC,IAAI7uE,EAAM,EAAGvE,EAAQ,EACrB,OAAOoF,aAAa28B,KAAKriC,OAAoBnG,IAAZ65E,EAC7Bj3E,GAAMoI,IAAQpI,GAAK,EACnBA,GAAMoI,IAAQ6uE,EAAQj3E,EAAG6D,IAASN,IAAW,EACnD,CCLe,SAASq0B,EAASr0B,EAAQ0zE,GACvC,IACI3jB,EADApqC,EAAQ,EAERkK,EAAO,EACPhrB,EAAM,EACV,QAAgBhL,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,EACH,MAATnD,IAAkBA,GAASA,IAAUA,IACvCkzD,EAAQlzD,EAAQgzB,EAChBA,GAAQkgC,IAAUpqC,EAClB9gB,GAAOkrD,GAASlzD,EAAQgzB,QAGvB,CACL,IAAIvvB,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAAqBnD,GAASA,IAAUA,IAC3EkzD,EAAQlzD,EAAQgzB,EAChBA,GAAQkgC,IAAUpqC,EAClB9gB,GAAOkrD,GAASlzD,EAAQgzB,GAG9B,CACA,GAAIlK,EAAQ,EAAG,OAAO9gB,GAAO8gB,EAAQ,EACvC,CCtBe,SAASsuD,EAAUj0E,EAAQ0zE,GACxC,MAAMj3E,EAAI43B,EAASr0B,EAAQ0zE,GAC3B,OAAOj3E,EAAIiG,KAAKoG,KAAKrM,GAAKA,CAC5B,CCLe,SAASy3E,EAAOl0E,EAAQ0zE,GACrC,IAAIzzE,EACAE,EACJ,QAAgBtG,IAAZ65E,EACF,IAAK,MAAM72E,KAASmD,EACL,MAATnD,SACUhD,IAARoG,EACEpD,GAASA,IAAOoD,EAAME,EAAMtD,IAE5BoD,EAAMpD,IAAOoD,EAAMpD,GACnBsD,EAAMtD,IAAOsD,EAAMtD,SAIxB,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,WACvBnG,IAARoG,EACEpD,GAASA,IAAOoD,EAAME,EAAMtD,IAE5BoD,EAAMpD,IAAOoD,EAAMpD,GACnBsD,EAAMtD,IAAOsD,EAAMtD,IAI/B,CACA,MAAO,CAACoD,EAAKE,EACf,CC3BO,MAAMg0E,EACX,WAAAnwE,GACEjL,KAAKq7E,UAAY,IAAI1uE,aAAa,IAClC3M,KAAKs7E,GAAK,CACZ,CACA,GAAAx1E,CAAIG,GACF,MAAM8B,EAAI/H,KAAKq7E,UACf,IAAI76E,EAAI,EACR,IAAK,IAAIsJ,EAAI,EAAGA,EAAI9J,KAAKs7E,IAAMxxE,EAAI,GAAIA,IAAK,CAC1C,MAAMjH,EAAIkF,EAAE+B,GACVuvE,EAAKpzE,EAAIpD,EACTu2E,EAAKzvE,KAAKiE,IAAI3H,GAAK0D,KAAKiE,IAAI/K,GAAKoD,GAAKozE,EAAKx2E,GAAKA,GAAKw2E,EAAKpzE,GACxDmzE,IAAIrxE,EAAEvH,KAAO44E,GACjBnzE,EAAIozE,CACN,CAGA,OAFAtxE,EAAEvH,GAAKyF,EACPjG,KAAKs7E,GAAK96E,EAAI,EACPR,IACT,CACA,OAAAu7E,GACE,MAAMxzE,EAAI/H,KAAKq7E,UACf,IAAiBp1E,EAAGpD,EAAGu2E,EAAnB31E,EAAIzD,KAAKs7E,GAAcjC,EAAK,EAChC,GAAI51E,EAAI,EAAG,CAET,IADA41E,EAAKtxE,IAAItE,GACFA,EAAI,IACTwC,EAAIozE,EACJx2E,EAAIkF,IAAItE,GACR41E,EAAKpzE,EAAIpD,EACTu2E,EAAKv2E,GAAKw2E,EAAKpzE,IACXmzE,KAEF31E,EAAI,IAAO21E,EAAK,GAAKrxE,EAAEtE,EAAI,GAAK,GAAO21E,EAAK,GAAKrxE,EAAEtE,EAAI,GAAK,KAC9DZ,EAAS,EAALu2E,EACJnzE,EAAIozE,EAAKx2E,EACLA,GAAKoD,EAAIozE,IAAIA,EAAKpzE,GAE1B,CACA,OAAOozE,CACT,EAGK,SAASmC,EAAKv0E,EAAQ0zE,GAC3B,MAAMc,EAAQ,IAAIL,EAClB,QAAgBt6E,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,GACZnD,GAASA,IACX23E,EAAM31E,IAAIhC,OAGT,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,GACZnD,GAAS62E,EAAQ72E,IAASyD,EAAON,KACnCw0E,EAAM31E,IAAIhC,EAGhB,CACA,OAAQ23E,CACV,CAEO,SAASC,EAAQz0E,EAAQ0zE,GAC9B,MAAMc,EAAQ,IAAIL,EAClB,IAAI7zE,GAAS,EACb,OAAOoF,aAAa28B,KAAKriC,OAAoBnG,IAAZ65E,EAC3Bj3E,GAAK+3E,EAAM31E,KAAKpC,GAAK,GACrBA,GAAK+3E,EAAM31E,KAAK60E,EAAQj3E,IAAK6D,EAAON,IAAW,GAEvD,CCpEO,MAAM00E,UAAkBrpE,IAC7B,WAAArH,CAAYiqB,EAAS/wB,EAAMy3E,GAGzB,GAFAxgC,QACAtyC,OAAO+yE,iBAAiB77E,KAAM,CAAC87E,QAAS,CAACh4E,MAAO,IAAIwO,KAAQoM,KAAM,CAAC5a,MAAOK,KAC3D,MAAX+wB,EAAiB,IAAK,MAAO/wB,EAAKL,KAAUoxB,EAASl1B,KAAK0S,IAAIvO,EAAKL,EACzE,CACA,GAAAkF,CAAI7E,GACF,OAAOi3C,MAAMpyC,IAAI+yE,EAAW/7E,KAAMmE,GACpC,CACA,GAAA0O,CAAI1O,GACF,OAAOi3C,MAAMvoC,IAAIkpE,EAAW/7E,KAAMmE,GACpC,CACA,GAAAuO,CAAIvO,EAAKL,GACP,OAAOs3C,MAAM1oC,IAAIspE,EAAWh8E,KAAMmE,GAAML,EAC1C,CACA,OAAOK,GACL,OAAOi3C,MAAMjT,OAAO8zC,EAAcj8E,KAAMmE,GAC1C,EAGK,MAAM+3E,UAAkB14C,IAC7B,WAAAv4B,CAAYhE,EAAQ9C,EAAMy3E,GAGxB,GAFAxgC,QACAtyC,OAAO+yE,iBAAiB77E,KAAM,CAAC87E,QAAS,CAACh4E,MAAO,IAAIwO,KAAQoM,KAAM,CAAC5a,MAAOK,KAC5D,MAAV8C,EAAgB,IAAK,MAAMnD,KAASmD,EAAQjH,KAAK8F,IAAIhC,EAC3D,CACA,GAAA+O,CAAI/O,GACF,OAAOs3C,MAAMvoC,IAAIkpE,EAAW/7E,KAAM8D,GACpC,CACA,GAAAgC,CAAIhC,GACF,OAAOs3C,MAAMt1C,IAAIk2E,EAAWh8E,KAAM8D,GACpC,CACA,OAAOA,GACL,OAAOs3C,MAAMjT,OAAO8zC,EAAcj8E,KAAM8D,GAC1C,EAGF,SAASi4E,GAAW,QAACD,EAAO,KAAEp9D,GAAO5a,GACnC,MAAMK,EAAMua,EAAK5a,GACjB,OAAOg4E,EAAQjpE,IAAI1O,GAAO23E,EAAQ9yE,IAAI7E,GAAOL,CAC/C,CAEA,SAASk4E,GAAW,QAACF,EAAO,KAAEp9D,GAAO5a,GACnC,MAAMK,EAAMua,EAAK5a,GACjB,OAAIg4E,EAAQjpE,IAAI1O,GAAa23E,EAAQ9yE,IAAI7E,IACzC23E,EAAQppE,IAAIvO,EAAKL,GACVA,EACT,CAEA,SAASm4E,GAAc,QAACH,EAAO,KAAEp9D,GAAO5a,GACtC,MAAMK,EAAMua,EAAK5a,GAKjB,OAJIg4E,EAAQjpE,IAAI1O,KACdL,EAAQg4E,EAAQ9yE,IAAI7E,GACpB23E,EAAQ3zC,OAAOhkC,IAEVL,CACT,CAEA,SAAS83E,EAAM93E,GACb,OAAiB,OAAVA,GAAmC,iBAAVA,EAAqBA,EAAMy3E,UAAYz3E,CACzE,CC5De,SAASq4E,EAASl2E,GAC/B,OAAOA,CACT,CCCe,SAAS4kE,EAAM5jE,KAAWF,GACvC,OAAOq1E,EAAKn1E,EAAQk1E,EAAUA,EAAUp1E,EAC1C,CAEO,SAASs1E,EAAOp1E,KAAWF,GAChC,OAAOq1E,EAAKn1E,EAAQsS,MAAM+vB,KAAM6yC,EAAUp1E,EAC5C,CAEA,SAASu1E,EAAQD,EAAQt1E,GACvB,IAAK,IAAIvG,EAAI,EAAGiD,EAAIsD,EAAKzG,OAAQE,EAAIiD,IAAKjD,EACxC67E,EAASA,EAAO3wC,SAAQ3oC,GAAKA,EAAEgB,MAAM9D,KAAI,EAAEkE,EAAKL,KAAW,IAAIf,EAAGoB,EAAKL,OAEzE,OAAOu4E,CACT,CAEO,SAASE,EAAUt1E,KAAWF,GACnC,OAAOu1E,EAAQD,EAAOp1E,KAAWF,GAAOA,EAC1C,CAEO,SAASy1E,EAAWv1E,EAAQ4wB,KAAW9wB,GAC5C,OAAOu1E,EAAQG,EAAQx1E,EAAQ4wB,KAAW9wB,GAAOA,EACnD,CAEO,SAAS21E,EAAOz1E,EAAQ4wB,KAAW9wB,GACxC,OAAOq1E,EAAKn1E,EAAQk1E,EAAUtkD,EAAQ9wB,EACxC,CAEO,SAAS01E,EAAQx1E,EAAQ4wB,KAAW9wB,GACzC,OAAOq1E,EAAKn1E,EAAQsS,MAAM+vB,KAAMzR,EAAQ9wB,EAC1C,CAEO,SAASQ,EAAMN,KAAWF,GAC/B,OAAOq1E,EAAKn1E,EAAQk1E,EAAUQ,EAAQ51E,EACxC,CAEO,SAAS61E,EAAQ31E,KAAWF,GACjC,OAAOq1E,EAAKn1E,EAAQsS,MAAM+vB,KAAMqzC,EAAQ51E,EAC1C,CAEA,SAAS41E,EAAO11E,GACd,GAAsB,IAAlBA,EAAO3G,OAAc,MAAM,IAAI+Q,MAAM,iBACzC,OAAOpK,EAAO,EAChB,CAEA,SAASm1E,EAAKn1E,EAAQhH,EAAK43B,EAAQ9wB,GACjC,OAAO,SAAU81E,EAAQ51E,EAAQzG,GAC/B,GAAIA,GAAKuG,EAAKzG,OAAQ,OAAOu3B,EAAO5wB,GACpC,MAAMo1E,EAAS,IAAIV,EACbC,EAAQ70E,EAAKvG,KACnB,IAAI+G,GAAS,EACb,IAAK,MAAMzD,KAASmD,EAAQ,CAC1B,MAAM9C,EAAMy3E,EAAM93E,IAASyD,EAAON,GAC5B4jE,EAAQwR,EAAOrzE,IAAI7E,GACrB0mE,EAAOA,EAAMprE,KAAKqE,GACjBu4E,EAAO3pE,IAAIvO,EAAK,CAACL,GACxB,CACA,IAAK,MAAOK,EAAK8C,KAAWo1E,EAC1BA,EAAO3pE,IAAIvO,EAAK04E,EAAQ51E,EAAQzG,IAElC,OAAOP,EAAIo8E,EACZ,CAfM,CAeJp1E,EAAQ,EACb,CChEe,SAAS61E,EAAQ/nD,EAAQhuB,GACtC,OAAOwS,MAAM+vB,KAAKviC,GAAM5C,GAAO4wB,EAAO5wB,IACxC,CCCe,SAASgE,EAAKlB,KAAW81E,GACtC,GAAuC,mBAA5B91E,EAAO1D,OAAOC,UAA0B,MAAM,IAAII,UAAU,0BACvEqD,EAASsS,MAAM+vB,KAAKriC,GACpB,IAAKrE,GAAKm6E,EACV,GAAKn6E,GAAkB,IAAbA,EAAEtC,QAAiBy8E,EAAEz8E,OAAS,EAAG,CACzC,MAAMiH,EAAQy1E,YAAY1zC,KAAKriC,GAAQ,CAACO,EAAGhH,IAAMA,IAajD,OAZIu8E,EAAEz8E,OAAS,GACby8E,EAAIA,EAAE98E,KAAI2C,GAAKqE,EAAOhH,IAAI2C,KAC1B2E,EAAMY,MAAK,CAAC3H,EAAGsJ,KACb,IAAK,MAAMlH,KAAKm6E,EAAG,CACjB,MAAM9uE,EAAIgvE,EAAiBr6E,EAAEpC,GAAIoC,EAAEkH,IACnC,GAAImE,EAAG,OAAOA,CAChB,OAGFrL,EAAIqE,EAAOhH,IAAI2C,GACf2E,EAAMY,MAAK,CAAC3H,EAAGsJ,IAAMmzE,EAAiBr6E,EAAEpC,GAAIoC,EAAEkH,OAEzCgzE,EAAQ71E,EAAQM,EACzB,CACA,OAAON,EAAOkB,KAAK+0E,EAAet6E,GACpC,CAEO,SAASs6E,EAAe92E,EAAU2yE,GACvC,GAAI3yE,IAAY2yE,EAAW,OAAOkE,EAClC,GAAuB,mBAAZ72E,EAAwB,MAAM,IAAIxC,UAAU,6BACvD,MAAO,CAACW,EAAGC,KACT,MAAMyB,EAAIG,EAAQ7B,EAAGC,GACrB,OAAIyB,GAAW,IAANA,EAAgBA,GACC,IAAlBG,EAAQ5B,EAAGA,KAA+B,IAAlB4B,EAAQ7B,EAAGA,GAAS,CAExD,CAEO,SAAS04E,EAAiB14E,EAAGC,GAClC,OAAa,MAALD,KAAeA,GAAKA,KAAY,MAALC,KAAeA,GAAKA,MAAQD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAI,EAC1F,CClCe,SAAS24E,GAAUl2E,EAAQ4wB,EAAQ1zB,GAChD,OAA0B,IAAlB0zB,EAAOv3B,OACX6H,EAAKu0E,EAAOz1E,EAAQ4wB,EAAQ1zB,IAAM,EAAGi5E,EAAIC,IAAMC,EAAIC,KAAQxE,EAAUsE,EAAIE,IAAOxE,EAAUqE,EAAIE,KAC9Fn1E,EAAK0iE,EAAM5jE,EAAQ9C,IAAM,EAAGi5E,EAAIC,IAAMC,EAAIC,KAAQ1lD,EAAOwlD,EAAIE,IAAOxE,EAAUqE,EAAIE,MACnFr9E,KAAI,EAAEkE,KAASA,GACpB,CCTA,IAAIy2E,GAAQrhE,MAAM1T,UAEPmR,GAAQ4jE,GAAM5jE,MCFV,SAASwmE,GAASv3E,GAC/B,MAAO,IAAMA,CACf,CDCiB20E,GAAM36E,IEHvB,MAAMw9E,GAAM9zE,KAAKoG,KAAK,IAClB2tE,GAAK/zE,KAAKoG,KAAK,IACf4tE,GAAKh0E,KAAKoG,KAAK,GAEnB,SAAS6tE,GAASp0E,EAAO2oB,EAAMvF,GAC7B,MAAM3oB,GAAQkuB,EAAO3oB,GAASG,KAAKvC,IAAI,EAAGwlB,GACtCixD,EAAQl0E,KAAKC,MAAMD,KAAKm0E,MAAM75E,IAC9BstB,EAAQttB,EAAO0F,KAAKkB,IAAI,GAAIgzE,GAC5BE,EAASxsD,GAASksD,GAAM,GAAKlsD,GAASmsD,GAAK,EAAInsD,GAASosD,GAAK,EAAI,EACrE,IAAIn9B,EAAIikB,EAAI4P,EAeZ,OAdIwJ,EAAQ,GACVxJ,EAAM1qE,KAAKkB,IAAI,IAAKgzE,GAASE,EAC7Bv9B,EAAK72C,KAAKwB,MAAM3B,EAAQ6qE,GACxB5P,EAAK96D,KAAKwB,MAAMgnB,EAAOkiD,GACnB7zB,EAAK6zB,EAAM7qE,KAASg3C,EACpBikB,EAAK4P,EAAMliD,KAAQsyC,EACvB4P,GAAOA,IAEPA,EAAM1qE,KAAKkB,IAAI,GAAIgzE,GAASE,EAC5Bv9B,EAAK72C,KAAKwB,MAAM3B,EAAQ6qE,GACxB5P,EAAK96D,KAAKwB,MAAMgnB,EAAOkiD,GACnB7zB,EAAK6zB,EAAM7qE,KAASg3C,EACpBikB,EAAK4P,EAAMliD,KAAQsyC,GAErBA,EAAKjkB,GAAM,IAAO5zB,GAASA,EAAQ,EAAUgxD,GAASp0E,EAAO2oB,EAAc,EAARvF,GAChE,CAAC4zB,EAAIikB,EAAI4P,EAClB,CAEe,SAAS2J,GAAMx0E,EAAO2oB,EAAMvF,GAEzC,MAD8BA,GAASA,GACzB,GAAI,MAAO,GACzB,IAFcpjB,GAASA,KAAvB2oB,GAAQA,GAEY,MAAO,CAAC3oB,GAC5B,MAAMkS,EAAUyW,EAAO3oB,GAAQg3C,EAAIikB,EAAI4P,GAAO34D,EAAUkiE,GAASzrD,EAAM3oB,EAAOojB,GAASgxD,GAASp0E,EAAO2oB,EAAMvF,GAC7G,KAAM63C,GAAMjkB,GAAK,MAAO,GACxB,MAAM/8C,EAAIghE,EAAKjkB,EAAK,EAAGw9B,EAAQ,IAAIzkE,MAAM9V,GACzC,GAAIiY,EACF,GAAI24D,EAAM,EAAG,IAAK,IAAI7zE,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGw9E,EAAMx9E,IAAMikE,EAAKjkE,IAAM6zE,OAC3D,IAAK,IAAI7zE,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGw9E,EAAMx9E,IAAMikE,EAAKjkE,GAAK6zE,OAEvD,GAAIA,EAAM,EAAG,IAAK,IAAI7zE,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGw9E,EAAMx9E,IAAMggD,EAAKhgD,IAAM6zE,OAC3D,IAAK,IAAI7zE,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGw9E,EAAMx9E,IAAMggD,EAAKhgD,GAAK6zE,EAEzD,OAAO2J,CACT,CAEO,SAASC,GAAcz0E,EAAO2oB,EAAMvF,GAEzC,OAAOgxD,GADOp0E,GAASA,EAAvB2oB,GAAQA,EAAsBvF,GAASA,GACH,EACtC,CAEO,SAASsxD,GAAS10E,EAAO2oB,EAAMvF,GACNA,GAASA,EACvC,MAAMlR,GADNyW,GAAQA,IAAM3oB,GAASA,GACO6qE,EAAM34D,EAAUuiE,GAAc9rD,EAAM3oB,EAAOojB,GAASqxD,GAAcz0E,EAAO2oB,EAAMvF,GAC7G,OAAQlR,GAAW,EAAI,IAAM24D,EAAM,EAAI,GAAKA,EAAMA,EACpD,CCpDe,SAASp3C,GAAKzzB,EAAO2oB,EAAMvF,GACxC,IAAIuxD,EACJ,OAAa,CACX,MAAMl6E,EAAOg6E,GAAcz0E,EAAO2oB,EAAMvF,GACxC,GAAI3oB,IAASk6E,GAAoB,IAATl6E,IAAem6E,SAASn6E,GAC9C,MAAO,CAACuF,EAAO2oB,GACNluB,EAAO,GAChBuF,EAAQG,KAAKC,MAAMJ,EAAQvF,GAAQA,EACnCkuB,EAAOxoB,KAAKwvB,KAAKhH,EAAOluB,GAAQA,GACvBA,EAAO,IAChBuF,EAAQG,KAAKwvB,KAAK3vB,EAAQvF,GAAQA,EAClCkuB,EAAOxoB,KAAKC,MAAMuoB,EAAOluB,GAAQA,GAEnCk6E,EAAUl6E,CACZ,CACF,CCfe,SAASo6E,GAAiBp3E,GACvC,OAAO0C,KAAKvC,IAAI,EAAGuC,KAAKwvB,KAAKxvB,KAAKooB,IAAInF,EAAM3lB,IAAW0C,KAAK20E,KAAO,EACrE,CCKe,SAASC,KACtB,IAAIz6E,EAAQq4E,EACRrgD,EAASq/C,EACT78B,EAAY,GAEhB,SAASkgC,EAAU/8E,GACZ8X,MAAMC,QAAQ/X,KAAOA,EAAO8X,MAAM+vB,KAAK7nC,IAE5C,IAAIjB,EAEAyF,EACAhC,EAFAR,EAAIhC,EAAKnB,OAGT2G,EAAS,IAAIsS,MAAM9V,GAEvB,IAAKjD,EAAI,EAAGA,EAAIiD,IAAKjD,EACnByG,EAAOzG,GAAKsD,EAAMrC,EAAKjB,GAAIA,EAAGiB,GAGhC,IAAIg9E,EAAK3iD,EAAO70B,GACZ+xC,EAAKylC,EAAG,GACRluC,EAAKkuC,EAAG,GACRC,EAAKpgC,EAAUr3C,EAAQ+xC,EAAIzI,GAI/B,IAAKh3B,MAAMC,QAAQklE,GAAK,CACtB,MAAMt3E,EAAMmpC,EAAIouC,GAAMD,EAgBtB,GAfI5iD,IAAWq/C,KAASniC,EAAIzI,GAAMtT,GAAK+b,EAAIzI,EAAIouC,KAC/CD,EAAKV,GAAMhlC,EAAIzI,EAAIouC,IAKZ,IAAM3lC,IAAI/0C,EAAOg6E,GAAcjlC,EAAIzI,EAAIouC,IAS1CD,EAAGA,EAAGp+E,OAAS,IAAMiwC,EACvB,GAAInpC,GAAOmpC,GAAMzU,IAAWq/C,EAAQ,CAClC,MAAMl3E,EAAOg6E,GAAcjlC,EAAIzI,EAAIouC,GAC/BP,SAASn6E,KACPA,EAAO,EACTssC,GAAM5mC,KAAKC,MAAM2mC,EAAKtsC,GAAQ,GAAKA,EAC1BA,EAAO,IAChBssC,GAAM5mC,KAAKwvB,KAAKoX,GAAMtsC,GAAQ,IAAMA,GAG1C,MACEy6E,EAAG36E,KAGT,CAKA,IADA,IAAI+9C,EAAI48B,EAAGp+E,OAAQiE,EAAI,EAAGC,EAAIs9C,EACvB48B,EAAGn6E,IAAMy0C,KAAMz0C,EACtB,KAAOm6E,EAAGl6E,EAAI,GAAK+rC,KAAM/rC,GACrBD,GAAKC,EAAIs9C,KAAG48B,EAAKA,EAAG1nE,MAAMzS,EAAGC,GAAIs9C,EAAIt9C,EAAID,GAE7C,IACIg6E,EADAK,EAAO,IAAIrlE,MAAMuoC,EAAI,GAIzB,IAAKthD,EAAI,EAAGA,GAAKshD,IAAKthD,GACpB+9E,EAAMK,EAAKp+E,GAAK,IACZw4C,GAAKx4C,EAAI,EAAIk+E,EAAGl+E,EAAI,GAAKw4C,EAC7BulC,EAAIhuC,GAAK/vC,EAAIshD,EAAI48B,EAAGl+E,GAAK+vC,EAI3B,GAAI6tC,SAASn6E,IACX,GAAIA,EAAO,EACT,IAAKzD,EAAI,EAAGA,EAAIiD,IAAKjD,EACI,OAAlByF,EAAIgB,EAAOzG,KAAew4C,GAAM/yC,GAAKA,GAAKsqC,GAC7CquC,EAAKj1E,KAAKzC,IAAI46C,EAAGn4C,KAAKC,OAAO3D,EAAI+yC,GAAM/0C,KAAQxE,KAAKgC,EAAKjB,SAGxD,GAAIyD,EAAO,EAChB,IAAKzD,EAAI,EAAGA,EAAIiD,IAAKjD,EACnB,GAAuB,OAAlByF,EAAIgB,EAAOzG,KAAew4C,GAAM/yC,GAAKA,GAAKsqC,EAAI,CACjD,MAAMzmC,EAAIH,KAAKC,OAAOovC,EAAK/yC,GAAKhC,GAChC26E,EAAKj1E,KAAKzC,IAAI46C,EAAGh4C,GAAK40E,EAAG50E,IAAM7D,KAAKxG,KAAKgC,EAAKjB,GAChD,OAIJ,IAAKA,EAAI,EAAGA,EAAIiD,IAAKjD,EACI,OAAlByF,EAAIgB,EAAOzG,KAAew4C,GAAM/yC,GAAKA,GAAKsqC,GAC7CquC,EAAKC,EAAOH,EAAIz4E,EAAG,EAAG67C,IAAIriD,KAAKgC,EAAKjB,IAK1C,OAAOo+E,CACT,CAcA,OAZAJ,EAAU16E,MAAQ,SAASd,GACzB,OAAOoa,UAAU9c,QAAUwD,EAAqB,mBAANd,EAAmBA,EAAIw6E,GAASx6E,GAAIw7E,GAAa16E,CAC7F,EAEA06E,EAAU1iD,OAAS,SAAS94B,GAC1B,OAAOoa,UAAU9c,QAAUw7B,EAAsB,mBAAN94B,EAAmBA,EAAIw6E,GAAS,CAACx6E,EAAE,GAAIA,EAAE,KAAMw7E,GAAa1iD,CACzG,EAEA0iD,EAAUM,WAAa,SAAS97E,GAC9B,OAAOoa,UAAU9c,QAAUg+C,EAAyB,mBAANt7C,EAAmBA,EAAIw6E,GAASjkE,MAAMC,QAAQxW,GAAKgU,GAAMxU,KAAKQ,GAAKA,GAAIw7E,GAAalgC,CACpI,EAEOkgC,CACT,CC5He,SAASp3E,GAAIH,EAAQ0zE,GAClC,IAAIvzE,EACJ,QAAgBtG,IAAZ65E,EACF,IAAK,MAAM72E,KAASmD,EACL,MAATnD,IACIsD,EAAMtD,QAAkBhD,IAARsG,GAAqBtD,GAASA,KACpDsD,EAAMtD,OAGL,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAC7BG,EAAMtD,QAAkBhD,IAARsG,GAAqBtD,GAASA,KACpDsD,EAAMtD,EAGZ,CACA,OAAOsD,CACT,CCnBe,SAAS23E,GAAS93E,EAAQ0zE,GACvC,IAAIvzE,EACA23E,GAAY,EACZx3E,GAAS,EACb,QAAgBzG,IAAZ65E,EACF,IAAK,MAAM72E,KAASmD,IAChBM,EACW,MAATzD,IACIsD,EAAMtD,QAAkBhD,IAARsG,GAAqBtD,GAASA,KACpDsD,EAAMtD,EAAOi7E,EAAWx3E,QAI5B,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAC7BG,EAAMtD,QAAkBhD,IAARsG,GAAqBtD,GAASA,KACpDsD,EAAMtD,EAAOi7E,EAAWx3E,GAI9B,OAAOw3E,CACT,CCrBe,SAAS73E,GAAID,EAAQ0zE,GAClC,IAAIzzE,EACJ,QAAgBpG,IAAZ65E,EACF,IAAK,MAAM72E,KAASmD,EACL,MAATnD,IACIoD,EAAMpD,QAAkBhD,IAARoG,GAAqBpD,GAASA,KACpDoD,EAAMpD,OAGL,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAC7BC,EAAMpD,QAAkBhD,IAARoG,GAAqBpD,GAASA,KACpDoD,EAAMpD,EAGZ,CACA,OAAOoD,CACT,CCnBe,SAAS83E,GAAS/3E,EAAQ0zE,GACvC,IAAIzzE,EACA83E,GAAY,EACZz3E,GAAS,EACb,QAAgBzG,IAAZ65E,EACF,IAAK,MAAM72E,KAASmD,IAChBM,EACW,MAATzD,IACIoD,EAAMpD,QAAkBhD,IAARoG,GAAqBpD,GAASA,KACpDoD,EAAMpD,EAAOk7E,EAAWz3E,QAI5B,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAC7BC,EAAMpD,QAAkBhD,IAARoG,GAAqBpD,GAASA,KACpDoD,EAAMpD,EAAOk7E,EAAWz3E,GAI9B,OAAOy3E,CACT,CCjBe,SAASC,GAAYrE,EAAO55E,EAAGoD,EAAO,EAAGC,EAAQg1C,IAAUjzC,GAKxE,GAJApF,EAAI2I,KAAKC,MAAM5I,GACfoD,EAAOuF,KAAKC,MAAMD,KAAKvC,IAAI,EAAGhD,IAC9BC,EAAQsF,KAAKC,MAAMD,KAAKzC,IAAI0zE,EAAMt6E,OAAS,EAAG+D,MAExCD,GAAQpD,GAAKA,GAAKqD,GAAQ,OAAOu2E,EAIvC,IAFAx0E,OAAsBtF,IAAZsF,EAAwB62E,EAAmBC,EAAe92E,GAE7D/B,EAAQD,GAAM,CACnB,GAAIC,EAAQD,EAAO,IAAK,CACtB,MAAMX,EAAIY,EAAQD,EAAO,EACnB09C,EAAI9gD,EAAIoD,EAAO,EACf86E,EAAIv1E,KAAKooB,IAAItuB,GACbo9C,EAAI,GAAMl3C,KAAK4qC,IAAI,EAAI2qC,EAAI,GAC3BC,EAAK,GAAMx1E,KAAKoG,KAAKmvE,EAAIr+B,GAAKp9C,EAAIo9C,GAAKp9C,IAAMq+C,EAAIr+C,EAAI,EAAI,GAAK,EAAI,GAGxEw7E,GAAYrE,EAAO55E,EAFH2I,KAAKvC,IAAIhD,EAAMuF,KAAKC,MAAM5I,EAAI8gD,EAAIjB,EAAIp9C,EAAI07E,IACzCx1E,KAAKzC,IAAI7C,EAAOsF,KAAKC,MAAM5I,GAAKyC,EAAIq+C,GAAKjB,EAAIp9C,EAAI07E,IACzB/4E,EAC3C,CAEA,MAAMtD,EAAI83E,EAAM55E,GAChB,IAAIR,EAAI4D,EACJ0F,EAAIzF,EAKR,IAHA42C,GAAK2/B,EAAOx2E,EAAMpD,GACdoF,EAAQw0E,EAAMv2E,GAAQvB,GAAK,GAAGm4C,GAAK2/B,EAAOx2E,EAAMC,GAE7C7D,EAAIsJ,GAAG,CAEZ,IADAmxC,GAAK2/B,EAAOp6E,EAAGsJ,KAAMtJ,IAAKsJ,EACnB1D,EAAQw0E,EAAMp6E,GAAIsC,GAAK,KAAKtC,EACnC,KAAO4F,EAAQw0E,EAAM9wE,GAAIhH,GAAK,KAAKgH,CACrC,CAEgC,IAA5B1D,EAAQw0E,EAAMx2E,GAAOtB,GAAUm4C,GAAK2/B,EAAOx2E,EAAM0F,MAC9CA,EAAGmxC,GAAK2/B,EAAO9wE,EAAGzF,IAErByF,GAAK9I,IAAGoD,EAAO0F,EAAI,GACnB9I,GAAK8I,IAAGzF,EAAQyF,EAAI,EAC1B,CAEA,OAAO8wE,CACT,CAEA,SAAS3/B,GAAK2/B,EAAOp6E,EAAGsJ,GACtB,MAAMhH,EAAI83E,EAAMp6E,GAChBo6E,EAAMp6E,GAAKo6E,EAAM9wE,GACjB8wE,EAAM9wE,GAAKhH,CACb,CClDe,SAASs8E,GAASn4E,EAAQb,EAAU2yE,GACjD,IAAI3xE,EACAi4E,GAAU,EACd,GAAuB,IAAnBj5E,EAAQ9F,OAAc,CACxB,IAAIg/E,EACJ,IAAK,MAAMpxD,KAAWjnB,EAAQ,CAC5B,MAAMnD,EAAQsC,EAAQ8nB,IAClBmxD,EACEtG,EAAUj1E,EAAOw7E,GAAY,EACD,IAA5BvG,EAAUj1E,EAAOA,MACrBsD,EAAM8mB,EACNoxD,EAAWx7E,EACXu7E,GAAU,EAEd,CACF,MACE,IAAK,MAAMv7E,KAASmD,GACdo4E,EACEj5E,EAAQtC,EAAOsD,GAAO,EACI,IAA1BhB,EAAQtC,EAAOA,MACnBsD,EAAMtD,EACNu7E,GAAU,GAIhB,OAAOj4E,CACT,CCnBe,SAASm4E,GAASt4E,EAAQc,EAAG4yE,GAE1C,GADA1zE,EAAS0F,aAAa28B,K5BNjB,UAAkBriC,EAAQ0zE,GAC/B,QAAgB75E,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,EACH,MAATnD,IAAkBA,GAASA,IAAUA,UACjCA,OAGL,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAAqBnD,GAASA,IAAUA,UACrEA,EAGZ,CACF,C4BT6Bs1D,CAAQnyD,EAAQ0zE,KACrCl3E,EAAIwD,EAAO3G,UAAWoqB,MAAM3iB,GAAKA,GAAvC,CACA,GAAIA,GAAK,GAAKtE,EAAI,EAAG,OAAOyD,GAAID,GAChC,GAAIc,GAAK,EAAG,OAAOX,GAAIH,GACvB,IAAIxD,EACAjD,GAAKiD,EAAI,GAAKsE,EACdy3E,EAAK71E,KAAKC,MAAMpJ,GAChBi/E,EAASr4E,GAAI63E,GAAYh4E,EAAQu4E,GAAIE,SAAS,EAAGF,EAAK,IAE1D,OAAOC,GADMv4E,GAAID,EAAOy4E,SAASF,EAAK,IACZC,IAAWj/E,EAAIg/E,EARQ,CASnD,CAEO,SAASG,GAAe14E,EAAQc,EAAG4yE,EAAUlB,GAClD,IAAMh2E,EAAIwD,EAAO3G,UAAWoqB,MAAM3iB,GAAKA,GAAvC,CACA,GAAIA,GAAK,GAAKtE,EAAI,EAAG,OAAQk3E,EAAQ1zE,EAAO,GAAI,EAAGA,GACnD,GAAIc,GAAK,EAAG,OAAQ4yE,EAAQ1zE,EAAOxD,EAAI,GAAIA,EAAI,EAAGwD,GAClD,IAAIxD,EACAjD,GAAKiD,EAAI,GAAKsE,EACdy3E,EAAK71E,KAAKC,MAAMpJ,GAChBi/E,GAAU9E,EAAQ1zE,EAAOu4E,GAAKA,EAAIv4E,GAEtC,OAAOw4E,IADO9E,EAAQ1zE,EAAOu4E,EAAK,GAAIA,EAAK,EAAGv4E,GACpBw4E,IAAWj/E,EAAIg/E,EARQ,CASnD,CAEO,SAASI,GAAc34E,EAAQc,EAAG4yE,EAAUlB,GACjD,IAAI/uD,MAAM3iB,GAAKA,GAAf,CAEA,GADAqxD,EAAUzsD,aAAa28B,KAAKriC,GAAQ,CAACjE,EAAGxC,IAAMi5E,EAAOkB,EAAQ1zE,EAAOzG,GAAIA,EAAGyG,MACvEc,GAAK,EAAG,OAAOi3E,GAAS5lB,GAC5B,GAAIrxD,GAAK,EAAG,OAAOg3E,GAAS3lB,GAC5B,IAAIA,EACA7xD,EAAQy1E,YAAY1zC,KAAKriC,GAAQ,CAACjE,EAAGxC,IAAMA,IAC3CsJ,EAAIsvD,EAAQ94D,OAAS,EACrBE,EAAImJ,KAAKC,MAAME,EAAI/B,GAGvB,OAFAk3E,GAAY13E,EAAO/G,EAAG,EAAGsJ,GAAG,CAACtJ,EAAGsJ,IAAMmzE,EAAiB7jB,EAAQ54D,GAAI44D,EAAQtvD,OAC3EtJ,EAAI4+E,GAAS73E,EAAMm4E,SAAS,EAAGl/E,EAAI,IAAKA,GAAM44D,EAAQ54D,OAC1C,EAAIA,GAAK,CAVI,CAW3B,CC3Ce,SAASq/E,GAA0B54E,EAAQC,EAAKE,GAC7D,MAAM6G,EAAI2e,EAAM3lB,GAASO,EAAI+3E,GAASt4E,EAAQ,KAAQs4E,GAASt4E,EAAQ,KACvE,OAAOgH,GAAKzG,EAAImC,KAAKwvB,MAAM/xB,EAAMF,IAAQ,EAAIM,EAAImC,KAAKkB,IAAIoD,GAAI,EAAI,KAAO,CAC3E,CCHe,SAAS6xE,GAAe74E,EAAQC,EAAKE,GAClD,MAAM6G,EAAI2e,EAAM3lB,GAASO,EAAI0zE,EAAUj0E,GACvC,OAAOgH,GAAKzG,EAAImC,KAAKwvB,MAAM/xB,EAAMF,GAAOyC,KAAKo2E,KAAK9xE,IAAM,KAAOzG,IAAM,CACvE,CCNe,SAASsvB,GAAK7vB,EAAQ0zE,GACnC,IAAI/tD,EAAQ,EACR9gB,EAAM,EACV,QAAgBhL,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,EACH,MAATnD,IAAkBA,GAASA,IAAUA,MACrC8oB,EAAO9gB,GAAOhI,OAGf,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,MAAqBnD,GAASA,IAAUA,MACzE8oB,EAAO9gB,GAAOhI,EAGtB,CACA,GAAI8oB,EAAO,OAAO9gB,EAAM8gB,CAC1B,CChBe,SAASozD,GAAO/4E,EAAQ0zE,GACrC,OAAO4E,GAASt4E,EAAQ,GAAK0zE,EAC/B,CAEO,SAASsF,GAAYh5E,EAAQ0zE,GAClC,OAAOiF,GAAc34E,EAAQ,GAAK0zE,EACpC,CCFe,SAASpxE,GAAM22E,GAC5B,OAAO3mE,MAAM+vB,KAPf,UAAkB42C,GAChB,IAAK,MAAMtF,KAASsF,QACXtF,CAEX,CAGoB,CAAQsF,GAC5B,CCNe,SAASv8C,GAAK18B,EAAQ0zE,GACnC,MAAMwF,EAAS,IAAIxE,EACnB,QAAgB76E,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,EACH,MAATnD,GAAiBA,GAASA,GAC5Bq8E,EAAOztE,IAAI5O,GAAQq8E,EAAOn3E,IAAIlF,IAAU,GAAK,OAG5C,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,EACiC,OAA5CnD,EAAQ62E,EAAQ72E,IAASyD,EAAON,KAAoBnD,GAASA,GAChEq8E,EAAOztE,IAAI5O,GAAQq8E,EAAOn3E,IAAIlF,IAAU,GAAK,EAGnD,CACA,IAAIs8E,EACAC,EAAY,EAChB,IAAK,MAAOv8E,EAAO8oB,KAAUuzD,EACvBvzD,EAAQyzD,IACVA,EAAYzzD,EACZwzD,EAAYt8E,GAGhB,OAAOs8E,CACT,CC3Be,SAASE,GAAMr5E,EAAQs5E,EAASC,IAC7C,MAAMF,EAAQ,GACd,IAAIG,EACAC,GAAQ,EACZ,IAAK,MAAM58E,KAASmD,EACdy5E,GAAOJ,EAAM7gF,KAAK8gF,EAAOE,EAAU38E,IACvC28E,EAAW38E,EACX48E,GAAQ,EAEV,OAAOJ,CACT,CAEO,SAASE,GAAKj8E,EAAGC,GACtB,MAAO,CAACD,EAAGC,EACb,CCde,SAASmC,GAAM6C,EAAO2oB,EAAMluB,GACzCuF,GAASA,EAAO2oB,GAAQA,EAAMluB,GAAQR,EAAI2Z,UAAU9c,QAAU,GAAK6xB,EAAO3oB,EAAOA,EAAQ,EAAG,GAAK/F,EAAI,EAAI,GAAKQ,EAM9G,IAJA,IAAIzD,GAAK,EACLiD,EAAoD,EAAhDkG,KAAKvC,IAAI,EAAGuC,KAAKwvB,MAAMhH,EAAO3oB,GAASvF,IAC3C0C,EAAQ,IAAI4S,MAAM9V,KAEbjD,EAAIiD,GACXkD,EAAMnG,GAAKgJ,EAAQhJ,EAAIyD,EAGzB,OAAO0C,CACT,CCTe,SAASg6E,GAAK15E,EAAQ0zE,EAAU5B,GAC7C,GAAuC,mBAA5B9xE,EAAO1D,OAAOC,UAA0B,MAAM,IAAII,UAAU,0BACvE,IAAIg9E,EAAIrnE,MAAM+vB,KAAKriC,GACnB,MAAMqvC,EAAI,IAAI3pC,aAAai0E,EAAEtgF,QACN,IAAnBq6E,EAAQr6E,SAAcsgF,EAAIA,EAAE3gF,IAAI06E,GAAUA,EAAU5B,GACxD,MAAM8H,EAAe,CAACrgF,EAAGsJ,IAAM6wE,EAAQiG,EAAEpgF,GAAIogF,EAAE92E,IAC/C,IAAI9I,EAAG6D,EAaP,OAZAoC,EAAS+1E,YAAY1zC,KAAKs3C,GAAG,CAAC59E,EAAGxC,IAAMA,KAEhC2H,KAAKwyE,IAAY5B,EAAY,CAACv4E,EAAGsJ,IAAMmzE,EAAiB2D,EAAEpgF,GAAIogF,EAAE92E,IAAMozE,EAAe2D,IAC5F55E,EAAOV,SAAQ,CAACuD,EAAGtJ,KACf,MAAMyN,EAAI4yE,EAAa/2E,OAAShJ,IAANE,EAAkB8I,EAAI9I,GAC5CiN,GAAK,SACGnN,IAANE,GAAmBiN,EAAI,KAAGjN,EAAI8I,EAAGjF,EAAIrE,GACzC81C,EAAExsC,GAAKjF,GAEPyxC,EAAExsC,GAAKwkC,GACT,IAEGgI,CACT,CCrBe,SAASx9B,GAAM7R,EAAQb,EAAU2yE,GAC9C,IAAI7xE,EACAm4E,GAAU,EACd,GAAuB,IAAnBj5E,EAAQ9F,OAAc,CACxB,IAAIwgF,EACJ,IAAK,MAAM5yD,KAAWjnB,EAAQ,CAC5B,MAAMnD,EAAQsC,EAAQ8nB,IAClBmxD,EACEtG,EAAUj1E,EAAOg9E,GAAY,EACD,IAA5B/H,EAAUj1E,EAAOA,MACrBoD,EAAMgnB,EACN4yD,EAAWh9E,EACXu7E,GAAU,EAEd,CACF,MACE,IAAK,MAAMv7E,KAASmD,GACdo4E,EACEj5E,EAAQtC,EAAOoD,GAAO,EACI,IAA1Bd,EAAQtC,EAAOA,MACnBoD,EAAMpD,EACNu7E,GAAU,GAIhB,OAAOn4E,CACT,CCzBe,SAAS65E,GAAW95E,EAAQb,EAAU2yE,GACnD,GAAuB,IAAnB3yE,EAAQ9F,OAAc,OAAO0+E,GAAS/3E,EAAQb,GAClD,IAAI06E,EACA55E,GAAO,EACPK,GAAS,EACb,IAAK,MAAMzD,KAASmD,IAChBM,GACEL,EAAM,EACsB,IAA1Bd,EAAQtC,EAAOA,GACfsC,EAAQtC,EAAOg9E,GAAY,KAC/BA,EAAWh9E,EACXoD,EAAMK,GAGV,OAAOL,CACT,CCfe,SAAS85E,GAAc/5E,EAAQb,EAAU2yE,GACtD,GAAuB,IAAnB3yE,EAAQ9F,OAAc,OAAOy+E,GAAS93E,EAAQb,GAClD,IAAIk5E,EACAl4E,GAAO,EACPG,GAAS,EACb,IAAK,MAAMzD,KAASmD,IAChBM,GACEH,EAAM,EACsB,IAA1BhB,EAAQtC,EAAOA,GACfsC,EAAQtC,EAAOw7E,GAAY,KAC/BA,EAAWx7E,EACXsD,EAAMG,GAGV,OAAOH,CACT,CChBe,SAAS65E,GAAKh6E,EAAQb,GACnC,MAAMmB,EAAQw5E,GAAW95E,EAAQb,GACjC,OAAOmB,EAAQ,OAAIzG,EAAYyG,CACjC,CCLA,SAAe25E,GAASv3E,KAAKwtB,QAEtB,SAAS+pD,GAAS/pD,GACvB,OAAO,SAAiByjD,EAAO4E,EAAK,EAAGh/B,EAAKo6B,EAAMt6E,QAChD,IAAIwhD,EAAItB,GAAMg/B,GAAMA,GACpB,KAAO19B,GAAG,CACR,MAAMthD,EAAI22B,IAAW2qB,IAAM,EAAGh/C,EAAI83E,EAAM94B,EAAI09B,GAC5C5E,EAAM94B,EAAI09B,GAAM5E,EAAMp6E,EAAIg/E,GAC1B5E,EAAMp6E,EAAIg/E,GAAM18E,CAClB,CACA,OAAO83E,CACT,CACF,CCZe,SAAS,GAAI3zE,EAAQ0zE,GAClC,IAAI7uE,EAAM,EACV,QAAgBhL,IAAZ65E,EACF,IAAK,IAAI72E,KAASmD,GACZnD,GAASA,KACXgI,GAAOhI,OAGN,CACL,IAAIyD,GAAS,EACb,IAAK,IAAIzD,KAASmD,GACZnD,GAAS62E,EAAQ72E,IAASyD,EAAON,MACnC6E,GAAOhI,EAGb,CACA,OAAOgI,CACT,CCfe,SAASq1E,GAAU17B,GAChC,KAAMhiD,EAAIgiD,EAAOnlD,QAAS,MAAO,GACjC,IAAK,IAAIE,GAAK,EAAGshD,EAAI56C,GAAIu+C,EAAQ,IAAS07B,EAAY,IAAI5nE,MAAMuoC,KAAMthD,EAAIshD,GACxE,IAAK,IAAYr+C,EAARqG,GAAK,EAAM6hC,EAAMw1C,EAAU3gF,GAAK,IAAI+Y,MAAM9V,KAAMqG,EAAIrG,GAC3DkoC,EAAI7hC,GAAK27C,EAAO37C,GAAGtJ,GAGvB,OAAO2gF,CACT,CAEA,SAAS,GAAO35E,GACd,OAAOA,EAAElH,MACX,CCZe,SAAS8gF,KACtB,OAAOD,GAAU/jE,UACnB,CCJe,SAAS00B,GAAM7qC,EAAQ4mD,GACpC,GAAoB,mBAATA,EAAqB,MAAM,IAAIjqD,UAAU,0BACpD,IAAI2D,GAAS,EACb,IAAK,MAAMzD,KAASmD,EAClB,IAAK4mD,EAAK/pD,IAASyD,EAAON,GACxB,OAAO,EAGX,OAAO,CACT,CCTe,SAASu0D,GAAKv0D,EAAQ4mD,GACnC,GAAoB,mBAATA,EAAqB,MAAM,IAAIjqD,UAAU,0BACpD,IAAI2D,GAAS,EACb,IAAK,MAAMzD,KAASmD,EAClB,GAAI4mD,EAAK/pD,IAASyD,EAAON,GACvB,OAAO,EAGX,OAAO,CACT,CCTe,SAASqvB,GAAOrvB,EAAQ4mD,GACrC,GAAoB,mBAATA,EAAqB,MAAM,IAAIjqD,UAAU,0BACpD,MAAMg3E,EAAQ,GACd,IAAIrzE,GAAS,EACb,IAAK,MAAMzD,KAASmD,EACd4mD,EAAK/pD,IAASyD,EAAON,IACvB2zE,EAAMn7E,KAAKqE,GAGf,OAAO82E,CACT,CCVe,SAAS,GAAI3zE,EAAQo6E,GAClC,GAAuC,mBAA5Bp6E,EAAO1D,OAAOC,UAA0B,MAAM,IAAII,UAAU,0BACvE,GAAsB,mBAAXy9E,EAAuB,MAAM,IAAIz9E,UAAU,4BACtD,OAAO2V,MAAM+vB,KAAKriC,GAAQ,CAACnD,EAAOyD,IAAU85E,EAAOv9E,EAAOyD,EAAON,IACnE,CCJe,SAAS4wB,GAAO5wB,EAAQ6zE,EAASh3E,GAC9C,GAAuB,mBAAZg3E,EAAwB,MAAM,IAAIl3E,UAAU,6BACvD,MAAMJ,EAAWyD,EAAO1D,OAAOC,YAC/B,IAAIK,EAAMR,EAAMkE,GAAS,EACzB,GAAI6V,UAAU9c,OAAS,EAAG,CAExB,KADEuD,OAAMC,SAASN,EAASH,QACtBQ,EAAM,SACR0D,CACJ,CACA,OAAS1D,OAAMC,MAAOT,GAAQG,EAASH,SAAUQ,GAC/CC,EAAQg3E,EAAQh3E,EAAOT,IAAQkE,EAAON,GAExC,OAAOnD,CACT,CCbe,SAAS4X,GAAQzU,GAC9B,GAAuC,mBAA5BA,EAAO1D,OAAOC,UAA0B,MAAM,IAAII,UAAU,0BACvE,OAAO2V,MAAM+vB,KAAKriC,GAAQyU,SAC5B,CCDe,SAASuD,GAAWhY,KAAWq6E,GAC5Cr6E,EAAS,IAAIi1E,EAAUj1E,GACvB,IAAK,MAAMmK,KAASkwE,EAClB,IAAK,MAAMx9E,KAASsN,EAClBnK,EAAOkhC,OAAOrkC,GAGlB,OAAOmD,CACT,CCRe,SAASs6E,GAASt6E,EAAQmK,GACvC,MAAM5N,EAAW4N,EAAM7N,OAAOC,YAAakP,EAAM,IAAIwpE,EACrD,IAAK,MAAMx4E,KAAKuD,EAAQ,CACtB,GAAIyL,EAAIG,IAAInP,GAAI,OAAO,EACvB,IAAII,EAAOD,EACX,OAASC,QAAOD,QAAQL,EAASH,UAC3BQ,GADoC,CAExC,GAAIiF,OAAO04E,GAAG99E,EAAGI,GAAQ,OAAO,EAChC4O,EAAI5M,IAAIhC,EACV,CACF,CACA,OAAO,CACT,CCZe,SAAS6a,GAAa1X,KAAWq6E,GAC9Cr6E,EAAS,IAAIi1E,EAAUj1E,GACvBq6E,EAASA,EAAOrhF,IAAIyS,IACpBpN,EAAK,IAAK,MAAMxB,KAASmD,EACvB,IAAK,MAAMmK,KAASkwE,EAClB,IAAKlwE,EAAMyB,IAAI/O,GAAQ,CACrBmD,EAAOkhC,OAAOrkC,GACd,SAASwB,CACX,CAGJ,OAAO2B,CACT,CAEA,SAASyL,GAAIzL,GACX,OAAOA,aAAkBi1E,EAAYj1E,EAAS,IAAIi1E,EAAUj1E,EAC9D,CClBe,SAASw6E,GAASx6E,EAAQmK,GACvC,MAAM5N,EAAWyD,EAAO1D,OAAOC,YAAakP,EAAM,IAAI8wB,IACtD,IAAK,MAAMge,KAAKpwC,EAAO,CACrB,MAAMswE,EAAKC,GAAOngC,GAClB,GAAI9uC,EAAIG,IAAI6uE,GAAK,SACjB,IAAI59E,EAAOD,EACX,OAASC,QAAOD,QAAQL,EAASH,SAAS,CACxC,GAAIQ,EAAM,OAAO,EACjB,MAAM+9E,EAASD,GAAO79E,GAEtB,GADA4O,EAAI5M,IAAI87E,GACJ94E,OAAO04E,GAAGE,EAAIE,GAAS,KAC7B,CACF,CACA,OAAO,CACT,CAEA,SAASD,GAAO79E,GACd,OAAiB,OAAVA,GAAmC,iBAAVA,EAAqBA,EAAMy3E,UAAYz3E,CACzE,CChBe,SAAS+9E,GAAO56E,EAAQmK,GACrC,OAAOqwE,GAASrwE,EAAOnK,EACzB,CCFe,SAASuX,MAAS8iE,GAC/B,MAAM5uE,EAAM,IAAIwpE,EAChB,IAAK,MAAM9qE,KAASkwE,EAClB,IAAK,MAAM9/B,KAAKpwC,EACdsB,EAAI5M,IAAI07C,GAGZ,OAAO9uC,CACT,CCVe,YAASzM,GACtB,OAAOA,CACT,CCAA,IAAI,GAAM,EACN5B,GAAQ,EACRy9E,GAAS,EACT19E,GAAO,EACPuH,GAAU,KAEd,SAASk9B,GAAW5iC,GAClB,MAAO,aAAeA,EAAI,KAC5B,CAEA,SAAS6iC,GAAWjmC,GAClB,MAAO,eAAiBA,EAAI,GAC9B,CAEA,SAAS,GAAOm2B,GACd,OAAOxxB,IAAMwxB,EAAMxxB,EACrB,CAEA,SAASgyE,GAAOxgD,EAAOyY,GAGrB,OAFAA,EAAS9nC,KAAKvC,IAAI,EAAG4xB,EAAMyF,YAAuB,EAATgT,GAAc,EACnDzY,EAAM7tB,UAASsmC,EAAS9nC,KAAKwB,MAAMsmC,IAChCjqC,IAAMwxB,EAAMxxB,GAAKiqC,CAC1B,CAEA,SAASswC,KACP,OAAQ/hF,KAAKgiF,MACf,CAEA,SAAS3yB,GAAK0gB,EAAQ/2C,GACpB,IAAIipD,EAAgB,GAChB9kD,EAAa,KACb+kD,EAAa,KACbC,EAAgB,EAChB/kD,EAAgB,EAChBglD,EAAc,EACd3wC,EAA2B,oBAAXnyB,QAA0BA,OAAO+iE,iBAAmB,EAAI,EAAI,GAC5ErhF,EAAI+uE,IAAW,IAAOA,IAAW3rE,IAAQ,EAAI,EAC7C6B,EAAI8pE,IAAW3rE,IAAQ2rE,IAAW1rE,GAAQ,IAAM,IAChDqjC,EAAYqoC,IAAW,IAAOA,IAAW+R,GAASj5C,GAAaC,GAEnE,SAASumB,EAAK3iB,GACZ,IAAIzlC,EAAuB,MAAdk2B,EAAsBnE,EAAMglD,MAAQhlD,EAAMglD,MAAM59D,MAAM4Y,EAAOipD,GAAiBjpD,EAAM8C,SAAYqB,EACzGmlD,EAAuB,MAAdJ,EAAsBlpD,EAAMkpD,WAAalpD,EAAMkpD,WAAW9hE,MAAM4Y,EAAOipD,GAAiB,GAAYC,EAC7GK,EAAU54E,KAAKvC,IAAI+6E,EAAe,GAAKC,EACvCz7E,EAAQqyB,EAAMryB,QACd67E,GAAU77E,EAAM,GAAK8qC,EACrBgxC,GAAU97E,EAAMA,EAAMrG,OAAS,GAAKmxC,EACpCixC,GAAY1pD,EAAMyF,UAAY+6C,GAAS,IAAQxgD,EAAM2pD,OAAQlxC,GAC7DmxC,EAAYl2C,EAAQk2C,UAAYl2C,EAAQk2C,YAAcl2C,EACtD0F,EAAOwwC,EAAUrmD,UAAU,WAAW96B,KAAK,CAAC,OAC5Cw1D,EAAO2rB,EAAUrmD,UAAU,SAAS96B,KAAKwF,EAAQ+xB,GAAO6pD,QACxDC,EAAW7rB,EAAK8rB,OAChBC,EAAY/rB,EAAKz4B,QAAQ5C,OAAO,KAAKC,KAAK,QAAS,QACnD6U,EAAOumB,EAAKnrB,OAAO,QACnB9P,EAAOi7B,EAAKnrB,OAAO,QAEvBsG,EAAOA,EAAK7oC,MAAM6oC,EAAK5T,QAAQz5B,OAAO,OAAQ,SACzC82B,KAAK,QAAS,UACdA,KAAK,SAAU,iBAEpBo7B,EAAOA,EAAK1tD,MAAMy5E,GAElBtyC,EAAOA,EAAKnnC,MAAMy5E,EAAUpnD,OAAO,QAC9BC,KAAK,SAAU,gBACfA,KAAK51B,EAAI,IAAKjF,EAAImhF,IAEvBnmD,EAAOA,EAAKzyB,MAAMy5E,EAAUpnD,OAAO,QAC9BC,KAAK,OAAQ,gBACbA,KAAK51B,EAAGjF,EAAIuhF,GACZ1mD,KAAK,KAAMk0C,IAAW,GAAM,MAAQA,IAAW+R,GAAS,SAAW,WAEpEp1C,IAAYk2C,IACdxwC,EAAOA,EAAKrJ,WAAW2D,GACvBuqB,EAAOA,EAAKluB,WAAW2D,GACvBgE,EAAOA,EAAK3H,WAAW2D,GACvB1Q,EAAOA,EAAK+M,WAAW2D,GAEvBo2C,EAAWA,EAAS/5C,WAAW2D,GAC1B7Q,KAAK,UAAWlwB,IAChBkwB,KAAK,aAAa,SAASr0B,GAAK,OAAO42E,SAAS52E,EAAIk7E,EAASl7E,IAAMkgC,EAAUlgC,EAAIiqC,GAAUzxC,KAAKsgC,aAAa,YAAc,IAEhI0iD,EACKnnD,KAAK,UAAWlwB,IAChBkwB,KAAK,aAAa,SAASr0B,GAAK,IAAIO,EAAI/H,KAAKsuB,WAAW0zD,OAAQ,OAAOt6C,GAAW3/B,GAAKq2E,SAASr2E,EAAIA,EAAEP,IAAMO,EAAI26E,EAASl7E,IAAMiqC,EAAS,KAG/IqxC,EAAS/8E,SAETqsC,EACKvW,KAAK,IAAKk0C,IAAW3rE,IAAQ2rE,IAAW1rE,GAClC+4B,EAAgB,IAAMp8B,EAAIo8B,EAAgB,IAAMolD,EAAS,IAAM/wC,EAAS,IAAMgxC,EAAS,IAAMzhF,EAAIo8B,EAAgB,IAAMqU,EAAS,IAAM+wC,EAAS,IAAMC,EACrJrlD,EAAgB,IAAMolD,EAAS,IAAMxhF,EAAIo8B,EAAgB,IAAMqU,EAAS,IAAMgxC,EAAS,IAAMzhF,EAAIo8B,EAAgB,IAAMolD,EAAS,IAAM/wC,EAAS,IAAMgxC,GAEhKxrB,EACKp7B,KAAK,UAAW,GAChBA,KAAK,aAAa,SAASr0B,GAAK,OAAOkgC,EAAUg7C,EAASl7E,GAAKiqC,EAAS,IAE7Ef,EACK7U,KAAK51B,EAAI,IAAKjF,EAAImhF,GAEvBnmD,EACKH,KAAK51B,EAAGjF,EAAIuhF,GACZvmD,KAAKsmD,GAEVM,EAAUtsD,OAAOyrD,IACZlmD,KAAK,OAAQ,QACbA,KAAK,YAAa,IAClBA,KAAK,cAAe,cACpBA,KAAK,cAAek0C,IAAW1rE,GAAQ,QAAU0rE,IAAW3rE,GAAO,MAAQ,UAEhFw+E,EACKK,MAAK,WAAajjF,KAAKgiF,OAASU,CAAU,GACjD,CA0CA,OAxCArzB,EAAKr2B,MAAQ,SAASh2B,GACpB,OAAOoa,UAAU9c,QAAU04B,EAAQh2B,EAAGqsD,GAAQr2B,CAChD,EAEAq2B,EAAK2uB,MAAQ,WACX,OAAOiE,EAAgB1oE,MAAM+vB,KAAKlsB,WAAYiyC,CAChD,EAEAA,EAAK4yB,cAAgB,SAASj/E,GAC5B,OAAOoa,UAAU9c,QAAU2hF,EAAqB,MAALj/E,EAAY,GAAKuW,MAAM+vB,KAAKtmC,GAAIqsD,GAAQ4yB,EAAcjrE,OACnG,EAEAq4C,EAAKlyB,WAAa,SAASn6B,GACzB,OAAOoa,UAAU9c,QAAU68B,EAAkB,MAALn6B,EAAY,KAAOuW,MAAM+vB,KAAKtmC,GAAIqsD,GAAQlyB,GAAcA,EAAWnmB,OAC7G,EAEAq4C,EAAK6yB,WAAa,SAASl/E,GACzB,OAAOoa,UAAU9c,QAAU4hF,EAAal/E,EAAGqsD,GAAQ6yB,CACrD,EAEA7yB,EAAK6zB,SAAW,SAASlgF,GACvB,OAAOoa,UAAU9c,QAAU6hF,EAAgB/kD,GAAiBp6B,EAAGqsD,GAAQ8yB,CACzE,EAEA9yB,EAAK8yB,cAAgB,SAASn/E,GAC5B,OAAOoa,UAAU9c,QAAU6hF,GAAiBn/E,EAAGqsD,GAAQ8yB,CACzD,EAEA9yB,EAAKjyB,cAAgB,SAASp6B,GAC5B,OAAOoa,UAAU9c,QAAU88B,GAAiBp6B,EAAGqsD,GAAQjyB,CACzD,EAEAiyB,EAAK+yB,YAAc,SAASp/E,GAC1B,OAAOoa,UAAU9c,QAAU8hF,GAAep/E,EAAGqsD,GAAQ+yB,CACvD,EAEA/yB,EAAK5d,OAAS,SAASzuC,GACrB,OAAOoa,UAAU9c,QAAUmxC,GAAUzuC,EAAGqsD,GAAQ5d,CAClD,EAEO4d,CACT,CAEO,SAAS8zB,GAAQnqD,GACtB,OAAOq2B,GAAK,GAAKr2B,EACnB,CAEO,SAASoqD,GAAUpqD,GACxB,OAAOq2B,GAAKhrD,GAAO20B,EACrB,CAEO,SAASqqD,GAAWrqD,GACzB,OAAOq2B,GAAKyyB,GAAQ9oD,EACtB,CAEO,SAASsqD,GAAStqD,GACvB,OAAOq2B,GAAKjrD,GAAM40B,EACpB,CC7KA,IAAIu2C,GAAO,CAACzrE,MAAO,QAEnB,SAASy/E,KACP,IAAK,IAAyCzgF,EAArCtC,EAAI,EAAGiD,EAAI2Z,UAAU9c,OAAQ0C,EAAI,CAAC,EAAMxC,EAAIiD,IAAKjD,EAAG,CAC3D,KAAMsC,EAAIsa,UAAU5c,GAAK,KAAQsC,KAAKE,GAAM,QAAQ6qD,KAAK/qD,GAAI,MAAM,IAAIuO,MAAM,iBAAmBvO,GAChGE,EAAEF,GAAK,EACT,CACA,OAAO,IAAI0gF,GAASxgF,EACtB,CAEA,SAASwgF,GAASxgF,GAChBhD,KAAKgD,EAAIA,CACX,CAoDA,SAASgG,GAAI2P,EAAMijC,GACjB,IAAK,IAA4B3tC,EAAxBzN,EAAI,EAAGiD,EAAIkV,EAAKrY,OAAWE,EAAIiD,IAAKjD,EAC3C,IAAKyN,EAAI0K,EAAKnY,IAAIo7C,OAASA,EACzB,OAAO3tC,EAAEnK,KAGf,CAEA,SAAS,GAAI6U,EAAMijC,EAAM/7B,GACvB,IAAK,IAAIrf,EAAI,EAAGiD,EAAIkV,EAAKrY,OAAQE,EAAIiD,IAAKjD,EACxC,GAAImY,EAAKnY,GAAGo7C,OAASA,EAAM,CACzBjjC,EAAKnY,GAAK+uE,GAAM52D,EAAOA,EAAK3B,MAAM,EAAGxW,GAAGH,OAAOsY,EAAK3B,MAAMxW,EAAI,IAC9D,KACF,CAGF,OADgB,MAAZqf,GAAkBlH,EAAKlZ,KAAK,CAACm8C,KAAMA,EAAM93C,MAAO+b,IAC7ClH,CACT,CA1DA6qE,GAAS39E,UAAY09E,GAAS19E,UAAY,CACxCoF,YAAau4E,GACbrnD,GAAI,SAASsnD,EAAU5jE,GACrB,IAEI/c,EAd2B4gF,EAY3B1gF,EAAIhD,KAAKgD,EACTg/C,GAb2B0hC,EAaO1gF,GAAfygF,EAAW,IAZnBj2B,OAAOvoD,MAAM,SAAShF,KAAI,SAAS6C,GAClD,IAAI84C,EAAO,GAAIp7C,EAAIsC,EAAEuU,QAAQ,KAE7B,GADI7W,GAAK,IAAGo7C,EAAO94C,EAAEkU,MAAMxW,EAAI,GAAIsC,EAAIA,EAAEkU,MAAM,EAAGxW,IAC9CsC,IAAM4gF,EAAMpiC,eAAex+C,GAAI,MAAM,IAAIuO,MAAM,iBAAmBvO,GACtE,MAAO,CAAC6V,KAAM7V,EAAG84C,KAAMA,EACzB,KASMp7C,GAAK,EACLiD,EAAIu+C,EAAE1hD,OAGV,KAAI8c,UAAU9c,OAAS,GAAvB,CAOA,GAAgB,MAAZuf,GAAwC,mBAAbA,EAAyB,MAAM,IAAIxO,MAAM,qBAAuBwO,GAC/F,OAASrf,EAAIiD,GACX,GAAIX,GAAK2gF,EAAWzhC,EAAExhD,IAAImY,KAAM3V,EAAEF,GAAK,GAAIE,EAAEF,GAAI2gF,EAAS7nC,KAAM/7B,QAC3D,GAAgB,MAAZA,EAAkB,IAAK/c,KAAKE,EAAGA,EAAEF,GAAK,GAAIE,EAAEF,GAAI2gF,EAAS7nC,KAAM,MAG1E,OAAO57C,IAVP,CAFE,OAASQ,EAAIiD,OAAQX,GAAK2gF,EAAWzhC,EAAExhD,IAAImY,QAAU7V,EAAIkG,GAAIhG,EAAEF,GAAI2gF,EAAS7nC,OAAQ,OAAO94C,CAa/F,EACA6/E,KAAM,WACJ,IAAIA,EAAO,CAAC,EAAG3/E,EAAIhD,KAAKgD,EACxB,IAAK,IAAIF,KAAKE,EAAG2/E,EAAK7/E,GAAKE,EAAEF,GAAGkU,QAChC,OAAO,IAAIwsE,GAASb,EACtB,EACAngF,KAAM,SAASmW,EAAMgrE,GACnB,IAAKlgF,EAAI2Z,UAAU9c,OAAS,GAAK,EAAG,IAAK,IAAgCmD,EAAGX,EAA/BgxB,EAAO,IAAIva,MAAM9V,GAAIjD,EAAI,EAASA,EAAIiD,IAAKjD,EAAGszB,EAAKtzB,GAAK4c,UAAU5c,EAAI,GACnH,IAAKR,KAAKgD,EAAEs+C,eAAe3oC,GAAO,MAAM,IAAItH,MAAM,iBAAmBsH,GACrE,IAAuBnY,EAAI,EAAGiD,GAAzBX,EAAI9C,KAAKgD,EAAE2V,IAAoBrY,OAAQE,EAAIiD,IAAKjD,EAAGsC,EAAEtC,GAAGsD,MAAMsc,MAAMujE,EAAM7vD,EACjF,EACA1T,MAAO,SAASzH,EAAMgrE,EAAM7vD,GAC1B,IAAK9zB,KAAKgD,EAAEs+C,eAAe3oC,GAAO,MAAM,IAAItH,MAAM,iBAAmBsH,GACrE,IAAK,IAAI7V,EAAI9C,KAAKgD,EAAE2V,GAAOnY,EAAI,EAAGiD,EAAIX,EAAExC,OAAQE,EAAIiD,IAAKjD,EAAGsC,EAAEtC,GAAGsD,MAAMsc,MAAMujE,EAAM7vD,EACrF,GAsBF,YCnFA,SAAS8vD,KAAQ,CAEF,YAASp3B,GACtB,OAAmB,MAAZA,EAAmBo3B,GAAO,WAC/B,OAAO5jF,KAAK8tB,cAAc0+B,EAC5B,CACF,CCAe,SAAS,GAAMvmD,GAC5B,OAAY,MAALA,EAAY,GAAKsT,MAAMC,QAAQvT,GAAKA,EAAIsT,MAAM+vB,KAAKrjC,EAC5D,CCRA,SAAS,KACP,MAAO,EACT,CAEe,YAASumD,GACtB,OAAmB,MAAZA,EAAmB,GAAQ,WAChC,OAAOxsD,KAAKigC,iBAAiBusB,EAC/B,CACF,CCRe,YAASA,GACtB,OAAO,WACL,OAAOxsD,KAAK2rD,QAAQa,EACtB,CACF,CAEO,SAASq3B,GAAar3B,GAC3B,OAAO,SAASxnD,GACd,OAAOA,EAAK2mD,QAAQa,EACtB,CACF,CCRA,IAAInmD,GAAOkT,MAAM1T,UAAUQ,KAQ3B,SAASy9E,KACP,OAAO9jF,KAAK+jF,iBACd,CCVA,IAAI,GAASxqE,MAAM1T,UAAUywB,OAE7B,SAAS0kC,KACP,OAAOzhD,MAAM+vB,KAAKtpC,KAAKg7D,SACzB,CCNe,YAAS5xD,GACtB,OAAO,IAAImQ,MAAMnQ,EAAO9I,OAC1B,CCKO,SAAS0jF,GAAU5rC,EAAQ6rC,GAChCjkF,KAAKkkF,cAAgB9rC,EAAO8rC,cAC5BlkF,KAAKmkF,aAAe/rC,EAAO+rC,aAC3BnkF,KAAKokF,MAAQ,KACbpkF,KAAKqkF,QAAUjsC,EACfp4C,KAAKskF,SAAWL,CAClB,CCTA,SAASM,GAAUnsC,EAAQyyB,EAAOrsC,EAAOp1B,EAAQ25E,EAAMthF,GASrD,IARA,IACIuD,EADAxE,EAAI,EAEJgkF,EAAc3Z,EAAMvqE,OACpBmkF,EAAahjF,EAAKnB,OAKfE,EAAIikF,IAAcjkF,GACnBwE,EAAO6lE,EAAMrqE,KACfwE,EAAKs/E,SAAW7iF,EAAKjB,GACrB4I,EAAO5I,GAAKwE,GAEZw5B,EAAMh+B,GAAK,IAAIwjF,GAAU5rC,EAAQ32C,EAAKjB,IAK1C,KAAOA,EAAIgkF,IAAehkF,GACpBwE,EAAO6lE,EAAMrqE,MACfuiF,EAAKviF,GAAKwE,EAGhB,CAEA,SAAS0/E,GAAQtsC,EAAQyyB,EAAOrsC,EAAOp1B,EAAQ25E,EAAMthF,EAAM0C,GACzD,IAAI3D,EACAwE,EAKA2/E,EAJAC,EAAiB,IAAItyE,IACrBkyE,EAAc3Z,EAAMvqE,OACpBmkF,EAAahjF,EAAKnB,OAClBukF,EAAY,IAAItrE,MAAMirE,GAK1B,IAAKhkF,EAAI,EAAGA,EAAIgkF,IAAehkF,GACzBwE,EAAO6lE,EAAMrqE,MACfqkF,EAAUrkF,GAAKmkF,EAAWxgF,EAAI3B,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,GAAS,GAChE+Z,EAAe/xE,IAAI8xE,GACrB5B,EAAKviF,GAAKwE,EAEV4/E,EAAelyE,IAAIiyE,EAAU3/E,IAQnC,IAAKxE,EAAI,EAAGA,EAAIikF,IAAcjkF,EAC5BmkF,EAAWxgF,EAAI3B,KAAK41C,EAAQ32C,EAAKjB,GAAIA,EAAGiB,GAAQ,IAC5CuD,EAAO4/E,EAAe57E,IAAI27E,KAC5Bv7E,EAAO5I,GAAKwE,EACZA,EAAKs/E,SAAW7iF,EAAKjB,GACrBokF,EAAez8C,OAAOw8C,IAEtBnmD,EAAMh+B,GAAK,IAAIwjF,GAAU5rC,EAAQ32C,EAAKjB,IAK1C,IAAKA,EAAI,EAAGA,EAAIgkF,IAAehkF,GACxBwE,EAAO6lE,EAAMrqE,KAAQokF,EAAe57E,IAAI67E,EAAUrkF,MAAQwE,IAC7D+9E,EAAKviF,GAAKwE,EAGhB,CAEA,SAASi/E,GAAMj/E,GACb,OAAOA,EAAKs/E,QACd,CA+CA,SAASQ,GAAUrjF,GACjB,MAAuB,iBAATA,GAAqB,WAAYA,EAC3CA,EACA8X,MAAM+vB,KAAK7nC,EACjB,CC1GA,SAAS,GAAU8C,EAAGC,GACpB,OAAOD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAI8pC,GAC/C,CFRA01C,GAAUn+E,UAAY,CACpBoF,YAAa+4E,GACbr4D,YAAa,SAASsvC,GAAS,OAAOj7D,KAAKqkF,QAAQU,aAAa9pB,EAAOj7D,KAAKokF,MAAQ,EACpFW,aAAc,SAAS9pB,EAAO53D,GAAQ,OAAOrD,KAAKqkF,QAAQU,aAAa9pB,EAAO53D,EAAO,EACrFyqB,cAAe,SAAS0+B,GAAY,OAAOxsD,KAAKqkF,QAAQv2D,cAAc0+B,EAAW,EACjFvsB,iBAAkB,SAASusB,GAAY,OAAOxsD,KAAKqkF,QAAQpkD,iBAAiBusB,EAAW,GGpBlF,IAAIw4B,GAAQ,+BAEnB,UACEl+C,IAAK,6BACLk+C,MAAOA,GACPC,MAAO,+BACPh6D,IAAK,uCACLi6D,MAAO,iCCLM,YAAStpC,GACtB,IAAIx2C,EAASw2C,GAAQ,GAAIp7C,EAAI4E,EAAOiS,QAAQ,KAE5C,OADI7W,GAAK,GAAqC,WAA/B4E,EAASw2C,EAAK5kC,MAAM,EAAGxW,MAAiBo7C,EAAOA,EAAK5kC,MAAMxW,EAAI,IACtE2kF,GAAW7jC,eAAel8C,GAAU,CAACggF,MAAOD,GAAW//E,GAASigF,MAAOzpC,GAAQA,CACxF,CCJA,SAAS0pC,GAAW1pC,GAClB,OAAO,WACL57C,KAAKulF,gBAAgB3pC,EACvB,CACF,CAEA,SAAS4pC,GAAaC,GACpB,OAAO,WACLzlF,KAAK0lF,kBAAkBD,EAASL,MAAOK,EAASJ,MAClD,CACF,CAEA,SAASM,GAAa/pC,EAAM93C,GAC1B,OAAO,WACL9D,KAAKorB,aAAawwB,EAAM93C,EAC1B,CACF,CAEA,SAAS8hF,GAAeH,EAAU3hF,GAChC,OAAO,WACL9D,KAAK6lF,eAAeJ,EAASL,MAAOK,EAASJ,MAAOvhF,EACtD,CACF,CAEA,SAASgiF,GAAalqC,EAAM93C,GAC1B,OAAO,WACL,IAAIJ,EAAII,EAAMsc,MAAMpgB,KAAMod,WACjB,MAAL1Z,EAAW1D,KAAKulF,gBAAgB3pC,GAC/B57C,KAAKorB,aAAawwB,EAAMl4C,EAC/B,CACF,CAEA,SAASqiF,GAAeN,EAAU3hF,GAChC,OAAO,WACL,IAAIJ,EAAII,EAAMsc,MAAMpgB,KAAMod,WACjB,MAAL1Z,EAAW1D,KAAK0lF,kBAAkBD,EAASL,MAAOK,EAASJ,OAC1DrlF,KAAK6lF,eAAeJ,EAASL,MAAOK,EAASJ,MAAO3hF,EAC3D,CACF,CCxCe,YAASsB,GACtB,OAAQA,EAAKk/E,eAAiBl/E,EAAKk/E,cAAc8B,aACzChhF,EAAKkmB,UAAYlmB,GAClBA,EAAKghF,WACd,CCFA,SAASC,GAAYrqC,GACnB,OAAO,WACL57C,KAAKyrB,MAAMy6D,eAAetqC,EAC5B,CACF,CAEA,SAASuqC,GAAcvqC,EAAM93C,EAAOsiF,GAClC,OAAO,WACLpmF,KAAKyrB,MAAM46D,YAAYzqC,EAAM93C,EAAOsiF,EACtC,CACF,CAEA,SAASE,GAAc1qC,EAAM93C,EAAOsiF,GAClC,OAAO,WACL,IAAI1iF,EAAII,EAAMsc,MAAMpgB,KAAMod,WACjB,MAAL1Z,EAAW1D,KAAKyrB,MAAMy6D,eAAetqC,GACpC57C,KAAKyrB,MAAM46D,YAAYzqC,EAAMl4C,EAAG0iF,EACvC,CACF,CAWO,SAASG,GAAWvhF,EAAM42C,GAC/B,OAAO52C,EAAKymB,MAAMm9C,iBAAiBhtB,IAC5B,GAAY52C,GAAM2jE,iBAAiB3jE,EAAM,MAAM4jE,iBAAiBhtB,EACzE,CClCA,SAAS4qC,GAAe5qC,GACtB,OAAO,kBACE57C,KAAK47C,EACd,CACF,CAEA,SAAS6qC,GAAiB7qC,EAAM93C,GAC9B,OAAO,WACL9D,KAAK47C,GAAQ93C,CACf,CACF,CAEA,SAAS4iF,GAAiB9qC,EAAM93C,GAC9B,OAAO,WACL,IAAIJ,EAAII,EAAMsc,MAAMpgB,KAAMod,WACjB,MAAL1Z,SAAkB1D,KAAK47C,GACtB57C,KAAK47C,GAAQl4C,CACpB,CACF,CClBA,SAASijF,GAAWC,GAClB,OAAOA,EAAOp5B,OAAOvoD,MAAM,QAC7B,CAEA,SAAS2wB,GAAU5wB,GACjB,OAAOA,EAAK4wB,WAAa,IAAIixD,GAAU7hF,EACzC,CAEA,SAAS6hF,GAAU7hF,GACjBhF,KAAK8mF,MAAQ9hF,EACbhF,KAAK+mF,OAASJ,GAAW3hF,EAAKs7B,aAAa,UAAY,GACzD,CAsBA,SAAS0mD,GAAWhiF,EAAMiiF,GAExB,IADA,IAAInnF,EAAO81B,GAAU5wB,GAAOxE,GAAK,EAAGiD,EAAIwjF,EAAM3mF,SACrCE,EAAIiD,GAAG3D,EAAKgG,IAAImhF,EAAMzmF,GACjC,CAEA,SAAS0mF,GAAcliF,EAAMiiF,GAE3B,IADA,IAAInnF,EAAO81B,GAAU5wB,GAAOxE,GAAK,EAAGiD,EAAIwjF,EAAM3mF,SACrCE,EAAIiD,GAAG3D,EAAKiG,OAAOkhF,EAAMzmF,GACpC,CAEA,SAAS2mF,GAAYF,GACnB,OAAO,WACLD,GAAWhnF,KAAMinF,EACnB,CACF,CAEA,SAASG,GAAaH,GACpB,OAAO,WACLC,GAAclnF,KAAMinF,EACtB,CACF,CAEA,SAASI,GAAgBJ,EAAOnjF,GAC9B,OAAO,YACJA,EAAMsc,MAAMpgB,KAAMod,WAAa4pE,GAAaE,IAAelnF,KAAMinF,EACpE,CACF,CC3DA,SAASK,KACPtnF,KAAK21B,YAAc,EACrB,CAEA,SAAS4xD,GAAazjF,GACpB,OAAO,WACL9D,KAAK21B,YAAc7xB,CACrB,CACF,CAEA,SAAS0jF,GAAa1jF,GACpB,OAAO,WACL,IAAIJ,EAAII,EAAMsc,MAAMpgB,KAAMod,WAC1Bpd,KAAK21B,YAAmB,MAALjyB,EAAY,GAAKA,CACtC,CACF,CCfA,SAAS+jF,KACPznF,KAAK0nF,UAAY,EACnB,CAEA,SAASC,GAAa7jF,GACpB,OAAO,WACL9D,KAAK0nF,UAAY5jF,CACnB,CACF,CAEA,SAAS8jF,GAAa9jF,GACpB,OAAO,WACL,IAAIJ,EAAII,EAAMsc,MAAMpgB,KAAMod,WAC1Bpd,KAAK0nF,UAAiB,MAALhkF,EAAY,GAAKA,CACpC,CACF,CCfA,SAASmkF,KACH7nF,KAAK8nF,aAAa9nF,KAAKsuB,WAAW3C,YAAY3rB,KACpD,CCFA,SAAS+nF,KACH/nF,KAAKgoF,iBAAiBhoF,KAAKsuB,WAAWy2D,aAAa/kF,KAAMA,KAAKsuB,WAAWI,WAC/E,CCCA,SAASu5D,GAAersC,GACtB,OAAO,WACL,IAAI1wB,EAAWlrB,KAAKkkF,cAChBgE,EAAMloF,KAAKmkF,aACf,OAAO+D,IAAQlD,IAAS95D,EAASqrD,gBAAgB4N,eAAiBa,GAC5D95D,EAASC,cAAcywB,GACvB1wB,EAASi9D,gBAAgBD,EAAKtsC,EACtC,CACF,CAEA,SAASwsC,GAAa3C,GACpB,OAAO,WACL,OAAOzlF,KAAKkkF,cAAciE,gBAAgB1C,EAASL,MAAOK,EAASJ,MACrE,CACF,CAEe,YAASzpC,GACtB,IAAI6pC,EAAW4C,GAAUzsC,GACzB,OAAQ6pC,EAASJ,MACX+C,GACAH,IAAgBxC,EACxB,CCrBA,SAAS6C,KACP,OAAO,IACT,CCLA,SAASviF,KACP,IAAIqyC,EAASp4C,KAAKsuB,WACd8pB,GAAQA,EAAO7pB,YAAYvuB,KACjC,CCHA,SAASuoF,KACP,IAAIC,EAAQxoF,KAAKyoF,WAAU,GAAQrwC,EAASp4C,KAAKsuB,WACjD,OAAO8pB,EAASA,EAAO2sC,aAAayD,EAAOxoF,KAAK8nF,aAAeU,CACjE,CAEA,SAASE,KACP,IAAIF,EAAQxoF,KAAKyoF,WAAU,GAAOrwC,EAASp4C,KAAKsuB,WAChD,OAAO8pB,EAASA,EAAO2sC,aAAayD,EAAOxoF,KAAK8nF,aAAeU,CACjE,CCMA,SAASG,GAASlF,GAChB,OAAO,WACL,IAAItnD,EAAKn8B,KAAK4oF,KACd,GAAKzsD,EAAL,CACA,IAAK,IAAkCqlB,EAA9B13C,EAAI,EAAGtJ,GAAK,EAAGshD,EAAI3lB,EAAG77B,OAAWwJ,EAAIg4C,IAAKh4C,EAC7C03C,EAAIrlB,EAAGryB,GAAM25E,EAAS9qE,MAAQ6oC,EAAE7oC,OAAS8qE,EAAS9qE,MAAS6oC,EAAE5F,OAAS6nC,EAAS7nC,KAGjFzf,IAAK37B,GAAKghD,EAFVxhD,KAAKg2B,oBAAoBwrB,EAAE7oC,KAAM6oC,EAAEqnC,SAAUrnC,EAAE11B,WAK7CtrB,EAAG27B,EAAG77B,OAASE,SACTR,KAAK4oF,IATF,CAUjB,CACF,CAEA,SAASE,GAAMrF,EAAU3/E,EAAOgoB,GAC9B,OAAO,WACL,IAAoB01B,EAAhBrlB,EAAKn8B,KAAK4oF,KAASC,EAhC3B,SAAyBA,GACvB,OAAO,SAAS7tE,GACd6tE,EAASrmF,KAAKxC,KAAMgb,EAAOhb,KAAKskF,SAClC,CACF,CA4BsCyE,CAAgBjlF,GAClD,GAAIq4B,EAAI,IAAK,IAAIryB,EAAI,EAAGg4C,EAAI3lB,EAAG77B,OAAQwJ,EAAIg4C,IAAKh4C,EAC9C,IAAK03C,EAAIrlB,EAAGryB,IAAI6O,OAAS8qE,EAAS9qE,MAAQ6oC,EAAE5F,OAAS6nC,EAAS7nC,KAI5D,OAHA57C,KAAKg2B,oBAAoBwrB,EAAE7oC,KAAM6oC,EAAEqnC,SAAUrnC,EAAE11B,SAC/C9rB,KAAKo2B,iBAAiBorB,EAAE7oC,KAAM6oC,EAAEqnC,SAAWA,EAAUrnC,EAAE11B,QAAUA,QACjE01B,EAAE19C,MAAQA,GAId9D,KAAKo2B,iBAAiBqtD,EAAS9qE,KAAMkwE,EAAU/8D,GAC/C01B,EAAI,CAAC7oC,KAAM8qE,EAAS9qE,KAAMijC,KAAM6nC,EAAS7nC,KAAM93C,MAAOA,EAAO+kF,SAAUA,EAAU/8D,QAASA,GACrFqQ,EACAA,EAAG18B,KAAK+hD,GADJxhD,KAAK4oF,KAAO,CAACpnC,EAExB,CACF,CC5CA,SAAS9tB,GAAc1uB,EAAM2T,EAAMqwE,GACjC,IAAI1pE,EAAS,GAAYta,GACrBgW,EAAQsE,EAAOqU,YAEE,mBAAV3Y,EACTA,EAAQ,IAAIA,EAAMrC,EAAMqwE,IAExBhuE,EAAQsE,EAAO4L,SAAS+9D,YAAY,SAChCD,GAAQhuE,EAAMkuE,UAAUvwE,EAAMqwE,EAAOG,QAASH,EAAOI,YAAapuE,EAAM4Y,OAASo1D,EAAOp1D,QACvF5Y,EAAMkuE,UAAUvwE,GAAM,GAAO,IAGpC3T,EAAK0uB,cAAc1Y,EACrB,CAEA,SAASquE,GAAiB1wE,EAAMqwE,GAC9B,OAAO,WACL,OAAOt1D,GAAc1zB,KAAM2Y,EAAMqwE,EACnC,CACF,CAEA,SAASM,GAAiB3wE,EAAMqwE,GAC9B,OAAO,WACL,OAAOt1D,GAAc1zB,KAAM2Y,EAAMqwE,EAAO5oE,MAAMpgB,KAAMod,WACtD,CACF,CVdAypE,GAAUhhF,UAAY,CACpBC,IAAK,SAAS81C,GACJ57C,KAAK+mF,OAAO1vE,QAAQukC,GACpB,IACN57C,KAAK+mF,OAAOtnF,KAAKm8C,GACjB57C,KAAK8mF,MAAM17D,aAAa,QAASprB,KAAK+mF,OAAOxmF,KAAK,MAEtD,EACAwF,OAAQ,SAAS61C,GACf,IAAIp7C,EAAIR,KAAK+mF,OAAO1vE,QAAQukC,GACxBp7C,GAAK,IACPR,KAAK+mF,OAAO1uE,OAAO7X,EAAG,GACtBR,KAAK8mF,MAAM17D,aAAa,QAASprB,KAAK+mF,OAAOxmF,KAAK,MAEtD,EACA+F,SAAU,SAASs1C,GACjB,OAAO57C,KAAK+mF,OAAO1vE,QAAQukC,IAAS,CACtC,GWKK,IAAIz2C,GAAO,CAAC,MAEZ,SAASokF,GAAUlN,EAAQmN,GAChCxpF,KAAKypF,QAAUpN,EACfr8E,KAAK0pF,SAAWF,CAClB,CAEA,SAAS5G,KACP,OAAO,IAAI2G,GAAU,CAAC,CAACr+D,SAASqrD,kBAAmBpxE,GACrD,CAMAokF,GAAU1jF,UAAY+8E,GAAU/8E,UAAY,CAC1CoF,YAAas+E,GACbz9C,OCjDa,SAASA,GACA,mBAAXA,IAAuBA,EAAS0gB,GAAS1gB,IAEpD,IAAK,IAAIuwC,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQqpF,EAAY,IAAIpwE,MAAMuoC,GAAIh4C,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAC3F,IAAK,IAAiF9E,EAAM4kF,EAAnF/e,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAQupF,EAAWF,EAAU7/E,GAAK,IAAIyP,MAAM9V,GAAmBjD,EAAI,EAAGA,EAAIiD,IAAKjD,GAC9GwE,EAAO6lE,EAAMrqE,MAAQopF,EAAU99C,EAAOtpC,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,MAClE,aAAc7lE,IAAM4kF,EAAQtF,SAAWt/E,EAAKs/E,UAChDuF,EAASrpF,GAAKopF,GAKpB,OAAO,IAAIL,GAAUI,EAAW3pF,KAAK0pF,SACvC,EDqCEntD,UE3Ca,SAASuP,GACYA,EAAZ,mBAAXA,EAPb,SAAkBA,GAChB,OAAO,WACL,OAAO,GAAMA,EAAO1rB,MAAMpgB,KAAMod,WAClC,CACF,CAG6C0sE,CAASh+C,GACtCi+C,GAAYj+C,GAE1B,IAAK,IAAIuwC,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQqpF,EAAY,GAAIH,EAAU,GAAI1/E,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAC/F,IAAK,IAAyC9E,EAArC6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAcE,EAAI,EAAGA,EAAIiD,IAAKjD,GAC9DwE,EAAO6lE,EAAMrqE,MACfmpF,EAAUlqF,KAAKqsC,EAAOtpC,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,IACnD2e,EAAQ/pF,KAAKuF,IAKnB,OAAO,IAAIukF,GAAUI,EAAWH,EAClC,EF8BEQ,YvBxCa,SAASp+B,GACtB,OAAO5rD,KAAK8rC,OAAgB,MAAT8f,EAAgBk4B,GAXrC,SAAmBl4B,GACjB,OAAO,WACL,OAAOvlD,GAAK7D,KAAKxC,KAAKg7D,SAAUpP,EAClC,CACF,CAQQq+B,CAA2B,mBAAVr+B,EAAuBA,EAAQi4B,GAAaj4B,IACrE,EuBsCEs+B,etBzCa,SAASt+B,GACtB,OAAO5rD,KAAKu8B,UAAmB,MAATqvB,EAAgBoP,GAPxC,SAAwBpP,GACtB,OAAO,WACL,OAAO,GAAOppD,KAAKxC,KAAKg7D,SAAUpP,EACpC,CACF,CAIQu+B,CAAgC,mBAAVv+B,EAAuBA,EAAQi4B,GAAaj4B,IAC1E,EsBuCEt1B,OGrDa,SAASs1B,GACD,mBAAVA,IAAsBA,EAAQw+B,GAAQx+B,IAEjD,IAAK,IAAIywB,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQqpF,EAAY,IAAIpwE,MAAMuoC,GAAIh4C,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAC3F,IAAK,IAAuE9E,EAAnE6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAQupF,EAAWF,EAAU7/E,GAAK,GAAUtJ,EAAI,EAAGA,EAAIiD,IAAKjD,GAC3FwE,EAAO6lE,EAAMrqE,KAAOorD,EAAMppD,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,IAC1Dgf,EAASpqF,KAAKuF,GAKpB,OAAO,IAAIukF,GAAUI,EAAW3pF,KAAK0pF,SACvC,EH0CEjoF,KnBqBa,SAASqC,EAAOK,GAC7B,IAAKiZ,UAAU9c,OAAQ,OAAOiZ,MAAM+vB,KAAKtpC,KAAMikF,IAE/C,IuBjFsBh+E,EvBiFlBmtD,EAAOjvD,EAAMugF,GAAUH,GACvBiF,EAAUxpF,KAAK0pF,SACfrN,EAASr8E,KAAKypF,QAEG,mBAAV3lF,IuBrFWmC,EvBqF4BnC,EAAjBA,EuBpF1B,WACL,OAAOmC,CACT,GvBoFA,IAAK,IAAI67C,EAAIu6B,EAAO/7E,OAAQ8I,EAAS,IAAImQ,MAAMuoC,GAAItjB,EAAQ,IAAIjlB,MAAMuoC,GAAIihC,EAAO,IAAIxpE,MAAMuoC,GAAIh4C,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAAG,CAC/G,IAAIsuC,EAASoxC,EAAQ1/E,GACjB+gE,EAAQwR,EAAOvyE,GACf06E,EAAc3Z,EAAMvqE,OACpBmB,EAAOqjF,GAAUhhF,EAAMtB,KAAK41C,EAAQA,GAAUA,EAAOksC,SAAUx6E,EAAG0/E,IAClE/E,EAAahjF,EAAKnB,OAClB+pF,EAAa7rD,EAAM10B,GAAK,IAAIyP,MAAMkrE,GAClC6F,EAAclhF,EAAOU,GAAK,IAAIyP,MAAMkrE,GAGxCrxB,EAAKhb,EAAQyyB,EAAOwf,EAAYC,EAFhBvH,EAAKj5E,GAAK,IAAIyP,MAAMirE,GAEoB/iF,EAAM0C,GAK9D,IAAK,IAAoBs8E,EAAUp9E,EAA1Bm8E,EAAK,EAAGh/B,EAAK,EAAmBg/B,EAAKiF,IAAcjF,EAC1D,GAAIiB,EAAW4J,EAAW7K,GAAK,CAE7B,IADIA,GAAMh/B,IAAIA,EAAKg/B,EAAK,KACfn8E,EAAOinF,EAAY9pC,OAAUA,EAAKikC,IAC3ChE,EAAS2D,MAAQ/gF,GAAQ,IAC3B,CAEJ,CAKA,OAHA+F,EAAS,IAAImgF,GAAUngF,EAAQogF,IACxBe,OAAS/rD,EAChBp1B,EAAOohF,MAAQzH,EACR35E,CACT,EmBzDEo1B,MpBvDa,WACb,OAAO,IAAI+qD,GAAUvpF,KAAKuqF,QAAUvqF,KAAKypF,QAAQxpF,IAAIwqF,IAASzqF,KAAK0pF,SACrE,EoBsDE3G,KKxDa,WACb,OAAO,IAAIwG,GAAUvpF,KAAKwqF,OAASxqF,KAAKypF,QAAQxpF,IAAIwqF,IAASzqF,KAAK0pF,SACpE,ELuDEnpF,KM5Da,SAASmqF,EAASC,EAAUC,GACzC,IAAIpsD,EAAQx+B,KAAKw+B,QAASp1B,EAASpJ,KAAM+iF,EAAO/iF,KAAK+iF,OAYrD,MAXuB,mBAAZ2H,GACTlsD,EAAQksD,EAAQlsD,MACLA,EAAQA,EAAMokD,aAEzBpkD,EAAQA,EAAM5C,OAAO8uD,EAAU,IAEjB,MAAZC,IACFvhF,EAASuhF,EAASvhF,MACNA,EAASA,EAAOw5E,aAEhB,MAAVgI,EAAgB7H,EAAKh9E,SAAe6kF,EAAO7H,GACxCvkD,GAASp1B,EAASo1B,EAAMj1B,MAAMH,GAAQy5E,QAAUz5E,CACzD,EN+CEG,MO3Da,SAASmjC,GAGtB,IAFA,IAAIk2C,EAAYl2C,EAAQk2C,UAAYl2C,EAAQk2C,YAAcl2C,EAEjDm+C,EAAU7qF,KAAKypF,QAASqB,EAAUlI,EAAU6G,QAASsB,EAAKF,EAAQvqF,OAAQ+tE,EAAKyc,EAAQxqF,OAAQwhD,EAAIn4C,KAAKzC,IAAI6jF,EAAI1c,GAAK2c,EAAS,IAAIzxE,MAAMwxE,GAAKjhF,EAAI,EAAGA,EAAIg4C,IAAKh4C,EACpK,IAAK,IAAmG9E,EAA/FimF,EAASJ,EAAQ/gF,GAAIohF,EAASJ,EAAQhhF,GAAIrG,EAAIwnF,EAAO3qF,OAAQiJ,EAAQyhF,EAAOlhF,GAAK,IAAIyP,MAAM9V,GAAUjD,EAAI,EAAGA,EAAIiD,IAAKjD,GACxHwE,EAAOimF,EAAOzqF,IAAM0qF,EAAO1qF,MAC7B+I,EAAM/I,GAAKwE,GAKjB,KAAO8E,EAAIihF,IAAMjhF,EACfkhF,EAAOlhF,GAAK+gF,EAAQ/gF,GAGtB,OAAO,IAAIy/E,GAAUyB,EAAQhrF,KAAK0pF,SACpC,EP4CE9G,UAhBF,WACE,OAAO5iF,IACT,EAeE6iF,MQ/Da,WAEb,IAAK,IAAIxG,EAASr8E,KAAKypF,QAAS3/E,GAAK,EAAGg4C,EAAIu6B,EAAO/7E,SAAUwJ,EAAIg4C,GAC/D,IAAK,IAA8D98C,EAA1D6lE,EAAQwR,EAAOvyE,GAAItJ,EAAIqqE,EAAMvqE,OAAS,EAAG+C,EAAOwnE,EAAMrqE,KAAYA,GAAK,IAC1EwE,EAAO6lE,EAAMrqE,MACX6C,GAA6C,EAArC2B,EAAKmmF,wBAAwB9nF,IAAWA,EAAKirB,WAAWy2D,aAAa//E,EAAM3B,GACvFA,EAAO2B,GAKb,OAAOhF,IACT,ERoDEmI,KlB9Da,SAAS/B,GAGtB,SAASglF,EAAY7mF,EAAGC,GACtB,OAAOD,GAAKC,EAAI4B,EAAQ7B,EAAE+/E,SAAU9/E,EAAE8/E,WAAa//E,GAAKC,CAC1D,CAJK4B,IAASA,EAAU,IAMxB,IAAK,IAAIi2E,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQ+qF,EAAa,IAAI9xE,MAAMuoC,GAAIh4C,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAAG,CAC/F,IAAK,IAAmF9E,EAA/E6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAQgrF,EAAYD,EAAWvhF,GAAK,IAAIyP,MAAM9V,GAAUjD,EAAI,EAAGA,EAAIiD,IAAKjD,GACxGwE,EAAO6lE,EAAMrqE,MACf8qF,EAAU9qF,GAAKwE,GAGnBsmF,EAAUnjF,KAAKijF,EACjB,CAEA,OAAO,IAAI7B,GAAU8B,EAAYrrF,KAAK0pF,UAAU7G,OAClD,EkB8CErgF,KSjEa,WACb,IAAIqd,EAAWzC,UAAU,GAGzB,OAFAA,UAAU,GAAKpd,KACf6f,EAASO,MAAM,KAAMhD,WACdpd,IACT,ET6DEu4C,MUlEa,WACb,OAAOh/B,MAAM+vB,KAAKtpC,KACpB,EViEEgF,KWnEa,WAEb,IAAK,IAAIq3E,EAASr8E,KAAKypF,QAAS3/E,EAAI,EAAGg4C,EAAIu6B,EAAO/7E,OAAQwJ,EAAIg4C,IAAKh4C,EACjE,IAAK,IAAI+gE,EAAQwR,EAAOvyE,GAAItJ,EAAI,EAAGiD,EAAIonE,EAAMvqE,OAAQE,EAAIiD,IAAKjD,EAAG,CAC/D,IAAIwE,EAAO6lE,EAAMrqE,GACjB,GAAIwE,EAAM,OAAOA,CACnB,CAGF,OAAO,IACT,EX0DEkD,KYpEa,WACb,IAAIA,EAAO,EACX,IAAK,MAAMlD,KAAQhF,OAAQkI,EAC3B,OAAOA,CACT,EZiEE8jC,MarEa,WACb,OAAQhsC,KAAKgF,MACf,EboEEi+E,KctEa,SAASpjE,GAEtB,IAAK,IAAIw8D,EAASr8E,KAAKypF,QAAS3/E,EAAI,EAAGg4C,EAAIu6B,EAAO/7E,OAAQwJ,EAAIg4C,IAAKh4C,EACjE,IAAK,IAAgD9E,EAA5C6lE,EAAQwR,EAAOvyE,GAAItJ,EAAI,EAAGiD,EAAIonE,EAAMvqE,OAAcE,EAAIiD,IAAKjD,GAC9DwE,EAAO6lE,EAAMrqE,KAAIqf,EAASrd,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,GAI/D,OAAO7qE,IACT,Ed8DE67B,Kf7Ba,SAAS+f,EAAM93C,GAC5B,IAAI2hF,EAAW4C,GAAUzsC,GAEzB,GAAIx+B,UAAU9c,OAAS,EAAG,CACxB,IAAI0E,EAAOhF,KAAKgF,OAChB,OAAOygF,EAASJ,MACVrgF,EAAKumF,eAAe9F,EAASL,MAAOK,EAASJ,OAC7CrgF,EAAKs7B,aAAamlD,EAC1B,CAEA,OAAOzlF,KAAKijF,MAAe,MAATn/E,EACX2hF,EAASJ,MAAQG,GAAeF,GAAgC,mBAAVxhF,EACtD2hF,EAASJ,MAAQU,GAAiBD,GAClCL,EAASJ,MAAQO,GAAiBD,IAAgBF,EAAU3hF,GACrE,EegBE2nB,MblDa,SAASmwB,EAAM93C,EAAOsiF,GACnC,OAAOhpE,UAAU9c,OAAS,EACpBN,KAAKijF,MAAe,MAATn/E,EACLmiF,GAA+B,mBAAVniF,EACrBwiF,GACAH,IAAevqC,EAAM93C,EAAmB,MAAZsiF,EAAmB,GAAKA,IAC1DG,GAAWvmF,KAAKgF,OAAQ42C,EAChC,Ea4CE4vC,SZrDa,SAAS5vC,EAAM93C,GAC5B,OAAOsZ,UAAU9c,OAAS,EACpBN,KAAKijF,MAAe,MAATn/E,EACP0iF,GAAkC,mBAAV1iF,EACxB4iF,GACAD,IAAkB7qC,EAAM93C,IAC5B9D,KAAKgF,OAAO42C,EACpB,EY+CE6vC,QXba,SAAS7vC,EAAM93C,GAC5B,IAAImjF,EAAQN,GAAW/qC,EAAO,IAE9B,GAAIx+B,UAAU9c,OAAS,EAAG,CAExB,IADA,IAAIR,EAAO81B,GAAU51B,KAAKgF,QAASxE,GAAK,EAAGiD,EAAIwjF,EAAM3mF,SAC5CE,EAAIiD,OAAQ3D,EAAKwG,SAAS2gF,EAAMzmF,IAAK,OAAO,EACrD,OAAO,CACT,CAEA,OAAOR,KAAKijF,MAAuB,mBAAVn/E,EACnBujF,GAAkBvjF,EAClBqjF,GACAC,IAAcH,EAAOnjF,GAC7B,EWCEk4B,KV1Da,SAASl4B,GACtB,OAAOsZ,UAAU9c,OACXN,KAAKijF,KAAc,MAATn/E,EACNwjF,IAA+B,mBAAVxjF,EACrB0jF,GACAD,IAAczjF,IAClB9D,KAAKgF,OAAO2wB,WACpB,EUoDE+1D,KT3Da,SAAS5nF,GACtB,OAAOsZ,UAAU9c,OACXN,KAAKijF,KAAc,MAATn/E,EACN2jF,IAA+B,mBAAV3jF,EACrB8jF,GACAD,IAAc7jF,IAClB9D,KAAKgF,OAAO0iF,SACpB,ESqDEG,MRzEa,WACb,OAAO7nF,KAAKijF,KAAK4E,GACnB,EQwEEE,MP1Ea,WACb,OAAO/nF,KAAKijF,KAAK8E,GACnB,EOyEEnsD,Oe7Ea,SAASggB,GACtB,IAAI2F,EAAyB,mBAAT3F,EAAsBA,EAAO+vC,GAAQ/vC,GACzD,OAAO57C,KAAK8rC,QAAO,WACjB,OAAO9rC,KAAK2rB,YAAY41B,EAAOnhC,MAAMpgB,KAAMod,WAC7C,GACF,EfyEErY,OLzEa,SAAS62C,EAAMgwC,GAC5B,IAAIrqC,EAAyB,mBAAT3F,EAAsBA,EAAO+vC,GAAQ/vC,GACrD9P,EAAmB,MAAV8/C,EAAiBtD,GAAiC,mBAAXsD,EAAwBA,EAASp/B,GAASo/B,GAC9F,OAAO5rF,KAAK8rC,QAAO,WACjB,OAAO9rC,KAAK+kF,aAAaxjC,EAAOnhC,MAAMpgB,KAAMod,WAAY0uB,EAAO1rB,MAAMpgB,KAAMod,YAAc,KAC3F,GACF,EKoEErX,OJ5Ea,WACb,OAAO/F,KAAKijF,KAAKl9E,GACnB,EI2EEyiF,MHxEa,SAASqD,GACtB,OAAO7rF,KAAK8rC,OAAO+/C,EAAOnD,GAAsBH,GAClD,EGuEEtE,MgBnFa,SAASngF,GACtB,OAAOsZ,UAAU9c,OACXN,KAAKwrF,SAAS,WAAY1nF,GAC1B9D,KAAKgF,OAAOs/E,QACpB,EhBgFEnoD,GFpCa,SAASsnD,EAAU3/E,EAAOgoB,GACvC,IAA+CtrB,EAAyBsC,EAApEgpF,EA3CN,SAAwBA,GACtB,OAAOA,EAAUt+B,OAAOvoD,MAAM,SAAShF,KAAI,SAAS6C,GAClD,IAAI84C,EAAO,GAAIp7C,EAAIsC,EAAEuU,QAAQ,KAE7B,OADI7W,GAAK,IAAGo7C,EAAO94C,EAAEkU,MAAMxW,EAAI,GAAIsC,EAAIA,EAAEkU,MAAM,EAAGxW,IAC3C,CAACmY,KAAM7V,EAAG84C,KAAMA,EACzB,GACF,CAqCkB,CAAe6nC,EAAW,IAAQhgF,EAAIqoF,EAAUxrF,OAEhE,KAAI8c,UAAU9c,OAAS,GAAvB,CAaA,IADA67B,EAAKr4B,EAAQglF,GAAQH,GAChBnoF,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGR,KAAKijF,KAAK9mD,EAAG2vD,EAAUtrF,GAAIsD,EAAOgoB,IAC1D,OAAO9rB,IAJP,CATE,IAAIm8B,EAAKn8B,KAAKgF,OAAO4jF,KACrB,GAAIzsD,EAAI,IAAK,IAA0BqlB,EAAtB13C,EAAI,EAAGg4C,EAAI3lB,EAAG77B,OAAWwJ,EAAIg4C,IAAKh4C,EACjD,IAAKtJ,EAAI,EAAGghD,EAAIrlB,EAAGryB,GAAItJ,EAAIiD,IAAKjD,EAC9B,IAAKsC,EAAIgpF,EAAUtrF,IAAImY,OAAS6oC,EAAE7oC,MAAQ7V,EAAE84C,OAAS4F,EAAE5F,KACrD,OAAO4F,EAAE19C,KAUnB,EEmBEy/E,SDxDa,SAAS5qE,EAAMqwE,GAC5B,OAAOhpF,KAAKijF,MAAwB,mBAAX+F,EACnBM,GACAD,IAAkB1wE,EAAMqwE,GAChC,ECqDE,CAACzlF,OAAOC,UiBtFK,YACb,IAAK,IAAI64E,EAASr8E,KAAKypF,QAAS3/E,EAAI,EAAGg4C,EAAIu6B,EAAO/7E,OAAQwJ,EAAIg4C,IAAKh4C,EACjE,IAAK,IAAgD9E,EAA5C6lE,EAAQwR,EAAOvyE,GAAItJ,EAAI,EAAGiD,EAAIonE,EAAMvqE,OAAcE,EAAIiD,IAAKjD,GAC9DwE,EAAO6lE,EAAMrqE,YAAUwE,EAGjC,GjBmFA,YkBvFe,YAASwnD,GACtB,MAA2B,iBAAbA,EACR,IAAI+8B,GAAU,CAAC,CAACr+D,SAAS4C,cAAc0+B,KAAa,CAACthC,SAASqrD,kBAC9D,IAAIgT,GAAU,CAAC,CAAC/8B,IAAYrnD,GACpC,CCJO,MAAM4mF,GAAa,CAACC,SAAS,GACvBC,GAAoB,CAACC,SAAS,EAAMF,SAAS,GAEnD,SAASG,GAAcnxE,GAC5BA,EAAMoxE,0BACR,CAEe,YAASpxE,GACtBA,EAAMutB,iBACNvtB,EAAMoxE,0BACR,CCTe,YAASC,GACtB,IAAIlnF,EAAOknF,EAAKnhE,SAASqrD,gBACrBqM,EAAY,GAAOyJ,GAAMlwD,GAAG,iBAAkBmwD,GAASL,IACvD,kBAAmB9mF,EACrBy9E,EAAUzmD,GAAG,mBAAoBmwD,GAASL,KAE1C9mF,EAAKonF,WAAapnF,EAAKsmB,MAAM+gE,cAC7BrnF,EAAKsmB,MAAM+gE,cAAgB,OAE/B,CAEO,SAASC,GAAQJ,EAAMK,GAC5B,IAAIvnF,EAAOknF,EAAKnhE,SAASqrD,gBACrBqM,EAAY,GAAOyJ,GAAMlwD,GAAG,iBAAkB,MAC9CuwD,IACF9J,EAAUzmD,GAAG,aAAcmwD,GAASL,IACpClsE,YAAW,WAAa6iE,EAAUzmD,GAAG,aAAc,KAAO,GAAG,IAE3D,kBAAmBh3B,EACrBy9E,EAAUzmD,GAAG,mBAAoB,OAEjCh3B,EAAKsmB,MAAM+gE,cAAgBrnF,EAAKonF,kBACzBpnF,EAAKonF,WAEhB,CC3Be,YAASthF,EAAa2P,EAAS/U,GAC5CoF,EAAYpF,UAAY+U,EAAQ/U,UAAYA,EAC5CA,EAAUoF,YAAcA,CAC1B,CAEO,SAAS0hF,GAAOv0C,EAAQw0C,GAC7B,IAAI/mF,EAAYiD,OAAOy4C,OAAOnJ,EAAOvyC,WACrC,IAAK,IAAI1B,KAAOyoF,EAAY/mF,EAAU1B,GAAOyoF,EAAWzoF,GACxD,OAAO0B,CACT,CCPO,SAASgnF,KAAS,CAElB,IAAIC,GAAS,GACTC,GAAW,EAAID,GAEtBE,GAAM,sBACNC,GAAM,oDACNC,GAAM,qDACNC,GAAQ,qBACRC,GAAe,IAAIC,OAAO,UAAUL,MAAOA,MAAOA,UAClDM,GAAe,IAAID,OAAO,UAAUH,MAAOA,MAAOA,UAClDK,GAAgB,IAAIF,OAAO,WAAWL,MAAOA,MAAOA,MAAOC,UAC3DO,GAAgB,IAAIH,OAAO,WAAWH,MAAOA,MAAOA,MAAOD,UAC3DQ,GAAe,IAAIJ,OAAO,UAAUJ,MAAOC,MAAOA,UAClDQ,GAAgB,IAAIL,OAAO,WAAWJ,MAAOC,MAAOA,MAAOD,UAE3DU,GAAQ,CACV1sE,UAAW,SACXC,aAAc,SACdC,KAAM,MACNC,WAAY,QACZC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,MAAO,EACPC,eAAgB,SAChBC,KAAM,IACNC,WAAY,QACZC,MAAO,SACPC,UAAW,SACXC,UAAW,QACXC,WAAY,QACZC,UAAW,SACXC,MAAO,SACPC,eAAgB,QAChBC,SAAU,SACVC,QAAS,SACTC,KAAM,MACNC,SAAU,IACVC,SAAU,MACVC,cAAe,SACfC,SAAU,SACVC,UAAW,MACXkrE,SAAU,SACVjrE,UAAW,SACXC,YAAa,QACbC,eAAgB,QAChBC,WAAY,SACZC,WAAY,SACZC,QAAS,QACTC,WAAY,SACZC,aAAc,QACdC,cAAe,QACfC,cAAe,QACfyqE,cAAe,QACfxqE,cAAe,MACfC,WAAY,QACZC,SAAU,SACVC,YAAa,MACbC,QAAS,QACTqqE,QAAS,QACTpqE,WAAY,QACZE,UAAW,SACXC,YAAa,SACbC,YAAa,QACbC,QAAS,SACTC,UAAW,SACXC,WAAY,SACZC,KAAM,SACNC,UAAW,SACXC,KAAM,QACNC,MAAO,MACPC,YAAa,SACbypE,KAAM,QACNxpE,SAAU,SACVC,QAAS,SACTC,UAAW,SACXC,OAAQ,QACRC,MAAO,SACPC,MAAO,SACPC,SAAU,SACVC,cAAe,SACfC,UAAW,QACXC,aAAc,SACdC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,qBAAsB,SACtB4oE,UAAW,SACX1oE,WAAY,QACZD,UAAW,SACXE,UAAW,SACXC,YAAa,SACbC,cAAe,QACfC,aAAc,QACdE,eAAgB,QAChBqoE,eAAgB,QAChBpoE,eAAgB,SAChBC,YAAa,SACbC,KAAM,MACNC,UAAW,QACXC,MAAO,SACPC,QAAS,SACTC,OAAQ,QACRC,iBAAkB,QAClBC,WAAY,IACZC,aAAc,SACdC,aAAc,QACdC,eAAgB,QAChBC,gBAAiB,QACjBC,kBAAmB,MACnBC,gBAAiB,QACjBC,gBAAiB,SACjBC,aAAc,QACdC,UAAW,SACXC,UAAW,SACXC,SAAU,SACVC,YAAa,SACbC,KAAM,IACNC,QAAS,SACTC,MAAO,QACPC,UAAW,QACXC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,cAAe,SACfC,UAAW,SACXC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,WAAY,SACZC,OAAQ,QACRC,cAAe,QACfC,IAAK,SACLC,UAAW,SACXC,UAAW,QACXC,YAAa,QACbC,OAAQ,SACRC,WAAY,SACZC,SAAU,QACVC,SAAU,SACVC,OAAQ,SACRC,OAAQ,SACRC,QAAS,QACTC,UAAW,QACXC,UAAW,QACXilE,UAAW,QACXhlE,KAAM,SACNC,YAAa,MACbC,UAAW,QACXC,IAAK,SACLC,KAAM,MACNC,QAAS,SACTC,OAAQ,SACRC,UAAW,QACXC,OAAQ,SACRE,MAAO,SACPC,MAAO,SACPC,WAAY,SACZC,OAAQ,SACRC,YAAa,UAkBf,SAASmkE,KACP,OAAOnuF,KAAKouF,MAAMC,WACpB,CAUA,SAASC,KACP,OAAOtuF,KAAKouF,MAAMG,WACpB,CAEe,SAAS93D,GAAM6rD,GAC5B,IAAIxgC,EAAGl9C,EAEP,OADA09E,GAAUA,EAAS,IAAI90B,OAAOzsC,eACtB+gC,EAAIqrC,GAAM3iE,KAAK83D,KAAY19E,EAAIk9C,EAAE,GAAGxhD,OAAQwhD,EAAIz3B,SAASy3B,EAAE,GAAI,IAAW,IAANl9C,EAAU4pF,GAAK1sC,GAC/E,IAANl9C,EAAU,IAAI6pF,GAAK3sC,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,GAAiB,GAAJA,IAAY,EAAU,GAAJA,EAAU,GACzG,IAANl9C,EAAUupE,GAAKrsB,GAAK,GAAK,IAAMA,GAAK,GAAK,IAAMA,GAAK,EAAI,KAAW,IAAJA,GAAY,KACrE,IAANl9C,EAAUupE,GAAMrsB,GAAK,GAAK,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,IAAkB,GAAJA,IAAY,EAAU,GAAJA,GAAY,KAClJ,OACCA,EAAIsrC,GAAa5iE,KAAK83D,IAAW,IAAImM,GAAI3sC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAI,IAC3DA,EAAIwrC,GAAa9iE,KAAK83D,IAAW,IAAImM,GAAW,IAAP3sC,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAK,IAC/FA,EAAIyrC,GAAc/iE,KAAK83D,IAAWnU,GAAKrsB,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAC3DA,EAAI0rC,GAAchjE,KAAK83D,IAAWnU,GAAY,IAAPrsB,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAKA,EAAE,KAC/FA,EAAI2rC,GAAajjE,KAAK83D,IAAWoM,GAAK5sC,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAK,IACpEA,EAAI4rC,GAAcljE,KAAK83D,IAAWoM,GAAK5sC,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAKA,EAAE,IACxE6rC,GAAMrsC,eAAeghC,GAAUkM,GAAKb,GAAMrL,IAC/B,gBAAXA,EAA2B,IAAImM,GAAIngD,IAAKA,IAAKA,IAAK,GAClD,IACR,CAEA,SAASkgD,GAAK/qF,GACZ,OAAO,IAAIgrF,GAAIhrF,GAAK,GAAK,IAAMA,GAAK,EAAI,IAAU,IAAJA,EAAU,EAC1D,CAEA,SAAS0qE,GAAKtpE,EAAG9B,EAAGyB,EAAGD,GAErB,OADIA,GAAK,IAAGM,EAAI9B,EAAIyB,EAAI8pC,KACjB,IAAImgD,GAAI5pF,EAAG9B,EAAGyB,EAAGD,EAC1B,CAEO,SAASoqF,GAAWntC,GAEzB,OADMA,aAAaqrC,KAAQrrC,EAAI/qB,GAAM+qB,IAChCA,EAEE,IAAIitC,IADXjtC,EAAIA,EAAE4sC,OACWvpF,EAAG28C,EAAEz+C,EAAGy+C,EAAEh9C,EAAGg9C,EAAEuO,SAFjB,IAAI0+B,EAGrB,CAEO,SAAS,GAAI5pF,EAAG9B,EAAGyB,EAAGurD,GAC3B,OAA4B,IAArB3yC,UAAU9c,OAAequF,GAAW9pF,GAAK,IAAI4pF,GAAI5pF,EAAG9B,EAAGyB,EAAc,MAAXurD,EAAkB,EAAIA,EACzF,CAEO,SAAS0+B,GAAI5pF,EAAG9B,EAAGyB,EAAGurD,GAC3B/vD,KAAK6E,GAAKA,EACV7E,KAAK+C,GAAKA,EACV/C,KAAKwE,GAAKA,EACVxE,KAAK+vD,SAAWA,CAClB,CA8BA,SAAS6+B,KACP,MAAO,IAAIC,GAAI7uF,KAAK6E,KAAKgqF,GAAI7uF,KAAK+C,KAAK8rF,GAAI7uF,KAAKwE,IAClD,CAMA,SAASsqF,KACP,MAAMvqF,EAAIwqF,GAAO/uF,KAAK+vD,SACtB,MAAO,GAAS,IAANxrD,EAAU,OAAS,UAAUyqF,GAAOhvF,KAAK6E,OAAOmqF,GAAOhvF,KAAK+C,OAAOisF,GAAOhvF,KAAKwE,KAAW,IAAND,EAAU,IAAM,KAAKA,MACrH,CAEA,SAASwqF,GAAOh/B,GACd,OAAOrlC,MAAMqlC,GAAW,EAAIpmD,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAG6oD,GACtD,CAEA,SAASi/B,GAAOlrF,GACd,OAAO6F,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,MAAMrH,IAAU,GACxD,CAEA,SAAS+qF,GAAI/qF,GAEX,QADAA,EAAQkrF,GAAOlrF,IACC,GAAK,IAAM,IAAMA,EAAM/D,SAAS,GAClD,CAEA,SAAS2uF,GAAKziF,EAAG40C,EAAGj8C,EAAGL,GAIrB,OAHIA,GAAK,EAAG0H,EAAI40C,EAAIj8C,EAAI0pC,IACf1pC,GAAK,GAAKA,GAAK,EAAGqH,EAAI40C,EAAIvS,IAC1BuS,GAAK,IAAG50C,EAAIqiC,KACd,IAAI2gD,GAAIhjF,EAAG40C,EAAGj8C,EAAGL,EAC1B,CAEO,SAAS2qF,GAAW1tC,GACzB,GAAIA,aAAaytC,GAAK,OAAO,IAAIA,GAAIztC,EAAEv1C,EAAGu1C,EAAEX,EAAGW,EAAE58C,EAAG48C,EAAEuO,SAEtD,GADMvO,aAAaqrC,KAAQrrC,EAAI/qB,GAAM+qB,KAChCA,EAAG,OAAO,IAAIytC,GACnB,GAAIztC,aAAaytC,GAAK,OAAOztC,EAE7B,IAAI38C,GADJ28C,EAAIA,EAAE4sC,OACIvpF,EAAI,IACV9B,EAAIy+C,EAAEz+C,EAAI,IACVyB,EAAIg9C,EAAEh9C,EAAI,IACV0C,EAAMyC,KAAKzC,IAAIrC,EAAG9B,EAAGyB,GACrB4C,EAAMuC,KAAKvC,IAAIvC,EAAG9B,EAAGyB,GACrByH,EAAIqiC,IACJuS,EAAIz5C,EAAMF,EACVtC,GAAKwC,EAAMF,GAAO,EAUtB,OATI25C,GACa50C,EAAXpH,IAAMuC,GAAUrE,EAAIyB,GAAKq8C,EAAc,GAAT99C,EAAIyB,GAC7BzB,IAAMqE,GAAU5C,EAAIK,GAAKg8C,EAAI,GAC5Bh8C,EAAI9B,GAAK89C,EAAI,EACvBA,GAAKj8C,EAAI,GAAMwC,EAAMF,EAAM,EAAIE,EAAMF,EACrC+E,GAAK,IAEL40C,EAAIj8C,EAAI,GAAKA,EAAI,EAAI,EAAIqH,EAEpB,IAAIgjF,GAAIhjF,EAAG40C,EAAGj8C,EAAG48C,EAAEuO,QAC5B,CAEO,SAASo/B,GAAIljF,EAAG40C,EAAGj8C,EAAGmrD,GAC3B,OAA4B,IAArB3yC,UAAU9c,OAAe4uF,GAAWjjF,GAAK,IAAIgjF,GAAIhjF,EAAG40C,EAAGj8C,EAAc,MAAXmrD,EAAkB,EAAIA,EACzF,CAEA,SAASk/B,GAAIhjF,EAAG40C,EAAGj8C,EAAGmrD,GACpB/vD,KAAKiM,GAAKA,EACVjM,KAAK6gD,GAAKA,EACV7gD,KAAK4E,GAAKA,EACV5E,KAAK+vD,SAAWA,CAClB,CAsCA,SAASq/B,GAAOtrF,GAEd,OADAA,GAASA,GAAS,GAAK,KACR,EAAIA,EAAQ,IAAMA,CACnC,CAEA,SAASurF,GAAOvrF,GACd,OAAO6F,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGpD,GAAS,GAC1C,CAGA,SAASwrF,GAAQrjF,EAAGoiE,EAAIC,GACtB,OAGY,KAHJriE,EAAI,GAAKoiE,GAAMC,EAAKD,GAAMpiE,EAAI,GAChCA,EAAI,IAAMqiE,EACVriE,EAAI,IAAMoiE,GAAMC,EAAKD,IAAO,IAAMpiE,GAAK,GACvCoiE,EACR,CC3YO,SAASkhB,GAAM5gF,EAAI6gF,EAAIp5E,EAAIC,EAAIo5E,GACpC,IAAItuC,EAAKxyC,EAAKA,EAAI+gF,EAAKvuC,EAAKxyC,EAC5B,QAAS,EAAI,EAAIA,EAAK,EAAIwyC,EAAKuuC,GAAMF,GAC9B,EAAI,EAAIruC,EAAK,EAAIuuC,GAAMt5E,GACvB,EAAI,EAAIzH,EAAK,EAAIwyC,EAAK,EAAIuuC,GAAMr5E,EACjCq5E,EAAKD,GAAM,CACnB,CAEe,YAASxoF,GACtB,IAAIxD,EAAIwD,EAAO3G,OAAS,EACxB,OAAO,SAASwC,GACd,IAAItC,EAAIsC,GAAK,EAAKA,EAAI,EAAKA,GAAK,GAAKA,EAAI,EAAGW,EAAI,GAAKkG,KAAKC,MAAM9G,EAAIW,GAChE2S,EAAKnP,EAAOzG,GACZ6V,EAAKpP,EAAOzG,EAAI,GAChBgvF,EAAKhvF,EAAI,EAAIyG,EAAOzG,EAAI,GAAK,EAAI4V,EAAKC,EACtCo5E,EAAKjvF,EAAIiD,EAAI,EAAIwD,EAAOzG,EAAI,GAAK,EAAI6V,EAAKD,EAC9C,OAAOm5E,IAAOzsF,EAAItC,EAAIiD,GAAKA,EAAG+rF,EAAIp5E,EAAIC,EAAIo5E,EAC5C,CACF,CChBe,YAASxoF,GACtB,IAAIxD,EAAIwD,EAAO3G,OACf,OAAO,SAASwC,GACd,IAAItC,EAAImJ,KAAKC,QAAQ9G,GAAK,GAAK,IAAMA,EAAIA,GAAKW,GAC1C+rF,EAAKvoF,GAAQzG,EAAIiD,EAAI,GAAKA,GAC1B2S,EAAKnP,EAAOzG,EAAIiD,GAChB4S,EAAKpP,GAAQzG,EAAI,GAAKiD,GACtBgsF,EAAKxoF,GAAQzG,EAAI,GAAKiD,GAC1B,OAAO8rF,IAAOzsF,EAAItC,EAAIiD,GAAKA,EAAG+rF,EAAIp5E,EAAIC,EAAIo5E,EAC5C,CACF,CF6JA,GAAO5C,GAAOp2D,GAAO,CACnB,IAAAksD,CAAKl4D,GACH,OAAO3hB,OAAO2yC,OAAO,IAAIz7C,KAAKiL,YAAajL,KAAMyqB,EACnD,EACA,WAAAklE,GACE,OAAO3vF,KAAKouF,MAAMuB,aACpB,EACAd,IAAKV,GACLE,UAAWF,GACXyB,WAUF,WACE,OAAO5vF,KAAKouF,MAAMwB,YACpB,EAXEC,UAaF,WACE,OAAOX,GAAWlvF,MAAM6vF,WAC1B,EAdEtB,UAAWD,GACXvuF,SAAUuuF,KAiEZ,GAAOG,GAAK,GAAK9B,GAAOE,GAAO,CAC7B,QAAAE,CAAS/rF,GAEP,OADAA,EAAS,MAALA,EAAY+rF,GAAWpjF,KAAKkB,IAAIkiF,GAAU/rF,GACvC,IAAIytF,GAAIzuF,KAAK6E,EAAI7D,EAAGhB,KAAK+C,EAAI/B,EAAGhB,KAAKwE,EAAIxD,EAAGhB,KAAK+vD,QAC1D,EACA,MAAA+8B,CAAO9rF,GAEL,OADAA,EAAS,MAALA,EAAY8rF,GAASnjF,KAAKkB,IAAIiiF,GAAQ9rF,GACnC,IAAIytF,GAAIzuF,KAAK6E,EAAI7D,EAAGhB,KAAK+C,EAAI/B,EAAGhB,KAAKwE,EAAIxD,EAAGhB,KAAK+vD,QAC1D,EACA,GAAAq+B,GACE,OAAOpuF,IACT,EACA,KAAA8vF,GACE,OAAO,IAAIrB,GAAIO,GAAOhvF,KAAK6E,GAAImqF,GAAOhvF,KAAK+C,GAAIisF,GAAOhvF,KAAKwE,GAAIuqF,GAAO/uF,KAAK+vD,SAC7E,EACA,WAAA4/B,GACE,OAAS,IAAO3vF,KAAK6E,GAAK7E,KAAK6E,EAAI,QAC1B,IAAO7E,KAAK+C,GAAK/C,KAAK+C,EAAI,QAC1B,IAAO/C,KAAKwE,GAAKxE,KAAKwE,EAAI,OAC3B,GAAKxE,KAAK+vD,SAAW/vD,KAAK+vD,SAAW,CAC/C,EACA8+B,IAAKD,GACLP,UAAWO,GACXgB,WASF,WACE,MAAO,IAAIf,GAAI7uF,KAAK6E,KAAKgqF,GAAI7uF,KAAK+C,KAAK8rF,GAAI7uF,KAAKwE,KAAKqqF,GAA+C,KAA1CnkE,MAAM1qB,KAAK+vD,SAAW,EAAI/vD,KAAK+vD,WAC3F,EAVEw+B,UAAWO,GACX/uF,SAAU+uF,MAyEZ,GAAOG,GAAKE,GAAKxC,GAAOE,GAAO,CAC7B,QAAAE,CAAS/rF,GAEP,OADAA,EAAS,MAALA,EAAY+rF,GAAWpjF,KAAKkB,IAAIkiF,GAAU/rF,GACvC,IAAIiuF,GAAIjvF,KAAKiM,EAAGjM,KAAK6gD,EAAG7gD,KAAK4E,EAAI5D,EAAGhB,KAAK+vD,QAClD,EACA,MAAA+8B,CAAO9rF,GAEL,OADAA,EAAS,MAALA,EAAY8rF,GAASnjF,KAAKkB,IAAIiiF,GAAQ9rF,GACnC,IAAIiuF,GAAIjvF,KAAKiM,EAAGjM,KAAK6gD,EAAG7gD,KAAK4E,EAAI5D,EAAGhB,KAAK+vD,QAClD,EACA,GAAAq+B,GACE,IAAIniF,EAAIjM,KAAKiM,EAAI,IAAqB,KAAdjM,KAAKiM,EAAI,GAC7B40C,EAAIn2B,MAAMze,IAAMye,MAAM1qB,KAAK6gD,GAAK,EAAI7gD,KAAK6gD,EACzCj8C,EAAI5E,KAAK4E,EACT0pE,EAAK1pE,GAAKA,EAAI,GAAMA,EAAI,EAAIA,GAAKi8C,EACjCwtB,EAAK,EAAIzpE,EAAI0pE,EACjB,OAAO,IAAImgB,GACTa,GAAQrjF,GAAK,IAAMA,EAAI,IAAMA,EAAI,IAAKoiE,EAAIC,GAC1CghB,GAAQrjF,EAAGoiE,EAAIC,GACfghB,GAAQrjF,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAKoiE,EAAIC,GACzCtuE,KAAK+vD,QAET,EACA,KAAA+/B,GACE,OAAO,IAAIb,GAAIG,GAAOpvF,KAAKiM,GAAIojF,GAAOrvF,KAAK6gD,GAAIwuC,GAAOrvF,KAAK4E,GAAImqF,GAAO/uF,KAAK+vD,SAC7E,EACA,WAAA4/B,GACE,OAAQ,GAAK3vF,KAAK6gD,GAAK7gD,KAAK6gD,GAAK,GAAKn2B,MAAM1qB,KAAK6gD,KACzC,GAAK7gD,KAAK4E,GAAK5E,KAAK4E,GAAK,GACzB,GAAK5E,KAAK+vD,SAAW/vD,KAAK+vD,SAAW,CAC/C,EACA,SAAA8/B,GACE,MAAMtrF,EAAIwqF,GAAO/uF,KAAK+vD,SACtB,MAAO,GAAS,IAANxrD,EAAU,OAAS,UAAU6qF,GAAOpvF,KAAKiM,OAAwB,IAAjBojF,GAAOrvF,KAAK6gD,QAA+B,IAAjBwuC,GAAOrvF,KAAK4E,MAAkB,IAANL,EAAU,IAAM,KAAKA,MACnI,KGzXF,SAAe0B,GAAK,IAAMA,ECE1B,SAAS8pF,GAAOxrF,EAAGiD,GACjB,OAAO,SAAS1E,GACd,OAAOyB,EAAIzB,EAAI0E,CACjB,CACF,CAQO,SAASwoF,GAAIzrF,EAAGC,GACrB,IAAIgD,EAAIhD,EAAID,EACZ,OAAOiD,EAAIuoF,GAAOxrF,EAAGiD,EAAI,KAAOA,GAAK,IAAMA,EAAI,IAAMmC,KAAKwB,MAAM3D,EAAI,KAAOA,GAAK,GAASkjB,MAAMnmB,GAAKC,EAAID,EAC1G,CAQe,SAAS0rF,GAAQ1rF,EAAGC,GACjC,IAAIgD,EAAIhD,EAAID,EACZ,OAAOiD,EAAIuoF,GAAOxrF,EAAGiD,GAAK,GAASkjB,MAAMnmB,GAAKC,EAAID,EACpD,CCvBA,SAAe,SAAU2rF,EAASrtF,GAChC,IAAI4zB,EDaC,SAAe5zB,GACpB,OAAoB,IAAZA,GAAKA,GAAWotF,GAAU,SAAS1rF,EAAGC,GAC5C,OAAOA,EAAID,EAbf,SAAqBA,EAAGC,EAAG3B,GACzB,OAAO0B,EAAIoF,KAAKkB,IAAItG,EAAG1B,GAAI2B,EAAImF,KAAKkB,IAAIrG,EAAG3B,GAAK0B,EAAG1B,EAAI,EAAIA,EAAG,SAASC,GACrE,OAAO6G,KAAKkB,IAAItG,EAAIzB,EAAI0B,EAAG3B,EAC7B,CACF,CASmBstF,CAAY5rF,EAAGC,EAAG3B,GAAK,GAAS6nB,MAAMnmB,GAAKC,EAAID,EAChE,CACF,CCjBc6rF,CAAMvtF,GAElB,SAASurF,EAAI5kF,EAAOC,GAClB,IAAI5E,EAAI4xB,GAAOjtB,EAAQ,GAASA,IAAQ3E,GAAI4E,EAAM,GAASA,IAAM5E,GAC7D9B,EAAI0zB,EAAMjtB,EAAMzG,EAAG0G,EAAI1G,GACvByB,EAAIiyB,EAAMjtB,EAAMhF,EAAGiF,EAAIjF,GACvBurD,EAAUkgC,GAAQzmF,EAAMumD,QAAStmD,EAAIsmD,SACzC,OAAO,SAASjtD,GAKd,OAJA0G,EAAM3E,EAAIA,EAAE/B,GACZ0G,EAAMzG,EAAIA,EAAED,GACZ0G,EAAMhF,EAAIA,EAAE1B,GACZ0G,EAAMumD,QAAUA,EAAQjtD,GACjB0G,EAAQ,EACjB,CACF,CAIA,OAFA4kF,EAAIgC,MAAQF,EAEL9B,CACR,CApBD,CAoBG,GAEH,SAASiC,GAAUC,GACjB,OAAO,SAASC,GACd,IAII/vF,EAAGi2B,EAJHhzB,EAAI8sF,EAAOjwF,OACXuE,EAAI,IAAI0U,MAAM9V,GACdV,EAAI,IAAIwW,MAAM9V,GACde,EAAI,IAAI+U,MAAM9V,GAElB,IAAKjD,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBi2B,EAAQ,GAAS85D,EAAO/vF,IACxBqE,EAAErE,GAAKi2B,EAAM5xB,GAAK,EAClB9B,EAAEvC,GAAKi2B,EAAM1zB,GAAK,EAClByB,EAAEhE,GAAKi2B,EAAMjyB,GAAK,EAMpB,OAJAK,EAAIyrF,EAAOzrF,GACX9B,EAAIutF,EAAOvtF,GACXyB,EAAI8rF,EAAO9rF,GACXiyB,EAAMs5B,QAAU,EACT,SAASjtD,GAId,OAHA2zB,EAAM5xB,EAAIA,EAAE/B,GACZ2zB,EAAM1zB,EAAIA,EAAED,GACZ2zB,EAAMjyB,EAAIA,EAAE1B,GACL2zB,EAAQ,EACjB,CACF,CACF,CAEO,IAAI+5D,GAAWH,GAAU,IACrBI,GAAiBJ,GAAUK,ICtDvB,YAASnsF,EAAGC,GACpBA,IAAGA,EAAI,IACZ,IAEIhE,EAFAiD,EAAIc,EAAIoF,KAAKzC,IAAI1C,EAAElE,OAAQiE,EAAEjE,QAAU,EACvC2N,EAAIzJ,EAAEwS,QAEV,OAAO,SAASlU,GACd,IAAKtC,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGyN,EAAEzN,GAAK+D,EAAE/D,IAAM,EAAIsC,GAAK0B,EAAEhE,GAAKsC,EACvD,OAAOmL,CACT,CACF,CAEO,SAAS0iF,GAAc1qF,GAC5B,OAAO2qF,YAAYC,OAAO5qF,MAAQA,aAAa6qF,SACjD,CCVe,YAASvsF,EAAGC,GACzB,OAAQmsF,GAAcnsF,GAAKusF,GAAcC,IAAczsF,EAAGC,EAC5D,CAEO,SAASwsF,GAAazsF,EAAGC,GAC9B,IAIIhE,EAJAquE,EAAKrqE,EAAIA,EAAElE,OAAS,EACpBwuE,EAAKvqE,EAAIoF,KAAKzC,IAAI2nE,EAAItqE,EAAEjE,QAAU,EAClC2F,EAAI,IAAIsT,MAAMu1D,GACd7gE,EAAI,IAAIsL,MAAMs1D,GAGlB,IAAKruE,EAAI,EAAGA,EAAIsuE,IAAMtuE,EAAGyF,EAAEzF,GAAKsD,GAAMS,EAAE/D,GAAIgE,EAAEhE,IAC9C,KAAOA,EAAIquE,IAAMruE,EAAGyN,EAAEzN,GAAKgE,EAAEhE,GAE7B,OAAO,SAASsC,GACd,IAAKtC,EAAI,EAAGA,EAAIsuE,IAAMtuE,EAAGyN,EAAEzN,GAAKyF,EAAEzF,GAAGsC,GACrC,OAAOmL,CACT,CACF,CCrBe,YAAS1J,EAAGC,GACzB,IAAIgD,EAAI,IAAIlF,KACZ,OAAOiC,GAAKA,EAAGC,GAAKA,EAAG,SAAS1B,GAC9B,OAAO0E,EAAEypF,QAAQ1sF,GAAK,EAAIzB,GAAK0B,EAAI1B,GAAI0E,CACzC,CACF,CCLe,YAASjD,EAAGC,GACzB,OAAOD,GAAKA,EAAGC,GAAKA,EAAG,SAAS1B,GAC9B,OAAOyB,GAAK,EAAIzB,GAAK0B,EAAI1B,CAC3B,CACF,CCFe,YAASyB,EAAGC,GACzB,IAEIxD,EAFAR,EAAI,CAAC,EACLyN,EAAI,CAAC,EAMT,IAAKjN,KAHK,OAANuD,GAA2B,iBAANA,IAAgBA,EAAI,CAAC,GACpC,OAANC,GAA2B,iBAANA,IAAgBA,EAAI,CAAC,GAEpCA,EACJxD,KAAKuD,EACP/D,EAAEQ,GAAK8C,GAAMS,EAAEvD,GAAIwD,EAAExD,IAErBiN,EAAEjN,GAAKwD,EAAExD,GAIb,OAAO,SAAS8B,GACd,IAAK9B,KAAKR,EAAGyN,EAAEjN,GAAKR,EAAEQ,GAAG8B,GACzB,OAAOmL,CACT,CACF,CCpBA,IAAIijF,GAAM,8CACNC,GAAM,IAAI9D,OAAO6D,GAAIn8D,OAAQ,KAclB,YAASxwB,EAAGC,GACzB,IACI4sF,EACAC,EACAC,EAHAC,EAAKL,GAAIluB,UAAYmuB,GAAInuB,UAAY,EAIrCxiE,GAAK,EACLqgD,EAAI,GACJlB,EAAI,GAMR,IAHAp7C,GAAQ,GAAIC,GAAQ,IAGZ4sF,EAAKF,GAAI1mE,KAAKjmB,MACd8sF,EAAKF,GAAI3mE,KAAKhmB,MACf8sF,EAAKD,EAAG9pF,OAASgqF,IACpBD,EAAK9sF,EAAEwS,MAAMu6E,EAAID,GACbzwC,EAAErgD,GAAIqgD,EAAErgD,IAAM8wF,EACbzwC,IAAIrgD,GAAK8wF,IAEXF,EAAKA,EAAG,OAASC,EAAKA,EAAG,IACxBxwC,EAAErgD,GAAIqgD,EAAErgD,IAAM6wF,EACbxwC,IAAIrgD,GAAK6wF,GAEdxwC,IAAIrgD,GAAK,KACTm/C,EAAElgD,KAAK,CAACe,EAAGA,EAAGyF,EAAG,GAAOmrF,EAAIC,MAE9BE,EAAKJ,GAAInuB,UAYX,OARIuuB,EAAK/sF,EAAElE,SACTgxF,EAAK9sF,EAAEwS,MAAMu6E,GACT1wC,EAAErgD,GAAIqgD,EAAErgD,IAAM8wF,EACbzwC,IAAIrgD,GAAK8wF,GAKTzwC,EAAEvgD,OAAS,EAAKq/C,EAAE,GA7C3B,SAAan7C,GACX,OAAO,SAAS1B,GACd,OAAO0B,EAAE1B,GAAK,EAChB,CACF,CA0CQ0uF,CAAI7xC,EAAE,GAAG15C,GApDjB,SAAczB,GACZ,OAAO,WACL,OAAOA,CACT,CACF,CAiDQ,CAAKA,IACJA,EAAIm7C,EAAEr/C,OAAQ,SAASwC,GACtB,IAAK,IAAW0+C,EAAPhhD,EAAI,EAAMA,EAAIgE,IAAKhE,EAAGqgD,GAAGW,EAAI7B,EAAEn/C,IAAIA,GAAKghD,EAAEv7C,EAAEnD,GACrD,OAAO+9C,EAAEtgD,KAAK,GAChB,EACR,CCrDe,YAASgE,EAAGC,GACzB,IAAkByJ,EAAdnL,SAAW0B,EACf,OAAY,MAALA,GAAmB,YAAN1B,EAAkB,GAAS0B,IAClC,WAAN1B,EAAiB,GACZ,WAANA,GAAmBmL,EAAIwoB,GAAMjyB,KAAOA,EAAIyJ,EAAGmgF,IAAOxH,GAClDpiF,aAAaiyB,GAAQ23D,GACrB5pF,aAAalC,KAAOmvF,GACpBd,GAAcnsF,GAAKusF,GACnBx3E,MAAMC,QAAQhV,GAAKwsF,GACE,mBAAdxsF,EAAE+2E,SAAgD,mBAAf/2E,EAAEzE,UAA2B2qB,MAAMlmB,GAAK8b,GAClF,IAAQ/b,EAAGC,EACnB,CCrBe,YAASwW,GACtB,IAAI02E,EACJ,KAAOA,EAAc12E,EAAM02E,aAAa12E,EAAQ02E,EAChD,OAAO12E,CACT,CCFe,YAASA,EAAOhW,GAG7B,GAFAgW,EAAQ02E,GAAY12E,QACPla,IAATkE,IAAoBA,EAAOgW,EAAM22E,eACjC3sF,EAAM,CACR,IAAI8hC,EAAM9hC,EAAK4sF,iBAAmB5sF,EAClC,GAAI8hC,EAAI+qD,eAAgB,CACtB,IAAI3nF,EAAQ48B,EAAI+qD,iBAGhB,OAFA3nF,EAAMjE,EAAI+U,EAAMi4C,QAAS/oD,EAAMrH,EAAImY,EAAMk4C,QAElC,EADPhpD,EAAQA,EAAM4nF,gBAAgB9sF,EAAK+sF,eAAeC,YACpC/rF,EAAGiE,EAAMrH,EACzB,CACA,GAAImC,EAAKitF,sBAAuB,CAC9B,IAAIrnB,EAAO5lE,EAAKitF,wBAChB,MAAO,CAACj3E,EAAMi4C,QAAU2X,EAAKxmE,KAAOY,EAAKktF,WAAYl3E,EAAMk4C,QAAU0X,EAAKunB,IAAMntF,EAAKotF,UACvF,CACF,CACA,MAAO,CAACp3E,EAAMytB,MAAOztB,EAAM0tB,MAC7B,CCnBA,IAII2pD,GACAC,GALA,GAAQ,EACRC,GAAU,EACV3gE,GAAW,EAIX4gE,GAAY,EACZC,GAAW,EACXC,GAAY,EACZC,GAA+B,iBAAhB1wF,aAA4BA,YAAYC,IAAMD,YAAcK,KAC3EswF,GAA6B,iBAAXtzE,QAAuBA,OAAOiB,sBAAwBjB,OAAOiB,sBAAsB6yC,KAAK9zC,QAAU,SAAS1c,GAAKmd,WAAWnd,EAAG,GAAK,EAElJ,SAASV,KACd,OAAOuwF,KAAaG,GAASC,IAAWJ,GAAWE,GAAMzwF,MAAQwwF,GACnE,CAEA,SAASG,KACPJ,GAAW,CACb,CAEO,SAASK,KACd9yF,KAAK+yF,MACL/yF,KAAKgzF,MACLhzF,KAAKokF,MAAQ,IACf,CAyBO,SAAS6O,GAAMpzE,EAAU6S,EAAOhB,GACrC,IAAI5uB,EAAI,IAAIgwF,GAEZ,OADAhwF,EAAEowF,QAAQrzE,EAAU6S,EAAOhB,GACpB5uB,CACT,CAEO,SAASqwF,KACdjxF,OACE,GAEF,IADA,IAAkB8B,EAAdlB,EAAIuvF,GACDvvF,IACAkB,EAAIyuF,GAAW3vF,EAAEkwF,QAAU,GAAGlwF,EAAEiwF,MAAMvwF,UAAK1B,EAAWkD,GAC3DlB,EAAIA,EAAEshF,QAEN,EACJ,CAEA,SAASgP,KACPX,IAAYD,GAAYG,GAAMzwF,OAASwwF,GACvC,GAAQH,GAAU,EAClB,IACEY,IACF,CAAE,QACA,GAAQ,EAWZ,WAEE,IADA,IAAIvkF,EAAmBuyC,EAAfxyC,EAAK0jF,GAAc3gE,EAAO2nB,IAC3B1qC,GACDA,EAAGokF,OACDrhE,EAAO/iB,EAAGqkF,QAAOthE,EAAO/iB,EAAGqkF,OAC/BpkF,EAAKD,EAAIA,EAAKA,EAAGy1E,QAEjBjjC,EAAKxyC,EAAGy1E,MAAOz1E,EAAGy1E,MAAQ,KAC1Bz1E,EAAKC,EAAKA,EAAGw1E,MAAQjjC,EAAKkxC,GAAWlxC,GAGzCmxC,GAAW1jF,EACXmkB,GAAMrB,EACR,CAvBI2hE,GACAZ,GAAW,CACb,CACF,CAEA,SAASa,KACP,IAAIpxF,EAAMywF,GAAMzwF,MAAOwwB,EAAQxwB,EAAMswF,GACjC9/D,EA7EU,MA6ESggE,IAAahgE,EAAO8/D,GAAYtwF,EACzD,CAiBA,SAAS6wB,GAAMrB,GACT,KACA6gE,KAASA,GAAUtgE,aAAasgE,KACxB7gE,EAAO+gE,GACP,IACN/gE,EAAO2nB,MAAUk5C,GAAUxyE,WAAWqzE,GAAM1hE,EAAOihE,GAAMzwF,MAAQwwF,KACjE9gE,KAAUA,GAAWM,cAAcN,OAElCA,KAAU4gE,GAAYG,GAAMzwF,MAAO0vB,GAAWvC,YAAYikE,GAvGnD,MAwGZ,GAAQ,EAAGV,GAASQ,KAExB,CC3Ge,YAASvzE,EAAU6S,EAAOhB,GACvC,IAAI5uB,EAAI,IAAIgwF,GAMZ,OALApgE,EAAiB,MAATA,EAAgB,GAAKA,EAC7B5vB,EAAEowF,SAAQ3gE,IACRzvB,EAAEqvB,OACFtS,EAAS0S,EAAUG,EAAM,GACxBA,EAAOhB,GACH5uB,CACT,CDgBAgwF,GAAMjtF,UAAYotF,GAAMptF,UAAY,CAClCoF,YAAa6nF,GACbI,QAAS,SAASrzE,EAAU6S,EAAOhB,GACjC,GAAwB,mBAAb7R,EAAyB,MAAM,IAAIjc,UAAU,8BACxD8tB,GAAgB,MAARA,EAAexvB,MAASwvB,IAAkB,MAATgB,EAAgB,GAAKA,GACzD1yB,KAAKokF,OAASkO,KAAatyF,OAC1BsyF,GAAUA,GAASlO,MAAQpkF,KAC1BqyF,GAAWryF,KAChBsyF,GAAWtyF,MAEbA,KAAK+yF,MAAQlzE,EACb7f,KAAKgzF,MAAQthE,EACbqB,IACF,EACAZ,KAAM,WACAnyB,KAAK+yF,QACP/yF,KAAK+yF,MAAQ,KACb/yF,KAAKgzF,MAAQ35C,IACbtmB,KAEJ,GE3CF,IAAIwgE,GAAU,GAAS,QAAS,MAAO,SAAU,aAC7CC,GAAa,GAGNC,GAAY,EACZC,GAAW,EAGXC,GAAS,EACTC,GAAQ,EAEJ,YAAS5uF,EAAM42C,EAAMj8C,EAAI4H,EAAOsjE,EAAOgpB,GACpD,IAAIC,EAAY9uF,EAAK+uF,aACrB,GAAKD,GACA,GAAIn0F,KAAMm0F,EAAW,YADV9uF,EAAK+uF,aAAe,CAAC,GAmCvC,SAAgB/uF,EAAMrF,EAAI89B,GACxB,IACIu2D,EADAF,EAAY9uF,EAAK+uF,aAgBrB,SAASvqF,EAAM+oB,GACb,IAAI/xB,EAAGsJ,EAAGrG,EAAG+9C,EAGb,GAAI/jB,EAAKw2D,QAAUR,GAAW,OAAOthE,IAErC,IAAK3xB,KAAKszF,EAER,IADAtyC,EAAIsyC,EAAUtzF,IACRo7C,OAASne,EAAKme,KAApB,CAKA,GAxEe,IAwEX4F,EAAEyyC,MAAmB,OAAO,GAAQzqF,GAvEzB,IA0EXg4C,EAAEyyC,OACJzyC,EAAEyyC,MAAQL,GACVpyC,EAAEyxC,MAAM9gE,OACRqvB,EAAErlB,GAAG35B,KAAK,YAAawC,EAAMA,EAAKs/E,SAAU9iC,EAAEj6C,MAAOi6C,EAAEqpB,cAChDipB,EAAUtzF,KAITA,EAAIb,IACZ6hD,EAAEyyC,MAAQL,GACVpyC,EAAEyxC,MAAM9gE,OACRqvB,EAAErlB,GAAG35B,KAAK,SAAUwC,EAAMA,EAAKs/E,SAAU9iC,EAAEj6C,MAAOi6C,EAAEqpB,cAC7CipB,EAAUtzF,GApBe,CAwCpC,GAZA,IAAQ,WA/FS,IAgGXi9B,EAAKw2D,QACPx2D,EAAKw2D,MAhGQ,EAiGbx2D,EAAKw1D,MAAMC,QAAQj8B,EAAMx5B,EAAK/K,MAAO+K,EAAK/L,MAC1CulC,EAAK1kC,GAET,IAIAkL,EAAKw2D,MAAQP,GACbj2D,EAAKtB,GAAG35B,KAAK,QAASwC,EAAMA,EAAKs/E,SAAU7mD,EAAKl2B,MAAOk2B,EAAKotC,OACxDptC,EAAKw2D,QAAUP,GAAnB,CAKA,IAJAj2D,EAAKw2D,MA5GY,EA+GjBD,EAAQ,IAAIz6E,MAAM9V,EAAIg6B,EAAKu2D,MAAM1zF,QAC5BE,EAAI,EAAGsJ,GAAK,EAAGtJ,EAAIiD,IAAKjD,GACvBghD,EAAI/jB,EAAKu2D,MAAMxzF,GAAGsD,MAAMtB,KAAKwC,EAAMA,EAAKs/E,SAAU7mD,EAAKl2B,MAAOk2B,EAAKotC,UACrEmpB,IAAQlqF,GAAK03C,GAGjBwyC,EAAM1zF,OAASwJ,EAAI,CAVgB,CAWrC,CAEA,SAASmtD,EAAK1kC,GAKZ,IAJA,IAAIzvB,EAAIyvB,EAAUkL,EAAKuL,SAAWvL,EAAKy2D,KAAK1xF,KAAK,KAAM+vB,EAAUkL,EAAKuL,WAAavL,EAAKw1D,MAAMC,QAAQ/gE,GAAOsL,EAAKw2D,MAAQN,GAAQ,GAC9HnzF,GAAK,EACLiD,EAAIuwF,EAAM1zF,SAELE,EAAIiD,GACXuwF,EAAMxzF,GAAGgC,KAAKwC,EAAMlC,GAIlB26B,EAAKw2D,QAAUN,KACjBl2D,EAAKtB,GAAG35B,KAAK,MAAOwC,EAAMA,EAAKs/E,SAAU7mD,EAAKl2B,MAAOk2B,EAAKotC,OAC1D14C,IAEJ,CAEA,SAASA,IAIP,IAAK,IAAI3xB,KAHTi9B,EAAKw2D,MAAQL,GACbn2D,EAAKw1D,MAAM9gE,cACJ2hE,EAAUn0F,GACHm0F,EAAW,cAClB9uF,EAAK+uF,YACd,CA9FAD,EAAUn0F,GAAM89B,EAChBA,EAAKw1D,MAAQA,IAEb,SAAkB1gE,GAChBkL,EAAKw2D,MAAQR,GACbh2D,EAAKw1D,MAAMC,QAAQ1pF,EAAOi0B,EAAK/K,MAAO+K,EAAK/L,MAGvC+L,EAAK/K,OAASH,GAAS/oB,EAAM+oB,EAAUkL,EAAK/K,MAClD,GAR6B,EAAG+K,EAAK/L,KA8FvC,CAtIE6vB,CAAOv8C,EAAMrF,EAAI,CACfi8C,KAAMA,EACNr0C,MAAOA,EACPsjE,MAAOA,EACP1uC,GAAIo3D,GACJS,MAAOR,GACP9hE,KAAMmiE,EAAOniE,KACbgB,MAAOmhE,EAAOnhE,MACdsW,SAAU6qD,EAAO7qD,SACjBkrD,KAAML,EAAOK,KACbjB,MAAO,KACPgB,MAvBiB,GAyBrB,CAEO,SAASljE,GAAK/rB,EAAMrF,GACzB,IAAIuwB,EAAW,GAAIlrB,EAAMrF,GACzB,GAAIuwB,EAAS+jE,MA7BM,EA6BW,MAAM,IAAI5iF,MAAM,+BAC9C,OAAO6e,CACT,CAEO,SAAS,GAAIlrB,EAAMrF,GACxB,IAAIuwB,EAAW,GAAIlrB,EAAMrF,GACzB,GAAIuwB,EAAS+jE,MAhCM,EAgCW,MAAM,IAAI5iF,MAAM,6BAC9C,OAAO6e,CACT,CAEO,SAAS,GAAIlrB,EAAMrF,GACxB,IAAIuwB,EAAWlrB,EAAK+uF,aACpB,IAAK7jE,KAAcA,EAAWA,EAASvwB,IAAM,MAAM,IAAI0R,MAAM,wBAC7D,OAAO6e,CACT,CC/Ce,YAASlrB,EAAM42C,GAC5B,IACI1rB,EACAikE,EAEA3zF,EAJAszF,EAAY9uF,EAAK+uF,aAGjB/nD,GAAQ,EAGZ,GAAK8nD,EAAL,CAIA,IAAKtzF,KAFLo7C,EAAe,MAARA,EAAe,KAAOA,EAAO,GAE1Bk4C,GACH5jE,EAAW4jE,EAAUtzF,IAAIo7C,OAASA,GACvCu4C,EAASjkE,EAAS+jE,MAAQP,IAAYxjE,EAAS+jE,MAAQN,GACvDzjE,EAAS+jE,MAAQL,GACjB1jE,EAAS+iE,MAAM9gE,OACfjC,EAASiM,GAAG35B,KAAK2xF,EAAS,YAAc,SAAUnvF,EAAMA,EAAKs/E,SAAUp0D,EAAS3oB,MAAO2oB,EAAS26C,cACzFipB,EAAUtzF,IAL8BwrC,GAAQ,EAQrDA,UAAchnC,EAAK+uF,YAbD,CAcxB,CCvBA,ICEIK,GDFAC,GAAU,IAAM1qF,KAAK2qC,GAEd,GAAW,CACpBzL,WAAY,EACZC,WAAY,EACZ0c,OAAQ,EACRE,MAAO,EACP3V,OAAQ,EACRC,OAAQ,GAGK,YAASzrC,EAAGC,EAAGyJ,EAAGzG,EAAGxD,EAAGpB,GACrC,IAAImtC,EAAQC,EAAQ0V,EAKpB,OAJI3V,EAASpmC,KAAKoG,KAAKxL,EAAIA,EAAIC,EAAIA,MAAID,GAAKwrC,EAAQvrC,GAAKurC,IACrD2V,EAAQnhD,EAAI0J,EAAIzJ,EAAIgD,KAAGyG,GAAK1J,EAAImhD,EAAOl+C,GAAKhD,EAAIkhD,IAChD1V,EAASrmC,KAAKoG,KAAK9B,EAAIA,EAAIzG,EAAIA,MAAIyG,GAAK+hC,EAAQxoC,GAAKwoC,EAAQ0V,GAAS1V,GACtEzrC,EAAIiD,EAAIhD,EAAIyJ,IAAG1J,GAAKA,EAAGC,GAAKA,EAAGkhD,GAASA,EAAO3V,GAAUA,GACtD,CACLlH,WAAY7kC,EACZ8kC,WAAYlmC,EACZ4iD,OAAQ77C,KAAK+lC,MAAMlrC,EAAGD,GAAK8vF,GAC3B3uC,MAAO/7C,KAAK06C,KAAKqB,GAAS2uC,GAC1BtkD,OAAQA,EACRC,OAAQA,EAEZ,CEtBA,SAASskD,GAAqB5xD,EAAO6xD,EAASC,EAASC,GAErD,SAAS1wF,EAAI88C,GACX,OAAOA,EAAEvgD,OAASugD,EAAE98C,MAAQ,IAAM,EACpC,CAqCA,OAAO,SAASQ,EAAGC,GACjB,IAAIq8C,EAAI,GACJlB,EAAI,GAOR,OANAp7C,EAAIm+B,EAAMn+B,GAAIC,EAAIk+B,EAAMl+B,GAtC1B,SAAmBkwF,EAAIC,EAAIC,EAAIC,EAAIh0C,EAAGlB,GACpC,GAAI+0C,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAIr0F,EAAIqgD,EAAEphD,KAAK,aAAc,KAAM80F,EAAS,KAAMC,GAClD70C,EAAElgD,KAAK,CAACe,EAAGA,EAAI,EAAGyF,EAAG,GAAOyuF,EAAIE,IAAM,CAACp0F,EAAGA,EAAI,EAAGyF,EAAG,GAAO0uF,EAAIE,IACjE,MAAWD,GAAMC,IACfh0C,EAAEphD,KAAK,aAAem1F,EAAKL,EAAUM,EAAKL,EAE9C,CAgCEvrD,CAAU1kC,EAAEskC,WAAYtkC,EAAEukC,WAAYtkC,EAAEqkC,WAAYrkC,EAAEskC,WAAY+X,EAAGlB,GA9BvE,SAAgBp7C,EAAGC,EAAGq8C,EAAGlB,GACnBp7C,IAAMC,GACJD,EAAIC,EAAI,IAAKA,GAAK,IAAcA,EAAID,EAAI,MAAKA,GAAK,KACtDo7C,EAAElgD,KAAK,CAACe,EAAGqgD,EAAEphD,KAAKsE,EAAI88C,GAAK,UAAW,KAAM4zC,GAAY,EAAGxuF,EAAG,GAAO1B,EAAGC,MAC/DA,GACTq8C,EAAEphD,KAAKsE,EAAI88C,GAAK,UAAYr8C,EAAIiwF,EAEpC,CAwBEjvC,CAAOjhD,EAAEihD,OAAQhhD,EAAEghD,OAAQ3E,EAAGlB,GAtBhC,SAAep7C,EAAGC,EAAGq8C,EAAGlB,GAClBp7C,IAAMC,EACRm7C,EAAElgD,KAAK,CAACe,EAAGqgD,EAAEphD,KAAKsE,EAAI88C,GAAK,SAAU,KAAM4zC,GAAY,EAAGxuF,EAAG,GAAO1B,EAAGC,KAC9DA,GACTq8C,EAAEphD,KAAKsE,EAAI88C,GAAK,SAAWr8C,EAAIiwF,EAEnC,CAiBE/uC,CAAMnhD,EAAEmhD,MAAOlhD,EAAEkhD,MAAO7E,EAAGlB,GAf7B,SAAe+0C,EAAIC,EAAIC,EAAIC,EAAIh0C,EAAGlB,GAChC,GAAI+0C,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAIr0F,EAAIqgD,EAAEphD,KAAKsE,EAAI88C,GAAK,SAAU,KAAM,IAAK,KAAM,KACnDlB,EAAElgD,KAAK,CAACe,EAAGA,EAAI,EAAGyF,EAAG,GAAOyuF,EAAIE,IAAM,CAACp0F,EAAGA,EAAI,EAAGyF,EAAG,GAAO0uF,EAAIE,IACjE,MAAkB,IAAPD,GAAmB,IAAPC,GACrBh0C,EAAEphD,KAAKsE,EAAI88C,GAAK,SAAW+zC,EAAK,IAAMC,EAAK,IAE/C,CASE77D,CAAMz0B,EAAEwrC,OAAQxrC,EAAEyrC,OAAQxrC,EAAEurC,OAAQvrC,EAAEwrC,OAAQ6Q,EAAGlB,GACjDp7C,EAAIC,EAAI,KACD,SAAS1B,GAEd,IADA,IAA0B0+C,EAAtBhhD,GAAK,EAAGiD,EAAIk8C,EAAEr/C,SACTE,EAAIiD,GAAGo9C,GAAGW,EAAI7B,EAAEn/C,IAAIA,GAAKghD,EAAEv7C,EAAEnD,GACtC,OAAO+9C,EAAEtgD,KAAK,GAChB,CACF,CACF,CAEO,IAAIu0F,GAA0BR,IDxD9B,SAAkBxwF,GACvB,MAAMg+C,EAAI,IAA0B,mBAAdizC,UAA2BA,UAAYC,iBAAiBlxF,EAAQ,IACtF,OAAOg+C,EAAEmzC,WAAa,GAAWC,GAAUpzC,EAAEv9C,EAAGu9C,EAAEt9C,EAAGs9C,EAAE7zC,EAAG6zC,EAAEt6C,EAAGs6C,EAAE99C,EAAG89C,EAAEl/C,EACxE,GCqDoE,OAAQ,MAAO,QACxEuyF,GAA0Bb,IDpD9B,SAAkBxwF,GACvB,OAAa,MAATA,EAAsB,IACrBswF,KAASA,GAAUlpE,SAASi9D,gBAAgB,6BAA8B,MAC/EiM,GAAQhpE,aAAa,YAAatnB,IAC5BA,EAAQswF,GAAQ1sD,UAAU0tD,QAAQC,eAEjCH,IADPpxF,EAAQA,EAAM2hD,QACSlhD,EAAGT,EAAMU,EAAGV,EAAMmK,EAAGnK,EAAM0D,EAAG1D,EAAME,EAAGF,EAAMlB,GAFL,GAGjE,GC6CoE,KAAM,IAAK,KC5D/E,SAAS0yF,GAAY31F,EAAIi8C,GACvB,IAAI25C,EAAQC,EACZ,OAAO,WACL,IAAItlE,EAAW,GAAIlwB,KAAML,GACrBq0F,EAAQ9jE,EAAS8jE,MAKrB,GAAIA,IAAUuB,EAEZ,IAAK,IAAI/0F,EAAI,EAAGiD,GADhB+xF,EAASD,EAASvB,GACS1zF,OAAQE,EAAIiD,IAAKjD,EAC1C,GAAIg1F,EAAOh1F,GAAGo7C,OAASA,EAAM,EAC3B45C,EAASA,EAAOx+E,SACTqB,OAAO7X,EAAG,GACjB,KACF,CAIJ0vB,EAAS8jE,MAAQwB,CACnB,CACF,CAEA,SAASC,GAAc91F,EAAIi8C,EAAM93C,GAC/B,IAAIyxF,EAAQC,EACZ,GAAqB,mBAAV1xF,EAAsB,MAAM,IAAIuN,MAC3C,OAAO,WACL,IAAI6e,EAAW,GAAIlwB,KAAML,GACrBq0F,EAAQ9jE,EAAS8jE,MAKrB,GAAIA,IAAUuB,EAAQ,CACpBC,GAAUD,EAASvB,GAAOh9E,QAC1B,IAAK,IAAIlU,EAAI,CAAC84C,KAAMA,EAAM93C,MAAOA,GAAQtD,EAAI,EAAGiD,EAAI+xF,EAAOl1F,OAAQE,EAAIiD,IAAKjD,EAC1E,GAAIg1F,EAAOh1F,GAAGo7C,OAASA,EAAM,CAC3B45C,EAAOh1F,GAAKsC,EACZ,KACF,CAEEtC,IAAMiD,GAAG+xF,EAAO/1F,KAAKqD,EAC3B,CAEAotB,EAAS8jE,MAAQwB,CACnB,CACF,CAoBO,SAASE,GAAW3sD,EAAY6S,EAAM93C,GAC3C,IAAInE,EAAKopC,EAAW4sD,IAOpB,OALA5sD,EAAWk6C,MAAK,WACd,IAAI/yD,EAAW,GAAIlwB,KAAML,IACxBuwB,EAASpsB,QAAUosB,EAASpsB,MAAQ,CAAC,IAAI83C,GAAQ93C,EAAMsc,MAAMpgB,KAAMod,UACtE,IAEO,SAASpY,GACd,OAAO,GAAIA,EAAMrF,GAAImE,MAAM83C,EAC7B,CACF,CC7Ee,YAASr3C,EAAGC,GACzB,IAAIyJ,EACJ,OAAqB,iBAANzJ,EAAiB,GAC1BA,aAAaiyB,GAAQ,IACpBxoB,EAAIwoB,GAAMjyB,KAAOA,EAAIyJ,EAAG,IACzB,IAAmB1J,EAAGC,EAC9B,CCJA,SAAS,GAAWo3C,GAClB,OAAO,WACL57C,KAAKulF,gBAAgB3pC,EACvB,CACF,CAEA,SAAS,GAAa6pC,GACpB,OAAO,WACLzlF,KAAK0lF,kBAAkBD,EAASL,MAAOK,EAASJ,MAClD,CACF,CAEA,SAAS,GAAazpC,EAAMg6C,EAAaC,GACvC,IAAIC,EAEAC,EADAC,EAAUH,EAAS,GAEvB,OAAO,WACL,IAAII,EAAUj2F,KAAKsgC,aAAasb,GAChC,OAAOq6C,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeH,EAAYE,EAAWG,EAASJ,EACvD,CACF,CAEA,SAAS,GAAepQ,EAAUmQ,EAAaC,GAC7C,IAAIC,EAEAC,EADAC,EAAUH,EAAS,GAEvB,OAAO,WACL,IAAII,EAAUj2F,KAAKurF,eAAe9F,EAASL,MAAOK,EAASJ,OAC3D,OAAO4Q,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeH,EAAYE,EAAWG,EAASJ,EACvD,CACF,CAEA,SAAS,GAAaj6C,EAAMg6C,EAAa9xF,GACvC,IAAIgyF,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAA+BD,EAAtBH,EAAS/xF,EAAM9D,MAC5B,GAAc,MAAV61F,EAGJ,OAFAI,EAAUj2F,KAAKsgC,aAAasb,OAC5Bo6C,EAAUH,EAAS,IACU,KACvBI,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeH,EAAYE,EAAWG,EAASJ,IAL1C71F,KAAKulF,gBAAgB3pC,EAMvD,CACF,CAEA,SAAS,GAAe6pC,EAAUmQ,EAAa9xF,GAC7C,IAAIgyF,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAA+BD,EAAtBH,EAAS/xF,EAAM9D,MAC5B,GAAc,MAAV61F,EAGJ,OAFAI,EAAUj2F,KAAKurF,eAAe9F,EAASL,MAAOK,EAASJ,WACvD2Q,EAAUH,EAAS,IACU,KACvBI,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeH,EAAYE,EAAWG,EAASJ,IAL1C71F,KAAK0lF,kBAAkBD,EAASL,MAAOK,EAASJ,MAMlF,CACF,CCvDA,SAAS8Q,GAAY1Q,EAAU3hF,GAC7B,IAAI8K,EAAI4wE,EACR,SAASwU,IACP,IAAIxzF,EAAIsD,EAAMsc,MAAMpgB,KAAMod,WAE1B,OADI5c,IAAMg/E,IAAI5wE,GAAM4wE,EAAKh/E,IAV7B,SAA2BilF,EAAUjlF,GACnC,OAAO,SAASsC,GACd9C,KAAK6lF,eAAeJ,EAASL,MAAOK,EAASJ,MAAO7kF,EAAEgC,KAAKxC,KAAM8C,GACnE,CACF,CAMmCszF,CAAkB3Q,EAAUjlF,IACpDoO,CACT,CAEA,OADAolF,EAAMqC,OAASvyF,EACRkwF,CACT,CAEA,SAASsC,GAAU16C,EAAM93C,GACvB,IAAI8K,EAAI4wE,EACR,SAASwU,IACP,IAAIxzF,EAAIsD,EAAMsc,MAAMpgB,KAAMod,WAE1B,OADI5c,IAAMg/E,IAAI5wE,GAAM4wE,EAAKh/E,IA3B7B,SAAyBo7C,EAAMp7C,GAC7B,OAAO,SAASsC,GACd9C,KAAKorB,aAAawwB,EAAMp7C,EAAEgC,KAAKxC,KAAM8C,GACvC,CACF,CAuBmCyzF,CAAgB36C,EAAMp7C,IAC9CoO,CACT,CAEA,OADAolF,EAAMqC,OAASvyF,EACRkwF,CACT,CChCA,SAASwC,GAAc72F,EAAImE,GACzB,OAAO,WACLitB,GAAK/wB,KAAML,GAAI+yB,OAAS5uB,EAAMsc,MAAMpgB,KAAMod,UAC5C,CACF,CAEA,SAASq5E,GAAc92F,EAAImE,GACzB,OAAOA,GAASA,EAAO,WACrBitB,GAAK/wB,KAAML,GAAI+yB,MAAQ5uB,CACzB,CACF,CCVA,SAAS4yF,GAAiB/2F,EAAImE,GAC5B,OAAO,WACL,GAAI9D,KAAML,GAAIqpC,UAAYllC,EAAMsc,MAAMpgB,KAAMod,UAC9C,CACF,CAEA,SAASu5E,GAAiBh3F,EAAImE,GAC5B,OAAOA,GAASA,EAAO,WACrB,GAAI9D,KAAML,GAAIqpC,SAAWllC,CAC3B,CACF,CCVA,IAAI,GAAY,GAAU+B,UAAUoF,YCiBpC,SAAS,GAAY2wC,GACnB,OAAO,WACL57C,KAAKyrB,MAAMy6D,eAAetqC,EAC5B,CACF,CCDA,IAAIj8C,GAAK,EAEF,SAASi3F,GAAWva,EAAQmN,EAAS5tC,EAAMj8C,GAChDK,KAAKypF,QAAUpN,EACfr8E,KAAK0pF,SAAWF,EAChBxpF,KAAK62F,MAAQj7C,EACb57C,KAAK21F,IAAMh2F,CACb,CAEe,SAAS,GAAWi8C,GACjC,OAAO,KAAY7S,WAAW6S,EAChC,CAEO,SAASk7C,KACd,QAASn3F,EACX,CAEA,IAAIo3F,GAAsB,GAAUlxF,UCvC7B,SAASmxF,GAAQl0F,GACtB,OAAOA,EAAIA,EAAIA,CACjB,CAEO,SAASm0F,GAASn0F,GACvB,QAASA,EAAIA,EAAIA,EAAI,CACvB,CAEO,SAASo0F,GAAWp0F,GACzB,QAASA,GAAK,IAAM,EAAIA,EAAIA,EAAIA,GAAKA,GAAK,GAAKA,EAAIA,EAAI,GAAK,CAC9D,CD+BA8zF,GAAW/wF,UAAY,GAAWA,UAAY,CAC5CoF,YAAa2rF,GACb9qD,OEvCa,SAASA,GACtB,IAAI8P,EAAO57C,KAAK62F,MACZl3F,EAAKK,KAAK21F,IAEQ,mBAAX7pD,IAAuBA,EAAS0gB,GAAS1gB,IAEpD,IAAK,IAAIuwC,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQqpF,EAAY,IAAIpwE,MAAMuoC,GAAIh4C,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAC3F,IAAK,IAAiF9E,EAAM4kF,EAAnF/e,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAQupF,EAAWF,EAAU7/E,GAAK,IAAIyP,MAAM9V,GAAmBjD,EAAI,EAAGA,EAAIiD,IAAKjD,GAC9GwE,EAAO6lE,EAAMrqE,MAAQopF,EAAU99C,EAAOtpC,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,MAClE,aAAc7lE,IAAM4kF,EAAQtF,SAAWt/E,EAAKs/E,UAChDuF,EAASrpF,GAAKopF,EACd15D,GAAS25D,EAASrpF,GAAIo7C,EAAMj8C,EAAIa,EAAGqpF,EAAU,GAAI7kF,EAAMrF,KAK7D,OAAO,IAAIi3F,GAAWjN,EAAW3pF,KAAK0pF,SAAU9tC,EAAMj8C,EACxD,EFuBE48B,UGxCa,SAASuP,GACtB,IAAI8P,EAAO57C,KAAK62F,MACZl3F,EAAKK,KAAK21F,IAEQ,mBAAX7pD,IAAuBA,EAASi+C,GAAYj+C,IAEvD,IAAK,IAAIuwC,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQqpF,EAAY,GAAIH,EAAU,GAAI1/E,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAC/F,IAAK,IAAyC9E,EAArC6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAcE,EAAI,EAAGA,EAAIiD,IAAKjD,EAClE,GAAIwE,EAAO6lE,EAAMrqE,GAAI,CACnB,IAAK,IAA2Dy6D,EAAvDD,EAAWlvB,EAAOtpC,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,GAAerN,EAAU,GAAIx4D,EAAMrF,GAAKqB,EAAI,EAAG4D,EAAIo2D,EAAS16D,OAAQU,EAAI4D,IAAK5D,GAC/Hi6D,EAAQD,EAASh6D,KACnBkvB,GAAS+qC,EAAOrf,EAAMj8C,EAAIqB,EAAGg6D,EAAUwC,GAG3CmsB,EAAUlqF,KAAKu7D,GACfwuB,EAAQ/pF,KAAKuF,EACf,CAIJ,OAAO,IAAI4xF,GAAWjN,EAAWH,EAAS5tC,EAAMj8C,EAClD,EHoBEqqF,YAAa+M,GAAoB/M,YACjCE,eAAgB6M,GAAoB7M,eACpC5zD,OI5Ca,SAASs1B,GACD,mBAAVA,IAAsBA,EAAQw+B,GAAQx+B,IAEjD,IAAK,IAAIywB,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQqpF,EAAY,IAAIpwE,MAAMuoC,GAAIh4C,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAC3F,IAAK,IAAuE9E,EAAnE6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAQupF,EAAWF,EAAU7/E,GAAK,GAAUtJ,EAAI,EAAGA,EAAIiD,IAAKjD,GAC3FwE,EAAO6lE,EAAMrqE,KAAOorD,EAAMppD,KAAKwC,EAAMA,EAAKs/E,SAAU9jF,EAAGqqE,IAC1Dgf,EAASpqF,KAAKuF,GAKpB,OAAO,IAAI4xF,GAAWjN,EAAW3pF,KAAK0pF,SAAU1pF,KAAK62F,MAAO72F,KAAK21F,IACnE,EJiCEpsF,MK9Ca,SAASw/B,GACtB,GAAIA,EAAW4sD,MAAQ31F,KAAK21F,IAAK,MAAM,IAAItkF,MAE3C,IAAK,IAAIw5E,EAAU7qF,KAAKypF,QAASqB,EAAU/hD,EAAW0gD,QAASsB,EAAKF,EAAQvqF,OAAQ+tE,EAAKyc,EAAQxqF,OAAQwhD,EAAIn4C,KAAKzC,IAAI6jF,EAAI1c,GAAK2c,EAAS,IAAIzxE,MAAMwxE,GAAKjhF,EAAI,EAAGA,EAAIg4C,IAAKh4C,EACrK,IAAK,IAAmG9E,EAA/FimF,EAASJ,EAAQ/gF,GAAIohF,EAASJ,EAAQhhF,GAAIrG,EAAIwnF,EAAO3qF,OAAQiJ,EAAQyhF,EAAOlhF,GAAK,IAAIyP,MAAM9V,GAAUjD,EAAI,EAAGA,EAAIiD,IAAKjD,GACxHwE,EAAOimF,EAAOzqF,IAAM0qF,EAAO1qF,MAC7B+I,EAAM/I,GAAKwE,GAKjB,KAAO8E,EAAIihF,IAAMjhF,EACfkhF,EAAOlhF,GAAK+gF,EAAQ/gF,GAGtB,OAAO,IAAI8sF,GAAW5L,EAAQhrF,KAAK0pF,SAAU1pF,KAAK62F,MAAO72F,KAAK21F,IAChE,EL+BE/S,UF7Ca,WACb,OAAO,IAAI,GAAU5iF,KAAKypF,QAASzpF,KAAK0pF,SAC1C,EE4CE3gD,WM/Ca,WAKb,IAJA,IAAI6S,EAAO57C,KAAK62F,MACZM,EAAMn3F,KAAK21F,IACXyB,EAAMN,KAEDza,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQwJ,EAAI,EAAGA,EAAIg4C,IAAKh4C,EACjE,IAAK,IAAyC9E,EAArC6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAcE,EAAI,EAAGA,EAAIiD,IAAKjD,EAClE,GAAIwE,EAAO6lE,EAAMrqE,GAAI,CACnB,IAAIg9D,EAAU,GAAIx4D,EAAMmyF,GACxBjnE,GAASlrB,EAAM42C,EAAMw7C,EAAK52F,EAAGqqE,EAAO,CAClCn5C,KAAM8rC,EAAQ9rC,KAAO8rC,EAAQ9qC,MAAQ8qC,EAAQx0B,SAC7CtW,MAAO,EACPsW,SAAUw0B,EAAQx0B,SAClBkrD,KAAM12B,EAAQ02B,MAElB,CAIJ,OAAO,IAAI0C,GAAWva,EAAQr8E,KAAK0pF,SAAU9tC,EAAMw7C,EACrD,EN4BE50F,KAAMu0F,GAAoBv0F,KAC1B+1C,MAAOw+C,GAAoBx+C,MAC3BvzC,KAAM+xF,GAAoB/xF,KAC1BkD,KAAM6uF,GAAoB7uF,KAC1B8jC,MAAO+qD,GAAoB/qD,MAC3Bi3C,KAAM8T,GAAoB9T,KAC1B9mD,GOhCa,SAASyf,EAAMitC,GAC5B,IAAIlpF,EAAKK,KAAK21F,IAEd,OAAOv4E,UAAU9c,OAAS,EACpB,GAAIN,KAAKgF,OAAQrF,GAAIw8B,GAAGA,GAAGyf,GAC3B57C,KAAKijF,KApBb,SAAoBtjF,EAAIi8C,EAAMitC,GAC5B,IAAIwO,EAAKC,EAAKC,EAThB,SAAe37C,GACb,OAAQA,EAAO,IAAI4R,OAAOvoD,MAAM,SAAS6sC,OAAM,SAAShvC,GACtD,IAAItC,EAAIsC,EAAEuU,QAAQ,KAElB,OADI7W,GAAK,IAAGsC,EAAIA,EAAEkU,MAAM,EAAGxW,KACnBsC,GAAW,UAANA,CACf,GACF,CAGsB0G,CAAMoyC,GAAQ7qB,GAAO,GACzC,OAAO,WACL,IAAIb,EAAWqnE,EAAIv3F,KAAML,GACrBw8B,EAAKjM,EAASiM,GAKdA,IAAOk7D,IAAMC,GAAOD,EAAMl7D,GAAIwmD,QAAQxmD,GAAGyf,EAAMitC,GAEnD34D,EAASiM,GAAKm7D,CAChB,CACF,CAOkBE,CAAW73F,EAAIi8C,EAAMitC,GACvC,EP2BEhtD,KNaa,SAAS+f,EAAM93C,GAC5B,IAAI2hF,EAAW4C,GAAUzsC,GAAOp7C,EAAiB,cAAbilF,EAA2B,GAAuBmQ,GACtF,OAAO51F,KAAKs2F,UAAU16C,EAAuB,mBAAV93C,GAC5B2hF,EAASJ,MAAQ,GAAiB,IAAcI,EAAUjlF,EAAGk1F,GAAW11F,KAAM,QAAU47C,EAAM93C,IACtF,MAATA,GAAiB2hF,EAASJ,MAAQ,GAAe,IAAYI,IAC5DA,EAASJ,MAAQ,GAAiB,IAAcI,EAAUjlF,EAAGsD,GACtE,EMlBEwyF,ULvBa,SAAS16C,EAAM93C,GAC5B,IAAIK,EAAM,QAAUy3C,EACpB,GAAIx+B,UAAU9c,OAAS,EAAG,OAAQ6D,EAAMnE,KAAKg0F,MAAM7vF,KAASA,EAAIkyF,OAChE,GAAa,MAATvyF,EAAe,OAAO9D,KAAKg0F,MAAM7vF,EAAK,MAC1C,GAAqB,mBAAVL,EAAsB,MAAM,IAAIuN,MAC3C,IAAIo0E,EAAW4C,GAAUzsC,GACzB,OAAO57C,KAAKg0F,MAAM7vF,GAAMshF,EAASJ,MAAQ8Q,GAAcG,IAAW7Q,EAAU3hF,GAC9E,EKiBE2nB,MDQa,SAASmwB,EAAM93C,EAAOsiF,GACnC,IAAI5lF,EAAqB,cAAhBo7C,GAAQ,IAAsB,GAAuBg6C,GAC9D,OAAgB,MAAT9xF,EAAgB9D,KAClBy3F,WAAW77C,EAjElB,SAAmBA,EAAMg6C,GACvB,IAAIE,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAAU,GAAMj2F,KAAM47C,GACtBo6C,GAAWh2F,KAAKyrB,MAAMy6D,eAAetqC,GAAO,GAAM57C,KAAM47C,IAC5D,OAAOq6C,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,EAC/CA,EAAeH,EAAYE,EAAWG,EAASC,EAAWF,EAClE,CACF,CAsDwB0B,CAAU97C,EAAMp7C,IACjC27B,GAAG,aAAeyf,EAAM,GAAYA,IACpB,mBAAV93C,EAAuB9D,KAC7By3F,WAAW77C,EArClB,SAAuBA,EAAMg6C,EAAa9xF,GACxC,IAAIgyF,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAAU,GAAMj2F,KAAM47C,GACtBi6C,EAAS/xF,EAAM9D,MACfg2F,EAAUH,EAAS,GAEvB,OADc,MAAVA,IAAoC71F,KAAKyrB,MAAMy6D,eAAetqC,GAA9Co6C,EAAUH,EAA2C,GAAM71F,KAAM47C,IAC9Eq6C,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeH,EAAYE,EAAWG,EAASJ,GAC5E,CACF,CAwBwB,CAAcj6C,EAAMp7C,EAAGk1F,GAAW11F,KAAM,SAAW47C,EAAM93C,KAC1Em/E,KAvBP,SAA0BtjF,EAAIi8C,GAC5B,IAAIy7C,EAAKC,EAAKK,EAAwD5xF,EAA7C5B,EAAM,SAAWy3C,EAAM5gC,EAAQ,OAAS7W,EACjE,OAAO,WACL,IAAI+rB,EAAW,GAAIlwB,KAAML,GACrBw8B,EAAKjM,EAASiM,GACd0sD,EAAkC,MAAvB34D,EAASpsB,MAAMK,GAAe4B,IAAWA,EAAS,GAAY61C,SAAS96C,EAKlFq7B,IAAOk7D,GAAOM,IAAc9O,IAAWyO,GAAOD,EAAMl7D,GAAIwmD,QAAQxmD,GAAGnhB,EAAO28E,EAAY9O,GAE1F34D,EAASiM,GAAKm7D,CAChB,CACF,CASYM,CAAiB53F,KAAK21F,IAAK/5C,IACjC57C,KACCy3F,WAAW77C,EApDlB,SAAuBA,EAAMg6C,EAAaC,GACxC,IAAIC,EAEAC,EADAC,EAAUH,EAAS,GAEvB,OAAO,WACL,IAAII,EAAU,GAAMj2F,KAAM47C,GAC1B,OAAOq6C,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeH,EAAYE,EAAWG,EAASJ,EACvD,CACF,CA0CwB,CAAcj6C,EAAMp7C,EAAGsD,GAAQsiF,GAChDjqD,GAAG,aAAeyf,EAAM,KAC/B,EClBE67C,WQ5Ca,SAAS77C,EAAM93C,EAAOsiF,GACnC,IAAIjiF,EAAM,UAAYy3C,GAAQ,IAC9B,GAAIx+B,UAAU9c,OAAS,EAAG,OAAQ6D,EAAMnE,KAAKg0F,MAAM7vF,KAASA,EAAIkyF,OAChE,GAAa,MAATvyF,EAAe,OAAO9D,KAAKg0F,MAAM7vF,EAAK,MAC1C,GAAqB,mBAAVL,EAAsB,MAAM,IAAIuN,MAC3C,OAAOrR,KAAKg0F,MAAM7vF,EAhBpB,SAAoBy3C,EAAM93C,EAAOsiF,GAC/B,IAAItjF,EAAG08E,EACP,SAASwU,IACP,IAAIxzF,EAAIsD,EAAMsc,MAAMpgB,KAAMod,WAE1B,OADI5c,IAAMg/E,IAAI18E,GAAK08E,EAAKh/E,IAV5B,SAA0Bo7C,EAAMp7C,EAAG4lF,GACjC,OAAO,SAAStjF,GACd9C,KAAKyrB,MAAM46D,YAAYzqC,EAAMp7C,EAAEgC,KAAKxC,KAAM8C,GAAIsjF,EAChD,CACF,CAMkCyR,CAAiBj8C,EAAMp7C,EAAG4lF,IACjDtjF,CACT,CAEA,OADAkxF,EAAMqC,OAASvyF,EACRkwF,CACT,CAOyByD,CAAW77C,EAAM93C,EAAmB,MAAZsiF,EAAmB,GAAKA,GACzE,ERuCEpqD,KS/Ca,SAASl4B,GACtB,OAAO9D,KAAKg0F,MAAM,OAAyB,mBAAVlwF,EARnC,SAAsBA,GACpB,OAAO,WACL,IAAI+xF,EAAS/xF,EAAM9D,MACnBA,KAAK21B,YAAwB,MAAVkgE,EAAiB,GAAKA,CAC3C,CACF,CAIQ,CAAaH,GAAW11F,KAAM,OAAQ8D,IAf9C,SAAsBA,GACpB,OAAO,WACL9D,KAAK21B,YAAc7xB,CACrB,CACF,CAYQ,CAAsB,MAATA,EAAgB,GAAKA,EAAQ,IAClD,ET4CEg0F,UU9Ca,SAASh0F,GACtB,IAAIK,EAAM,OACV,GAAIiZ,UAAU9c,OAAS,EAAG,OAAQ6D,EAAMnE,KAAKg0F,MAAM7vF,KAASA,EAAIkyF,OAChE,GAAa,MAATvyF,EAAe,OAAO9D,KAAKg0F,MAAM7vF,EAAK,MAC1C,GAAqB,mBAAVL,EAAsB,MAAM,IAAIuN,MAC3C,OAAOrR,KAAKg0F,MAAM7vF,EAhBpB,SAAmBL,GACjB,IAAI8K,EAAI4wE,EACR,SAASwU,IACP,IAAIxzF,EAAIsD,EAAMsc,MAAMpgB,KAAMod,WAE1B,OADI5c,IAAMg/E,IAAI5wE,GAAM4wE,EAAKh/E,IAV7B,SAAyBA,GACvB,OAAO,SAASsC,GACd9C,KAAK21B,YAAcn1B,EAAEgC,KAAKxC,KAAM8C,EAClC,CACF,CAMmCi1F,CAAgBv3F,IACxCoO,CACT,CAEA,OADAolF,EAAMqC,OAASvyF,EACRkwF,CACT,CAOyB8D,CAAUh0F,GACnC,EVyCEiC,OWxDa,WACb,OAAO/F,KAAKm8B,GAAG,aATjB,SAAwBx8B,GACtB,OAAO,WACL,IAAIy4C,EAASp4C,KAAKsuB,WAClB,IAAK,IAAI9tB,KAAKR,KAAK+zF,aAAc,IAAKvzF,IAAMb,EAAI,OAC5Cy4C,GAAQA,EAAO7pB,YAAYvuB,KACjC,CACF,CAG+Bg4F,CAAeh4F,KAAK21F,KACnD,EXuDE3B,MRda,SAASp4C,EAAM93C,GAC5B,IAAInE,EAAKK,KAAK21F,IAId,GAFA/5C,GAAQ,GAEJx+B,UAAU9c,OAAS,EAAG,CAExB,IADA,IACkCwC,EAD9BkxF,EAAQ,GAAIh0F,KAAKgF,OAAQrF,GAAIq0F,MACxBxzF,EAAI,EAAGiD,EAAIuwF,EAAM1zF,OAAWE,EAAIiD,IAAKjD,EAC5C,IAAKsC,EAAIkxF,EAAMxzF,IAAIo7C,OAASA,EAC1B,OAAO94C,EAAEgB,MAGb,OAAO,IACT,CAEA,OAAO9D,KAAKijF,MAAe,MAATn/E,EAAgBwxF,GAAcG,IAAe91F,EAAIi8C,EAAM93C,GAC3E,EQDE4uB,MJpDa,SAAS5uB,GACtB,IAAInE,EAAKK,KAAK21F,IAEd,OAAOv4E,UAAU9c,OACXN,KAAKijF,MAAuB,mBAAVn/E,EACd0yF,GACAC,IAAe92F,EAAImE,IACvB,GAAI9D,KAAKgF,OAAQrF,GAAI+yB,KAC7B,EI6CEsW,SHrDa,SAASllC,GACtB,IAAInE,EAAKK,KAAK21F,IAEd,OAAOv4E,UAAU9c,OACXN,KAAKijF,MAAuB,mBAAVn/E,EACd4yF,GACAC,IAAkBh3F,EAAImE,IAC1B,GAAI9D,KAAKgF,OAAQrF,GAAIqpC,QAC7B,EG8CEkrD,KY3Da,SAASpwF,GACtB,IAAInE,EAAKK,KAAK21F,IAEd,OAAOv4E,UAAU9c,OACXN,KAAKijF,KAXb,SAAsBtjF,EAAImE,GACxB,GAAqB,mBAAVA,EAAsB,MAAM,IAAIuN,MAC3C,OAAO,WACL,GAAIrR,KAAML,GAAIu0F,KAAOpwF,CACvB,CACF,CAMkBm0F,CAAat4F,EAAImE,IAC3B,GAAI9D,KAAKgF,OAAQrF,GAAIu0F,IAC7B,EZsDEgE,Ya3Da,SAASp0F,GACtB,GAAqB,mBAAVA,EAAsB,MAAM,IAAIuN,MAC3C,OAAOrR,KAAKijF,KAVd,SAAqBtjF,EAAImE,GACvB,OAAO,WACL,IAAIJ,EAAII,EAAMsc,MAAMpgB,KAAMod,WAC1B,GAAiB,mBAAN1Z,EAAkB,MAAM,IAAI2N,MACvC,GAAIrR,KAAML,GAAIu0F,KAAOxwF,CACvB,CACF,CAImBw0F,CAAYl4F,KAAK21F,IAAK7xF,GACzC,EbyDE2F,IcpEa,WACb,IAAI4tF,EAAKC,EAAK3T,EAAO3jF,KAAML,EAAKgkF,EAAKgS,IAAKztF,EAAOy7E,EAAKz7E,OACtD,OAAO,IAAI+qB,SAAQ,SAAS7D,EAASipD,GACnC,IAAIl4D,EAAS,CAACrc,MAAOu0E,GACjB5uE,EAAM,CAAC3F,MAAO,WAA4B,KAAToE,GAAYknB,GAAW,GAE5Du0D,EAAKV,MAAK,WACR,IAAI/yD,EAAW,GAAIlwB,KAAML,GACrBw8B,EAAKjM,EAASiM,GAKdA,IAAOk7D,KACTC,GAAOD,EAAMl7D,GAAIwmD,QACb3/E,EAAEmd,OAAO1gB,KAAK0gB,GAClBm3E,EAAIt0F,EAAEm1F,UAAU14F,KAAK0gB,GACrBm3E,EAAIt0F,EAAEyG,IAAIhK,KAAKgK,IAGjBymB,EAASiM,GAAKm7D,CAChB,IAGa,IAATpvF,GAAYknB,GAClB,GACF,Ed2CE,CAAC7rB,OAAOC,UAAWuzF,GAAoBxzF,OAAOC,WelEhD,IAAI40F,GAAgB,CAClB1mE,KAAM,KACNgB,MAAO,EACPsW,SAAU,IACVkrD,KAAM,IAGR,SAAS12B,GAAQx4D,EAAMrF,GAErB,IADA,IAAIk0F,IACKA,EAAS7uF,EAAK+uF,iBAAmBF,EAASA,EAAOl0F,KACxD,KAAMqF,EAAOA,EAAKspB,YAChB,MAAM,IAAIjd,MAAM,cAAc1R,eAGlC,OAAOk0F,CACT,CChBA,GAAUhuF,UAAUsyF,UCFL,SAASv8C,GACtB,OAAO57C,KAAKijF,MAAK,WACfkV,GAAUn4F,KAAM47C,EAClB,GACF,EDDA,GAAU/1C,UAAUkjC,WDiBL,SAAS6S,GACtB,IAAIj8C,EACAk0F,EAEAj4C,aAAgBg7C,IAClBj3F,EAAKi8C,EAAK+5C,IAAK/5C,EAAOA,EAAKi7C,QAE3Bl3F,EAAKm3F,MAAUjD,EAASuE,IAAe1mE,KAAOxvB,KAAO05C,EAAe,MAARA,EAAe,KAAOA,EAAO,IAG3F,IAAK,IAAIygC,EAASr8E,KAAKypF,QAAS3nC,EAAIu6B,EAAO/7E,OAAQwJ,EAAI,EAAGA,EAAIg4C,IAAKh4C,EACjE,IAAK,IAAyC9E,EAArC6lE,EAAQwR,EAAOvyE,GAAIrG,EAAIonE,EAAMvqE,OAAcE,EAAI,EAAGA,EAAIiD,IAAKjD,GAC9DwE,EAAO6lE,EAAMrqE,KACf0vB,GAASlrB,EAAM42C,EAAMj8C,EAAIa,EAAGqqE,EAAOgpB,GAAUr2B,GAAQx4D,EAAMrF,IAKjE,OAAO,IAAIi3F,GAAWva,EAAQr8E,KAAK0pF,SAAU9tC,EAAMj8C,EACrD,EGtCA,IAAI,GAAO,CAAC,MAEG,YAASqF,EAAM42C,GAC5B,IACI1rB,EACA1vB,EAFAszF,EAAY9uF,EAAK+uF,aAIrB,GAAID,EAEF,IAAKtzF,KADLo7C,EAAe,MAARA,EAAe,KAAOA,EAAO,GAC1Bk4C,EACR,IAAK5jE,EAAW4jE,EAAUtzF,IAAIyzF,MAAQR,IAAavjE,EAAS0rB,OAASA,EACnE,OAAO,IAAIg7C,GAAW,CAAC,CAAC5xF,IAAQ,GAAM42C,GAAOp7C,GAKnD,OAAO,IACT,CCpBA,SAAeyF,GAAK,IAAMA,ECAX,SAASoyF,GAAW1/E,GAAM,YACvC+4E,EAAW,OACX9jE,EAAM,UACNg1D,EAAS,KACTj/C,EAAI,SACJ4/C,IAEAz6E,OAAO+yE,iBAAiB77E,KAAM,CAC5B2Y,KAAM,CAAC7U,MAAO6U,EAAM1P,YAAY,EAAMC,cAAc,GACpDwoF,YAAa,CAAC5tF,MAAO4tF,EAAazoF,YAAY,EAAMC,cAAc,GAClE0kB,OAAQ,CAAC9pB,MAAO8pB,EAAQ3kB,YAAY,EAAMC,cAAc,GACxD05E,UAAW,CAAC9+E,MAAO8+E,EAAW35E,YAAY,EAAMC,cAAc,GAC9Dy6B,KAAM,CAAC7/B,MAAO6/B,EAAM16B,YAAY,EAAMC,cAAc,GACpDlG,EAAG,CAACc,MAAOy/E,IAEf,CCXe,YAASvoE,GACtBA,EAAMutB,iBACNvtB,EAAMoxE,0BACR,CCEA,IAAIkM,GAAY,CAAC18C,KAAM,QACnB28C,GAAa,CAAC38C,KAAM,SACpB48C,GAAc,CAAC58C,KAAM,UACrB68C,GAAc,CAAC78C,KAAM,UAEzB,MAAM,IAAChuC,GAAKxG,IAAG,OAAK,IAAIuC,KAExB,SAAS+uF,GAAQ10F,GACf,MAAO,EAAEA,EAAE,IAAKA,EAAE,GACpB,CAEA,SAAS20F,GAAQ30F,GACf,MAAO,CAAC00F,GAAQ10F,EAAE,IAAK00F,GAAQ10F,EAAE,IACnC,CAEA,IAAI47C,GAAI,CACNhE,KAAM,IACNg9C,QAAS,CAAC,IAAK,KAAK34F,IAAI0Y,IACxBkgF,MAAO,SAAS5yF,EAAGjC,GAAK,OAAY,MAALiC,EAAY,KAAO,CAAC,EAAEA,EAAE,GAAIjC,EAAE,GAAG,IAAK,EAAEiC,EAAE,GAAIjC,EAAE,GAAG,IAAM,EACxF80F,OAAQ,SAASC,GAAM,OAAOA,GAAM,CAACA,EAAG,GAAG,GAAIA,EAAG,GAAG,GAAK,GAGxDl5C,GAAI,CACNjE,KAAM,IACNg9C,QAAS,CAAC,IAAK,KAAK34F,IAAI0Y,IACxBkgF,MAAO,SAASh2F,EAAGmB,GAAK,OAAY,MAALnB,EAAY,KAAO,CAAC,CAACmB,EAAE,GAAG,IAAKnB,EAAE,IAAK,CAACmB,EAAE,GAAG,IAAKnB,EAAE,IAAM,EACxFi2F,OAAQ,SAASC,GAAM,OAAOA,GAAM,CAACA,EAAG,GAAG,GAAIA,EAAG,GAAG,GAAK,GAGxDC,GAAK,CACPp9C,KAAM,KACNg9C,QAAS,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,MAAM34F,IAAI0Y,IAC1DkgF,MAAO,SAASE,GAAM,OAAa,MAANA,EAAa,KAAOJ,GAAQI,EAAK,EAC9DD,OAAQ,SAASC,GAAM,OAAOA,CAAI,GAGhCE,GAAU,CACZC,QAAS,YACTtW,UAAW,OACXn/E,EAAG,YACHO,EAAG,YACH68C,EAAG,YACHkE,EAAG,YACHo0C,GAAI,cACJC,GAAI,cACJC,GAAI,cACJC,GAAI,eAGFC,GAAQ,CACVv1F,EAAG,IACH+gD,EAAG,IACHo0C,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,MAGFE,GAAQ,CACV/1F,EAAG,IACHo9C,EAAG,IACHs4C,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,MAGFG,GAAS,CACXP,QAAS,EACTtW,UAAW,EACXn/E,EAAG,KACHO,EAAG,EACH68C,EAAG,KACHkE,GAAI,EACJo0C,IAAK,EACLC,GAAI,EACJC,GAAI,EACJC,IAAK,GAGHI,GAAS,CACXR,QAAS,EACTtW,UAAW,EACXn/E,GAAI,EACJO,EAAG,KACH68C,EAAG,EACHkE,EAAG,KACHo0C,IAAK,EACLC,IAAK,EACLC,GAAI,EACJC,GAAI,GAGN,SAAS3gF,GAAK7V,GACZ,MAAO,CAAC6V,KAAM7V,EAChB,CAGA,SAAS62F,GAAc3+E,GACrB,OAAQA,EAAM4+E,UAAY5+E,EAAMotB,MAClC,CAEA,SAASyxD,KACP,IAAI/yD,EAAM9mC,KAAK4xF,iBAAmB5xF,KAClC,OAAI8mC,EAAIgzD,aAAa,WAEZ,CAAC,EADRhzD,EAAMA,EAAI8B,QAAQwsD,SACLnvF,EAAG6gC,EAAIjkC,GAAI,CAACikC,EAAI7gC,EAAI6gC,EAAInE,MAAOmE,EAAIjkC,EAAIikC,EAAIjE,SAEnD,CAAC,CAAC,EAAG,GAAI,CAACiE,EAAInE,MAAMyyD,QAAQtxF,MAAOgjC,EAAIjE,OAAOuyD,QAAQtxF,OAC/D,CAEA,SAASi2F,KACP,OAAOC,UAAUC,gBAAmB,iBAAkBj6F,IACxD,CAGA,SAASqlF,GAAMrgF,GACb,MAAQA,EAAKk1F,cAAel1F,EAAOA,EAAKspB,YAAa,OACrD,OAAOtpB,EAAKk1F,OACd,CAOO,SAASC,GAAen1F,GAC7B,IAAIivF,EAAQjvF,EAAKk1F,QACjB,OAAOjG,EAAQA,EAAMmG,IAAItB,OAAO7E,EAAMrR,WAAa,IACrD,CAEO,SAASyX,KACd,OAAO,GAAMz6C,GACf,CAEO,SAAS06C,KACd,OAAO,GAAMz6C,GACf,CAEe,cACb,OAAO,GAAMm5C,GACf,CAEA,SAAS,GAAMoB,GACb,IAMIG,EANApf,EAAS0e,GACTvjE,EAASqjE,GACTa,EAAYT,GACZhzF,GAAO,EACP0zF,EAAY,GAAS,QAAS,QAAS,OACvCC,EAAa,EAGjB,SAASC,EAAM9vB,GACb,IAAIquB,EAAUruB,EACT2gB,SAAS,UAAWoP,GACtBr+D,UAAU,YACV96B,KAAK,CAACkX,GAAK,aAEdugF,EAAQ16D,QAAQ5C,OAAO,QAClBC,KAAK,QAAS,WACdA,KAAK,iBAAkB,OACvBA,KAAK,SAAUo9D,GAAQC,SACzB3vF,MAAM2vF,GACJjW,MAAK,WACJ,IAAI9H,EAASkK,GAAMrlF,MAAMm7E,OACzB,GAAOn7E,MACF67B,KAAK,IAAKs/C,EAAO,GAAG,IACpBt/C,KAAK,IAAKs/C,EAAO,GAAG,IACpBt/C,KAAK,QAASs/C,EAAO,GAAG,GAAKA,EAAO,GAAG,IACvCt/C,KAAK,SAAUs/C,EAAO,GAAG,GAAKA,EAAO,GAAG,GAC/C,IAEJtQ,EAAMtuC,UAAU,cACb96B,KAAK,CAACkX,GAAK,eACX6lB,QAAQ5C,OAAO,QACbC,KAAK,QAAS,aACdA,KAAK,SAAUo9D,GAAQrW,WACvB/mD,KAAK,OAAQ,QACbA,KAAK,eAAgB,IACrBA,KAAK,SAAU,QACfA,KAAK,kBAAmB,cAE7B,IAAI3b,EAAS2qD,EAAMtuC,UAAU,WAC1B96B,KAAK24F,EAAIxB,SAAS,SAASpxF,GAAK,OAAOA,EAAEmR,IAAM,IAElDuH,EAAO6iE,OAAOh9E,SAEdma,EAAOse,QAAQ5C,OAAO,QACjBC,KAAK,SAAS,SAASr0B,GAAK,MAAO,kBAAoBA,EAAEmR,IAAM,IAC/DkjB,KAAK,UAAU,SAASr0B,GAAK,OAAOyxF,GAAQzxF,EAAEmR,KAAO,IAE1DkyD,EACKoY,KAAK4X,GACLh/D,KAAK,OAAQ,QACbA,KAAK,iBAAkB,OACvBM,GAAG,kBAAmB2+D,GACxBxkE,OAAOkkE,GACLr+D,GAAG,mBAAoB2+D,GACvB3+D,GAAG,kBAAmB4+D,GACtB5+D,GAAG,mCAAoC6+D,GACvCvvE,MAAM,eAAgB,QACtBA,MAAM,8BAA+B,gBAC5C,CA4CA,SAASovE,IACP,IAAIhwB,EAAQ,GAAO7qE,MACf4iF,EAAYyC,GAAMrlF,MAAM4iF,UAExBA,GACF/X,EAAMtuC,UAAU,cACX9Q,MAAM,UAAW,MACjBoQ,KAAK,IAAK+mD,EAAU,GAAG,IACvB/mD,KAAK,IAAK+mD,EAAU,GAAG,IACvB/mD,KAAK,QAAS+mD,EAAU,GAAG,GAAKA,EAAU,GAAG,IAC7C/mD,KAAK,SAAU+mD,EAAU,GAAG,GAAKA,EAAU,GAAG,IAEnD/X,EAAMtuC,UAAU,WACX9Q,MAAM,UAAW,MACjBoQ,KAAK,KAAK,SAASr0B,GAAK,MAAqC,MAA9BA,EAAEmR,KAAKnR,EAAEmR,KAAKrY,OAAS,GAAasiF,EAAU,GAAG,GAAK8X,EAAa,EAAI9X,EAAU,GAAG,GAAK8X,EAAa,CAAG,IACxI7+D,KAAK,KAAK,SAASr0B,GAAK,MAAqB,MAAdA,EAAEmR,KAAK,GAAaiqE,EAAU,GAAG,GAAK8X,EAAa,EAAI9X,EAAU,GAAG,GAAK8X,EAAa,CAAG,IACxH7+D,KAAK,SAAS,SAASr0B,GAAK,MAAkB,MAAXA,EAAEmR,MAA2B,MAAXnR,EAAEmR,KAAeiqE,EAAU,GAAG,GAAKA,EAAU,GAAG,GAAK8X,EAAaA,CAAY,IACnI7+D,KAAK,UAAU,SAASr0B,GAAK,MAAkB,MAAXA,EAAEmR,MAA2B,MAAXnR,EAAEmR,KAAeiqE,EAAU,GAAG,GAAKA,EAAU,GAAG,GAAK8X,EAAaA,CAAY,KAIzI7vB,EAAMtuC,UAAU,sBACX9Q,MAAM,UAAW,QACjBoQ,KAAK,IAAK,MACVA,KAAK,IAAK,MACVA,KAAK,QAAS,MACdA,KAAK,SAAU,KAExB,CAEA,SAASo/D,EAAQtX,EAAM7vD,EAAMonE,GAC3B,IAAIC,EAAOxX,EAAKuW,QAAQe,QACxB,OAAOE,GAAUD,GAAUC,EAAKD,MAAgB,IAAIE,EAAQzX,EAAM7vD,EAAMonE,GAA/BC,CAC3C,CAEA,SAASC,EAAQzX,EAAM7vD,EAAMonE,GAC3Bl7F,KAAK2jF,KAAOA,EACZ3jF,KAAK8zB,KAAOA,EACZ9zB,KAAKi0F,MAAQtQ,EAAKuW,QAClBl6F,KAAKm0F,OAAS,EACdn0F,KAAKk7F,MAAQA,CACf,CAqCA,SAASJ,EAAQ9/E,GACf,KAAIu/E,GAAgBv/E,EAAMqgF,UACrB/kE,EAAOlW,MAAMpgB,KAAMod,WAAxB,CAEA,IAQsBk+E,EAAIC,EACJ76C,EAAIC,EACJ66C,EAAIC,EACJ/sF,EAAID,EAGtBitF,EAEAC,EACAC,EAjBAjY,EAAO3jF,KACP2Y,EAAOqC,EAAM4S,OAAO02D,SAAS3rE,KAC7BgrB,EAA6D,eAArD58B,GAAQiU,EAAM6gF,QAAUljF,EAAO,UAAYA,GAAwB2/E,GAAavxF,GAAQiU,EAAM8gF,OAASrD,GAAcD,GAC7HuD,EAAQ3B,IAAQv6C,GAAI,KAAO45C,GAAO9gF,GAClCqjF,EAAQ5B,IAAQx6C,GAAI,KAAO85C,GAAO/gF,GAClCs7E,EAAQ5O,GAAM1B,GACdxI,EAAS8Y,EAAM9Y,OACfyH,EAAYqR,EAAMrR,UAClBqZ,EAAI9gB,EAAO,GAAG,GACdx2E,EAAIw2E,EAAO,GAAG,GACdp4B,EAAIo4B,EAAO,GAAG,GACd/3B,EAAI+3B,EAAO,GAAG,GACdhnC,EAAK,EACLC,EAAK,EAEL8nD,EAAWH,GAASC,GAASj1F,GAAQiU,EAAMmhF,SAG3CtgF,EAAStC,MAAM+vB,KAAKtuB,EAAMqgF,SAAW,CAACrgF,IAAQlY,IAC5C,MAAMtC,EAAIsC,EAAEwpB,WAIZ,OAHAxpB,EAAIs5F,GAAQt5F,EAAG6gF,IACb0Y,OAASv5F,EAAEkU,QACblU,EAAEwpB,WAAa9rB,EACRsC,CAAC,IAGdq1F,GAAUxU,GACV,IAAIwX,EAAOF,EAAQtX,EAAMvmE,WAAW,GAAMk/E,cAE1C,GAAa,YAAT3jF,EAAoB,CAClBiqE,IAAW8Y,GAAS,GACxB,MAAMa,EAAM,CAAC1gF,EAAO,GAAIA,EAAO,IAAMA,EAAO,IAC5Co4E,EAAMrR,UAAYA,EAAY,CAAC,CAC3B0Y,EAAKlB,IAAQv6C,GAAIo8C,EAAI,GAAIM,EAAI,GAAG,GAAIA,EAAI,GAAG,IAC3C77C,EAAK05C,IAAQx6C,GAAIj7C,EAAI,GAAI43F,EAAI,GAAG,GAAIA,EAAI,GAAG,KAC1C,CACDf,EAAKpB,IAAQv6C,GAAIkD,EAAI,GAAIw5C,EAAI,GAAG,GAAIA,EAAI,GAAG,IAC3C7tF,EAAK0rF,IAAQx6C,GAAIwD,EAAI,GAAIm5C,EAAI,GAAG,GAAIA,EAAI,GAAG,MAE3C1gF,EAAOvb,OAAS,GAAGk8F,EAAKxhF,EAC9B,MACEsgF,EAAK1Y,EAAU,GAAG,GAClBliC,EAAKkiC,EAAU,GAAG,GAClB4Y,EAAK5Y,EAAU,GAAG,GAClBl0E,EAAKk0E,EAAU,GAAG,GAGpB2Y,EAAKD,EACL36C,EAAKD,EACL+6C,EAAKD,EACL/sF,EAAKC,EAEL,IAAIm8D,EAAQ,GAAO8Y,GACd9nD,KAAK,iBAAkB,QAExBq9D,EAAUruB,EAAMtuC,UAAU,YACzBV,KAAK,SAAUo9D,GAAQtgF,IAE5B,GAAIqC,EAAMqgF,QACRF,EAAKsB,MAAQA,EACbtB,EAAKuB,MAAQA,MACR,CACL,IAAIrQ,EAAO,GAAOrxE,EAAMqxE,MACnBlwD,GAAG,kBAAmBsgE,GAAO,GAC7BtgE,GAAG,gBAAiBugE,GAAO,GAC5B31F,GAAMslF,EACLlwD,GAAG,iBA0GV,SAAmBnhB,GACjB,OAAQA,EAAM2hF,SACZ,KAAK,GACHT,EAAWH,GAASC,EACpB,MAEF,KAAK,GACCr4D,IAAS60D,KACPuD,IAAOP,EAAKC,EAAKtnD,EAAK4nD,EAAOT,EAAKC,EAAKpnD,EAAK4nD,GAC5CC,IAAOttF,EAAKD,EAAK2lC,EAAK4nD,EAAOt7C,EAAKC,EAAKvM,EAAK4nD,GAChDr4D,EAAO80D,GACP+D,EAAKxhF,IAEP,MAEF,KAAK,GACC2oB,IAAS60D,IAAe70D,IAAS80D,KAC/BsD,EAAQ,EAAGP,EAAKC,EAAKtnD,EAAa4nD,EAAQ,IAAGT,EAAKC,EAAKpnD,GACvD6nD,EAAQ,EAAGttF,EAAKD,EAAK2lC,EAAa4nD,EAAQ,IAAGt7C,EAAKC,EAAKvM,GAC3DzQ,EAAO40D,GACPW,EAAQr9D,KAAK,SAAUo9D,GAAQrW,WAC/B4Z,EAAKxhF,IAEP,MAEF,QAAS,OAEX,GAAQA,EACV,IAtIsC,GAC/BmhB,GAAG,eAuIV,SAAkBnhB,GAChB,OAAQA,EAAM2hF,SACZ,KAAK,GACCT,IACFP,EAAQC,EAAQM,GAAW,EAC3BM,EAAKxhF,IAEP,MAEF,KAAK,GACC2oB,IAAS80D,KACPsD,EAAQ,EAAGP,EAAKC,EAAaM,EAAQ,IAAGT,EAAKC,GAC7CS,EAAQ,EAAGttF,EAAKD,EAAautF,EAAQ,IAAGt7C,EAAKC,GACjDhd,EAAO60D,GACPgE,EAAKxhF,IAEP,MAEF,KAAK,GACC2oB,IAAS40D,KACPv9E,EAAM8gF,QACJC,IAAOP,EAAKC,EAAKtnD,EAAK4nD,EAAOT,EAAKC,EAAKpnD,EAAK4nD,GAC5CC,IAAOttF,EAAKD,EAAK2lC,EAAK4nD,EAAOt7C,EAAKC,EAAKvM,EAAK4nD,GAChDr4D,EAAO80D,KAEHsD,EAAQ,EAAGP,EAAKC,EAAaM,EAAQ,IAAGT,EAAKC,GAC7CS,EAAQ,EAAGttF,EAAKD,EAAautF,EAAQ,IAAGt7C,EAAKC,GACjDhd,EAAO60D,IAETU,EAAQr9D,KAAK,SAAUo9D,GAAQtgF,IAC/B6jF,EAAKxhF,IAEP,MAEF,QAAS,OAEX,GAAQA,EACV,IA5KmC,GAEjC,GAAYA,EAAMqxE,KACpB,CAEAwO,EAAOr4F,KAAKmhF,GACZwX,EAAK3xF,MAAMwR,EAAO2oB,EAAKiY,KA3EmB,CA6E1C,SAAS6gD,EAAMzhF,GACb,IAAK,MAAMjT,KAAKiT,EAAM4hF,gBAAkB,CAAC5hF,GACvC,IAAK,MAAMxT,KAAKqU,EACVrU,EAAE8kB,aAAevkB,EAAEukB,aAAY9kB,EAAE6rE,IAAM+oB,GAAQr0F,EAAG47E,IAE1D,GAAIuY,IAAaP,IAAUC,GAA2B,IAAlB//E,EAAOvb,OAAc,CACvD,MAAM4J,EAAQ2R,EAAO,GACjBjO,GAAI1D,EAAMmpE,IAAI,GAAKnpE,EAAM,IAAM0D,GAAI1D,EAAMmpE,IAAI,GAAKnpE,EAAM,IAC1D0xF,GAAQ,EAERD,GAAQ,CACZ,CACA,IAAK,MAAMzxF,KAAS2R,EACd3R,EAAMmpE,MAAKnpE,EAAM,GAAKA,EAAMmpE,IAAI,GAAInpE,EAAM,GAAKA,EAAMmpE,IAAI,IAC/DqoB,GAAS,EACT,GAAQ1gF,GACRwhF,EAAKxhF,EACP,CAEA,SAASwhF,EAAKxhF,GACZ,MAAM9Q,EAAQ2R,EAAO,GAAIwgF,EAASnyF,EAAMmyF,OACxC,IAAIv5F,EAKJ,OAHAqxC,EAAKjqC,EAAM,GAAKmyF,EAAO,GACvBjoD,EAAKlqC,EAAM,GAAKmyF,EAAO,GAEf14D,GACN,KAAK40D,GACL,KAAKD,GACCyD,IAAO5nD,EAAK,GAAI8nD,EAAIX,EAAI,GAAIv4C,EAAIy4C,EAAIrnD,IAAMonD,EAAKD,EAAKnnD,EAAIsnD,EAAKD,EAAKrnD,GAClE6nD,IAAO5nD,EAAK,GAAIzvC,EAAI+7C,EAAI,GAAI0C,EAAI10C,EAAI0lC,IAAMuM,EAAKD,EAAKtM,EAAI3lC,EAAKC,EAAK0lC,GACtE,MAEF,KAAKokD,GACC38E,EAAO,IACLkgF,IAAOR,EAAK,GAAIU,EAAG,GAAIl5C,EAAGlnC,EAAO,GAAG,KAAM4/E,EAAK,GAAIQ,EAAG,GAAIl5C,EAAGlnC,EAAO,GAAG,KAAMkgF,EAAQ,GACrFC,IAAOr7C,EAAK,GAAIh8C,EAAG,GAAIy+C,EAAGvnC,EAAO,GAAG,KAAMpN,EAAK,GAAI9J,EAAG,GAAIy+C,EAAGvnC,EAAO,GAAG,KAAMmgF,EAAQ,KAErFD,EAAQ,GAAG5nD,EAAK,GAAI8nD,EAAIX,EAAI,GAAIv4C,EAAIu4C,EAAInnD,IAAMonD,EAAKD,EAAKnnD,EAAIsnD,EAAKD,GAC5DO,EAAQ,IAAG5nD,EAAK,GAAI8nD,EAAIT,EAAI,GAAIz4C,EAAIy4C,EAAIrnD,IAAMonD,EAAKD,EAAIG,EAAKD,EAAKrnD,GACtE6nD,EAAQ,GAAG5nD,EAAK,GAAIzvC,EAAI+7C,EAAI,GAAI0C,EAAI1C,EAAItM,IAAMuM,EAAKD,EAAKtM,EAAI3lC,EAAKC,GAC5DstF,EAAQ,IAAG5nD,EAAK,GAAIzvC,EAAI+J,EAAI,GAAI00C,EAAI10C,EAAI0lC,IAAMuM,EAAKD,EAAIjyC,EAAKC,EAAK0lC,IAE5E,MAEF,KAAKqkD,GACCsD,IAAOR,EAAK,GAAIU,EAAG,GAAIl5C,EAAGu4C,EAAKnnD,EAAK4nD,IAASN,EAAK,GAAIQ,EAAG,GAAIl5C,EAAGy4C,EAAKrnD,EAAK4nD,KAC1EC,IAAOr7C,EAAK,GAAIh8C,EAAG,GAAIy+C,EAAG1C,EAAKtM,EAAK4nD,IAASvtF,EAAK,GAAI9J,EAAG,GAAIy+C,EAAG10C,EAAK0lC,EAAK4nD,KAK9EP,EAAKF,IACPQ,IAAU,EACVj5F,EAAIw4F,EAAIA,EAAKE,EAAIA,EAAK14F,EACtBA,EAAIy4F,EAAIA,EAAKE,EAAIA,EAAK34F,EAClB6V,KAAQ4gF,IAAOL,EAAQr9D,KAAK,SAAUo9D,GAAQtgF,EAAO4gF,GAAM5gF,MAG7DlK,EAAKkyC,IACPq7C,IAAU,EACVl5F,EAAI49C,EAAIA,EAAKhyC,EAAIA,EAAK5L,EACtBA,EAAI69C,EAAIA,EAAKlyC,EAAIA,EAAK3L,EAClB6V,KAAQ6gF,IAAON,EAAQr9D,KAAK,SAAUo9D,GAAQtgF,EAAO6gF,GAAM7gF,MAG7Ds7E,EAAMrR,YAAWA,EAAYqR,EAAMrR,WACnC+Y,IAAOJ,EAAK3Y,EAAU,GAAG,GAAI6Y,EAAK7Y,EAAU,GAAG,IAC/CgZ,IAAOj7C,EAAKiiC,EAAU,GAAG,GAAIn0E,EAAKm0E,EAAU,GAAG,IAE/CA,EAAU,GAAG,KAAO2Y,GACjB3Y,EAAU,GAAG,KAAOjiC,GACpBiiC,EAAU,GAAG,KAAO6Y,GACpB7Y,EAAU,GAAG,KAAOn0E,IACzBwlF,EAAMrR,UAAY,CAAC,CAAC2Y,EAAI56C,GAAK,CAAC86C,EAAIhtF,IAClCosF,EAAOr4F,KAAKmhF,GACZwX,EAAKR,MAAM3/E,EAAO2oB,EAAKiY,MAE3B,CAEA,SAAS8gD,EAAM1hF,GAEb,GD9eC,SAAuBA,GAC5BA,EAAMoxE,0BACR,CC2eM,CAAcpxE,GACVA,EAAMqgF,QAAS,CACjB,GAAIrgF,EAAMqgF,QAAQ/6F,OAAQ,OACtBi6F,GAAatoE,aAAasoE,GAC9BA,EAAcx6E,YAAW,WAAaw6E,EAAc,IAAM,GAAG,IAC/D,MACE,GAAWv/E,EAAMqxE,KAAMqP,GACvBrP,EAAKlwD,GAAG,0DAA2D,MAErE0uC,EAAMhvC,KAAK,iBAAkB,OAC7Bq9D,EAAQr9D,KAAK,SAAUo9D,GAAQC,SAC3BjF,EAAMrR,YAAWA,EAAYqR,EAAMrR,WAtX7C,SAAezH,GACb,OAAOA,EAAO,GAAG,KAAOA,EAAO,GAAG,IAC3BA,EAAO,GAAG,KAAOA,EAAO,GAAG,EACpC,CAoXU,CAAMyH,KAAYqR,EAAMrR,UAAY,KAAMiY,EAAOr4F,KAAKmhF,IAC1DwX,EAAK1xF,IAAIuR,EAAO2oB,EAAKiY,KACvB,CAsEF,CAEA,SAASm/C,EAAW//E,GAClBigF,EAAQj7F,KAAMod,WAAWq/E,MAAMzhF,EACjC,CAEA,SAASggF,EAAWhgF,GAClBigF,EAAQj7F,KAAMod,WAAWs/E,MAAM1hF,EACjC,CAEA,SAAS4/E,IACP,IAAI3G,EAAQj0F,KAAKk6F,SAAW,CAACtX,UAAW,MAGxC,OAFAqR,EAAM9Y,OAASwd,GAAQxd,EAAO/6D,MAAMpgB,KAAMod,YAC1C62E,EAAMmG,IAAMA,EACLnG,CACT,CA2BA,OAtZA0G,EAAM6B,KAAO,SAAS3xB,EAAO+X,EAAW5nE,GAClC6vD,EAAMmpB,MACRnpB,EACK1uC,GAAG,eAAe,SAASnhB,GAASigF,EAAQj7F,KAAMod,WAAWk/E,cAAc9yF,MAAMwR,EAAQ,IACzFmhB,GAAG,6BAA6B,SAASnhB,GAASigF,EAAQj7F,KAAMod,WAAW3T,IAAIuR,EAAQ,IACvFg5E,MAAM,SAAS,WACd,IAAIrQ,EAAO3jF,KACPi0F,EAAQtQ,EAAKuW,QACbiB,EAAOF,EAAQtX,EAAMvmE,WACrBy/E,EAAa5I,EAAMrR,UACnBka,EAAa1C,EAAIvB,MAA2B,mBAAdjW,EAA2BA,EAAUxiE,MAAMpgB,KAAMod,WAAawlE,EAAWqR,EAAM9Y,QAC7G36E,EAAI,GAAYq8F,EAAYC,GAEhC,SAAS9I,EAAMlxF,GACbmxF,EAAMrR,UAAkB,IAAN9/E,GAA0B,OAAfg6F,EAAsB,KAAOt8F,EAAEsC,GAC5D+3F,EAAOr4F,KAAKmhF,GACZwX,EAAKR,OACP,CAEA,OAAsB,OAAfkC,GAAsC,OAAfC,EAAsB9I,EAAQA,EAAM,EACpE,IAEJnpB,EACKoY,MAAK,WACJ,IAAIU,EAAO3jF,KACP8zB,EAAO1W,UACP62E,EAAQtQ,EAAKuW,QACb4C,EAAa1C,EAAIvB,MAA2B,mBAAdjW,EAA2BA,EAAUxiE,MAAMujE,EAAM7vD,GAAQ8uD,EAAWqR,EAAM9Y,QACxGggB,EAAOF,EAAQtX,EAAM7vD,GAAMwoE,cAE/BnE,GAAUxU,GACVsQ,EAAMrR,UAA2B,OAAfka,EAAsB,KAAOA,EAC/CjC,EAAOr4F,KAAKmhF,GACZwX,EAAK3xF,MAAMwR,GAAO2/E,MAAM3/E,GAAOvR,IAAIuR,EACrC,GAER,EAEA2/E,EAAM/yF,MAAQ,SAASijE,EAAO7vD,GAC5B2/E,EAAM6B,KAAK3xB,EAAO,KAAM7vD,EAC1B,EA6CAogF,EAAQv1F,UAAY,CAClBy2F,YAAa,WAEX,OADsB,KAAhBt8F,KAAKm0F,SAAcn0F,KAAKi0F,MAAMgH,QAAUj7F,KAAMA,KAAK+8F,UAAW,GAC7D/8F,IACT,EACAwJ,MAAO,SAASwR,EAAO2oB,GAGrB,OAFI3jC,KAAK+8F,UAAU/8F,KAAK+8F,UAAW,EAAO/8F,KAAKm7F,KAAK,QAASngF,EAAO2oB,IAC/D3jC,KAAKm7F,KAAK,QAASngF,GACjBhb,IACT,EACA26F,MAAO,SAAS3/E,EAAO2oB,GAErB,OADA3jC,KAAKm7F,KAAK,QAASngF,EAAO2oB,GACnB3jC,IACT,EACAyJ,IAAK,SAASuR,EAAO2oB,GAEnB,OADsB,KAAhB3jC,KAAKm0F,gBAAqBn0F,KAAKi0F,MAAMgH,QAASj7F,KAAKm7F,KAAK,MAAOngF,EAAO2oB,IACrE3jC,IACT,EACAm7F,KAAM,SAASxiF,EAAMqC,EAAO2oB,GAC1B,IAAIn8B,EAAI,GAAOxH,KAAK2jF,MAAMM,QAC1BwW,EAAUj4F,KACRmW,EACA3Y,KAAK2jF,KACL,IAAI0U,GAAW1/E,EAAM,CACnB+4E,YAAa12E,EACb4S,OAAQ+sE,EACR/X,UAAWwX,EAAItB,OAAO94F,KAAKi0F,MAAMrR,WACjCj/C,OACA4/C,SAAUkX,IAEZjzF,EAEJ,GAwQFmzF,EAAMxf,OAAS,SAASn4E,GACtB,OAAOoa,UAAU9c,QAAU66E,EAAsB,mBAANn4E,EAAmBA,EAAI,GAAS21F,GAAQ31F,IAAK23F,GAASxf,CACnG,EAEAwf,EAAMrkE,OAAS,SAAStzB,GACtB,OAAOoa,UAAU9c,QAAUg2B,EAAsB,mBAANtzB,EAAmBA,EAAI,KAAWA,GAAI23F,GAASrkE,CAC5F,EAEAqkE,EAAMH,UAAY,SAASx3F,GACzB,OAAOoa,UAAU9c,QAAUk6F,EAAyB,mBAANx3F,EAAmBA,EAAI,KAAWA,GAAI23F,GAASH,CAC/F,EAEAG,EAAMD,WAAa,SAAS13F,GAC1B,OAAOoa,UAAU9c,QAAUo6F,GAAc13F,EAAG23F,GAASD,CACvD,EAEAC,EAAMqC,aAAe,SAASh6F,GAC5B,OAAOoa,UAAU9c,QAAUyG,IAAS/D,EAAG23F,GAAS5zF,CAClD,EAEA4zF,EAAMx+D,GAAK,WACT,IAAIr4B,EAAQ22F,EAAUt+D,GAAG/b,MAAMq6E,EAAWr9E,WAC1C,OAAOtZ,IAAU22F,EAAYE,EAAQ72F,CACvC,EAEO62F,CACT,CC5mBO,IAAI,GAAMhxF,KAAKiE,IACX4mC,GAAM7qC,KAAK6qC,IACXC,GAAM9qC,KAAK8qC,IACXwoD,GAAKtzF,KAAK2qC,GACV4oD,GAASD,GAAK,EACdE,GAAW,EAALF,GACN,GAAMtzF,KAAKvC,IACX,GAAU,MCLrB,SAAS,GAAM5G,EAAGsJ,GAChB,OAAOyP,MAAM+vB,KAAK,CAAChpC,OAAQwJ,EAAItJ,IAAI,CAACwC,EAAGhC,IAAMR,EAAIQ,GACnD,CAWe,cACb,OAAO,IAAM,GAAO,EACtB,CAEO,SAASo8F,KACd,OAAO,IAAM,GAAO,EACtB,CAEO,SAASC,KACd,OAAO,IAAM,GAAM,EACrB,CAEA,SAAS,GAAMC,EAAUnc,GACvB,IAAIoc,EAAW,EACXC,EAAa,KACbC,EAAgB,KAChBC,EAAa,KAEjB,SAASC,EAAMl4C,GACb,IAKWtR,EALP1wC,EAAIgiD,EAAOnlD,OACXs9F,EAAY,IAAIrkF,MAAM9V,GACtBo6F,EAAa,GAAM,EAAGp6F,GACtBq6F,EAAS,IAAIvkF,MAAM9V,EAAIA,GACvB44E,EAAS,IAAI9iE,MAAM9V,GACnBzC,EAAI,EAERykD,EAAS94C,aAAa28B,KAAK,CAAChpC,OAAQmD,EAAIA,GAAI09E,EACtC,CAACn+E,EAAGxC,IAAMilD,EAAOjlD,EAAIiD,GAAGjD,EAAIiD,EAAI,GAChC,CAACT,EAAGxC,IAAMilD,EAAOjlD,EAAIiD,EAAI,GAAGjD,EAAIiD,IAGtC,IAAK,IAAIjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG,CAC1B,IAAIyF,EAAI,EACR,IAAK,IAAI6D,EAAI,EAAGA,EAAIrG,IAAKqG,EAAG7D,GAAKw/C,EAAOjlD,EAAIiD,EAAIqG,GAAKwzF,EAAW73C,EAAO37C,EAAIrG,EAAIjD,GAC/EQ,GAAK48F,EAAUp9F,GAAKyF,CACtB,CAEAkuC,GADAnzC,EAAI,GAAI,EAAGm8F,GAAMI,EAAW95F,GAAKzC,GACxBu8F,EAAWJ,GAAM15F,EAG1B,CACE,IAAIwC,EAAI,EACJu3F,GAAYK,EAAW11F,MAAK,CAAC5D,EAAGC,IAAMg5F,EAAWI,EAAUr5F,GAAIq5F,EAAUp5F,MAC7E,IAAK,MAAMhE,KAAKq9F,EAAY,CAC1B,MAAM7kD,EAAK/yC,EACX,GAAIq3F,EAAU,CACZ,MAAMS,EAAgB,GAAW,GAAJt6F,EAAOA,GAAG6yB,QAAOxsB,GAAKA,EAAI,EAAI27C,GAAQ37C,EAAIrG,EAAIjD,GAAKilD,EAAOjlD,EAAIiD,EAAIqG,KAC3F2zF,GAAeM,EAAc51F,MAAK,CAAC5D,EAAGC,IAAMi5F,EAAcl5F,EAAI,GAAKkhD,GAAQlhD,EAAId,EAAIjD,GAAKilD,EAAOjlD,EAAIiD,EAAIc,GAAIC,EAAI,GAAKihD,GAAQjhD,EAAIf,EAAIjD,GAAKilD,EAAOjlD,EAAIiD,EAAIe,MAC5J,IAAK,MAAMsF,KAAKi0F,EACVj0F,EAAI,GACQg0F,GAAQh0F,EAAIrG,EAAIjD,KAAOs9F,GAAQh0F,EAAIrG,EAAIjD,GAAK,CAACu0B,OAAQ,KAAMnH,OAAQ,QAC3EA,OAAS,CAACrmB,MAAO/G,EAAGw9F,WAAY/3F,EAAGg4F,SAAUh4F,GAAKw/C,GAAQ37C,EAAIrG,EAAIjD,GAAKQ,EAAG8C,MAAO2hD,GAAQ37C,EAAIrG,EAAIjD,KAEzFs9F,EAAOt9F,EAAIiD,EAAIqG,KAAOg0F,EAAOt9F,EAAIiD,EAAIqG,GAAK,CAACirB,OAAQ,KAAMnH,OAAQ,QACzEmH,OAAS,CAACxtB,MAAO/G,EAAGw9F,WAAY/3F,EAAGg4F,SAAUh4F,GAAKw/C,EAAOjlD,EAAIiD,EAAIqG,GAAK9I,EAAG8C,MAAO2hD,EAAOjlD,EAAIiD,EAAIqG,IAGzGuyE,EAAO77E,GAAK,CAAC+G,MAAO/G,EAAGw9F,WAAYhlD,EAAIilD,SAAUh4F,EAAGnC,MAAO85F,EAAUp9F,GACvE,KAAO,CACL,MAAMu9F,EAAgB,GAAM,EAAGt6F,GAAG6yB,QAAOxsB,GAAK27C,EAAOjlD,EAAIiD,EAAIqG,IAAM27C,EAAO37C,EAAIrG,EAAIjD,KAC9Ei9F,GAAeM,EAAc51F,MAAK,CAAC5D,EAAGC,IAAMi5F,EAAch4C,EAAOjlD,EAAIiD,EAAIc,GAAIkhD,EAAOjlD,EAAIiD,EAAIe,MAChG,IAAK,MAAMsF,KAAKi0F,EAAe,CAC7B,IAAIJ,EASJ,GARIn9F,EAAIsJ,GACN6zF,EAAQG,EAAOt9F,EAAIiD,EAAIqG,KAAOg0F,EAAOt9F,EAAIiD,EAAIqG,GAAK,CAACirB,OAAQ,KAAMnH,OAAQ,OACzE+vE,EAAM5oE,OAAS,CAACxtB,MAAO/G,EAAGw9F,WAAY/3F,EAAGg4F,SAAUh4F,GAAKw/C,EAAOjlD,EAAIiD,EAAIqG,GAAK9I,EAAG8C,MAAO2hD,EAAOjlD,EAAIiD,EAAIqG,MAErG6zF,EAAQG,EAAOh0F,EAAIrG,EAAIjD,KAAOs9F,EAAOh0F,EAAIrG,EAAIjD,GAAK,CAACu0B,OAAQ,KAAMnH,OAAQ,OACzE+vE,EAAM/vE,OAAS,CAACrmB,MAAO/G,EAAGw9F,WAAY/3F,EAAGg4F,SAAUh4F,GAAKw/C,EAAOjlD,EAAIiD,EAAIqG,GAAK9I,EAAG8C,MAAO2hD,EAAOjlD,EAAIiD,EAAIqG,IACjGtJ,IAAMsJ,IAAG6zF,EAAM5oE,OAAS4oE,EAAM/vE,SAEhC+vE,EAAM5oE,QAAU4oE,EAAM/vE,QAAU+vE,EAAM5oE,OAAOjxB,MAAQ65F,EAAM/vE,OAAO9pB,MAAO,CAC3E,MAAMixB,EAAS4oE,EAAM5oE,OACrB4oE,EAAM5oE,OAAS4oE,EAAM/vE,OACrB+vE,EAAM/vE,OAASmH,CACjB,CACF,CACAsnD,EAAO77E,GAAK,CAAC+G,MAAO/G,EAAGw9F,WAAYhlD,EAAIilD,SAAUh4F,EAAGnC,MAAO85F,EAAUp9F,GACvE,CACAyF,GAAKkuC,CACP,CACF,CAKA,OAFA2pD,EAASh1F,OAAO7B,OAAO62F,IAChBzhB,OAASA,EACTqhB,EAAaI,EAAO31F,KAAKu1F,GAAcI,CAChD,CAkBA,OAhBAH,EAAMJ,SAAW,SAASv6F,GACxB,OAAOoa,UAAU9c,QAAUi9F,EAAW,GAAI,EAAGv6F,GAAI26F,GAASJ,CAC5D,EAEAI,EAAMH,WAAa,SAASx6F,GAC1B,OAAOoa,UAAU9c,QAAUk9F,EAAax6F,EAAG26F,GAASH,CACtD,EAEAG,EAAMF,cAAgB,SAASz6F,GAC7B,OAAOoa,UAAU9c,QAAUm9F,EAAgBz6F,EAAG26F,GAASF,CACzD,EAEAE,EAAMD,WAAa,SAAS16F,GAC1B,OAAOoa,UAAU9c,QAAe,MAAL0C,EAAY06F,EAAa,MA/GlCt3F,EA+GoEpD,EAA1B06F,EA9GvD,SAASn5F,EAAGC,GACjB,OAAO4B,EACL7B,EAAEwwB,OAAOjxB,MAAQS,EAAEqpB,OAAO9pB,MAC1BU,EAAEuwB,OAAOjxB,MAAQU,EAAEopB,OAAO9pB,MAE9B,GAyG4Fd,EAAIA,EAAG26F,GAASD,GAAcA,EAAW16F,EA/GvI,IAAsBoD,CAgHpB,EAEOu3F,CACT,CCzHA,MAAM,GAAKh0F,KAAK2qC,GACZ,GAAM,EAAI,GACV,GAAU,KACV4pD,GAAa,GAAM,GAEvB,SAAS,GAAOC,GACdn+F,KAAKgD,GAAKm7F,EAAQ,GAClB,IAAK,IAAI39F,EAAI,EAAGiD,EAAI06F,EAAQ79F,OAAQE,EAAIiD,IAAKjD,EAC3CR,KAAKgD,GAAKoa,UAAU5c,GAAK29F,EAAQ39F,EAErC,CAeO,MAAM49F,GACX,WAAAnzF,CAAYozF,GACVr+F,KAAKs+F,IAAMt+F,KAAKu+F,IAChBv+F,KAAKw+F,IAAMx+F,KAAKy+F,IAAM,KACtBz+F,KAAKgD,EAAI,GACThD,KAAK0+F,QAAoB,MAAVL,EAAiB,GAlBpC,SAAqBA,GACnB,IAAI72F,EAAImC,KAAKC,MAAMy0F,GACnB,KAAM72F,GAAK,GAAI,MAAM,IAAI6J,MAAM,mBAAmBgtF,KAClD,GAAI72F,EAAI,GAAI,OAAO,GACnB,MAAMxG,EAAI,IAAMwG,EAChB,OAAO,SAAS22F,GACdn+F,KAAKgD,GAAKm7F,EAAQ,GAClB,IAAK,IAAI39F,EAAI,EAAGiD,EAAI06F,EAAQ79F,OAAQE,EAAIiD,IAAKjD,EAC3CR,KAAKgD,GAAK2G,KAAKwB,MAAMiS,UAAU5c,GAAKQ,GAAKA,EAAIm9F,EAAQ39F,EAEzD,CACF,CAO6Cm+F,CAAYN,EACvD,CACA,MAAAxoC,CAAO5vD,EAAGpD,GACR7C,KAAK0+F,OAAO,IAAI1+F,KAAKs+F,IAAMt+F,KAAKw+F,KAAOv4F,KAAKjG,KAAKu+F,IAAMv+F,KAAKy+F,KAAO57F,GACrE,CACA,SAAAkzD,GACmB,OAAb/1D,KAAKw+F,MACPx+F,KAAKw+F,IAAMx+F,KAAKs+F,IAAKt+F,KAAKy+F,IAAMz+F,KAAKu+F,IACrCv+F,KAAK0+F,OAAO,IAEhB,CACA,MAAA5oC,CAAO7vD,EAAGpD,GACR7C,KAAK0+F,OAAO,IAAI1+F,KAAKw+F,KAAOv4F,KAAKjG,KAAKy+F,KAAO57F,GAC/C,CACA,gBAAAklE,CAAiBx3B,EAAIz7B,EAAI7O,EAAGpD,GAC1B7C,KAAK0+F,OAAO,KAAKnuD,MAAOz7B,KAAM9U,KAAKw+F,KAAOv4F,KAAKjG,KAAKy+F,KAAO57F,GAC7D,CACA,aAAAilE,CAAcv3B,EAAIz7B,EAAI07B,EAAIz7B,EAAI9O,EAAGpD,GAC/B7C,KAAK0+F,OAAO,KAAKnuD,MAAOz7B,MAAO07B,MAAOz7B,KAAM/U,KAAKw+F,KAAOv4F,KAAKjG,KAAKy+F,KAAO57F,GAC3E,CACA,KAAA+7F,CAAMruD,EAAIz7B,EAAI07B,EAAIz7B,EAAIlQ,GAIpB,GAHA0rC,GAAMA,EAAIz7B,GAAMA,EAAI07B,GAAMA,EAAIz7B,GAAMA,GAAIlQ,GAAKA,GAGrC,EAAG,MAAM,IAAIwM,MAAM,oBAAoBxM,KAE/C,IAAIm0C,EAAKh5C,KAAKw+F,IACVnhE,EAAKr9B,KAAKy+F,IACVI,EAAMruD,EAAKD,EACXuuD,EAAM/pF,EAAKD,EACXiqF,EAAM/lD,EAAKzI,EACXyuD,EAAM3hE,EAAKvoB,EACXmqF,EAAQF,EAAMA,EAAMC,EAAMA,EAG9B,GAAiB,OAAbh/F,KAAKw+F,IACPx+F,KAAK0+F,OAAO,IAAI1+F,KAAKw+F,IAAMjuD,KAAMvwC,KAAKy+F,IAAM3pF,SAIzC,GAAMmqF,EAAQ,GAKd,GAAMt1F,KAAKiE,IAAIoxF,EAAMH,EAAMC,EAAMC,GAAO,IAAal6F,EAKrD,CACH,IAAIq6F,EAAM1uD,EAAKwI,EACXmmD,EAAMpqF,EAAKsoB,EACX+hE,EAAQP,EAAMA,EAAMC,EAAMA,EAC1BO,EAAQH,EAAMA,EAAMC,EAAMA,EAC1BG,EAAM31F,KAAKoG,KAAKqvF,GAChBG,EAAM51F,KAAKoG,KAAKkvF,GAChBr6F,EAAIC,EAAI8E,KAAK0f,KAAK,GAAK1f,KAAK2zC,MAAM8hD,EAAQH,EAAQI,IAAU,EAAIC,EAAMC,KAAS,GAC/EC,EAAM56F,EAAI26F,EACVE,EAAM76F,EAAI06F,EAGV31F,KAAKiE,IAAI4xF,EAAM,GAAK,IACtBx/F,KAAK0+F,OAAO,IAAInuD,EAAKivD,EAAMT,KAAOjqF,EAAK0qF,EAAMR,IAG/Ch/F,KAAK0+F,OAAO,IAAI75F,KAAKA,WAAWm6F,EAAME,EAAMH,EAAMI,MAAQn/F,KAAKw+F,IAAMjuD,EAAKkvD,EAAMZ,KAAO7+F,KAAKy+F,IAAM3pF,EAAK2qF,EAAMX,GAC/G,MArBE9+F,KAAK0+F,OAAO,IAAI1+F,KAAKw+F,IAAMjuD,KAAMvwC,KAAKy+F,IAAM3pF,GAsBhD,CACA,GAAA2zD,CAAIxiE,EAAGpD,EAAGgC,EAAG66F,EAAIt3B,EAAIu3B,GAInB,GAHA15F,GAAKA,EAAGpD,GAAKA,EAAW88F,IAAQA,GAAhB96F,GAAKA,GAGb,EAAG,MAAM,IAAIwM,MAAM,oBAAoBxM,KAE/C,IAAIsvC,EAAKtvC,EAAI8E,KAAK6qC,IAAIkrD,GAClBtrD,EAAKvvC,EAAI8E,KAAK8qC,IAAIirD,GAClB1mD,EAAK/yC,EAAIkuC,EACT9W,EAAKx6B,EAAIuxC,EACTwrD,EAAK,EAAID,EACTE,EAAKF,EAAMD,EAAKt3B,EAAKA,EAAKs3B,EAGb,OAAb1/F,KAAKw+F,IACPx+F,KAAK0+F,OAAO,IAAI1lD,KAAM3b,KAIf1zB,KAAKiE,IAAI5N,KAAKw+F,IAAMxlD,GAAM,IAAWrvC,KAAKiE,IAAI5N,KAAKy+F,IAAMphE,GAAM,KACtEr9B,KAAK0+F,OAAO,IAAI1lD,KAAM3b,IAInBx4B,IAGDg7F,EAAK,IAAGA,EAAKA,EAAK,GAAM,IAGxBA,EAAK3B,GACPl+F,KAAK0+F,OAAO,IAAI75F,KAAKA,SAAS+6F,KAAM35F,EAAIkuC,KAAMtxC,EAAIuxC,KAAMvvC,KAAKA,SAAS+6F,KAAM5/F,KAAKw+F,IAAMxlD,KAAMh5C,KAAKy+F,IAAMphE,IAIjGwiE,EAAK,IACZ7/F,KAAK0+F,OAAO,IAAI75F,KAAKA,SAASg7F,GAAM,OAAOD,KAAM5/F,KAAKw+F,IAAMv4F,EAAIpB,EAAI8E,KAAK6qC,IAAI4zB,MAAOpoE,KAAKy+F,IAAM57F,EAAIgC,EAAI8E,KAAK8qC,IAAI2zB,KAEpH,CACA,IAAAwC,CAAK3kE,EAAGpD,EAAGkiD,EAAG94C,GACZjM,KAAK0+F,OAAO,IAAI1+F,KAAKs+F,IAAMt+F,KAAKw+F,KAAOv4F,KAAKjG,KAAKu+F,IAAMv+F,KAAKy+F,KAAO57F,KAAKkiD,GAAKA,MAAM94C,MAAM84C,IAC3F,CACA,QAAAhlD,GACE,OAAOC,KAAKgD,CACd,EAGK,SAASovC,KACd,OAAO,IAAIgsD,EACb,CAKO,SAAS0B,GAAUzB,EAAS,GACjC,OAAO,IAAID,IAAMC,EACnB,CAJAjsD,GAAKvsC,UAAYu4F,GAAKv4F,UCvJf,IAAI,GAAQ0T,MAAM1T,UAAUmR,MCApB,YAAS/Q,GACtB,OAAO,WACL,OAAOA,CACT,CACF,CCCA,SAAS85F,GAAcv4F,GACrB,OAAOA,EAAEutB,MACX,CAEA,SAASirE,GAAcx4F,GACrB,OAAOA,EAAEomB,MACX,CAEA,SAASqyE,GAAcz4F,GACrB,OAAOA,EAAE4/C,MACX,CAEA,SAAS84C,GAAkB14F,GACzB,OAAOA,EAAEw2F,UACX,CAEA,SAASmC,GAAgB34F,GACvB,OAAOA,EAAEy2F,QACX,CAEA,SAASmC,KACP,OAAO,CACT,CAEA,SAASC,KACP,OAAO,EACT,CAEA,SAASC,GAAOC,GACd,IAAIxrE,EAASgrE,GACTnyE,EAASoyE,GACTQ,EAAeP,GACfQ,EAAeR,GACfjC,EAAakC,GACbjC,EAAWkC,GACX5C,EAAW6C,GACX1zD,EAAU,KAEd,SAAS4zD,IACP,IAAII,EACA7/C,EAAI9rB,EAAO3U,MAAMpgB,KAAMod,WACvBta,EAAI8qB,EAAOxN,MAAMpgB,KAAMod,WACvBujF,EAAKpD,EAASn9E,MAAMpgB,KAAMod,WAAa,EACvCwjF,EAAO,GAAMp+F,KAAK4a,WAClByjF,GAAML,EAAapgF,MAAMpgB,MAAO4gG,EAAK,GAAK//C,EAAG+/C,IAC7CE,EAAM9C,EAAW59E,MAAMpgB,KAAM4gG,GAAQ1D,GACrC6D,EAAM9C,EAAS79E,MAAMpgB,KAAM4gG,GAAQ1D,GACnC8D,GAAMP,EAAargF,MAAMpgB,MAAO4gG,EAAK,GAAK99F,EAAG89F,IAC7CK,EAAMjD,EAAW59E,MAAMpgB,KAAM4gG,GAAQ1D,GACrCgE,EAAMjD,EAAS79E,MAAMpgB,KAAM4gG,GAAQ1D,GAavC,GAXKxwD,IAASA,EAAUg0D,EAAStuD,MAE7BuuD,EAAK,KACH,GAAII,EAAMD,GAAY,EAALH,EAAS,GAASI,EAAMD,GAAOA,GAAOH,EAAII,GAAOJ,IAAOG,GAAOH,EAAII,GAAOJ,GAC1FG,EAAMC,GAAOD,EAAMC,GAAO,EAC3B,GAAIG,EAAMD,GAAY,EAALN,EAAS,GAASO,EAAMD,GAAOA,GAAON,EAAIO,GAAOP,IAAOM,GAAON,EAAIO,GAAOP,GAC1FM,EAAMC,GAAOD,EAAMC,GAAO,GAGjCx0D,EAAQmpB,OAAOgrC,EAAKrsD,GAAIssD,GAAMD,EAAKpsD,GAAIqsD,IACvCp0D,EAAQ+7B,IAAI,EAAG,EAAGo4B,EAAIC,EAAKC,GACvBD,IAAQG,GAAOF,IAAQG,EACzB,GAAIX,EAAY,CACd,IAA6CY,EAAMH,GAAzCT,EAAWngF,MAAMpgB,KAAMod,WAA2BgkF,GAAOH,EAAMC,GAAO,EAChFx0D,EAAQq7B,iBAAiB,EAAG,EAAGo5B,EAAM3sD,GAAIysD,GAAME,EAAM1sD,GAAIwsD,IACzDv0D,EAAQopB,OAAOkrC,EAAKxsD,GAAI4sD,GAAMJ,EAAKvsD,GAAI2sD,IACvC10D,EAAQopB,OAAOqrC,EAAM3sD,GAAI0sD,GAAMC,EAAM1sD,GAAIysD,GAC3C,MACEx0D,EAAQq7B,iBAAiB,EAAG,EAAGi5B,EAAKxsD,GAAIysD,GAAMD,EAAKvsD,GAAIwsD,IACvDv0D,EAAQ+7B,IAAI,EAAG,EAAGu4B,EAAIC,EAAKC,GAM/B,GAHAx0D,EAAQq7B,iBAAiB,EAAG,EAAG84B,EAAKrsD,GAAIssD,GAAMD,EAAKpsD,GAAIqsD,IACvDp0D,EAAQqpB,YAEJ2qC,EAAQ,OAAOh0D,EAAU,KAAMg0D,EAAS,IAAM,IACpD,CA0CA,OAxCIH,IAAYD,EAAOC,WAAa,SAASv9F,GAC3C,OAAOoa,UAAU9c,QAAUigG,EAA0B,mBAANv9F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAUC,CAChG,GAEAD,EAAOl5C,OAAS,SAASpkD,GACvB,OAAOoa,UAAU9c,QAAUkgG,EAAeC,EAA4B,mBAANz9F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAUE,CACjH,EAEAF,EAAOE,aAAe,SAASx9F,GAC7B,OAAOoa,UAAU9c,QAAUkgG,EAA4B,mBAANx9F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAUE,CAClG,EAEAF,EAAOG,aAAe,SAASz9F,GAC7B,OAAOoa,UAAU9c,QAAUmgG,EAA4B,mBAANz9F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAUG,CAClG,EAEAH,EAAOtC,WAAa,SAASh7F,GAC3B,OAAOoa,UAAU9c,QAAU09F,EAA0B,mBAANh7F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAUtC,CAChG,EAEAsC,EAAOrC,SAAW,SAASj7F,GACzB,OAAOoa,UAAU9c,QAAU29F,EAAwB,mBAANj7F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAUrC,CAC9F,EAEAqC,EAAO/C,SAAW,SAASv6F,GACzB,OAAOoa,UAAU9c,QAAUi9F,EAAwB,mBAANv6F,EAAmBA,EAAI,IAAUA,GAAIs9F,GAAU/C,CAC9F,EAEA+C,EAAOvrE,OAAS,SAAS/xB,GACvB,OAAOoa,UAAU9c,QAAUy0B,EAAS/xB,EAAGs9F,GAAUvrE,CACnD,EAEAurE,EAAO1yE,OAAS,SAAS5qB,GACvB,OAAOoa,UAAU9c,QAAUstB,EAAS5qB,EAAGs9F,GAAU1yE,CACnD,EAEA0yE,EAAO5zD,QAAU,SAAS1pC,GACxB,OAAOoa,UAAU9c,QAAWosC,EAAe,MAAL1pC,EAAY,KAAOA,EAAIs9F,GAAU5zD,CACzE,EAEO4zD,CACT,CAEe,cACb,OAAOA,IACT,CAEO,SAASe,KACd,OAAOf,GAAOD,GAChB,CCrIO,MAAMiB,GAAU33F,KAAK2qC,GAAK,IACpB,GAAU,IAAM3qC,KAAK2qC,GCK9BitD,GAAK,OACLC,GAAK,EACLC,GAAK,OACL7yF,GAAK,EAAI,GACTD,GAAK,EAAI,GACTwyC,GAAK,EAAIxyC,GAAKA,GACd+gF,GAAK/gF,GAAKA,GAAKA,GAEnB,SAAS+yF,GAAWlgD,GAClB,GAAIA,aAAamgD,GAAK,OAAO,IAAIA,GAAIngD,EAAE58C,EAAG48C,EAAEj9C,EAAGi9C,EAAEh9C,EAAGg9C,EAAEuO,SACtD,GAAIvO,aAAaogD,GAAK,OAAOC,GAAQrgD,GAC/BA,aAAaitC,KAAMjtC,EAAImtC,GAAWntC,IACxC,IAGuEv7C,EAAGi5E,EAHtEr6E,EAAIi9F,GAAStgD,EAAE38C,GACf9B,EAAI++F,GAAStgD,EAAEz+C,GACfyB,EAAIs9F,GAAStgD,EAAEh9C,GACf3B,EAAIk/F,IAAS,SAAYl9F,EAAI,SAAY9B,EAAI,SAAYyB,GAAKg9F,IAKlE,OAJI38F,IAAM9B,GAAKA,IAAMyB,EAAGyB,EAAIi5E,EAAIr8E,GAC9BoD,EAAI87F,IAAS,SAAYl9F,EAAI,SAAY9B,EAAI,SAAYyB,GAAK+8F,IAC9DriB,EAAI6iB,IAAS,SAAYl9F,EAAI,SAAY9B,EAAI,SAAYyB,GAAKi9F,KAEzD,IAAIE,GAAI,IAAM9+F,EAAI,GAAI,KAAOoD,EAAIpD,GAAI,KAAOA,EAAIq8E,GAAI19B,EAAEuO,QAC/D,CAEO,SAAS3rC,GAAKxf,EAAGmrD,GACtB,OAAO,IAAI4xC,GAAI/8F,EAAG,EAAG,EAAc,MAAXmrD,EAAkB,EAAIA,EAChD,CAEe,SAASx2B,GAAI30B,EAAGL,EAAGC,EAAGurD,GACnC,OAA4B,IAArB3yC,UAAU9c,OAAeohG,GAAW98F,GAAK,IAAI+8F,GAAI/8F,EAAGL,EAAGC,EAAc,MAAXurD,EAAkB,EAAIA,EACzF,CAEO,SAAS4xC,GAAI/8F,EAAGL,EAAGC,EAAGurD,GAC3B/vD,KAAK4E,GAAKA,EACV5E,KAAKuE,GAAKA,EACVvE,KAAKwE,GAAKA,EACVxE,KAAK+vD,SAAWA,CAClB,CAyBA,SAASgyC,GAAQj/F,GACf,OAAOA,EAAI4sF,GAAK/lF,KAAKkB,IAAI/H,EAAG,EAAI,GAAKA,EAAIq+C,GAAKvyC,EAChD,CAEA,SAASozF,GAAQl/F,GACf,OAAOA,EAAI6L,GAAK7L,EAAIA,EAAIA,EAAIq+C,IAAMr+C,EAAI8L,GACxC,CAEA,SAASqzF,GAASh8F,GAChB,OAAO,KAAOA,GAAK,SAAY,MAAQA,EAAI,MAAQ0D,KAAKkB,IAAI5E,EAAG,EAAI,KAAO,KAC5E,CAEA,SAAS67F,GAAS77F,GAChB,OAAQA,GAAK,MAAQ,OAAUA,EAAI,MAAQ0D,KAAKkB,KAAK5E,EAAI,MAAS,MAAO,IAC3E,CAEA,SAASi8F,GAAW1gD,GAClB,GAAIA,aAAaogD,GAAK,OAAO,IAAIA,GAAIpgD,EAAEv1C,EAAGu1C,EAAEvzC,EAAGuzC,EAAE58C,EAAG48C,EAAEuO,SAEtD,GADMvO,aAAamgD,KAAMngD,EAAIkgD,GAAWlgD,IAC5B,IAARA,EAAEj9C,GAAmB,IAARi9C,EAAEh9C,EAAS,OAAO,IAAIo9F,GAAItzD,IAAK,EAAIkT,EAAE58C,GAAK48C,EAAE58C,EAAI,IAAM,EAAI0pC,IAAKkT,EAAE58C,EAAG48C,EAAEuO,SACvF,IAAI9jD,EAAItC,KAAK+lC,MAAM8R,EAAEh9C,EAAGg9C,EAAEj9C,GAAK,GAC/B,OAAO,IAAIq9F,GAAI31F,EAAI,EAAIA,EAAI,IAAMA,EAAGtC,KAAKoG,KAAKyxC,EAAEj9C,EAAIi9C,EAAEj9C,EAAIi9C,EAAEh9C,EAAIg9C,EAAEh9C,GAAIg9C,EAAE58C,EAAG48C,EAAEuO,QAC/E,CAEO,SAASoyC,GAAIv9F,EAAGqJ,EAAGhC,EAAG8jD,GAC3B,OAA4B,IAArB3yC,UAAU9c,OAAe4hG,GAAWt9F,GAAK,IAAIg9F,GAAI31F,EAAGgC,EAAGrJ,EAAc,MAAXmrD,EAAkB,EAAIA,EACzF,CAEO,SAASqyC,GAAIn2F,EAAGgC,EAAGrJ,EAAGmrD,GAC3B,OAA4B,IAArB3yC,UAAU9c,OAAe4hG,GAAWj2F,GAAK,IAAI21F,GAAI31F,EAAGgC,EAAGrJ,EAAc,MAAXmrD,EAAkB,EAAIA,EACzF,CAEO,SAAS6xC,GAAI31F,EAAGgC,EAAGrJ,EAAGmrD,GAC3B/vD,KAAKiM,GAAKA,EACVjM,KAAKiO,GAAKA,EACVjO,KAAK4E,GAAKA,EACV5E,KAAK+vD,SAAWA,CAClB,CAEA,SAAS8xC,GAAQrgD,GACf,GAAI92B,MAAM82B,EAAEv1C,GAAI,OAAO,IAAI01F,GAAIngD,EAAE58C,EAAG,EAAG,EAAG48C,EAAEuO,SAC5C,IAAI9jD,EAAIu1C,EAAEv1C,EAAIq1F,GACd,OAAO,IAAIK,GAAIngD,EAAE58C,EAAG+E,KAAK6qC,IAAIvoC,GAAKu1C,EAAEvzC,EAAGtE,KAAK8qC,IAAIxoC,GAAKu1C,EAAEvzC,EAAGuzC,EAAEuO,QAC9D,CAlEA,GAAO4xC,GAAKpoE,GAAKozD,GAAOE,GAAO,CAC7B,QAAAE,CAAS/rF,GACP,OAAO,IAAI2gG,GAAI3hG,KAAK4E,EAzCd,IAyC4B,MAAL5D,EAAY,EAAIA,GAAIhB,KAAKuE,EAAGvE,KAAKwE,EAAGxE,KAAK+vD,QACxE,EACA,MAAA+8B,CAAO9rF,GACL,OAAO,IAAI2gG,GAAI3hG,KAAK4E,EA5Cd,IA4C4B,MAAL5D,EAAY,EAAIA,GAAIhB,KAAKuE,EAAGvE,KAAKwE,EAAGxE,KAAK+vD,QACxE,EACA,GAAAq+B,GACE,IAAIvrF,GAAK7C,KAAK4E,EAAI,IAAM,IACpBqB,EAAIykB,MAAM1qB,KAAKuE,GAAK1B,EAAIA,EAAI7C,KAAKuE,EAAI,IACrC26E,EAAIx0D,MAAM1qB,KAAKwE,GAAK3B,EAAIA,EAAI7C,KAAKwE,EAAI,IAIzC,OAAO,IAAIiqF,GACTwT,GAAU,WAJZh8F,EAAIs7F,GAAKS,GAAQ/7F,IAIW,WAH5BpD,EAAI2+F,GAAKQ,GAAQn/F,IAG2B,UAF5Cq8E,EAAIuiB,GAAKO,GAAQ9iB,KAGf+iB,IAAU,SAAYh8F,EAAI,UAAYpD,EAAI,QAAYq8E,GACtD+iB,GAAU,SAAYh8F,EAAI,SAAYpD,EAAI,UAAYq8E,GACtDl/E,KAAK+vD,QAET,KAgDF,GAAO6xC,GAAKQ,GAAKzV,GAAOE,GAAO,CAC7B,QAAAE,CAAS/rF,GACP,OAAO,IAAI4gG,GAAI5hG,KAAKiM,EAAGjM,KAAKiO,EAAGjO,KAAK4E,EA7G9B,IA6G4C,MAAL5D,EAAY,EAAIA,GAAIhB,KAAK+vD,QACxE,EACA,MAAA+8B,CAAO9rF,GACL,OAAO,IAAI4gG,GAAI5hG,KAAKiM,EAAGjM,KAAKiO,EAAGjO,KAAK4E,EAhH9B,IAgH4C,MAAL5D,EAAY,EAAIA,GAAIhB,KAAK+vD,QACxE,EACA,GAAAq+B,GACE,OAAOyT,GAAQ7hG,MAAMouF,KACvB,KCrHF,IAAIprC,IAAK,OACLp2C,GAAI,QACJq2C,IAAK,OACLl2C,IAAK,OACLg2C,GAAI,QACJs/C,GAAKt/C,GAAIh2C,GACTu1F,GAAKv/C,GAAIn2C,GACT21F,GAAQ31F,GAAIq2C,GAAIl2C,GAAIi2C,GAgBT,SAAS,GAAU/2C,EAAG40C,EAAGj8C,EAAGmrD,GACzC,OAA4B,IAArB3yC,UAAU9c,OAfnB,SAA0BkhD,GACxB,GAAIA,aAAaghD,GAAW,OAAO,IAAIA,GAAUhhD,EAAEv1C,EAAGu1C,EAAEX,EAAGW,EAAE58C,EAAG48C,EAAEuO,SAC5DvO,aAAaitC,KAAMjtC,EAAImtC,GAAWntC,IACxC,IAAI38C,EAAI28C,EAAE38C,EAAI,IACV9B,EAAIy+C,EAAEz+C,EAAI,IACVyB,EAAIg9C,EAAEh9C,EAAI,IACVI,GAAK29F,GAAQ/9F,EAAI69F,GAAKx9F,EAAIy9F,GAAKv/F,IAAMw/F,GAAQF,GAAKC,IAClDG,EAAKj+F,EAAII,EACT5D,GAAK+hD,IAAKhgD,EAAI6B,GAAKq+C,GAAIw/C,GAAM11F,GAC7B8zC,EAAIl3C,KAAKoG,KAAK/O,EAAIA,EAAIyhG,EAAKA,IAAO1/C,GAAIn+C,GAAK,EAAIA,IAC/CqH,EAAI40C,EAAIl3C,KAAK+lC,MAAM1uC,EAAGyhG,GAAM,GAAU,IAAMn0D,IAChD,OAAO,IAAIk0D,GAAUv2F,EAAI,EAAIA,EAAI,IAAMA,EAAG40C,EAAGj8C,EAAG48C,EAAEuO,QACpD,CAGkC2yC,CAAiBz2F,GAAK,IAAIu2F,GAAUv2F,EAAG40C,EAAGj8C,EAAc,MAAXmrD,EAAkB,EAAIA,EACrG,CAEO,SAASyyC,GAAUv2F,EAAG40C,EAAGj8C,EAAGmrD,GACjC/vD,KAAKiM,GAAKA,EACVjM,KAAK6gD,GAAKA,EACV7gD,KAAK4E,GAAKA,EACV5E,KAAK+vD,SAAWA,CAClB,CAEA,GAAOyyC,GAAW,GAAW7V,GAAOE,GAAO,CACzC,QAAAE,CAAS/rF,GAEP,OADAA,EAAS,MAALA,EAAY+rF,GAAWpjF,KAAKkB,IAAIkiF,GAAU/rF,GACvC,IAAIwhG,GAAUxiG,KAAKiM,EAAGjM,KAAK6gD,EAAG7gD,KAAK4E,EAAI5D,EAAGhB,KAAK+vD,QACxD,EACA,MAAA+8B,CAAO9rF,GAEL,OADAA,EAAS,MAALA,EAAY8rF,GAASnjF,KAAKkB,IAAIiiF,GAAQ9rF,GACnC,IAAIwhG,GAAUxiG,KAAKiM,EAAGjM,KAAK6gD,EAAG7gD,KAAK4E,EAAI5D,EAAGhB,KAAK+vD,QACxD,EACA,GAAAq+B,GACE,IAAIniF,EAAIye,MAAM1qB,KAAKiM,GAAK,GAAKjM,KAAKiM,EAAI,KAAOq1F,GACzC18F,GAAK5E,KAAK4E,EACVL,EAAImmB,MAAM1qB,KAAK6gD,GAAK,EAAI7gD,KAAK6gD,EAAIj8C,GAAK,EAAIA,GAC1C+9F,EAAOh5F,KAAK6qC,IAAIvoC,GAChB22F,EAAOj5F,KAAK8qC,IAAIxoC,GACpB,OAAO,IAAIwiF,GACT,KAAO7pF,EAAIL,GAAKy+C,GAAI2/C,EAAO/1F,GAAIg2F,IAC/B,KAAOh+F,EAAIL,GAAK0+C,GAAI0/C,EAAO51F,GAAI61F,IAC/B,KAAOh+F,EAAIL,GAAKw+C,GAAI4/C,IACpB3iG,KAAK+vD,QAET,KC3DF,IAEW,GAFCx2C,MAAM1T,UAEOmR,MCFV,YAASzS,EAAGC,GACzB,OAAOD,EAAIC,CACb,CCFA,SAAeyB,GAAK,IAAMA,ECAX,YAASsO,EAAMsuF,GAE5B,IADA,IAA6B50F,EAAzBzN,GAAK,EAAGiD,EAAIo/F,EAAKviG,SACZE,EAAIiD,MAAOwK,EAAI60F,GAAavuF,EAAMsuF,EAAKriG,IAAK,OAAOyN,EAC5D,OAAO,CACT,CAEA,SAAS60F,GAAavuF,EAAMrK,GAE1B,IADA,IAAIjE,EAAIiE,EAAM,GAAIrH,EAAIqH,EAAM,GAAI5D,GAAY,EACnC9F,EAAI,EAAGiD,EAAI8Q,EAAKjU,OAAQwJ,EAAIrG,EAAI,EAAGjD,EAAIiD,EAAGqG,EAAItJ,IAAK,CAC1D,IAAIy8F,EAAK1oF,EAAK/T,GAAIu0C,EAAKkoD,EAAG,GAAIjoD,EAAKioD,EAAG,GAAI8F,EAAKxuF,EAAKzK,GAAIk5F,EAAKD,EAAG,GAAIE,EAAKF,EAAG,GAC5E,GAAIG,GAAgBjG,EAAI8F,EAAI74F,GAAQ,OAAO,EACrC8qC,EAAKnyC,GAAQogG,EAAKpgG,GAASoD,GAAK+8F,EAAKjuD,IAAOlyC,EAAImyC,IAAOiuD,EAAKjuD,GAAMD,IAAMzuC,GAAYA,EAC5F,CACA,OAAOA,CACT,CAEA,SAAS48F,GAAgB3+F,EAAGC,EAAGyJ,GAC7B,IAAIzN,EAOUuH,EAAG43C,EAAG96C,EAPb,OAGT,SAAmBN,EAAGC,EAAGyJ,GACvB,OAAQzJ,EAAE,GAAKD,EAAE,KAAO0J,EAAE,GAAK1J,EAAE,MAAS0J,EAAE,GAAK1J,EAAE,KAAOC,EAAE,GAAKD,EAAE,GACrE,CALgB4+F,CAAU5+F,EAAGC,EAAGyJ,KAOhBlG,EAP6BxD,EAAE/D,IAAM+D,EAAE,KAAOC,EAAE,KAO7Cm7C,EAPmD1xC,EAAEzN,GAOlDqE,EAPsDL,EAAEhE,GAQrEuH,GAAK43C,GAAKA,GAAK96C,GAAKA,GAAK86C,GAAKA,GAAK53C,EAP5C,CClBe,cAAY,CCQ3B,IAAIq7F,GAAQ,CACV,GACA,CAAC,CAAC,CAAC,EAAK,KAAM,CAAC,GAAK,KACpB,CAAC,CAAC,CAAC,IAAK,GAAM,CAAC,EAAK,OACpB,CAAC,CAAC,CAAC,IAAK,GAAM,CAAC,GAAK,KACpB,CAAC,CAAC,CAAC,EAAK,IAAM,CAAC,IAAK,KACpB,CAAC,CAAC,CAAC,EAAK,KAAM,CAAC,GAAK,IAAO,CAAC,CAAC,EAAK,IAAM,CAAC,IAAK,KAC9C,CAAC,CAAC,CAAC,EAAK,IAAM,CAAC,EAAK,OACpB,CAAC,CAAC,CAAC,EAAK,IAAM,CAAC,GAAK,KACpB,CAAC,CAAC,CAAC,GAAK,GAAM,CAAC,EAAK,MACpB,CAAC,CAAC,CAAC,EAAK,KAAM,CAAC,EAAK,MACpB,CAAC,CAAC,CAAC,GAAK,GAAM,CAAC,EAAK,KAAO,CAAC,CAAC,IAAK,GAAM,CAAC,EAAK,OAC9C,CAAC,CAAC,CAAC,IAAK,GAAM,CAAC,EAAK,MACpB,CAAC,CAAC,CAAC,GAAK,GAAM,CAAC,IAAK,KACpB,CAAC,CAAC,CAAC,EAAK,KAAM,CAAC,IAAK,KACpB,CAAC,CAAC,CAAC,GAAK,GAAM,CAAC,EAAK,OACpB,IAGa,cACb,IAAIjvD,EAAK,EACLC,EAAK,EACLkK,EAAY+/B,GACZglB,EAASC,EAEb,SAASC,EAASt8F,GAChB,IAAIy3E,EAAKpgC,EAAUr3C,GAGnB,GAAKsS,MAAMC,QAAQklE,GAMjBA,EAAKA,EAAG1nE,QAAQ7O,KAAK,QANC,CACtB,MAAMnE,EAAIm3E,EAAOl0E,EAAQu8F,IAEzB,IADA9kB,EAAKV,MAAS/gD,GAAKj5B,EAAE,GAAIA,EAAE,GAAI06E,GAAKA,GAC7BA,EAAGA,EAAGp+E,OAAS,IAAM0D,EAAE,IAAI06E,EAAG36E,MACrC,KAAO26E,EAAG,GAAK16E,EAAE,IAAI06E,EAAG3iE,OAC1B,CAIA,OAAO2iE,EAAGz+E,KAAI6D,GAAS2/F,EAAQx8F,EAAQnD,IACzC,CAIA,SAAS2/F,EAAQx8F,EAAQnD,GACvB,MAAMJ,EAAa,MAATI,EAAgBwqC,KAAOxqC,EACjC,GAAI4mB,MAAMhnB,GAAI,MAAM,IAAI2N,MAAM,kBAAkBvN,KAEhD,IAAI65B,EAAW,GACX+lE,EAAQ,GAiBZ,OASF,SAAkBz8F,EAAQnD,EAAO+b,GAC/B,IAEI5Z,EAAGpD,EAAG+L,EAAID,EAAIwyC,EAAIuuC,EAFlBiU,EAAkB,IAAIpqF,MACtBqqF,EAAgB,IAAIrqF,MAOxB,IAHAtT,EAAIpD,GAAK,EACT8L,EAAKk1F,GAAM58F,EAAO,GAAInD,GACtBs/F,GAAMz0F,GAAM,GAAGpI,QAAQu9F,KACd79F,EAAIkuC,EAAK,GAChBvlC,EAAKD,EAAIA,EAAKk1F,GAAM58F,EAAOhB,EAAI,GAAInC,GACnCs/F,GAAMx0F,EAAKD,GAAM,GAAGpI,QAAQu9F,GAK9B,IAHAV,GAAY,EAANz0F,GAASpI,QAAQu9F,KAGdjhG,EAAIuxC,EAAK,GAAG,CAKnB,IAJAnuC,GAAK,EACL0I,EAAKk1F,GAAM58F,EAAOpE,EAAIsxC,EAAKA,GAAKrwC,GAChCq9C,EAAK0iD,GAAM58F,EAAOpE,EAAIsxC,GAAKrwC,GAC3Bs/F,GAAMz0F,GAAM,EAAIwyC,GAAM,GAAG56C,QAAQu9F,KACxB79F,EAAIkuC,EAAK,GAChBvlC,EAAKD,EAAIA,EAAKk1F,GAAM58F,EAAOpE,EAAIsxC,EAAKA,EAAKluC,EAAI,GAAInC,GACjD4rF,EAAKvuC,EAAIA,EAAK0iD,GAAM58F,EAAOpE,EAAIsxC,EAAKluC,EAAI,GAAInC,GAC5Cs/F,GAAMx0F,EAAKD,GAAM,EAAIwyC,GAAM,EAAIuuC,GAAM,GAAGnpF,QAAQu9F,GAElDV,GAAMz0F,EAAKwyC,GAAM,GAAG56C,QAAQu9F,EAC9B,CAMA,IAHA79F,GAAK,EACLk7C,EAAKl6C,EAAOpE,EAAIsxC,IAAOrwC,EACvBs/F,GAAMjiD,GAAM,GAAG56C,QAAQu9F,KACd79F,EAAIkuC,EAAK,GAChBu7C,EAAKvuC,EAAIA,EAAK0iD,GAAM58F,EAAOpE,EAAIsxC,EAAKluC,EAAI,GAAInC,GAC5Cs/F,GAAMjiD,GAAM,EAAIuuC,GAAM,GAAGnpF,QAAQu9F,GAInC,SAASA,EAAOpzD,GACd,IAII9tC,EAAGG,EAJHyG,EAAQ,CAACknC,EAAK,GAAG,GAAKzqC,EAAGyqC,EAAK,GAAG,GAAK7tC,GACtC4G,EAAM,CAACinC,EAAK,GAAG,GAAKzqC,EAAGyqC,EAAK,GAAG,GAAK7tC,GACpCkhG,EAAax8F,EAAMiC,GACnBw6F,EAAWz8F,EAAMkC,IAEjB7G,EAAIghG,EAAcG,KAChBhhG,EAAI4gG,EAAgBK,YACfJ,EAAchhG,EAAE6G,YAChBk6F,EAAgB5gG,EAAEyG,OACrB5G,IAAMG,GACRH,EAAE2R,KAAK9U,KAAKgK,GACZoW,EAASjd,EAAE2R,OAEXovF,EAAgB/gG,EAAE4G,OAASo6F,EAAc7gG,EAAE0G,KAAO,CAACD,MAAO5G,EAAE4G,MAAOC,IAAK1G,EAAE0G,IAAK8K,KAAM3R,EAAE2R,KAAKlU,OAAO0C,EAAEwR,gBAGhGqvF,EAAchhG,EAAE6G,KACvB7G,EAAE2R,KAAK9U,KAAKgK,GACZm6F,EAAchhG,EAAE6G,IAAMu6F,GAAYphG,IAE3BA,EAAI+gG,EAAgBK,KACzBjhG,EAAI6gG,EAAcG,YACbJ,EAAgB/gG,EAAE4G,cAClBo6F,EAAc7gG,EAAE0G,KACnB7G,IAAMG,GACRH,EAAE2R,KAAK9U,KAAKgK,GACZoW,EAASjd,EAAE2R,OAEXovF,EAAgB5gG,EAAEyG,OAASo6F,EAAchhG,EAAE6G,KAAO,CAACD,MAAOzG,EAAEyG,MAAOC,IAAK7G,EAAE6G,IAAK8K,KAAMxR,EAAEwR,KAAKlU,OAAOuC,EAAE2R,gBAGhGovF,EAAgB/gG,EAAE4G,OACzB5G,EAAE2R,KAAKkH,QAAQjS,GACfm6F,EAAgB/gG,EAAE4G,MAAQu6F,GAAcnhG,GAG1C+gG,EAAgBI,GAAcH,EAAcI,GAAY,CAACx6F,MAAOu6F,EAAYt6F,IAAKu6F,EAAUzvF,KAAM,CAAC/K,EAAOC,GAE7G,CAzCA25F,GAAMjiD,GAAM,GAAG56C,QAAQu9F,EA0CzB,CAvGEG,CAASh9F,EAAQvD,GAAG,SAAS6Q,GAC3B8uF,EAAO9uF,EAAMtN,EAAQvD,GC3DZ,SAAS6Q,GAEtB,IADA,IAAI/T,EAAI,EAAGiD,EAAI8Q,EAAKjU,OAAQ4jG,EAAO3vF,EAAK9Q,EAAI,GAAG,GAAK8Q,EAAK,GAAG,GAAKA,EAAK9Q,EAAI,GAAG,GAAK8Q,EAAK,GAAG,KACjF/T,EAAIiD,GAAGygG,GAAQ3vF,EAAK/T,EAAI,GAAG,GAAK+T,EAAK/T,GAAG,GAAK+T,EAAK/T,EAAI,GAAG,GAAK+T,EAAK/T,GAAG,GAC/E,OAAO0jG,CACT,CDwDU,CAAK3vF,GAAQ,EAAGopB,EAASl+B,KAAK,CAAC8U,IAC9BmvF,EAAMjkG,KAAK8U,EAClB,IAEAmvF,EAAMn9F,SAAQ,SAASs8F,GACrB,IAAK,IAAgChlE,EAA5Br9B,EAAI,EAAGiD,EAAIk6B,EAASr9B,OAAiBE,EAAIiD,IAAKjD,EACrD,IAAoD,IAAhD8F,IAAUu3B,EAAUF,EAASn9B,IAAI,GAAIqiG,GAEvC,YADAhlE,EAAQp+B,KAAKojG,EAInB,IAEO,CACLlqF,KAAM,eACN7U,MAAOA,EACP6tC,YAAahU,EAEjB,CAqFA,SAASp2B,EAAM2C,GACb,OAAkB,EAAXA,EAAM,GAASA,EAAM,IAAMiqC,EAAK,GAAK,CAC9C,CAEA,SAASmvD,EAAa/uF,EAAMtN,EAAQnD,GAClCyQ,EAAKhO,SAAQ,SAAS2D,GACpB,IAAIjE,EAAIiE,EAAM,GACVrH,EAAIqH,EAAM,GACVi6F,EAAS,EAAJl+F,EACLm+F,EAAS,EAAJvhG,EACLuT,EAAKiuF,GAAMp9F,EAAOm9F,EAAKjwD,EAAKgwD,IAC5Bl+F,EAAI,GAAKA,EAAIkuC,GAAMgwD,IAAOl+F,IAC5BiE,EAAM,GAAKo6F,GAAQr+F,EAAGo+F,GAAMp9F,EAAOm9F,EAAKjwD,EAAKgwD,EAAK,IAAK/tF,EAAItS,IAEzDjB,EAAI,GAAKA,EAAIuxC,GAAMgwD,IAAOvhG,IAC5BqH,EAAM,GAAKo6F,GAAQzhG,EAAGwhG,GAAMp9F,GAAQm9F,EAAK,GAAKjwD,EAAKgwD,IAAM/tF,EAAItS,GAEjE,GACF,CAmBA,OAjBAy/F,EAASE,QAAUA,EAEnBF,EAASr7F,KAAO,SAASlF,GACvB,IAAKoa,UAAU9c,OAAQ,MAAO,CAAC6zC,EAAIC,GACnC,IAAI5lC,EAAK7E,KAAKC,MAAM5G,EAAE,IAAKsqE,EAAK3jE,KAAKC,MAAM5G,EAAE,IAC7C,KAAMwL,GAAM,GAAK8+D,GAAM,GAAI,MAAM,IAAIj8D,MAAM,gBAC3C,OAAO8iC,EAAK3lC,EAAI4lC,EAAKk5B,EAAIi2B,CAC3B,EAEAA,EAASzkB,WAAa,SAAS97E,GAC7B,OAAOoa,UAAU9c,QAAUg+C,EAAyB,mBAANt7C,EAAmBA,EAAIuW,MAAMC,QAAQxW,GAAK,GAAS,GAAMR,KAAKQ,IAAM,GAASA,GAAIugG,GAAYjlD,CAC7I,EAEAilD,EAASF,OAAS,SAASrgG,GACzB,OAAOoa,UAAU9c,QAAU+iG,EAASrgG,EAAIsgG,EAAe,GAAMC,GAAYF,IAAWC,CACtF,EAEOC,CACT,CAGA,SAASC,GAAOv9F,GACd,OAAOm4E,SAASn4E,GAAKA,EAAIqoC,GAC3B,CAIA,SAASu1D,GAAM59F,EAAGnC,GAChB,OAAY,MAALmC,IAAqBA,GAAKnC,CACnC,CAGA,SAASugG,GAAM3gG,GACb,OAAY,MAALA,GAAagnB,MAAMhnB,GAAKA,IAAK,IAAYA,CAClD,CAEA,SAAS4gG,GAAQr+F,EAAGupF,EAAIp5E,EAAItS,GAC1B,MAAMS,EAAIT,EAAQ0rF,EACZhrF,EAAI4R,EAAKo5E,EACThoF,EAAI42E,SAAS75E,IAAM65E,SAAS55E,GAAKD,EAAIC,EAAImF,KAAK46F,KAAKhgG,GAAKoF,KAAK46F,KAAK//F,GACxE,OAAOkmB,MAAMljB,GAAKvB,EAAIA,EAAIuB,EAAI,EAChC,CE3NA,SAASg9F,GAASh9F,GAChB,OAAOA,EAAE,EACX,CAEA,SAASi9F,GAASj9F,GAChB,OAAOA,EAAE,EACX,CAEA,SAASk9F,KACP,OAAO,CACT,CAEe,cACb,IAAIz+F,EAAIu+F,GACJ3hG,EAAI4hG,GACJxsD,EAASysD,GACTvwD,EAAK,IACLC,EAAK,IACLvvC,EAAI,GACJ7D,EAAI,EACJwgD,EAAQ,EAAJ38C,EACJpB,EAAK0wC,EAAS,EAAJqN,GAAUxgD,EACpB8gD,EAAK1N,EAAS,EAAJoN,GAAUxgD,EACpBs9C,EAAY,GAAS,IAEzB,SAASqmD,EAAKljG,GACZ,IAAIwF,EAAS,IAAI29F,aAAanhG,EAAIq+C,GAC9B+iD,EAAQl7F,KAAKkB,IAAI,GAAI7J,GACrBR,GAAK,EAET,IAAK,MAAMgH,KAAK/F,EAAM,CACpB,IAAIszC,GAAM9uC,EAAEuB,IAAKhH,EAAGiB,GAAQ+/C,GAAKqjD,EAC7B7vD,GAAMnyC,EAAE2E,EAAGhH,EAAGiB,GAAQ+/C,GAAKqjD,EAC3BC,GAAM7sD,EAAOzwC,EAAGhH,EAAGiB,GACvB,GAAIqjG,GAAM/vD,GAAM,GAAKA,EAAKtxC,GAAKuxC,GAAM,GAAKA,EAAK8M,EAAG,CAChD,IAAI9I,EAAKrvC,KAAKC,MAAMmrC,GAChB1X,EAAK1zB,KAAKC,MAAMorC,GAChBmvD,EAAKpvD,EAAKiE,EAAK,GACforD,EAAKpvD,EAAK3X,EAAK,GACnBp2B,EAAO+xC,EAAK3b,EAAK55B,KAAO,EAAI0gG,IAAO,EAAIC,GAAMU,EAC7C79F,EAAO+xC,EAAK,EAAI3b,EAAK55B,IAAM0gG,GAAM,EAAIC,GAAMU,EAC3C79F,EAAO+xC,EAAK,GAAK3b,EAAK,GAAK55B,IAAM0gG,EAAKC,EAAKU,EAC3C79F,EAAO+xC,GAAM3b,EAAK,GAAK55B,KAAO,EAAI0gG,GAAMC,EAAKU,CAC/C,CACF,CAGA,OADA5qB,EAAM,CAACz4E,KAAMwF,EAAQ07B,MAAOl/B,EAAGo/B,OAAQif,GAAIj9C,EAAIggG,GACxC59F,CACT,CAEA,SAAS89F,EAAQtjG,GACf,IAAIwF,EAAS09F,EAAKljG,GACdi9E,EAAKpgC,EAAUr3C,GACf+9F,EAAQr7F,KAAKkB,IAAI,EAAG,EAAI7J,GAO5B,OAJKuY,MAAMC,QAAQklE,KACjBA,EAAKV,GAAMrzE,OAAOs6F,UAAW79F,GAAIH,GAAU+9F,EAAOtmB,IAG7C,KACFx2E,KAAK,CAACzE,EAAGq+C,IACTg9B,WAAWJ,EAAGz+E,KAAIuH,GAAKA,EAAIw9F,IAFzB,CAGJ/9F,GACEhH,KAAI,CAACgO,EAAGzN,KAAOyN,EAAEnK,OAAS46E,EAAGl+E,GAAIknC,EAAUz5B,KAClD,CAgBA,SAASy5B,EAAUw9D,GAEjB,OADAA,EAASvzD,YAAYprC,QAAQ4+F,GACtBD,CACT,CAEA,SAASC,EAAiBxzD,GACxBA,EAAYprC,QAAQ6+F,EACtB,CAEA,SAASA,EAAczzD,GACrBA,EAAYprC,QAAQ8+F,EACtB,CAGA,SAASA,EAAe1zD,GACtBA,EAAY,GAAKA,EAAY,GAAKhoC,KAAKkB,IAAI,EAAG7J,GAAKwgD,EACnD7P,EAAY,GAAKA,EAAY,GAAKhoC,KAAKkB,IAAI,EAAG7J,GAAKwgD,CACrD,CAEA,SAASynB,IAIP,OAFAxlE,EAAK0wC,EAAS,GADdqN,EAAQ,EAAJ38C,IACgB7D,EACpB8gD,EAAK1N,EAAS,EAAJoN,GAAUxgD,EACb+jG,CACT,CAqCA,OA3EAA,EAAQxB,SAAW,SAAS9hG,GAC1B,IAAIwF,EAAS09F,EAAKljG,GACd8hG,EAAW,KAAWr7F,KAAK,CAACzE,EAAGq+C,IAC/BkjD,EAAQr7F,KAAKkB,IAAI,EAAG,EAAI7J,GACxByiG,EAAU3/F,IACRA,GAASA,EACT,IAAImK,EAAIy5B,EAAU67D,EAASE,QAAQx8F,EAAQnD,EAAQkhG,IAEnD,OADA/2F,EAAEnK,MAAQA,EACHmK,CAAC,EAGd,OADAnF,OAAOC,eAAe06F,EAAS,MAAO,CAACz6F,IAAK,IAAM5B,GAAIH,GAAU+9F,IACzDvB,CACT,EA4BAsB,EAAQ9+F,EAAI,SAASjD,GACnB,OAAOoa,UAAU9c,QAAU2F,EAAiB,mBAANjD,EAAmBA,EAAI,IAAUA,GAAI+hG,GAAW9+F,CACxF,EAEA8+F,EAAQliG,EAAI,SAASG,GACnB,OAAOoa,UAAU9c,QAAUuC,EAAiB,mBAANG,EAAmBA,EAAI,IAAUA,GAAI+hG,GAAWliG,CACxF,EAEAkiG,EAAQ9sD,OAAS,SAASj1C,GACxB,OAAOoa,UAAU9c,QAAU23C,EAAsB,mBAANj1C,EAAmBA,EAAI,IAAUA,GAAI+hG,GAAW9sD,CAC7F,EAEA8sD,EAAQ78F,KAAO,SAASlF,GACtB,IAAKoa,UAAU9c,OAAQ,MAAO,CAAC6zC,EAAIC,GACnC,IAAI5lC,GAAMxL,EAAE,GAAIsqE,GAAMtqE,EAAE,GACxB,KAAMwL,GAAM,GAAK8+D,GAAM,GAAI,MAAM,IAAIj8D,MAAM,gBAC3C,OAAO8iC,EAAK3lC,EAAI4lC,EAAKk5B,EAAIrE,GAC3B,EAEA87B,EAAQ76D,SAAW,SAASlnC,GAC1B,IAAKoa,UAAU9c,OAAQ,OAAO,GAAKU,EACnC,MAAOgC,GAAKA,IAAM,GAAI,MAAM,IAAIqO,MAAM,qBACtC,OAAOrQ,EAAI2I,KAAKC,MAAMD,KAAKooB,IAAI/uB,GAAK2G,KAAK20E,KAAMrV,GACjD,EAEA87B,EAAQjmB,WAAa,SAAS97E,GAC5B,OAAOoa,UAAU9c,QAAUg+C,EAAyB,mBAANt7C,EAAmBA,EAAIuW,MAAMC,QAAQxW,GAAK,GAAS,GAAMR,KAAKQ,IAAM,GAASA,GAAI+hG,GAAWzmD,CAC5I,EAEAymD,EAAQtmE,UAAY,SAASz7B,GAC3B,IAAKoa,UAAU9c,OAAQ,OAAOqJ,KAAKoG,KAAKlL,GAAKA,EAAI,IACjD,MAAO7B,GAAKA,IAAM,GAAI,MAAM,IAAIqO,MAAM,qBACtC,OAAOxM,GAAK8E,KAAKoG,KAAK,EAAI/M,EAAIA,EAAI,GAAK,GAAK,EAAGimE,GACjD,EAEO87B,CACT,CCpJO,MACM,GAAW,UAIjB,SAAS,GAAIh5F,EAAM/H,EAAGgI,EAAMpJ,EAAGqJ,GAClC,IAAIvF,EAAGwF,EAAMC,EAAIC,EACbC,EAAOrI,EAAE,GACTsI,EAAO1J,EAAE,GACT2J,EAAS,EACTC,EAAS,EACRF,EAAOD,GAAWC,GAAQD,GAC3B3F,EAAI2F,EACJA,EAAOrI,IAAIuI,KAEX7F,EAAI4F,EACJA,EAAO1J,IAAI4J,IAEf,IAAIC,EAAS,EACb,GAAIF,EAASR,GAAQS,EAASR,EAc1B,IAbKM,EAAOD,GAAWC,GAAQD,GAC3BH,EAAOG,EAAO3F,EACdyF,EAAKzF,GAAKwF,EAAOG,GACjBA,EAAOrI,IAAIuI,KAEXL,EAAOI,EAAO5F,EACdyF,EAAKzF,GAAKwF,EAAOI,GACjBA,EAAO1J,IAAI4J,IAEf9F,EAAIwF,EACO,IAAPC,IACAF,EAAEQ,KAAYN,GAEXI,EAASR,GAAQS,EAASR,GACxBM,EAAOD,GAAWC,GAAQD,GAC3BH,EAAOxF,EAAI2F,EACXD,EAAQF,EAAOxF,EACfyF,EAAKzF,GAAKwF,EAAOE,IAAUC,EAAOD,GAClCC,EAAOrI,IAAIuI,KAEXL,EAAOxF,EAAI4F,EACXF,EAAQF,EAAOxF,EACfyF,EAAKzF,GAAKwF,EAAOE,IAAUE,EAAOF,GAClCE,EAAO1J,IAAI4J,IAEf9F,EAAIwF,EACO,IAAPC,IACAF,EAAEQ,KAAYN,GAI1B,KAAOI,EAASR,GACZG,EAAOxF,EAAI2F,EACXD,EAAQF,EAAOxF,EACfyF,EAAKzF,GAAKwF,EAAOE,IAAUC,EAAOD,GAClCC,EAAOrI,IAAIuI,GACX7F,EAAIwF,EACO,IAAPC,IACAF,EAAEQ,KAAYN,GAGtB,KAAOK,EAASR,GACZE,EAAOxF,EAAI4F,EACXF,EAAQF,EAAOxF,EACfyF,EAAKzF,GAAKwF,EAAOE,IAAUE,EAAOF,GAClCE,EAAO1J,IAAI4J,GACX9F,EAAIwF,EACO,IAAPC,IACAF,EAAEQ,KAAYN,GAMtB,OAHU,IAANzF,GAAsB,IAAX+F,IACXR,EAAEQ,KAAY/F,GAEX+F,CACX,CA4DO,SAASC,GAAIjJ,GAChB,OAAO,IAAIkJ,aAAalJ,EAC5B,CCvIA,MAIM,GAAIiJ,GAAI,GACRG,GAAKH,GAAI,GACTI,GAAKJ,GAAI,IACT,GAAIA,GAAI,IACRM,GAAIN,GAAI,GAgKP,SAASO,GAASC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACzC,MAAMC,GAAWL,EAAKI,IAAOH,EAAKE,GAC5BG,GAAYP,EAAKI,IAAOD,EAAKE,GAC7BG,EAAMF,EAAUC,EAEhBE,EAAShE,KAAKiE,IAAIJ,EAAUC,GAClC,OAAI9D,KAAKiE,IAAIF,IA9KI,sBA8KmBC,EAAeD,GApKvD,SAAuBR,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAII,GAC3C,IAAIE,EAASC,EAASC,EAASC,EAC3B5B,EAAO6B,EAAGC,EAAKC,EAAKC,EAAKC,EAAKC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAE9D,MAAMC,EAAM5B,EAAKI,EACXyB,EAAM3B,EAAKE,EACX0B,EAAM7B,EAAKI,EACX0B,EAAM5B,EAAKE,EAEjBkB,EAAKK,EAAMG,EACXhB,EAAI,GAAWa,EACfZ,EAAMD,GAAKA,EAAIa,GACfX,EAAMW,EAAMZ,EACZD,EAAI,GAAWgB,EACfb,EAAMH,GAAKA,EAAIgB,GACfZ,EAAMY,EAAMb,EACZM,EAAKP,EAAME,GAAOI,EAAKP,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDM,EAAKK,EAAMD,EACXd,EAAI,GAAWe,EACfd,EAAMD,GAAKA,EAAIe,GACfb,EAAMa,EAAMd,EACZD,EAAI,GAAWc,EACfX,EAAMH,GAAKA,EAAIc,GACfV,EAAMU,EAAMX,EACZQ,EAAKT,EAAME,GAAOM,EAAKT,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDC,EAAKI,EAAKE,EACVxC,EAAQsC,EAAKJ,EACb,GAAE,GAAKI,GAAMJ,EAAKlC,IAAUA,EAAQwC,GACpCL,EAAKE,EAAKH,EACVlC,EAAQmC,EAAKE,EACbD,EAAKC,GAAMF,EAAKnC,IAAUkC,EAAKlC,GAC/BkC,EAAKE,EAAKG,EACVvC,EAAQoC,EAAKF,EACb,GAAE,GAAKE,GAAMF,EAAKlC,IAAUA,EAAQuC,GACpCE,EAAKN,EAAKD,EACVlC,EAAQyC,EAAKN,EACb,GAAE,GAAKA,GAAMM,EAAKzC,IAAUkC,EAAKlC,GACjC,GAAE,GAAKyC,EAEP,IAAInB,ED8ED,SAAkB3B,EAAM/H,GAC3B,IAAI0C,EAAI1C,EAAE,GACV,IAAK,IAAIxD,EAAI,EAAGA,EChFG,EDgFOA,IAAKkG,GAAK1C,EAAExD,GACtC,OAAOkG,CACX,CClFc,CAAS,EAAG,IAClByI,EAjDa,sBAiDaxB,EAC9B,GAAID,GAAOyB,IAAazB,GAAOyB,EAC3B,OAAOzB,EAYX,GATAtB,EAAQc,EAAK4B,EACbjB,EAAUX,GAAM4B,EAAM1C,IAAUA,EAAQkB,GACxClB,EAAQgB,EAAK2B,EACbhB,EAAUX,GAAM2B,EAAM3C,IAAUA,EAAQkB,GACxClB,EAAQe,EAAK6B,EACblB,EAAUX,GAAM6B,EAAM5C,IAAUA,EAAQmB,GACxCnB,EAAQiB,EAAK4B,EACbjB,EAAUX,GAAM4B,EAAM7C,IAAUA,EAAQmB,GAExB,IAAZM,GAA6B,IAAZC,GAA6B,IAAZC,GAA6B,IAAZC,EACnD,OAAON,EAKX,GAFAyB,EAlEiB,sBAkESxB,EDpEA,sBCoE0BhE,KAAKiE,IAAIF,GAC7DA,GAAQoB,EAAMd,EAAUiB,EAAMpB,GAAYmB,EAAMjB,EAAUgB,EAAMjB,GAC5DJ,GAAOyB,IAAazB,GAAOyB,EAAU,OAAOzB,EAEhDe,EAAKZ,EAAUoB,EACfhB,EAAI,GAAWJ,EACfK,EAAMD,GAAKA,EAAIJ,GACfM,EAAMN,EAAUK,EAChBD,EAAI,GAAWgB,EACfb,EAAMH,GAAKA,EAAIgB,GACfZ,EAAMY,EAAMb,EACZM,EAAKP,EAAME,GAAOI,EAAKP,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDM,EAAKb,EAAUiB,EACfd,EAAI,GAAWH,EACfI,EAAMD,GAAKA,EAAIH,GACfK,EAAML,EAAUI,EAChBD,EAAI,GAAWc,EACfX,EAAMH,GAAKA,EAAIc,GACfV,EAAMU,EAAMX,EACZQ,EAAKT,EAAME,GAAOM,EAAKT,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDC,EAAKI,EAAKE,EACVxC,EAAQsC,EAAKJ,EACbtB,GAAE,GAAK0B,GAAMJ,EAAKlC,IAAUA,EAAQwC,GACpCL,EAAKE,EAAKH,EACVlC,EAAQmC,EAAKE,EACbD,EAAKC,GAAMF,EAAKnC,IAAUkC,EAAKlC,GAC/BkC,EAAKE,EAAKG,EACVvC,EAAQoC,EAAKF,EACbtB,GAAE,GAAKwB,GAAMF,EAAKlC,IAAUA,EAAQuC,GACpCE,EAAKN,EAAKD,EACVlC,EAAQyC,EAAKN,EACbvB,GAAE,GAAKuB,GAAMM,EAAKzC,IAAUkC,EAAKlC,GACjCY,GAAE,GAAK6B,EACP,MAAMO,EAAQ,GAAI,EAAG,GAAG,EAAGpC,GAAGH,IAE9B4B,EAAKK,EAAMd,EACXC,EAAI,GAAWa,EACfZ,EAAMD,GAAKA,EAAIa,GACfX,EAAMW,EAAMZ,EACZD,EAAI,GAAWD,EACfI,EAAMH,GAAKA,EAAID,GACfK,EAAML,EAAUI,EAChBM,EAAKP,EAAME,GAAOI,EAAKP,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDM,EAAKK,EAAMjB,EACXE,EAAI,GAAWe,EACfd,EAAMD,GAAKA,EAAIe,GACfb,EAAMa,EAAMd,EACZD,EAAI,GAAWF,EACfK,EAAMH,GAAKA,EAAIF,GACfM,EAAMN,EAAUK,EAChBQ,EAAKT,EAAME,GAAOM,EAAKT,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDC,EAAKI,EAAKE,EACVxC,EAAQsC,EAAKJ,EACbtB,GAAE,GAAK0B,GAAMJ,EAAKlC,IAAUA,EAAQwC,GACpCL,EAAKE,EAAKH,EACVlC,EAAQmC,EAAKE,EACbD,EAAKC,GAAMF,EAAKnC,IAAUkC,EAAKlC,GAC/BkC,EAAKE,EAAKG,EACVvC,EAAQoC,EAAKF,EACbtB,GAAE,GAAKwB,GAAMF,EAAKlC,IAAUA,EAAQuC,GACpCE,EAAKN,EAAKD,EACVlC,EAAQyC,EAAKN,EACbvB,GAAE,GAAKuB,GAAMM,EAAKzC,IAAUkC,EAAKlC,GACjCY,GAAE,GAAK6B,EACP,MAAMQ,EAAQ,GAAID,EAAOvC,GAAI,EAAGG,GAAGF,IAEnC2B,EAAKZ,EAAUG,EACfC,EAAI,GAAWJ,EACfK,EAAMD,GAAKA,EAAIJ,GACfM,EAAMN,EAAUK,EAChBD,EAAI,GAAWD,EACfI,EAAMH,GAAKA,EAAID,GACfK,EAAML,EAAUI,EAChBM,EAAKP,EAAME,GAAOI,EAAKP,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDM,EAAKb,EAAUC,EACfE,EAAI,GAAWH,EACfI,EAAMD,GAAKA,EAAIH,GACfK,EAAML,EAAUI,EAChBD,EAAI,GAAWF,EACfK,EAAMH,GAAKA,EAAIF,GACfM,EAAMN,EAAUK,EAChBQ,EAAKT,EAAME,GAAOM,EAAKT,EAAME,EAAMD,EAAMC,EAAMF,EAAMG,GACrDC,EAAKI,EAAKE,EACVxC,EAAQsC,EAAKJ,EACbtB,GAAE,GAAK0B,GAAMJ,EAAKlC,IAAUA,EAAQwC,GACpCL,EAAKE,EAAKH,EACVlC,EAAQmC,EAAKE,EACbD,EAAKC,GAAMF,EAAKnC,IAAUkC,EAAKlC,GAC/BkC,EAAKE,EAAKG,EACVvC,EAAQoC,EAAKF,EACbtB,GAAE,GAAKwB,GAAMF,EAAKlC,IAAUA,EAAQuC,GACpCE,EAAKN,EAAKD,EACVlC,EAAQyC,EAAKN,EACbvB,GAAE,GAAKuB,GAAMM,EAAKzC,IAAUkC,EAAKlC,GACjCY,GAAE,GAAK6B,EACP,MAAMS,EAAO,GAAID,EAAOvC,GAAI,EAAGE,GAAG,IAElC,OAAO,GAAEsC,EAAO,EACpB,CAUYC,CAAcrC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAII,EAClD,CC7KWjB,GAAI,GACJA,GAAI,GACJA,GAAI,GACFA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACLA,GAAI,GACJA,GAAI,GACJA,GAAI,GACNA,GAAI,GAEHA,GAAI,GACHA,GAAI,GACJA,GAAI,GACJA,GAAI,IAENA,GAAI,KACHA,GAAI,KCpBJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACLA,GAAI,GACJA,GAAI,GACAA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACNA,GAAI,GACJA,GAAI,GACJA,GAAI,GACHA,GAAI,GACJA,GAAI,GACJA,GAAI,GAENA,GAAI,GACHA,GAAI,IACHA,GAAI,IACJA,GAAI,IACLA,GAAI,IACHA,GAAI,IACLA,GAAI,IACJA,GAAI,IAENA,GAAI,MACHA,GAAI,MC/BJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GACJA,GAAI,GAEHA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IAEHA,GAAI,MACJA,GAAI,MACJA,GAAI,MACJA,GAAI,MACJA,GAAI,MACHA,GAAI,MACJA,GAAI,MACHA,GAAI,MACLA,GAAI,MAEPA,GAAI,GACHA,GAAI,GACJA,GAAI,GACJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACHA,GAAI,IACLA,GAAI,IACHA,GAAI,KACHA,GAAI,KACJA,GAAI,KACJA,GAAI,KACLA,GAAI,KAgVJA,GAAI,IACJA,GAAI,IACJA,GAAI,IACLA,GAAI,MCpYhB,MAAM9B,GAAUjB,KAAKkB,IAAI,GAAI,IACvBy6F,GAAa,IAAItoB,YAAY,KAIpB,MAAMuoB,GAEjB,WAAOj8D,CAAKztB,EAAQ2pF,EAAOC,GAAaC,EAAOC,IAC3C,MAAMliG,EAAIoY,EAAOvb,OACXslG,EAAS,IAAIj5F,aAAiB,EAAJlJ,GAEhC,IAAK,IAAIjD,EAAI,EAAGA,EAAIiD,EAAGjD,IAAK,CACxB,MAAMuH,EAAI8T,EAAOrb,GACjBolG,EAAO,EAAIplG,GAAKglG,EAAKz9F,GACrB69F,EAAO,EAAIplG,EAAI,GAAKklG,EAAK39F,EAC7B,CAEA,OAAO,IAAIw9F,GAAWK,EAC1B,CAEA,WAAA36F,CAAY26F,GACR,MAAMniG,EAAImiG,EAAOtlG,QAAU,EAC3B,GAAImD,EAAI,GAA0B,iBAAdmiG,EAAO,GAAiB,MAAM,IAAIv0F,MAAM,uCAE5DrR,KAAK4lG,OAASA,EAGd,MAAMC,EAAel8F,KAAKvC,IAAI,EAAI3D,EAAI,EAAG,GACzCzD,KAAK8lG,WAAa,IAAI9oB,YAA2B,EAAf6oB,GAClC7lG,KAAK+lG,WAAa,IAAIC,WAA0B,EAAfH,GAGjC7lG,KAAKimG,UAAYt8F,KAAKwvB,KAAKxvB,KAAKoG,KAAKtM,IACrCzD,KAAKkmG,UAAY,IAAIlpB,YAAYv5E,GACjCzD,KAAKmmG,UAAY,IAAInpB,YAAYv5E,GACjCzD,KAAKomG,SAAW,IAAIppB,YAAYv5E,GAChCzD,KAAKqmG,UAAY,IAAIL,WAAWhmG,KAAKimG,WAGrCjmG,KAAKsmG,KAAO,IAAItpB,YAAYv5E,GAC5BzD,KAAKumG,OAAS,IAAI55F,aAAalJ,GAE/BzD,KAAKoJ,QACT,CAEA,MAAAA,GACI,MAAM,OAACw8F,EAAQM,UAAWM,EAAUL,UAAWM,EAAUL,SAAUM,EAASL,UAAWM,GAAa3mG,KAC9FyD,EAAImiG,EAAOtlG,QAAU,EAG3B,IAAI2uC,EAAOoK,IACPlK,EAAOkK,IACPnK,GAAO,IACPE,GAAO,IAEX,IAAK,IAAI5uC,EAAI,EAAGA,EAAIiD,EAAGjD,IAAK,CACxB,MAAMyF,EAAI2/F,EAAO,EAAIplG,GACfqC,EAAI+iG,EAAO,EAAIplG,EAAI,GACrByF,EAAIgpC,IAAMA,EAAOhpC,GACjBpD,EAAIssC,IAAMA,EAAOtsC,GACjBoD,EAAIipC,IAAMA,EAAOjpC,GACjBpD,EAAIusC,IAAMA,EAAOvsC,GACrB7C,KAAKsmG,KAAK9lG,GAAKA,CACnB,CACA,MAAM8M,GAAM2hC,EAAOC,GAAQ,EACrB3hC,GAAM4hC,EAAOC,GAAQ,EAE3B,IAAIowC,EAAIh/B,EAAIikB,EAGZ,IAAK,IAAIjkE,EAAI,EAAGomG,EAAUvtD,IAAU74C,EAAIiD,EAAGjD,IAAK,CAC5C,MAAMgH,EAAIu5B,GAAKzzB,EAAIC,EAAIq4F,EAAO,EAAIplG,GAAIolG,EAAO,EAAIplG,EAAI,IACjDgH,EAAIo/F,IACJpnB,EAAKh/E,EACLomG,EAAUp/F,EAElB,CACA,MAAMq/F,EAAMjB,EAAO,EAAIpmB,GACjBsnB,EAAMlB,EAAO,EAAIpmB,EAAK,GAG5B,IAAK,IAAIh/E,EAAI,EAAGomG,EAAUvtD,IAAU74C,EAAIiD,EAAGjD,IAAK,CAC5C,GAAIA,IAAMg/E,EAAI,SACd,MAAMh4E,EAAIu5B,GAAK8lE,EAAKC,EAAKlB,EAAO,EAAIplG,GAAIolG,EAAO,EAAIplG,EAAI,IACnDgH,EAAIo/F,GAAWp/F,EAAI,IACnBg5C,EAAKhgD,EACLomG,EAAUp/F,EAElB,CACA,IAAIu/F,EAAMnB,EAAO,EAAIplD,GACjBwmD,EAAMpB,EAAO,EAAIplD,EAAK,GAEtBymD,EAAY5tD,IAGhB,IAAK,IAAI74C,EAAI,EAAGA,EAAIiD,EAAGjD,IAAK,CACxB,GAAIA,IAAMg/E,GAAMh/E,IAAMggD,EAAI,SAC1B,MAAM37C,EAAIqiG,GAAaL,EAAKC,EAAKC,EAAKC,EAAKpB,EAAO,EAAIplG,GAAIolG,EAAO,EAAIplG,EAAI,IACrEqE,EAAIoiG,IACJxiC,EAAKjkE,EACLymG,EAAYpiG,EAEpB,CACA,IAAIsiG,EAAMvB,EAAO,EAAInhC,GACjB2iC,EAAMxB,EAAO,EAAInhC,EAAK,GAE1B,GAAIwiC,IAAc5tD,IAAU,CAGxB,IAAK,IAAI74C,EAAI,EAAGA,EAAIiD,EAAGjD,IACnBR,KAAKumG,OAAO/lG,GAAMolG,EAAO,EAAIplG,GAAKolG,EAAO,IAAQA,EAAO,EAAIplG,EAAI,GAAKolG,EAAO,GAEhFyB,GAAUrnG,KAAKsmG,KAAMtmG,KAAKumG,OAAQ,EAAG9iG,EAAI,GACzC,MAAM6jG,EAAO,IAAItqB,YAAYv5E,GAC7B,IAAIqG,EAAI,EACR,IAAK,IAAItJ,EAAI,EAAG+mG,GAAK,IAAW/mG,EAAIiD,EAAGjD,IAAK,CACxC,MAAMb,EAAKK,KAAKsmG,KAAK9lG,GACfgH,EAAIxH,KAAKumG,OAAO5mG,GAClB6H,EAAI+/F,IACJD,EAAKx9F,KAAOnK,EACZ4nG,EAAK//F,EAEb,CAIA,OAHAxH,KAAKsnG,KAAOA,EAAK5nB,SAAS,EAAG51E,GAC7B9J,KAAKqpC,UAAY,IAAI2zC,YAAY,QACjCh9E,KAAK4qC,UAAY,IAAIoyC,YAAY,GAErC,CAGA,GAAI/vE,GAAS45F,EAAKC,EAAKC,EAAKC,EAAKG,EAAKC,GAAO,EAAG,CAC5C,MAAM5mG,EAAIggD,EACJv6C,EAAI8gG,EACJlkG,EAAImkG,EACVxmD,EAAKikB,EACLsiC,EAAMI,EACNH,EAAMI,EACN3iC,EAAKjkE,EACL2mG,EAAMlhG,EACNmhG,EAAMvkG,CACV,CAEA,MAAM22E,EA8Qd,SAAsBtsE,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACtC,MAAM4mC,EAAK/mC,EAAKF,EACVknC,EAAK/mC,EAAKF,EACVmN,EAAKhN,EAAKJ,EACVs6F,EAAKj6F,EAAKJ,EAEVs1F,EAAKtuD,EAAKA,EAAKC,EAAKA,EACpBqzD,EAAKntF,EAAKA,EAAKktF,EAAKA,EACpBhgG,EAAI,IAAO2sC,EAAKqzD,EAAKpzD,EAAK95B,GAKhC,MAAO,CAACrU,EAHEiH,GAAMs6F,EAAK/E,EAAKruD,EAAKqzD,GAAMjgG,EAG1B3E,EAFDsK,GAAMgnC,EAAKszD,EAAKntF,EAAKmoF,GAAMj7F,EAGzC,CA5RuBkgG,CAAab,EAAKC,EAAKC,EAAKC,EAAKG,EAAKC,GACrDpnG,KAAK2nG,IAAMnuB,EAAOvzE,EAClBjG,KAAK4nG,IAAMpuB,EAAO32E,EAElB,IAAK,IAAIrC,EAAI,EAAGA,EAAIiD,EAAGjD,IACnBR,KAAKumG,OAAO/lG,GAAKugC,GAAK6kE,EAAO,EAAIplG,GAAIolG,EAAO,EAAIplG,EAAI,GAAIg5E,EAAOvzE,EAAGuzE,EAAO32E,GAI7EwkG,GAAUrnG,KAAKsmG,KAAMtmG,KAAKumG,OAAQ,EAAG9iG,EAAI,GAGzCzD,KAAK6nG,WAAaroB,EAClB,IAAIsoB,EAAW,EAEfrB,EAASjnB,GAAMgnB,EAAS/hC,GAAMjkB,EAC9BimD,EAASjmD,GAAMgmD,EAAShnB,GAAM/a,EAC9BgiC,EAAShiC,GAAM+hC,EAAShmD,GAAMg/B,EAE9BknB,EAAQlnB,GAAM,EACdknB,EAAQlmD,GAAM,EACdkmD,EAAQjiC,GAAM,EAEdkiC,EAASltE,MAAM,GACfktE,EAAS3mG,KAAK+nG,SAASlB,EAAKC,IAAQtnB,EACpCmnB,EAAS3mG,KAAK+nG,SAAShB,EAAKC,IAAQxmD,EACpCmmD,EAAS3mG,KAAK+nG,SAASZ,EAAKC,IAAQ3iC,EAEpCzkE,KAAKgoG,aAAe,EACpBhoG,KAAKioG,aAAazoB,EAAIh/B,EAAIikB,GAAK,GAAI,GAAI,GAEvC,IAAK,IAAWhT,EAAI9G,EAAX3pD,EAAI,EAAWA,EAAIhB,KAAKsmG,KAAKhmG,OAAQU,IAAK,CAC/C,MAAMR,EAAIR,KAAKsmG,KAAKtlG,GACdiF,EAAI2/F,EAAO,EAAIplG,GACfqC,EAAI+iG,EAAO,EAAIplG,EAAI,GAGzB,GAAIQ,EAAI,GAAK2I,KAAKiE,IAAI3H,EAAIwrD,IAAO7mD,IAAWjB,KAAKiE,IAAI/K,EAAI8nD,IAAO//C,GAAS,SAKzE,GAJA6mD,EAAKxrD,EACL0kD,EAAK9nD,EAGDrC,IAAMg/E,GAAMh/E,IAAMggD,GAAMhgD,IAAMikE,EAAI,SAGtC,IAAIj7D,EAAQ,EACZ,IAAK,IAAIM,EAAI,EAAG3F,EAAMnE,KAAK+nG,SAAS9hG,EAAGpD,GAAIiH,EAAI9J,KAAKimG,YAChDz8F,EAAQm9F,GAAUxiG,EAAM2F,GAAK9J,KAAKimG,YACnB,IAAXz8F,GAAgBA,IAAUi9F,EAASj9F,IAFoBM,KAK/DN,EAAQg9F,EAASh9F,GACjB,IAAem2C,EAAX37C,EAAIwF,EACR,KAAOm2C,EAAI8mD,EAASziG,GAAIiJ,GAAShH,EAAGpD,EAAG+iG,EAAO,EAAI5hG,GAAI4hG,EAAO,EAAI5hG,EAAI,GAAI4hG,EAAO,EAAIjmD,GAAIimD,EAAO,EAAIjmD,EAAI,KAAO,GAE1G,GADA37C,EAAI27C,EACA37C,IAAMwF,EAAO,CACbxF,GAAK,EACL,KACJ,CAEJ,IAAW,IAAPA,EAAU,SAGd,IAAIlB,EAAI9C,KAAKioG,aAAajkG,EAAGxD,EAAGimG,EAASziG,IAAK,GAAI,EAAG0iG,EAAQ1iG,IAG7D0iG,EAAQlmG,GAAKR,KAAKkoG,UAAUplG,EAAI,GAChC4jG,EAAQ1iG,GAAKlB,EACbglG,IAGA,IAAIrkG,EAAIgjG,EAASziG,GACjB,KAAO27C,EAAI8mD,EAAShjG,GAAIwJ,GAAShH,EAAGpD,EAAG+iG,EAAO,EAAIniG,GAAImiG,EAAO,EAAIniG,EAAI,GAAImiG,EAAO,EAAIjmD,GAAIimD,EAAO,EAAIjmD,EAAI,IAAM,GACzG78C,EAAI9C,KAAKioG,aAAaxkG,EAAGjD,EAAGm/C,EAAG+mD,EAAQlmG,IAAK,EAAGkmG,EAAQjjG,IACvDijG,EAAQlmG,GAAKR,KAAKkoG,UAAUplG,EAAI,GAChC2jG,EAAShjG,GAAKA,EACdqkG,IACArkG,EAAIk8C,EAIR,GAAI37C,IAAMwF,EACN,KAAOm2C,EAAI6mD,EAASxiG,GAAIiJ,GAAShH,EAAGpD,EAAG+iG,EAAO,EAAIjmD,GAAIimD,EAAO,EAAIjmD,EAAI,GAAIimD,EAAO,EAAI5hG,GAAI4hG,EAAO,EAAI5hG,EAAI,IAAM,GACzGlB,EAAI9C,KAAKioG,aAAatoD,EAAGn/C,EAAGwD,GAAI,EAAG0iG,EAAQ1iG,GAAI0iG,EAAQ/mD,IACvD3/C,KAAKkoG,UAAUplG,EAAI,GACnB4jG,EAAQ/mD,GAAK78C,EACb2jG,EAASziG,GAAKA,EACd8jG,IACA9jG,EAAI27C,EAKZ3/C,KAAK6nG,WAAarB,EAAShmG,GAAKwD,EAChCyiG,EAASziG,GAAKwiG,EAAS/iG,GAAKjD,EAC5BimG,EAASjmG,GAAKiD,EAGdkjG,EAAS3mG,KAAK+nG,SAAS9hG,EAAGpD,IAAMrC,EAChCmmG,EAAS3mG,KAAK+nG,SAASnC,EAAO,EAAI5hG,GAAI4hG,EAAO,EAAI5hG,EAAI,KAAOA,CAChE,CAEAhE,KAAKsnG,KAAO,IAAItqB,YAAY8qB,GAC5B,IAAK,IAAItnG,EAAI,EAAGwD,EAAIhE,KAAK6nG,WAAYrnG,EAAIsnG,EAAUtnG,IAC/CR,KAAKsnG,KAAK9mG,GAAKwD,EACfA,EAAIyiG,EAASziG,GAIjBhE,KAAKqpC,UAAYrpC,KAAK8lG,WAAWpmB,SAAS,EAAG1/E,KAAKgoG,cAClDhoG,KAAK4qC,UAAY5qC,KAAK+lG,WAAWrmB,SAAS,EAAG1/E,KAAKgoG,aACtD,CAEA,QAAAD,CAAS9hG,EAAGpD,GACR,OAAO8G,KAAKC,MAgHpB,SAAqBuqC,EAAIC,GACrB,MAAMrsC,EAAIosC,GAAMxqC,KAAKiE,IAAIumC,GAAMxqC,KAAKiE,IAAIwmC,IACxC,OAAQA,EAAK,EAAI,EAAIrsC,EAAI,EAAIA,GAAK,CACtC,CAnH0BogG,CAAYliG,EAAIjG,KAAK2nG,IAAK9kG,EAAI7C,KAAK4nG,KAAO5nG,KAAKimG,WAAajmG,KAAKimG,SACvF,CAEA,SAAAiC,CAAU3jG,GACN,MAAOuhG,WAAYz8D,EAAW08D,WAAYn7D,EAAS,OAAEg7D,GAAU5lG,KAE/D,IAAIQ,EAAI,EACJ4nG,EAAK,EAGT,OAAa,CACT,MAAM5jG,EAAIomC,EAAUrmC,GAiBdm7F,EAAKn7F,EAAIA,EAAI,EAGnB,GAFA6jG,EAAK1I,GAAMn7F,EAAI,GAAK,GAET,IAAPC,EAAU,CACV,GAAU,IAANhE,EAAS,MACb+D,EAAI+gG,KAAa9kG,GACjB,QACJ,CAEA,MAAM6nG,EAAK7jG,EAAIA,EAAI,EACb8jG,EAAK5I,GAAMn7F,EAAI,GAAK,EACpBk+F,EAAK4F,GAAM7jG,EAAI,GAAK,EAEpB45D,EAAK/0B,EAAU++D,GACf9/C,EAAKjf,EAAU9kC,GACfgkG,EAAKl/D,EAAUi/D,GACf9/F,EAAK6gC,EAAUo5D,GAQrB,GANgB+F,GACZ5C,EAAO,EAAIxnC,GAAKwnC,EAAO,EAAIxnC,EAAK,GAChCwnC,EAAO,EAAIt9C,GAAKs9C,EAAO,EAAIt9C,EAAK,GAChCs9C,EAAO,EAAI2C,GAAK3C,EAAO,EAAI2C,EAAK,GAChC3C,EAAO,EAAIp9F,GAAKo9F,EAAO,EAAIp9F,EAAK,IAEvB,CACT6gC,EAAU9kC,GAAKiE,EACf6gC,EAAU7kC,GAAK45D,EAEf,MAAMqqC,EAAM79D,EAAU63D,GAGtB,IAAa,IAATgG,EAAY,CACZ,IAAIzkG,EAAIhE,KAAK6nG,WACb,EAAG,CACC,GAAI7nG,KAAKomG,SAASpiG,KAAOy+F,EAAI,CACzBziG,KAAKomG,SAASpiG,GAAKO,EACnB,KACJ,CACAP,EAAIhE,KAAKkmG,UAAUliG,EACvB,OAASA,IAAMhE,KAAK6nG,WACxB,CACA7nG,KAAK0oG,MAAMnkG,EAAGkkG,GACdzoG,KAAK0oG,MAAMlkG,EAAGomC,EAAUw9D,IACxBpoG,KAAK0oG,MAAMN,EAAI3F,GAEf,MAAMkG,EAAKN,GAAM7jG,EAAI,GAAK,EAGtBhE,EAAI8kG,GAAWhlG,SACfglG,GAAW9kG,KAAOmoG,EAE1B,KAAO,CACH,GAAU,IAANnoG,EAAS,MACb+D,EAAI+gG,KAAa9kG,EACrB,CACJ,CAEA,OAAO4nG,CACX,CAEA,KAAAM,CAAMnkG,EAAGC,GACLxE,KAAK+lG,WAAWxhG,GAAKC,GACV,IAAPA,IAAUxE,KAAK+lG,WAAWvhG,GAAKD,EACvC,CAGA,YAAA0jG,CAAazoB,EAAIh/B,EAAIikB,EAAIlgE,EAAGC,EAAGyJ,GAC3B,MAAMnL,EAAI9C,KAAKgoG,aAYf,OAVAhoG,KAAK8lG,WAAWhjG,GAAK08E,EACrBx/E,KAAK8lG,WAAWhjG,EAAI,GAAK09C,EACzBxgD,KAAK8lG,WAAWhjG,EAAI,GAAK2hE,EAEzBzkE,KAAK0oG,MAAM5lG,EAAGyB,GACdvE,KAAK0oG,MAAM5lG,EAAI,EAAG0B,GAClBxE,KAAK0oG,MAAM5lG,EAAI,EAAGmL,GAElBjO,KAAKgoG,cAAgB,EAEdllG,CACX,EASJ,SAASi+B,GAAK7zB,EAAIC,EAAIC,EAAIC,GACtB,MAAM8mC,EAAKjnC,EAAKE,EACVgnC,EAAKjnC,EAAKE,EAChB,OAAO8mC,EAAKA,EAAKC,EAAKA,CAC1B,CAEA,SAASo0D,GAASt7F,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI0iC,EAAIC,GAC1C,MAAMiE,EAAKjnC,EAAK+iC,EACVmE,EAAKjnC,EAAK+iC,EACV51B,EAAKlN,EAAK6iC,EACVu3D,EAAKn6F,EAAK6iC,EACVkgC,EAAK9iE,EAAK2iC,EACVogC,EAAK9iE,EAAK2iC,EAGV04D,EAAKtuF,EAAKA,EAAKktF,EAAKA,EACpBxnF,EAAKowD,EAAKA,EAAKC,EAAKA,EAE1B,OAAOl8B,GAAMqzD,EAAKxnF,EAAK4oF,EAAKv4B,GACrBj8B,GAAM95B,EAAK0F,EAAK4oF,EAAKx4B,IALjBj8B,EAAKA,EAAKC,EAAKA,IAMb95B,EAAK+1D,EAAKm3B,EAAKp3B,GAAM,CACtC,CAEA,SAAS82B,GAAah6F,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACtC,MAAM4mC,EAAK/mC,EAAKF,EACVknC,EAAK/mC,EAAKF,EACVmN,EAAKhN,EAAKJ,EACVs6F,EAAKj6F,EAAKJ,EAEVs1F,EAAKtuD,EAAKA,EAAKC,EAAKA,EACpBqzD,EAAKntF,EAAKA,EAAKktF,EAAKA,EACpBhgG,EAAI,IAAO2sC,EAAKqzD,EAAKpzD,EAAK95B,GAE1BrU,GAAKuhG,EAAK/E,EAAKruD,EAAKqzD,GAAMjgG,EAC1B3E,GAAKsxC,EAAKszD,EAAKntF,EAAKmoF,GAAMj7F,EAEhC,OAAOvB,EAAIA,EAAIpD,EAAIA,CACvB,CAkBA,SAASwkG,GAAUwB,EAAKC,EAAO1kG,EAAMC,GACjC,GAAIA,EAAQD,GAAQ,GAChB,IAAK,IAAI5D,EAAI4D,EAAO,EAAG5D,GAAK6D,EAAO7D,IAAK,CACpC,MAAMy5E,EAAO4uB,EAAIroG,GACXuoG,EAAWD,EAAM7uB,GACvB,IAAInwE,EAAItJ,EAAI,EACZ,KAAOsJ,GAAK1F,GAAQ0kG,EAAMD,EAAI/+F,IAAMi/F,GAAUF,EAAI/+F,EAAI,GAAK++F,EAAI/+F,KAC/D++F,EAAI/+F,EAAI,GAAKmwE,CACjB,KACG,CAEH,IAAIz5E,EAAI4D,EAAO,EACX0F,EAAIzF,EACR,GAAKwkG,EAHWzkG,EAAOC,GAAU,EAGf7D,GACdsoG,EAAMD,EAAIzkG,IAAS0kG,EAAMD,EAAIxkG,KAAS,GAAKwkG,EAAKzkG,EAAMC,GACtDykG,EAAMD,EAAIroG,IAAMsoG,EAAMD,EAAIxkG,KAAS,GAAKwkG,EAAKroG,EAAG6D,GAChDykG,EAAMD,EAAIzkG,IAAS0kG,EAAMD,EAAIroG,KAAK,GAAKqoG,EAAKzkG,EAAM5D,GAEtD,MAAMy5E,EAAO4uB,EAAIroG,GACXuoG,EAAWD,EAAM7uB,GACvB,OAAa,CACT,GAAGz5E,UAAYsoG,EAAMD,EAAIroG,IAAMuoG,GAC/B,GAAGj/F,UAAYg/F,EAAMD,EAAI/+F,IAAMi/F,GAC/B,GAAIj/F,EAAItJ,EAAG,MACX,GAAKqoG,EAAKroG,EAAGsJ,EACjB,CACA++F,EAAIzkG,EAAO,GAAKykG,EAAI/+F,GACpB++F,EAAI/+F,GAAKmwE,EAEL51E,EAAQ7D,EAAI,GAAKsJ,EAAI1F,GACrBijG,GAAUwB,EAAKC,EAAOtoG,EAAG6D,GACzBgjG,GAAUwB,EAAKC,EAAO1kG,EAAM0F,EAAI,KAEhCu9F,GAAUwB,EAAKC,EAAO1kG,EAAM0F,EAAI,GAChCu9F,GAAUwB,EAAKC,EAAOtoG,EAAG6D,GAEjC,CACJ,CAEA,SAAS,GAAK2kG,EAAKxoG,EAAGsJ,GAClB,MAAMC,EAAMi/F,EAAIxoG,GAChBwoG,EAAIxoG,GAAKwoG,EAAIl/F,GACbk/F,EAAIl/F,GAAKC,CACb,CAEA,SAAS07F,GAAY19F,GACjB,OAAOA,EAAE,EACb,CACA,SAAS49F,GAAY59F,GACjB,OAAOA,EAAE,EACb,CC/dA,MAAM,GAAU,KAED,MAAM,GACnB,WAAAkD,GACEjL,KAAKs+F,IAAMt+F,KAAKu+F,IAChBv+F,KAAKw+F,IAAMx+F,KAAKy+F,IAAM,KACtBz+F,KAAKgD,EAAI,EACX,CACA,MAAA6yD,CAAO5vD,EAAGpD,GACR7C,KAAKgD,GAAK,IAAIhD,KAAKs+F,IAAMt+F,KAAKw+F,KAAOv4F,KAAKjG,KAAKu+F,IAAMv+F,KAAKy+F,KAAO57F,GACnE,CACA,SAAAkzD,GACmB,OAAb/1D,KAAKw+F,MACPx+F,KAAKw+F,IAAMx+F,KAAKs+F,IAAKt+F,KAAKy+F,IAAMz+F,KAAKu+F,IACrCv+F,KAAKgD,GAAK,IAEd,CACA,MAAA8yD,CAAO7vD,EAAGpD,GACR7C,KAAKgD,GAAK,IAAIhD,KAAKw+F,KAAOv4F,KAAKjG,KAAKy+F,KAAO57F,GAC7C,CACA,GAAA4lE,CAAIxiE,EAAGpD,EAAGgC,GAER,MAAMm0C,GADN/yC,GAAKA,IAAWpB,GAAKA,GAEfw4B,EAFEx6B,GAAKA,EAGb,GAAIgC,EAAI,EAAG,MAAM,IAAIwM,MAAM,mBACV,OAAbrR,KAAKw+F,IAAcx+F,KAAKgD,GAAK,IAAIg2C,KAAM3b,KAClC1zB,KAAKiE,IAAI5N,KAAKw+F,IAAMxlD,GAAM,IAAWrvC,KAAKiE,IAAI5N,KAAKy+F,IAAMphE,GAAM,MAASr9B,KAAKgD,GAAK,IAAMg2C,EAAK,IAAM3b,GACvGx4B,IACL7E,KAAKgD,GAAK,IAAI6B,KAAKA,WAAWoB,EAAIpB,KAAKhC,KAAKgC,KAAKA,WAAW7E,KAAKw+F,IAAMxlD,KAAMh5C,KAAKy+F,IAAMphE,IAC1F,CACA,IAAAutC,CAAK3kE,EAAGpD,EAAGkiD,EAAG94C,GACZjM,KAAKgD,GAAK,IAAIhD,KAAKs+F,IAAMt+F,KAAKw+F,KAAOv4F,KAAKjG,KAAKu+F,IAAMv+F,KAAKy+F,KAAO57F,MAAMkiD,MAAM94C,MAAM84C,IACrF,CACA,KAAAjhD,GACE,OAAO9D,KAAKgD,GAAK,IACnB,ECnCa,MAAMimG,GACnB,WAAAh+F,GACEjL,KAAKgD,EAAI,EACX,CACA,MAAA6yD,CAAO5vD,EAAGpD,GACR7C,KAAKgD,EAAEvD,KAAK,CAACwG,EAAGpD,GAClB,CACA,SAAAkzD,GACE/1D,KAAKgD,EAAEvD,KAAKO,KAAKgD,EAAE,GAAGgU,QACxB,CACA,MAAA8+C,CAAO7vD,EAAGpD,GACR7C,KAAKgD,EAAEvD,KAAK,CAACwG,EAAGpD,GAClB,CACA,KAAAiB,GACE,OAAO9D,KAAKgD,EAAE1C,OAASN,KAAKgD,EAAI,IAClC,ECZa,MAAMkmG,GACnB,WAAAj+F,CAAY0/B,GAAWw+D,EAAMC,EAAMC,EAAMC,GAAQ,CAAC,EAAG,EAAG,IAAK,MAC3D,MAAOD,GAAQA,KAAUF,GAAQA,KAAaG,GAAQA,KAAUF,GAAQA,IAAQ,MAAM,IAAI/3F,MAAM,kBAChGrR,KAAK2qC,SAAWA,EAChB3qC,KAAKupG,eAAiB,IAAI58F,aAAsC,EAAzBg+B,EAAS9uB,OAAOvb,QACvDN,KAAKyvC,QAAU,IAAI9iC,aAAsC,EAAzBg+B,EAAS9uB,OAAOvb,QAChDN,KAAKqpG,KAAOA,EAAMrpG,KAAKmpG,KAAOA,EAC9BnpG,KAAKspG,KAAOA,EAAMtpG,KAAKopG,KAAOA,EAC9BppG,KAAKwpG,OACP,CACA,MAAApgG,GAGE,OAFApJ,KAAK2qC,SAASvhC,SACdpJ,KAAKwpG,QACExpG,IACT,CACA,KAAAwpG,GACE,MAAO7+D,UAAU,OAAC9uB,EAAM,KAAEyrF,EAAI,UAAEj+D,GAAU,QAAEoG,GAAWzvC,KACvD,IAAIoN,EAAIC,EAGR,MAAMo8F,EAAgBzpG,KAAKypG,cAAgBzpG,KAAKupG,eAAe7pB,SAAS,EAAGr2C,EAAU/oC,OAAS,EAAI,GAClG,IAAK,IAAwC2F,EAAGpD,EAAvCrC,EAAI,EAAGsJ,EAAI,EAAGrG,EAAI4lC,EAAU/oC,OAAcE,EAAIiD,EAAGjD,GAAK,EAAGsJ,GAAK,EAAG,CACxE,MAAM6E,EAAoB,EAAf06B,EAAU7oC,GACf2gD,EAAwB,EAAnB9X,EAAU7oC,EAAI,GACnBkvF,EAAwB,EAAnBrmD,EAAU7oC,EAAI,GACnB+vC,EAAK10B,EAAOlN,GACZmG,EAAK+G,EAAOlN,EAAK,GACjB6hC,EAAK30B,EAAOslC,GACZpsC,EAAK8G,EAAOslC,EAAK,GACjB3E,EAAK3gC,EAAO6zE,GACZjzC,EAAK5gC,EAAO6zE,EAAK,GAEjBv7C,EAAK3D,EAAKD,EACV6D,EAAKr/B,EAAKD,EACVwF,EAAKkiC,EAAKjM,EACVi3D,EAAK/qD,EAAK3nC,EACV/J,EAA2B,GAArBopC,EAAKqzD,EAAKpzD,EAAK95B,GAE3B,GAAI3Q,KAAKiE,IAAI7C,GAAM,KAAM,CAIvB,QAAWjK,IAAPsM,EAAkB,CACpBA,EAAKC,EAAK,EACV,IAAK,MAAM7M,KAAK8mG,EAAMl6F,GAAMyO,EAAW,EAAJrb,GAAQ6M,GAAMwO,EAAW,EAAJrb,EAAQ,GAChE4M,GAAMk6F,EAAKhnG,OAAQ+M,GAAMi6F,EAAKhnG,MAChC,CACA,MAAMiE,EAAI,IAAMoF,KAAK46F,MAAMn3F,EAAKmjC,GAAMi3D,GAAMn6F,EAAKyH,GAAMwF,GACvDrU,GAAKsqC,EAAKiM,GAAM,EAAIj4C,EAAIijG,EACxB3kG,GAAKiS,EAAK2nC,GAAM,EAAIl4C,EAAI+V,CAC1B,KAAO,CACL,MAAM9S,EAAI,EAAIuD,EACR03F,EAAKtuD,EAAKA,EAAKC,EAAKA,EACpBqzD,EAAKntF,EAAKA,EAAKktF,EAAKA,EAC1BvhG,EAAIsqC,GAAMi3D,EAAK/E,EAAKruD,EAAKqzD,GAAMjgG,EAC/B3E,EAAIiS,GAAMq/B,EAAKszD,EAAKntF,EAAKmoF,GAAMj7F,CACjC,CACAiiG,EAAc3/F,GAAK7D,EACnBwjG,EAAc3/F,EAAI,GAAKjH,CACzB,CAGA,IACIu7D,EACAplB,EACA3b,EAHApxB,EAAIq7F,EAAKA,EAAKhnG,OAAS,GACnBkI,EAAS,EAAJyD,EACLskC,EAAK10B,EAAO,EAAI5P,GAChB6I,EAAK+G,EAAO,EAAI5P,EAAI,GAC5BwjC,EAAQhW,KAAK,GACb,IAAK,IAAIj5B,EAAI,EAAGA,EAAI8mG,EAAKhnG,SAAUE,EACjCyL,EAAIq7F,EAAK9mG,GACT49D,EAAK51D,EAAIwwC,EAAKzI,EAAIlT,EAAKvoB,EACvBtM,EAAS,EAAJyD,EAAOskC,EAAK10B,EAAO,EAAI5P,GAAI6I,EAAK+G,EAAO,EAAI5P,EAAI,GACpDwjC,EAAQ2uB,EAAK,GAAK3uB,EAAQjnC,GAAM60B,EAAKvoB,EACrC26B,EAAQ2uB,EAAK,GAAK3uB,EAAQjnC,EAAK,GAAK+nC,EAAKyI,CAE7C,CACA,MAAA/Z,CAAOyN,GACL,MAAMg0D,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,GAC/C6pC,UAAU,UAACC,EAAS,QAAE8+D,EAAO,KAAEpC,GAAK,cAAEmC,EAAa,QAAEh6D,GAAWzvC,KACvE,GAAIsnG,EAAKhnG,QAAU,EAAG,OAAO,KAC7B,IAAK,IAAIE,EAAI,EAAGiD,EAAImnC,EAAUtqC,OAAQE,EAAIiD,IAAKjD,EAAG,CAChD,MAAMsJ,EAAI8gC,EAAUpqC,GACpB,GAAIsJ,EAAItJ,EAAG,SACX,MAAMmpG,EAAyB,EAApBhgG,KAAKC,MAAMpJ,EAAI,GACpBopG,EAAyB,EAApBjgG,KAAKC,MAAME,EAAI,GACpBirC,EAAK00D,EAAcE,GACnB30D,EAAKy0D,EAAcE,EAAK,GACxB3G,EAAKyG,EAAcG,GACnB3G,EAAKwG,EAAcG,EAAK,GAC9B5pG,KAAK6pG,eAAe90D,EAAIC,EAAIguD,EAAIC,EAAIv2D,EACtC,CACA,IAAIo9D,EAAIC,EAAKzC,EAAKA,EAAKhnG,OAAS,GAChC,IAAK,IAAIE,EAAI,EAAGA,EAAI8mG,EAAKhnG,SAAUE,EAAG,CACpCspG,EAAKC,EAAIA,EAAKzC,EAAK9mG,GACnB,MAAMsC,EAAkC,EAA9B6G,KAAKC,MAAM8/F,EAAQK,GAAM,GAC7B9jG,EAAIwjG,EAAc3mG,GAClBD,EAAI4mG,EAAc3mG,EAAI,GACtBY,EAAS,EAALomG,EACJ/hG,EAAI/H,KAAKgqG,SAAS/jG,EAAGpD,EAAG4sC,EAAQ/rC,EAAI,GAAI+rC,EAAQ/rC,EAAI,IACtDqE,GAAG/H,KAAK6pG,eAAe5jG,EAAGpD,EAAGkF,EAAE,GAAIA,EAAE,GAAI2kC,EAC/C,CACA,OAAOg0D,GAAUA,EAAO58F,OAC1B,CACA,YAAAmmG,CAAav9D,GACX,MAAMg0D,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,EAEtD,OADA4rC,EAAQk+B,KAAK5qE,KAAKmpG,KAAMnpG,KAAKopG,KAAMppG,KAAKqpG,KAAOrpG,KAAKmpG,KAAMnpG,KAAKspG,KAAOtpG,KAAKopG,MACpE1I,GAAUA,EAAO58F,OAC1B,CACA,UAAAomG,CAAW1pG,EAAGksC,GACZ,MAAMg0D,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,EAChD+a,EAAS7b,KAAKmqG,MAAM3pG,GAC1B,GAAe,OAAXqb,IAAoBA,EAAOvb,OAAQ,OACvCosC,EAAQmpB,OAAOh6C,EAAO,GAAIA,EAAO,IACjC,IAAIpY,EAAIoY,EAAOvb,OACf,KAAOub,EAAO,KAAOA,EAAOpY,EAAE,IAAMoY,EAAO,KAAOA,EAAOpY,EAAE,IAAMA,EAAI,GAAGA,GAAK,EAC7E,IAAK,IAAIjD,EAAI,EAAGA,EAAIiD,EAAGjD,GAAK,EACtBqb,EAAOrb,KAAOqb,EAAOrb,EAAE,IAAMqb,EAAOrb,EAAE,KAAOqb,EAAOrb,EAAE,IACxDksC,EAAQopB,OAAOj6C,EAAOrb,GAAIqb,EAAOrb,EAAI,IAGzC,OADAksC,EAAQqpB,YACD2qC,GAAUA,EAAO58F,OAC1B,CACA,aAACsmG,GACC,MAAOz/D,UAAU,OAAC9uB,IAAW7b,KAC7B,IAAK,IAAIQ,EAAI,EAAGiD,EAAIoY,EAAOvb,OAAS,EAAGE,EAAIiD,IAAKjD,EAAG,CACjD,MAAMsnC,EAAO9nC,KAAKyyC,YAAYjyC,GAC1BsnC,IAAMA,EAAKvgC,MAAQ/G,QAASsnC,EAClC,CACF,CACA,WAAA2K,CAAYjyC,GACV,MAAMq9B,EAAU,IAAIorE,GAEpB,OADAjpG,KAAKkqG,WAAW1pG,EAAGq9B,GACZA,EAAQ/5B,OACjB,CACA,cAAA+lG,CAAe7wD,EAAI3b,EAAIkT,EAAIz7B,EAAI43B,GAC7B,IAAI0W,EACJ,MAAMinD,EAAKrqG,KAAKsqG,YAAYtxD,EAAI3b,GAC1BktE,EAAKvqG,KAAKsqG,YAAY/5D,EAAIz7B,GACrB,IAAPu1F,GAAmB,IAAPE,GACd79D,EAAQmpB,OAAO7c,EAAI3b,GACnBqP,EAAQopB,OAAOvlB,EAAIz7B,KACVsuC,EAAIpjD,KAAKwqG,aAAaxxD,EAAI3b,EAAIkT,EAAIz7B,EAAIu1F,EAAIE,MACnD79D,EAAQmpB,OAAOzS,EAAE,GAAIA,EAAE,IACvB1W,EAAQopB,OAAO1S,EAAE,GAAIA,EAAE,IAE3B,CACA,QAAA98C,CAAS9F,EAAGyF,EAAGpD,GACb,OAAKoD,GAAKA,IAASA,IAAOpD,GAAKA,IAASA,GACjC7C,KAAK2qC,SAAS8/D,MAAMjqG,EAAGyF,EAAGpD,KAAOrC,CAC1C,CACA,UAACk4C,CAAUl4C,GACT,MAAMkqG,EAAK1qG,KAAKmqG,MAAM3pG,GACtB,GAAIkqG,EAAI,IAAK,MAAM5gG,KAAK9J,KAAK2qC,SAAS+N,UAAUl4C,GAAI,CAClD,MAAMmqG,EAAK3qG,KAAKmqG,MAAMrgG,GAEtB,GAAI6gG,EAAIC,EAAM,IAAK,IAAIC,EAAK,EAAGC,EAAKJ,EAAGpqG,OAAQuqG,EAAKC,EAAID,GAAM,EAC5D,IAAK,IAAIE,EAAK,EAAGC,EAAKL,EAAGrqG,OAAQyqG,EAAKC,EAAID,GAAM,EAC9C,GAAIL,EAAGG,KAAQF,EAAGI,IACXL,EAAGG,EAAK,KAAOF,EAAGI,EAAK,IACvBL,GAAIG,EAAK,GAAKC,KAAQH,GAAII,EAAKC,EAAK,GAAKA,IACzCN,GAAIG,EAAK,GAAKC,KAAQH,GAAII,EAAKC,EAAK,GAAKA,GAAK,OAC7ClhG,EACN,MAAM8gG,CACR,CAGN,CACF,CACA,KAAAK,CAAMzqG,GACJ,MAAM,cAACipG,EAAe9+D,UAAU,QAAC++D,EAAO,UAAE9+D,EAAS,UAAEvB,IAAcrpC,KAC7Dw7F,EAAKkO,EAAQlpG,GACnB,IAAY,IAARg7F,EAAW,OAAO,KACtB,MAAM3/E,EAAS,GACf,IAAI7X,EAAIw3F,EACR,EAAG,CACD,MAAM14F,EAAI6G,KAAKC,MAAM5F,EAAI,GAGzB,GAFA6X,EAAOpc,KAAKgqG,EAAkB,EAAJ3mG,GAAQ2mG,EAAkB,EAAJ3mG,EAAQ,IACxDkB,EAAIA,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,EAC1BqlC,EAAUrlC,KAAOxD,EAAG,MACxBwD,EAAI4mC,EAAU5mC,EAChB,OAASA,IAAMw3F,IAAa,IAAPx3F,GACrB,OAAO6X,CACT,CACA,KAAAsuF,CAAM3pG,GAEJ,GAAU,IAANA,GAAyC,IAA9BR,KAAK2qC,SAAS28D,KAAKhnG,OAChC,MAAO,CAACN,KAAKqpG,KAAMrpG,KAAKopG,KAAMppG,KAAKqpG,KAAMrpG,KAAKspG,KAAMtpG,KAAKmpG,KAAMnpG,KAAKspG,KAAMtpG,KAAKmpG,KAAMnpG,KAAKopG,MAE5F,MAAMvtF,EAAS7b,KAAKirG,MAAMzqG,GAC1B,GAAe,OAAXqb,EAAiB,OAAO,KAC5B,MAAO4zB,QAASmxC,GAAK5gF,KACf0D,EAAQ,EAAJlD,EACV,OAAOR,KAAKkrG,UAAUtqB,EAAEl9E,IAAMk9E,EAAEl9E,EAAI,GAC9B1D,KAAKmrG,cAAc3qG,EAAGqb,EAAQ+kE,EAAEl9E,GAAIk9E,EAAEl9E,EAAI,GAAIk9E,EAAEl9E,EAAI,GAAIk9E,EAAEl9E,EAAI,IAC9D1D,KAAKorG,YAAY5qG,EAAGqb,GAC5B,CACA,WAAAuvF,CAAY5qG,EAAGqb,GACb,MAAMpY,EAAIoY,EAAOvb,OACjB,IACI04C,EAAI3b,EACJgtE,EACA7O,EAHA6P,EAAI,KACI96D,EAAK10B,EAAOpY,EAAI,GAAIqR,EAAK+G,EAAOpY,EAAI,GACxC8mG,EAAKvqG,KAAKsqG,YAAY/5D,EAAIz7B,GAC1B2mF,EAAK,EACb,IAAK,IAAI3xF,EAAI,EAAGA,EAAIrG,EAAGqG,GAAK,EAG1B,GAFAkvC,EAAKzI,EAAIlT,EAAKvoB,EAAIy7B,EAAK10B,EAAO/R,GAAIgL,EAAK+G,EAAO/R,EAAI,GAClDugG,EAAKE,EAAIA,EAAKvqG,KAAKsqG,YAAY/5D,EAAIz7B,GACxB,IAAPu1F,GAAmB,IAAPE,EACd/O,EAAKC,EAAIA,EAAK,EACV4P,EAAGA,EAAE5rG,KAAK8wC,EAAIz7B,GACbu2F,EAAI,CAAC96D,EAAIz7B,OACT,CACL,IAAIsuC,EAAGkoD,EAAKC,EAAKC,EAAKC,EACtB,GAAW,IAAPpB,EAAU,CACZ,GAAwD,QAAnDjnD,EAAIpjD,KAAKwqG,aAAaxxD,EAAI3b,EAAIkT,EAAIz7B,EAAIu1F,EAAIE,IAAe,UAC7De,EAAKC,EAAKC,EAAKC,GAAOroD,CACzB,KAAO,CACL,GAAwD,QAAnDA,EAAIpjD,KAAKwqG,aAAaj6D,EAAIz7B,EAAIkkC,EAAI3b,EAAIktE,EAAIF,IAAe,UAC7DmB,EAAKC,EAAKH,EAAKC,GAAOnoD,EACvBo4C,EAAKC,EAAIA,EAAKz7F,KAAK0rG,UAAUJ,EAAKC,GAC9B/P,GAAMC,GAAIz7F,KAAK2rG,MAAMnrG,EAAGg7F,EAAIC,EAAI4P,EAAGA,EAAE/qG,QACrC+qG,EAAGA,EAAE5rG,KAAK6rG,EAAKC,GACdF,EAAI,CAACC,EAAKC,EACjB,CACA/P,EAAKC,EAAIA,EAAKz7F,KAAK0rG,UAAUF,EAAKC,GAC9BjQ,GAAMC,GAAIz7F,KAAK2rG,MAAMnrG,EAAGg7F,EAAIC,EAAI4P,EAAGA,EAAE/qG,QACrC+qG,EAAGA,EAAE5rG,KAAK+rG,EAAKC,GACdJ,EAAI,CAACG,EAAKC,EACjB,CAEF,GAAIJ,EACF7P,EAAKC,EAAIA,EAAKz7F,KAAK0rG,UAAUL,EAAE,GAAIA,EAAE,IACjC7P,GAAMC,GAAIz7F,KAAK2rG,MAAMnrG,EAAGg7F,EAAIC,EAAI4P,EAAGA,EAAE/qG,aACpC,GAAIN,KAAKsG,SAAS9F,GAAIR,KAAKmpG,KAAOnpG,KAAKqpG,MAAQ,GAAIrpG,KAAKopG,KAAOppG,KAAKspG,MAAQ,GACjF,MAAO,CAACtpG,KAAKqpG,KAAMrpG,KAAKopG,KAAMppG,KAAKqpG,KAAMrpG,KAAKspG,KAAMtpG,KAAKmpG,KAAMnpG,KAAKspG,KAAMtpG,KAAKmpG,KAAMnpG,KAAKopG,MAE5F,OAAOiC,CACT,CACA,YAAAb,CAAaxxD,EAAI3b,EAAIkT,EAAIz7B,EAAIu1F,EAAIE,GAE/B,MAAMqB,EAAOvB,EAAKE,EAElB,IADIqB,KAAO5yD,EAAI3b,EAAIkT,EAAIz7B,EAAIu1F,EAAIE,GAAM,CAACh6D,EAAIz7B,EAAIkkC,EAAI3b,EAAIktE,EAAIF,MAC7C,CACX,GAAW,IAAPA,GAAmB,IAAPE,EAAU,OAAOqB,EAAO,CAACr7D,EAAIz7B,EAAIkkC,EAAI3b,GAAM,CAAC2b,EAAI3b,EAAIkT,EAAIz7B,GACxE,GAAIu1F,EAAKE,EAAI,OAAO,KACpB,IAAItkG,EAAGpD,EAAGoL,EAAIo8F,GAAME,EACZ,EAAJt8F,GAAYhI,EAAI+yC,GAAMzI,EAAKyI,IAAOh5C,KAAKspG,KAAOjsE,IAAOvoB,EAAKuoB,GAAKx6B,EAAI7C,KAAKspG,MAC/D,EAAJr7F,GAAYhI,EAAI+yC,GAAMzI,EAAKyI,IAAOh5C,KAAKopG,KAAO/rE,IAAOvoB,EAAKuoB,GAAKx6B,EAAI7C,KAAKopG,MACpE,EAAJn7F,GAAYpL,EAAIw6B,GAAMvoB,EAAKuoB,IAAOr9B,KAAKqpG,KAAOrwD,IAAOzI,EAAKyI,GAAK/yC,EAAIjG,KAAKqpG,OAC5ExmG,EAAIw6B,GAAMvoB,EAAKuoB,IAAOr9B,KAAKmpG,KAAOnwD,IAAOzI,EAAKyI,GAAK/yC,EAAIjG,KAAKmpG,MAC7DkB,GAAIrxD,EAAK/yC,EAAGo3B,EAAKx6B,EAAGwnG,EAAKrqG,KAAKsqG,YAAYtxD,EAAI3b,KAC7CkT,EAAKtqC,EAAG6O,EAAKjS,EAAG0nG,EAAKvqG,KAAKsqG,YAAY/5D,EAAIz7B,GACjD,CACF,CACA,aAAAq2F,CAAc3qG,EAAGqb,EAAQgwF,EAAKC,EAAKC,EAAKC,GACtC,IAA4BjkG,EAAxBsjG,EAAI9xF,MAAM+vB,KAAKztB,GAGnB,IAFI9T,EAAI/H,KAAKgqG,SAASqB,EAAE,GAAIA,EAAE,GAAIQ,EAAKC,KAAMT,EAAE5vF,QAAQ1T,EAAE,GAAIA,EAAE,KAC3DA,EAAI/H,KAAKgqG,SAASqB,EAAEA,EAAE/qG,OAAS,GAAI+qG,EAAEA,EAAE/qG,OAAS,GAAIyrG,EAAKC,KAAMX,EAAE5rG,KAAKsI,EAAE,GAAIA,EAAE,IAC9EsjG,EAAIrrG,KAAKorG,YAAY5qG,EAAG6qG,GAC1B,IAAK,IAAyBhB,EAArBvgG,EAAI,EAAGrG,EAAI4nG,EAAE/qG,OAAYiqG,EAAKvqG,KAAK0rG,UAAUL,EAAE5nG,EAAI,GAAI4nG,EAAE5nG,EAAI,IAAKqG,EAAIrG,EAAGqG,GAAK,EACrFugG,EAAKE,EAAIA,EAAKvqG,KAAK0rG,UAAUL,EAAEvhG,GAAIuhG,EAAEvhG,EAAI,IACrCugG,GAAME,IAAIzgG,EAAI9J,KAAK2rG,MAAMnrG,EAAG6pG,EAAIE,EAAIc,EAAGvhG,GAAIrG,EAAI4nG,EAAE/qG,aAE9CN,KAAKsG,SAAS9F,GAAIR,KAAKmpG,KAAOnpG,KAAKqpG,MAAQ,GAAIrpG,KAAKopG,KAAOppG,KAAKspG,MAAQ,KACjF+B,EAAI,CAACrrG,KAAKmpG,KAAMnpG,KAAKopG,KAAMppG,KAAKqpG,KAAMrpG,KAAKopG,KAAMppG,KAAKqpG,KAAMrpG,KAAKspG,KAAMtpG,KAAKmpG,KAAMnpG,KAAKspG,OAEzF,OAAO+B,CACT,CACA,KAAAM,CAAMnrG,EAAGg7F,EAAIC,EAAI4P,EAAGvhG,GAClB,KAAO0xF,IAAOC,GAAI,CAChB,IAAIx1F,EAAGpD,EACP,OAAQ24F,GACN,KAAK,EAAQA,EAAK,EAAQ,SAC1B,KAAK,EAAQA,EAAK,EAAQv1F,EAAIjG,KAAKqpG,KAAMxmG,EAAI7C,KAAKopG,KAAM,MACxD,KAAK,EAAQ5N,EAAK,EAAQ,SAC1B,KAAK,EAAQA,EAAK,GAAQv1F,EAAIjG,KAAKqpG,KAAMxmG,EAAI7C,KAAKspG,KAAM,MACxD,KAAK,GAAQ9N,EAAK,EAAQ,SAC1B,KAAK,EAAQA,EAAK,EAAQv1F,EAAIjG,KAAKmpG,KAAMtmG,EAAI7C,KAAKspG,KAAM,MACxD,KAAK,EAAQ9N,EAAK,EAAQ,SAC1B,KAAK,EAAQA,EAAK,EAAQv1F,EAAIjG,KAAKmpG,KAAMtmG,EAAI7C,KAAKopG,KAI/CiC,EAAEvhG,KAAO7D,GAAKolG,EAAEvhG,EAAI,KAAOjH,IAAM7C,KAAKsG,SAAS9F,EAAGyF,EAAGpD,KACxDwoG,EAAEhzF,OAAOvO,EAAG,EAAG7D,EAAGpD,GAAIiH,GAAK,EAE/B,CACA,OAAOA,CACT,CACA,QAAAkgG,CAAShxD,EAAI3b,EAAIsH,EAAIC,GACnB,IAAkB32B,EAAGhI,EAAGpD,EAApBC,EAAIu2C,IACR,GAAIzU,EAAK,EAAG,CACV,GAAIvH,GAAMr9B,KAAKopG,KAAM,OAAO,MACvBn7F,GAAKjO,KAAKopG,KAAO/rE,GAAMuH,GAAM9hC,IAAGD,EAAI7C,KAAKopG,KAAMnjG,EAAI+yC,GAAMl2C,EAAImL,GAAK02B,EACzE,MAAO,GAAIC,EAAK,EAAG,CACjB,GAAIvH,GAAMr9B,KAAKspG,KAAM,OAAO,MACvBr7F,GAAKjO,KAAKspG,KAAOjsE,GAAMuH,GAAM9hC,IAAGD,EAAI7C,KAAKspG,KAAMrjG,EAAI+yC,GAAMl2C,EAAImL,GAAK02B,EACzE,CACA,GAAIA,EAAK,EAAG,CACV,GAAIqU,GAAMh5C,KAAKqpG,KAAM,OAAO,MACvBp7F,GAAKjO,KAAKqpG,KAAOrwD,GAAMrU,GAAM7hC,IAAGmD,EAAIjG,KAAKqpG,KAAMxmG,EAAIw6B,GAAMv6B,EAAImL,GAAK22B,EACzE,MAAO,GAAID,EAAK,EAAG,CACjB,GAAIqU,GAAMh5C,KAAKmpG,KAAM,OAAO,MACvBl7F,GAAKjO,KAAKmpG,KAAOnwD,GAAMrU,GAAM7hC,IAAGmD,EAAIjG,KAAKmpG,KAAMtmG,EAAIw6B,GAAMv6B,EAAImL,GAAK22B,EACzE,CACA,MAAO,CAAC3+B,EAAGpD,EACb,CACA,SAAA6oG,CAAUzlG,EAAGpD,GACX,OAAQoD,IAAMjG,KAAKmpG,KAAO,EACpBljG,IAAMjG,KAAKqpG,KAAO,EAAS,IAC1BxmG,IAAM7C,KAAKopG,KAAO,EACnBvmG,IAAM7C,KAAKspG,KAAO,EAAS,EACnC,CACA,WAAAgB,CAAYrkG,EAAGpD,GACb,OAAQoD,EAAIjG,KAAKmpG,KAAO,EAClBljG,EAAIjG,KAAKqpG,KAAO,EAAS,IACxBxmG,EAAI7C,KAAKopG,KAAO,EACjBvmG,EAAI7C,KAAKspG,KAAO,EAAS,EACjC,CACA,SAAA4B,CAAUG,GACR,GAAIA,GAAKA,EAAE/qG,OAAS,EAAG,CACrB,IAAK,IAAIE,EAAI,EAAGA,EAAI6qG,EAAE/qG,OAAQE,GAAI,EAAG,CACnC,MAAMsJ,GAAKtJ,EAAI,GAAK6qG,EAAE/qG,OAAQU,GAAKR,EAAI,GAAK6qG,EAAE/qG,QAC1C+qG,EAAE7qG,KAAO6qG,EAAEvhG,IAAMuhG,EAAEvhG,KAAOuhG,EAAErqG,IAAMqqG,EAAE7qG,EAAI,KAAO6qG,EAAEvhG,EAAI,IAAMuhG,EAAEvhG,EAAI,KAAOuhG,EAAErqG,EAAI,MAChFqqG,EAAEhzF,OAAOvO,EAAG,GAAItJ,GAAK,EAEzB,CACK6qG,EAAE/qG,SAAQ+qG,EAAI,KACrB,CACA,OAAOA,CACT,ECrUF,MAAM,GAAM,EAAI1hG,KAAK2qC,GAAIzpC,GAAMlB,KAAKkB,IAEpC,SAASohG,GAAOlkG,GACd,OAAOA,EAAE,EACX,CAEA,SAASmkG,GAAOnkG,GACd,OAAOA,EAAE,EACX,CAgBA,SAASokG,GAAOlmG,EAAGpD,EAAGgC,GACpB,MAAO,CAACoB,EAAI0D,KAAK8qC,IAAIxuC,EAAIpD,GAAKgC,EAAGhC,EAAI8G,KAAK6qC,IAAIvuC,EAAIpD,GAAKgC,EACzD,CAEe,MAAMunG,GACnB,WAAO9iE,CAAKztB,EAAQu0D,EAAK67B,GAAQ57B,EAAK67B,GAAQvoB,GAC5C,OAAO,IAAIyoB,GAAS,WAAYvwF,EAkMpC,SAAmBA,EAAQu0D,EAAIC,EAAIsT,GACjC,MAAMlgF,EAAIoY,EAAOvb,OACXs6E,EAAQ,IAAIjuE,aAAiB,EAAJlJ,GAC/B,IAAK,IAAIjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG,CAC1B,MAAMuH,EAAI8T,EAAOrb,GACjBo6E,EAAU,EAAJp6E,GAAS4vE,EAAG5tE,KAAKmhF,EAAM57E,EAAGvH,EAAGqb,GACnC++D,EAAU,EAAJp6E,EAAQ,GAAK6vE,EAAG7tE,KAAKmhF,EAAM57E,EAAGvH,EAAGqb,EACzC,CACA,OAAO++D,CACT,CA1MUyxB,CAAUxwF,EAAQu0D,EAAIC,EAAIsT,GAC1Bh3E,aAAa28B,KA2MvB,UAAuBztB,EAAQu0D,EAAIC,EAAIsT,GACrC,IAAInjF,EAAI,EACR,IAAK,MAAMuH,KAAK8T,QACRu0D,EAAG5tE,KAAKmhF,EAAM57E,EAAGvH,EAAGqb,SACpBw0D,EAAG7tE,KAAKmhF,EAAM57E,EAAGvH,EAAGqb,KACxBrb,CAEN,CAlN4B8rG,CAAazwF,EAAQu0D,EAAIC,EAAIsT,IACvD,CACA,WAAA14E,CAAY4Q,GACV7b,KAAKusG,YAAc,IAAIhH,GAAW1pF,GAClC7b,KAAK0pG,QAAU,IAAI1D,WAAWnqF,EAAOvb,OAAS,GAC9CN,KAAKwsG,WAAa,IAAIxG,WAAWnqF,EAAOvb,OAAS,GACjDN,KAAK6b,OAAS7b,KAAKusG,YAAY3G,OAC/B5lG,KAAKwpG,OACP,CACA,MAAApgG,GAGE,OAFApJ,KAAKusG,YAAYnjG,SACjBpJ,KAAKwpG,QACExpG,IACT,CACA,KAAAwpG,GACE,MAAMhiG,EAAIxH,KAAKusG,YAAa1wF,EAAS7b,KAAK6b,OAG1C,GAAIrU,EAAE8/F,MAAQ9/F,EAAE8/F,KAAKhnG,OAAS,GAvClC,SAAmBkH,GACjB,MAAM,UAAC6hC,EAAS,OAAEu8D,GAAUp+F,EAC5B,IAAK,IAAIhH,EAAI,EAAGA,EAAI6oC,EAAU/oC,OAAQE,GAAK,EAAG,CAC5C,MAAM+D,EAAI,EAAI8kC,EAAU7oC,GAClBgE,EAAI,EAAI6kC,EAAU7oC,EAAI,GACtByN,EAAI,EAAIo7B,EAAU7oC,EAAI,GAG5B,IAFeolG,EAAO33F,GAAK23F,EAAOrhG,KAAOqhG,EAAOphG,EAAI,GAAKohG,EAAOrhG,EAAI,KACrDqhG,EAAOphG,GAAKohG,EAAOrhG,KAAOqhG,EAAO33F,EAAI,GAAK23F,EAAOrhG,EAAI,IACxD,MAAO,OAAO,CAC5B,CACA,OAAO,CACT,CA4BuC,CAAUiD,GAAI,CAC/CxH,KAAKmjG,UAAY6C,WAAW18D,KAAK,CAAChpC,OAAQub,EAAOvb,OAAO,IAAI,CAAC0C,EAAExC,IAAMA,IAClE2H,MAAK,CAAC3H,EAAGsJ,IAAM+R,EAAO,EAAIrb,GAAKqb,EAAO,EAAI/R,IAAM+R,EAAO,EAAIrb,EAAI,GAAKqb,EAAO,EAAI/R,EAAI,KACtF,MAAM9F,EAAIhE,KAAKmjG,UAAU,GAAIvgG,EAAI5C,KAAKmjG,UAAUnjG,KAAKmjG,UAAU7iG,OAAS,GACtEmsG,EAAS,CAAE5wF,EAAO,EAAI7X,GAAI6X,EAAO,EAAI7X,EAAI,GAAI6X,EAAO,EAAIjZ,GAAIiZ,EAAO,EAAIjZ,EAAI,IAC3EiC,EAAI,KAAO8E,KAAK+iG,MAAMD,EAAO,GAAKA,EAAO,GAAIA,EAAO,GAAKA,EAAO,IAClE,IAAK,IAAIjsG,EAAI,EAAGiD,EAAIoY,EAAOvb,OAAS,EAAGE,EAAIiD,IAAKjD,EAAG,CACjD,MAAMuH,EAAIokG,GAAOtwF,EAAO,EAAIrb,GAAIqb,EAAO,EAAIrb,EAAI,GAAIqE,GACnDgX,EAAO,EAAIrb,GAAKuH,EAAE,GAClB8T,EAAO,EAAIrb,EAAI,GAAKuH,EAAE,EACxB,CACA/H,KAAKusG,YAAc,IAAIhH,GAAW1pF,EACpC,aACS7b,KAAKmjG,UAGd,MAAMv4D,EAAY5qC,KAAK4qC,UAAY5qC,KAAKusG,YAAY3hE,UAC9C08D,EAAOtnG,KAAKsnG,KAAOtnG,KAAKusG,YAAYjF,KACpCj+D,EAAYrpC,KAAKqpC,UAAYrpC,KAAKusG,YAAYljE,UAC9CqgE,EAAU1pG,KAAK0pG,QAAQjwE,MAAM,GAC7BkzE,EAAY3sG,KAAKwsG,WAAW/yE,MAAM,GAKxC,IAAK,IAAIz1B,EAAI,EAAGP,EAAImnC,EAAUtqC,OAAQ0D,EAAIP,IAAKO,EAAG,CAChD,MAAM+D,EAAIshC,EAAUrlC,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,IACxB,IAAlB4mC,EAAU5mC,KAA6B,IAAhB0lG,EAAQ3hG,KAAW2hG,EAAQ3hG,GAAK/D,EAC7D,CACA,IAAK,IAAIxD,EAAI,EAAGiD,EAAI6jG,EAAKhnG,OAAQE,EAAIiD,IAAKjD,EACxCmsG,EAAUrF,EAAK9mG,IAAMA,EAInB8mG,EAAKhnG,QAAU,GAAKgnG,EAAKhnG,OAAS,IACpCN,KAAKqpC,UAAY,IAAI28D,WAAW,GAAGvsE,MAAM,GACzCz5B,KAAK4qC,UAAY,IAAIo7D,WAAW,GAAGvsE,MAAM,GACzCz5B,KAAKqpC,UAAU,GAAKi+D,EAAK,GACzBoC,EAAQpC,EAAK,IAAM,EACC,IAAhBA,EAAKhnG,SACPopG,EAAQpC,EAAK,IAAM,EACnBtnG,KAAKqpC,UAAU,GAAKi+D,EAAK,GACzBtnG,KAAKqpC,UAAU,GAAKi+D,EAAK,IAG/B,CACA,OAAA/0D,CAAQk6D,GACN,OAAO,IAAIvD,GAAQlpG,KAAMysG,EAC3B,CACA,UAAC/zD,CAAUl4C,GACT,MAAM,QAACkpG,EAAO,KAAEpC,EAAI,WAAEkF,EAAU,UAAE5hE,EAAS,UAAEvB,EAAS,UAAE85D,GAAanjG,KAGrE,GAAImjG,EAAW,CACb,MAAMv+F,EAAIu+F,EAAU9rF,QAAQ7W,GAG5B,OAFIoE,EAAI,UAASu+F,EAAUv+F,EAAI,SAC3BA,EAAIu+F,EAAU7iG,OAAS,UAAS6iG,EAAUv+F,EAAI,IAEpD,CAEA,MAAM42F,EAAKkO,EAAQlpG,GACnB,IAAY,IAARg7F,EAAW,OACf,IAAIx3F,EAAIw3F,EAAIp9B,GAAM,EAClB,EAAG,CAGD,SAFMA,EAAK/0B,EAAUrlC,GACrBA,EAAIA,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,EAC1BqlC,EAAUrlC,KAAOxD,EAAG,OAExB,GADAwD,EAAI4mC,EAAU5mC,IACH,IAAPA,EAAU,CACZ,MAAM+D,EAAIu/F,GAAMkF,EAAWhsG,GAAK,GAAK8mG,EAAKhnG,QAE1C,YADIyH,IAAMq2D,UAAUr2D,GAEtB,CACF,OAAS/D,IAAMw3F,EACjB,CACA,IAAAn1F,CAAKJ,EAAGpD,EAAGrC,EAAI,GACb,IAAKyF,GAAKA,IAASA,IAAOpD,GAAKA,IAASA,EAAI,OAAQ,EACpD,MAAM28E,EAAKh/E,EACX,IAAIyN,EACJ,MAAQA,EAAIjO,KAAKyqG,MAAMjqG,EAAGyF,EAAGpD,KAAO,GAAKoL,IAAMzN,GAAKyN,IAAMuxE,GAAIh/E,EAAIyN,EAClE,OAAOA,CACT,CACA,KAAAw8F,CAAMjqG,EAAGyF,EAAGpD,GACV,MAAM,QAAC6mG,EAAO,KAAEpC,EAAI,WAAEkF,EAAU,UAAE5hE,EAAS,UAAEvB,EAAS,OAAExtB,GAAU7b,KAClE,IAAoB,IAAhB0pG,EAAQlpG,KAAcqb,EAAOvb,OAAQ,OAAQE,EAAI,IAAMqb,EAAOvb,QAAU,GAC5E,IAAI2N,EAAIzN,EACJosG,EAAK/hG,GAAI5E,EAAI4V,EAAW,EAAJrb,GAAQ,GAAKqK,GAAIhI,EAAIgZ,EAAW,EAAJrb,EAAQ,GAAI,GAChE,MAAMg7F,EAAKkO,EAAQlpG,GACnB,IAAIwD,EAAIw3F,EACR,EAAG,CACD,IAAI14F,EAAIumC,EAAUrlC,GAClB,MAAMuvC,EAAK1oC,GAAI5E,EAAI4V,EAAW,EAAJ/Y,GAAQ,GAAK+H,GAAIhI,EAAIgZ,EAAW,EAAJ/Y,EAAQ,GAAI,GAGlE,GAFIywC,EAAKq5D,IAAIA,EAAKr5D,EAAItlC,EAAInL,GAC1BkB,EAAIA,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,EAC1BqlC,EAAUrlC,KAAOxD,EAAG,MAExB,GADAwD,EAAI4mC,EAAU5mC,IACH,IAAPA,EAAU,CAEZ,GADAA,EAAIsjG,GAAMkF,EAAWhsG,GAAK,GAAK8mG,EAAKhnG,QAChC0D,IAAMlB,GACJ+H,GAAI5E,EAAI4V,EAAW,EAAJ7X,GAAQ,GAAK6G,GAAIhI,EAAIgZ,EAAW,EAAJ7X,EAAQ,GAAI,GAAK4oG,EAAI,OAAO5oG,EAE7E,KACF,CACF,OAASA,IAAMw3F,GACf,OAAOvtF,CACT,CACA,MAAAgxB,CAAOyN,GACL,MAAMg0D,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,GAChD,OAAC+a,EAAM,UAAE+uB,EAAS,UAAEvB,GAAarpC,KACvC,IAAK,IAAIQ,EAAI,EAAGiD,EAAImnC,EAAUtqC,OAAQE,EAAIiD,IAAKjD,EAAG,CAChD,MAAMsJ,EAAI8gC,EAAUpqC,GACpB,GAAIsJ,EAAItJ,EAAG,SACX,MAAMmpG,EAAoB,EAAftgE,EAAU7oC,GACfopG,EAAoB,EAAfvgE,EAAUv/B,GACrB4iC,EAAQmpB,OAAOh6C,EAAO8tF,GAAK9tF,EAAO8tF,EAAK,IACvCj9D,EAAQopB,OAAOj6C,EAAO+tF,GAAK/tF,EAAO+tF,EAAK,GACzC,CAEA,OADA5pG,KAAK6sG,WAAWngE,GACTg0D,GAAUA,EAAO58F,OAC1B,CACA,YAAAgpG,CAAapgE,EAAS7nC,QACV/D,IAAN+D,GAAqB6nC,GAAqC,mBAAnBA,EAAQmpB,SAAwBhxD,EAAI6nC,EAASA,EAAU,MAClG7nC,EAAS/D,MAAL+D,EAAiB,GAAKA,EAC1B,MAAM67F,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,GAChD,OAAC+a,GAAU7b,KACjB,IAAK,IAAIQ,EAAI,EAAGiD,EAAIoY,EAAOvb,OAAQE,EAAIiD,EAAGjD,GAAK,EAAG,CAChD,MAAMyF,EAAI4V,EAAOrb,GAAIqC,EAAIgZ,EAAOrb,EAAI,GACpCksC,EAAQmpB,OAAO5vD,EAAIpB,EAAGhC,GACtB6pC,EAAQ+7B,IAAIxiE,EAAGpD,EAAGgC,EAAG,EAAG,GAC1B,CACA,OAAO67F,GAAUA,EAAO58F,OAC1B,CACA,UAAA+oG,CAAWngE,GACT,MAAMg0D,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,GAChD,KAACwmG,EAAI,OAAEzrF,GAAU7b,KACjBiM,EAAc,EAAVq7F,EAAK,GAAQ7jG,EAAI6jG,EAAKhnG,OAChCosC,EAAQmpB,OAAOh6C,EAAO5P,GAAI4P,EAAO5P,EAAI,IACrC,IAAK,IAAIzL,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG,CAC1B,MAAMyL,EAAI,EAAIq7F,EAAK9mG,GACnBksC,EAAQopB,OAAOj6C,EAAO5P,GAAI4P,EAAO5P,EAAI,GACvC,CAEA,OADAygC,EAAQqpB,YACD2qC,GAAUA,EAAO58F,OAC1B,CACA,WAAAipG,GACE,MAAMlvE,EAAU,IAAIorE,GAEpB,OADAjpG,KAAK6sG,WAAWhvE,GACTA,EAAQ/5B,OACjB,CACA,cAAAkpG,CAAexsG,EAAGksC,GAChB,MAAMg0D,EAAoB,MAAXh0D,EAAkBA,EAAU,IAAI,QAAO5rC,GAChD,OAAC+a,EAAM,UAAEwtB,GAAarpC,KACtB4O,EAAyB,EAApBy6B,EAAU7oC,GAAK,GACpBmO,EAAwB,EAAnB06B,EAAU7oC,EAAI,GACnB2gD,EAAwB,EAAnB9X,EAAU7oC,EAAI,GAKzB,OAJAksC,EAAQmpB,OAAOh6C,EAAOjN,GAAKiN,EAAOjN,EAAK,IACvC89B,EAAQopB,OAAOj6C,EAAOlN,GAAKkN,EAAOlN,EAAK,IACvC+9B,EAAQopB,OAAOj6C,EAAOslC,GAAKtlC,EAAOslC,EAAK,IACvCzU,EAAQqpB,YACD2qC,GAAUA,EAAO58F,OAC1B,CACA,iBAACylC,GACC,MAAM,UAACF,GAAarpC,KACpB,IAAK,IAAIQ,EAAI,EAAGiD,EAAI4lC,EAAU/oC,OAAS,EAAGE,EAAIiD,IAAKjD,QAC3CR,KAAKitG,gBAAgBzsG,EAE/B,CACA,eAAAysG,CAAgBzsG,GACd,MAAMq9B,EAAU,IAAIorE,GAEpB,OADAjpG,KAAKgtG,eAAexsG,EAAGq9B,GAChBA,EAAQ/5B,OACjB,EClOF,SAAemC,GAAK,IAAMA,ECAX,SAASinG,GAAUv0F,GAAM,YACtC+4E,EAAW,QACXtzE,EAAO,OACPwP,EAAM,WACNtB,EAAU,OACV6nE,EAAM,EACNluF,EAAC,EAAEpD,EAAC,GAAEsxC,EAAE,GAAEC,EAAE,SACZmvC,IAEAz6E,OAAO+yE,iBAAiB77E,KAAM,CAC5B2Y,KAAM,CAAC7U,MAAO6U,EAAM1P,YAAY,EAAMC,cAAc,GACpDwoF,YAAa,CAAC5tF,MAAO4tF,EAAazoF,YAAY,EAAMC,cAAc,GAClEkV,QAAS,CAACta,MAAOsa,EAASnV,YAAY,EAAMC,cAAc,GAC1D0kB,OAAQ,CAAC9pB,MAAO8pB,EAAQ3kB,YAAY,EAAMC,cAAc,GACxDojB,WAAY,CAACxoB,MAAOwoB,EAAYrjB,YAAY,EAAMC,cAAc,GAChEirF,OAAQ,CAACrwF,MAAOqwF,EAAQlrF,YAAY,EAAMC,cAAc,GACxDjD,EAAG,CAACnC,MAAOmC,EAAGgD,YAAY,EAAMC,cAAc,GAC9CrG,EAAG,CAACiB,MAAOjB,EAAGoG,YAAY,EAAMC,cAAc,GAC9CirC,GAAI,CAACrwC,MAAOqwC,EAAIlrC,YAAY,EAAMC,cAAc,GAChDkrC,GAAI,CAACtwC,MAAOswC,EAAInrC,YAAY,EAAMC,cAAc,GAChDlG,EAAG,CAACc,MAAOy/E,IAEf,CCdA,SAAS,GAAcvoE,GACrB,OAAQA,EAAM4+E,UAAY5+E,EAAMotB,MAClC,CAEA,SAAS+kE,KACP,OAAOntG,KAAKsuB,UACd,CAEA,SAAS8+E,GAAepyF,EAAOxT,GAC7B,OAAY,MAALA,EAAY,CAACvB,EAAG+U,EAAM/U,EAAGpD,EAAGmY,EAAMnY,GAAK2E,CAChD,CAEA,SAAS,KACP,OAAOwyF,UAAUC,gBAAmB,iBAAkBj6F,IACxD,CAEe,cACb,IAOIqtG,EACAC,EACAC,EACAhT,EAVAjkE,EAAS,GACT4J,EAAYitE,GACZ/uF,EAAUgvF,GACV5S,EAAY,GACZgT,EAAW,CAAC,EACZ/S,EAAY,GAAS,QAAS,OAAQ,OACtCtG,EAAS,EAKTsZ,EAAiB,EAErB,SAASC,EAAK9qB,GACZA,EACKzmD,GAAG,iBAAkBwxE,GACvBr3E,OAAOkkE,GACLr+D,GAAG,kBAAmByxE,GACtBzxE,GAAG,iBAAkB4+D,EAAYhP,IACjC5vD,GAAG,iCAAkC6+D,GACrCvvE,MAAM,eAAgB,QACtBA,MAAM,8BAA+B,gBAC5C,CAEA,SAASkiF,EAAY3yF,EAAOxT,GAC1B,IAAI+yF,GAAgBjkE,EAAO9zB,KAAKxC,KAAMgb,EAAOxT,GAA7C,CACA,IAAIqmG,EAAUvR,EAAYt8F,KAAMkgC,EAAU19B,KAAKxC,KAAMgb,EAAOxT,GAAIwT,EAAOxT,EAAG,SACrEqmG,IACL,GAAO7yF,EAAMqxE,MACVlwD,GAAG,iBAAkB2xE,EAAY7hB,IACjC9vD,GAAG,eAAgB4xE,EAAY9hB,IAClC+hB,GAAOhzF,EAAMqxE,MACbF,GAAcnxE,GACduyF,GAAc,EACdF,EAAaryF,EAAMi4C,QACnBq6C,EAAatyF,EAAMk4C,QACnB26C,EAAQ,QAAS7yF,GAXsC,CAYzD,CAEA,SAAS8yF,EAAW9yF,GAElB,GADAsxE,GAAQtxE,IACHuyF,EAAa,CAChB,IAAIp5D,EAAKn5B,EAAMi4C,QAAUo6C,EAAYj5D,EAAKp5B,EAAMk4C,QAAUo6C,EAC1DC,EAAcp5D,EAAKA,EAAKC,EAAKA,EAAKq5D,CACpC,CACAD,EAAS12C,MAAM,OAAQ97C,EACzB,CAEA,SAAS+yF,EAAW/yF,GAClB,GAAOA,EAAMqxE,MAAMlwD,GAAG,8BAA+B,MACrDswD,GAAQzxE,EAAMqxE,KAAMkhB,GACpBjhB,GAAQtxE,GACRwyF,EAAS12C,MAAM,MAAO97C,EACxB,CAEA,SAAS4yF,EAAa5yF,EAAOxT,GAC3B,GAAK8uB,EAAO9zB,KAAKxC,KAAMgb,EAAOxT,GAA9B,CACA,IAEwBhH,EAAGqtG,EAFvBxS,EAAUrgF,EAAM4hF,eAChB3uF,EAAIiyB,EAAU19B,KAAKxC,KAAMgb,EAAOxT,GAChC/D,EAAI43F,EAAQ/6F,OAEhB,IAAKE,EAAI,EAAGA,EAAIiD,IAAKjD,GACfqtG,EAAUvR,EAAYt8F,KAAMiO,EAAG+M,EAAOxT,EAAG6zF,EAAQ76F,GAAG8rB,WAAY+uE,EAAQ76F,OAC1E2rF,GAAcnxE,GACd6yF,EAAQ,QAAS7yF,EAAOqgF,EAAQ76F,IARI,CAW1C,CAEA,SAASu6F,EAAW//E,GAClB,IACwBxa,EAAGqtG,EADvBxS,EAAUrgF,EAAM4hF,eAChBn5F,EAAI43F,EAAQ/6F,OAEhB,IAAKE,EAAI,EAAGA,EAAIiD,IAAKjD,GACfqtG,EAAUL,EAASnS,EAAQ76F,GAAG8rB,eAChCggE,GAAQtxE,GACR6yF,EAAQ,OAAQ7yF,EAAOqgF,EAAQ76F,IAGrC,CAEA,SAASw6F,EAAWhgF,GAClB,IACwBxa,EAAGqtG,EADvBxS,EAAUrgF,EAAM4hF,eAChBn5F,EAAI43F,EAAQ/6F,OAIhB,IAFIi6F,GAAatoE,aAAasoE,GAC9BA,EAAcx6E,YAAW,WAAaw6E,EAAc,IAAM,GAAG,KACxD/5F,EAAI,EAAGA,EAAIiD,IAAKjD,GACfqtG,EAAUL,EAASnS,EAAQ76F,GAAG8rB,eAChC6/D,GAAcnxE,GACd6yF,EAAQ,MAAO7yF,EAAOqgF,EAAQ76F,IAGpC,CAEA,SAAS87F,EAAY3Y,EAAMzjD,EAAWllB,EAAOxT,EAAG8kB,EAAY2hF,GAC1D,IAC4C95D,EAAIC,EAC5CyM,EAFA0iC,EAAWkX,EAAU9X,OACrB56E,EAAIq0F,GAAQ6R,GAASjzF,EAAOklB,GAGhC,GAUa,OAVR2gB,EAAIziC,EAAQ5b,KAAKmhF,EAAM,IAAIupB,GAAU,cAAe,CACrDxb,YAAa12E,EACb4S,OAAQ8/E,EACRphF,aACA6nE,SACAluF,EAAG8B,EAAE,GACLlF,EAAGkF,EAAE,GACLosC,GAAI,EACJC,GAAI,EACJmvC,aACE/7E,IAKN,OAHA2sC,EAAK0M,EAAE56C,EAAI8B,EAAE,IAAM,EACnBqsC,EAAKyM,EAAEh+C,EAAIkF,EAAE,IAAM,EAEZ,SAAS8lG,EAAQl1F,EAAMqC,EAAOizF,GACnC,IAAYxqG,EAAR26D,EAAKr2D,EACT,OAAQ4Q,GACN,IAAK,QAAS60F,EAASlhF,GAAcuhF,EAASpqG,EAAI0wF,IAAU,MAC5D,IAAK,aAAcqZ,EAASlhF,KAAe6nE,EAC3C,IAAK,OAAQpsF,EAAIq0F,GAAQ6R,GAASjzF,EAAOklB,GAAYz8B,EAAI0wF,EAE3D5Q,EAAS/gF,KACPmW,EACAgrE,EACA,IAAIupB,GAAUv0F,EAAM,CAClB+4E,YAAa12E,EACboD,QAASyiC,EACTjzB,OAAQ8/E,EACRphF,aACA6nE,OAAQ1wF,EACRwC,EAAG8B,EAAE,GAAKosC,EACVtxC,EAAGkF,EAAE,GAAKqsC,EACVD,GAAIpsC,EAAE,GAAKq2D,EAAG,GACdhqB,GAAIrsC,EAAE,GAAKq2D,EAAG,GACdmlB,aAEF/7E,EAEJ,CACF,CA2BA,OAzBAkmG,EAAKp3E,OAAS,SAAStzB,GACrB,OAAOoa,UAAU9c,QAAUg2B,EAAsB,mBAANtzB,EAAmBA,EAAI,KAAWA,GAAI0qG,GAAQp3E,CAC3F,EAEAo3E,EAAKxtE,UAAY,SAASl9B,GACxB,OAAOoa,UAAU9c,QAAU4/B,EAAyB,mBAANl9B,EAAmBA,EAAI,GAASA,GAAI0qG,GAAQxtE,CAC5F,EAEAwtE,EAAKtvF,QAAU,SAASpb,GACtB,OAAOoa,UAAU9c,QAAU8d,EAAuB,mBAANpb,EAAmBA,EAAI,GAASA,GAAI0qG,GAAQtvF,CAC1F,EAEAsvF,EAAKlT,UAAY,SAASx3F,GACxB,OAAOoa,UAAU9c,QAAUk6F,EAAyB,mBAANx3F,EAAmBA,EAAI,KAAWA,GAAI0qG,GAAQlT,CAC9F,EAEAkT,EAAKvxE,GAAK,WACR,IAAIr4B,EAAQ22F,EAAUt+D,GAAG/b,MAAMq6E,EAAWr9E,WAC1C,OAAOtZ,IAAU22F,EAAYiT,EAAO5pG,CACtC,EAEA4pG,EAAKQ,cAAgB,SAASlrG,GAC5B,OAAOoa,UAAU9c,QAAUmtG,GAAkBzqG,GAAKA,GAAKA,EAAG0qG,GAAQ/jG,KAAKoG,KAAK09F,EAC9E,EAEOC,CACT,CDzKAR,GAAUrnG,UAAUs2B,GAAK,WACvB,IAAIr4B,EAAQ9D,KAAKgD,EAAEm5B,GAAG/b,MAAMpgB,KAAKgD,EAAGoa,WACpC,OAAOtZ,IAAU9D,KAAKgD,EAAIhD,KAAO8D,CACnC,EE3BA,IAAIqqG,GAAM,CAAC,EACPC,GAAM,CAAC,EACPC,GAAQ,GACRC,GAAU,GACVC,GAAS,GAEb,SAASC,GAAgBC,GACvB,OAAO,IAAIC,SAAS,IAAK,WAAaD,EAAQxuG,KAAI,SAAS27C,EAAMp7C,GAC/D,OAAOe,KAAKC,UAAUo6C,GAAQ,OAASp7C,EAAI,SAC7C,IAAGD,KAAK,KAAO,IACjB,CAUA,SAASouG,GAAah4D,GACpB,IAAIi4D,EAAY9lG,OAAOy4C,OAAO,MAC1BktD,EAAU,GAUd,OARA93D,EAAKpwC,SAAQ,SAASolC,GACpB,IAAK,IAAIkjE,KAAUljE,EACXkjE,KAAUD,GACdH,EAAQhvG,KAAKmvG,EAAUC,GAAUA,EAGvC,IAEOJ,CACT,CAEA,SAASK,GAAIhrG,EAAO6+B,GAClB,IAAIke,EAAI/8C,EAAQ,GAAIxD,EAASugD,EAAEvgD,OAC/B,OAAOA,EAASqiC,EAAQ,IAAIppB,MAAMopB,EAAQriC,EAAS,GAAGC,KAAK,GAAKsgD,EAAIA,CACtE,CAqBe,YAASkuD,GACtB,IAAIC,EAAW,IAAI3hB,OAAO,KAAQ0hB,EAAY,SAC1CE,EAAYF,EAAUhpD,WAAW,GAWrC,SAASmpD,EAAUlzE,EAAMp5B,GACvB,IAIIE,EAJA6zC,EAAO,GACPhyC,EAAIq3B,EAAK17B,OACT6iD,EAAI,EACJ1/C,EAAI,EAEJ0rG,EAAMxqG,GAAK,EACXyqG,GAAM,EAMV,SAASC,IACP,GAAIF,EAAK,OAAOf,GAChB,GAAIgB,EAAK,OAAOA,GAAM,EAAOjB,GAG7B,IAAI3tG,EAAUyN,EAAPnE,EAAIq5C,EACX,GAAInnB,EAAK+pB,WAAWj8C,KAAOukG,GAAO,CAChC,KAAOlrD,IAAMx+C,GAAKq3B,EAAK+pB,WAAW5C,KAAOkrD,IAASryE,EAAK+pB,aAAa5C,KAAOkrD,KAI3E,OAHK7tG,EAAI2iD,IAAMx+C,EAAGwqG,GAAM,GACdlhG,EAAI+tB,EAAK+pB,WAAW5C,QAAUmrD,GAASc,GAAM,EAC9CnhG,IAAMsgG,KAAUa,GAAM,EAAUpzE,EAAK+pB,WAAW5C,KAAOmrD,MAAWnrD,GACpEnnB,EAAKhlB,MAAMlN,EAAI,EAAGtJ,EAAI,GAAGsgB,QAAQ,MAAO,IACjD,CAGA,KAAOqiC,EAAIx+C,GAAG,CACZ,IAAKsJ,EAAI+tB,EAAK+pB,WAAWvlD,EAAI2iD,QAAUmrD,GAASc,GAAM,OACjD,GAAInhG,IAAMsgG,GAAUa,GAAM,EAAUpzE,EAAK+pB,WAAW5C,KAAOmrD,MAAWnrD,OACtE,GAAIl1C,IAAMghG,EAAW,SAC1B,OAAOjzE,EAAKhlB,MAAMlN,EAAGtJ,EACvB,CAGA,OAAO2uG,GAAM,EAAMnzE,EAAKhlB,MAAMlN,EAAGnF,EACnC,CAEA,IA7BIq3B,EAAK+pB,WAAWphD,EAAI,KAAO2pG,MAAW3pG,EACtCq3B,EAAK+pB,WAAWphD,EAAI,KAAO4pG,MAAU5pG,GA4BjC7B,EAAIusG,OAAajB,IAAK,CAE5B,IADA,IAAIziE,EAAM,GACH7oC,IAAMqrG,IAAOrrG,IAAMsrG,IAAKziE,EAAIlsC,KAAKqD,GAAIA,EAAIusG,IAC5CzsG,GAA4B,OAAtB+oC,EAAM/oC,EAAE+oC,EAAKloC,OACvBkzC,EAAKl3C,KAAKksC,EACZ,CAEA,OAAOgL,CACT,CAEA,SAAS24D,EAAc34D,EAAM83D,GAC3B,OAAO93D,EAAK12C,KAAI,SAAS0rC,GACvB,OAAO8iE,EAAQxuG,KAAI,SAAS4uG,GAC1B,OAAOU,EAAY5jE,EAAIkjE,GACzB,IAAGtuG,KAAKwuG,EACV,GACF,CAgBA,SAASS,EAAU7jE,GACjB,OAAOA,EAAI1rC,IAAIsvG,GAAahvG,KAAKwuG,EACnC,CAEA,SAASQ,EAAYzrG,GACnB,OAAgB,MAATA,EAAgB,GACjBA,aAAiBxB,KAvG3B,SAAoBmvF,GAClB,IAPkBge,EAOdC,EAAQje,EAAKke,cACbC,EAAUne,EAAKoe,gBACfC,EAAUre,EAAKse,gBACfC,EAAeve,EAAKwe,qBACxB,OAAOvlF,MAAM+mE,GAAQ,iBAXHge,EAYDhe,EAAKye,kBAXR,EAAI,IAAMpB,IAAKW,EAAM,GAC/BA,EAAO,KAAO,IAAMX,GAAIW,EAAM,GAC9BX,GAAIW,EAAM,IAS+B,IAAMX,GAAIrd,EAAK0e,cAAgB,EAAG,GAAK,IAAMrB,GAAIrd,EAAK2e,aAAc,IAC1GJ,EAAe,IAAMlB,GAAIY,EAAO,GAAK,IAAMZ,GAAIc,EAAS,GAAK,IAAMd,GAAIgB,EAAS,GAAK,IAAMhB,GAAIkB,EAAc,GAAK,IACnHF,EAAU,IAAMhB,GAAIY,EAAO,GAAK,IAAMZ,GAAIc,EAAS,GAAK,IAAMd,GAAIgB,EAAS,GAAK,IAChFF,GAAWF,EAAQ,IAAMZ,GAAIY,EAAO,GAAK,IAAMZ,GAAIc,EAAS,GAAK,IACjE,GACR,CA4FkCS,CAAWvsG,GACnCkrG,EAASnhD,KAAK/pD,GAAS,IAAM,IAAOA,EAAMgd,QAAQ,KAAM,MAAU,IAClEhd,CACR,CAEA,MAAO,CACL4+B,MA5FF,SAAe1G,EAAMp5B,GACnB,IAAI0tG,EAAS7B,EAAS93D,EAAOu4D,EAAUlzE,GAAM,SAAS2P,EAAKnrC,GACzD,GAAI8vG,EAAS,OAAOA,EAAQ3kE,EAAKnrC,EAAI,GACrCiuG,EAAU9iE,EAAK2kE,EAAU1tG,EAtD/B,SAAyB6rG,EAAS7rG,GAChC,IAAI0d,EAASkuF,GAAgBC,GAC7B,OAAO,SAAS9iE,EAAKnrC,GACnB,OAAOoC,EAAE0d,EAAOqrB,GAAMnrC,EAAGiuG,EAC3B,CACF,CAiDmC8B,CAAgB5kE,EAAK/oC,GAAK4rG,GAAgB7iE,EACzE,IAEA,OADAgL,EAAK83D,QAAUA,GAAW,GACnB93D,CACT,EAsFEu4D,UAAWA,EACX5sB,OA5BF,SAAgB3rC,EAAM83D,GAEpB,OADe,MAAXA,IAAiBA,EAAUE,GAAah4D,IACrC,CAAC83D,EAAQxuG,IAAIsvG,GAAahvG,KAAKwuG,IAAY1uG,OAAOivG,EAAc34D,EAAM83D,IAAUluG,KAAK,KAC9F,EA0BEiwG,WAxBF,SAAoB75D,EAAM83D,GAExB,OADe,MAAXA,IAAiBA,EAAUE,GAAah4D,IACrC24D,EAAc34D,EAAM83D,GAASluG,KAAK,KAC3C,EAsBEkwG,WApBF,SAAoB95D,GAClB,OAAOA,EAAK12C,IAAIuvG,GAAWjvG,KAAK,KAClC,EAmBEivG,UAAWA,EACXD,YAAaA,EAEjB,CCjKA,IAAImB,GAAMC,GAAI,KAEHC,GAAWF,GAAIhuE,MACfmuE,GAAeH,GAAIxB,UACnB4B,GAAYJ,GAAIpuB,OAChByuB,GAAgBL,GAAIF,WACpBQ,GAAgBN,GAAID,WACpBQ,GAAeP,GAAIlB,UACnB0B,GAAiBR,GAAInB,YCR5B4B,GAAMR,GAAI,MAEHS,GAAWD,GAAIzuE,MACf2uE,GAAeF,GAAIjC,UACnBoC,GAAYH,GAAI7uB,OAChBivB,GAAgBJ,GAAIX,WACpBgB,GAAgBL,GAAIV,WACpBgB,GAAeN,GAAI3B,UACnBkC,GAAiBP,GAAI5B,YCVjB,SAASoC,GAASrxF,GAC/B,IAAK,IAAInc,KAAOmc,EAAQ,CACtB,IAAgCm5D,EAAQ33B,EAApCh+C,EAAQwc,EAAOnc,GAAKqpD,OACxB,GAAK1pD,EACA,GAAc,SAAVA,EAAkBA,GAAQ,OAC9B,GAAc,UAAVA,EAAmBA,GAAQ,OAC/B,GAAc,QAAVA,EAAiBA,EAAQwqC,SAC7B,GAAK5jB,MAAM+uD,GAAU31E,GACrB,MAAIg+C,EAAIh+C,EAAM8nD,MAAM,gGAIpB,SAHCgmD,IAAW9vD,EAAE,KAAOA,EAAE,KAAIh+C,EAAQA,EAAMgd,QAAQ,KAAM,KAAKA,QAAQ,IAAK,MAC5Ehd,EAAQ,IAAIxB,KAAKwB,EAEN,MALqBA,EAAQ21E,OAJ9B31E,EAAQ,KAUpBwc,EAAOnc,GAAOL,CAChB,CACA,OAAOwc,CACT,CAGA,MAAMsxF,GAAQ,IAAItvG,KAAK,oBAAoBuvG,YAAc,IAAIvvG,KAAK,oBAAoBuvG,WCnBzE,GAAS/uG,IAAMA,ECArB,SAASgvG,GAAOhvG,GACrB,OAAOA,EAAIA,CACb,CAEO,SAASivG,GAAQjvG,GACtB,OAAOA,GAAK,EAAIA,EAClB,CAEO,SAASkvG,GAAUlvG,GACxB,QAASA,GAAK,IAAM,EAAIA,EAAIA,IAAMA,GAAK,EAAIA,GAAK,GAAK,CACvD,CCVA,IAEWmvG,GAAS,SAAUC,EAAOluG,GAGnC,SAASiuG,EAAOnvG,GACd,OAAO6G,KAAKkB,IAAI/H,EAAGkB,EACrB,CAIA,OARAA,GAAKA,EAMLiuG,EAAOE,SAAWD,EAEXD,CACR,CAVmB,CAFL,GAcJG,GAAU,SAAUF,EAAOluG,GAGpC,SAASouG,EAAQtvG,GACf,OAAO,EAAI6G,KAAKkB,IAAI,EAAI/H,EAAGkB,EAC7B,CAIA,OARAA,GAAKA,EAMLouG,EAAQD,SAAWD,EAEZE,CACR,CAVoB,CAdN,GA0BJC,GAAY,SAAUH,EAAOluG,GAGtC,SAASquG,EAAUvvG,GACjB,QAASA,GAAK,IAAM,EAAI6G,KAAKkB,IAAI/H,EAAGkB,GAAK,EAAI2F,KAAKkB,IAAI,EAAI/H,EAAGkB,IAAM,CACrE,CAIA,OARAA,GAAKA,EAMLquG,EAAUF,SAAWD,EAEdG,CACR,CAVsB,CA1BR,GCAX,GAAK1oG,KAAK2qC,GACV,GAAS,GAAK,EAEX,SAASg+D,GAAMxvG,GACpB,OAAe,IAANA,EAAW,EAAI,EAAI6G,KAAK6qC,IAAI1xC,EAAI,GAC3C,CAEO,SAASyvG,GAAOzvG,GACrB,OAAO6G,KAAK8qC,IAAI3xC,EAAI,GACtB,CAEO,SAAS0vG,GAAS1vG,GACvB,OAAQ,EAAI6G,KAAK6qC,IAAI,GAAK1xC,IAAM,CAClC,CCZO,SAAS2vG,GAAKxsG,GACnB,OAA+C,oBAAvC0D,KAAKkB,IAAI,GAAI,GAAK5E,GAAK,YACjC,CCDO,SAASysG,GAAM5vG,GACpB,OAAO2vG,GAAK,GAAK3vG,EACnB,CAEO,SAAS6vG,GAAO7vG,GACrB,OAAO,EAAI2vG,GAAK3vG,EAClB,CAEO,SAAS8vG,GAAS9vG,GACvB,QAASA,GAAK,IAAM,EAAI2vG,GAAK,EAAI3vG,GAAK,EAAI2vG,GAAK3vG,EAAI,IAAM,CAC3D,CCZO,SAAS+vG,GAAS/vG,GACvB,OAAO,EAAI6G,KAAKoG,KAAK,EAAIjN,EAAIA,EAC/B,CAEO,SAASgwG,GAAUhwG,GACxB,OAAO6G,KAAKoG,KAAK,KAAMjN,EAAIA,EAC7B,CAEO,SAASiwG,GAAYjwG,GAC1B,QAASA,GAAK,IAAM,EAAI,EAAI6G,KAAKoG,KAAK,EAAIjN,EAAIA,GAAK6G,KAAKoG,KAAK,GAAKjN,GAAK,GAAKA,GAAK,GAAK,CACxF,CCVA,IAAIwH,GAAK,EAAI,GACTC,GAAK,EAAI,GACTyoG,GAAK,EAAI,GACTC,GAAK,EAAI,EACTC,GAAK,EAAI,GACTC,GAAK,GAAK,GACVC,GAAK,GAAK,GACVC,GAAK,GAAK,GACVC,GAAK,GAAK,GACVjL,GAAK,EAAI/9F,GAAKA,GAEX,SAASipG,GAASzwG,GACvB,OAAO,EAAI0wG,GAAU,EAAI1wG,EAC3B,CAEO,SAAS0wG,GAAU1wG,GACxB,OAAQA,GAAKA,GAAKwH,GAAK+9F,GAAKvlG,EAAIA,EAAIA,EAAIkwG,GAAK3K,IAAMvlG,GAAKyH,IAAMzH,EAAImwG,GAAKnwG,EAAIqwG,GAAK9K,IAAMvlG,GAAKowG,IAAMpwG,EAAIswG,GAAK/K,IAAMvlG,GAAKuwG,IAAMvwG,EAAIwwG,EACjI,CAEO,SAASG,GAAY3wG,GAC1B,QAASA,GAAK,IAAM,EAAI,EAAI0wG,GAAU,EAAI1wG,GAAK0wG,GAAU1wG,EAAI,GAAK,GAAK,CACzE,CCrBA,IAAI4wG,GAAY,QAELC,GAAS,SAAUzB,EAAOrxD,GAGnC,SAAS8yD,EAAO7wG,GACd,OAAQA,GAAKA,GAAKA,GAAK+9C,GAAK/9C,EAAI,GAAKA,EACvC,CAIA,OARA+9C,GAAKA,EAML8yD,EAAOD,UAAYxB,EAEZyB,CACR,CAVmB,CAUjBD,IAEQE,GAAU,SAAU1B,EAAOrxD,GAGpC,SAAS+yD,EAAQ9wG,GACf,QAASA,EAAIA,IAAMA,EAAI,GAAK+9C,EAAI/9C,GAAK,CACvC,CAIA,OARA+9C,GAAKA,EAML+yD,EAAQF,UAAYxB,EAEb0B,CACR,CAVoB,CAUlBF,IAEQG,GAAY,SAAU3B,EAAOrxD,GAGtC,SAASgzD,EAAU/wG,GACjB,QAASA,GAAK,GAAK,EAAIA,EAAIA,IAAM+9C,EAAI,GAAK/9C,EAAI+9C,IAAM/9C,GAAK,GAAKA,IAAM+9C,EAAI,GAAK/9C,EAAI+9C,GAAK,GAAK,CAC7F,CAIA,OARAA,GAAKA,EAMLgzD,EAAUH,UAAYxB,EAEf2B,CACR,CAVsB,CAUpBH,IClCC,GAAM,EAAI/pG,KAAK2qC,GAIRw/D,GAAY,SAAU5B,EAAO3tG,EAAGwD,GACzC,IAAI84C,EAAIl3C,KAAKoqG,KAAK,GAAKxvG,EAAIoF,KAAKvC,IAAI,EAAG7C,MAAQwD,GAAK,IAEpD,SAAS+rG,EAAUhxG,GACjB,OAAOyB,EAAIkuG,OAAS3vG,GAAM6G,KAAK8qC,KAAKoM,EAAI/9C,GAAKiF,EAC/C,CAKA,OAHA+rG,EAAUE,UAAY,SAASzvG,GAAK,OAAO2tG,EAAO3tG,EAAGwD,EAAI,GAAM,EAC/D+rG,EAAUG,OAAS,SAASlsG,GAAK,OAAOmqG,EAAO3tG,EAAGwD,EAAI,EAE/C+rG,CACR,CAXsB,CAHP,EACH,IAeFI,GAAa,SAAUhC,EAAO3tG,EAAGwD,GAC1C,IAAI84C,EAAIl3C,KAAKoqG,KAAK,GAAKxvG,EAAIoF,KAAKvC,IAAI,EAAG7C,MAAQwD,GAAK,IAEpD,SAASmsG,EAAWpxG,GAClB,OAAO,EAAIyB,EAAIkuG,GAAK3vG,GAAKA,GAAK6G,KAAK8qC,KAAK3xC,EAAI+9C,GAAK94C,EACnD,CAKA,OAHAmsG,EAAWF,UAAY,SAASzvG,GAAK,OAAO2tG,EAAO3tG,EAAGwD,EAAI,GAAM,EAChEmsG,EAAWD,OAAS,SAASlsG,GAAK,OAAOmqG,EAAO3tG,EAAGwD,EAAI,EAEhDmsG,CACR,CAXuB,CAhBR,EACH,IA4BFC,GAAe,SAAUjC,EAAO3tG,EAAGwD,GAC5C,IAAI84C,EAAIl3C,KAAKoqG,KAAK,GAAKxvG,EAAIoF,KAAKvC,IAAI,EAAG7C,MAAQwD,GAAK,IAEpD,SAASosG,EAAarxG,GACpB,QAASA,EAAQ,EAAJA,EAAQ,GAAK,EACpByB,EAAIkuG,IAAM3vG,GAAK6G,KAAK8qC,KAAKoM,EAAI/9C,GAAKiF,GAClC,EAAIxD,EAAIkuG,GAAK3vG,GAAK6G,KAAK8qC,KAAKoM,EAAI/9C,GAAKiF,IAAM,CACnD,CAKA,OAHAosG,EAAaH,UAAY,SAASzvG,GAAK,OAAO2tG,EAAO3tG,EAAGwD,EAAI,GAAM,EAClEosG,EAAaF,OAAS,SAASlsG,GAAK,OAAOmqG,EAAO3tG,EAAGwD,EAAI,EAElDosG,CACR,CAbyB,CA7BV,EACH,ICJb,SAASC,GAAaljF,GACpB,IAAKA,EAASxQ,GAAI,MAAM,IAAIrP,MAAM6f,EAAS8lB,OAAS,IAAM9lB,EAASsqB,YACnE,OAAOtqB,EAASic,MAClB,CAEe,YAAS0rD,EAAO9nE,GAC7B,OAAOI,MAAM0nE,EAAO9nE,GAAMgmB,KAAKq9D,GACjC,CCPA,SAASC,GAAoBnjF,GAC3B,IAAKA,EAASxQ,GAAI,MAAM,IAAIrP,MAAM6f,EAAS8lB,OAAS,IAAM9lB,EAASsqB,YACnE,OAAOtqB,EAASojF,aAClB,CAEe,YAASzb,EAAO9nE,GAC7B,OAAOI,MAAM0nE,EAAO9nE,GAAMgmB,KAAKs9D,GACjC,CCPA,SAASE,GAAarjF,GACpB,IAAKA,EAASxQ,GAAI,MAAM,IAAIrP,MAAM6f,EAAS8lB,OAAS,IAAM9lB,EAASsqB,YACnE,OAAOtqB,EAAS8K,MAClB,CAEe,YAAS68D,EAAO9nE,GAC7B,OAAOI,MAAM0nE,EAAO9nE,GAAMgmB,KAAKw9D,GACjC,CCJA,SAASC,GAAS9xE,GAChB,OAAO,SAASm2D,EAAO9nE,EAAM4a,GAE3B,OADyB,IAArBvuB,UAAU9c,QAAgC,mBAATywB,IAAqB4a,EAAM5a,EAAMA,OAAOjwB,GACtE,GAAK+3F,EAAO9nE,GAAMgmB,MAAK,SAAS7lB,GACrC,OAAOwR,EAAMxR,EAAUya,EACzB,GACF,CACF,CAEe,SAAS,GAAIojE,EAAWlW,EAAO9nE,EAAM4a,GACzB,IAArBvuB,UAAU9c,QAAgC,mBAATywB,IAAqB4a,EAAM5a,EAAMA,OAAOjwB,GAC7E,IAAIwhF,EAASquB,GAAU5B,GACvB,OAAO,GAAKlW,EAAO9nE,GAAMgmB,MAAK,SAAS7lB,GACrC,OAAOoxD,EAAO5/C,MAAMxR,EAAUya,EAChC,GACF,CAEO,IAAI,GAAM6oE,GAAS5D,IACf,GAAM4D,GAASpD,ICrBX,YAASvY,EAAO9nE,GAC7B,OAAO,IAAIkC,SAAQ,SAAS7D,EAASipD,GACnC,IAAIrC,EAAQ,IAAIy+B,MAChB,IAAK,IAAItwG,KAAO4sB,EAAMilD,EAAM7xE,GAAO4sB,EAAK5sB,GACxC6xE,EAAMsC,QAAUD,EAChBrC,EAAMxzC,OAAS,WAAapT,EAAQ4mD,EAAQ,EAC5CA,EAAMjI,IAAM8qB,CACd,GACF,CCRA,SAAS6b,GAAaxjF,GACpB,IAAKA,EAASxQ,GAAI,MAAM,IAAIrP,MAAM6f,EAAS8lB,OAAS,IAAM9lB,EAASsqB,YACnE,GAAwB,MAApBtqB,EAAS8lB,QAAsC,MAApB9lB,EAAS8lB,OACxC,OAAO9lB,EAASE,MAClB,CAEe,YAASynE,EAAO9nE,GAC7B,OAAOI,MAAM0nE,EAAO9nE,GAAMgmB,KAAK29D,GACjC,CCNA,SAASl8C,GAAO7/C,GACd,MAAO,CAACkgF,EAAO9nE,IAAS,GAAK8nE,EAAO9nE,GACjCgmB,MAAK/a,IAAQ,IAAKo8B,WAAWG,gBAAgBv8B,EAAMrjB,IACxD,CAEA,SAAe6/C,GAAO,mBAEf,IAAI,GAAOA,GAAO,aAEd1xB,GAAM0xB,GAAO,iBCXT,YAASvyD,EAAGpD,GACzB,IAAI01C,EAAOrD,EAAW,EAKtB,SAASy/D,IACP,IAAIn0G,EAEAwE,EADAvB,EAAI80C,EAAMj4C,OAEV6vC,EAAK,EACLC,EAAK,EAET,IAAK5vC,EAAI,EAAGA,EAAIiD,IAAKjD,EACF2vC,IAAjBnrC,EAAOuzC,EAAM/3C,IAAeyF,EAAGmqC,GAAMprC,EAAKnC,EAG5C,IAAKstC,GAAMA,EAAK1sC,EAAIwC,GAAKivC,EAAU9E,GAAMA,EAAK3sC,EAAIZ,GAAKqyC,EAAU10C,EAAI,EAAGA,EAAIiD,IAAKjD,GAC/EwE,EAAOuzC,EAAM/3C,IAASyF,GAAKkqC,EAAInrC,EAAKnC,GAAKutC,CAE7C,CAkBA,OAnCS,MAALnqC,IAAWA,EAAI,GACV,MAALpD,IAAWA,EAAI,GAkBnB8xG,EAAM/Z,WAAa,SAAS53F,GAC1Bu1C,EAAQv1C,CACV,EAEA2xG,EAAM1uG,EAAI,SAASjD,GACjB,OAAOoa,UAAU9c,QAAU2F,GAAKjD,EAAG2xG,GAAS1uG,CAC9C,EAEA0uG,EAAM9xG,EAAI,SAASG,GACjB,OAAOoa,UAAU9c,QAAUuC,GAAKG,EAAG2xG,GAAS9xG,CAC9C,EAEA8xG,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,GAAYlyC,EAAG2xG,GAASz/D,CACrD,EAEOy/D,CACT,CCjCA,SAAS,GAAIzpG,EAAMjF,EAAGpD,EAAG2E,GACvB,GAAIkjB,MAAMzkB,IAAMykB,MAAM7nB,GAAI,OAAOqI,EAEjC,IAAIktC,EAOAw8D,EACAC,EACApjD,EACA9G,EACAtmD,EACAy9E,EACAthF,EACAsJ,EAbA9E,EAAOkG,EAAKxF,MACZovG,EAAO,CAACrzG,KAAM+F,GACdwxC,EAAK9tC,EAAKozF,IACVjhE,EAAKnyB,EAAKqzF,IACVhuD,EAAKrlC,EAAKszF,IACV1pF,EAAK5J,EAAKuzF,IAWd,IAAKz5F,EAAM,OAAOkG,EAAKxF,MAAQovG,EAAM5pG,EAGrC,KAAOlG,EAAK1E,QAGV,IAFI+D,EAAQ4B,IAAM2uG,GAAM57D,EAAKzI,GAAM,IAAIyI,EAAK47D,EAASrkE,EAAKqkE,GACtD9yB,EAASj/E,IAAMgyG,GAAMx3E,EAAKvoB,GAAM,IAAIuoB,EAAKw3E,EAAS//F,EAAK+/F,EACvDz8D,EAASpzC,IAAQA,EAAOA,EAAKxE,EAAIshF,GAAU,EAAIz9E,IAAS,OAAO+zC,EAAO53C,GAAKs0G,EAAM5pG,EAMvF,GAFAumD,GAAMvmD,EAAK2+C,GAAGrnD,KAAK,KAAMwC,EAAKvD,MAC9BkpD,GAAMz/C,EAAKggD,GAAG1oD,KAAK,KAAMwC,EAAKvD,MAC1BwE,IAAMwrD,GAAM5uD,IAAM8nD,EAAI,OAAOmqD,EAAKzxG,KAAO2B,EAAMozC,EAASA,EAAO53C,GAAKs0G,EAAO5pG,EAAKxF,MAAQovG,EAAM5pG,EAGlG,GACEktC,EAASA,EAASA,EAAO53C,GAAK,IAAI+Y,MAAM,GAAKrO,EAAKxF,MAAQ,IAAI6T,MAAM,IAChElV,EAAQ4B,IAAM2uG,GAAM57D,EAAKzI,GAAM,IAAIyI,EAAK47D,EAASrkE,EAAKqkE,GACtD9yB,EAASj/E,IAAMgyG,GAAMx3E,EAAKvoB,GAAM,IAAIuoB,EAAKw3E,EAAS//F,EAAK+/F,SACnDr0G,EAAIshF,GAAU,EAAIz9E,KAAYyF,GAAK6gD,GAAMkqD,IAAO,EAAKpjD,GAAMmjD,IACrE,OAAOx8D,EAAOtuC,GAAK9E,EAAMozC,EAAO53C,GAAKs0G,EAAM5pG,CAC7C,CC/Ce,YAASlG,EAAMg0C,EAAI3b,EAAIkT,EAAIz7B,GACxC9U,KAAKgF,KAAOA,EACZhF,KAAKg5C,GAAKA,EACVh5C,KAAKq9B,GAAKA,EACVr9B,KAAKuwC,GAAKA,EACVvwC,KAAK8U,GAAKA,CACZ,CCNO,SAAS,GAAStN,GACvB,OAAOA,EAAE,EACX,CCFO,SAAS,GAASA,GACvB,OAAOA,EAAE,EACX,CCWe,SAASutG,GAASx8D,EAAOtyC,EAAGpD,GACzC,IAAIqI,EAAO,IAAI8pG,GAAc,MAAL/uG,EAAY,GAAWA,EAAQ,MAALpD,EAAY,GAAWA,EAAGyrC,IAAKA,IAAKA,IAAKA,KAC3F,OAAgB,MAATiK,EAAgBrtC,EAAOA,EAAK+pG,OAAO18D,EAC5C,CAEA,SAASy8D,GAAS/uG,EAAGpD,EAAGm2C,EAAI3b,EAAIkT,EAAIz7B,GAClC9U,KAAK6pD,GAAK5jD,EACVjG,KAAKkrD,GAAKroD,EACV7C,KAAKs+F,IAAMtlD,EACXh5C,KAAKu+F,IAAMlhE,EACXr9B,KAAKw+F,IAAMjuD,EACXvwC,KAAKy+F,IAAM3pF,EACX9U,KAAK0F,WAAQ5E,CACf,CAEA,SAASo0G,GAAUJ,GAEjB,IADA,IAAInyB,EAAO,CAAClhF,KAAMqzG,EAAKrzG,MAAO4B,EAAOs/E,EAC9BmyB,EAAOA,EAAKzxG,MAAMA,EAAOA,EAAKA,KAAO,CAAC5B,KAAMqzG,EAAKrzG,MACxD,OAAOkhF,CACT,CAEA,IAAIwyB,GAAYJ,GAASlvG,UAAYmvG,GAASnvG,UClC/B,YAASI,GACtB,OAAO,WACL,OAAOA,CACT,CACF,CCJe,YAASkxB,GACtB,OAA0B,MAAlBA,IAAW,GACrB,CCEA,SAAS,GAAE3vB,GACT,OAAOA,EAAEvB,EAAIuB,EAAEm9B,EACjB,CAEA,SAAS,GAAEn9B,GACT,OAAOA,EAAE3E,EAAI2E,EAAEo9B,EACjB,CAEe,YAASwiB,GACtB,IAAI7O,EACA68D,EACAj+E,EACA+d,EAAW,EACXzd,EAAa,EAIjB,SAASk9E,IASP,IARA,IAAIn0G,EACA0K,EACAlG,EACA+vC,EACAC,EACAqgE,EACAC,EANG7xG,EAAI80C,EAAMj4C,OAQRU,EAAI,EAAGA,EAAIy2B,IAAcz2B,EAEhC,IADAkK,EAAO6pG,GAASx8D,EAAO,GAAG,IAAGg9D,WAAWC,GACnCh1G,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBwE,EAAOuzC,EAAM/3C,GACb60G,EAAKD,EAAMpwG,EAAKuC,OAAQ+tG,EAAMD,EAAKA,EACnCtgE,EAAK/vC,EAAKiB,EAAIjB,EAAK2/B,GACnBqQ,EAAKhwC,EAAKnC,EAAImC,EAAK4/B,GACnB15B,EAAKuqG,MAAMr1F,GAIf,SAASA,EAAMs1F,EAAM18D,EAAI3b,EAAIkT,EAAIz7B,GAC/B,IAAIrT,EAAOi0G,EAAKj0G,KAAMk0G,EAAKD,EAAK7wG,EAAGA,EAAIwwG,EAAKM,EAC5C,IAAIl0G,EAiBJ,OAAOu3C,EAAKjE,EAAKlwC,GAAK0rC,EAAKwE,EAAKlwC,GAAKw4B,EAAK2X,EAAKnwC,GAAKiQ,EAAKkgC,EAAKnwC,EAhB5D,GAAIpD,EAAK8F,MAAQvC,EAAKuC,MAAO,CAC3B,IAAItB,EAAI8uC,EAAKtzC,EAAKwE,EAAIxE,EAAKkjC,GACvB9hC,EAAImyC,EAAKvzC,EAAKoB,EAAIpB,EAAKmjC,GACvBhgC,EAAIqB,EAAIA,EAAIpD,EAAIA,EAChB+B,EAAIC,EAAIA,IACA,IAANoB,IAA6BrB,IAApBqB,EAAI2vG,GAAOz+E,IAAkBlxB,GAChC,IAANpD,IAA6B+B,IAApB/B,EAAI+yG,GAAOz+E,IAAkBt0B,GAC1C+B,GAAKC,GAAKD,EAAI+E,KAAKoG,KAAKnL,KAAOA,EAAIswC,EACnClwC,EAAK2/B,KAAO1+B,GAAKrB,IAAMC,GAAK8wG,GAAMA,IAAOL,EAAMK,IAC/C3wG,EAAK4/B,KAAO/hC,GAAK+B,GAAKC,EACtBpD,EAAKkjC,IAAM1+B,GAAKpB,EAAI,EAAIA,GACxBpD,EAAKmjC,IAAM/hC,EAAIgC,EAEnB,CAIJ,CACF,CAEA,SAAS2wG,EAAQE,GACf,GAAIA,EAAKj0G,KAAM,OAAOi0G,EAAK7wG,EAAIuwG,EAAMM,EAAKj0G,KAAK8F,OAC/C,IAAK,IAAI/G,EAAIk1G,EAAK7wG,EAAI,EAAGrE,EAAI,IAAKA,EAC5Bk1G,EAAKl1G,IAAMk1G,EAAKl1G,GAAGqE,EAAI6wG,EAAK7wG,IAC9B6wG,EAAK7wG,EAAI6wG,EAAKl1G,GAAGqE,EAGvB,CAEA,SAAS+1F,IACP,GAAKriD,EAAL,CACA,IAAI/3C,EAAqBwE,EAAlBvB,EAAI80C,EAAMj4C,OAEjB,IADA80G,EAAQ,IAAI77F,MAAM9V,GACbjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGwE,EAAOuzC,EAAM/3C,GAAI40G,EAAMpwG,EAAKuC,QAAU6/C,EAAOpiD,EAAMxE,EAAG+3C,EAH5D,CAIpB,CAoBA,MA/EsB,mBAAX6O,IAAuBA,EAAS,GAAmB,MAAVA,EAAiB,GAAKA,IA6D1EutD,EAAM/Z,WAAa,SAASib,EAAQC,GAClCv9D,EAAQs9D,EACR1+E,EAAS2+E,EACTlb,GACF,EAEA+Z,EAAMl9E,WAAa,SAASz0B,GAC1B,OAAOoa,UAAU9c,QAAUm3B,GAAcz0B,EAAG2xG,GAASl9E,CACvD,EAEAk9E,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,GAAYlyC,EAAG2xG,GAASz/D,CACrD,EAEAy/D,EAAMvtD,OAAS,SAASpkD,GACtB,OAAOoa,UAAU9c,QAAU8mD,EAAsB,mBAANpkD,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAASvtD,CACzG,EAEOutD,CACT,CChGA,SAAS,GAAMntG,GACb,OAAOA,EAAED,KACX,CAEA,SAAS,GAAKwuG,EAAUC,GACtB,IAAIhxG,EAAO+wG,EAAS/sG,IAAIgtG,GACxB,IAAKhxG,EAAM,MAAM,IAAIqM,MAAM,mBAAqB2kG,GAChD,OAAOhxG,CACT,CAEe,YAAS8lC,GACtB,IAEImrE,EAEAC,EACA39D,EACA3rB,EACAupF,EACAh/E,EARAx3B,EAAK,GACLu1C,EAYJ,SAAyBrkC,GACvB,OAAO,EAAIlH,KAAKzC,IAAI0lB,EAAM/b,EAAKkkB,OAAOxtB,OAAQqlB,EAAM/b,EAAK+c,OAAOrmB,OAClE,EAZI4wB,EAAW,GAAS,IAMpBV,EAAa,EAQjB,SAASk9E,EAAMh0F,GACb,IAAK,IAAI3f,EAAI,EAAGyC,EAAIqnC,EAAMxqC,OAAQU,EAAIy2B,IAAcz2B,EAClD,IAAK,IAAW6P,EAAMkkB,EAAQnH,EAAQ3nB,EAAGpD,EAAG+B,EAAGJ,EAAtChE,EAAI,EAAqCA,EAAIiD,IAAKjD,EACxCu0B,GAAjBlkB,EAAOi6B,EAAMtqC,IAAkBu0B,OAC/B9uB,GADuC2nB,EAAS/c,EAAK+c,QAC1C3nB,EAAI2nB,EAAO+W,GAAK5P,EAAO9uB,EAAI8uB,EAAO4P,IAAMixE,GAAOz+E,GAC1Dt0B,EAAI+qB,EAAO/qB,EAAI+qB,EAAOgX,GAAK7P,EAAOlyB,EAAIkyB,EAAO6P,IAAMgxE,GAAOz+E,GAG1DlxB,GADArB,IADAA,EAAI+E,KAAKoG,KAAK9J,EAAIA,EAAIpD,EAAIA,IACjBqzG,EAAU11G,IAAMoE,EAAI+b,EAAQs1F,EAAUz1G,GACvCqC,GAAK+B,EACbgpB,EAAO+W,IAAM1+B,GAAKzB,EAAI2xG,EAAK31G,IAC3BotB,EAAOgX,IAAM/hC,EAAI2B,EACjBuwB,EAAO4P,IAAM1+B,GAAKzB,EAAI,EAAIA,GAC1BuwB,EAAO6P,IAAM/hC,EAAI2B,CAGvB,CAEA,SAASo2F,IACP,GAAKriD,EAAL,CAEA,IAAI/3C,EAIAqQ,EAHApN,EAAI80C,EAAMj4C,OACVwhD,EAAIhX,EAAMxqC,OACVy1G,EAAW,IAAIzjG,IAAIimC,EAAMt4C,KAAI,CAACuH,EAAGhH,IAAM,CAACb,EAAG6H,EAAGhH,EAAG+3C,GAAQ/wC,MAG7D,IAAKhH,EAAI,EAAGosB,EAAQ,IAAIrT,MAAM9V,GAAIjD,EAAIshD,IAAKthD,GACzCqQ,EAAOi6B,EAAMtqC,IAAS+G,MAAQ/G,EACH,iBAAhBqQ,EAAKkkB,SAAqBlkB,EAAKkkB,OAAS,GAAKghF,EAAUllG,EAAKkkB,SAC5C,iBAAhBlkB,EAAK+c,SAAqB/c,EAAK+c,OAAS,GAAKmoF,EAAUllG,EAAK+c,SACvEhB,EAAM/b,EAAKkkB,OAAOxtB,QAAUqlB,EAAM/b,EAAKkkB,OAAOxtB,QAAU,GAAK,EAC7DqlB,EAAM/b,EAAK+c,OAAOrmB,QAAUqlB,EAAM/b,EAAK+c,OAAOrmB,QAAU,GAAK,EAG/D,IAAK/G,EAAI,EAAG21G,EAAO,IAAI58F,MAAMuoC,GAAIthD,EAAIshD,IAAKthD,EACxCqQ,EAAOi6B,EAAMtqC,GAAI21G,EAAK31G,GAAKosB,EAAM/b,EAAKkkB,OAAOxtB,QAAUqlB,EAAM/b,EAAKkkB,OAAOxtB,OAASqlB,EAAM/b,EAAK+c,OAAOrmB,QAGtG0uG,EAAY,IAAI18F,MAAMuoC,GAAIs0D,IAC1BF,EAAY,IAAI38F,MAAMuoC,GAAIu0D,GArBR,CAsBpB,CAEA,SAASD,IACP,GAAK79D,EAEL,IAAK,IAAI/3C,EAAI,EAAGiD,EAAIqnC,EAAMxqC,OAAQE,EAAIiD,IAAKjD,EACzCy1G,EAAUz1G,IAAM00C,EAASpK,EAAMtqC,GAAIA,EAAGsqC,EAE1C,CAEA,SAASurE,IACP,GAAK99D,EAEL,IAAK,IAAI/3C,EAAI,EAAGiD,EAAIqnC,EAAMxqC,OAAQE,EAAIiD,IAAKjD,EACzC01G,EAAU11G,IAAM23B,EAAS2S,EAAMtqC,GAAIA,EAAGsqC,EAE1C,CA4BA,OA1Fa,MAATA,IAAeA,EAAQ,IAgE3B6pE,EAAM/Z,WAAa,SAASib,EAAQC,GAClCv9D,EAAQs9D,EACR1+E,EAAS2+E,EACTlb,GACF,EAEA+Z,EAAM7pE,MAAQ,SAAS9nC,GACrB,OAAOoa,UAAU9c,QAAUwqC,EAAQ9nC,EAAG43F,IAAc+Z,GAAS7pE,CAC/D,EAEA6pE,EAAMh1G,GAAK,SAASqD,GAClB,OAAOoa,UAAU9c,QAAUX,EAAKqD,EAAG2xG,GAASh1G,CAC9C,EAEAg1G,EAAMl9E,WAAa,SAASz0B,GAC1B,OAAOoa,UAAU9c,QAAUm3B,GAAcz0B,EAAG2xG,GAASl9E,CACvD,EAEAk9E,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,EAAwB,mBAANlyC,EAAmBA,EAAI,IAAUA,GAAIozG,IAAsBzB,GAASz/D,CACnH,EAEAy/D,EAAMx8E,SAAW,SAASn1B,GACxB,OAAOoa,UAAU9c,QAAU63B,EAAwB,mBAANn1B,EAAmBA,EAAI,IAAUA,GAAIqzG,IAAsB1B,GAASx8E,CACnH,EAEOw8E,CACT,CJhFAQ,GAAUxyB,KAAO,WACf,IAEIpqC,EACA0iB,EAHA0nB,EAAO,IAAIqyB,GAASh1G,KAAK6pD,GAAI7pD,KAAKkrD,GAAIlrD,KAAKs+F,IAAKt+F,KAAKu+F,IAAKv+F,KAAKw+F,IAAKx+F,KAAKy+F,KACzEz5F,EAAOhF,KAAK0F,MAIhB,IAAKV,EAAM,OAAO29E,EAElB,IAAK39E,EAAK1E,OAAQ,OAAOqiF,EAAKj9E,MAAQwvG,GAAUlwG,GAAO29E,EAGvD,IADApqC,EAAQ,CAAC,CAACxjB,OAAQ/vB,EAAM4oB,OAAQ+0D,EAAKj9E,MAAQ,IAAI6T,MAAM,KAChDvU,EAAOuzC,EAAMx0C,OAClB,IAAK,IAAIvD,EAAI,EAAGA,EAAI,IAAKA,GACnBy6D,EAAQj2D,EAAK+vB,OAAOv0B,MAClBy6D,EAAM36D,OAAQi4C,EAAM94C,KAAK,CAACs1B,OAAQkmC,EAAOrtC,OAAQ5oB,EAAK4oB,OAAOptB,GAAK,IAAI+Y,MAAM,KAC3EvU,EAAK4oB,OAAOptB,GAAK00G,GAAUj6C,IAKtC,OAAO0nB,CACT,EAEAwyB,GAAUrvG,IJ3DK,SAAS0B,GACtB,MAAMvB,GAAKjG,KAAK6pD,GAAGrnD,KAAK,KAAMgF,GAC1B3E,GAAK7C,KAAKkrD,GAAG1oD,KAAK,KAAMgF,GAC5B,OAAO,GAAIxH,KAAKs2G,MAAMrwG,EAAGpD,GAAIoD,EAAGpD,EAAG2E,EACrC,EIwDA2tG,GAAUF,OJXH,SAAgBxzG,GACrB,IAAI+F,EAAGhH,EACHyF,EACApD,EAFMY,EAAIhC,EAAKnB,OAGfm+E,EAAK,IAAIllE,MAAM9V,GACf8yG,EAAK,IAAIh9F,MAAM9V,GACfu1C,EAAKK,IACLhc,EAAKgc,IACL9I,GAAK,IACLz7B,GAAK,IAGT,IAAKtU,EAAI,EAAGA,EAAIiD,IAAKjD,EACfkqB,MAAMzkB,GAAKjG,KAAK6pD,GAAGrnD,KAAK,KAAMgF,EAAI/F,EAAKjB,MAAQkqB,MAAM7nB,GAAK7C,KAAKkrD,GAAG1oD,KAAK,KAAMgF,MACjFi3E,EAAGj+E,GAAKyF,EACRswG,EAAG/1G,GAAKqC,EACJoD,EAAI+yC,IAAIA,EAAK/yC,GACbA,EAAIsqC,IAAIA,EAAKtqC,GACbpD,EAAIw6B,IAAIA,EAAKx6B,GACbA,EAAIiS,IAAIA,EAAKjS,IAInB,GAAIm2C,EAAKzI,GAAMlT,EAAKvoB,EAAI,OAAO9U,KAM/B,IAHAA,KAAKs2G,MAAMt9D,EAAI3b,GAAIi5E,MAAM/lE,EAAIz7B,GAGxBtU,EAAI,EAAGA,EAAIiD,IAAKjD,EACnB,GAAIR,KAAMy+E,EAAGj+E,GAAI+1G,EAAG/1G,GAAIiB,EAAKjB,IAG/B,OAAOR,IACT,EItBAm1G,GAAUmB,MK7DK,SAASrwG,EAAGpD,GACzB,GAAI6nB,MAAMzkB,GAAKA,IAAMykB,MAAM7nB,GAAKA,GAAI,OAAO7C,KAE3C,IAAIg5C,EAAKh5C,KAAKs+F,IACVjhE,EAAKr9B,KAAKu+F,IACVhuD,EAAKvwC,KAAKw+F,IACV1pF,EAAK9U,KAAKy+F,IAKd,GAAI/zE,MAAMsuB,GACRzI,GAAMyI,EAAKrvC,KAAKC,MAAM3D,IAAM,EAC5B6O,GAAMuoB,EAAK1zB,KAAKC,MAAM/G,IAAM,MAIzB,CAMH,IALA,IAEIu1C,EACA53C,EAHA0+E,EAAI3uC,EAAKyI,GAAM,EACfh0C,EAAOhF,KAAK0F,MAITszC,EAAK/yC,GAAKA,GAAKsqC,GAAMlT,EAAKx6B,GAAKA,GAAKiS,GAGzC,OAFAtU,GAAKqC,EAAIw6B,IAAO,EAAKp3B,EAAI+yC,GACzBZ,EAAS,IAAI7+B,MAAM,IAAW/Y,GAAKwE,EAAMA,EAAOozC,EAAQ8mC,GAAK,EACrD1+E,GACN,KAAK,EAAG+vC,EAAKyI,EAAKkmC,EAAGpqE,EAAKuoB,EAAK6hD,EAAG,MAClC,KAAK,EAAGlmC,EAAKzI,EAAK2uC,EAAGpqE,EAAKuoB,EAAK6hD,EAAG,MAClC,KAAK,EAAG3uC,EAAKyI,EAAKkmC,EAAG7hD,EAAKvoB,EAAKoqE,EAAG,MAClC,KAAK,EAAGlmC,EAAKzI,EAAK2uC,EAAG7hD,EAAKvoB,EAAKoqE,EAI/Bl/E,KAAK0F,OAAS1F,KAAK0F,MAAMpF,SAAQN,KAAK0F,MAAQV,EACpD,CAMA,OAJAhF,KAAKs+F,IAAMtlD,EACXh5C,KAAKu+F,IAAMlhE,EACXr9B,KAAKw+F,IAAMjuD,EACXvwC,KAAKy+F,IAAM3pF,EACJ9U,IACT,ELoBAm1G,GAAU1zG,KM9DK,WACb,IAAIA,EAAO,GAIX,OAHAzB,KAAKy1G,OAAM,SAASzwG,GAClB,IAAKA,EAAK1E,OAAQ,GAAGmB,EAAKhC,KAAKuF,EAAKvD,YAAcuD,EAAOA,EAAK3B,KAChE,IACO5B,CACT,ENyDA0zG,GAAUh6B,OO/DK,SAASn4E,GACtB,OAAOoa,UAAU9c,OACXN,KAAKs2G,OAAOtzG,EAAE,GAAG,IAAKA,EAAE,GAAG,IAAIszG,OAAOtzG,EAAE,GAAG,IAAKA,EAAE,GAAG,IACrD0nB,MAAM1qB,KAAKs+F,UAAOx9F,EAAY,CAAC,CAACd,KAAKs+F,IAAKt+F,KAAKu+F,KAAM,CAACv+F,KAAKw+F,IAAKx+F,KAAKy+F,KAC7E,EP4DA0W,GAAU9uG,KQ9DK,SAASJ,EAAGpD,EAAGukD,GAC5B,IAAI3lD,EAGA8uC,EACAz7B,EACA07B,EACAz7B,EAKA4qC,EACAn/C,EAXAw4C,EAAKh5C,KAAKs+F,IACVjhE,EAAKr9B,KAAKu+F,IAKV/hD,EAAKx8C,KAAKw+F,IACV/hD,EAAKz8C,KAAKy+F,IACV+X,EAAQ,GACRxxG,EAAOhF,KAAK0F,MAYhB,IARIV,GAAMwxG,EAAM/2G,KAAK,IAAI,GAAKuF,EAAMg0C,EAAI3b,EAAImf,EAAIC,IAClC,MAAV2K,EAAgBA,EAAS/N,KAE3BL,EAAK/yC,EAAImhD,EAAQ/pB,EAAKx6B,EAAIukD,EAC1B5K,EAAKv2C,EAAImhD,EAAQ3K,EAAK55C,EAAIukD,EAC1BA,GAAUA,GAGLzH,EAAI62D,EAAMzyG,OAGf,OAAMiB,EAAO26C,EAAE36C,QACPurC,EAAKoP,EAAE3G,IAAMwD,IACb1nC,EAAK6qC,EAAEtiB,IAAMof,IACbjM,EAAKmP,EAAEpP,IAAMyI,IACbjkC,EAAK4qC,EAAE7qC,IAAMuoB,GAGrB,GAAIr4B,EAAK1E,OAAQ,CACf,IAAIs0G,GAAMrkE,EAAKC,GAAM,EACjBqkE,GAAM//F,EAAKC,GAAM,EAErByhG,EAAM/2G,KACJ,IAAI,GAAKuF,EAAK,GAAI4vG,EAAIC,EAAIrkE,EAAIz7B,GAC9B,IAAI,GAAK/P,EAAK,GAAIurC,EAAIskE,EAAID,EAAI7/F,GAC9B,IAAI,GAAK/P,EAAK,GAAI4vG,EAAI9/F,EAAI07B,EAAIqkE,GAC9B,IAAI,GAAK7vG,EAAK,GAAIurC,EAAIz7B,EAAI8/F,EAAIC,KAI5Br0G,GAAKqC,GAAKgyG,IAAO,EAAK5uG,GAAK2uG,KAC7Bj1D,EAAI62D,EAAMA,EAAMl2G,OAAS,GACzBk2G,EAAMA,EAAMl2G,OAAS,GAAKk2G,EAAMA,EAAMl2G,OAAS,EAAIE,GACnDg2G,EAAMA,EAAMl2G,OAAS,EAAIE,GAAKm/C,EAElC,KAGK,CACH,IAAIxL,EAAKluC,GAAKjG,KAAK6pD,GAAGrnD,KAAK,KAAMwC,EAAKvD,MAClC2yC,EAAKvxC,GAAK7C,KAAKkrD,GAAG1oD,KAAK,KAAMwC,EAAKvD,MAClCgV,EAAK09B,EAAKA,EAAKC,EAAKA,EACxB,GAAI39B,EAAK2wC,EAAQ,CACf,IAAI5/C,EAAImC,KAAKoG,KAAKq3C,EAAS3wC,GAC3BuiC,EAAK/yC,EAAIuB,EAAG61B,EAAKx6B,EAAI2E,EACrBg1C,EAAKv2C,EAAIuB,EAAGi1C,EAAK55C,EAAI2E,EACrB/F,EAAOuD,EAAKvD,IACd,CACF,CAGF,OAAOA,CACT,ERJA0zG,GAAUpvG,OSjEK,SAASyB,GACtB,GAAIkjB,MAAMzkB,GAAKjG,KAAK6pD,GAAGrnD,KAAK,KAAMgF,KAAOkjB,MAAM7nB,GAAK7C,KAAKkrD,GAAG1oD,KAAK,KAAMgF,IAAK,OAAOxH,KAEnF,IAAIo4C,EAEAq+D,EACAh2B,EACAp9E,EAKA4C,EACApD,EACA+xG,EACAC,EACAxwG,EACAy9E,EACAthF,EACAsJ,EAfA9E,EAAOhF,KAAK0F,MAIZszC,EAAKh5C,KAAKs+F,IACVjhE,EAAKr9B,KAAKu+F,IACVhuD,EAAKvwC,KAAKw+F,IACV1pF,EAAK9U,KAAKy+F,IAWd,IAAKz5F,EAAM,OAAOhF,KAIlB,GAAIgF,EAAK1E,OAAQ,OAAa,CAG5B,IAFI+D,EAAQ4B,IAAM2uG,GAAM57D,EAAKzI,GAAM,IAAIyI,EAAK47D,EAASrkE,EAAKqkE,GACtD9yB,EAASj/E,IAAMgyG,GAAMx3E,EAAKvoB,GAAM,IAAIuoB,EAAKw3E,EAAS//F,EAAK+/F,EACrDz8D,EAASpzC,IAAMA,EAAOA,EAAKxE,EAAIshF,GAAU,EAAIz9E,IAAS,OAAOrE,KACnE,IAAKgF,EAAK1E,OAAQ,OACd83C,EAAQ53C,EAAI,EAAK,IAAM43C,EAAQ53C,EAAI,EAAK,IAAM43C,EAAQ53C,EAAI,EAAK,MAAIi2G,EAAWr+D,EAAQtuC,EAAItJ,EAChG,CAGA,KAAOwE,EAAKvD,OAAS+F,MAASi5E,EAAWz7E,IAAMA,EAAOA,EAAK3B,MAAO,OAAOrD,KAIzE,OAHIqD,EAAO2B,EAAK3B,cAAa2B,EAAK3B,KAG9Bo9E,GAAkBp9E,EAAOo9E,EAASp9E,KAAOA,SAAco9E,EAASp9E,KAAOrD,MAGtEo4C,GAGL/0C,EAAO+0C,EAAO53C,GAAK6C,SAAc+0C,EAAO53C,IAGnCwE,EAAOozC,EAAO,IAAMA,EAAO,IAAMA,EAAO,IAAMA,EAAO,KACnDpzC,KAAUozC,EAAO,IAAMA,EAAO,IAAMA,EAAO,IAAMA,EAAO,MACvDpzC,EAAK1E,SACPm2G,EAAUA,EAAS3sG,GAAK9E,EACvBhF,KAAK0F,MAAQV,GAGbhF,OAbaA,KAAK0F,MAAQrC,EAAMrD,KAczC,ETUAm1G,GAAUuB,USRH,SAAmBj1G,GACxB,IAAK,IAAIjB,EAAI,EAAGiD,EAAIhC,EAAKnB,OAAQE,EAAIiD,IAAKjD,EAAGR,KAAK+F,OAAOtE,EAAKjB,IAC9D,OAAOR,IACT,ETMAm1G,GAAUhwG,KUnEK,WACb,OAAOnF,KAAK0F,KACd,EVkEAyvG,GAAUjtG,KWpEK,WACb,IAAIA,EAAO,EAIX,OAHAlI,KAAKy1G,OAAM,SAASzwG,GAClB,IAAKA,EAAK1E,OAAQ,KAAK4H,QAAalD,EAAOA,EAAK3B,KAClD,IACO6E,CACT,EX+DAitG,GAAUM,MYnEK,SAAS51F,GACtB,IAAgB8/B,EAAsBsb,EAAOjiB,EAAI3b,EAAIkT,EAAIz7B,EAArD0hG,EAAQ,GAAOxxG,EAAOhF,KAAK0F,MAE/B,IADIV,GAAMwxG,EAAM/2G,KAAK,IAAI,GAAKuF,EAAMhF,KAAKs+F,IAAKt+F,KAAKu+F,IAAKv+F,KAAKw+F,IAAKx+F,KAAKy+F,MAChE9+C,EAAI62D,EAAMzyG,OACf,IAAK8b,EAAS7a,EAAO26C,EAAE36C,KAAMg0C,EAAK2G,EAAE3G,GAAI3b,EAAKsiB,EAAEtiB,GAAIkT,EAAKoP,EAAEpP,GAAIz7B,EAAK6qC,EAAE7qC,KAAO9P,EAAK1E,OAAQ,CACvF,IAAIs0G,GAAM57D,EAAKzI,GAAM,EAAGskE,GAAMx3E,EAAKvoB,GAAM,GACrCmmD,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAO25C,EAAIC,EAAItkE,EAAIz7B,KACxDmmD,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAOjiB,EAAI67D,EAAID,EAAI9/F,KACxDmmD,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAO25C,EAAIv3E,EAAIkT,EAAIskE,KACxD55C,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAOjiB,EAAI3b,EAAIu3E,EAAIC,GAC9D,CAEF,OAAO70G,IACT,EZuDAm1G,GAAUI,WapEK,SAAS11F,GACtB,IAA2B8/B,EAAvB62D,EAAQ,GAAInzG,EAAO,GAEvB,IADIrD,KAAK0F,OAAO8wG,EAAM/2G,KAAK,IAAI,GAAKO,KAAK0F,MAAO1F,KAAKs+F,IAAKt+F,KAAKu+F,IAAKv+F,KAAKw+F,IAAKx+F,KAAKy+F,MAC5E9+C,EAAI62D,EAAMzyG,OAAO,CACtB,IAAIiB,EAAO26C,EAAE36C,KACb,GAAIA,EAAK1E,OAAQ,CACf,IAAI26D,EAAOjiB,EAAK2G,EAAE3G,GAAI3b,EAAKsiB,EAAEtiB,GAAIkT,EAAKoP,EAAEpP,GAAIz7B,EAAK6qC,EAAE7qC,GAAI8/F,GAAM57D,EAAKzI,GAAM,EAAGskE,GAAMx3E,EAAKvoB,GAAM,GACxFmmD,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAOjiB,EAAI3b,EAAIu3E,EAAIC,KACxD55C,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAO25C,EAAIv3E,EAAIkT,EAAIskE,KACxD55C,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAOjiB,EAAI67D,EAAID,EAAI9/F,KACxDmmD,EAAQj2D,EAAK,KAAIwxG,EAAM/2G,KAAK,IAAI,GAAKw7D,EAAO25C,EAAIC,EAAItkE,EAAIz7B,GAC9D,CACAzR,EAAK5D,KAAKkgD,EACZ,CACA,KAAOA,EAAIt8C,EAAKU,OACd8b,EAAS8/B,EAAE36C,KAAM26C,EAAE3G,GAAI2G,EAAEtiB,GAAIsiB,EAAEpP,GAAIoP,EAAE7qC,IAEvC,OAAO9U,IACT,EbmDAm1G,GAAUlvG,EFnEK,SAASjD,GACtB,OAAOoa,UAAU9c,QAAUN,KAAK6pD,GAAK7mD,EAAGhD,MAAQA,KAAK6pD,EACvD,EEkEAsrD,GAAUtyG,EDpEK,SAASG,GACtB,OAAOoa,UAAU9c,QAAUN,KAAKkrD,GAAKloD,EAAGhD,MAAQA,KAAKkrD,EACvD,EeLA,MAAM3mD,GAAI,QACJ0J,GAAI,WACJ6zC,GAAI,WCCH,SAAS,GAAEt6C,GAChB,OAAOA,EAAEvB,CACX,CAEO,SAAS,GAAEuB,GAChB,OAAOA,EAAE3E,CACX,CAEA,IAAI8zG,GAAgB,GAChBC,GAAejtG,KAAK2qC,IAAM,EAAI3qC,KAAKoG,KAAK,IAE7B,YAASwoC,GACtB,IAAIs+D,EACAl2F,EAAQ,EACRm2F,EAAW,KACXC,EAAa,EAAIptG,KAAKkB,IAAIisG,EAAU,EAAI,KACxCE,EAAc,EACdC,EAAgB,GAChBC,EAAS,IAAI5kG,IACb6kG,EAAUlkB,GAAMhvF,GAChB+W,EAAQ,GAAS,OAAQ,OACzBmc,EDpBS,WACb,IAAI0pB,EAAI,EACR,MAAO,KAAOA,GAAKt8C,GAAIs8C,EAAI5yC,IAAK6zC,IAAKA,EACvC,CCiBes1D,GAIb,SAASnzG,IACPgzD,IACAj8C,EAAMxY,KAAK,OAAQq0G,GACfl2F,EAAQm2F,IACVK,EAAQhlF,OACRnX,EAAMxY,KAAK,MAAOq0G,GAEtB,CAEA,SAAS5/C,EAAKx/B,GACZ,IAAIj3B,EAAqBwE,EAAlBvB,EAAI80C,EAAMj4C,YAEEQ,IAAf22B,IAA0BA,EAAa,GAE3C,IAAK,IAAIz2B,EAAI,EAAGA,EAAIy2B,IAAcz2B,EAOhC,IANA2f,IAAUq2F,EAAcr2F,GAASo2F,EAEjCG,EAAO3wG,SAAQ,SAASouG,GACtBA,EAAMh0F,EACR,IAEKngB,EAAI,EAAGA,EAAIiD,IAAKjD,EAEJ,OADfwE,EAAOuzC,EAAM/3C,IACJ4vE,GAAYprE,EAAKiB,GAAKjB,EAAK2/B,IAAMsyE,GACrCjyG,EAAKiB,EAAIjB,EAAKorE,GAAIprE,EAAK2/B,GAAK,GAClB,MAAX3/B,EAAKqrE,GAAYrrE,EAAKnC,GAAKmC,EAAK4/B,IAAMqyE,GACrCjyG,EAAKnC,EAAImC,EAAKqrE,GAAIrrE,EAAK4/B,GAAK,GAIrC,OAAOiyE,CACT,CAEA,SAASQ,IACP,IAAK,IAA6BryG,EAAzBxE,EAAI,EAAGiD,EAAI80C,EAAMj4C,OAAcE,EAAIiD,IAAKjD,EAAG,CAIlD,IAHAwE,EAAOuzC,EAAM/3C,IAAS+G,MAAQ/G,EACf,MAAXwE,EAAKorE,KAAYprE,EAAKiB,EAAIjB,EAAKorE,IACpB,MAAXprE,EAAKqrE,KAAYrrE,EAAKnC,EAAImC,EAAKqrE,IAC/B3lD,MAAM1lB,EAAKiB,IAAMykB,MAAM1lB,EAAKnC,GAAI,CAClC,IAAIukD,EAASuvD,GAAgBhtG,KAAKoG,KAAK,GAAMvP,GAAI6zC,EAAQ7zC,EAAIo2G,GAC7D5xG,EAAKiB,EAAImhD,EAASz9C,KAAK6qC,IAAIH,GAC3BrvC,EAAKnC,EAAIukD,EAASz9C,KAAK8qC,IAAIJ,EAC7B,EACI3pB,MAAM1lB,EAAK2/B,KAAOja,MAAM1lB,EAAK4/B,OAC/B5/B,EAAK2/B,GAAK3/B,EAAK4/B,GAAK,EAExB,CACF,CAEA,SAAS0yE,EAAgB3C,GAEvB,OADIA,EAAM/Z,YAAY+Z,EAAM/Z,WAAWriD,EAAOphB,GACvCw9E,CACT,CAIA,OA1Da,MAATp8D,IAAeA,EAAQ,IAwD3B8+D,IAEOR,EAAa,CAClB5/C,KAAMA,EAENi8B,QAAS,WACP,OAAOikB,EAAQjkB,QAAQjvF,GAAO4yG,CAChC,EAEA1kF,KAAM,WACJ,OAAOglF,EAAQhlF,OAAQ0kF,CACzB,EAEAt+D,MAAO,SAASv1C,GACd,OAAOoa,UAAU9c,QAAUi4C,EAAQv1C,EAAGq0G,IAAmBH,EAAO3wG,QAAQ+wG,GAAkBT,GAAct+D,CAC1G,EAEA53B,MAAO,SAAS3d,GACd,OAAOoa,UAAU9c,QAAUqgB,GAAS3d,EAAG6zG,GAAcl2F,CACvD,EAEAm2F,SAAU,SAAS9zG,GACjB,OAAOoa,UAAU9c,QAAUw2G,GAAY9zG,EAAG6zG,GAAcC,CAC1D,EAEAC,WAAY,SAAS/zG,GACnB,OAAOoa,UAAU9c,QAAUy2G,GAAc/zG,EAAG6zG,IAAeE,CAC7D,EAEAC,YAAa,SAASh0G,GACpB,OAAOoa,UAAU9c,QAAU02G,GAAeh0G,EAAG6zG,GAAcG,CAC7D,EAEAC,cAAe,SAASj0G,GACtB,OAAOoa,UAAU9c,QAAU22G,EAAgB,EAAIj0G,EAAG6zG,GAAc,EAAII,CACtE,EAEAM,aAAc,SAASv0G,GACrB,OAAOoa,UAAU9c,QAAU62B,EAASn0B,EAAGk0G,EAAO3wG,QAAQ+wG,GAAkBT,GAAc1/E,CACxF,EAEAw9E,MAAO,SAAS/4D,EAAM54C,GACpB,OAAOoa,UAAU9c,OAAS,GAAW,MAAL0C,EAAYk0G,EAAO/uE,OAAOyT,GAAQs7D,EAAOxkG,IAAIkpC,EAAM07D,EAAgBt0G,IAAM6zG,GAAcK,EAAOluG,IAAI4yC,EACpI,EAEAv1C,KAAM,SAASJ,EAAGpD,EAAGukD,GACnB,IAEIjT,EACAC,EACA39B,EACAzR,EACAwyG,EANAh3G,EAAI,EACJiD,EAAI80C,EAAMj4C,OAUd,IAHc,MAAV8mD,EAAgBA,EAAS/N,IACxB+N,GAAUA,EAEV5mD,EAAI,EAAGA,EAAIiD,IAAKjD,GAInBiW,GAFA09B,EAAKluC,GADLjB,EAAOuzC,EAAM/3C,IACCyF,GAEJkuC,GADVC,EAAKvxC,EAAImC,EAAKnC,GACMuxC,GACXgT,IAAQowD,EAAUxyG,EAAMoiD,EAAS3wC,GAG5C,OAAO+gG,CACT,EAEAr7E,GAAI,SAASyf,EAAM54C,GACjB,OAAOoa,UAAU9c,OAAS,GAAK0a,EAAMmhB,GAAGyf,EAAM54C,GAAI6zG,GAAc77F,EAAMmhB,GAAGyf,EAC3E,EAEJ,CCtJe,cACb,IAAIrD,EACAvzC,EACAmyB,EACAxW,EAEAs1F,EADA/gE,EAAW,IAAU,IAErBuiE,EAAe,EACfC,EAAer+D,IACfs+D,EAAS,IAEb,SAAShD,EAAM3xG,GACb,IAAIxC,EAAGiD,EAAI80C,EAAMj4C,OAAQ4K,EAAO6pG,GAASx8D,EAAO,GAAG,IAAGg9D,WAAWqC,GACjE,IAAKj3F,EAAQ3d,EAAGxC,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGwE,EAAOuzC,EAAM/3C,GAAI0K,EAAKuqG,MAAMr1F,EACjE,CAEA,SAASw6E,IACP,GAAKriD,EAAL,CACA,IAAI/3C,EAAqBwE,EAAlBvB,EAAI80C,EAAMj4C,OAEjB,IADA21G,EAAY,IAAI18F,MAAM9V,GACjBjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGwE,EAAOuzC,EAAM/3C,GAAIy1G,EAAUjxG,EAAKuC,QAAU2tC,EAASlwC,EAAMxE,EAAG+3C,EAHlE,CAIpB,CAEA,SAASq/D,EAAWlC,GAClB,IAAkB/1D,EAAG1xC,EAAehI,EAAGpD,EAAGrC,EAAtC00C,EAAW,EAAS+C,EAAS,EAGjC,GAAIy9D,EAAKp1G,OAAQ,CACf,IAAK2F,EAAIpD,EAAIrC,EAAI,EAAGA,EAAI,IAAKA,GACtBm/C,EAAI+1D,EAAKl1G,MAAQyN,EAAItE,KAAKiE,IAAI+xC,EAAE77C,UACnCoxC,GAAYyK,EAAE77C,MAAOm0C,GAAUhqC,EAAGhI,GAAKgI,EAAI0xC,EAAE15C,EAAGpD,GAAKoL,EAAI0xC,EAAE98C,GAG/D6yG,EAAKzvG,EAAIA,EAAIgyC,EACby9D,EAAK7yG,EAAIA,EAAIo1C,CACf,KAGK,EACH0H,EAAI+1D,GACFzvG,EAAI05C,EAAEl+C,KAAKwE,EACb05C,EAAE98C,EAAI88C,EAAEl+C,KAAKoB,EACb,GAAGqyC,GAAY+gE,EAAUt2D,EAAEl+C,KAAK8F,aACzBo4C,EAAIA,EAAEt8C,KACf,CAEAqyG,EAAK5xG,MAAQoxC,CACf,CAEA,SAAS90B,EAAMs1F,EAAMnlE,EAAIvtC,EAAGwtC,GAC1B,IAAKklE,EAAK5xG,MAAO,OAAO,EAExB,IAAImC,EAAIyvG,EAAKzvG,EAAIjB,EAAKiB,EAClBpD,EAAI6yG,EAAK7yG,EAAImC,EAAKnC,EAClBkiD,EAAIvU,EAAKD,EACT3rC,EAAIqB,EAAIA,EAAIpD,EAAIA,EAIpB,GAAIkiD,EAAIA,EAAI4yD,EAAS/yG,EAQnB,OAPIA,EAAI8yG,IACI,IAANzxG,IAA6BrB,IAApBqB,EAAI2vG,GAAOz+E,IAAkBlxB,GAChC,IAANpD,IAA6B+B,IAApB/B,EAAI+yG,GAAOz+E,IAAkBt0B,GACtC+B,EAAI6yG,IAAc7yG,EAAI+E,KAAKoG,KAAK0nG,EAAe7yG,IACnDI,EAAK2/B,IAAM1+B,EAAIyvG,EAAK5xG,MAAQ6c,EAAQ/b,EACpCI,EAAK4/B,IAAM/hC,EAAI6yG,EAAK5xG,MAAQ6c,EAAQ/b,IAE/B,EAIJ,KAAI8wG,EAAKp1G,QAAUsE,GAAK8yG,GAAxB,EAGDhC,EAAKj0G,OAASuD,GAAQ0wG,EAAKryG,QACnB,IAAN4C,IAA6BrB,IAApBqB,EAAI2vG,GAAOz+E,IAAkBlxB,GAChC,IAANpD,IAA6B+B,IAApB/B,EAAI+yG,GAAOz+E,IAAkBt0B,GACtC+B,EAAI6yG,IAAc7yG,EAAI+E,KAAKoG,KAAK0nG,EAAe7yG,KAGrD,GAAO8wG,EAAKj0G,OAASuD,IACnB+/C,EAAIkxD,EAAUP,EAAKj0G,KAAK8F,OAASoZ,EAAQ/b,EACzCI,EAAK2/B,IAAM1+B,EAAI8+C,EACf//C,EAAK4/B,IAAM/hC,EAAIkiD,SACR2wD,EAAOA,EAAKryG,KAb4B,CAcnD,CAwBA,OAtBAsxG,EAAM/Z,WAAa,SAASib,EAAQC,GAClCv9D,EAAQs9D,EACR1+E,EAAS2+E,EACTlb,GACF,EAEA+Z,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,EAAwB,mBAANlyC,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAASz/D,CAC3G,EAEAy/D,EAAMkD,YAAc,SAAS70G,GAC3B,OAAOoa,UAAU9c,QAAUm3G,EAAez0G,EAAIA,EAAG2xG,GAAShrG,KAAKoG,KAAK0nG,EACtE,EAEA9C,EAAMmD,YAAc,SAAS90G,GAC3B,OAAOoa,UAAU9c,QAAUo3G,EAAe10G,EAAIA,EAAG2xG,GAAShrG,KAAKoG,KAAK2nG,EACtE,EAEA/C,EAAMtjC,MAAQ,SAASruE,GACrB,OAAOoa,UAAU9c,QAAUq3G,EAAS30G,EAAIA,EAAG2xG,GAAShrG,KAAKoG,KAAK4nG,EAChE,EAEOhD,CACT,CCjHe,YAASvtD,EAAQnhD,EAAGpD,GACjC,IAAI01C,EAEA09D,EACA8B,EAFA7iE,EAAW,GAAS,IAQxB,SAASy/D,EAAMh0F,GACb,IAAK,IAAIngB,EAAI,EAAGiD,EAAI80C,EAAMj4C,OAAQE,EAAIiD,IAAKjD,EAAG,CAC5C,IAAIwE,EAAOuzC,EAAM/3C,GACb2zC,EAAKnvC,EAAKiB,EAAIA,GAAK,KACnBmuC,EAAKpvC,EAAKnC,EAAIA,GAAK,KACnBgC,EAAI8E,KAAKoG,KAAKokC,EAAKA,EAAKC,EAAKA,GAC7BpzC,GAAK+2G,EAASv3G,GAAKqE,GAAKoxG,EAAUz1G,GAAKmgB,EAAQ9b,EACnDG,EAAK2/B,IAAMwP,EAAKnzC,EAChBgE,EAAK4/B,IAAMwP,EAAKpzC,CAClB,CACF,CAEA,SAAS45F,IACP,GAAKriD,EAAL,CACA,IAAI/3C,EAAGiD,EAAI80C,EAAMj4C,OAGjB,IAFA21G,EAAY,IAAI18F,MAAM9V,GACtBs0G,EAAW,IAAIx+F,MAAM9V,GAChBjD,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBu3G,EAASv3G,IAAM4mD,EAAO7O,EAAM/3C,GAAIA,EAAG+3C,GACnC09D,EAAUz1G,GAAKkqB,MAAMqtF,EAASv3G,IAAM,GAAK00C,EAASqD,EAAM/3C,GAAIA,EAAG+3C,EAN/C,CAQpB,CAsBA,MA/CsB,mBAAX6O,IAAuBA,EAAS,IAAUA,IAC5C,MAALnhD,IAAWA,EAAI,GACV,MAALpD,IAAWA,EAAI,GAyBnB8xG,EAAM/Z,WAAa,SAAS53F,GAC1Bu1C,EAAQv1C,EAAG43F,GACb,EAEA+Z,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,EAAwB,mBAANlyC,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAASz/D,CAC3G,EAEAy/D,EAAMvtD,OAAS,SAASpkD,GACtB,OAAOoa,UAAU9c,QAAU8mD,EAAsB,mBAANpkD,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAASvtD,CACzG,EAEAutD,EAAM1uG,EAAI,SAASjD,GACjB,OAAOoa,UAAU9c,QAAU2F,GAAKjD,EAAG2xG,GAAS1uG,CAC9C,EAEA0uG,EAAM9xG,EAAI,SAASG,GACjB,OAAOoa,UAAU9c,QAAUuC,GAAKG,EAAG2xG,GAAS9xG,CAC9C,EAEO8xG,CACT,CCtDe,YAAS1uG,GACtB,IACIsyC,EACA09D,EACAx3B,EAHAvpC,EAAW,GAAS,IAOxB,SAASy/D,EAAMh0F,GACb,IAAK,IAA6B3b,EAAzBxE,EAAI,EAAGiD,EAAI80C,EAAMj4C,OAAcE,EAAIiD,IAAKjD,GAC/CwE,EAAOuzC,EAAM/3C,IAASmkC,KAAO85C,EAAGj+E,GAAKwE,EAAKiB,GAAKgwG,EAAUz1G,GAAKmgB,CAElE,CAEA,SAASi6E,IACP,GAAKriD,EAAL,CACA,IAAI/3C,EAAGiD,EAAI80C,EAAMj4C,OAGjB,IAFA21G,EAAY,IAAI18F,MAAM9V,GACtBg7E,EAAK,IAAIllE,MAAM9V,GACVjD,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBy1G,EAAUz1G,GAAKkqB,MAAM+zD,EAAGj+E,IAAMyF,EAAEsyC,EAAM/3C,GAAIA,EAAG+3C,IAAU,GAAKrD,EAASqD,EAAM/3C,GAAIA,EAAG+3C,EALlE,CAOpB,CAeA,MA/BiB,mBAANtyC,IAAkBA,EAAI,GAAc,MAALA,EAAY,GAAKA,IAkB3D0uG,EAAM/Z,WAAa,SAAS53F,GAC1Bu1C,EAAQv1C,EACR43F,GACF,EAEA+Z,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,EAAwB,mBAANlyC,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAASz/D,CAC3G,EAEAy/D,EAAM1uG,EAAI,SAASjD,GACjB,OAAOoa,UAAU9c,QAAU2F,EAAiB,mBAANjD,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAAS1uG,CACpG,EAEO0uG,CACT,CCtCe,YAAS9xG,GACtB,IACI01C,EACA09D,EACAM,EAHArhE,EAAW,GAAS,IAOxB,SAASy/D,EAAMh0F,GACb,IAAK,IAA6B3b,EAAzBxE,EAAI,EAAGiD,EAAI80C,EAAMj4C,OAAcE,EAAIiD,IAAKjD,GAC/CwE,EAAOuzC,EAAM/3C,IAASokC,KAAO2xE,EAAG/1G,GAAKwE,EAAKnC,GAAKozG,EAAUz1G,GAAKmgB,CAElE,CAEA,SAASi6E,IACP,GAAKriD,EAAL,CACA,IAAI/3C,EAAGiD,EAAI80C,EAAMj4C,OAGjB,IAFA21G,EAAY,IAAI18F,MAAM9V,GACtB8yG,EAAK,IAAIh9F,MAAM9V,GACVjD,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBy1G,EAAUz1G,GAAKkqB,MAAM6rF,EAAG/1G,IAAMqC,EAAE01C,EAAM/3C,GAAIA,EAAG+3C,IAAU,GAAKrD,EAASqD,EAAM/3C,GAAIA,EAAG+3C,EALlE,CAOpB,CAeA,MA/BiB,mBAAN11C,IAAkBA,EAAI,GAAc,MAALA,EAAY,GAAKA,IAkB3D8xG,EAAM/Z,WAAa,SAAS53F,GAC1Bu1C,EAAQv1C,EACR43F,GACF,EAEA+Z,EAAMz/D,SAAW,SAASlyC,GACxB,OAAOoa,UAAU9c,QAAU40C,EAAwB,mBAANlyC,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAASz/D,CAC3G,EAEAy/D,EAAM9xG,EAAI,SAASG,GACjB,OAAOoa,UAAU9c,QAAUuC,EAAiB,mBAANG,EAAmBA,EAAI,IAAUA,GAAI43F,IAAc+Z,GAAS9xG,CACpG,EAEO8xG,CACT,CC/BO,SAASqD,GAAmB/xG,EAAG8B,GACpC,IAAKvH,GAAKyF,EAAI8B,EAAI9B,EAAEgyG,cAAclwG,EAAI,GAAK9B,EAAEgyG,iBAAiB5gG,QAAQ,MAAQ,EAAG,OAAO,KACxF,IAAI7W,EAAG03G,EAAcjyG,EAAE+Q,MAAM,EAAGxW,GAIhC,MAAO,CACL03G,EAAY53G,OAAS,EAAI43G,EAAY,GAAKA,EAAYlhG,MAAM,GAAKkhG,GAChEjyG,EAAE+Q,MAAMxW,EAAI,GAEjB,CCjBe,YAASyF,GACtB,OAAOA,EAAI+xG,GAAmBruG,KAAKiE,IAAI3H,KAASA,EAAE,GAAKqoC,GACzD,CCHA,ICCW6pE,GDDPjuF,GAAK,2EAEM,SAASkuF,GAAgBC,GACtC,KAAMzsD,EAAQ1hC,GAAGM,KAAK6tF,IAAa,MAAM,IAAIhnG,MAAM,mBAAqBgnG,GACxE,IAAIzsD,EACJ,OAAO,IAAI0sD,GAAgB,CACzB7+E,KAAMmyB,EAAM,GACZqJ,MAAOrJ,EAAM,GACb24C,KAAM34C,EAAM,GACZ2sD,OAAQ3sD,EAAM,GACd2tB,KAAM3tB,EAAM,GACZjpB,MAAOipB,EAAM,GACb4sD,MAAO5sD,EAAM,GACb+pB,UAAW/pB,EAAM,IAAMA,EAAM,GAAG50C,MAAM,GACtCw2C,KAAM5B,EAAM,GACZjzC,KAAMizC,EAAM,KAEhB,CAIO,SAAS0sD,GAAgBD,GAC9Br4G,KAAKy5B,UAA0B34B,IAAnBu3G,EAAU5+E,KAAqB,IAAM4+E,EAAU5+E,KAAO,GAClEz5B,KAAKi1D,WAA4Bn0D,IAApBu3G,EAAUpjD,MAAsB,IAAMojD,EAAUpjD,MAAQ,GACrEj1D,KAAKukG,UAA0BzjG,IAAnBu3G,EAAU9T,KAAqB,IAAM8T,EAAU9T,KAAO,GAClEvkG,KAAKu4G,YAA8Bz3G,IAArBu3G,EAAUE,OAAuB,GAAKF,EAAUE,OAAS,GACvEv4G,KAAKu5E,OAAS8+B,EAAU9+B,KACxBv5E,KAAK2iC,WAA4B7hC,IAApBu3G,EAAU11E,WAAsB7hC,GAAau3G,EAAU11E,MACpE3iC,KAAKw4G,QAAUH,EAAUG,MACzBx4G,KAAK21E,eAAoC70E,IAAxBu3G,EAAU1iC,eAA0B70E,GAAau3G,EAAU1iC,UAC5E31E,KAAKwtD,OAAS6qD,EAAU7qD,KACxBxtD,KAAK2Y,UAA0B7X,IAAnBu3G,EAAU1/F,KAAqB,GAAK0/F,EAAU1/F,KAAO,EACnE,CE/Be,YAAS1S,EAAG8B,GACzB,IAAIP,EAAIwwG,GAAmB/xG,EAAG8B,GAC9B,IAAKP,EAAG,OAAOvB,EAAI,GACnB,IAAIiyG,EAAc1wG,EAAE,GAChB2qG,EAAW3qG,EAAE,GACjB,OAAO2qG,EAAW,EAAI,KAAO,IAAI54F,OAAO44F,GAAU5xG,KAAK,KAAO23G,EACxDA,EAAY53G,OAAS6xG,EAAW,EAAI+F,EAAYlhG,MAAM,EAAGm7F,EAAW,GAAK,IAAM+F,EAAYlhG,MAAMm7F,EAAW,GAC5G+F,EAAc,IAAI3+F,MAAM44F,EAAW+F,EAAY53G,OAAS,GAAGC,KAAK,IACxE,CFUA63G,GAAgBvyG,UAAYyyG,GAAgBzyG,UAe5CyyG,GAAgBzyG,UAAU9F,SAAW,WACnC,OAAOC,KAAKy5B,KACNz5B,KAAKi1D,MACLj1D,KAAKukG,KACLvkG,KAAKu4G,QACJv4G,KAAKu5E,KAAO,IAAM,UACHz4E,IAAfd,KAAK2iC,MAAsB,GAAKh5B,KAAKvC,IAAI,EAAgB,EAAbpH,KAAK2iC,SACjD3iC,KAAKw4G,MAAQ,IAAM,UACA13G,IAAnBd,KAAK21E,UAA0B,GAAK,IAAMhsE,KAAKvC,IAAI,EAAoB,EAAjBpH,KAAK21E,aAC3D31E,KAAKwtD,KAAO,IAAM,IACnBxtD,KAAK2Y,IACb,EG1CA,UACE,IAAK,CAAC1S,EAAG8B,KAAW,IAAJ9B,GAASu5B,QAAQz3B,GACjC,EAAM9B,GAAM0D,KAAKwB,MAAMlF,GAAGlG,SAAS,GACnC,EAAMkG,GAAMA,EAAI,GAChB,ELRa,SAASA,GACtB,OAAO0D,KAAKiE,IAAI3H,EAAI0D,KAAKwB,MAAMlF,KAAO,KAChCA,EAAEwyG,eAAe,MAAM33F,QAAQ,KAAM,IACrC7a,EAAElG,SAAS,GACnB,EKKE,EAAK,CAACkG,EAAG8B,IAAM9B,EAAEgyG,cAAclwG,GAC/B,EAAK,CAAC9B,EAAG8B,IAAM9B,EAAEu5B,QAAQz3B,GACzB,EAAK,CAAC9B,EAAG8B,IAAM9B,EAAEyyG,YAAY3wG,GAC7B,EAAM9B,GAAM0D,KAAKwB,MAAMlF,GAAGlG,SAAS,GACnC,EAAK,CAACkG,EAAG8B,IAAM4wG,GAAkB,IAAJ1yG,EAAS8B,GACtC,EAAK4wG,GACL,EFXa,SAAS1yG,EAAG8B,GACzB,IAAIP,EAAIwwG,GAAmB/xG,EAAG8B,GAC9B,IAAKP,EAAG,OAAOvB,EAAI,GACnB,IAAIiyG,EAAc1wG,EAAE,GAChB2qG,EAAW3qG,EAAE,GACbhH,EAAI2xG,GAAYgG,GAAuE,EAAtDxuG,KAAKvC,KAAK,EAAGuC,KAAKzC,IAAI,EAAGyC,KAAKC,MAAMuoG,EAAW,MAAY,EAC5F1uG,EAAIy0G,EAAY53G,OACpB,OAAOE,IAAMiD,EAAIy0G,EACX13G,EAAIiD,EAAIy0G,EAAc,IAAI3+F,MAAM/Y,EAAIiD,EAAI,GAAGlD,KAAK,KAChDC,EAAI,EAAI03G,EAAYlhG,MAAM,EAAGxW,GAAK,IAAM03G,EAAYlhG,MAAMxW,GAC1D,KAAO,IAAI+Y,MAAM,EAAI/Y,GAAGD,KAAK,KAAOy3G,GAAmB/xG,EAAG0D,KAAKvC,IAAI,EAAGW,EAAIvH,EAAI,IAAI,EAC1F,EECE,EAAMyF,GAAM0D,KAAKwB,MAAMlF,GAAGlG,SAAS,IAAIk8B,cACvC,EAAMh2B,GAAM0D,KAAKwB,MAAMlF,GAAGlG,SAAS,KCjBtB,YAASkG,GACtB,OAAOA,CACT,CCOA,ICPI,GACOq8E,GACAs2B,GDKP,GAAMr/F,MAAM1T,UAAU5F,IACtB44G,GAAW,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAEhE,YAASC,GACtB,IEbsBC,EAAUC,EFa5BnuC,OAA4B/pE,IAApBg4G,EAAOC,eAA+Cj4G,IAArBg4G,EAAOE,UAA0B,IEbxDD,EFa+E,GAAIv2G,KAAKs2G,EAAOC,SAAUpuG,QEb/FquG,EFawGF,EAAOE,UAAY,GEZpJ,SAASl1G,EAAO6+B,GAOrB,IANA,IAAIniC,EAAIsD,EAAMxD,OACVwC,EAAI,GACJgH,EAAI,EACJ/G,EAAIg2G,EAAS,GACbz4G,EAAS,EAENE,EAAI,GAAKuC,EAAI,IACdzC,EAASyC,EAAI,EAAI4/B,IAAO5/B,EAAI4G,KAAKvC,IAAI,EAAGu7B,EAAQriC,IACpDwC,EAAErD,KAAKqE,EAAM0rB,UAAUhvB,GAAKuC,EAAGvC,EAAIuC,OAC9BzC,GAAUyC,EAAI,GAAK4/B,KACxB5/B,EAAIg2G,EAASjvG,GAAKA,EAAI,GAAKivG,EAASz4G,QAGtC,OAAOwC,EAAE4Y,UAAUnb,KAAKy4G,EAC1B,GFFIC,OAAqCn4G,IAApBg4G,EAAOI,SAAyB,GAAKJ,EAAOI,SAAS,GAAK,GAC3EC,OAAqCr4G,IAApBg4G,EAAOI,SAAyB,GAAKJ,EAAOI,SAAS,GAAK,GAC3EE,OAA6Bt4G,IAAnBg4G,EAAOM,QAAwB,IAAMN,EAAOM,QAAU,GAChEC,OAA+Bv4G,IAApBg4G,EAAOO,SAAyB,GGjBlC,SAASA,GACtB,OAAO,SAASv1G,GACd,OAAOA,EAAMgd,QAAQ,UAAU,SAAStgB,GACtC,OAAO64G,GAAU74G,EACnB,GACF,CACF,CHW4D84G,CAAe,GAAI92G,KAAKs2G,EAAOO,SAAUlwG,SAC/FowG,OAA6Bz4G,IAAnBg4G,EAAOS,QAAwB,IAAMT,EAAOS,QAAU,GAChEC,OAAyB14G,IAAjBg4G,EAAOU,MAAsB,IAAMV,EAAOU,MAAQ,GAC1DC,OAAqB34G,IAAfg4G,EAAOW,IAAoB,MAAQX,EAAOW,IAAM,GAE1D,SAASC,EAAUrB,GAGjB,IAAI5+E,GAFJ4+E,EAAYD,GAAgBC,IAEP5+E,KACjBw7B,EAAQojD,EAAUpjD,MAClBsvC,EAAO8T,EAAU9T,KACjBgU,EAASF,EAAUE,OACnBh/B,EAAO8+B,EAAU9+B,KACjB52C,EAAQ01E,EAAU11E,MAClB61E,EAAQH,EAAUG,MAClB7iC,EAAY0iC,EAAU1iC,UACtBnoB,EAAO6qD,EAAU7qD,KACjB70C,EAAO0/F,EAAU1/F,KAGR,MAATA,GAAc6/F,GAAQ,EAAM7/F,EAAO,KAG7BghG,GAAYhhG,UAAqB7X,IAAd60E,IAA4BA,EAAY,IAAKnoB,GAAO,EAAM70C,EAAO,MAG1F4gE,GAAkB,MAAT9/C,GAA0B,MAAVw7B,KAAgBskB,GAAO,EAAM9/C,EAAO,IAAKw7B,EAAQ,KAI9E,IAAI7vD,EAAoB,MAAXmzG,EAAiBU,EAA4B,MAAXV,GAAkB,SAAS1qD,KAAKl1C,GAAQ,IAAMA,EAAKoI,cAAgB,GAC9GvB,EAAoB,MAAX+4F,EAAiBY,EAAiB,OAAOtrD,KAAKl1C,GAAQ4gG,EAAU,GAKzEK,EAAaD,GAAYhhG,GACzBkhG,EAAc,aAAahsD,KAAKl1C,GAUpC,SAAS2pE,EAAOx+E,GACd,IAEItD,EAAGiD,EAAGwK,EAFN6rG,EAAc10G,EACd20G,EAAcv6F,EAGlB,GAAa,MAAT7G,EACFohG,EAAcH,EAAW91G,GAASi2G,EAClCj2G,EAAQ,OACH,CAIL,IAAIk2G,GAHJl2G,GAASA,GAGmB,GAAK,EAAIA,EAAQ,EAiB7C,GAdAA,EAAQ4mB,MAAM5mB,GAAS21G,EAAMG,EAAWjwG,KAAKiE,IAAI9J,GAAQ6xE,GAGrDnoB,IAAM1pD,EIjFH,SAAS+8C,GACtBv7C,EAAK,IAAK,IAAkCk7C,EAA9B/8C,EAAIo9C,EAAEvgD,OAAQE,EAAI,EAAGg/E,GAAM,EAAOh/E,EAAIiD,IAAKjD,EACvD,OAAQqgD,EAAErgD,IACR,IAAK,IAAKg/E,EAAKh/B,EAAKhgD,EAAG,MACvB,IAAK,IAAgB,IAAPg/E,IAAUA,EAAKh/E,GAAGggD,EAAKhgD,EAAG,MACxC,QAAS,KAAMqgD,EAAErgD,GAAI,MAAM8E,EAASk6E,EAAK,IAAGA,EAAK,GAGrD,OAAOA,EAAK,EAAI3+B,EAAE7pC,MAAM,EAAGwoE,GAAM3+B,EAAE7pC,MAAMwpC,EAAK,GAAKK,CACrD,CJwE0Bo5D,CAAWn2G,IAGzBk2G,GAA4B,IAAVl2G,GAAwB,MAATygG,IAAcyV,GAAgB,GAGnEF,GAAeE,EAA0B,MAATzV,EAAeA,EAAOiV,EAAkB,MAATjV,GAAyB,MAATA,EAAe,GAAKA,GAAQuV,EAC3GC,GAAwB,MAATphG,EAAekgG,GAAS,EAAIV,GAAiB,GAAK,IAAM4B,GAAeC,GAA0B,MAATzV,EAAe,IAAM,IAIxHsV,EAEF,IADAr5G,GAAK,EAAGiD,EAAIK,EAAMxD,SACTE,EAAIiD,GACX,GAA6B,IAAzBwK,EAAInK,EAAMiiD,WAAWvlD,KAAcyN,EAAI,GAAI,CAC7C8rG,GAAqB,KAAN9rG,EAAWmrG,EAAUt1G,EAAMkT,MAAMxW,EAAI,GAAKsD,EAAMkT,MAAMxW,IAAMu5G,EAC3Ej2G,EAAQA,EAAMkT,MAAM,EAAGxW,GACvB,KACF,CAGN,CAGIg4G,IAAUj/B,IAAMz1E,EAAQ+mE,EAAM/mE,EAAOu1C,MAGzC,IAAI/4C,EAASw5G,EAAYx5G,OAASwD,EAAMxD,OAASy5G,EAAYz5G,OACzDo8B,EAAUp8B,EAASqiC,EAAQ,IAAIppB,MAAMopB,EAAQriC,EAAS,GAAGC,KAAKk5B,GAAQ,GAM1E,OAHI++E,GAASj/B,IAAMz1E,EAAQ+mE,EAAMnuC,EAAU54B,EAAO44B,EAAQp8B,OAASqiC,EAAQo3E,EAAYz5G,OAAS+4C,KAAW3c,EAAU,IAG7Gu4B,GACN,IAAK,IAAKnxD,EAAQg2G,EAAch2G,EAAQi2G,EAAcr9E,EAAS,MAC/D,IAAK,IAAK54B,EAAQg2G,EAAcp9E,EAAU54B,EAAQi2G,EAAa,MAC/D,IAAK,IAAKj2G,EAAQ44B,EAAQ1lB,MAAM,EAAG1W,EAASo8B,EAAQp8B,QAAU,GAAKw5G,EAAch2G,EAAQi2G,EAAcr9E,EAAQ1lB,MAAM1W,GAAS,MAC9H,QAASwD,EAAQ44B,EAAUo9E,EAAch2G,EAAQi2G,EAGnD,OAAOV,EAASv1G,EAClB,CAMA,OAtEA6xE,OAA0B70E,IAAd60E,EAA0B,EAChC,SAAS9nB,KAAKl1C,GAAQhP,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,GAAIyuE,IAC/ChsE,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,GAAIyuE,IAgE/B2M,EAAOviF,SAAW,WAChB,OAAOs4G,EAAY,EACrB,EAEO/1B,CACT,CAYA,MAAO,CACLA,OAAQo3B,EACRd,aAZF,SAAsBP,EAAWv0G,GAC/B,IAAIlB,EAAI82G,IAAWrB,EAAYD,GAAgBC,IAAsB1/F,KAAO,IAAK0/F,IAC7Er0G,EAAiE,EAA7D2F,KAAKvC,KAAK,EAAGuC,KAAKzC,IAAI,EAAGyC,KAAKC,MAAM,GAAS9F,GAAS,KAC1D9C,EAAI2I,KAAKkB,IAAI,IAAK7G,GAClBoB,EAASyzG,GAAS,EAAI70G,EAAI,GAC9B,OAAO,SAASF,GACd,OAAOlB,EAAE5B,EAAI8C,GAASsB,CACxB,CACF,EAMF,CCvIe,SAAS80G,GAActtB,GAIpC,OAHA,GAAS,GAAaA,GACtBtK,GAAS,GAAOA,OAChBs2B,GAAe,GAAOA,aACf,EACT,CIfe,YAAS30G,GACtB,OAAO0F,KAAKvC,IAAI,GAAI,GAASuC,KAAKiE,IAAI3J,IACxC,CCFe,YAASA,EAAMH,GAC5B,OAAO6F,KAAKvC,IAAI,EAAgE,EAA7DuC,KAAKvC,KAAK,EAAGuC,KAAKzC,IAAI,EAAGyC,KAAKC,MAAM,GAAS9F,GAAS,KAAW,GAAS6F,KAAKiE,IAAI3J,IACxG,CCFe,YAASA,EAAMmD,GAE5B,OADAnD,EAAO0F,KAAKiE,IAAI3J,GAAOmD,EAAMuC,KAAKiE,IAAIxG,GAAOnD,EACtC0F,KAAKvC,IAAI,EAAG,GAASA,GAAO,GAASnD,IAAS,CACvD,CNCAi2G,GAAc,CACZlB,UAAW,IACXD,SAAU,CAAC,GACXG,SAAU,CAAC,IAAK,MOTX,IAAI,GAAU,KACViB,GAAW,MACX,GAAKxwG,KAAK2qC,GACV,GAAS,GAAK,EACd8lE,GAAY,GAAK,EACjB,GAAW,EAAL,GAEN,GAAU,IAAM,GAChB,GAAU,GAAK,IAEf,GAAMzwG,KAAKiE,IACXy2C,GAAO16C,KAAK06C,KACZ3U,GAAQ/lC,KAAK+lC,MACb,GAAM/lC,KAAK6qC,IACXrb,GAAOxvB,KAAKwvB,KACZob,GAAM5qC,KAAK4qC,IAEXm4D,IADQ/iG,KAAKC,MACLD,KAAK+iG,OACb36E,GAAMpoB,KAAKooB,IACX,GAAMpoB,KAAKkB,IACX,GAAMlB,KAAK8qC,IACX8vD,GAAO56F,KAAK46F,MAAQ,SAASt+F,GAAK,OAAOA,EAAI,EAAI,EAAIA,EAAI,GAAK,EAAI,CAAG,EACrE8J,GAAOpG,KAAKoG,KACZsZ,GAAM1f,KAAK0f,IAEf,SAASi0B,GAAKr3C,GACnB,OAAOA,EAAI,EAAI,EAAIA,GAAK,EAAI,GAAK0D,KAAK2zC,KAAKr3C,EAC7C,CAEO,SAAS8tG,GAAK9tG,GACnB,OAAOA,EAAI,EAAI,GAASA,GAAK,GAAK,GAAS0D,KAAKoqG,KAAK9tG,EACvD,CAEO,SAASo0G,GAASp0G,GACvB,OAAQA,EAAI,GAAIA,EAAI,IAAMA,CAC5B,CCnCe,SAAS,KAAQ,CCAhC,SAASq0G,GAAepV,EAAUqV,GAC5BrV,GAAYsV,GAAmBl5D,eAAe4jD,EAASvsF,OACzD6hG,GAAmBtV,EAASvsF,MAAMusF,EAAUqV,EAEhD,CAEA,IAAIE,GAAmB,CACrBC,QAAS,SAASp6F,EAAQi6F,GACxBD,GAAeh6F,EAAO4kF,SAAUqV,EAClC,EACAI,kBAAmB,SAASr6F,EAAQi6F,GAElC,IADA,IAAI1jF,EAAWvW,EAAOuW,SAAUr2B,GAAK,EAAGiD,EAAIozB,EAASv2B,SAC5CE,EAAIiD,GAAG62G,GAAezjF,EAASr2B,GAAG0kG,SAAUqV,EACvD,GAGEC,GAAqB,CACvBI,OAAQ,SAASt6F,EAAQi6F,GACvBA,EAAOM,QACT,EACA3pD,MAAO,SAAS5wC,EAAQi6F,GACtBj6F,EAASA,EAAOqxB,YAChB4oE,EAAOrwG,MAAMoW,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAC5C,EACAw6F,WAAY,SAASx6F,EAAQi6F,GAE3B,IADA,IAAI5oE,EAAcrxB,EAAOqxB,YAAanxC,GAAK,EAAGiD,EAAIkuC,EAAYrxC,SACrDE,EAAIiD,GAAG6c,EAASqxB,EAAYnxC,GAAI+5G,EAAOrwG,MAAMoW,EAAO,GAAIA,EAAO,GAAIA,EAAO,GACrF,EACAy6F,WAAY,SAASz6F,EAAQi6F,GAC3BS,GAAW16F,EAAOqxB,YAAa4oE,EAAQ,EACzC,EACAU,gBAAiB,SAAS36F,EAAQi6F,GAEhC,IADA,IAAI5oE,EAAcrxB,EAAOqxB,YAAanxC,GAAK,EAAGiD,EAAIkuC,EAAYrxC,SACrDE,EAAIiD,GAAGu3G,GAAWrpE,EAAYnxC,GAAI+5G,EAAQ,EACrD,EACAtR,QAAS,SAAS3oF,EAAQi6F,GACxBW,GAAc56F,EAAOqxB,YAAa4oE,EACpC,EACAY,aAAc,SAAS76F,EAAQi6F,GAE7B,IADA,IAAI5oE,EAAcrxB,EAAOqxB,YAAanxC,GAAK,EAAGiD,EAAIkuC,EAAYrxC,SACrDE,EAAIiD,GAAGy3G,GAAcvpE,EAAYnxC,GAAI+5G,EAChD,EACAa,mBAAoB,SAAS96F,EAAQi6F,GAEnC,IADA,IAAIc,EAAa/6F,EAAO+6F,WAAY76G,GAAK,EAAGiD,EAAI43G,EAAW/6G,SAClDE,EAAIiD,GAAG62G,GAAee,EAAW76G,GAAI+5G,EAChD,GAGF,SAASS,GAAWrpE,EAAa4oE,EAAQpiE,GACvC,IAA6CmjE,EAAzC96G,GAAK,EAAGiD,EAAIkuC,EAAYrxC,OAAS63C,EAErC,IADAoiE,EAAO5pE,cACEnwC,EAAIiD,GAAG63G,EAAa3pE,EAAYnxC,GAAI+5G,EAAOrwG,MAAMoxG,EAAW,GAAIA,EAAW,GAAIA,EAAW,IACnGf,EAAO3pE,SACT,CAEA,SAASsqE,GAAcvpE,EAAa4oE,GAClC,IAAI/5G,GAAK,EAAGiD,EAAIkuC,EAAYrxC,OAE5B,IADAi6G,EAAOgB,iBACE/6G,EAAIiD,GAAGu3G,GAAWrpE,EAAYnxC,GAAI+5G,EAAQ,GACnDA,EAAOiB,YACT,CAEe,YAASl7F,EAAQi6F,GAC1Bj6F,GAAUm6F,GAAiBn5D,eAAehhC,EAAO3H,MACnD8hG,GAAiBn6F,EAAO3H,MAAM2H,EAAQi6F,GAEtCD,GAAeh6F,EAAQi6F,EAE3B,CC/DO,IAKHkB,GACAC,GACAC,GACAC,GACAC,GCRA,GAASC,GAAMC,GAAS55D,GACxB65D,GACA,GAAU,GACV59C,GACA69C,GACAC,GACA,GDPOC,GAAc,IAAI/gC,EAIzBghC,GAAU,IAAIhhC,EAOPihC,GAAa,CACtBnyG,MAAO,GACPymC,UAAW,GACXC,QAAS,GACT2qE,aAAc,WACZY,GAAc,IAAI/gC,EAClBihC,GAAW1rE,UAAY2rE,GACvBD,GAAWzrE,QAAU2rE,EACvB,EACAf,WAAY,WACV,IAAIgB,GAAYL,GAChBC,GAAQt2G,IAAI02G,EAAW,EAAI,GAAMA,EAAWA,GAC5Cx8G,KAAK2wC,UAAY3wC,KAAK4wC,QAAU5wC,KAAKkK,MAAQ,EAC/C,EACA2wG,OAAQ,WACNuB,GAAQt2G,IAAI,GACd,GAGF,SAASw2G,KACPD,GAAWnyG,MAAQuyG,EACrB,CAEA,SAASF,KACPG,GAAUjB,GAAUC,GACtB,CAEA,SAASe,GAAeE,EAAQC,GAC9BP,GAAWnyG,MAAQwyG,GACnBjB,GAAWkB,EAAQjB,GAAQkB,EAE3BjB,GADAgB,GAAU,GACQf,GAAU,GAAIgB,GADbA,GAAO,IACkB,EAAIxC,IAAYyB,GAAU,GAAIe,EAC5E,CAEA,SAASF,GAAUC,EAAQC,GAOzB,IAAIC,GANJF,GAAU,IAMahB,GACnBmB,EAAWD,GAAW,EAAI,GAAK,EAC/BE,EAAWD,EAAWD,EACtBG,EAAS,GARbJ,GADmBA,GAAO,IACd,EAAIxC,IASZ6C,EAAS,GAAIL,GACb57G,EAAI66G,GAAUoB,EACdjwG,EAAI4uG,GAAUoB,EAASh8G,EAAI,GAAI+7G,GAC/Br5G,EAAI1C,EAAI87G,EAAW,GAAIC,GAC3BZ,GAAYr2G,IAAI4pC,GAAMhsC,EAAGsJ,IAGzB2uG,GAAUgB,EAAQf,GAAUoB,EAAQnB,GAAUoB,CAChD,CAEe,YAAS38F,GAGtB,OAFA87F,GAAU,IAAIhhC,EACdm/B,GAAOj6F,EAAQ+7F,IACE,EAAVD,EACT,CEzEO,SAASc,GAAUC,GACxB,MAAO,CAACztE,GAAMytE,EAAU,GAAIA,EAAU,IAAKpJ,GAAKoJ,EAAU,IAC5D,CAEO,SAASA,GAAUD,GACxB,IAAIP,EAASO,EAAU,GAAIN,EAAMM,EAAU,GAAIF,EAAS,GAAIJ,GAC5D,MAAO,CAACI,EAAS,GAAIL,GAASK,EAAS,GAAIL,GAAS,GAAIC,GAC1D,CAEO,SAASQ,GAAa74G,EAAGC,GAC9B,OAAOD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,EAC9C,CAEO,SAAS64G,GAAe94G,EAAGC,GAChC,MAAO,CAACD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAID,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAID,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GACvF,CAGO,SAAS84G,GAAoB/4G,EAAGC,GACrCD,EAAE,IAAMC,EAAE,GAAID,EAAE,IAAMC,EAAE,GAAID,EAAE,IAAMC,EAAE,EACxC,CAEO,SAAS+4G,GAAevoG,EAAQhU,GACrC,MAAO,CAACgU,EAAO,GAAKhU,EAAGgU,EAAO,GAAKhU,EAAGgU,EAAO,GAAKhU,EACpD,CAGO,SAASw8G,GAA0Bh2G,GACxC,IAAI5C,EAAImL,GAAKvI,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAClDA,EAAE,IAAM5C,EAAG4C,EAAE,IAAM5C,EAAG4C,EAAE,IAAM5C,CAChC,CDlBA,IETI64G,GAAIC,GACJC,GAAIC,GAAIC,GACRC,GAAIC,GAAIC,GACRC,GAAIC,GAAIC,GACR,GAAU,GACVnlE,GAAI3b,GAAI+gF,GFIRC,GAAe,CACjBn0G,MAAOo0G,GACP3tE,UAAW4tE,GACX3tE,QAAS4tE,GACTjD,aAAc,WACZ8C,GAAan0G,MAAQu0G,GACrBJ,GAAa1tE,UAAY+tE,GACzBL,GAAaztE,QAAU+tE,GACvB1C,GAAW,IAAI7gC,EACfihC,GAAWd,cACb,EACAC,WAAY,WACVa,GAAWb,aACX6C,GAAan0G,MAAQo0G,GACrBD,GAAa1tE,UAAY4tE,GACzBF,GAAaztE,QAAU4tE,GACnBrC,GAAc,GAAG,KAAYJ,GAAU,KAAMD,KAAS35D,GAAO,KACxD85D,GAAW,GAAS95D,GAAO,GAC3B85D,IAAY,KAASH,IAAQ,IACtC,GAAM,GAAK,GAAS,GAAM,GAAKC,EACjC,EACAlB,OAAQ,WACN,KAAYkB,GAAU,KAAMD,KAAS35D,GAAO,GAC9C,GAGF,SAASm8D,GAAY3B,EAAQC,GAC3BV,GAAOz8G,KAAK,GAAQ,CAAC,GAAUk9G,EAAQZ,GAAUY,IAC7CC,EAAMd,KAAMA,GAAOc,GACnBA,EAAMz6D,KAAMA,GAAOy6D,EACzB,CAEA,SAASgC,GAAUjC,EAAQC,GACzB,IAAI70G,EAAIo1G,GAAU,CAACR,EAAS,GAASC,EAAM,KAC3C,GAAIx+C,GAAI,CACN,IAAIygD,EAASxB,GAAej/C,GAAIr2D,GAE5B+2G,EAAazB,GADA,CAACwB,EAAO,IAAKA,EAAO,GAAI,GACGA,GAC5CrB,GAA0BsB,GAC1BA,EAAa5B,GAAU4B,GACvB,IAGIC,EAHA/nD,EAAQ2lD,EAASX,GACjBzX,EAAOvtC,EAAQ,EAAI,GAAK,EACxBgoD,EAAUF,EAAW,GAAK,GAAUva,EAEpC0a,EAAe,GAAIjoD,GAAS,IAC5BioD,GAAgB1a,EAAOyX,GAAUgD,GAAWA,EAAUza,EAAOoY,IAC/DoC,EAAOD,EAAW,GAAK,IACZ38D,KAAMA,GAAO48D,GACwBE,GAAgB1a,EAAOyX,IAA9DgD,GAAWA,EAAU,KAAO,IAAM,MAAiDA,EAAUza,EAAOoY,IAC7GoC,GAAQD,EAAW,GAAK,IACbhD,KAAMA,GAAOiD,IAEpBnC,EAAMd,KAAMA,GAAOc,GACnBA,EAAMz6D,KAAMA,GAAOy6D,IAErBqC,EACEtC,EAASX,GACP3nE,GAAM,GAASsoE,GAAUtoE,GAAM,GAAS0nE,MAAUA,GAAUY,GAE5DtoE,GAAMsoE,EAAQZ,IAAW1nE,GAAM,GAAS0nE,MAAU,GAAUY,GAG9DZ,IAAW,IACTY,EAAS,KAAS,GAAUA,GAC5BA,EAASZ,KAASA,GAAUY,IAE5BA,EAASX,GACP3nE,GAAM,GAASsoE,GAAUtoE,GAAM,GAAS0nE,MAAUA,GAAUY,GAE5DtoE,GAAMsoE,EAAQZ,IAAW1nE,GAAM,GAAS0nE,MAAU,GAAUY,EAIxE,MACET,GAAOz8G,KAAK,GAAQ,CAAC,GAAUk9G,EAAQZ,GAAUY,IAE/CC,EAAMd,KAAMA,GAAOc,GACnBA,EAAMz6D,KAAMA,GAAOy6D,GACvBx+C,GAAKr2D,EAAGi0G,GAAUW,CACpB,CAEA,SAAS4B,KACPF,GAAan0G,MAAQ00G,EACvB,CAEA,SAASJ,KACP,GAAM,GAAK,GAAS,GAAM,GAAKzC,GAC/BsC,GAAan0G,MAAQo0G,GACrBlgD,GAAK,IACP,CAEA,SAASqgD,GAAgB9B,EAAQC,GAC/B,GAAIx+C,GAAI,CACN,IAAIpH,EAAQ2lD,EAASX,GACrBC,GAASn2G,IAAI,GAAIkxD,GAAS,IAAMA,GAASA,EAAQ,EAAI,KAAO,KAAOA,EACrE,MACE,GAAW2lD,EAAQ,GAAQC,EAE7BP,GAAWnyG,MAAMyyG,EAAQC,GACzBgC,GAAUjC,EAAQC,EACpB,CAEA,SAAS8B,KACPrC,GAAW1rE,WACb,CAEA,SAASguE,KACPF,GAAgB,GAAU,IAC1BpC,GAAWzrE,UACP,GAAIqrE,IAAY,KAAS,KAAYF,GAAU,MACnD,GAAM,GAAK,GAAS,GAAM,GAAKA,GAC/B39C,GAAK,IACP,CAKA,SAAS/pB,GAAMsnE,EAASI,GACtB,OAAQA,GAAWJ,GAAW,EAAII,EAAU,IAAMA,CACpD,CAEA,SAASmD,GAAa36G,EAAGC,GACvB,OAAOD,EAAE,GAAKC,EAAE,EAClB,CAEA,SAAS26G,GAAcx4G,EAAOV,GAC5B,OAAOU,EAAM,IAAMA,EAAM,GAAKA,EAAM,IAAMV,GAAKA,GAAKU,EAAM,GAAKV,EAAIU,EAAM,IAAMA,EAAM,GAAKV,CAC5F,CAEe,YAASm5G,GACtB,IAAI5+G,EAAGiD,EAAGc,EAAGC,EAAG66G,EAAQC,EAAUtoD,EAOlC,GALA7U,GAAO45D,KAAY,GAAUD,GAAOziE,KACpC6iE,GAAS,GACT3B,GAAO6E,EAASf,IAGZ56G,EAAIy4G,GAAO57G,OAAQ,CAIrB,IAHA47G,GAAO/zG,KAAK+2G,IAGP1+G,EAAI,EAAkB6+G,EAAS,CAAxB96G,EAAI23G,GAAO,IAAkB17G,EAAIiD,IAAKjD,EAE5C2+G,GAAc56G,GADlBC,EAAI03G,GAAO17G,IACY,KAAO2+G,GAAc56G,EAAGC,EAAE,KAC3C6vC,GAAM9vC,EAAE,GAAIC,EAAE,IAAM6vC,GAAM9vC,EAAE,GAAIA,EAAE,MAAKA,EAAE,GAAKC,EAAE,IAChD6vC,GAAM7vC,EAAE,GAAID,EAAE,IAAM8vC,GAAM9vC,EAAE,GAAIA,EAAE,MAAKA,EAAE,GAAKC,EAAE,KAEpD66G,EAAO5/G,KAAK8E,EAAIC,GAMpB,IAAK86G,GAAW,IAAkC9+G,EAAI,EAAG+D,EAAI86G,EAAlC57G,EAAI47G,EAAO/+G,OAAS,GAAyBE,GAAKiD,EAAGc,EAAIC,IAAKhE,EACvFgE,EAAI66G,EAAO7+G,IACNw2D,EAAQ3iB,GAAM9vC,EAAE,GAAIC,EAAE,KAAO86G,IAAUA,EAAWtoD,EAAO,GAAUxyD,EAAE,GAAIu3G,GAAUx3G,EAAE,GAE9F,CAIA,OAFA23G,GAAS,GAAQ,KAEV,KAAY7iE,KAAYyiE,KAASziE,IAClC,CAAC,CAAC/K,IAAKA,KAAM,CAACA,IAAKA,MACnB,CAAC,CAAC,GAASwtE,IAAO,CAACC,GAAS55D,IACpC,CEtKA,IAAIo9D,GAAiB,CACnB1E,OAAQ,GACR3wG,MAAOs1G,GACP7uE,UAAW8uE,GACX7uE,QAAS8uE,GACTnE,aAAc,WACZgE,GAAe5uE,UAAYgvE,GAC3BJ,GAAe3uE,QAAUgvE,EAC3B,EACApE,WAAY,WACV+D,GAAe5uE,UAAY8uE,GAC3BF,GAAe3uE,QAAU8uE,EAC3B,GAIF,SAASF,GAAc7C,EAAQC,GAC7BD,GAAU,GACV,IAAIK,EAAS,GADMJ,GAAO,IAE1BiD,GAAuB7C,EAAS,GAAIL,GAASK,EAAS,GAAIL,GAAS,GAAIC,GACzE,CAEA,SAASiD,GAAuB55G,EAAGpD,EAAGq8E,KAClCu+B,GACFE,KAAO13G,EAAI03G,IAAMF,GACjBG,KAAO/6G,EAAI+6G,IAAMH,GACjBI,KAAO3+B,EAAI2+B,IAAMJ,EACnB,CAEA,SAASgC,KACPF,GAAer1G,MAAQ41G,EACzB,CAEA,SAASA,GAAuBnD,EAAQC,GACtCD,GAAU,GACV,IAAIK,EAAS,GADMJ,GAAO,IAE1B5jE,GAAKgkE,EAAS,GAAIL,GAClBt/E,GAAK2/E,EAAS,GAAIL,GAClByB,GAAK,GAAIxB,GACT2C,GAAer1G,MAAQ61G,GACvBF,GAAuB7mE,GAAI3b,GAAI+gF,GACjC,CAEA,SAAS2B,GAAkBpD,EAAQC,GACjCD,GAAU,GACV,IAAIK,EAAS,GADMJ,GAAO,IAEtB32G,EAAI+2G,EAAS,GAAIL,GACjB95G,EAAIm6G,EAAS,GAAIL,GACjBz9B,EAAI,GAAI09B,GACR73D,EAAIrV,GAAM3/B,IAAMg1C,EAAI1nB,GAAK6hD,EAAIk/B,GAAKv7G,GAAKkiD,GAAKA,EAAIq5D,GAAKn4G,EAAI+yC,GAAKkmC,GAAKn6B,GAAKA,EAAI/L,GAAKn2C,EAAIw6B,GAAKp3B,GAAK8+C,GAAI/L,GAAK/yC,EAAIo3B,GAAKx6B,EAAIu7G,GAAKl/B,GAC9Hw+B,IAAM34D,EACN+4D,IAAM/4D,GAAK/L,IAAMA,GAAK/yC,IACtB83G,IAAMh5D,GAAK1nB,IAAMA,GAAKx6B,IACtBm7G,IAAMj5D,GAAKq5D,IAAMA,GAAKl/B,IACtB2gC,GAAuB7mE,GAAI3b,GAAI+gF,GACjC,CAEA,SAASsB,KACPH,GAAer1G,MAAQs1G,EACzB,CAIA,SAASG,KACPJ,GAAer1G,MAAQ81G,EACzB,CAEA,SAASJ,KACPK,GAAkB,GAAU,IAC5BV,GAAer1G,MAAQs1G,EACzB,CAEA,SAASQ,GAAuBrD,EAAQC,GACtC,GAAWD,EAAQ,GAAQC,EAC3BD,GAAU,GAASC,GAAO,GAC1B2C,GAAer1G,MAAQ+1G,GACvB,IAAIjD,EAAS,GAAIJ,GACjB5jE,GAAKgkE,EAAS,GAAIL,GAClBt/E,GAAK2/E,EAAS,GAAIL,GAClByB,GAAK,GAAIxB,GACTiD,GAAuB7mE,GAAI3b,GAAI+gF,GACjC,CAEA,SAAS6B,GAAkBtD,EAAQC,GACjCD,GAAU,GACV,IAAIK,EAAS,GADMJ,GAAO,IAEtB32G,EAAI+2G,EAAS,GAAIL,GACjB95G,EAAIm6G,EAAS,GAAIL,GACjBz9B,EAAI,GAAI09B,GACRtvG,EAAK+vB,GAAK6hD,EAAIk/B,GAAKv7G,EACnB0K,EAAK6wG,GAAKn4G,EAAI+yC,GAAKkmC,EACnBghC,EAAKlnE,GAAKn2C,EAAIw6B,GAAKp3B,EACnB67C,EAAI4qD,GAAMp/F,EAAIC,EAAI2yG,GAClBn7D,EAAIgvD,GAAKjyD,GACTp+C,EAAIo+C,IAAMiD,EAAIjD,EAClBm8D,GAAGn4G,IAAIpC,EAAI4J,GACX4wG,GAAGp4G,IAAIpC,EAAI6J,GACX4wG,GAAGr4G,IAAIpC,EAAIw8G,GACXxC,IAAM34D,EACN+4D,IAAM/4D,GAAK/L,IAAMA,GAAK/yC,IACtB83G,IAAMh5D,GAAK1nB,IAAMA,GAAKx6B,IACtBm7G,IAAMj5D,GAAKq5D,IAAMA,GAAKl/B,IACtB2gC,GAAuB7mE,GAAI3b,GAAI+gF,GACjC,CAEe,YAAS99F,GACtBm9F,GAAKC,GACLC,GAAKC,GAAKC,GACVC,GAAKC,GAAKC,GAAK,EACfC,GAAK,IAAI7iC,EACT8iC,GAAK,IAAI9iC,EACT+iC,GAAK,IAAI/iC,EACTm/B,GAAOj6F,EAAQi/F,IAEf,IAAIt5G,GAAKg4G,GACLp7G,GAAKq7G,GACLh/B,GAAKi/B,GACLr8D,EAAI4qD,GAAMzmG,EAAGpD,EAAGq8E,GAGpB,OAAIp9B,EAAIq4D,KACNl0G,EAAI63G,GAAIj7G,EAAIk7G,GAAI7+B,EAAI8+B,GAEhBN,GAAK,KAASz3G,EAAI03G,GAAI96G,EAAI+6G,GAAI1+B,EAAI2+B,KACtC/7D,EAAI4qD,GAAMzmG,EAAGpD,EAAGq8E,IAERi7B,IAAiB,CAAC7rE,IAAKA,KAG1B,CAACoB,GAAM7sC,EAAGoD,GAAK,GAAS8tG,GAAK70B,EAAIp9B,GAAK,GAC/C,CC9Ie,YAAS77C,GACtB,OAAO,WACL,OAAOA,CACT,CACF,CCJe,YAAS1B,EAAGC,GAEzB,SAAS27G,EAAQl6G,EAAGpD,GAClB,OAAOoD,EAAI1B,EAAE0B,EAAGpD,GAAI2B,EAAEyB,EAAE,GAAIA,EAAE,GAChC,CAMA,OAJI1B,EAAE67G,QAAU57G,EAAE47G,SAAQD,EAAQC,OAAS,SAASn6G,EAAGpD,GACrD,OAAOoD,EAAIzB,EAAE47G,OAAOn6G,EAAGpD,KAAS0B,EAAE67G,OAAOn6G,EAAE,GAAIA,EAAE,GACnD,GAEOk6G,CACT,CCRA,SAASE,GAAiB1D,EAAQC,GAEhC,OADI,GAAID,GAAU,KAAIA,GAAUhzG,KAAKwB,MAAMwxG,EAAS,IAAO,IACpD,CAACA,EAAQC,EAClB,CAIO,SAAS0D,GAAcC,EAAaC,EAAUC,GACnD,OAAQF,GAAe,IAAQC,GAAYC,EAAaN,GAAQO,GAAeH,GAAcI,GAAiBH,EAAUC,IACpHC,GAAeH,GACdC,GAAYC,EAAaE,GAAiBH,EAAUC,GACrDJ,EACN,CAEA,SAASO,GAAsBL,GAC7B,OAAO,SAAS5D,EAAQC,GAGtB,OADI,GADJD,GAAU4D,GACQ,KAAI5D,GAAUhzG,KAAKwB,MAAMwxG,EAAS,IAAO,IACpD,CAACA,EAAQC,EAClB,CACF,CAEA,SAAS8D,GAAeH,GACtB,IAAI3uC,EAAWgvC,GAAsBL,GAErC,OADA3uC,EAASwuC,OAASQ,IAAuBL,GAClC3uC,CACT,CAEA,SAAS+uC,GAAiBH,EAAUC,GAClC,IAAII,EAAc,GAAIL,GAClBM,EAAc,GAAIN,GAClBO,EAAgB,GAAIN,GACpBO,EAAgB,GAAIP,GAExB,SAAS7uC,EAAS+qC,EAAQC,GACxB,IAAII,EAAS,GAAIJ,GACb32G,EAAI,GAAI02G,GAAUK,EAClBn6G,EAAI,GAAI85G,GAAUK,EAClB99B,EAAI,GAAI09B,GACR57G,EAAIk+E,EAAI2hC,EAAc56G,EAAI66G,EAC9B,MAAO,CACLpxE,GAAM7sC,EAAIk+G,EAAgB//G,EAAIggH,EAAe/6G,EAAI46G,EAAc3hC,EAAI4hC,GACnE/M,GAAK/yG,EAAI+/G,EAAgBl+G,EAAIm+G,GAEjC,CAcA,OAZApvC,EAASwuC,OAAS,SAASzD,EAAQC,GACjC,IAAII,EAAS,GAAIJ,GACb32G,EAAI,GAAI02G,GAAUK,EAClBn6G,EAAI,GAAI85G,GAAUK,EAClB99B,EAAI,GAAI09B,GACR57G,EAAIk+E,EAAI6hC,EAAgBl+G,EAAIm+G,EAChC,MAAO,CACLtxE,GAAM7sC,EAAIk+G,EAAgB7hC,EAAI8hC,EAAe/6G,EAAI46G,EAAc7/G,EAAI8/G,GACnE/M,GAAK/yG,EAAI6/G,EAAc56G,EAAI66G,GAE/B,EAEOlvC,CACT,CAEe,YAASpsB,GAGtB,SAASy7D,EAAQtvE,GAEf,OADAA,EAAc6T,EAAO7T,EAAY,GAAK,GAASA,EAAY,GAAK,KAC7C,IAAM,GAASA,EAAY,IAAM,GAASA,CAC/D,CAOA,OAZA6T,EAAS86D,GAAc96D,EAAO,GAAK,GAASA,EAAO,GAAK,GAASA,EAAOllD,OAAS,EAAIklD,EAAO,GAAK,GAAU,GAO3Gy7D,EAAQb,OAAS,SAASzuE,GAExB,OADAA,EAAc6T,EAAO46D,OAAOzuE,EAAY,GAAK,GAASA,EAAY,GAAK,KACpD,IAAM,GAASA,EAAY,IAAM,GAASA,CAC/D,EAEOsvE,CACT,CCxEO,SAASC,GAAa3G,EAAQnzD,EAAQ4P,EAAOxlB,EAAW5iC,EAAID,GACjE,GAAKqoD,EAAL,CACA,IAAImqD,EAAY,GAAI/5D,GAChBg6D,EAAY,GAAIh6D,GAChBnjD,EAAOutC,EAAYwlB,EACb,MAANpoD,GACFA,EAAKw4C,EAAS5V,EAAY,GAC1B7iC,EAAKy4C,EAASnjD,EAAO,IAErB2K,EAAKyyG,GAAaF,EAAWvyG,GAC7BD,EAAK0yG,GAAaF,EAAWxyG,IACzB6iC,EAAY,EAAI5iC,EAAKD,EAAKC,EAAKD,KAAIC,GAAM4iC,EAAY,KAE3D,IAAK,IAAItnC,EAAOpH,EAAI8L,EAAI4iC,EAAY,EAAI1uC,EAAI6L,EAAK7L,EAAI6L,EAAI7L,GAAKmB,EAC5DiG,EAAQgzG,GAAU,CAACiE,GAAYC,EAAY,GAAIt+G,IAAKs+G,EAAY,GAAIt+G,KACpEy3G,EAAOrwG,MAAMA,EAAM,GAAIA,EAAM,GAdb,CAgBpB,CAGA,SAASm3G,GAAaF,EAAWj3G,IAC/BA,EAAQizG,GAAUjzG,IAAc,IAAMi3G,EACtC3D,GAA0BtzG,GAC1B,IAAIk9C,EAAS9J,IAAMpzC,EAAM,IACzB,SAAUA,EAAM,GAAK,GAAKk9C,EAASA,GAAU,GAAM,IAAW,EAChE,CAEe,cACb,IAGI7yC,EACAixC,EAJAg0B,EAAS,GAAS,CAAC,EAAG,IACtBpyB,EAAS,GAAS,IAClBuuB,EAAY,GAAS,GAGrB4kC,EAAS,CAACrwG,MAEd,SAAejE,EAAGpD,GAChB0R,EAAK9U,KAAKwG,EAAIu/C,EAAOv/C,EAAGpD,IACxBoD,EAAE,IAAM,GAASA,EAAE,IAAM,EAC3B,GAEA,SAASq7G,IACP,IAAIrzG,EAAIurE,EAAOp5D,MAAMpgB,KAAMod,WACvBvY,EAAIuiD,EAAOhnC,MAAMpgB,KAAMod,WAAa,GACpCrV,EAAI4tE,EAAUv1D,MAAMpgB,KAAMod,WAAa,GAM3C,OALA7I,EAAO,GACPixC,EAAS86D,IAAeryG,EAAE,GAAK,IAAUA,EAAE,GAAK,GAAS,GAAGmyG,OAC5Dc,GAAa3G,EAAQ11G,EAAGkD,EAAG,GAC3BkG,EAAI,CAAC0K,KAAM,UAAWg5B,YAAa,CAACp9B,IACpCA,EAAOixC,EAAS,KACTv3C,CACT,CAcA,OAZAqzG,EAAO9nC,OAAS,SAASx2E,GACvB,OAAOoa,UAAU9c,QAAUk5E,EAAsB,mBAANx2E,EAAmBA,EAAI,GAAS,EAAEA,EAAE,IAAKA,EAAE,KAAMs+G,GAAU9nC,CACxG,EAEA8nC,EAAOl6D,OAAS,SAASpkD,GACvB,OAAOoa,UAAU9c,QAAU8mD,EAAsB,mBAANpkD,EAAmBA,EAAI,IAAUA,GAAIs+G,GAAUl6D,CAC5F,EAEAk6D,EAAO3rC,UAAY,SAAS3yE,GAC1B,OAAOoa,UAAU9c,QAAUq1E,EAAyB,mBAAN3yE,EAAmBA,EAAI,IAAUA,GAAIs+G,GAAU3rC,CAC/F,EAEO2rC,CACT,CCrEe,cACb,IACI5wE,EADA9T,EAAQ,GAEZ,MAAO,CACL1yB,MAAO,SAASjE,EAAGpD,EAAGi/C,GACpBpR,EAAKjxC,KAAK,CAACwG,EAAGpD,EAAGi/C,GACnB,EACAnR,UAAW,WACT/T,EAAMn9B,KAAKixC,EAAO,GACpB,EACAE,QAAS,GACT2wE,OAAQ,WACF3kF,EAAMt8B,OAAS,GAAGs8B,EAAMn9B,KAAKm9B,EAAM74B,MAAM1D,OAAOu8B,EAAM7gB,SAC5D,EACAwQ,OAAQ,WACN,IAAIA,EAASqQ,EAGb,OAFAA,EAAQ,GACR8T,EAAO,KACAnkB,CACT,EAEJ,CCrBe,YAAShoB,EAAGC,GACzB,OAAO,GAAID,EAAE,GAAKC,EAAE,IAAM,IAAW,GAAID,EAAE,GAAKC,EAAE,IAAM,EAC1D,CCDA,SAASg9G,GAAat3G,EAAO2R,EAAQzK,EAAO+jB,GAC1Cn1B,KAAKiG,EAAIiE,EACTlK,KAAKk/E,EAAIrjE,EACT7b,KAAKwhD,EAAIpwC,EACTpR,KAAKgE,EAAImxB,EACTn1B,KAAK0D,GAAI,EACT1D,KAAKyD,EAAIzD,KAAK+H,EAAI,IACpB,CAKe,YAAS0R,EAAUgoG,EAAqBC,EAAa9rB,EAAa2kB,GAC/E,IAEI/5G,EACAiD,EAHA2a,EAAU,GACVu2C,EAAO,GAyBX,GArBAl7C,EAASlT,SAAQ,SAASyK,GACxB,MAAKvN,EAAIuN,EAAQ1Q,OAAS,IAAM,GAAhC,CACA,IAAImD,EAAqCwC,EAAlCm4D,EAAKptD,EAAQ,GAAIxI,EAAKwI,EAAQvN,GAErC,GAAIk+G,GAAWvjD,EAAI51D,GAAK,CACtB,IAAK41D,EAAG,KAAO51D,EAAG,GAAI,CAEpB,IADA+xG,EAAO5pE,YACFnwC,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG+5G,EAAOrwG,OAAOk0D,EAAKptD,EAAQxQ,IAAI,GAAI49D,EAAG,IAE9D,YADAm8C,EAAO3pE,SAET,CAEApoC,EAAG,IAAM,EAAI,EACf,CAEA4V,EAAQ3e,KAAKwG,EAAI,IAAIu7G,GAAapjD,EAAIptD,EAAS,MAAM,IACrD2jD,EAAKl1D,KAAKwG,EAAEu7C,EAAI,IAAIggE,GAAapjD,EAAI,KAAMn4D,GAAG,IAC9CmY,EAAQ3e,KAAKwG,EAAI,IAAIu7G,GAAah5G,EAAIwI,EAAS,MAAM,IACrD2jD,EAAKl1D,KAAKwG,EAAEu7C,EAAI,IAAIggE,GAAah5G,EAAI,KAAMvC,GAAG,GAjBL,CAkB3C,IAEKmY,EAAQ9d,OAAb,CAMA,IAJAq0D,EAAKxsD,KAAKs5G,GACV,GAAKrjG,GACL,GAAKu2C,GAEAn0D,EAAI,EAAGiD,EAAIkxD,EAAKr0D,OAAQE,EAAIiD,IAAKjD,EACpCm0D,EAAKn0D,GAAGwD,EAAI09G,GAAeA,EAO7B,IAJA,IACI7lG,EACA3R,EAFAV,EAAQ4U,EAAQ,KAIV,CAIR,IAFA,IAAIjY,EAAUqD,EACV4P,GAAY,EACTjT,EAAQzC,OAAQyC,EAAUA,EAAQ1C,KAAO+F,EAAO,OACvDqS,EAAS1V,EAAQ+4E,EACjBq7B,EAAO5pE,YACP,EAAG,CAED,GADAxqC,EAAQzC,EAAIyC,EAAQq7C,EAAE99C,GAAI,EACtByC,EAAQnC,EAAG,CACb,GAAIoV,EACF,IAAK5Y,EAAI,EAAGiD,EAAIoY,EAAOvb,OAAQE,EAAIiD,IAAKjD,EAAG+5G,EAAOrwG,OAAOA,EAAQ2R,EAAOrb,IAAI,GAAI0J,EAAM,SAEtF0rF,EAAYzvF,EAAQF,EAAGE,EAAQ1C,EAAEwC,EAAG,EAAGs0G,GAEzCp0G,EAAUA,EAAQ1C,CACpB,KAAO,CACL,GAAI2V,EAEF,IADAyC,EAAS1V,EAAQ4B,EAAEm3E,EACd1+E,EAAIqb,EAAOvb,OAAS,EAAGE,GAAK,IAAKA,EAAG+5G,EAAOrwG,OAAOA,EAAQ2R,EAAOrb,IAAI,GAAI0J,EAAM,SAEpF0rF,EAAYzvF,EAAQF,EAAGE,EAAQ4B,EAAE9B,GAAI,EAAGs0G,GAE1Cp0G,EAAUA,EAAQ4B,CACpB,CAEA8T,GADA1V,EAAUA,EAAQq7C,GACD09B,EACjB9lE,GAAaA,CACf,QAAUjT,EAAQzC,GAClB62G,EAAO3pE,SACT,CA5C2B,CA6C7B,CAEA,SAAS,GAAKgqC,GACZ,GAAMn3E,EAAIm3E,EAAMt6E,OAAhB,CAKA,IAJA,IAAImD,EAGAe,EAFAhE,EAAI,EACJ+D,EAAIq2E,EAAM,KAELp6E,EAAIiD,GACXc,EAAEd,EAAIe,EAAIo2E,EAAMp6E,GAChBgE,EAAEuD,EAAIxD,EACNA,EAAIC,EAEND,EAAEd,EAAIe,EAAIo2E,EAAM,GAChBp2E,EAAEuD,EAAIxD,CAXyB,CAYjC,CClGA,SAASq9G,GAAU13G,GACjB,OAAO,GAAIA,EAAM,KAAO,GAAKA,EAAM,GAAKq6F,GAAKr6F,EAAM,MAAQ,GAAIA,EAAM,IAAM,IAAM,GAAM,GACzF,CAEe,YAAS2zB,EAAS3zB,GAC/B,IAAIyyG,EAASiF,GAAU13G,GACnB0yG,EAAM1yG,EAAM,GACZ+yG,EAAS,GAAIL,GACbiC,EAAS,CAAC,GAAIlC,IAAU,GAAIA,GAAS,GACrCtoE,EAAQ,EACR3/B,EAAU,EAEV5I,EAAM,IAAIsvE,EAEC,IAAX6hC,EAAcL,EAAM,GAAS,IACZ,IAAZK,IAAeL,GAAO,GAAS,IAExC,IAAK,IAAIp8G,EAAI,EAAGiD,EAAIo6B,EAAQv9B,OAAQE,EAAIiD,IAAKjD,EAC3C,GAAMshD,GAAKvtC,EAAOspB,EAAQr9B,IAAIF,OAS9B,IARA,IAAIiU,EACAutC,EACAu6C,EAAS9nF,EAAKutC,EAAI,GAClB65D,EAAUiG,GAAUvlB,GACpByf,EAAOzf,EAAO,GAAK,EAAI+d,GACvByB,EAAU,GAAIC,GACdF,EAAU,GAAIE,GAEThyG,EAAI,EAAGA,EAAIg4C,IAAKh4C,EAAG6xG,EAAUI,EAASF,EAAUgG,EAASjG,EAAUkG,EAASzlB,EAAS0lB,EAAQ,CACpG,IAAIA,EAASxtG,EAAKzK,GACdiyG,EAAU6F,GAAUG,GACpB5/D,EAAO4/D,EAAO,GAAK,EAAI3H,GACvByH,EAAU,GAAI1/D,GACd2/D,EAAU,GAAI3/D,GACd6U,EAAQ+kD,EAAUJ,EAClBpX,EAAOvtC,GAAS,EAAI,GAAK,EACzBgrD,EAAWzd,EAAOvtC,EAClBioD,EAAe+C,EAAW,GAC1BhhH,EAAI66G,EAAUgG,EAOlB,GALA/1G,EAAIhG,IAAI4pC,GAAM1uC,EAAIujG,EAAO,GAAIyd,GAAWpG,EAAUkG,EAAU9gH,EAAI,GAAIghH,KACpE3tE,GAAS4qE,EAAejoD,EAAQutC,EAAO,GAAMvtC,EAIzCioD,EAAetD,GAAWgB,EAASZ,GAAWY,EAAQ,CACxD,IAAIl0C,EAAM40C,GAAeF,GAAU9gB,GAAS8gB,GAAU4E,IACtDvE,GAA0B/0C,GAC1B,IAAI9pD,EAAe0+F,GAAewB,EAAQp2C,GAC1C+0C,GAA0B7+F,GAC1B,IAAIsjG,GAAUhD,EAAejoD,GAAS,GAAK,EAAI,GAAK+8C,GAAKp1F,EAAa,KAClEi+F,EAAMqF,GAAUrF,IAAQqF,IAAWx5C,EAAI,IAAMA,EAAI,OACnD/zD,GAAWuqG,EAAejoD,GAAS,EAAI,GAAK,EAEhD,CACF,CAcF,OAAQ3iB,GAAS,IAAWA,EAAQ,IAAWvoC,GAAOquG,IAAuB,EAAVzlG,CACrE,CCnEe,YAASwtG,EAAcC,EAAUvsB,EAAapsF,GAC3D,OAAO,SAAS44G,GACd,IAIIvkF,EACApkB,EACAlF,EANAm8B,EAAOyxE,EAASC,GAChBC,EAAa,KACbC,EAAWH,EAASE,GACpBE,GAAiB,EAKjB5tD,EAAO,CACTzqD,MAAOA,EACPymC,UAAWA,EACXC,QAASA,EACT2qE,aAAc,WACZ5mD,EAAKzqD,MAAQs4G,EACb7tD,EAAKhkB,UAAY8xE,EACjB9tD,EAAK/jB,QAAU8xE,EACfjpG,EAAW,GACXokB,EAAU,EACZ,EACA29E,WAAY,WACV7mD,EAAKzqD,MAAQA,EACbyqD,EAAKhkB,UAAYA,EACjBgkB,EAAK/jB,QAAUA,EACfn3B,EAAWlQ,GAAMkQ,GACjB,IAAIioG,EAAciB,GAAgB9kF,EAASr0B,GACvCiQ,EAASnZ,QACNiiH,IAAgBH,EAAK7G,eAAgBgH,GAAiB,GAC3D,GAAW9oG,EAAUgoG,GAAqBC,EAAa9rB,EAAawsB,IAC3DV,IACJa,IAAgBH,EAAK7G,eAAgBgH,GAAiB,GAC3DH,EAAKzxE,YACLilD,EAAY,KAAM,KAAM,EAAGwsB,GAC3BA,EAAKxxE,WAEH2xE,IAAgBH,EAAK5G,aAAc+G,GAAiB,GACxD9oG,EAAWokB,EAAU,IACvB,EACAg9E,OAAQ,WACNuH,EAAK7G,eACL6G,EAAKzxE,YACLilD,EAAY,KAAM,KAAM,EAAGwsB,GAC3BA,EAAKxxE,UACLwxE,EAAK5G,YACP,GAGF,SAAStxG,EAAMyyG,EAAQC,GACjBsF,EAAavF,EAAQC,IAAMwF,EAAKl4G,MAAMyyG,EAAQC,EACpD,CAEA,SAASgG,EAAUjG,EAAQC,GACzBlsE,EAAKxmC,MAAMyyG,EAAQC,EACrB,CAEA,SAASjsE,IACPgkB,EAAKzqD,MAAQ04G,EACblyE,EAAKC,WACP,CAEA,SAASC,IACP+jB,EAAKzqD,MAAQA,EACbwmC,EAAKE,SACP,CAEA,SAAS4xE,EAAU7F,EAAQC,GACzBroG,EAAK9U,KAAK,CAACk9G,EAAQC,IACnB0F,EAASp4G,MAAMyyG,EAAQC,EACzB,CAEA,SAAS6F,IACPH,EAAS3xE,YACTp8B,EAAO,EACT,CAEA,SAASmuG,IACPF,EAAUjuG,EAAK,GAAG,GAAIA,EAAK,GAAG,IAC9B+tG,EAAS1xE,UAET,IAEIpwC,EAA4BshD,EAC5B9wC,EACA9G,EAJAgxF,EAAQonB,EAASpnB,QACjB2nB,EAAeR,EAAW91F,SACvB9oB,EAAIo/G,EAAaviH,OAQxB,GAJAiU,EAAKxQ,MACL85B,EAAQp+B,KAAK8U,GACbA,EAAO,KAEF9Q,EAGL,GAAY,EAARy3F,GAEF,IAAKp5C,GADL9wC,EAAU6xG,EAAa,IACNviH,OAAS,GAAK,EAAG,CAGhC,IAFKiiH,IAAgBH,EAAK7G,eAAgBgH,GAAiB,GAC3DH,EAAKzxE,YACAnwC,EAAI,EAAGA,EAAIshD,IAAKthD,EAAG4hH,EAAKl4G,OAAOA,EAAQ8G,EAAQxQ,IAAI,GAAI0J,EAAM,IAClEk4G,EAAKxxE,SACP,OAMEntC,EAAI,GAAa,EAARy3F,GAAW2nB,EAAapjH,KAAKojH,EAAa9+G,MAAM1D,OAAOwiH,EAAa9mG,UAEjFtC,EAASha,KAAKojH,EAAavsF,OAAOwsF,IACpC,CAEA,OAAOnuD,CACT,CACF,CAEA,SAASmuD,GAAa9xG,GACpB,OAAOA,EAAQ1Q,OAAS,CAC1B,CAIA,SAASmhH,GAAoBl9G,EAAGC,GAC9B,QAASD,EAAIA,EAAE0B,GAAG,GAAK,EAAI1B,EAAE,GAAK,GAAS,GAAU,GAASA,EAAE,MACvDC,EAAIA,EAAEyB,GAAG,GAAK,EAAIzB,EAAE,GAAK,GAAS,GAAU,GAASA,EAAE,GAClE,CN1HA67G,GAAiBD,OAASC,GOL1B,SAAe1rD,IACb,WAAa,OAAO,CAAM,IAS5B,SAA8B4lD,GAC5B,IAGIrf,EAHAygB,EAAUrtE,IACVwtE,EAAOxtE,IACPy0E,EAAQz0E,IAGZ,MAAO,CACLqC,UAAW,WACT4pE,EAAO5pE,YACPuqD,EAAQ,CACV,EACAhxF,MAAO,SAAS6xG,EAAS55D,GACvB,IAAI6gE,EAAQjH,EAAU,EAAI,IAAM,GAC5B/kD,EAAQ,GAAI+kD,EAAUJ,GACtB,GAAI3kD,EAAQ,IAAM,IACpBujD,EAAOrwG,MAAMyxG,EAASG,GAAQA,EAAO35D,GAAQ,EAAI,EAAI,IAAU,IAC/Do4D,EAAOrwG,MAAM64G,EAAOjH,GACpBvB,EAAO3pE,UACP2pE,EAAO5pE,YACP4pE,EAAOrwG,MAAM84G,EAAOlH,GACpBvB,EAAOrwG,MAAM6xG,EAASD,GACtB5gB,EAAQ,GACC6nB,IAAUC,GAAShsD,GAAS,KACjC,GAAI2kD,EAAUoH,GAAS,KAASpH,GAAWoH,EAAQ,IACnD,GAAIhH,EAAUiH,GAAS,KAASjH,GAAWiH,EAAQ,IACvDlH,EAoBR,SAAmCH,EAASG,EAAMC,EAAS55D,GACzD,IAAIy5D,EACAkG,EACAmB,EAAoB,GAAItH,EAAUI,GACtC,OAAO,GAAIkH,GAAqB,GAC1B5+D,IAAM,GAAIy3D,IAASgG,EAAU,GAAI3/D,IAAS,GAAI45D,GAC1C,GAAI55D,IAASy5D,EAAU,GAAIE,IAAS,GAAIH,KACvCC,EAAUkG,EAAUmB,KACxBnH,EAAO35D,GAAQ,CACxB,CA7Be+gE,CAA0BvH,EAASG,EAAMC,EAAS55D,GACzDo4D,EAAOrwG,MAAM64G,EAAOjH,GACpBvB,EAAO3pE,UACP2pE,EAAO5pE,YACP4pE,EAAOrwG,MAAM84G,EAAOlH,GACpB5gB,EAAQ,GAEVqf,EAAOrwG,MAAMyxG,EAAUI,EAASD,EAAO35D,GACvC4gE,EAAQC,CACV,EACApyE,QAAS,WACP2pE,EAAO3pE,UACP+qE,EAAUG,EAAOxtE,GACnB,EACA4sD,MAAO,WACL,OAAO,EAAIA,CACb,EAEJ,IAaA,SAAqC5xD,EAAMqiC,EAAIn6B,EAAW+oE,GACxD,IAAIqC,EACJ,GAAY,MAARtzE,EACFszE,EAAMprE,EAAY,GAClB+oE,EAAOrwG,OAAO,GAAI0yG,GAClBrC,EAAOrwG,MAAM,EAAG0yG,GAChBrC,EAAOrwG,MAAM,GAAI0yG,GACjBrC,EAAOrwG,MAAM,GAAI,GACjBqwG,EAAOrwG,MAAM,IAAK0yG,GAClBrC,EAAOrwG,MAAM,GAAI0yG,GACjBrC,EAAOrwG,OAAO,IAAK0yG,GACnBrC,EAAOrwG,OAAO,GAAI,GAClBqwG,EAAOrwG,OAAO,GAAI0yG,QACb,GAAI,GAAItzE,EAAK,GAAKqiC,EAAG,IAAM,GAAS,CACzC,IAAIgxC,EAASrzE,EAAK,GAAKqiC,EAAG,GAAK,IAAM,GACrCixC,EAAMprE,EAAYmrE,EAAS,EAC3BpC,EAAOrwG,OAAOyyG,EAAQC,GACtBrC,EAAOrwG,MAAM,EAAG0yG,GAChBrC,EAAOrwG,MAAMyyG,EAAQC,EACvB,MACErC,EAAOrwG,MAAMyhE,EAAG,GAAIA,EAAG,GAE3B,GApFE,EAAE,IAAK,KCDM,YAASvkB,GACtB,IAAI+7D,EAAK,GAAI/7D,GACT4P,EAAQ,EAAI,GACZosD,EAAcD,EAAK,EACnBE,EAAgB,GAAIF,GAAM,GAM9B,SAASG,EAAQ3G,EAAQC,GACvB,OAAO,GAAID,GAAU,GAAIC,GAAOuG,CAClC,CAiFA,SAASI,EAAUh/G,EAAGC,EAAGg/G,GACvB,IAKI7iE,EAAK,CAAC,EAAG,EAAG,GACZC,EAAKy8D,GANAF,GAAU54G,GACV44G,GAAU34G,IAMfi/G,EAAOrG,GAAax8D,EAAIA,GACxB8iE,EAAO9iE,EAAG,GACV+iE,EAAcF,EAAOC,EAAOA,EAGhC,IAAKC,EAAa,OAAQH,GAAOj/G,EAEjC,IAAIgmG,EAAM4Y,EAAKM,EAAOE,EAClBC,GAAMT,EAAKO,EAAOC,EAClBE,EAAQxG,GAAe18D,EAAIC,GAC3BoC,EAAIu6D,GAAe58D,EAAI4pD,GAE3B+S,GAAoBt6D,EADZu6D,GAAe38D,EAAIgjE,IAI3B,IAAI52G,EAAI62G,EACJ9+D,EAAIq4D,GAAap6D,EAAGh2C,GACpB82G,EAAK1G,GAAapwG,EAAGA,GACrBm0C,EAAK4D,EAAIA,EAAI++D,GAAM1G,GAAap6D,EAAGA,GAAK,GAE5C,KAAI7B,EAAK,GAAT,CAEA,IAAIr+C,EAAIiN,GAAKoxC,GACTxB,EAAI49D,GAAevwG,IAAK+3C,EAAIjiD,GAAKghH,GAIrC,GAHAxG,GAAoB39D,EAAGqD,GACvBrD,EAAIu9D,GAAUv9D,IAET6jE,EAAK,OAAO7jE,EAGjB,IAIIu/B,EAJAy8B,EAAUp3G,EAAE,GACZw3G,EAAUv3G,EAAE,GACZs3G,EAAOv3G,EAAE,GACT49C,EAAO39C,EAAE,GAGTu3G,EAAUJ,IAASz8B,EAAIy8B,EAASA,EAAUI,EAASA,EAAU78B,GAEjE,IAAIloB,EAAQ+kD,EAAUJ,EAClBoI,EAAQ,GAAI/sD,EAAQ,IAAM,GAM9B,IAHK+sD,GAAS5hE,EAAO25D,IAAM58B,EAAI48B,EAAMA,EAAO35D,EAAMA,EAAO+8B,GAF1C6kC,GAAS/sD,EAAQ,GAM1B+sD,EACEjI,EAAO35D,EAAO,EAAIxC,EAAE,IAAM,GAAIA,EAAE,GAAKg8D,GAAW,GAAUG,EAAO35D,GACjE25D,GAAQn8D,EAAE,IAAMA,EAAE,IAAMwC,EAC1B6U,EAAQ,IAAM2kD,GAAWh8D,EAAE,IAAMA,EAAE,IAAMo8D,GAAU,CACvD,IAAIt+D,EAAK8/D,GAAevwG,IAAK+3C,EAAIjiD,GAAKghH,GAEtC,OADAxG,GAAoB7/D,EAAIuF,GACjB,CAACrD,EAAGu9D,GAAUz/D,GACvB,CAjCkB,CAkCpB,CAIA,SAASumE,EAAKrH,EAAQC,GACpB,IAAI/3G,EAAIu+G,EAAch8D,EAAS,GAAKA,EAChC48D,EAAO,EAKX,OAJIrH,GAAU93G,EAAGm/G,GAAQ,EAChBrH,EAAS93G,IAAGm/G,GAAQ,GACzBpH,GAAO/3G,EAAGm/G,GAAQ,EACbpH,EAAM/3G,IAAGm/G,GAAQ,GACnBA,CACT,CAEA,OAAOrvD,GAAK2uD,GAvJZ,SAAkB/I,GAChB,IAAIle,EACAgO,EACA7a,EACAy0B,EACA/oB,EACJ,MAAO,CACLvqD,UAAW,WACTszE,EAAMz0B,GAAK,EACX0L,EAAQ,CACV,EACAhxF,MAAO,SAASyyG,EAAQC,GACtB,IACIsH,EADAnC,EAAS,CAACpF,EAAQC,GAElBl5G,EAAI4/G,EAAQ3G,EAAQC,GACpB3uG,EAAIm1G,EACA1/G,EAAI,EAAIsgH,EAAKrH,EAAQC,GACrBl5G,EAAIsgH,EAAKrH,GAAUA,EAAS,EAAI,IAAM,IAAKC,GAAO,EAO1D,IANKvgB,IAAW4nB,EAAMz0B,EAAK9rF,IAAI62G,EAAO5pE,YAClCjtC,IAAM8rF,MACR00B,EAASX,EAAUlnB,EAAQ0lB,KACZJ,GAAWtlB,EAAQ6nB,IAAWvC,GAAWI,EAAQmC,MAC9DnC,EAAO,GAAK,GAEZr+G,IAAM8rF,EACR0L,EAAQ,EACJx3F,GAEF62G,EAAO5pE,YACPuzE,EAASX,EAAUxB,EAAQ1lB,GAC3Bke,EAAOrwG,MAAMg6G,EAAO,GAAIA,EAAO,MAG/BA,EAASX,EAAUlnB,EAAQ0lB,GAC3BxH,EAAOrwG,MAAMg6G,EAAO,GAAIA,EAAO,GAAI,GACnC3J,EAAO3pE,WAETyrD,EAAS6nB,OACJ,GAAIb,GAAiBhnB,GAAU+mB,EAAc1/G,EAAG,CACrD,IAAIZ,EAGEmL,EAAIo8F,KAAQvnG,EAAIygH,EAAUxB,EAAQ1lB,GAAQ,MAC9CnB,EAAQ,EACJkoB,GACF7I,EAAO5pE,YACP4pE,EAAOrwG,MAAMpH,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC3By3G,EAAOrwG,MAAMpH,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC3By3G,EAAO3pE,YAEP2pE,EAAOrwG,MAAMpH,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC3By3G,EAAO3pE,UACP2pE,EAAO5pE,YACP4pE,EAAOrwG,MAAMpH,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAI,IAGrC,EACIY,GAAO24F,GAAWslB,GAAWtlB,EAAQ0lB,IACvCxH,EAAOrwG,MAAM63G,EAAO,GAAIA,EAAO,IAEjC1lB,EAAS0lB,EAAQvyB,EAAK9rF,EAAG2mG,EAAKp8F,CAChC,EACA2iC,QAAS,WACH4+C,GAAI+qB,EAAO3pE,UACfyrD,EAAS,IACX,EAGAnB,MAAO,WACL,OAAOA,GAAU+oB,GAAOz0B,IAAO,CACjC,EAEJ,IApFA,SAAqBlmD,EAAMqiC,EAAIn6B,EAAW+oE,GACxC2G,GAAa3G,EAAQnzD,EAAQ4P,EAAOxlB,EAAWlI,EAAMqiC,EACvD,GAiK4Cy3C,EAAc,CAAC,GAAIh8D,GAAU,EAAE,GAAIA,EAAS,IAC1F,CC1KA,ICDI+8D,GACA,GACA,GACA,GDFAC,GAAU,IAAKC,IAAWD,GAKf,SAASE,GAActrE,EAAI3b,EAAIkT,EAAIz7B,GAEhD,SAASwuG,EAAQr9G,EAAGpD,GAClB,OAAOm2C,GAAM/yC,GAAKA,GAAKsqC,GAAMlT,GAAMx6B,GAAKA,GAAKiS,CAC/C,CAEA,SAAS8gF,EAAYtsD,EAAMqiC,EAAIn6B,EAAW+oE,GACxC,IAAIh2G,EAAI,EAAG6jE,EAAK,EAChB,GAAY,MAAR9+B,IACI/kC,EAAIggH,EAAOj7E,EAAMkI,OAAiB42B,EAAKm8C,EAAO54C,EAAIn6B,KACnD19B,EAAaw1B,EAAMqiC,GAAM,EAAIn6B,EAAY,EAC9C,GAAG+oE,EAAOrwG,MAAY,IAAN3F,GAAiB,IAANA,EAAUy0C,EAAKzI,EAAIhsC,EAAI,EAAIuQ,EAAKuoB,UACnD94B,GAAKA,EAAIitC,EAAY,GAAK,KAAO42B,QAEzCmyC,EAAOrwG,MAAMyhE,EAAG,GAAIA,EAAG,GAE3B,CAEA,SAAS44C,EAAOx8G,EAAGypC,GACjB,OAAO,GAAIzpC,EAAE,GAAKixC,GAAM,GAAUxH,EAAY,EAAI,EAAI,EAChD,GAAIzpC,EAAE,GAAKwoC,GAAM,GAAUiB,EAAY,EAAI,EAAI,EAC/C,GAAIzpC,EAAE,GAAKs1B,GAAM,GAAUmU,EAAY,EAAI,EAAI,EAC/CA,EAAY,EAAI,EAAI,CAC5B,CAEA,SAASiwE,EAAoBl9G,EAAGC,GAC9B,OAAOsP,EAAavP,EAAE0B,EAAGzB,EAAEyB,EAC7B,CAEA,SAAS6N,EAAavP,EAAGC,GACvB,IAAIggH,EAAKD,EAAOhgH,EAAG,GACfkgH,EAAKF,EAAO//G,EAAG,GACnB,OAAOggH,IAAOC,EAAKD,EAAKC,EACX,IAAPD,EAAWhgH,EAAE,GAAKD,EAAE,GACb,IAAPigH,EAAWjgH,EAAE,GAAKC,EAAE,GACb,IAAPggH,EAAWjgH,EAAE,GAAKC,EAAE,GACpBA,EAAE,GAAKD,EAAE,EACjB,CAEA,OAAO,SAASg2G,GACd,IAEI9gG,EACAokB,EACAtpB,EACAmwG,EAAKC,EAAKC,EACVC,EAAIC,EAAIC,EACRrkC,EACAwa,EARA8pB,EAAezK,EACf0K,EAAe,KASfC,EAAa,CACfh7G,MAAOA,EACPymC,UAgDF,WACEu0E,EAAWh7G,MAAQ00G,EACf/gF,GAASA,EAAQp+B,KAAK8U,EAAO,IACjCmsE,GAAQ,EACRqkC,GAAK,EACLF,EAAKC,EAAKx2E,GACZ,EArDEsC,QA0DF,WACMn3B,IACFmlG,EAAU8F,EAAKC,GACXC,GAAOG,GAAIE,EAAa1D,SAC5B9nG,EAASha,KAAKwlH,EAAa14F,WAE7B24F,EAAWh7G,MAAQA,EACf66G,GAAIC,EAAap0E,SACvB,EAjEE2qE,aAuBF,WACEyJ,EAAeC,EAAcxrG,EAAW,GAAIokB,EAAU,GAAIq9D,GAAQ,CACpE,EAxBEsgB,WA0BF,WACE,IAAIkG,EApBN,WAGE,IAFA,IAAIhtG,EAAU,EAELlU,EAAI,EAAGiD,EAAIo6B,EAAQv9B,OAAQE,EAAIiD,IAAKjD,EAC3C,IAAK,IAAgEk/F,EAAIt3B,EAAhE7zD,EAAOspB,EAAQr9B,GAAIsJ,EAAI,EAAGg4C,EAAIvtC,EAAKjU,OAAQ4J,EAAQqK,EAAK,GAAY8zF,EAAKn+F,EAAM,GAAII,EAAKJ,EAAM,GAAIJ,EAAIg4C,IAAKh4C,EAClH41F,EAAK2I,EAAIjgC,EAAK99D,EAAqB+9F,GAAjBn+F,EAAQqK,EAAKzK,IAAe,GAAIQ,EAAKJ,EAAM,GACzDk+D,GAAMtzD,EAAUxK,EAAKwK,IAAOuzF,EAAK3I,IAAO5qF,EAAKszD,IAAO99D,EAAK89D,IAAOpvB,EAAK0mD,MAAOhrF,EACrEpK,GAAMwK,IAAOuzF,EAAK3I,IAAO5qF,EAAKszD,IAAO99D,EAAK89D,IAAOpvB,EAAK0mD,MAAOhrF,EAI5E,OAAOA,CACT,CAQoBywG,GACdC,EAAclqB,GAASwmB,EACvB4B,GAAW7pG,EAAWlQ,GAAMkQ,IAAWnZ,QACvC8kH,GAAe9B,KACjB/I,EAAOgB,eACH6J,IACF7K,EAAO5pE,YACPilD,EAAY,KAAM,KAAM,EAAG2kB,GAC3BA,EAAO3pE,WAEL0yE,GACF,GAAW7pG,EAAUgoG,EAAqBC,EAAa9rB,EAAa2kB,GAEtEA,EAAOiB,cAETwJ,EAAezK,EAAQ9gG,EAAWokB,EAAUtpB,EAAO,IACrD,GAxCA,SAASrK,EAAMjE,EAAGpD,GACZygH,EAAQr9G,EAAGpD,IAAImiH,EAAa96G,MAAMjE,EAAGpD,EAC3C,CA6DA,SAAS+7G,EAAU34G,EAAGpD,GACpB,IAAIa,EAAI4/G,EAAQr9G,EAAGpD,GAEnB,GADIg7B,GAAStpB,EAAK9U,KAAK,CAACwG,EAAGpD,IACvB69E,EACFgkC,EAAMz+G,EAAG0+G,EAAM9hH,EAAG+hH,EAAMlhH,EACxBg9E,GAAQ,EACJh9E,IACFshH,EAAar0E,YACbq0E,EAAa96G,MAAMjE,EAAGpD,SAGxB,GAAIa,GAAKqhH,EAAIC,EAAa96G,MAAMjE,EAAGpD,OAC9B,CACH,IAAI0B,EAAI,CAACsgH,EAAKl7G,KAAKvC,IAAIi9G,GAAS16G,KAAKzC,IAAIk9G,GAASS,IAAMC,EAAKn7G,KAAKvC,IAAIi9G,GAAS16G,KAAKzC,IAAIk9G,GAASU,KAC7FtgH,EAAI,CAACyB,EAAI0D,KAAKvC,IAAIi9G,GAAS16G,KAAKzC,IAAIk9G,GAASn+G,IAAKpD,EAAI8G,KAAKvC,IAAIi9G,GAAS16G,KAAKzC,IAAIk9G,GAASvhH,MElJzF,SAAS0B,EAAGC,EAAGw0C,EAAI3b,EAAIkT,EAAIz7B,GACxC,IAQIjQ,EARAqI,EAAK3I,EAAE,GACP4I,EAAK5I,EAAE,GAGPqK,EAAK,EACLD,EAAK,EACLwlC,EAJK3vC,EAAE,GAIG0I,EACVknC,EAJK5vC,EAAE,GAIG2I,EAId,GADAtI,EAAIm0C,EAAK9rC,EACJinC,KAAMtvC,EAAI,GAAf,CAEA,GADAA,GAAKsvC,EACDA,EAAK,EAAG,CACV,GAAItvC,EAAI+J,EAAI,OACR/J,EAAI8J,IAAIA,EAAK9J,EACnB,MAAO,GAAIsvC,EAAK,EAAG,CACjB,GAAItvC,EAAI8J,EAAI,OACR9J,EAAI+J,IAAIA,EAAK/J,EACnB,CAGA,GADAA,EAAI0rC,EAAKrjC,EACJinC,KAAMtvC,EAAI,GAAf,CAEA,GADAA,GAAKsvC,EACDA,EAAK,EAAG,CACV,GAAItvC,EAAI8J,EAAI,OACR9J,EAAI+J,IAAIA,EAAK/J,EACnB,MAAO,GAAIsvC,EAAK,EAAG,CACjB,GAAItvC,EAAI+J,EAAI,OACR/J,EAAI8J,IAAIA,EAAK9J,EACnB,CAGA,GADAA,EAAIw4B,EAAKlwB,EACJinC,KAAMvvC,EAAI,GAAf,CAEA,GADAA,GAAKuvC,EACDA,EAAK,EAAG,CACV,GAAIvvC,EAAI+J,EAAI,OACR/J,EAAI8J,IAAIA,EAAK9J,EACnB,MAAO,GAAIuvC,EAAK,EAAG,CACjB,GAAIvvC,EAAI8J,EAAI,OACR9J,EAAI+J,IAAIA,EAAK/J,EACnB,CAGA,GADAA,EAAIiQ,EAAK3H,EACJinC,KAAMvvC,EAAI,GAAf,CAEA,GADAA,GAAKuvC,EACDA,EAAK,EAAG,CACV,GAAIvvC,EAAI8J,EAAI,OACR9J,EAAI+J,IAAIA,EAAK/J,EACnB,MAAO,GAAIuvC,EAAK,EAAG,CACjB,GAAIvvC,EAAI+J,EAAI,OACR/J,EAAI8J,IAAIA,EAAK9J,EACnB,CAIA,OAFI+J,EAAK,IAAGrK,EAAE,GAAK2I,EAAK0B,EAAKulC,EAAI5vC,EAAE,GAAK4I,EAAKyB,EAAKwlC,GAC9CzlC,EAAK,IAAGnK,EAAE,GAAK0I,EAAKyB,EAAKwlC,EAAI3vC,EAAE,GAAK2I,EAAKwB,EAAKylC,IAC3C,CAZiB,CAXA,CAXA,CAXA,CA8C1B,CFyFc,CAAS7vC,EAAGC,EAAGw0C,EAAI3b,EAAIkT,EAAIz7B,GAQpBpR,IACTshH,EAAar0E,YACbq0E,EAAa96G,MAAMjE,EAAGpD,GACtBq4F,GAAQ,IAVH6pB,IACHC,EAAar0E,YACbq0E,EAAa96G,MAAM3F,EAAE,GAAIA,EAAE,KAE7BygH,EAAa96G,MAAM1F,EAAE,GAAIA,EAAE,IACtBd,GAAGshH,EAAap0E,UACrBsqD,GAAQ,EAMZ,CAEF2pB,EAAK5+G,EAAG6+G,EAAKjiH,EAAGkiH,EAAKrhH,CACvB,CAEA,OAAOwhH,CACT,CACF,CGrKe,cACb,IAII7yG,EACAgzG,EACA1wD,EANA3b,EAAK,EACL3b,EAAK,EACLkT,EAAK,IACLz7B,EAAK,IAKT,OAAO6/C,EAAO,CACZ4lD,OAAQ,SAASA,GACf,OAAOloG,GAASgzG,IAAgB9K,EAASloG,EAAQA,EAAQiyG,GAActrE,EAAI3b,EAAIkT,EAAIz7B,EAA1BwvG,CAA8Be,EAAc9K,EACvG,EACAp/B,OAAQ,SAASn4E,GACf,OAAOoa,UAAU9c,QAAU04C,GAAMh2C,EAAE,GAAG,GAAIq6B,GAAMr6B,EAAE,GAAG,GAAIutC,GAAMvtC,EAAE,GAAG,GAAI8R,GAAM9R,EAAE,GAAG,GAAIqP,EAAQgzG,EAAc,KAAM1wD,GAAQ,CAAC,CAAC3b,EAAI3b,GAAK,CAACkT,EAAIz7B,GAC7I,EAEJ,CFTA,IAAIwwG,GAAe,CACjBzK,OAAQ,GACR3wG,MAAO,GACPymC,UAMF,WACE20E,GAAap7G,MAAQq7G,GACrBD,GAAa10E,QAAU40E,EACzB,EARE50E,QAAS,GACT2qE,aAAc,GACdC,WAAY,IAQd,SAASgK,KACPF,GAAap7G,MAAQo7G,GAAa10E,QAAU,EAC9C,CAEA,SAAS20E,GAAiB5I,EAAQC,GAEhC,GADAD,GAAU,GACQ,GAAU,GADTC,GAAO,IACY,GAAU,GAAIA,GACpD0I,GAAap7G,MAAQu7G,EACvB,CAEA,SAASA,GAAY9I,EAAQC,GAC3BD,GAAU,GACV,IAAIM,EAAS,GADML,GAAO,IAEtBI,EAAS,GAAIJ,GACb5lD,EAAQ,GAAI2lD,EAAS,IACrB+I,EAAW,GAAI1uD,GAEf/wD,EAAI+2G,EADO,GAAIhmD,GAEfn0D,EAAI,GAAUo6G,EAAS,GAAUD,EAAS0I,EAC1CxmC,EAAI,GAAU+9B,EAAS,GAAUD,EAAS0I,EAC9CvB,GAAUr+G,IAAI4pC,GAAM3/B,GAAK9J,EAAIA,EAAIpD,EAAIA,GAAIq8E,IACzC,GAAUy9B,EAAQ,GAAUM,EAAQ,GAAUD,CAChD,CAEe,YAAS18F,GAGtB,OAFA6jG,GAAY,IAAI/oC,EAChBm/B,GAAOj6F,EAAQglG,KACPnB,EACV,CGlDA,IAAIxyE,GAAc,CAAC,KAAM,MACrB,GAAS,CAACh5B,KAAM,aAAcg5B,YAAaA,IAEhC,YAASptC,EAAGC,GAGzB,OAFAmtC,GAAY,GAAKptC,EACjBotC,GAAY,GAAKntC,EACV,GAAO,GAChB,CCLA,IAAImhH,GAAqB,CACvBjL,QAAS,SAASp6F,EAAQpW,GACxB,OAAO07G,GAAiBtlG,EAAO4kF,SAAUh7F,EAC3C,EACAywG,kBAAmB,SAASr6F,EAAQpW,GAElC,IADA,IAAI2sB,EAAWvW,EAAOuW,SAAUr2B,GAAK,EAAGiD,EAAIozB,EAASv2B,SAC5CE,EAAIiD,MAAOmiH,GAAiB/uF,EAASr2B,GAAG0kG,SAAUh7F,GAAQ,OAAO,EAC1E,OAAO,CACT,GAGE27G,GAAuB,CACzBjL,OAAQ,WACN,OAAO,CACT,EACA1pD,MAAO,SAAS5wC,EAAQpW,GACtB,OAAO47G,GAAcxlG,EAAOqxB,YAAaznC,EAC3C,EACA4wG,WAAY,SAASx6F,EAAQpW,GAE3B,IADA,IAAIynC,EAAcrxB,EAAOqxB,YAAanxC,GAAK,EAAGiD,EAAIkuC,EAAYrxC,SACrDE,EAAIiD,MAAOqiH,GAAcn0E,EAAYnxC,GAAI0J,GAAQ,OAAO,EACjE,OAAO,CACT,EACA6wG,WAAY,SAASz6F,EAAQpW,GAC3B,OAAO67G,GAAazlG,EAAOqxB,YAAaznC,EAC1C,EACA+wG,gBAAiB,SAAS36F,EAAQpW,GAEhC,IADA,IAAIynC,EAAcrxB,EAAOqxB,YAAanxC,GAAK,EAAGiD,EAAIkuC,EAAYrxC,SACrDE,EAAIiD,MAAOsiH,GAAap0E,EAAYnxC,GAAI0J,GAAQ,OAAO,EAChE,OAAO,CACT,EACA++F,QAAS,SAAS3oF,EAAQpW,GACxB,OAAO87G,GAAgB1lG,EAAOqxB,YAAaznC,EAC7C,EACAixG,aAAc,SAAS76F,EAAQpW,GAE7B,IADA,IAAIynC,EAAcrxB,EAAOqxB,YAAanxC,GAAK,EAAGiD,EAAIkuC,EAAYrxC,SACrDE,EAAIiD,MAAOuiH,GAAgBr0E,EAAYnxC,GAAI0J,GAAQ,OAAO,EACnE,OAAO,CACT,EACAkxG,mBAAoB,SAAS96F,EAAQpW,GAEnC,IADA,IAAImxG,EAAa/6F,EAAO+6F,WAAY76G,GAAK,EAAGiD,EAAI43G,EAAW/6G,SAClDE,EAAIiD,MAAOmiH,GAAiBvK,EAAW76G,GAAI0J,GAAQ,OAAO,EACnE,OAAO,CACT,GAGF,SAAS07G,GAAiB1gB,EAAUh7F,GAClC,SAAOg7F,IAAY2gB,GAAqBvkE,eAAe4jD,EAASvsF,QAC1DktG,GAAqB3gB,EAASvsF,MAAMusF,EAAUh7F,EAEtD,CAEA,SAAS47G,GAAcn0E,EAAaznC,GAClC,OAAwC,IAAjCiuB,GAASwZ,EAAaznC,EAC/B,CAEA,SAAS67G,GAAap0E,EAAaznC,GAEjC,IADA,IAAI+7G,EAAIC,EAAIn7G,EACHvK,EAAI,EAAGiD,EAAIkuC,EAAYrxC,OAAQE,EAAIiD,EAAGjD,IAAK,CAElD,GAAW,KADX0lH,EAAK/tF,GAASwZ,EAAYnxC,GAAI0J,IAChB,OAAO,EACrB,GAAI1J,EAAI,IACNuK,EAAKotB,GAASwZ,EAAYnxC,GAAImxC,EAAYnxC,EAAI,KAEvC,GACLylH,GAAMl7G,GACNm7G,GAAMn7G,IACLk7G,EAAKC,EAAKn7G,IAAO,EAAIpB,KAAKkB,KAAKo7G,EAAKC,GAAMn7G,EAAI,IAAMovG,GAAWpvG,EAEhE,OAAO,EAEXk7G,EAAKC,CACP,CACA,OAAO,CACT,CAEA,SAASF,GAAgBr0E,EAAaznC,GACpC,QAASy4G,GAAgBhxE,EAAY1xC,IAAIkmH,IAAcC,GAAal8G,GACtE,CAEA,SAASi8G,GAAY5xG,GACnB,OAAOA,EAAOA,EAAKtU,IAAImmH,KAAoBriH,MAAOwQ,CACpD,CAEA,SAAS6xG,GAAal8G,GACpB,MAAO,CAACA,EAAM,GAAK,GAASA,EAAM,GAAK,GACzC,CAEe,YAASoW,EAAQpW,GAC9B,OAAQoW,GAAUqlG,GAAmBrkE,eAAehhC,EAAO3H,MACrDgtG,GAAmBrlG,EAAO3H,MAC1BitG,IAAkBtlG,EAAQpW,EAClC,CC7FA,SAASm8G,GAAWhpF,EAAIvoB,EAAIs/B,GAC1B,IAAIvxC,EAAI8D,GAAM02B,EAAIvoB,EAAK,GAASs/B,GAAI/zC,OAAOyU,GAC3C,OAAO,SAAS7O,GAAK,OAAOpD,EAAE5C,KAAI,SAAS4C,GAAK,MAAO,CAACoD,EAAGpD,EAAI,GAAI,CACrE,CAEA,SAASyjH,GAAWttE,EAAIzI,EAAI4D,GAC1B,IAAIluC,EAAIU,GAAMqyC,EAAIzI,EAAK,GAAS4D,GAAI9zC,OAAOkwC,GAC3C,OAAO,SAAS1tC,GAAK,OAAOoD,EAAEhG,KAAI,SAASgG,GAAK,MAAO,CAACA,EAAGpD,EAAI,GAAI,CACrE,CAEe,SAAS0jH,KACtB,IAAIh2E,EAAIyI,EAAI8kE,EAAIH,EACZ7oG,EAAIuoB,EAAI0gF,EAAIH,EAEZ33G,EAAGpD,EAAG+8C,EAAGC,EADT1L,EAAK,GAAIC,EAAKD,EAAIqyE,EAAK,GAAIC,EAAK,IAEhC9wC,EAAY,IAEhB,SAAS4wC,IACP,MAAO,CAAC5tG,KAAM,kBAAmBg5B,YAAa/U,IAChD,CAEA,SAASA,IACP,OAAOj2B,GAAMwyB,GAAKwkF,EAAK6I,GAAMA,EAAI1I,EAAI0I,GAAIvmH,IAAI2/C,GACxCv/C,OAAOsG,GAAMwyB,GAAKykF,EAAK6I,GAAMA,EAAI1I,EAAI0I,GAAIxmH,IAAI4/C,IAC7Cx/C,OAAOsG,GAAMwyB,GAAK6f,EAAK7E,GAAMA,EAAI5D,EAAI4D,GAAI7d,QAAO,SAASrwB,GAAK,OAAO,GAAIA,EAAIugH,GAAM,EAAS,IAAGvmH,IAAIgG,IACnG5F,OAAOsG,GAAMwyB,GAAKkE,EAAK+W,GAAMA,EAAIt/B,EAAIs/B,GAAI9d,QAAO,SAASzzB,GAAK,OAAO,GAAIA,EAAI4jH,GAAM,EAAS,IAAGxmH,IAAI4C,GAC1G,CAoEA,OAlEA0jH,EAAU3pF,MAAQ,WAChB,OAAOA,IAAQ38B,KAAI,SAAS0xC,GAAe,MAAO,CAACh5B,KAAM,aAAcg5B,YAAaA,EAAc,GACpG,EAEA40E,EAAUG,QAAU,WAClB,MAAO,CACL/tG,KAAM,UACNg5B,YAAa,CACXiO,EAAE+9D,GAAIt9G,OACNw/C,EAAEk+D,GAAI/mG,MAAM,GACZ4oC,EAAEk+D,GAAIpiG,UAAU1E,MAAM,GACtB6oC,EAAE+9D,GAAIliG,UAAU1E,MAAM,KAG5B,EAEAuvG,EAAUprC,OAAS,SAASn4E,GAC1B,OAAKoa,UAAU9c,OACRimH,EAAUI,YAAY3jH,GAAG4jH,YAAY5jH,GADdujH,EAAUK,aAE1C,EAEAL,EAAUI,YAAc,SAAS3jH,GAC/B,OAAKoa,UAAU9c,QACfq9G,GAAM36G,EAAE,GAAG,GAAI86G,GAAM96G,EAAE,GAAG,GAC1B46G,GAAM56G,EAAE,GAAG,GAAI+6G,GAAM/6G,EAAE,GAAG,GACtB26G,EAAKG,IAAI96G,EAAI26G,EAAIA,EAAKG,EAAIA,EAAK96G,GAC/B46G,EAAKG,IAAI/6G,EAAI46G,EAAIA,EAAKG,EAAIA,EAAK/6G,GAC5BujH,EAAU5wC,UAAUA,IALG,CAAC,CAACgoC,EAAIC,GAAK,CAACE,EAAIC,GAMhD,EAEAwI,EAAUK,YAAc,SAAS5jH,GAC/B,OAAKoa,UAAU9c,QACf04C,GAAMh2C,EAAE,GAAG,GAAIutC,GAAMvtC,EAAE,GAAG,GAC1Bq6B,GAAMr6B,EAAE,GAAG,GAAI8R,GAAM9R,EAAE,GAAG,GACtBg2C,EAAKzI,IAAIvtC,EAAIg2C,EAAIA,EAAKzI,EAAIA,EAAKvtC,GAC/Bq6B,EAAKvoB,IAAI9R,EAAIq6B,EAAIA,EAAKvoB,EAAIA,EAAK9R,GAC5BujH,EAAU5wC,UAAUA,IALG,CAAC,CAAC38B,EAAI3b,GAAK,CAACkT,EAAIz7B,GAMhD,EAEAyxG,EAAUtiH,KAAO,SAASjB,GACxB,OAAKoa,UAAU9c,OACRimH,EAAUM,UAAU7jH,GAAG8jH,UAAU9jH,GADVujH,EAAUO,WAE1C,EAEAP,EAAUM,UAAY,SAAS7jH,GAC7B,OAAKoa,UAAU9c,QACfkmH,GAAMxjH,EAAE,GAAIyjH,GAAMzjH,EAAE,GACbujH,GAFuB,CAACC,EAAIC,EAGrC,EAEAF,EAAUO,UAAY,SAAS9jH,GAC7B,OAAKoa,UAAU9c,QACf6zC,GAAMnxC,EAAE,GAAIoxC,GAAMpxC,EAAE,GACbujH,GAFuB,CAACpyE,EAAIC,EAGrC,EAEAmyE,EAAU5wC,UAAY,SAAS3yE,GAC7B,OAAKoa,UAAU9c,QACfq1E,GAAa3yE,EACbiD,EAAIogH,GAAWhpF,EAAIvoB,EAAI,IACvBjS,EAAIyjH,GAAWttE,EAAIzI,EAAIolC,GACvB/1B,EAAIymE,GAAWzI,EAAIG,EAAI,IACvBl+D,EAAIymE,GAAW3I,EAAIG,EAAInoC,GAChB4wC,GANuB5wC,CAOhC,EAEO4wC,EACFI,YAAY,CAAC,EAAE,KAAM,GAAK,IAAU,CAAC,IAAK,GAAK,MAC/CC,YAAY,CAAC,EAAE,KAAM,GAAK,IAAU,CAAC,IAAK,GAAK,KACtD,CAEO,SAASG,KACd,OAAOR,MACT,CCtGe,YAAShiH,EAAGC,GACzB,IAAIw0C,EAAKz0C,EAAE,GAAK,GACZ84B,EAAK94B,EAAE,GAAK,GACZgsC,EAAK/rC,EAAE,GAAK,GACZsQ,EAAKtQ,EAAE,GAAK,GACZwiH,EAAM,GAAI3pF,GACVkuE,EAAM,GAAIluE,GACV4pF,EAAM,GAAInyG,GACV22F,EAAM,GAAI32F,GACVoyG,EAAMF,EAAM,GAAIhuE,GAChBmuE,EAAMH,EAAM,GAAIhuE,GAChBouE,EAAMH,EAAM,GAAI12E,GAChB82E,EAAMJ,EAAM,GAAI12E,GAChB/oC,EAAI,EAAIusG,GAAKhkG,GAAKsqG,GAASvlG,EAAKuoB,GAAM2pF,EAAMC,EAAM5M,GAAS9pE,EAAKyI,KAChEh4C,EAAI,GAAIwG,GAERouF,EAAcpuF,EAAI,SAAS1E,GAC7B,IAAI8J,EAAI,GAAI9J,GAAK0E,GAAKxG,EAClBgiD,EAAI,GAAIx7C,EAAI1E,GAAK9B,EACjBiF,EAAI+8C,EAAIkkE,EAAMt6G,EAAIw6G,EAClBvkH,EAAImgD,EAAImkE,EAAMv6G,EAAIy6G,EAClBnoC,EAAIl8B,EAAIuoD,EAAM3+F,EAAI6+F,EACtB,MAAO,CACL/7D,GAAM7sC,EAAGoD,GAAK,GACdypC,GAAMwvC,EAAGnvE,GAAK9J,EAAIA,EAAIpD,EAAIA,IAAM,GAEpC,EAAI,WACF,MAAO,CAACm2C,EAAK,GAAS3b,EAAK,GAC7B,EAIA,OAFAu4D,EAAYz9D,SAAW3wB,EAEhBouF,CACT,CCnCA,SAAe3vF,GAAKA,ECIpB,IAEIqhH,GACAC,GACA,GACA,GALA,GAAU,IAAInsC,EACd,GAAc,IAAIA,EAMlB,GAAa,CACflxE,MAAO,GACPymC,UAAW,GACXC,QAAS,GACT2qE,aAAc,WACZ,GAAW5qE,UAAY,GACvB,GAAWC,QAAU,EACvB,EACA4qE,WAAY,WACV,GAAW7qE,UAAY,GAAWC,QAAU,GAAW1mC,MAAQ,GAC/D,GAAQpE,IAAI,GAAI,KAChB,GAAc,IAAIs1E,CACpB,EACA7uD,OAAQ,WACN,IAAI23E,EAAO,GAAU,EAErB,OADA,GAAU,IAAI9oB,EACP8oB,CACT,GAGF,SAAS,KACP,GAAWh6F,MAAQ,EACrB,CAEA,SAAS,GAAejE,EAAGpD,GACzB,GAAWqH,MAAQ,GACnBo9G,GAAM,GAAKrhH,EAAGshH,GAAM,GAAK1kH,CAC3B,CAEA,SAAS,GAAUoD,EAAGpD,GACpB,GAAYiD,IAAI,GAAKG,EAAI,GAAKpD,GAC9B,GAAKoD,EAAG,GAAKpD,CACf,CAEA,SAAS,KACP,GAAUykH,GAAKC,GACjB,CAEA,YC/CA,IAAI,GAAKluE,IACL,GAAK,GACL9I,IAAM,GACNz7B,GAAKy7B,GAEL,GAAe,CACjBrmC,MAYF,SAAqBjE,EAAGpD,GAClBoD,EAAI,KAAI,GAAKA,GACbA,EAAIsqC,KAAIA,GAAKtqC,GACbpD,EAAI,KAAI,GAAKA,GACbA,EAAIiS,KAAIA,GAAKjS,EACnB,EAhBE8tC,UAAW,GACXC,QAAS,GACT2qE,aAAc,GACdC,WAAY,GACZjvF,OAAQ,WACN,IAAIkgF,EAAS,CAAC,CAAC,GAAI,IAAK,CAACl8D,GAAIz7B,KAE7B,OADAy7B,GAAKz7B,KAAO,GAAK,GAAKukC,KACfozD,CACT,GAUF,YCvBA,IASI,GACA,GACA,GACA,GAZA,GAAK,EACL,GAAK,EACL,GAAK,EACL,GAAK,EACL,GAAK,EACL,GAAK,EACL,GAAK,EACL,GAAK,EACL,GAAK,EAML,GAAiB,CACnBviG,MAAO,GACPymC,UAAW,GACXC,QAAS,GACT2qE,aAAc,WACZ,GAAe5qE,UAAY,GAC3B,GAAeC,QAAU,EAC3B,EACA4qE,WAAY,WACV,GAAetxG,MAAQ,GACvB,GAAeymC,UAAY,GAC3B,GAAeC,QAAU,EAC3B,EACArkB,OAAQ,WACN,IAAI8K,EAAW,GAAK,CAAC,GAAK,GAAI,GAAK,IAC7B,GAAK,CAAC,GAAK,GAAI,GAAK,IACpB,GAAK,CAAC,GAAK,GAAI,GAAK,IACpB,CAACiX,IAAKA,KAIZ,OAHA,GAAK,GAAK,GACV,GAAK,GAAK,GACV,GAAK,GAAK,GAAK,EACRjX,CACT,GAGF,SAAS,GAAcpxB,EAAGpD,GACxB,IAAMoD,EACN,IAAMpD,IACJ,EACJ,CAEA,SAAS,KACP,GAAeqH,MAAQs9G,EACzB,CAEA,SAASA,GAAuBvhH,EAAGpD,GACjC,GAAeqH,MAAQu9G,GACvB,GAAc,GAAKxhH,EAAG,GAAKpD,EAC7B,CAEA,SAAS4kH,GAAkBxhH,EAAGpD,GAC5B,IAAIsxC,EAAKluC,EAAI,GAAImuC,EAAKvxC,EAAI,GAAIq8E,EAAInvE,GAAKokC,EAAKA,EAAKC,EAAKA,GACtD,IAAM8qC,GAAK,GAAKj5E,GAAK,EACrB,IAAMi5E,GAAK,GAAKr8E,GAAK,EACrB,IAAMq8E,EACN,GAAc,GAAKj5E,EAAG,GAAKpD,EAC7B,CAEA,SAAS,KACP,GAAeqH,MAAQ,EACzB,CAEA,SAAS,KACP,GAAeA,MAAQw9G,EACzB,CAEA,SAAS,KACPC,GAAkB,GAAK,GACzB,CAEA,SAASD,GAAuBzhH,EAAGpD,GACjC,GAAeqH,MAAQy9G,GACvB,GAAc,GAAM,GAAK1hH,EAAG,GAAM,GAAKpD,EACzC,CAEA,SAAS8kH,GAAkB1hH,EAAGpD,GAC5B,IAAIsxC,EAAKluC,EAAI,GACTmuC,EAAKvxC,EAAI,GACTq8E,EAAInvE,GAAKokC,EAAKA,EAAKC,EAAKA,GAE5B,IAAM8qC,GAAK,GAAKj5E,GAAK,EACrB,IAAMi5E,GAAK,GAAKr8E,GAAK,EACrB,IAAMq8E,EAGN,KADAA,EAAI,GAAKj5E,EAAI,GAAKpD,IACP,GAAKoD,GAChB,IAAMi5E,GAAK,GAAKr8E,GAChB,IAAU,EAAJq8E,EACN,GAAc,GAAKj5E,EAAG,GAAKpD,EAC7B,CAEA,YChGe,SAAS+kH,GAAYl7E,GAClC1sC,KAAK6nH,SAAWn7E,CAClB,CAEAk7E,GAAY/hH,UAAY,CACtBiiH,QAAS,IACTC,YAAa,SAAS/kH,GACpB,OAAOhD,KAAK8nH,QAAU9kH,EAAGhD,IAC3B,EACAu7G,aAAc,WACZv7G,KAAKgoH,MAAQ,CACf,EACAxM,WAAY,WACVx7G,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACY,IAAf5wC,KAAKgoH,OAAahoH,KAAK6nH,SAAS9xD,YACpC/1D,KAAKioH,OAAS35E,GAChB,EACApkC,MAAO,SAASjE,EAAGpD,GACjB,OAAQ7C,KAAKioH,QACX,KAAK,EACHjoH,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GACxB7C,KAAKioH,OAAS,EACd,MAEF,KAAK,EACHjoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GACxB,MAEF,QACE7C,KAAK6nH,SAAShyD,OAAO5vD,EAAIjG,KAAK8nH,QAASjlH,GACvC7C,KAAK6nH,SAASp/C,IAAIxiE,EAAGpD,EAAG7C,KAAK8nH,QAAS,EAAG,IAI/C,EACAv7F,OAAQ,ICvCV,IACI27F,GACA,GACA,GACA,GACA,GALA,GAAY,IAAI9sC,EAOhB,GAAe,CACjBlxE,MAAO,GACPymC,UAAW,WACT,GAAazmC,MAAQ,EACvB,EACA0mC,QAAS,WACHs3E,IAAY,GAAY,GAAK,IACjC,GAAah+G,MAAQ,EACvB,EACAqxG,aAAc,WACZ2M,IAAa,CACf,EACA1M,WAAY,WACV0M,GAAa,IACf,EACA37F,OAAQ,WACN,IAAIjsB,GAAU,GAEd,OADA,GAAY,IAAI86E,EACT96E,CACT,GAGF,SAAS,GAAiB2F,EAAGpD,GAC3B,GAAaqH,MAAQ,GACrB,GAAM,GAAKjE,EAAG,GAAM,GAAKpD,CAC3B,CAEA,SAAS,GAAYoD,EAAGpD,GACtB,IAAMoD,EAAG,IAAMpD,EACf,GAAUiD,IAAIiK,GAAK,GAAK,GAAK,GAAK,KAClC,GAAK9J,EAAG,GAAKpD,CACf,CAEA,YC3CA,IAAIslH,GAAaC,GAAaC,GAAaC,GAE5B,MAAMC,GACnB,WAAAt9G,CAAYozF,GACVr+F,KAAK0+F,QAAoB,MAAVL,EAAiB,GAgEpC,SAAqBA,GACnB,MAAM72F,EAAImC,KAAKC,MAAMy0F,GACrB,KAAM72F,GAAK,GAAI,MAAM,IAAIsyE,WAAW,mBAAmBukB,KACvD,GAAI72F,EAAI,GAAI,OAAO,GACnB,GAAIA,IAAM2gH,GAAa,CACrB,MAAMnnH,EAAI,IAAMwG,EAChB2gH,GAAc3gH,EACd4gH,GAAc,SAAgBjqB,GAC5B,IAAI39F,EAAI,EACRR,KAAKgD,GAAKm7F,EAAQ,GAClB,IAAK,MAAMr0F,EAAIq0F,EAAQ79F,OAAQE,EAAIsJ,IAAKtJ,EACtCR,KAAKgD,GAAK2G,KAAKwB,MAAMiS,UAAU5c,GAAKQ,GAAKA,EAAIm9F,EAAQ39F,EAEzD,CACF,CACA,OAAO4nH,EACT,CAhF6C,CAAY/pB,GACrDr+F,KAAK8nH,QAAU,IACf9nH,KAAKgD,EAAI,EACX,CACA,WAAA+kH,CAAY/kH,GAEV,OADAhD,KAAK8nH,SAAW9kH,EACThD,IACT,CACA,YAAAu7G,GACEv7G,KAAKgoH,MAAQ,CACf,CACA,UAAAxM,GACEx7G,KAAKgoH,MAAQ15E,GACf,CACA,SAAAqC,GACE3wC,KAAKioH,OAAS,CAChB,CACA,OAAAr3E,GACqB,IAAf5wC,KAAKgoH,QAAahoH,KAAKgD,GAAK,KAChChD,KAAKioH,OAAS35E,GAChB,CACA,KAAApkC,CAAMjE,EAAGpD,GACP,OAAQ7C,KAAKioH,QACX,KAAK,EACHjoH,KAAK0+F,OAAO,IAAIz4F,KAAKpD,IACrB7C,KAAKioH,OAAS,EACd,MAEF,KAAK,EACHjoH,KAAK0+F,OAAO,IAAIz4F,KAAKpD,IACrB,MAEF,QAEE,GADA7C,KAAK0+F,OAAO,IAAIz4F,KAAKpD,IACjB7C,KAAK8nH,UAAYO,IAAeroH,KAAK0+F,UAAY0pB,GAAa,CAChE,MAAMvjH,EAAI7E,KAAK8nH,QACTjnE,EAAI7gD,KAAKgD,EACfhD,KAAKgD,EAAI,GACThD,KAAK0+F,OAAO,MAAM75F,KAAKA,KAAKA,cAAc,EAAIA,KAAKA,KAAKA,aAAa,EAAIA,KACzEwjH,GAAcxjH,EACdujH,GAAcpoH,KAAK0+F,QACnB4pB,GAActoH,KAAKgD,EACnBhD,KAAKgD,EAAI69C,CACX,CACA7gD,KAAKgD,GAAKslH,GAIhB,CACA,MAAA/7F,GACE,MAAMA,EAASvsB,KAAKgD,EAEpB,OADAhD,KAAKgD,EAAI,GACFupB,EAAOjsB,OAASisB,EAAS,IAClC,EAGF,SAAS,GAAO4xE,GACd,IAAI39F,EAAI,EACRR,KAAKgD,GAAKm7F,EAAQ,GAClB,IAAK,MAAMr0F,EAAIq0F,EAAQ79F,OAAQE,EAAIsJ,IAAKtJ,EACtCR,KAAKgD,GAAKoa,UAAU5c,GAAK29F,EAAQ39F,EAErC,CC1De,YAASgoH,EAAY97E,GAClC,IAEI+7E,EACAC,EAHArqB,EAAS,EACT0pB,EAAc,IAIlB,SAAS31E,EAAK9xB,GAKZ,OAJIA,IACyB,mBAAhBynG,GAA4BW,EAAcX,aAAaA,EAAY3nG,MAAMpgB,KAAMod,YAC1Fm9F,GAAOj6F,EAAQmoG,EAAiBC,KAE3BA,EAAcn8F,QACvB,CAqDA,OAnDA6lB,EAAK8xD,KAAO,SAAS5jF,GAEnB,OADAi6F,GAAOj6F,EAAQmoG,EAAiB,KACzB,GAASl8F,QAClB,EAEA6lB,EAAKwyB,QAAU,SAAStkD,GAEtB,OADAi6F,GAAOj6F,EAAQmoG,EAAiB,KACzB,GAAYl8F,QACrB,EAEA6lB,EAAKq6D,OAAS,SAASnsF,GAErB,OADAi6F,GAAOj6F,EAAQmoG,EAAiB,KACzB,GAAWl8F,QACpB,EAEA6lB,EAAK/a,SAAW,SAAS/W,GAEvB,OADAi6F,GAAOj6F,EAAQmoG,EAAiB,KACzB,GAAal8F,QACtB,EAEA6lB,EAAKo2E,WAAa,SAASxlH,GACzB,OAAKoa,UAAU9c,QACfmoH,EAAwB,MAALzlH,GAAawlH,EAAa,KAAM,KAAaA,EAAaxlH,GAAGu3G,OACzEnoE,GAFuBo2E,CAGhC,EAEAp2E,EAAK1F,QAAU,SAAS1pC,GACtB,OAAKoa,UAAU9c,QACfooH,EAAqB,MAAL1lH,GAAa0pC,EAAU,KAAM,IAAI67E,GAAWlqB,IAAW,IAAIupB,GAAYl7E,EAAU1pC,GACtE,mBAAhB+kH,GAA4BW,EAAcX,YAAYA,GAC1D31E,GAHuB1F,CAIhC,EAEA0F,EAAK21E,YAAc,SAAS/kH,GAC1B,OAAKoa,UAAU9c,QACfynH,EAA2B,mBAAN/kH,EAAmBA,GAAK0lH,EAAcX,aAAa/kH,IAAKA,GACtEovC,GAFuB21E,CAGhC,EAEA31E,EAAKisD,OAAS,SAASr7F,GACrB,IAAKoa,UAAU9c,OAAQ,OAAO+9F,EAC9B,GAAS,MAALr7F,EAAWq7F,EAAS,SACnB,CACH,MAAM72F,EAAImC,KAAKC,MAAM5G,GACrB,KAAMwE,GAAK,GAAI,MAAM,IAAIsyE,WAAW,mBAAmB92E,KACvDq7F,EAAS72F,CACX,CAEA,OADgB,OAAZklC,IAAkBg8E,EAAgB,IAAIH,GAAWlqB,IAC9CjsD,CACT,EAEOA,EAAKo2E,WAAWA,GAAYnqB,OAAOA,GAAQ3xD,QAAQA,EAC5D,CC3Ee,YAASi8E,GACtB,MAAO,CACLpO,OAAQqO,GAAYD,GAExB,CAEO,SAASC,GAAYD,GAC1B,OAAO,SAASpO,GACd,IAAI15D,EAAI,IAAIgoE,GACZ,IAAK,IAAI1kH,KAAOwkH,EAAS9nE,EAAE18C,GAAOwkH,EAAQxkH,GAE1C,OADA08C,EAAE05D,OAASA,EACJ15D,CACT,CACF,CAEA,SAASgoE,KAAmB,CCZ5B,SAASC,GAAIN,EAAYO,EAAWzoG,GAClC,IAAIq0C,EAAO6zD,EAAWQ,YAAcR,EAAWQ,aAM/C,OALAR,EAAWxvF,MAAM,KAAKiQ,UAAU,CAAC,EAAG,IACxB,MAAR0rB,GAAc6zD,EAAWQ,WAAW,MACxC,GAAU1oG,EAAQkoG,EAAWjO,OAAO,KACpCwO,EAAU,GAAax8F,UACX,MAARooC,GAAc6zD,EAAWQ,WAAWr0D,GACjC6zD,CACT,CAEO,SAASS,GAAUT,EAAYrtC,EAAQ76D,GAC5C,OAAOwoG,GAAIN,GAAY,SAAShkH,GAC9B,IAAIugD,EAAIo2B,EAAO,GAAG,GAAKA,EAAO,GAAG,GAC7BlvE,EAAIkvE,EAAO,GAAG,GAAKA,EAAO,GAAG,GAC7Bn6E,EAAI2I,KAAKzC,IAAI69C,GAAKvgD,EAAE,GAAG,GAAKA,EAAE,GAAG,IAAKyH,GAAKzH,EAAE,GAAG,GAAKA,EAAE,GAAG,KAC1DyB,GAAKk1E,EAAO,GAAG,IAAMp2B,EAAI/jD,GAAKwD,EAAE,GAAG,GAAKA,EAAE,GAAG,KAAO,EACpD3B,GAAKs4E,EAAO,GAAG,IAAMlvE,EAAIjL,GAAKwD,EAAE,GAAG,GAAKA,EAAE,GAAG,KAAO,EACxDgkH,EAAWxvF,MAAM,IAAMh4B,GAAGioC,UAAU,CAAChjC,EAAGpD,GAC1C,GAAGyd,EACL,CAEO,SAAS4oG,GAAQV,EAAYtgH,EAAMoY,GACxC,OAAO2oG,GAAUT,EAAY,CAAC,CAAC,EAAG,GAAItgH,GAAOoY,EAC/C,CAEO,SAAS6oG,GAASX,EAAY7lF,EAAOriB,GAC1C,OAAOwoG,GAAIN,GAAY,SAAShkH,GAC9B,IAAIugD,GAAKpiB,EACL3hC,EAAI+jD,GAAKvgD,EAAE,GAAG,GAAKA,EAAE,GAAG,IACxByB,GAAK8+C,EAAI/jD,GAAKwD,EAAE,GAAG,GAAKA,EAAE,GAAG,KAAO,EACpC3B,GAAK7B,EAAIwD,EAAE,GAAG,GAClBgkH,EAAWxvF,MAAM,IAAMh4B,GAAGioC,UAAU,CAAChjC,EAAGpD,GAC1C,GAAGyd,EACL,CAEO,SAAS8oG,GAAUZ,EAAY3lF,EAAQviB,GAC5C,OAAOwoG,GAAIN,GAAY,SAAShkH,GAC9B,IAAIyH,GAAK42B,EACL7hC,EAAIiL,GAAKzH,EAAE,GAAG,GAAKA,EAAE,GAAG,IACxByB,GAAKjF,EAAIwD,EAAE,GAAG,GACd3B,GAAKoJ,EAAIjL,GAAKwD,EAAE,GAAG,GAAKA,EAAE,GAAG,KAAO,EACxCgkH,EAAWxvF,MAAM,IAAMh4B,GAAGioC,UAAU,CAAChjC,EAAGpD,GAC1C,GAAGyd,EACL,CD7BAuoG,GAAgBhjH,UAAY,CAC1BoF,YAAa49G,GACb3+G,MAAO,SAASjE,EAAGpD,GAAK7C,KAAKu6G,OAAOrwG,MAAMjE,EAAGpD,EAAI,EACjDg4G,OAAQ,WAAa76G,KAAKu6G,OAAOM,QAAU,EAC3ClqE,UAAW,WAAa3wC,KAAKu6G,OAAO5pE,WAAa,EACjDC,QAAS,WAAa5wC,KAAKu6G,OAAO3pE,SAAW,EAC7C2qE,aAAc,WAAav7G,KAAKu6G,OAAOgB,cAAgB,EACvDC,WAAY,WAAax7G,KAAKu6G,OAAOiB,YAAc,GEpBrD,IAAI6N,GAAW,GACXC,GAAiB,GAAI,GAAK,IAEf,YAASC,EAASC,GAC/B,OAAQA,EAYV,SAAkBD,EAASC,GAEzB,SAASC,EAAezwE,EAAI3b,EAAIs+E,EAASjc,EAAI2I,EAAIgC,EAAI95D,EAAIz7B,EAAIinG,EAAS3zC,EAAI99D,EAAIigG,EAAImf,EAAOnP,GACvF,IAAIpmE,EAAK5D,EAAKyI,EACV5E,EAAKt/B,EAAKuoB,EACV5mB,EAAK09B,EAAKA,EAAKC,EAAKA,EACxB,GAAI39B,EAAK,EAAI+yG,GAAUE,IAAS,CAC9B,IAAInlH,EAAIm7F,EAAKt3B,EACT5jE,EAAI6jG,EAAK/9F,EACT2D,EAAIo8F,EAAKE,EACTzoD,EAAI/xC,GAAKxL,EAAIA,EAAIC,EAAIA,EAAIyJ,EAAIA,GAC7Bm0C,EAAO2xD,GAAK9lG,GAAK6zC,GACjBk6D,EAAU,GAAI,GAAI/tG,GAAK,GAAK,IAAW,GAAI0tG,EAAUI,GAAW,IAAWJ,EAAUI,GAAW,EAAIrsE,GAAMlrC,EAAGD,GAC7GwD,EAAIwhH,EAAQvN,EAAS55D,GACrB5R,EAAKzoC,EAAE,GACPgN,EAAKhN,EAAE,GACP4hH,EAAMn5E,EAAKwI,EACX4wE,EAAM70G,EAAKsoB,EACXwsF,EAAKz1E,EAAKu1E,EAAMx1E,EAAKy1E,GACrBC,EAAKA,EAAKpzG,EAAK+yG,GACZ,IAAKr1E,EAAKw1E,EAAMv1E,EAAKw1E,GAAOnzG,EAAK,IAAO,IACxCipF,EAAKt3B,EAAKigC,EAAK/9F,EAAK+/F,EAAKE,EAAK+e,MACnCG,EAAezwE,EAAI3b,EAAIs+E,EAASjc,EAAI2I,EAAIgC,EAAI75D,EAAIz7B,EAAIinG,EAASz3G,GAAKu9C,EAAGt9C,GAAKs9C,EAAG7zC,EAAGy7G,EAAOnP,GACvFA,EAAOrwG,MAAMsmC,EAAIz7B,GACjB00G,EAAej5E,EAAIz7B,EAAIinG,EAASz3G,EAAGC,EAAGyJ,EAAGsiC,EAAIz7B,EAAIinG,EAAS3zC,EAAI99D,EAAIigG,EAAImf,EAAOnP,GAEjF,CACF,CACA,OAAO,SAASA,GACd,IAAIkB,EAAU6L,EAAKC,EAAKuC,EAAKC,EAAKC,EAC9BrO,EAAS3iE,EAAI3b,EAAIqiE,EAAI2I,EAAIgC,EAEzB4f,EAAiB,CACnB//G,MAAOA,EACPymC,UAAWA,EACXC,QAASA,EACT2qE,aAAc,WAAahB,EAAOgB,eAAgB0O,EAAet5E,UAAY8xE,CAAW,EACxFjH,WAAY,WAAajB,EAAOiB,aAAcyO,EAAet5E,UAAYA,CAAW,GAGtF,SAASzmC,EAAMjE,EAAGpD,GAChBoD,EAAIsjH,EAAQtjH,EAAGpD,GACf03G,EAAOrwG,MAAMjE,EAAE,GAAIA,EAAE,GACvB,CAEA,SAAS0qC,IACPqI,EAAK1K,IACL27E,EAAe//G,MAAQ00G,EACvBrE,EAAO5pE,WACT,CAEA,SAASiuE,EAAUjC,EAAQC,GACzB,IAAI3uG,EAAIkvG,GAAU,CAACR,EAAQC,IAAO70G,EAAIwhH,EAAQ5M,EAAQC,GACtD6M,EAAezwE,EAAI3b,EAAIs+E,EAASjc,EAAI2I,EAAIgC,EAAIrxD,EAAKjxC,EAAE,GAAIs1B,EAAKt1B,EAAE,GAAI4zG,EAAUgB,EAAQjd,EAAKzxF,EAAE,GAAIo6F,EAAKp6F,EAAE,GAAIo8F,EAAKp8F,EAAE,GAAIo7G,GAAU9O,GAC/HA,EAAOrwG,MAAM8uC,EAAI3b,EACnB,CAEA,SAASuT,IACPq5E,EAAe//G,MAAQA,EACvBqwG,EAAO3pE,SACT,CAEA,SAAS6xE,IACP9xE,IACAs5E,EAAe//G,MAAQggH,EACvBD,EAAer5E,QAAU8xE,CAC3B,CAEA,SAASwH,EAAUvN,EAAQC,GACzBgC,EAAUnD,EAAWkB,EAAQC,GAAM0K,EAAMtuE,EAAIuuE,EAAMlqF,EAAIysF,EAAMpqB,EAAIqqB,EAAM1hB,EAAI2hB,EAAM3f,EACjF4f,EAAe//G,MAAQ00G,CACzB,CAEA,SAAS8D,IACP+G,EAAezwE,EAAI3b,EAAIs+E,EAASjc,EAAI2I,EAAIgC,EAAIid,EAAKC,EAAK9L,EAAUqO,EAAKC,EAAKC,EAAKX,GAAU9O,GACzF0P,EAAer5E,QAAUA,EACzBA,GACF,CAEA,OAAOq5E,CACT,CACF,CA7FmB,CAASV,EAASC,GAGrC,SAAsBD,GACpB,OAAOX,GAAY,CACjB1+G,MAAO,SAASjE,EAAGpD,GACjBoD,EAAIsjH,EAAQtjH,EAAGpD,GACf7C,KAAKu6G,OAAOrwG,MAAMjE,EAAE,GAAIA,EAAE,GAC5B,GAEJ,CAV+CkkH,CAAaZ,EAC5D,CCEA,IAAIa,GAAmBxB,GAAY,CACjC1+G,MAAO,SAASjE,EAAGpD,GACjB7C,KAAKu6G,OAAOrwG,MAAMjE,EAAI,GAASpD,EAAI,GACrC,IAuBF,SAASwnH,GAAqBrpH,EAAGmzC,EAAIC,EAAIjE,EAAIC,EAAIzvB,GAC/C,IAAKA,EAAO,OAZd,SAAwB3f,EAAGmzC,EAAIC,EAAIjE,EAAIC,GACrC,SAAS1I,EAAUzhC,EAAGpD,GAEpB,MAAO,CAACsxC,EAAKnzC,GADbiF,GAAKkqC,GACeiE,EAAKpzC,GADhB6B,GAAKutC,GAEhB,CAIA,OAHA1I,EAAU04E,OAAS,SAASn6G,EAAGpD,GAC7B,MAAO,EAAEoD,EAAIkuC,GAAMnzC,EAAImvC,GAAKiE,EAAKvxC,GAAK7B,EAAIovC,EAC5C,EACO1I,CACT,CAGqB4iF,CAAetpH,EAAGmzC,EAAIC,EAAIjE,EAAIC,GACjD,IAAIm6E,EAAW,GAAI5pG,GACf6pG,EAAW,GAAI7pG,GACfpc,EAAIgmH,EAAWvpH,EACfwD,EAAIgmH,EAAWxpH,EACf6pG,EAAK0f,EAAWvpH,EAChBuwF,EAAKi5B,EAAWxpH,EAChB0pG,GAAM8f,EAAWp2E,EAAKm2E,EAAWp2E,GAAMnzC,EACvCypH,GAAMD,EAAWr2E,EAAKo2E,EAAWn2E,GAAMpzC,EAC3C,SAAS0mC,EAAUzhC,EAAGpD,GAEpB,MAAO,CAAC0B,GADR0B,GAAKkqC,GACW3rC,GADP3B,GAAKutC,GACU+D,EAAIC,EAAK5vC,EAAIyB,EAAI1B,EAAI1B,EAC/C,CAIA,OAHA6kC,EAAU04E,OAAS,SAASn6G,EAAGpD,GAC7B,MAAO,CAACstC,GAAM06D,EAAK5kG,EAAIsrF,EAAK1uF,EAAI6nG,GAAKt6D,GAAMq6E,EAAKl5B,EAAKtrF,EAAI4kG,EAAKhoG,GAChE,EACO6kC,CACT,CAEe,SAAS8gF,GAAWe,GACjC,OAAOmB,IAAkB,WAAa,OAAOnB,CAAS,GAA/CmB,EACT,CAEO,SAASA,GAAkBC,GAChC,IAAIpB,EAI+C/jE,EAKpCnoB,EAAIkT,EAAIz7B,EAEnB81G,EACAC,EACAC,EACAz4G,EACAgzG,EAdArkH,EAAI,IACJiF,EAAI,IAAKpD,EAAI,IACb85G,EAAS,EAAGC,EAAM,EAClB2D,EAAc,EAAGC,EAAW,EAAGC,EAAa,EAC5C9/F,EAAQ,EACRwvB,EAAK,EACLC,EAAK,EACLihC,EAAQ,KAAM05C,EAAU,GACxB/xE,EAAK,KAAkBgyE,EAAW,GAClCxB,EAAS,GAOb,SAAShB,EAAWt+G,GAClB,OAAO4gH,EAAuB5gH,EAAM,GAAK,GAASA,EAAM,GAAK,GAC/D,CAEA,SAASk2G,EAAOl2G,GAEd,OADAA,EAAQ4gH,EAAuB1K,OAAOl2G,EAAM,GAAIA,EAAM,MACtC,CAACA,EAAM,GAAK,GAASA,EAAM,GAAK,GAClD,CAsEA,SAAS+gH,IACP,IAAIzxC,EAAS6wC,GAAqBrpH,EAAG,EAAG,EAAGmvC,EAAIC,EAAIzvB,GAAOP,MAAM,KAAMmpG,EAAQ5M,EAAQC,IAClFl1E,EAAY2iF,GAAqBrpH,EAAGiF,EAAIuzE,EAAO,GAAI32E,EAAI22E,EAAO,GAAIrpC,EAAIC,EAAIzvB,GAK9E,OAJA6kC,EAAS86D,GAAcC,EAAaC,EAAUC,GAC9CoK,EAAmB1K,GAAQoJ,EAAS7hF,GACpCojF,EAAyB3K,GAAQ36D,EAAQqlE,GACzCD,EAAkBM,GAASL,EAAkBrB,GACtCh+G,GACT,CAEA,SAASA,IAEP,OADA6G,EAAQgzG,EAAc,KACfmD,CACT,CAEA,OAnFAA,EAAWjO,OAAS,SAASA,GAC3B,OAAOloG,GAASgzG,IAAgB9K,EAASloG,EAAQA,EAAQ+3G,GAxE7D,SAAyB5kE,GACvB,OAAOojE,GAAY,CACjB1+G,MAAO,SAASjE,EAAGpD,GACjB,IAAIgC,EAAI2gD,EAAOv/C,EAAGpD,GAClB,OAAO7C,KAAKu6G,OAAOrwG,MAAMrF,EAAE,GAAIA,EAAE,GACnC,GAEJ,CAiE8EsmH,CAAgB3lE,EAAhB2lE,CAAwBJ,EAAQH,EAAgBI,EAAS3F,EAAc9K,MACnJ,EAEAiO,EAAWuC,QAAU,SAAS/nH,GAC5B,OAAOoa,UAAU9c,QAAUyqH,EAAU/nH,EAAGquE,OAAQvwE,EAAW0K,KAAWu/G,CACxE,EAEAvC,EAAWwC,SAAW,SAAShoH,GAC7B,OAAOoa,UAAU9c,QAAU0qH,EAAWhoH,EAAGg2C,EAAK3b,EAAKkT,EAAKz7B,EAAK,KAAMtJ,KAAWw/G,CAChF,EAEAxC,EAAW4C,UAAY,SAASpoH,GAC9B,OAAOoa,UAAU9c,QAAUyqH,GAAW/nH,EAAI,GAAWquE,EAAQruE,EAAI,KAAYquE,EAAQ,KAAM,IAAmB7lE,KAAW6lE,EAAQ,EACnI,EAEAm3C,EAAWQ,WAAa,SAAShmH,GAC/B,OAAOoa,UAAU9c,QAAU0qH,EAAgB,MAALhoH,GAAag2C,EAAK3b,EAAKkT,EAAKz7B,EAAK,KAAM,IAAYwvG,GAActrE,GAAMh2C,EAAE,GAAG,GAAIq6B,GAAMr6B,EAAE,GAAG,GAAIutC,GAAMvtC,EAAE,GAAG,GAAI8R,GAAM9R,EAAE,GAAG,IAAKwI,KAAiB,MAANwtC,EAAa,KAAO,CAAC,CAACA,EAAI3b,GAAK,CAACkT,EAAIz7B,GACrN,EAEA0zG,EAAWxvF,MAAQ,SAASh2B,GAC1B,OAAOoa,UAAU9c,QAAUU,GAAKgC,EAAGioH,KAAcjqH,CACnD,EAEAwnH,EAAWv/E,UAAY,SAASjmC,GAC9B,OAAOoa,UAAU9c,QAAU2F,GAAKjD,EAAE,GAAIH,GAAKG,EAAE,GAAIioH,KAAc,CAAChlH,EAAGpD,EACrE,EAEA2lH,EAAWhvC,OAAS,SAASx2E,GAC3B,OAAOoa,UAAU9c,QAAUq8G,EAAS35G,EAAE,GAAK,IAAM,GAAS45G,EAAM55G,EAAE,GAAK,IAAM,GAASioH,KAAc,CAACtO,EAAS,GAASC,EAAM,GAC/H,EAEA4L,EAAWhjE,OAAS,SAASxiD,GAC3B,OAAOoa,UAAU9c,QAAUigH,EAAcv9G,EAAE,GAAK,IAAM,GAASw9G,EAAWx9G,EAAE,GAAK,IAAM,GAASy9G,EAAaz9G,EAAE1C,OAAS,EAAI0C,EAAE,GAAK,IAAM,GAAU,EAAGioH,KAAc,CAAC1K,EAAc,GAASC,EAAW,GAASC,EAAa,GAC/N,EAEA+H,EAAWn0E,MAAQ,SAASrxC,GAC1B,OAAOoa,UAAU9c,QAAUqgB,EAAQ3d,EAAI,IAAM,GAASioH,KAActqG,EAAQ,EAC9E,EAEA6nG,EAAW6C,SAAW,SAASroH,GAC7B,OAAOoa,UAAU9c,QAAU6vC,EAAKntC,GAAK,EAAI,EAAGioH,KAAc96E,EAAK,CACjE,EAEAq4E,EAAW8C,SAAW,SAAStoH,GAC7B,OAAOoa,UAAU9c,QAAU8vC,EAAKptC,GAAK,EAAI,EAAGioH,KAAc76E,EAAK,CACjE,EAEAo4E,EAAW7yC,UAAY,SAAS3yE,GAC9B,OAAOoa,UAAU9c,QAAUsqH,EAAkBM,GAASL,EAAkBrB,EAASxmH,EAAIA,GAAIwI,KAAWuE,GAAKy5G,EAC3G,EAEAhB,EAAWS,UAAY,SAAS9tC,EAAQ76D,GACtC,OAAO2oG,GAAUT,EAAYrtC,EAAQ76D,EACvC,EAEAkoG,EAAWU,QAAU,SAAShhH,EAAMoY,GAClC,OAAO4oG,GAAQV,EAAYtgH,EAAMoY,EACnC,EAEAkoG,EAAWW,SAAW,SAASxmF,EAAOriB,GACpC,OAAO6oG,GAASX,EAAY7lF,EAAOriB,EACrC,EAEAkoG,EAAWY,UAAY,SAASvmF,EAAQviB,GACtC,OAAO8oG,GAAUZ,EAAY3lF,EAAQviB,EACvC,EAiBO,WAGL,OAFAipG,EAAUoB,EAAUvqG,MAAMpgB,KAAMod,WAChCorG,EAAWpI,OAASmJ,EAAQnJ,QAAUA,EAC/B6K,GACT,CACF,CC7KO,SAASM,GAAgBZ,GAC9B,IAAI7O,EAAO,EACP35D,EAAO,GAAK,EACZL,EAAI4oE,GAAkBC,GACtB5iH,EAAI+5C,EAAEg6D,EAAM35D,GAMhB,OAJAp6C,EAAEyjH,UAAY,SAASxoH,GACrB,OAAOoa,UAAU9c,OAASwhD,EAAEg6D,EAAO94G,EAAE,GAAK,GAASm/C,EAAOn/C,EAAE,GAAK,IAAW,CAAC84G,EAAO,GAAS35D,EAAO,GACtG,EAEOp6C,CACT,CCVO,SAAS0jH,GAAkBpuF,EAAIvoB,GACpC,IAAIy2F,EAAM,GAAIluE,GAAK55B,GAAK8nG,EAAM,GAAIz2F,IAAO,EAGzC,GAAI,GAAIrR,GAAK,GAAS,OCNjB,SAAiCq4G,GACtC,IAAIF,EAAU,GAAIE,GAElB,SAASmF,EAAQtE,EAAQC,GACvB,MAAO,CAACD,EAASf,EAAS,GAAIgB,GAAOhB,EACvC,CAMA,OAJAqF,EAAQb,OAAS,SAASn6G,EAAGpD,GAC3B,MAAO,CAACoD,EAAI21G,EAAS7H,GAAKlxG,EAAI+4G,GAChC,EAEOqF,CACT,CDN+ByK,CAAwBruF,GAErD,IAAIpvB,EAAI,EAAIs9F,GAAO,EAAI9nG,EAAI8nG,GAAMogB,EAAK57G,GAAK9B,GAAKxK,EAEhD,SAAS8lH,EAAQtjH,EAAGpD,GAClB,IAAIgC,EAAIkL,GAAK9B,EAAI,EAAIxK,EAAI,GAAIZ,IAAMY,EACnC,MAAO,CAACoB,EAAI,GAAIoB,GAAKxC,GAAIkoH,EAAK9mH,EAAI,GAAIoB,GACxC,CAUA,OARAsjH,EAAQnJ,OAAS,SAASn6G,EAAGpD,GAC3B,IAAI+oH,EAAMD,EAAK9oH,EACX+B,EAAI8qC,GAAMzpC,EAAG,GAAI2lH,IAAQrnB,GAAKqnB,GAGlC,OAFIA,EAAMnoH,EAAI,IACZmB,GAAK,GAAK2/F,GAAKt+F,GAAKs+F,GAAKqnB,IACpB,CAAChnH,EAAInB,EAAGswG,IAAM9lG,GAAKhI,EAAIA,EAAI2lH,EAAMA,GAAOnoH,EAAIA,IAAM,EAAIA,IAC/D,EAEO8lH,CACT,CAEe,cACb,OAAOgC,GAAgBE,IAClBzyF,MAAM,SACNwgD,OAAO,CAAC,EAAG,SAClB,CE9Be,cACb,OAAOqyC,KACFL,UAAU,CAAC,KAAM,OACjBxyF,MAAM,MACNiQ,UAAU,CAAC,IAAK,MAChBuc,OAAO,CAAC,GAAI,IACZg0B,OAAO,EAAE,GAAK,MACrB,CCee,cACb,IAAInnE,EACAgzG,EACoByG,EAC+DC,EACDC,EAClF9hH,EAHA+hH,EAAUC,KACVC,EAASN,KAAiBrmE,OAAO,CAAC,IAAK,IAAIg0B,OAAO,EAAE,EAAG,OAAOgyC,UAAU,CAAC,GAAI,KAC7EY,EAASP,KAAiBrmE,OAAO,CAAC,IAAK,IAAIg0B,OAAO,EAAE,EAAG,OAAOgyC,UAAU,CAAC,EAAG,KACrEa,EAAc,CAACniH,MAAO,SAASjE,EAAGpD,GAAKqH,EAAQ,CAACjE,EAAGpD,EAAI,GAElE,SAASypH,EAAU36E,GACjB,IAAI1rC,EAAI0rC,EAAY,GAAI9uC,EAAI8uC,EAAY,GACxC,OAAOznC,EAAQ,KACV4hH,EAAa5hH,MAAMjE,EAAGpD,GAAIqH,IACvB6hH,EAAY7hH,MAAMjE,EAAGpD,GAAIqH,KACzB8hH,EAAY9hH,MAAMjE,EAAGpD,GAAIqH,EACnC,CAkEA,SAASsB,IAEP,OADA6G,EAAQgzG,EAAc,KACfiH,CACT,CAEA,OArEAA,EAAUlM,OAAS,SAASzuE,GAC1B,IAAI3wC,EAAIirH,EAAQjzF,QACZl2B,EAAImpH,EAAQhjF,YACZhjC,GAAK0rC,EAAY,GAAK7uC,EAAE,IAAM9B,EAC9B6B,GAAK8uC,EAAY,GAAK7uC,EAAE,IAAM9B,EAClC,OAAQ6B,GAAK,KAASA,EAAI,MAASoD,IAAM,MAASA,GAAK,KAAQkmH,EACzDtpH,GAAK,MAASA,EAAI,MAASoD,IAAM,MAASA,GAAK,KAAQmmH,EACvDH,GAAS7L,OAAOzuE,EACxB,EAEA26E,EAAU/R,OAAS,SAASA,GAC1B,OAAOloG,GAASgzG,IAAgB9K,EAASloG,GA5C1Bk6G,EA4CoD,CAACN,EAAQ1R,OAAO8K,EAAc9K,GAAS4R,EAAO5R,OAAOA,GAAS6R,EAAO7R,OAAOA,IA3C7I92G,EAAI8oH,EAAQjsH,OA2CmC+R,EA1C5C,CACLnI,MAAO,SAASjE,EAAGpD,GAAiB,IAAZ,IAAIrC,GAAK,IAAYA,EAAIiD,GAAG8oH,EAAQ/rH,GAAG0J,MAAMjE,EAAGpD,EAAI,EAC5Eg4G,OAAQ,WAAyB,IAAZ,IAAIr6G,GAAK,IAAYA,EAAIiD,GAAG8oH,EAAQ/rH,GAAGq6G,QAAU,EACtElqE,UAAW,WAAyB,IAAZ,IAAInwC,GAAK,IAAYA,EAAIiD,GAAG8oH,EAAQ/rH,GAAGmwC,WAAa,EAC5EC,QAAS,WAAyB,IAAZ,IAAIpwC,GAAK,IAAYA,EAAIiD,GAAG8oH,EAAQ/rH,GAAGowC,SAAW,EACxE2qE,aAAc,WAAyB,IAAZ,IAAI/6G,GAAK,IAAYA,EAAIiD,GAAG8oH,EAAQ/rH,GAAG+6G,cAAgB,EAClFC,WAAY,WAAyB,IAAZ,IAAIh7G,GAAK,IAAYA,EAAIiD,GAAG8oH,EAAQ/rH,GAAGg7G,YAAc,IARlF,IAAmB+Q,EACb9oH,CA4CJ,EAEA6oH,EAAU32C,UAAY,SAAS3yE,GAC7B,OAAKoa,UAAU9c,QACf2rH,EAAQt2C,UAAU3yE,GAAImpH,EAAOx2C,UAAU3yE,GAAIopH,EAAOz2C,UAAU3yE,GACrDwI,KAFuBygH,EAAQt2C,WAGxC,EAEA22C,EAAUtzF,MAAQ,SAASh2B,GACzB,OAAKoa,UAAU9c,QACf2rH,EAAQjzF,MAAMh2B,GAAImpH,EAAOnzF,MAAU,IAAJh2B,GAAWopH,EAAOpzF,MAAMh2B,GAChDspH,EAAUrjF,UAAUgjF,EAAQhjF,cAFLgjF,EAAQjzF,OAGxC,EAEAszF,EAAUrjF,UAAY,SAASjmC,GAC7B,IAAKoa,UAAU9c,OAAQ,OAAO2rH,EAAQhjF,YACtC,IAAIjoC,EAAIirH,EAAQjzF,QAAS/yB,GAAKjD,EAAE,GAAIH,GAAKG,EAAE,GAiB3C,OAfA8oH,EAAeG,EACVhjF,UAAUjmC,GACVgmH,WAAW,CAAC,CAAC/iH,EAAI,KAAQjF,EAAG6B,EAAI,KAAQ7B,GAAI,CAACiF,EAAI,KAAQjF,EAAG6B,EAAI,KAAQ7B,KACxEu5G,OAAO8R,GAEZN,EAAcI,EACTljF,UAAU,CAAChjC,EAAI,KAAQjF,EAAG6B,EAAI,KAAQ7B,IACtCgoH,WAAW,CAAC,CAAC/iH,EAAI,KAAQjF,EAAI,GAAS6B,EAAI,IAAQ7B,EAAI,IAAU,CAACiF,EAAI,KAAQjF,EAAI,GAAS6B,EAAI,KAAQ7B,EAAI,MAC1Gu5G,OAAO8R,GAEZL,EAAcI,EACTnjF,UAAU,CAAChjC,EAAI,KAAQjF,EAAG6B,EAAI,KAAQ7B,IACtCgoH,WAAW,CAAC,CAAC/iH,EAAI,KAAQjF,EAAI,GAAS6B,EAAI,KAAQ7B,EAAI,IAAU,CAACiF,EAAI,KAAQjF,EAAI,GAAS6B,EAAI,KAAQ7B,EAAI,MAC1Gu5G,OAAO8R,GAEL7gH,GACT,EAEA8gH,EAAUrD,UAAY,SAAS9tC,EAAQ76D,GACrC,OAAO2oG,GAAUqD,EAAWnxC,EAAQ76D,EACtC,EAEAgsG,EAAUpD,QAAU,SAAShhH,EAAMoY,GACjC,OAAO4oG,GAAQoD,EAAWpkH,EAAMoY,EAClC,EAEAgsG,EAAUnD,SAAW,SAASxmF,EAAOriB,GACnC,OAAO6oG,GAASmD,EAAW3pF,EAAOriB,EACpC,EAEAgsG,EAAUlD,UAAY,SAASvmF,EAAQviB,GACrC,OAAO8oG,GAAUkD,EAAWzpF,EAAQviB,EACtC,EAOOgsG,EAAUtzF,MAAM,KACzB,CC5GO,SAASwzF,GAAaxzF,GAC3B,OAAO,SAAS/yB,EAAGpD,GACjB,IAAIyK,EAAK,GAAIrH,GACTsH,EAAK,GAAI1K,GACT7B,EAAIg4B,EAAM1rB,EAAKC,GACf,OAAIvM,IAAMq4C,IAAiB,CAAC,EAAG,GAC5B,CACLr4C,EAAIuM,EAAK,GAAItH,GACbjF,EAAI,GAAI6B,GAEZ,CACF,CAEO,SAAS4pH,GAAgBp4E,GAC9B,OAAO,SAASpuC,EAAGpD,GACjB,IAAIq8E,EAAInvE,GAAK9J,EAAIA,EAAIpD,EAAIA,GACrBoL,EAAIomC,EAAM6qC,GACVl0D,EAAK,GAAI/c,GACTy+G,EAAK,GAAIz+G,GACb,MAAO,CACLyhC,GAAMzpC,EAAI+kB,EAAIk0D,EAAIwtC,GAClB3Y,GAAK70B,GAAKr8E,EAAImoB,EAAKk0D,GAEvB,CACF,CCtBO,IAAIytC,GAAwBH,IAAa,SAASI,GACvD,OAAO78G,GAAK,GAAK,EAAI68G,GACvB,IAMe,cACb,OAAOpE,GAAWmE,IACb3zF,MAAM,QACNoyF,UAAU,QACjB,CARAuB,GAAsBvM,OAASqM,IAAgB,SAASvtC,GACtD,OAAO,EAAI60B,GAAK70B,EAAI,EACtB,ICNO,IAAI2tC,GAA0BL,IAAa,SAASv+G,GACzD,OAAQA,EAAIqvC,GAAKrvC,KAAOA,EAAI,GAAIA,EAClC,IAMe,cACb,OAAOu6G,GAAWqE,IACb7zF,MAAM,SACNoyF,UAAU,QACjB,CCZO,SAAS0B,GAAYnQ,EAAQC,GAClC,MAAO,CAACD,EAAQ5qF,GAAI1I,IAAK,GAASuzF,GAAO,IAC3C,CAMe,cACb,OAAOmQ,GAAmBD,IACrB9zF,MAAM,IAAM,GACnB,CAEO,SAAS+zF,GAAmBxD,GACjC,IAKelsF,EAAIkT,EAAIz7B,EALnBgtC,EAAI0mE,GAAWe,GACf/vC,EAAS13B,EAAE03B,OACXxgD,EAAQ8oB,EAAE9oB,MACViQ,EAAY6Y,EAAE7Y,UACd+/E,EAAalnE,EAAEknE,WACfhwE,EAAK,KAkBT,SAASg0E,IACP,IAAIhsH,EAAI,GAAKg4B,IACTl2B,EAAIg/C,EAAE8vB,GAAS9vB,EAAE0D,UAAU46D,OAAO,CAAC,EAAG,KAC1C,OAAO4I,EAAiB,MAANhwE,EACZ,CAAC,CAACl2C,EAAE,GAAK9B,EAAG8B,EAAE,GAAK9B,GAAI,CAAC8B,EAAE,GAAK9B,EAAG8B,EAAE,GAAK9B,IAAMuoH,IAAYuD,GAC3D,CAAC,CAACnjH,KAAKvC,IAAItE,EAAE,GAAK9B,EAAGg4C,GAAK3b,GAAK,CAAC1zB,KAAKzC,IAAIpE,EAAE,GAAK9B,EAAGuvC,GAAKz7B,IACxD,CAAC,CAACkkC,EAAIrvC,KAAKvC,IAAItE,EAAE,GAAK9B,EAAGq8B,IAAM,CAACkT,EAAI5mC,KAAKzC,IAAIpE,EAAE,GAAK9B,EAAG8T,KAC/D,CAEA,OAzBAgtC,EAAE9oB,MAAQ,SAASh2B,GACjB,OAAOoa,UAAU9c,QAAU04B,EAAMh2B,GAAIgqH,KAAYh0F,GACnD,EAEA8oB,EAAE7Y,UAAY,SAASjmC,GACrB,OAAOoa,UAAU9c,QAAU2oC,EAAUjmC,GAAIgqH,KAAY/jF,GACvD,EAEA6Y,EAAE03B,OAAS,SAASx2E,GAClB,OAAOoa,UAAU9c,QAAUk5E,EAAOx2E,GAAIgqH,KAAYxzC,GACpD,EAEA13B,EAAEknE,WAAa,SAAShmH,GACtB,OAAOoa,UAAU9c,QAAgB,MAAL0C,EAAYg2C,EAAK3b,EAAKkT,EAAKz7B,EAAK,MAAQkkC,GAAMh2C,EAAE,GAAG,GAAIq6B,GAAMr6B,EAAE,GAAG,GAAIutC,GAAMvtC,EAAE,GAAG,GAAI8R,GAAM9R,EAAE,GAAG,IAAMgqH,KAAkB,MAANh0E,EAAa,KAAO,CAAC,CAACA,EAAI3b,GAAK,CAACkT,EAAIz7B,GACpL,EAWOk4G,GACT,CC/CA,SAASC,GAAKpqH,GACZ,OAAOwmB,IAAK,GAASxmB,GAAK,EAC5B,CAEO,SAASqqH,GAAkB7vF,EAAIvoB,GACpC,IAAIkyG,EAAM,GAAI3pF,GACV55B,EAAI45B,IAAOvoB,EAAK,GAAIuoB,GAAMtL,GAAIi1F,EAAM,GAAIlyG,IAAOid,GAAIk7F,GAAKn4G,GAAMm4G,GAAK5vF,IACnEz6B,EAAIokH,EAAM,GAAIiG,GAAK5vF,GAAK55B,GAAKA,EAEjC,IAAKA,EAAG,OAAOqpH,GAEf,SAASvD,EAAQtjH,EAAGpD,GACdD,EAAI,EAASC,GAAK,GAAS,KAASA,GAAK,GAAS,IAC3CA,EAAI,GAAS,KAASA,EAAI,GAAS,IAC9C,IAAIgC,EAAIjC,EAAI,GAAIqqH,GAAKpqH,GAAIY,GACzB,MAAO,CAACoB,EAAI,GAAIpB,EAAIwC,GAAIrD,EAAIiC,EAAI,GAAIpB,EAAIwC,GAC1C,CAUA,OARAsjH,EAAQnJ,OAAS,SAASn6G,EAAGpD,GAC3B,IAAIwtE,EAAKztE,EAAIC,EAAGgC,EAAI0/F,GAAK9gG,GAAKsM,GAAK9J,EAAIA,EAAIoqE,EAAKA,GAC9CzrE,EAAI8qC,GAAMzpC,EAAG,GAAIoqE,IAAOk0B,GAAKl0B,GAG/B,OAFIA,EAAK5sE,EAAI,IACXmB,GAAK,GAAK2/F,GAAKt+F,GAAKs+F,GAAKl0B,IACpB,CAACzrE,EAAInB,EAAG,EAAI4gD,GAAK,GAAIzhD,EAAIiC,EAAG,EAAIpB,IAAM,GAC/C,EAEO8lH,CACT,CAEe,cACb,OAAOgC,GAAgB2B,IAClBl0F,MAAM,OACNwyF,UAAU,CAAC,GAAI,IACtB,CCnCO,SAAS2B,GAAmBxQ,EAAQC,GACzC,MAAO,CAACD,EAAQC,EAClB,CAIe,cACb,OAAO4L,GAAW2E,IACbn0F,MAAM,OACb,CCPO,SAASo0F,GAAoB/vF,EAAIvoB,GACtC,IAAIkyG,EAAM,GAAI3pF,GACV55B,EAAI45B,IAAOvoB,EAAK,GAAIuoB,IAAO2pF,EAAM,GAAIlyG,KAAQA,EAAKuoB,GAClDt6B,EAAIikH,EAAMvjH,EAAI45B,EAElB,GAAI,GAAI55B,GAAK,GAAS,OAAO0pH,GAE7B,SAAS5D,EAAQtjH,EAAGpD,GAClB,IAAIwqH,EAAKtqH,EAAIF,EAAGyqH,EAAK7pH,EAAIwC,EACzB,MAAO,CAAConH,EAAK,GAAIC,GAAKvqH,EAAIsqH,EAAK,GAAIC,GACrC,CAUA,OARA/D,EAAQnJ,OAAS,SAASn6G,EAAGpD,GAC3B,IAAIwqH,EAAKtqH,EAAIF,EACT+B,EAAI8qC,GAAMzpC,EAAG,GAAIonH,IAAO9oB,GAAK8oB,GAGjC,OAFIA,EAAK5pH,EAAI,IACXmB,GAAK,GAAK2/F,GAAKt+F,GAAKs+F,GAAK8oB,IACpB,CAACzoH,EAAInB,EAAGV,EAAIwhG,GAAK9gG,GAAKsM,GAAK9J,EAAIA,EAAIonH,EAAKA,GACjD,EAEO9D,CACT,CAEe,cACb,OAAOgC,GAAgB6B,IAClBp0F,MAAM,SACNwgD,OAAO,CAAC,EAAG,SAClB,CJvBAqzC,GAAwBzM,OAASqM,IAAgB,SAASvtC,GACxD,OAAOA,CACT,ICFA4tC,GAAY1M,OAAS,SAASn6G,EAAGpD,GAC/B,MAAO,CAACoD,EAAG,EAAIo+C,GAAK9P,GAAI1xC,IAAM,GAChC,EEJAsqH,GAAmB/M,OAAS+M,GEH5B,IAAII,GAAK,SACLC,IAAM,QACNC,GAAK,OACLC,GAAK,QACLxqE,GAAInzC,GAAK,GAAK,EAGX,SAAS49G,GAAchR,EAAQC,GACpC,IAAIh4G,EAAImvG,GAAK7wD,GAAI,GAAI05D,IAAOr0G,EAAK3D,EAAIA,EAAGgpH,EAAKrlH,EAAKA,EAAKA,EACvD,MAAO,CACLo0G,EAAS,GAAI/3G,IAAMs+C,IAAKqqE,GAAK,EAAIC,GAAKjlH,EAAKqlH,GAAM,EAAIH,GAAK,EAAIC,GAAKnlH,KACnE3D,GAAK2oH,GAAKC,GAAKjlH,EAAKqlH,GAAMH,GAAKC,GAAKnlH,IAExC,CAgBe,cACb,OAAOigH,GAAWmF,IACb30F,MAAM,QACb,CC/BO,SAAS60F,GAAY5nH,EAAGpD,GAC7B,IAAI0K,EAAK,GAAI1K,GAAI7B,EAAI,GAAIiF,GAAKsH,EAC9B,MAAO,CAACA,EAAK,GAAItH,GAAKjF,EAAG,GAAI6B,GAAK7B,EACpC,CAIe,cACb,OAAOwnH,GAAWqF,IACb70F,MAAM,SACNoyF,UAAU,GACjB,CCTe,cACb,IACe5G,EAAIsJ,EACJzwF,EAAIkT,EAAIz7B,EASnBzC,EACAgzG,EAZArkH,EAAI,EAAG+3D,EAAK,EAAGC,EAAK,EAAG7oB,EAAK,EAAGC,EAAK,EACpCzvB,EAAQ,EACRq4B,EAAK,KACL+0E,EAAK,EAAGC,EAAK,EACbtmF,EAAYkhF,GAAY,CACtB1+G,MAAO,SAASjE,EAAGpD,GACjB,IAAIkF,EAAIygH,EAAW,CAACviH,EAAGpD,IACvB7C,KAAKu6G,OAAOrwG,MAAMnC,EAAE,GAAIA,EAAE,GAC5B,IAEFijH,EAAW,GAIf,SAASx/G,IAIP,OAHAuiH,EAAK/sH,EAAImvC,EACT69E,EAAKhtH,EAAIovC,EACT/9B,EAAQgzG,EAAc,KACfmD,CACT,CAEA,SAASA,EAAYzgH,GACnB,IAAI9B,EAAI8B,EAAE,GAAKgmH,EAAIlrH,EAAIkF,EAAE,GAAKimH,EAC9B,GAAIrtG,EAAO,CACT,IAAI7d,EAAID,EAAI2hH,EAAKv+G,EAAI6nH,EACrB7nH,EAAIA,EAAIu+G,EAAK3hH,EAAIirH,EACjBjrH,EAAIC,CACN,CACA,MAAO,CAACmD,EAAI8yD,EAAIl2D,EAAIm2D,EACtB,CA+CA,OA9CAwvD,EAAWpI,OAAS,SAASr4G,GAC3B,IAAI9B,EAAI8B,EAAE,GAAKgxD,EAAIl2D,EAAIkF,EAAE,GAAKixD,EAC9B,GAAIr4C,EAAO,CACT,IAAI7d,EAAID,EAAI2hH,EAAKv+G,EAAI6nH,EACrB7nH,EAAIA,EAAIu+G,EAAK3hH,EAAIirH,EACjBjrH,EAAIC,CACN,CACA,MAAO,CAACmD,EAAI8nH,EAAIlrH,EAAImrH,EACtB,EACAxF,EAAWjO,OAAS,SAASA,GAC3B,OAAOloG,GAASgzG,IAAgB9K,EAASloG,EAAQA,EAAQq1B,EAAUsjF,EAAS3F,EAAc9K,GAC5F,EACAiO,EAAWwC,SAAW,SAAShoH,GAC7B,OAAOoa,UAAU9c,QAAU0qH,EAAWhoH,EAAGg2C,EAAK3b,EAAKkT,EAAKz7B,EAAK,KAAMtJ,KAAWw/G,CAChF,EACAxC,EAAWQ,WAAa,SAAShmH,GAC/B,OAAOoa,UAAU9c,QAAU0qH,EAAgB,MAALhoH,GAAag2C,EAAK3b,EAAKkT,EAAKz7B,EAAK,KAAM,IAAYwvG,GAActrE,GAAMh2C,EAAE,GAAG,GAAIq6B,GAAMr6B,EAAE,GAAG,GAAIutC,GAAMvtC,EAAE,GAAG,GAAI8R,GAAM9R,EAAE,GAAG,IAAKwI,KAAiB,MAANwtC,EAAa,KAAO,CAAC,CAACA,EAAI3b,GAAK,CAACkT,EAAIz7B,GACrN,EACA0zG,EAAWxvF,MAAQ,SAASh2B,GAC1B,OAAOoa,UAAU9c,QAAUU,GAAKgC,EAAGwI,KAAWxK,CAChD,EACAwnH,EAAWv/E,UAAY,SAASjmC,GAC9B,OAAOoa,UAAU9c,QAAUy4D,GAAM/1D,EAAE,GAAIg2D,GAAMh2D,EAAE,GAAIwI,KAAW,CAACutD,EAAIC,EACrE,EACAwvD,EAAWn0E,MAAQ,SAASrxC,GAC1B,OAAOoa,UAAU9c,QAAqCwtH,EAAK,GAAhCntG,EAAQ3d,EAAI,IAAM,IAA0BwhH,EAAK,GAAI7jG,GAAQnV,KAAWmV,EAAQ,EAC7G,EACA6nG,EAAW6C,SAAW,SAASroH,GAC7B,OAAOoa,UAAU9c,QAAU6vC,EAAKntC,GAAK,EAAI,EAAGwI,KAAW2kC,EAAK,CAC9D,EACAq4E,EAAW8C,SAAW,SAAStoH,GAC7B,OAAOoa,UAAU9c,QAAU8vC,EAAKptC,GAAK,EAAI,EAAGwI,KAAW4kC,EAAK,CAC9D,EACAo4E,EAAWS,UAAY,SAAS9tC,EAAQ76D,GACtC,OAAO2oG,GAAUT,EAAYrtC,EAAQ76D,EACvC,EACAkoG,EAAWU,QAAU,SAAShhH,EAAMoY,GAClC,OAAO4oG,GAAQV,EAAYtgH,EAAMoY,EACnC,EACAkoG,EAAWW,SAAW,SAASxmF,EAAOriB,GACpC,OAAO6oG,GAASX,EAAY7lF,EAAOriB,EACrC,EACAkoG,EAAWY,UAAY,SAASvmF,EAAQviB,GACtC,OAAO8oG,GAAUZ,EAAY3lF,EAAQviB,EACvC,EAEOkoG,CACT,CCjFO,SAASyF,GAAiBtR,EAAQC,GACvC,IAAIx6D,EAAOw6D,EAAMA,EAAKsR,EAAO9rE,EAAOA,EACpC,MAAO,CACLu6D,GAAU,MAAS,QAAWv6D,EAAO8rE,GAAoBA,GAAQ,QAAW9rE,EAAO,QAAW8rE,GAAhD,UAC9CtR,GAAO,SAAWx6D,GAAQ,QAAW8rE,GAAoB,QAAW9rE,EAAtB,QAA6B,QAAW8rE,KAE1F,CAee,cACb,OAAO1F,GAAWyF,IACbj1F,MAAM,QACb,CCvBO,SAASm1F,GAAgBloH,EAAGpD,GACjC,MAAO,CAAC,GAAIA,GAAK,GAAIoD,GAAI,GAAIpD,GAC/B,CAIe,cACb,OAAO2lH,GAAW2F,IACbn1F,MAAM,OACNoyF,UAAU,GAAK,GACtB,CCVO,SAASgD,GAAiBnoH,EAAGpD,GAClC,IAAI0K,EAAK,GAAI1K,GAAI7B,EAAI,EAAI,GAAIiF,GAAKsH,EAClC,MAAO,CAACA,EAAK,GAAItH,GAAKjF,EAAG,GAAI6B,GAAK7B,EACpC,CAMe,cACb,OAAOwnH,GAAW4F,IACbp1F,MAAM,KACNoyF,UAAU,IACjB,CCdO,SAASiD,GAAsB1R,EAAQC,GAC5C,MAAO,CAAC7qF,GAAI1I,IAAK,GAASuzF,GAAO,KAAMD,EACzC,CAMe,cACb,IAAI76D,EAAIirE,GAAmBsB,IACvB70C,EAAS13B,EAAE03B,OACXh0B,EAAS1D,EAAE0D,OAUf,OARA1D,EAAE03B,OAAS,SAASx2E,GAClB,OAAOoa,UAAU9c,OAASk5E,EAAO,EAAEx2E,EAAE,GAAIA,EAAE,KAAsB,EAAdA,EAAIw2E,KAAa,IAAKx2E,EAAE,GAC7E,EAEA8+C,EAAE0D,OAAS,SAASxiD,GAClB,OAAOoa,UAAU9c,OAASklD,EAAO,CAACxiD,EAAE,GAAIA,EAAE,GAAIA,EAAE1C,OAAS,EAAI0C,EAAE,GAAK,GAAK,KAAsB,EAAdA,EAAIwiD,KAAa,GAAIxiD,EAAE,GAAIA,EAAE,GAAK,GACrH,EAEOwiD,EAAO,CAAC,EAAG,EAAG,KAChBxsB,MAAM,QACb,CC1BA,SAASs1F,GAAkB/pH,EAAGC,GAC5B,OAAOD,EAAE6zC,SAAW5zC,EAAE4zC,OAAS,EAAI,CACrC,CAMA,SAASm2E,GAAYtoH,EAAGgI,GACtB,OAAOhI,EAAIgI,EAAEhI,CACf,CAMA,SAASuoH,GAAW3rH,EAAGoL,GACrB,OAAOtE,KAAKvC,IAAIvE,EAAGoL,EAAEpL,EACvB,CAce,cACb,IAAI4rH,EAAaH,GACbn6E,EAAK,EACLC,EAAK,EACLs6E,GAAW,EAEf,SAASl1F,EAAQr0B,GACf,IAAIwpH,EACA1oH,EAAI,EAGRd,EAAKypH,WAAU,SAAS5pH,GACtB,IAAIg2D,EAAWh2D,EAAKg2D,SAChBA,GACFh2D,EAAKiB,EA1Cb,SAAe+0D,GACb,OAAOA,EAASnjC,OAAO02F,GAAa,GAAKvzD,EAAS16D,MACpD,CAwCiBuuH,CAAM7zD,GACfh2D,EAAKnC,EAnCb,SAAcm4D,GACZ,OAAO,EAAIA,EAASnjC,OAAO22F,GAAY,EACzC,CAiCiBp/E,CAAK4rB,KAEdh2D,EAAKiB,EAAI0oH,EAAe1oH,GAAKwoH,EAAWzpH,EAAM2pH,GAAgB,EAC9D3pH,EAAKnC,EAAI,EACT8rH,EAAe3pH,EAEnB,IAEA,IAAIZ,EAnCR,SAAkBY,GAEhB,IADA,IAAIg2D,EACGA,EAAWh2D,EAAKg2D,UAAUh2D,EAAOg2D,EAAS,GACjD,OAAOh2D,CACT,CA+Be8pH,CAAS3pH,GAChBd,EA9BR,SAAmBW,GAEjB,IADA,IAAIg2D,EACGA,EAAWh2D,EAAKg2D,UAAUh2D,EAAOg2D,EAASA,EAAS16D,OAAS,GACnE,OAAO0E,CACT,CA0BgB+pH,CAAU5pH,GAClB6zC,EAAK50C,EAAK6B,EAAIwoH,EAAWrqH,EAAMC,GAAS,EACxCksC,EAAKlsC,EAAM4B,EAAIwoH,EAAWpqH,EAAOD,GAAQ,EAG7C,OAAOe,EAAKypH,UAAUF,EAAW,SAAS1pH,GACxCA,EAAKiB,GAAKjB,EAAKiB,EAAId,EAAKc,GAAKkuC,EAC7BnvC,EAAKnC,GAAKsC,EAAKtC,EAAImC,EAAKnC,GAAKuxC,CAC/B,EAAI,SAASpvC,GACXA,EAAKiB,GAAKjB,EAAKiB,EAAI+yC,IAAOzI,EAAKyI,GAAM7E,EACrCnvC,EAAKnC,GAAK,GAAKsC,EAAKtC,EAAImC,EAAKnC,EAAIsC,EAAKtC,EAAI,IAAMuxC,CAClD,EACF,CAcA,OAZA5a,EAAQi1F,WAAa,SAASxoH,GAC5B,OAAOmX,UAAU9c,QAAUmuH,EAAaxoH,EAAGuzB,GAAWi1F,CACxD,EAEAj1F,EAAQtxB,KAAO,SAASjC,GACtB,OAAOmX,UAAU9c,QAAUouH,GAAW,EAAOv6E,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAIuzB,GAAYk1F,EAAW,KAAO,CAACv6E,EAAIC,EAC1G,EAEA5a,EAAQk1F,SAAW,SAASzoH,GAC1B,OAAOmX,UAAU9c,QAAUouH,GAAW,EAAMv6E,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAIuzB,GAAYk1F,EAAW,CAACv6E,EAAIC,GAAM,IACxG,EAEO5a,CACT,CCnFA,SAAS,GAAMx0B,GACb,IAAI8G,EAAM,EACNkvD,EAAWh2D,EAAKg2D,SAChBx6D,EAAIw6D,GAAYA,EAAS16D,OAC7B,GAAKE,EACA,OAASA,GAAK,GAAGsL,GAAOkvD,EAASx6D,GAAGsD,WADjCgI,EAAM,EAEd9G,EAAKlB,MAAQgI,CACf,CCOe,SAASkjH,GAAUvtH,EAAMu5D,GAClCv5D,aAAgB6Q,KAClB7Q,EAAO,MAACX,EAAWW,QACFX,IAAbk6D,IAAwBA,EAAWi0D,UACjBnuH,IAAbk6D,IACTA,EAAWk0D,IAWb,IARA,IACIlqH,EAEAi2D,EACAk0D,EACA3uH,EACAiD,EANA0B,EAAO,IAAIjB,GAAKzC,GAEhB82C,EAAQ,CAACpzC,GAMNH,EAAOuzC,EAAMx0C,OAClB,IAAKorH,EAASn0D,EAASh2D,EAAKvD,SAAWgC,GAAK0rH,EAAS51G,MAAM+vB,KAAK6lF,IAAS7uH,QAEvE,IADA0E,EAAKg2D,SAAWm0D,EACX3uH,EAAIiD,EAAI,EAAGjD,GAAK,IAAKA,EACxB+3C,EAAM94C,KAAKw7D,EAAQk0D,EAAO3uH,GAAK,IAAI0D,GAAKirH,EAAO3uH,KAC/Cy6D,EAAM7iB,OAASpzC,EACfi2D,EAAMyuD,MAAQ1kH,EAAK0kH,MAAQ,EAKjC,OAAOvkH,EAAKiqH,WAAWC,GACzB,CAMA,SAASH,GAAe1nH,GACtB,OAAOA,EAAEwzD,QACX,CAEA,SAASi0D,GAAYznH,GACnB,OAAO+R,MAAMC,QAAQhS,GAAKA,EAAE,GAAK,IACnC,CAEA,SAAS8nH,GAAStqH,QACQlE,IAApBkE,EAAKvD,KAAKqC,QAAqBkB,EAAKlB,MAAQkB,EAAKvD,KAAKqC,OAC1DkB,EAAKvD,KAAOuD,EAAKvD,KAAKA,IACxB,CAEO,SAAS4tH,GAAcrqH,GAC5B,IAAI69B,EAAS,EACb,GAAG79B,EAAK69B,OAASA,SACT79B,EAAOA,EAAKozC,SAAYpzC,EAAK69B,SAAWA,EAClD,CAEO,SAAS3+B,GAAKzC,GACnBzB,KAAKyB,KAAOA,EACZzB,KAAK0pH,MACL1pH,KAAK6iC,OAAS,EACd7iC,KAAKo4C,OAAS,IAChB,CCxEO,SAASm3E,GAAS3sH,GACvB,OAAY,MAALA,EAAY,KAAO4sH,GAAS5sH,EACrC,CAEO,SAAS4sH,GAAS5sH,GACvB,GAAiB,mBAANA,EAAkB,MAAM,IAAIyO,MACvC,OAAOzO,CACT,CCPO,SAAS6sH,KACd,OAAO,CACT,CAEe,YAASxpH,GACtB,OAAO,WACL,OAAOA,CACT,CACF,CXUA0nH,GAAcvN,OAAS,SAASn6G,EAAGpD,GAEjC,IADA,IACgBm0D,EADZpyD,EAAI/B,EAAG0F,EAAK3D,EAAIA,EAAGgpH,EAAKrlH,EAAKA,EAAKA,EAC7B/H,EAAI,EAAmBA,EAZjB,KAesBotH,GAAZrlH,GAAvB3D,GAAKoyD,GAFApyD,GAAK2oH,GAAKC,GAAKjlH,EAAKqlH,GAAMH,GAAKC,GAAKnlH,IAAO1F,IAC1C0qH,GAAK,EAAIC,GAAKjlH,EAAKqlH,GAAM,EAAIH,GAAK,EAAIC,GAAKnlH,KACjB3D,GAAa2D,EAAKA,IAC9C,GAAIyuD,GAASmjD,OAJ+B35G,GAMlD,MAAO,CACL0iD,GAAIj9C,GAAKsnH,GAAK,EAAIC,GAAKjlH,EAAKqlH,GAAM,EAAIH,GAAK,EAAIC,GAAKnlH,IAAO,GAAI3D,GAC/DmvG,GAAK,GAAInvG,GAAKs+C,IAElB,ECrBA2qE,GAAYzN,OAASqM,GAAgBpoE,IEErC4pE,GAAiB7N,OAAS,SAASn6G,EAAGpD,GACpC,IAAqBm0D,EAAjB4lD,EAAM/5G,EAAGrC,EAAI,GACjB,EAAG,CACD,IAAI4hD,EAAOw6D,EAAMA,EAAKsR,EAAO9rE,EAAOA,EACpCw6D,GAAO5lD,GAAS4lD,GAAO,SAAWx6D,GAAQ,QAAW8rE,GAAoB,QAAW9rE,EAAtB,QAA6B,QAAW8rE,KAAUrrH,IAC3G,SAAWu/C,GAAQ,QAAe8rE,GAAwB,QAAe9rE,EAA/B,QAAsC,QAAW,GAAK8rE,IACvG,OAAS,GAAIl3D,GAAS,MAAax2D,EAAI,GACvC,MAAO,CACLyF,GAAK,OAAUm8C,EAAOw6D,EAAMA,IAAoBx6D,GAAoBA,EAAOA,EAAOA,GAAQ,QAAW,QAAWA,GAAvD,SAApB,UACrCw6D,EAEJ,ECdAuR,GAAgB/N,OAASqM,GAAgB1Y,ICCzCqa,GAAiBhO,OAASqM,IAAgB,SAASvtC,GACjD,OAAO,EAAI76B,GAAK66B,EAClB,ICJAmvC,GAAsBjO,OAAS,SAASn6G,EAAGpD,GACzC,MAAO,EAAEA,EAAG,EAAIwhD,GAAK9P,GAAItuC,IAAM,GACjC,EGiEA/B,GAAK2B,UAAYmpH,GAAUnpH,UAAY,CACrCoF,YAAa/G,GACb0oB,MDnEa,WACb,OAAO5sB,KAAK4uH,UAAU,GACxB,ECkEE3rC,KG7Ea,SAASpjE,EAAU8jE,GAChC,IAAIp8E,GAAS,EACb,IAAK,MAAMvC,KAAQhF,KACjB6f,EAASrd,KAAKmhF,EAAM3+E,IAAQuC,EAAOvH,MAErC,OAAOA,IACT,EHwEE4uH,UI9Ea,SAAS/uG,EAAU8jE,GAEhC,IADA,IAA4C3oB,EAAUx6D,EAAGiD,EAArDuB,EAAOhF,KAAMu4C,EAAQ,CAACvzC,GAAO3B,EAAO,GAAoBkE,GAAS,EAC9DvC,EAAOuzC,EAAMx0C,OAElB,GADAV,EAAK5D,KAAKuF,GACNg2D,EAAWh2D,EAAKg2D,SAClB,IAAKx6D,EAAI,EAAGiD,EAAIu3D,EAAS16D,OAAQE,EAAIiD,IAAKjD,EACxC+3C,EAAM94C,KAAKu7D,EAASx6D,IAI1B,KAAOwE,EAAO3B,EAAKU,OACjB8b,EAASrd,KAAKmhF,EAAM3+E,IAAQuC,EAAOvH,MAErC,OAAOA,IACT,EJiEEovH,WK/Ea,SAASvvG,EAAU8jE,GAEhC,IADA,IAAiC3oB,EAAUx6D,EAAvCwE,EAAOhF,KAAMu4C,EAAQ,CAACvzC,GAAoBuC,GAAS,EAChDvC,EAAOuzC,EAAMx0C,OAElB,GADA8b,EAASrd,KAAKmhF,EAAM3+E,IAAQuC,EAAOvH,MAC/Bg7D,EAAWh2D,EAAKg2D,SAClB,IAAKx6D,EAAIw6D,EAAS16D,OAAS,EAAGE,GAAK,IAAKA,EACtC+3C,EAAM94C,KAAKu7D,EAASx6D,IAI1B,OAAOR,IACT,ELqEEqG,KMhFa,SAASwZ,EAAU8jE,GAChC,IAAIp8E,GAAS,EACb,IAAK,MAAMvC,KAAQhF,KACjB,GAAI6f,EAASrd,KAAKmhF,EAAM3+E,IAAQuC,EAAOvH,MACrC,OAAOgF,CAGb,EN0EE8G,IOjFa,SAAShI,GACtB,OAAO9D,KAAK4uH,WAAU,SAAS5pH,GAI7B,IAHA,IAAI8G,GAAOhI,EAAMkB,EAAKvD,OAAS,EAC3Bu5D,EAAWh2D,EAAKg2D,SAChBx6D,EAAIw6D,GAAYA,EAAS16D,SACpBE,GAAK,GAAGsL,GAAOkvD,EAASx6D,GAAGsD,MACpCkB,EAAKlB,MAAQgI,CACf,GACF,EP0EE3D,KQlFa,SAAS/B,GACtB,OAAOpG,KAAKovH,YAAW,SAASpqH,GAC1BA,EAAKg2D,UACPh2D,EAAKg2D,SAAS7yD,KAAK/B,EAEvB,GACF,ER6EEgsC,KSnFa,SAAS3oC,GAItB,IAHA,IAAID,EAAQxJ,KACR0vH,EAcN,SAA6BnrH,EAAGC,GAC9B,GAAID,IAAMC,EAAG,OAAOD,EACpB,IAAIorH,EAASprH,EAAEqrH,YACXC,EAASrrH,EAAEorH,YACX3hH,EAAI,KAGR,IAFA1J,EAAIorH,EAAO5rH,MACXS,EAAIqrH,EAAO9rH,MACJQ,IAAMC,GACXyJ,EAAI1J,EACJA,EAAIorH,EAAO5rH,MACXS,EAAIqrH,EAAO9rH,MAEb,OAAOkK,CACT,CA3BiB6hH,CAAoBtmH,EAAOC,GACtC8uC,EAAQ,CAAC/uC,GACNA,IAAUkmH,GACflmH,EAAQA,EAAM4uC,OACdG,EAAM94C,KAAK+J,GAGb,IADA,IAAIxI,EAAIu3C,EAAMj4C,OACPmJ,IAAQimH,GACbn3E,EAAMlgC,OAAOrX,EAAG,EAAGyI,GACnBA,EAAMA,EAAI2uC,OAEZ,OAAOG,CACT,ETsEEq3E,UUpFa,WAEb,IADA,IAAI5qH,EAAOhF,KAAMu4C,EAAQ,CAACvzC,GACnBA,EAAOA,EAAKozC,QACjBG,EAAM94C,KAAKuF,GAEb,OAAOuzC,CACT,EV+EEw3E,YWrFa,WACb,OAAOx2G,MAAM+vB,KAAKtpC,KACpB,EXoFEgwH,OYtFa,WACb,IAAIA,EAAS,GAMb,OALAhwH,KAAKovH,YAAW,SAASpqH,GAClBA,EAAKg2D,UACRg1D,EAAOvwH,KAAKuF,EAEhB,IACOgrH,CACT,EZ+EEllF,MavFa,WACb,IAAI3lC,EAAOnF,KAAM8qC,EAAQ,GAMzB,OALA3lC,EAAK89E,MAAK,SAASj+E,GACbA,IAASG,GACX2lC,EAAMrrC,KAAK,CAACs1B,OAAQ/vB,EAAKozC,OAAQxqB,OAAQ5oB,GAE7C,IACO8lC,CACT,EbgFE63C,KA5CF,WACE,OAAOqsC,GAAUhvH,MAAMovH,WAAWE,GACpC,EA2CE,CAAC/rH,OAAOC,UczFK,YACb,IAAiB2C,EAAwB60D,EAAUx6D,EAAGiD,EAAlDuB,EAAOhF,KAAeqD,EAAO,CAAC2B,GAClC,GAEE,IADAmB,EAAU9C,EAAKqY,UAAWrY,EAAO,GAC1B2B,EAAOmB,EAAQpC,OAEpB,SADMiB,EACFg2D,EAAWh2D,EAAKg2D,SAClB,IAAKx6D,EAAI,EAAGiD,EAAIu3D,EAAS16D,OAAQE,EAAIiD,IAAKjD,EACxC6C,EAAK5D,KAAKu7D,EAASx6D,UAIlB6C,EAAK/C,OAChB,GCZA,MAAM,GAAI,QACJ,GAAI,WACJ,GAAI,WAEK,cACb,IAAIugD,EAAI,EACR,MAAO,KAAOA,GAAK,GAAIA,EAAI,IAAK,IAAK,EACvC,CCLe,YAASovE,GACtB,OAAOC,GAAkBD,EAAS,KACpC,CAEO,SAASC,GAAkBD,EAAS94F,GAGzC,IAFA,IAAgFpvB,EAAG/D,EAA/ExD,EAAI,EAAGiD,GAAKwsH,ECFX,SAAiBr1C,EAAOzjD,GAC7B,IACIr0B,EACAtC,EAFAshD,EAAI84B,EAAMt6E,OAId,KAAOwhD,GACLthD,EAAI22B,IAAW2qB,IAAM,EACrBh/C,EAAI83E,EAAM94B,GACV84B,EAAM94B,GAAK84B,EAAMp6E,GACjBo6E,EAAMp6E,GAAKsC,EAGb,OAAO83E,CACT,CDX4B,CAAQrhE,MAAM+vB,KAAK2mF,GAAU94F,IAAS72B,OAAQsM,EAAI,GAErEpM,EAAIiD,GACTsE,EAAIkoH,EAAQzvH,GACRwD,GAAKmsH,GAAansH,EAAG+D,KAAMvH,GAC1BwD,EAAIosH,GAAaxjH,EAAIyjH,GAAYzjH,EAAG7E,IAAKvH,EAAI,GAGpD,OAAOwD,CACT,CAEA,SAASqsH,GAAYzjH,EAAG7E,GACtB,IAAIvH,EAAGsJ,EAEP,GAAIwmH,GAAgBvoH,EAAG6E,GAAI,MAAO,CAAC7E,GAGnC,IAAKvH,EAAI,EAAGA,EAAIoM,EAAEtM,SAAUE,EAC1B,GAAI+vH,GAAYxoH,EAAG6E,EAAEpM,KACd8vH,GAAgBE,GAAc5jH,EAAEpM,GAAIuH,GAAI6E,GAC7C,MAAO,CAACA,EAAEpM,GAAIuH,GAKlB,IAAKvH,EAAI,EAAGA,EAAIoM,EAAEtM,OAAS,IAAKE,EAC9B,IAAKsJ,EAAItJ,EAAI,EAAGsJ,EAAI8C,EAAEtM,SAAUwJ,EAC9B,GAAIymH,GAAYC,GAAc5jH,EAAEpM,GAAIoM,EAAE9C,IAAK/B,IACpCwoH,GAAYC,GAAc5jH,EAAEpM,GAAIuH,GAAI6E,EAAE9C,KACtCymH,GAAYC,GAAc5jH,EAAE9C,GAAI/B,GAAI6E,EAAEpM,KACtC8vH,GAAgBG,GAAc7jH,EAAEpM,GAAIoM,EAAE9C,GAAI/B,GAAI6E,GACnD,MAAO,CAACA,EAAEpM,GAAIoM,EAAE9C,GAAI/B,GAM1B,MAAM,IAAIsJ,KACZ,CAEA,SAASk/G,GAAYhsH,EAAGC,GACtB,IAAIksH,EAAKnsH,EAAEM,EAAIL,EAAEK,EAAGsvC,EAAK3vC,EAAEyB,EAAI1B,EAAE0B,EAAGmuC,EAAK5vC,EAAE3B,EAAI0B,EAAE1B,EACjD,OAAO6tH,EAAK,GAAKA,EAAKA,EAAKv8E,EAAKA,EAAKC,EAAKA,CAC5C,CAEA,SAAS+7E,GAAa5rH,EAAGC,GACvB,IAAIksH,EAAKnsH,EAAEM,EAAIL,EAAEK,EAA4B,KAAxB8E,KAAKvC,IAAI7C,EAAEM,EAAGL,EAAEK,EAAG,GAAWsvC,EAAK3vC,EAAEyB,EAAI1B,EAAE0B,EAAGmuC,EAAK5vC,EAAE3B,EAAI0B,EAAE1B,EAChF,OAAO6tH,EAAK,GAAKA,EAAKA,EAAKv8E,EAAKA,EAAKC,EAAKA,CAC5C,CAEA,SAASk8E,GAAgB/rH,EAAGqI,GAC1B,IAAK,IAAIpM,EAAI,EAAGA,EAAIoM,EAAEtM,SAAUE,EAC9B,IAAK2vH,GAAa5rH,EAAGqI,EAAEpM,IACrB,OAAO,EAGX,OAAO,CACT,CAEA,SAAS4vH,GAAaxjH,GACpB,OAAQA,EAAEtM,QACR,KAAK,EAAG,OAMZ,SAAuBiE,GACrB,MAAO,CACL0B,EAAG1B,EAAE0B,EACLpD,EAAG0B,EAAE1B,EACLgC,EAAGN,EAAEM,EAET,CAZmB8rH,CAAc/jH,EAAE,IAC/B,KAAK,EAAG,OAAO4jH,GAAc5jH,EAAE,GAAIA,EAAE,IACrC,KAAK,EAAG,OAAO6jH,GAAc7jH,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAE/C,CAUA,SAAS4jH,GAAcjsH,EAAGC,GACxB,IAAI+rC,EAAKhsC,EAAE0B,EAAG6O,EAAKvQ,EAAE1B,EAAG+tH,EAAKrsH,EAAEM,EAC3B2rC,EAAKhsC,EAAEyB,EAAG8O,EAAKvQ,EAAE3B,EAAGguH,EAAKrsH,EAAEK,EAC3Bg6F,EAAMruD,EAAKD,EAAIuuD,EAAM/pF,EAAKD,EAAIg8G,EAAMD,EAAKD,EACzChsH,EAAI+E,KAAKoG,KAAK8uF,EAAMA,EAAMC,EAAMA,GACpC,MAAO,CACL74F,GAAIsqC,EAAKC,EAAKquD,EAAMj6F,EAAIksH,GAAO,EAC/BjuH,GAAIiS,EAAKC,EAAK+pF,EAAMl6F,EAAIksH,GAAO,EAC/BjsH,GAAID,EAAIgsH,EAAKC,GAAM,EAEvB,CAEA,SAASJ,GAAclsH,EAAGC,EAAGyJ,GAC3B,IAAIsiC,EAAKhsC,EAAE0B,EAAG6O,EAAKvQ,EAAE1B,EAAG+tH,EAAKrsH,EAAEM,EAC3B2rC,EAAKhsC,EAAEyB,EAAG8O,EAAKvQ,EAAE3B,EAAGguH,EAAKrsH,EAAEK,EAC3B23C,EAAKvuC,EAAEhI,EAAGw2C,EAAKxuC,EAAEpL,EAAGkuH,EAAK9iH,EAAEpJ,EAC3BmsH,EAAKzgF,EAAKC,EACVygF,EAAK1gF,EAAKiM,EACVjyC,EAAKuK,EAAKC,EACVi+F,EAAKl+F,EAAK2nC,EACVmnE,EAAKiN,EAAKD,EACVM,EAAKH,EAAKH,EACVp6G,EAAK+5B,EAAKA,EAAKz7B,EAAKA,EAAK87G,EAAKA,EAC9Bn6G,EAAKD,EAAKg6B,EAAKA,EAAKz7B,EAAKA,EAAK87G,EAAKA,EACnCjzE,EAAKpnC,EAAKgmC,EAAKA,EAAKC,EAAKA,EAAKs0E,EAAKA,EACnChmH,EAAKkmH,EAAK1mH,EAAKymH,EAAKhe,EACpBte,GAAMnqF,EAAKqzC,EAAKo1D,EAAKv8F,IAAY,EAAL1L,GAAUwlC,EACtCqkD,GAAMoe,EAAK4Q,EAAKr5G,EAAK2mH,GAAMnmH,EAC3B4pF,GAAMs8B,EAAKx6G,EAAKu6G,EAAKpzE,IAAY,EAAL7yC,GAAU+J,EACtC+/E,GAAMm8B,EAAKE,EAAKD,EAAKrN,GAAM74G,EAC3Bi4C,EAAI4xC,EAAKA,EAAKC,EAAKA,EAAK,EACxBjoF,EAAI,GAAKgkH,EAAKl8B,EAAKE,EAAKD,EAAKE,GAC7B5xC,EAAIyxC,EAAKA,EAAKC,EAAKA,EAAKi8B,EAAKA,EAC7B/rH,IAAM8E,KAAKiE,IAAIo1C,GAAK,MAAQp2C,EAAIjD,KAAKoG,KAAKnD,EAAIA,EAAI,EAAIo2C,EAAIC,KAAO,EAAID,GAAKC,EAAIr2C,GAClF,MAAO,CACL3G,EAAGsqC,EAAKmkD,EAAKE,EAAK/vF,EAClBhC,EAAGiS,EAAK6/E,EAAKE,EAAKhwF,EAClBA,EAAGA,EAEP,CEtHA,SAASssH,GAAM3sH,EAAGD,EAAG0J,GACnB,IAAoBhI,EAAG+qH,EACHnuH,EAAG0H,EADnB4pC,EAAK3vC,EAAEyB,EAAI1B,EAAE0B,EACbmuC,EAAK5vC,EAAE3B,EAAI0B,EAAE1B,EACb4T,EAAK09B,EAAKA,EAAKC,EAAKA,EACpB39B,GACFu6G,EAAKzsH,EAAEM,EAAIoJ,EAAEpJ,EAAGmsH,GAAMA,EACtBzmH,EAAK/F,EAAEK,EAAIoJ,EAAEpJ,EACTmsH,GADYzmH,GAAMA,IAEpBtE,GAAKwQ,EAAKlM,EAAKymH,IAAO,EAAIv6G,GAC1B5T,EAAI8G,KAAKoG,KAAKpG,KAAKvC,IAAI,EAAGmD,EAAKkM,EAAKxQ,EAAIA,IACxCgI,EAAEhI,EAAIzB,EAAEyB,EAAIA,EAAIkuC,EAAKtxC,EAAIuxC,EACzBnmC,EAAEpL,EAAI2B,EAAE3B,EAAIoD,EAAImuC,EAAKvxC,EAAIsxC,IAEzBluC,GAAKwQ,EAAKu6G,EAAKzmH,IAAO,EAAIkM,GAC1B5T,EAAI8G,KAAKoG,KAAKpG,KAAKvC,IAAI,EAAG4pH,EAAKv6G,EAAKxQ,EAAIA,IACxCgI,EAAEhI,EAAI1B,EAAE0B,EAAIA,EAAIkuC,EAAKtxC,EAAIuxC,EACzBnmC,EAAEpL,EAAI0B,EAAE1B,EAAIoD,EAAImuC,EAAKvxC,EAAIsxC,KAG3BlmC,EAAEhI,EAAI1B,EAAE0B,EAAIgI,EAAEpJ,EACdoJ,EAAEpL,EAAI0B,EAAE1B,EAEZ,CAEA,SAASuuH,GAAW7sH,EAAGC,GACrB,IAAIksH,EAAKnsH,EAAEM,EAAIL,EAAEK,EAAI,KAAMsvC,EAAK3vC,EAAEyB,EAAI1B,EAAE0B,EAAGmuC,EAAK5vC,EAAE3B,EAAI0B,EAAE1B,EACxD,OAAO6tH,EAAK,GAAKA,EAAKA,EAAKv8E,EAAKA,EAAKC,EAAKA,CAC5C,CAEA,SAASi9E,GAAMrsH,GACb,IAAIT,EAAIS,EAAKhC,EACTwB,EAAIQ,EAAK3B,KAAKL,EACd+H,EAAKxG,EAAEM,EAAIL,EAAEK,EACbsvC,GAAM5vC,EAAE0B,EAAIzB,EAAEK,EAAIL,EAAEyB,EAAI1B,EAAEM,GAAKkG,EAC/BqpC,GAAM7vC,EAAE1B,EAAI2B,EAAEK,EAAIL,EAAE3B,EAAI0B,EAAEM,GAAKkG,EACnC,OAAOopC,EAAKA,EAAKC,EAAKA,CACxB,CAEA,SAAS,GAAKktE,GACZthH,KAAKgD,EAAIs+G,EACTthH,KAAKqD,KAAO,KACZrD,KAAKygF,SAAW,IAClB,CAEO,SAAS6wC,GAAmBrB,EAAS94F,GAC1C,KAAM1zB,GDjDgBwC,ECiDKgqH,EAAhBA,EDhDS,iBAANhqH,GAAkB,WAAYA,EACxCA,EACAsT,MAAM+vB,KAAKrjC,IC8CsB3F,QAAS,OAAO,EDjDxC,IAAS2F,ECmDlB1B,EAAGC,EAAGyJ,EAAGxK,EAAGu8C,EAAIwkE,EAAIhkH,EAAGsJ,EAAG9I,EAAGuwH,EAAIC,EAIrC,IADAjtH,EAAI0rH,EAAQ,IAAMhqH,EAAI,EAAG1B,EAAE1B,EAAI,IACzBY,EAAI,GAAI,OAAOc,EAAEM,EAIvB,GADAL,EAAIyrH,EAAQ,GAAI1rH,EAAE0B,GAAKzB,EAAEK,EAAGL,EAAEyB,EAAI1B,EAAEM,EAAGL,EAAE3B,EAAI,IACvCY,EAAI,GAAI,OAAOc,EAAEM,EAAIL,EAAEK,EAG7BssH,GAAM3sH,EAAGD,EAAG0J,EAAIgiH,EAAQ,IAGxB1rH,EAAI,IAAI,GAAKA,GAAIC,EAAI,IAAI,GAAKA,GAAIyJ,EAAI,IAAI,GAAKA,GAC/C1J,EAAElB,KAAO4K,EAAEwyE,SAAWj8E,EACtBA,EAAEnB,KAAOkB,EAAEk8E,SAAWxyE,EACtBA,EAAE5K,KAAOmB,EAAEi8E,SAAWl8E,EAGtBktH,EAAM,IAAKjxH,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG,CAC5B2wH,GAAM5sH,EAAEvB,EAAGwB,EAAExB,EAAGiL,EAAIgiH,EAAQzvH,IAAKyN,EAAI,IAAI,GAAKA,GAK9CnE,EAAItF,EAAEnB,KAAMrC,EAAIuD,EAAEk8E,SAAU8wC,EAAK/sH,EAAExB,EAAE6B,EAAG2sH,EAAKjtH,EAAEvB,EAAE6B,EACjD,GACE,GAAI0sH,GAAMC,EAAI,CACZ,GAAIJ,GAAWtnH,EAAE9G,EAAGiL,EAAEjL,GAAI,CACxBwB,EAAIsF,EAAGvF,EAAElB,KAAOmB,EAAGA,EAAEi8E,SAAWl8E,IAAK/D,EACrC,SAASixH,CACX,CACAF,GAAMznH,EAAE9G,EAAE6B,EAAGiF,EAAIA,EAAEzG,IACrB,KAAO,CACL,GAAI+tH,GAAWpwH,EAAEgC,EAAGiL,EAAEjL,GAAI,EACxBuB,EAAIvD,GAAKqC,KAAOmB,EAAGA,EAAEi8E,SAAWl8E,IAAK/D,EACrC,SAASixH,CACX,CACAD,GAAMxwH,EAAEgC,EAAE6B,EAAG7D,EAAIA,EAAEy/E,QACrB,QACO32E,IAAM9I,EAAEqC,MAOjB,IAJA4K,EAAEwyE,SAAWl8E,EAAG0J,EAAE5K,KAAOmB,EAAGD,EAAElB,KAAOmB,EAAEi8E,SAAWj8E,EAAIyJ,EAGtD+xC,EAAKqxE,GAAM9sH,IACH0J,EAAIA,EAAE5K,QAAUmB,IACjBggH,EAAK6M,GAAMpjH,IAAM+xC,IACpBz7C,EAAI0J,EAAG+xC,EAAKwkE,GAGhBhgH,EAAID,EAAElB,IACR,CAGkB,IAAlBkB,EAAI,CAACC,EAAExB,GAAIiL,EAAIzJ,GAAWyJ,EAAIA,EAAE5K,QAAUmB,GAAGD,EAAE9E,KAAKwO,EAAEjL,GAGtD,IAH0DiL,EAAIiiH,GAAkB3rH,EAAG4yB,GAG9E32B,EAAI,EAAGA,EAAIiD,IAAKjD,GAAG+D,EAAI0rH,EAAQzvH,IAAMyF,GAAKgI,EAAEhI,EAAG1B,EAAE1B,GAAKoL,EAAEpL,EAE7D,OAAOoL,EAAEpJ,CACX,CAEe,YAASorH,GAEtB,OADAqB,GAAmBrB,EAAS,MACrBA,CACT,CClHA,SAAS,GAAczoH,GACrB,OAAOmC,KAAKoG,KAAKvI,EAAE1D,MACrB,CAEe,cACb,IAAIsjD,EAAS,KACTjT,EAAK,EACLC,EAAK,EACL1X,EAAU+yF,GAEd,SAASgC,EAAKtsH,GACZ,MAAMgyB,EAAS,KAYf,OAXAhyB,EAAKc,EAAIkuC,EAAK,EAAGhvC,EAAKtC,EAAIuxC,EAAK,EAC3BgT,EACFjiD,EAAKiqH,WAAWsC,GAAWtqE,IACtBwnE,UAAU+C,GAAmBj1F,EAAS,GAAKvF,IAC3Ci4F,WAAWwC,GAAe,IAE/BzsH,EAAKiqH,WAAWsC,GAAW,KACtB9C,UAAU+C,GAAmBlC,GAAc,EAAGt4F,IAC9Cy3F,UAAU+C,GAAmBj1F,EAASv3B,EAAKN,EAAI8E,KAAKzC,IAAIitC,EAAIC,GAAKjd,IACjEi4F,WAAWwC,GAAejoH,KAAKzC,IAAIitC,EAAIC,IAAO,EAAIjvC,EAAKN,KAEvDM,CACT,CAcA,OAZAssH,EAAKrqE,OAAS,SAASnhD,GACrB,OAAOmX,UAAU9c,QAAU8mD,EAASmoE,GAAStpH,GAAIwrH,GAAQrqE,CAC3D,EAEAqqE,EAAKvpH,KAAO,SAASjC,GACnB,OAAOmX,UAAU9c,QAAU6zC,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAIwrH,GAAQ,CAACt9E,EAAIC,EAClE,EAEAq9E,EAAK/0F,QAAU,SAASz2B,GACtB,OAAOmX,UAAU9c,QAAUo8B,EAAuB,mBAANz2B,EAAmBA,EAAI,IAAUA,GAAIwrH,GAAQ/0F,CAC3F,EAEO+0F,CACT,CAEA,SAASC,GAAWtqE,GAClB,OAAO,SAASpiD,GACTA,EAAKg2D,WACRh2D,EAAKH,EAAI8E,KAAKvC,IAAI,GAAIggD,EAAOpiD,IAAS,GAE1C,CACF,CAEA,SAAS2sH,GAAmBj1F,EAAS17B,EAAGm2B,GACtC,OAAO,SAASnyB,GACd,GAAIg2D,EAAWh2D,EAAKg2D,SAAU,CAC5B,IAAIA,EACAx6D,EAGAwD,EAFAP,EAAIu3D,EAAS16D,OACbuE,EAAI63B,EAAQ13B,GAAQhE,GAAK,EAG7B,GAAI6D,EAAG,IAAKrE,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGw6D,EAASx6D,GAAGqE,GAAKA,EAEhD,GADAb,EAAIstH,GAAmBt2D,EAAU7jC,GAC7BtyB,EAAG,IAAKrE,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGw6D,EAASx6D,GAAGqE,GAAKA,EAChDG,EAAKH,EAAIb,EAAIa,CACf,CACF,CACF,CAEA,SAAS+sH,GAAe5wH,GACtB,OAAO,SAASgE,GACd,IAAIozC,EAASpzC,EAAKozC,OAClBpzC,EAAKH,GAAK7D,EACNo3C,IACFpzC,EAAKiB,EAAImyC,EAAOnyC,EAAIjF,EAAIgE,EAAKiB,EAC7BjB,EAAKnC,EAAIu1C,EAAOv1C,EAAI7B,EAAIgE,EAAKnC,EAEjC,CACF,CChFe,YAASmC,GACtBA,EAAKg0C,GAAKrvC,KAAKwB,MAAMnG,EAAKg0C,IAC1Bh0C,EAAKq4B,GAAK1zB,KAAKwB,MAAMnG,EAAKq4B,IAC1Br4B,EAAKurC,GAAK5mC,KAAKwB,MAAMnG,EAAKurC,IAC1BvrC,EAAK8P,GAAKnL,KAAKwB,MAAMnG,EAAK8P,GAC5B,CCLe,YAASsjC,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GAO1C,IANA,IACI9P,EADAuzC,EAAQH,EAAO4iB,SAEfx6D,GAAK,EACLiD,EAAI80C,EAAMj4C,OACVU,EAAIo3C,EAAOt0C,QAAUysC,EAAKyI,GAAMZ,EAAOt0C,QAElCtD,EAAIiD,IACXuB,EAAOuzC,EAAM/3C,IAAS68B,GAAKA,EAAIr4B,EAAK8P,GAAKA,EACzC9P,EAAKg0C,GAAKA,EAAIh0C,EAAKurC,GAAKyI,GAAMh0C,EAAKlB,MAAQ9C,CAE/C,CCRe,cACb,IAAImzC,EAAK,EACLC,EAAK,EACL1X,EAAU,EACVvxB,GAAQ,EAEZ,SAAS0mH,EAAU1sH,GACjB,IAAI1B,EAAI0B,EAAK09B,OAAS,EAOtB,OANA19B,EAAK6zC,GACL7zC,EAAKk4B,GAAKX,EACVv3B,EAAKorC,GAAK4D,EACVhvC,EAAK2P,GAAKs/B,EAAK3wC,EACf0B,EAAKiqH,WAKP,SAAsBh7E,EAAI3wC,GACxB,OAAO,SAASuB,GACVA,EAAKg2D,UACP,GAAYh2D,EAAMA,EAAKg0C,GAAI5E,GAAMpvC,EAAK0kH,MAAQ,GAAKjmH,EAAGuB,EAAKurC,GAAI6D,GAAMpvC,EAAK0kH,MAAQ,GAAKjmH,GAEzF,IAAIu1C,EAAKh0C,EAAKg0C,GACV3b,EAAKr4B,EAAKq4B,GACVkT,EAAKvrC,EAAKurC,GAAK7T,EACf5nB,EAAK9P,EAAK8P,GAAK4nB,EACf6T,EAAKyI,IAAIA,EAAKzI,GAAMyI,EAAKzI,GAAM,GAC/Bz7B,EAAKuoB,IAAIA,EAAKvoB,GAAMuoB,EAAKvoB,GAAM,GACnC9P,EAAKg0C,GAAKA,EACVh0C,EAAKq4B,GAAKA,EACVr4B,EAAKurC,GAAKA,EACVvrC,EAAK8P,GAAKA,CACZ,CACF,CArBkBg9G,CAAa19E,EAAI3wC,IAC7B0H,GAAOhG,EAAKiqH,WAAW,IACpBjqH,CACT,CAgCA,OAZA0sH,EAAU1mH,MAAQ,SAASlF,GACzB,OAAOmX,UAAU9c,QAAU6K,IAAUlF,EAAG4rH,GAAa1mH,CACvD,EAEA0mH,EAAU3pH,KAAO,SAASjC,GACxB,OAAOmX,UAAU9c,QAAU6zC,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAI4rH,GAAa,CAAC19E,EAAIC,EACvE,EAEAy9E,EAAUn1F,QAAU,SAASz2B,GAC3B,OAAOmX,UAAU9c,QAAUo8B,GAAWz2B,EAAG4rH,GAAan1F,CACxD,EAEOm1F,CACT,CChDA,IAAIE,GAAU,CAACrI,OAAQ,GACnBsI,GAAY,CAAC,EACbC,GAAU,CAAC,EAEf,SAASC,GAAU1qH,GACjB,OAAOA,EAAE7H,EACX,CAEA,SAASwyH,GAAgB3qH,GACvB,OAAOA,EAAE4qH,QACX,CAEe,cACb,IAEIhgF,EAFAzyC,EAAKuyH,GACLE,EAAWD,GAGf,SAASE,EAAS5wH,GAChB,IAGIgC,EACA+D,EACAhH,EACA2E,EACAizC,EACApzC,EACAgxG,EACAsc,EAVA/5E,EAAQh/B,MAAM+vB,KAAK7nC,GACnB8wH,EAAY5yH,EACZ6yH,EAAkBJ,EASlBK,EAAY,IAAIngH,IAEpB,GAAY,MAAR8/B,EAAc,CAChB,MAAM+Q,EAAI5K,EAAMt4C,KAAI,CAACuH,EAAGhH,IAkF9B,SAAmB4xC,GAEjB,IAAI5xC,GADJ4xC,EAAO,GAAGA,KACG9xC,OAEb,OADIoyH,GAAMtgF,EAAM5xC,EAAI,KAAOkyH,GAAMtgF,EAAM5xC,EAAI,KAAI4xC,EAAOA,EAAKp7B,MAAM,GAAI,IAClD,MAAZo7B,EAAK,GAAaA,EAAO,IAAIA,GACtC,CAvFoCugF,CAAUvgF,EAAK5qC,EAAGhH,EAAGiB,MAC7C4pG,EAAIloD,EAAEljD,IAAI2yH,IACVxvE,EAAI,IAAI5f,IAAI2f,GAAGr9C,IAAI,IACzB,IAAK,MAAMtF,KAAK6qG,EACTjoD,EAAEvwC,IAAIrS,KACT4iD,EAAEt9C,IAAItF,GACN2iD,EAAE1jD,KAAKe,GACP6qG,EAAE5rG,KAAKmzH,GAASpyH,IAChB+3C,EAAM94C,KAAKwyH,KAGfM,EAAY,CAACvvH,EAAGxC,IAAM2iD,EAAE3iD,GACxBgyH,EAAkB,CAACxvH,EAAGxC,IAAM6qG,EAAE7qG,EAChC,CAEA,IAAKA,EAAI,EAAGiD,EAAI80C,EAAMj4C,OAAQE,EAAIiD,IAAKjD,EACrCgH,EAAI+wC,EAAM/3C,GAAIwE,EAAOuzC,EAAM/3C,GAAK,IAAI0D,GAAKsD,GACD,OAAnCwuG,EAASuc,EAAU/qH,EAAGhH,EAAGiB,MAAmBu0G,GAAU,MACzDsc,EAAUttH,EAAKrF,GAAKq2G,EACpByc,EAAU//G,IAAI4/G,EAASG,EAAU5/G,IAAIy/G,GAAWN,GAAYhtH,IAEhB,OAAzCgxG,EAASwc,EAAgBhrH,EAAGhH,EAAGiB,MAAmBu0G,GAAU,MAC/DhxG,EAAKozC,OAAS49D,GAIlB,IAAKx1G,EAAI,EAAGA,EAAIiD,IAAKjD,EAEnB,GAAIw1G,GADJhxG,EAAOuzC,EAAM/3C,IACK43C,OAAQ,CAExB,KADAA,EAASq6E,EAAUzpH,IAAIgtG,IACV,MAAM,IAAI3kG,MAAM,YAAc2kG,GAC3C,GAAI59D,IAAW45E,GAAW,MAAM,IAAI3gH,MAAM,cAAgB2kG,GACtD59D,EAAO4iB,SAAU5iB,EAAO4iB,SAASv7D,KAAKuF,GACrCozC,EAAO4iB,SAAW,CAACh2D,GACxBA,EAAKozC,OAASA,CAChB,KAAO,CACL,GAAIjzC,EAAM,MAAM,IAAIkM,MAAM,kBAC1BlM,EAAOH,CACT,CAGF,IAAKG,EAAM,MAAM,IAAIkM,MAAM,WAI3B,GAAY,MAAR+gC,EAAc,CAChB,KAAOjtC,EAAK1D,OAASwwH,IAAoC,IAAzB9sH,EAAK61D,SAAS16D,QAC5C6E,EAAOA,EAAK61D,SAAS,KAAMv3D,EAE7B,IAAK,IAAIjD,EAAI+3C,EAAMj4C,OAAS,EAAGE,GAAK,IAClCwE,EAAOuzC,EAAM/3C,IACJiB,OAASwwH,KAFqBzxH,EAGvCwE,EAAKvD,KAAO,IAEhB,CAKA,GAHA0D,EAAKizC,OAAS25E,GACd5sH,EAAKiqH,YAAW,SAASpqH,GAAQA,EAAK0kH,MAAQ1kH,EAAKozC,OAAOsxE,MAAQ,IAAKjmH,CAAG,IAAG2rH,WAAWC,IACxFlqH,EAAKizC,OAAS,KACV30C,EAAI,EAAG,MAAM,IAAI4N,MAAM,SAE3B,OAAOlM,CACT,CAcA,OAZAktH,EAAS1yH,GAAK,SAASsG,GACrB,OAAOmX,UAAU9c,QAAUX,EAAK4vH,GAAStpH,GAAIosH,GAAY1yH,CAC3D,EAEA0yH,EAASD,SAAW,SAASnsH,GAC3B,OAAOmX,UAAU9c,QAAU8xH,EAAW7C,GAAStpH,GAAIosH,GAAYD,CACjE,EAEAC,EAASjgF,KAAO,SAASnsC,GACvB,OAAOmX,UAAU9c,QAAU8xC,EAAOm9E,GAAStpH,GAAIosH,GAAYjgF,CAC7D,EAEOigF,CACT,CAeA,SAASO,GAASxgF,GAChB,IAAI5xC,EAAI4xC,EAAK9xC,OACb,GAAIE,EAAI,EAAG,MAAO,GAClB,OAASA,EAAI,IAAOkyH,GAAMtgF,EAAM5xC,KAChC,OAAO4xC,EAAKp7B,MAAM,EAAGxW,EACvB,CAKA,SAASkyH,GAAMtgF,EAAM5xC,GACnB,GAAgB,MAAZ4xC,EAAK5xC,GAAY,CACnB,IAAIQ,EAAI,EACR,KAAOR,EAAI,GAAmB,OAAd4xC,IAAO5xC,MAAeQ,EACtC,KAAS,EAAJA,GAAc,OAAO,CAC5B,CACA,OAAO,CACT,CC9IA,SAAS,GAAkBuD,EAAGC,GAC5B,OAAOD,EAAE6zC,SAAW5zC,EAAE4zC,OAAS,EAAI,CACrC,CAUA,SAASy6E,GAASnvH,GAChB,IAAIs3D,EAAWt3D,EAAEs3D,SACjB,OAAOA,EAAWA,EAAS,GAAKt3D,EAAEZ,CACpC,CAGA,SAASgwH,GAAUpvH,GACjB,IAAIs3D,EAAWt3D,EAAEs3D,SACjB,OAAOA,EAAWA,EAASA,EAAS16D,OAAS,GAAKoD,EAAEZ,CACtD,CAIA,SAASiwH,GAAYC,EAAIC,EAAIl3G,GAC3B,IAAIm3G,EAASn3G,GAASk3G,EAAGzyH,EAAIwyH,EAAGxyH,GAChCyyH,EAAGhlH,GAAKilH,EACRD,EAAGpyE,GAAK9kC,EACRi3G,EAAG/kH,GAAKilH,EACRD,EAAG/zC,GAAKnjE,EACRk3G,EAAGnxE,GAAK/lC,CACV,CAqBA,SAASo3G,GAAaC,EAAK1vH,EAAGgsH,GAC5B,OAAO0D,EAAI7uH,EAAE6zC,SAAW10C,EAAE00C,OAASg7E,EAAI7uH,EAAImrH,CAC7C,CAEA,SAAS2D,GAASruH,EAAMxE,GACtBR,KAAKgD,EAAIgC,EACThF,KAAKo4C,OAAS,KACdp4C,KAAKg7D,SAAW,KAChBh7D,KAAKgjD,EAAI,KACThjD,KAAKuE,EAAIvE,KACTA,KAAKk/E,EAAI,EACTl/E,KAAK8hD,EAAI,EACT9hD,KAAKiO,EAAI,EACTjO,KAAK6gD,EAAI,EACT7gD,KAAK8C,EAAI,KACT9C,KAAKQ,EAAIA,CACX,CA4Be,cACb,IAAIiuH,EAAa,GACbt6E,EAAK,EACLC,EAAK,EACLs6E,EAAW,KAEf,SAASxjH,EAAK/F,GACZ,IAAIrC,EA/BR,SAAkBqC,GAShB,IARA,IACIH,EAEAi2D,EACAD,EACAx6D,EACAiD,EANAyH,EAAO,IAAImoH,GAASluH,EAAM,GAE1BozC,EAAQ,CAACrtC,GAMNlG,EAAOuzC,EAAMx0C,OAClB,GAAIi3D,EAAWh2D,EAAKhC,EAAEg4D,SAEpB,IADAh2D,EAAKg2D,SAAW,IAAIzhD,MAAM9V,EAAIu3D,EAAS16D,QAClCE,EAAIiD,EAAI,EAAGjD,GAAK,IAAKA,EACxB+3C,EAAM94C,KAAKw7D,EAAQj2D,EAAKg2D,SAASx6D,GAAK,IAAI6yH,GAASr4D,EAASx6D,GAAIA,IAChEy6D,EAAM7iB,OAASpzC,EAMrB,OADCkG,EAAKktC,OAAS,IAAIi7E,GAAS,KAAM,IAAIr4D,SAAW,CAAC9vD,GAC3CA,CACT,CAUYooH,CAASnuH,GAOjB,GAJArC,EAAE8rH,UAAU2E,GAAYzwH,EAAEs1C,OAAO0J,GAAKh/C,EAAEo8E,EACxCp8E,EAAEssH,WAAWoE,GAGT9E,EAAUvpH,EAAKiqH,WAAWqE,OAIzB,CACH,IAAIrvH,EAAOe,EACPd,EAAQc,EACR28E,EAAS38E,EACbA,EAAKiqH,YAAW,SAASpqH,GACnBA,EAAKiB,EAAI7B,EAAK6B,IAAG7B,EAAOY,GACxBA,EAAKiB,EAAI5B,EAAM4B,IAAG5B,EAAQW,GAC1BA,EAAK0kH,MAAQ5nC,EAAO4nC,QAAO5nC,EAAS98E,EAC1C,IACA,IAAI67C,EAAIz8C,IAASC,EAAQ,EAAIoqH,EAAWrqH,EAAMC,GAAS,EACnD00D,EAAKlY,EAAIz8C,EAAK6B,EACd8nH,EAAK55E,GAAM9vC,EAAM4B,EAAI46C,EAAIkY,GACzBi1D,EAAK55E,GAAM0tC,EAAO4nC,OAAS,GAC/BvkH,EAAKiqH,YAAW,SAASpqH,GACvBA,EAAKiB,GAAKjB,EAAKiB,EAAI8yD,GAAMg1D,EACzB/oH,EAAKnC,EAAImC,EAAK0kH,MAAQsE,CACxB,GACF,CAEA,OAAO7oH,CACT,CAMA,SAASouH,EAAU7vH,GACjB,IAAIs3D,EAAWt3D,EAAEs3D,SACb04D,EAAWhwH,EAAE00C,OAAO4iB,SACpBjW,EAAIrhD,EAAElD,EAAIkzH,EAAShwH,EAAElD,EAAI,GAAK,KAClC,GAAIw6D,EAAU,EA5GlB,SAAuBt3D,GAMrB,IALA,IAIIqhD,EAJAhpC,EAAQ,EACRm3G,EAAS,EACTl4D,EAAWt3D,EAAEs3D,SACbx6D,EAAIw6D,EAAS16D,SAERE,GAAK,IACZukD,EAAIiW,EAASx6D,IACX0+E,GAAKnjE,EACPgpC,EAAEjD,GAAK/lC,EACPA,GAASgpC,EAAElE,GAAKqyE,GAAUnuE,EAAE92C,EAEhC,CAiGM0lH,CAAcjwH,GACd,IAAIkwH,GAAY54D,EAAS,GAAGkkB,EAAIlkB,EAASA,EAAS16D,OAAS,GAAG4+E,GAAK,EAC/Dn6B,GACFrhD,EAAEw7E,EAAIn6B,EAAEm6B,EAAIuvC,EAAW/qH,EAAEV,EAAG+hD,EAAE/hD,GAC9BU,EAAEo+C,EAAIp+C,EAAEw7E,EAAI00C,GAEZlwH,EAAEw7E,EAAI00C,CAEV,MAAW7uE,IACTrhD,EAAEw7E,EAAIn6B,EAAEm6B,EAAIuvC,EAAW/qH,EAAEV,EAAG+hD,EAAE/hD,IAEhCU,EAAE00C,OAAO4K,EAoBX,SAAmBt/C,EAAGqhD,EAAG2qE,GACvB,GAAI3qE,EAAG,CAUL,IATA,IAQIhpC,EARA83G,EAAMnwH,EACNowH,EAAMpwH,EACN0vH,EAAMruE,EACNgvE,EAAMF,EAAIz7E,OAAO4iB,SAAS,GAC1Bg5D,EAAMH,EAAI/xE,EACVmyE,EAAMH,EAAIhyE,EACVoyE,EAAMd,EAAItxE,EACVqyE,EAAMJ,EAAIjyE,EAEPsxE,EAAMN,GAAUM,GAAMS,EAAMhB,GAASgB,GAAMT,GAAOS,GACvDE,EAAMlB,GAASkB,IACfD,EAAMhB,GAAUgB,IACZvvH,EAAIb,GACRqY,EAAQq3G,EAAIl0C,EAAIg1C,EAAML,EAAI30C,EAAI80C,EAAMvF,EAAW2E,EAAIpwH,EAAG6wH,EAAI7wH,IAC9C,IACV+vH,GAAYI,GAAaC,EAAK1vH,EAAGgsH,GAAWhsH,EAAGqY,GAC/Ci4G,GAAOj4G,EACPk4G,GAAOl4G,GAETm4G,GAAOd,EAAItxE,EACXkyE,GAAOH,EAAI/xE,EACXqyE,GAAOJ,EAAIjyE,EACXmyE,GAAOH,EAAIhyE,EAETsxE,IAAQN,GAAUgB,KACpBA,EAAIhxH,EAAIswH,EACRU,EAAIhyE,GAAKoyE,EAAMD,GAEbJ,IAAQhB,GAASkB,KACnBA,EAAIjxH,EAAI+wH,EACRE,EAAIjyE,GAAKkyE,EAAMG,EACfzE,EAAWhsH,EAEf,CACA,OAAOgsH,CACT,CAzDe0E,CAAU1wH,EAAGqhD,EAAGrhD,EAAE00C,OAAO4K,GAAK0wE,EAAS,GACtD,CAGA,SAASF,EAAW9vH,GAClBA,EAAEV,EAAEiD,EAAIvC,EAAEw7E,EAAIx7E,EAAE00C,OAAO0J,EACvBp+C,EAAEo+C,GAAKp+C,EAAE00C,OAAO0J,CAClB,CAoDA,SAAS2xE,EAASzuH,GAChBA,EAAKiB,GAAKkuC,EACVnvC,EAAKnC,EAAImC,EAAK0kH,MAAQt1E,CACxB,CAcA,OAZAlpC,EAAKujH,WAAa,SAASxoH,GACzB,OAAOmX,UAAU9c,QAAUmuH,EAAaxoH,EAAGiF,GAAQujH,CACrD,EAEAvjH,EAAKhD,KAAO,SAASjC,GACnB,OAAOmX,UAAU9c,QAAUouH,GAAW,EAAOv6E,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAIiF,GAASwjH,EAAW,KAAO,CAACv6E,EAAIC,EACvG,EAEAlpC,EAAKwjH,SAAW,SAASzoH,GACvB,OAAOmX,UAAU9c,QAAUouH,GAAW,EAAMv6E,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAIiF,GAASwjH,EAAW,CAACv6E,EAAIC,GAAM,IACrG,EAEOlpC,CACT,CC5Oe,YAASktC,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GAO1C,IANA,IACI9P,EADAuzC,EAAQH,EAAO4iB,SAEfx6D,GAAK,EACLiD,EAAI80C,EAAMj4C,OACVU,EAAIo3C,EAAOt0C,QAAUgR,EAAKuoB,GAAM+a,EAAOt0C,QAElCtD,EAAIiD,IACXuB,EAAOuzC,EAAM/3C,IAASw4C,GAAKA,EAAIh0C,EAAKurC,GAAKA,EACzCvrC,EAAKq4B,GAAKA,EAAIr4B,EAAK8P,GAAKuoB,GAAMr4B,EAAKlB,MAAQ9C,CAE/C,CD8DAqyH,GAASxtH,UAAYiD,OAAOy4C,OAAOr9C,GAAK2B,WEtEjC,IAAI+2G,IAAO,EAAIjzG,KAAKoG,KAAK,IAAM,EAE/B,SAASskH,GAAch4E,EAAOjE,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GAkBvD,IAjBA,IAEI62B,EACA2oF,EAIAngF,EAAIC,EAEJmgF,EACAzzC,EACAxB,EACAk1C,EACAC,EACA9zG,EACA+zG,EAfA/9E,EAAO,GACP4B,EAAQH,EAAO4iB,SAGfwkB,EAAK,EACLh/B,EAAK,EACL/8C,EAAI80C,EAAMj4C,OAEVwD,EAAQs0C,EAAOt0C,MASZ07E,EAAK/7E,GAAG,CACb0wC,EAAK5D,EAAKyI,EAAI5E,EAAKt/B,EAAKuoB,EAGxB,GAAGk3F,EAAWh8E,EAAMiI,KAAM18C,aAAeywH,GAAY/zE,EAAK/8C,GAO1D,IANAq9E,EAAWxB,EAAWi1C,EAEtBG,EAAOH,EAAWA,GADlB5zG,EAAQhX,KAAKvC,IAAIgtC,EAAKD,EAAIA,EAAKC,IAAOtwC,EAAQu4C,IAE9Co4E,EAAW9qH,KAAKvC,IAAIk4E,EAAWo1C,EAAMA,EAAO5zC,GAGrCtgC,EAAK/8C,IAAK+8C,EAAI,CAMnB,GALA+zE,GAAYD,EAAY/7E,EAAMiI,GAAI18C,MAC9BwwH,EAAYxzC,IAAUA,EAAWwzC,GACjCA,EAAYh1C,IAAUA,EAAWg1C,GACrCI,EAAOH,EAAWA,EAAW5zG,GAC7B6zG,EAAW7qH,KAAKvC,IAAIk4E,EAAWo1C,EAAMA,EAAO5zC,IAC7B2zC,EAAU,CAAEF,GAAYD,EAAW,KAAO,CACzDG,EAAWD,CACb,CAGA79E,EAAKl3C,KAAKksC,EAAM,CAAC7nC,MAAOywH,EAAUI,KAAMxgF,EAAKC,EAAI4mB,SAAUziB,EAAMvhC,MAAMwoE,EAAIh/B,KACvE7U,EAAIgpF,KAAM,GAAYhpF,EAAKqN,EAAI3b,EAAIkT,EAAIzsC,EAAQu5B,GAAM+W,EAAKmgF,EAAWzwH,EAAQgR,GAC5E,GAAa62B,EAAKqN,EAAI3b,EAAIv5B,EAAQk1C,GAAM7E,EAAKogF,EAAWzwH,EAAQysC,EAAIz7B,GACzEhR,GAASywH,EAAU/0C,EAAKh/B,CAC1B,CAEA,OAAO7J,CACT,CAEA,SAAe,SAAUu7D,EAAO71D,GAE9B,SAASu4E,EAASx8E,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GACpCu/G,GAAch4E,EAAOjE,EAAQY,EAAI3b,EAAIkT,EAAIz7B,EAC3C,CAMA,OAJA8/G,EAASv4E,MAAQ,SAASp2C,GACxB,OAAOisG,GAAQjsG,GAAKA,GAAK,EAAIA,EAAI,EACnC,EAEO2uH,CACR,CAXD,CAWGhY,IC5DY,cACb,IAAIiY,EAAOD,GACPzpH,GAAQ,EACRgpC,EAAK,EACLC,EAAK,EACL0gF,EAAe,CAAC,GAChBC,EAAetF,GACfuF,EAAavF,GACbwF,EAAexF,GACfyF,EAAgBzF,GAChB0F,EAAc1F,GAElB,SAAS2F,EAAQjwH,GAQf,OAPAA,EAAK6zC,GACL7zC,EAAKk4B,GAAK,EACVl4B,EAAKorC,GAAK4D,EACVhvC,EAAK2P,GAAKs/B,EACVjvC,EAAKiqH,WAAW0C,GAChBgD,EAAe,CAAC,GACZ3pH,GAAOhG,EAAKiqH,WAAW,IACpBjqH,CACT,CAEA,SAAS2sH,EAAa9sH,GACpB,IAAI+C,EAAI+sH,EAAa9vH,EAAK0kH,OACtB1wE,EAAKh0C,EAAKg0C,GAAKjxC,EACfs1B,EAAKr4B,EAAKq4B,GAAKt1B,EACfwoC,EAAKvrC,EAAKurC,GAAKxoC,EACf+M,EAAK9P,EAAK8P,GAAK/M,EACfwoC,EAAKyI,IAAIA,EAAKzI,GAAMyI,EAAKzI,GAAM,GAC/Bz7B,EAAKuoB,IAAIA,EAAKvoB,GAAMuoB,EAAKvoB,GAAM,GACnC9P,EAAKg0C,GAAKA,EACVh0C,EAAKq4B,GAAKA,EACVr4B,EAAKurC,GAAKA,EACVvrC,EAAK8P,GAAKA,EACN9P,EAAKg2D,WACPjzD,EAAI+sH,EAAa9vH,EAAK0kH,MAAQ,GAAKqL,EAAa/vH,GAAQ,EACxDg0C,GAAMm8E,EAAYnwH,GAAQ+C,EAC1Bs1B,GAAM23F,EAAWhwH,GAAQ+C,GACzBwoC,GAAM0kF,EAAajwH,GAAQ+C,GAElBixC,IAAIA,EAAKzI,GAAMyI,EAAKzI,GAAM,IADnCz7B,GAAMogH,EAAclwH,GAAQ+C,GAEnBs1B,IAAIA,EAAKvoB,GAAMuoB,EAAKvoB,GAAM,GACnC+/G,EAAK7vH,EAAMg0C,EAAI3b,EAAIkT,EAAIz7B,GAE3B,CA0CA,OAxCAsgH,EAAQjqH,MAAQ,SAASlF,GACvB,OAAOmX,UAAU9c,QAAU6K,IAAUlF,EAAGmvH,GAAWjqH,CACrD,EAEAiqH,EAAQltH,KAAO,SAASjC,GACtB,OAAOmX,UAAU9c,QAAU6zC,GAAMluC,EAAE,GAAImuC,GAAMnuC,EAAE,GAAImvH,GAAW,CAACjhF,EAAIC,EACrE,EAEAghF,EAAQP,KAAO,SAAS5uH,GACtB,OAAOmX,UAAU9c,QAAUu0H,EAAOrF,GAASvpH,GAAImvH,GAAWP,CAC5D,EAEAO,EAAQ14F,QAAU,SAASz2B,GACzB,OAAOmX,UAAU9c,OAAS80H,EAAQL,aAAa9uH,GAAGovH,aAAapvH,GAAKmvH,EAAQL,cAC9E,EAEAK,EAAQL,aAAe,SAAS9uH,GAC9B,OAAOmX,UAAU9c,QAAUy0H,EAA4B,mBAAN9uH,EAAmBA,EAAI,IAAUA,GAAImvH,GAAWL,CACnG,EAEAK,EAAQC,aAAe,SAASpvH,GAC9B,OAAOmX,UAAU9c,OAAS80H,EAAQJ,WAAW/uH,GAAGgvH,aAAahvH,GAAGivH,cAAcjvH,GAAGkvH,YAAYlvH,GAAKmvH,EAAQJ,YAC5G,EAEAI,EAAQJ,WAAa,SAAS/uH,GAC5B,OAAOmX,UAAU9c,QAAU00H,EAA0B,mBAAN/uH,EAAmBA,EAAI,IAAUA,GAAImvH,GAAWJ,CACjG,EAEAI,EAAQH,aAAe,SAAShvH,GAC9B,OAAOmX,UAAU9c,QAAU20H,EAA4B,mBAANhvH,EAAmBA,EAAI,IAAUA,GAAImvH,GAAWH,CACnG,EAEAG,EAAQF,cAAgB,SAASjvH,GAC/B,OAAOmX,UAAU9c,QAAU40H,EAA6B,mBAANjvH,EAAmBA,EAAI,IAAUA,GAAImvH,GAAWF,CACpG,EAEAE,EAAQD,YAAc,SAASlvH,GAC7B,OAAOmX,UAAU9c,QAAU60H,EAA2B,mBAANlvH,EAAmBA,EAAI,IAAUA,GAAImvH,GAAWD,CAClG,EAEOC,CACT,CC7Fe,YAASh9E,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GAC1C,IACItU,EACAsL,EAFAysC,EAAQH,EAAO4iB,SACZv3D,EAAI80C,EAAMj4C,OACRg1H,EAAO,IAAI/7G,MAAM9V,EAAI,GAE9B,IAAK6xH,EAAK,GAAKxpH,EAAMtL,EAAI,EAAGA,EAAIiD,IAAKjD,EACnC80H,EAAK90H,EAAI,GAAKsL,GAAOysC,EAAM/3C,GAAGsD,OAKhC,SAAS+tH,EAAUrxH,EAAGsJ,EAAGhG,EAAOk1C,EAAI3b,EAAIkT,EAAIz7B,GAC1C,GAAItU,GAAKsJ,EAAI,EAAG,CACd,IAAI9E,EAAOuzC,EAAM/3C,GAGjB,OAFAwE,EAAKg0C,GAAKA,EAAIh0C,EAAKq4B,GAAKA,EACxBr4B,EAAKurC,GAAKA,OAAIvrC,EAAK8P,GAAKA,EAE1B,CAOA,IALA,IAAIygH,EAAcD,EAAK90H,GACnBg1H,EAAe1xH,EAAQ,EAAKyxH,EAC5Bv0H,EAAIR,EAAI,EACR64E,EAAKvvE,EAAI,EAEN9I,EAAIq4E,GAAI,CACb,IAAIC,EAAMt4E,EAAIq4E,IAAO,EACjBi8C,EAAKh8C,GAAOk8C,EAAax0H,EAAIs4E,EAAM,EAClCD,EAAKC,CACZ,CAEKk8C,EAAcF,EAAKt0H,EAAI,GAAOs0H,EAAKt0H,GAAKw0H,GAAgBh1H,EAAI,EAAIQ,KAAKA,EAE1E,IAAIy0H,EAAYH,EAAKt0H,GAAKu0H,EACtBG,EAAa5xH,EAAQ2xH,EAEzB,GAAKllF,EAAKyI,EAAOlkC,EAAKuoB,EAAK,CACzB,IAAIs4F,EAAK7xH,GAASk1C,EAAK08E,EAAanlF,EAAKklF,GAAa3xH,EAAQysC,EAC9DshF,EAAUrxH,EAAGQ,EAAGy0H,EAAWz8E,EAAI3b,EAAIs4F,EAAI7gH,GACvC+8G,EAAU7wH,EAAG8I,EAAG4rH,EAAYC,EAAIt4F,EAAIkT,EAAIz7B,EAC1C,KAAO,CACL,IAAI8gH,EAAK9xH,GAASu5B,EAAKq4F,EAAa5gH,EAAK2gH,GAAa3xH,EAAQgR,EAC9D+8G,EAAUrxH,EAAGQ,EAAGy0H,EAAWz8E,EAAI3b,EAAIkT,EAAIqlF,GACvC/D,EAAU7wH,EAAG8I,EAAG4rH,EAAY18E,EAAI48E,EAAIrlF,EAAIz7B,EAC1C,CACF,CAnCA+8G,CAAU,EAAGpuH,EAAG20C,EAAOt0C,MAAOk1C,EAAI3b,EAAIkT,EAAIz7B,EAoC5C,CC1Ce,YAASsjC,EAAQY,EAAI3b,EAAIkT,EAAIz7B,IAC1B,EAAfsjC,EAAOsxE,MAAY,GAAQiL,IAAMv8E,EAAQY,EAAI3b,EAAIkT,EAAIz7B,EACxD,CCDA,SAAe,SAAUo9F,EAAO71D,GAE9B,SAASw5E,EAAWz9E,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GACtC,IAAK6hC,EAAOyB,EAAO09E,YAAen/E,EAAK0F,QAAUA,EAU/C,IATA,IAAI1F,EACAhL,EACA4M,EACA/3C,EAEAiD,EADAqG,GAAK,EAELg4C,EAAInL,EAAKr2C,OACTwD,EAAQs0C,EAAOt0C,QAEVgG,EAAIg4C,GAAG,CAEd,IADevJ,GAAf5M,EAAMgL,EAAK7sC,IAAgBkxD,SACtBx6D,EAAImrC,EAAI7nC,MAAQ,EAAGL,EAAI80C,EAAMj4C,OAAQE,EAAIiD,IAAKjD,EAAGmrC,EAAI7nC,OAASy0C,EAAM/3C,GAAGsD,MACxE6nC,EAAIgpF,KAAM,GAAYhpF,EAAKqN,EAAI3b,EAAIkT,EAAIzsC,EAAQu5B,IAAOvoB,EAAKuoB,GAAMsO,EAAI7nC,MAAQA,EAAQgR,GACpF,GAAa62B,EAAKqN,EAAI3b,EAAIv5B,EAAQk1C,IAAOzI,EAAKyI,GAAMrN,EAAI7nC,MAAQA,EAAQysC,EAAIz7B,GACjFhR,GAAS6nC,EAAI7nC,KACf,MAEAs0C,EAAO09E,UAAYn/E,EAAO09E,GAAch4E,EAAOjE,EAAQY,EAAI3b,EAAIkT,EAAIz7B,GACnE6hC,EAAK0F,MAAQA,CAEjB,CAMA,OAJAw5E,EAAWx5E,MAAQ,SAASp2C,GAC1B,OAAOisG,GAAQjsG,GAAKA,GAAK,EAAIA,EAAI,EACnC,EAEO4vH,CACR,CA/BD,CA+BGjZ,ICnCY,YAASj2G,GACtB,IAAIlD,EAAIkD,EAAMrG,OACd,OAAO,SAASwC,GACd,OAAO6D,EAAMgD,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAIzD,EAAI,EAAGkG,KAAKC,MAAM9G,EAAIW,KAC1D,CACF,CCHe,YAASc,EAAGC,GACzB,IAAIhE,EAAIwvF,IAAKzrF,GAAIC,GACjB,OAAO,SAAS1B,GACd,IAAImD,EAAIzF,EAAEsC,GACV,OAAOmD,EAAI,IAAM0D,KAAKC,MAAM3D,EAAI,IAClC,CACF,CCRe,YAAS1B,EAAGC,GACzB,OAAOD,GAAKA,EAAGC,GAAKA,EAAG,SAAS1B,GAC9B,OAAO6G,KAAKwB,MAAM5G,GAAK,EAAIzB,GAAK0B,EAAI1B,EACtC,CACF,CCFA,SAAS6/F,GAAK18F,GACZ,QAASA,EAAI0D,KAAK4qC,IAAItuC,IAAM,EAAIA,GAAK,CACvC,CAUA,SAAe,SAAU8vH,EAAQC,EAAKC,EAAMC,GAI1C,SAASnvF,EAAKq3B,EAAI51D,GAChB,IAKIhI,EACA4iD,EANA+yE,EAAM/3D,EAAG,GAAIg4D,EAAMh4D,EAAG,GAAIk9B,EAAKl9B,EAAG,GAClCi4D,EAAM7tH,EAAG,GAAI8tH,EAAM9tH,EAAG,GAAI+yF,EAAK/yF,EAAG,GAClC2rC,EAAKkiF,EAAMF,EACX/hF,EAAKkiF,EAAMF,EACX3/G,EAAK09B,EAAKA,EAAKC,EAAKA,EAKxB,GAAI39B,EA5BO,MA6BT2sC,EAAIz5C,KAAKooB,IAAIwpE,EAAKD,GAAM06B,EACxBx1H,EAAI,SAASsC,GACX,MAAO,CACLqzH,EAAMrzH,EAAIqxC,EACViiF,EAAMtzH,EAAIsxC,EACVknD,EAAK3xF,KAAK4qC,IAAIyhF,EAAMlzH,EAAIsgD,GAE5B,MAIG,CACH,IAAI5sC,EAAK7M,KAAKoG,KAAK0G,GACf4xF,GAAM9M,EAAKA,EAAKD,EAAKA,EAAK46B,EAAOz/G,IAAO,EAAI6kF,EAAK26B,EAAOz/G,GACxDlM,GAAMixF,EAAKA,EAAKD,EAAKA,EAAK46B,EAAOz/G,IAAO,EAAI8kF,EAAK06B,EAAOz/G,GACxDm1G,EAAKhiH,KAAKooB,IAAIpoB,KAAKoG,KAAKs4F,EAAKA,EAAK,GAAKA,GACvCuoB,EAAKjnH,KAAKooB,IAAIpoB,KAAKoG,KAAKzF,EAAKA,EAAK,GAAKA,GAC3C84C,GAAKwtE,EAAKjF,GAAMqK,EAChBx1H,EAAI,SAASsC,GACX,IAtCMmD,EAsCF46C,EAAI/9C,EAAIsgD,EACRmzE,EAAS5zB,GAAKgpB,GACd3+G,EAAIsuF,GAAM26B,EAAOz/G,IAAO+/G,GAxCtBtwH,EAwCoC+vH,EAAMn1E,EAAI8qE,IAvCjD1lH,EAAI0D,KAAK4qC,IAAI,EAAItuC,IAAM,IAAMA,EAAI,IAL5C,SAAcA,GACZ,QAASA,EAAI0D,KAAK4qC,IAAItuC,IAAM,EAAIA,GAAK,CACvC,CA0CkE28F,CAAK+oB,IAC/D,MAAO,CACLwK,EAAMnpH,EAAImnC,EACViiF,EAAMppH,EAAIonC,EACVknD,EAAKi7B,EAAS5zB,GAAKqzB,EAAMn1E,EAAI8qE,GAEjC,CACF,CAIA,OAFAnrH,EAAEwoC,SAAe,IAAJoa,EAAW4yE,EAAMrsH,KAAK6sH,MAE5Bh2H,CACT,CAOA,OALAumC,EAAKivF,IAAM,SAAShzH,GAClB,IAAIsqE,EAAK3jE,KAAKvC,IAAI,MAAOpE,GAAIyzH,EAAKnpD,EAAKA,EACvC,OAAOyoD,EAAQzoD,EAAImpD,EAD6BA,EAAKA,EAEvD,EAEO1vF,CACR,CAxDD,CAwDGp9B,KAAK6sH,MAAO,EAAG,GCnElB,SAAS,GAAIxmC,GACX,OAAO,SAASxmF,EAAOC,GACrB,IAAIwC,EAAI+jF,GAAKxmF,EAAQ,GAASA,IAAQyC,GAAIxC,EAAM,GAASA,IAAMwC,GAC3D40C,EAAI,GAAMr3C,EAAMq3C,EAAGp3C,EAAIo3C,GACvBj8C,EAAI,GAAM4E,EAAM5E,EAAG6E,EAAI7E,GACvBmrD,EAAU,GAAMvmD,EAAMumD,QAAStmD,EAAIsmD,SACvC,OAAO,SAASjtD,GAKd,OAJA0G,EAAMyC,EAAIA,EAAEnJ,GACZ0G,EAAMq3C,EAAIA,EAAE/9C,GACZ0G,EAAM5E,EAAIA,EAAE9B,GACZ0G,EAAMumD,QAAUA,EAAQjtD,GACjB0G,EAAQ,EACjB,CACF,CACF,CAEA,SAAe,GAAIwmF,IACZ,IAAI0mC,GAAU,GAAI,ICjBV,SAAS,GAAIltH,EAAOC,GACjC,IAAI7E,EAAI,IAAO4E,EAAQ,GAASA,IAAQ5E,GAAI6E,EAAM,GAASA,IAAM7E,GAC7DL,EAAI,GAAMiF,EAAMjF,EAAGkF,EAAIlF,GACvBC,EAAI,GAAMgF,EAAMhF,EAAGiF,EAAIjF,GACvBurD,EAAU,GAAMvmD,EAAMumD,QAAStmD,EAAIsmD,SACvC,OAAO,SAASjtD,GAKd,OAJA0G,EAAM5E,EAAIA,EAAE9B,GACZ0G,EAAMjF,EAAIA,EAAEzB,GACZ0G,EAAMhF,EAAIA,EAAE1B,GACZ0G,EAAMumD,QAAUA,EAAQjtD,GACjB0G,EAAQ,EACjB,CACF,CCZA,SAAS,GAAIwmF,GACX,OAAO,SAASxmF,EAAOC,GACrB,IAAIwC,EAAI+jF,GAAKxmF,EAAQ,GAASA,IAAQyC,GAAIxC,EAAM,GAASA,IAAMwC,GAC3DgC,EAAI,GAAMzE,EAAMyE,EAAGxE,EAAIwE,GACvBrJ,EAAI,GAAM4E,EAAM5E,EAAG6E,EAAI7E,GACvBmrD,EAAU,GAAMvmD,EAAMumD,QAAStmD,EAAIsmD,SACvC,OAAO,SAASjtD,GAKd,OAJA0G,EAAMyC,EAAIA,EAAEnJ,GACZ0G,EAAMyE,EAAIA,EAAEnL,GACZ0G,EAAM5E,EAAIA,EAAE9B,GACZ0G,EAAMumD,QAAUA,EAAQjtD,GACjB0G,EAAQ,EACjB,CACF,CACF,CAEA,SAAe,GAAIwmF,IACZ,IAAI2mC,GAAU,GAAI,ICjBzB,SAASC,GAAU5mC,GACjB,OAAO,SAAU6mC,EAAeh0H,GAG9B,SAAS+zH,EAAUptH,EAAOC,GACxB,IAAIwC,EAAI+jF,GAAKxmF,EAAQ,GAAeA,IAAQyC,GAAIxC,EAAM,GAAeA,IAAMwC,GACvE40C,EAAI,GAAMr3C,EAAMq3C,EAAGp3C,EAAIo3C,GACvBj8C,EAAI,GAAM4E,EAAM5E,EAAG6E,EAAI7E,GACvBmrD,EAAU,GAAMvmD,EAAMumD,QAAStmD,EAAIsmD,SACvC,OAAO,SAASjtD,GAKd,OAJA0G,EAAMyC,EAAIA,EAAEnJ,GACZ0G,EAAMq3C,EAAIA,EAAE/9C,GACZ0G,EAAM5E,EAAIA,EAAE+E,KAAKkB,IAAI/H,EAAGD,IACxB2G,EAAMumD,QAAUA,EAAQjtD,GACjB0G,EAAQ,EACjB,CACF,CAIA,OAlBA3G,GAAKA,EAgBL+zH,EAAUxmC,MAAQymC,EAEXD,CACR,CApBM,CAoBJ,EACL,CAEA,SAAeA,GAAU5mC,IAClB,IAAI8mC,GAAgBF,GAAU,IC1BtB,SAASG,GAAUnhC,EAAa3uF,QAC9BnG,IAAXmG,IAAsBA,EAAS2uF,EAAaA,EAAc9xF,IAE9D,IADA,IAAItD,EAAI,EAAGiD,EAAIwD,EAAO3G,OAAS,EAAGoD,EAAIuD,EAAO,GAAIk8C,EAAI,IAAI5pC,MAAM9V,EAAI,EAAI,EAAIA,GACpEjD,EAAIiD,GAAG0/C,EAAE3iD,GAAKo1F,EAAYlyF,EAAGA,EAAIuD,IAASzG,IACjD,OAAO,SAASsC,GACd,IAAItC,EAAImJ,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAIzD,EAAI,EAAGkG,KAAKC,MAAM9G,GAAKW,KACpD,OAAO0/C,EAAE3iD,GAAGsC,EAAItC,EAClB,CACF,CCVe,YAASw2H,EAAcvzH,GAEpC,IADA,IAAIwzH,EAAU,IAAI19G,MAAM9V,GACfjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGy2H,EAAQz2H,GAAKw2H,EAAax2H,GAAKiD,EAAI,IAC/D,OAAOwzH,CACT,CCJe,YAASp5F,GAOtB,IANA,IAEIt5B,EAFA/D,GAAK,EACLiD,EAAIo6B,EAAQv9B,OAEZkE,EAAIq5B,EAAQp6B,EAAI,GAChBygG,EAAO,IAEF1jG,EAAIiD,GACXc,EAAIC,EACJA,EAAIq5B,EAAQr9B,GACZ0jG,GAAQ3/F,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAGjC,OAAO0/F,EAAO,CAChB,CCde,YAASrmE,GAUtB,IATA,IAIIt5B,EAEA0J,EANAzN,GAAK,EACLiD,EAAIo6B,EAAQv9B,OACZ2F,EAAI,EACJpD,EAAI,EAEJ2B,EAAIq5B,EAAQp6B,EAAI,GAEhBzC,EAAI,IAECR,EAAIiD,GACXc,EAAIC,EACJA,EAAIq5B,EAAQr9B,GACZQ,GAAKiN,EAAI1J,EAAE,GAAKC,EAAE,GAAKA,EAAE,GAAKD,EAAE,GAChC0B,IAAM1B,EAAE,GAAKC,EAAE,IAAMyJ,EACrBpL,IAAM0B,EAAE,GAAKC,EAAE,IAAMyJ,EAGvB,MAAe,CAAChI,GAATjF,GAAK,GAAW6B,EAAI7B,EAC7B,CCfe,YAASuD,EAAGC,EAAGyJ,GAC5B,OAAQzJ,EAAE,GAAKD,EAAE,KAAO0J,EAAE,GAAK1J,EAAE,KAAOC,EAAE,GAAKD,EAAE,KAAO0J,EAAE,GAAK1J,EAAE,GACnE,CCJA,SAAS2yH,GAAmB3yH,EAAGC,GAC7B,OAAOD,EAAE,GAAKC,EAAE,IAAMD,EAAE,GAAKC,EAAE,EACjC,CAKA,SAAS2yH,GAAwBt7G,GAC/B,MAAMpY,EAAIoY,EAAOvb,OACbs8E,EAAU,CAAC,EAAG,GAClB,IAAcp8E,EAAV0H,EAAO,EAEX,IAAK1H,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG,CACtB,KAAO0H,EAAO,GAAK,GAAM2T,EAAO+gE,EAAQ10E,EAAO,IAAK2T,EAAO+gE,EAAQ10E,EAAO,IAAK2T,EAAOrb,KAAO,KAAK0H,EAClG00E,EAAQ10E,KAAU1H,CACpB,CAEA,OAAOo8E,EAAQ5lE,MAAM,EAAG9O,EAC1B,CAEe,YAAS2T,GACtB,IAAKpY,EAAIoY,EAAOvb,QAAU,EAAG,OAAO,KAEpC,IAAIE,EACAiD,EACA2zH,EAAe,IAAI79G,MAAM9V,GACzB4zH,EAAgB,IAAI99G,MAAM9V,GAE9B,IAAKjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG42H,EAAa52H,GAAK,EAAEqb,EAAOrb,GAAG,IAAKqb,EAAOrb,GAAG,GAAIA,GAEzE,IADA42H,EAAajvH,KAAK+uH,IACb12H,EAAI,EAAGA,EAAIiD,IAAKjD,EAAG62H,EAAc72H,GAAK,CAAC42H,EAAa52H,GAAG,IAAK42H,EAAa52H,GAAG,IAEjF,IAAI82H,EAAeH,GAAwBC,GACvCG,EAAeJ,GAAwBE,GAGvCG,EAAWD,EAAa,KAAOD,EAAa,GAC5CG,EAAYF,EAAaA,EAAaj3H,OAAS,KAAOg3H,EAAaA,EAAah3H,OAAS,GACzFgnG,EAAO,GAIX,IAAK9mG,EAAI82H,EAAah3H,OAAS,EAAGE,GAAK,IAAKA,EAAG8mG,EAAK7nG,KAAKoc,EAAOu7G,EAAaE,EAAa92H,IAAI,KAC9F,IAAKA,GAAKg3H,EAAUh3H,EAAI+2H,EAAaj3H,OAASm3H,IAAaj3H,EAAG8mG,EAAK7nG,KAAKoc,EAAOu7G,EAAaG,EAAa/2H,IAAI,KAE7G,OAAO8mG,CACT,CChDe,YAASzpE,EAAS3zB,GAQ/B,IAPA,IAIIqmC,EAAIz7B,EAJJrR,EAAIo6B,EAAQv9B,OACZyH,EAAI81B,EAAQp6B,EAAI,GAChBwC,EAAIiE,EAAM,GAAIrH,EAAIqH,EAAM,GACxB8uC,EAAKjxC,EAAE,GAAIs1B,EAAKt1B,EAAE,GAElB+0C,GAAS,EAEJt8C,EAAI,EAAGA,EAAIiD,IAAKjD,EACP+vC,GAAhBxoC,EAAI81B,EAAQr9B,IAAW,IAAIsU,EAAK/M,EAAE,IACvBlF,GAAQw6B,EAAKx6B,GAAQoD,GAAK+yC,EAAKzI,IAAO1tC,EAAIiS,IAAOuoB,EAAKvoB,GAAMy7B,IAAKuM,GAAUA,GACtF9D,EAAKzI,EAAIlT,EAAKvoB,EAGhB,OAAOgoC,CACT,CCfe,YAASjf,GAUtB,IATA,IAGI62D,EACAC,EAJAn0F,GAAK,EACLiD,EAAIo6B,EAAQv9B,OACZkE,EAAIq5B,EAAQp6B,EAAI,GAGhBmxF,EAAKpwF,EAAE,GACPqwF,EAAKrwF,EAAE,GACPkzH,EAAY,IAEPl3H,EAAIiD,GACXixF,EAAKE,EACLD,EAAKE,EAILH,GAFAE,GADApwF,EAAIq5B,EAAQr9B,IACL,GAGPm0F,GAFAE,EAAKrwF,EAAE,GAGPkzH,GAAa/tH,KAAK+iG,MAAMhY,EAAIC,GAG9B,OAAO+iC,CACT,CCtBA,SAAe/tH,KAAW,OCE1B,GAAe,SAAUguH,EAAoB5iG,GAC3C,SAAS6iG,EAAc1wH,EAAKE,GAK1B,OAJAF,EAAa,MAAPA,EAAc,GAAKA,EACzBE,EAAa,MAAPA,EAAc,GAAKA,EACA,IAArBgW,UAAU9c,QAAc8G,EAAMF,EAAKA,EAAM,GACxCE,GAAOF,EACL,WACL,OAAO6tB,IAAW3tB,EAAMF,CAC1B,CACF,CAIA,OAFA0wH,EAAc7iG,OAAS4iG,EAEhBC,CACR,CAdD,CAcG,ICdH,GAAe,SAAUC,EAAgB9iG,GACvC,SAAS+iG,EAAU5wH,EAAKE,GAItB,OAHIgW,UAAU9c,OAAS,IAAG8G,EAAMF,EAAKA,EAAM,GAC3CA,EAAMyC,KAAKC,MAAM1C,GACjBE,EAAMuC,KAAKC,MAAMxC,GAAOF,EACjB,WACL,OAAOyC,KAAKC,MAAMmrB,IAAW3tB,EAAMF,EACrC,CACF,CAIA,OAFA4wH,EAAU/iG,OAAS8iG,EAEZC,CACR,CAbD,CAaG,ICbH,GAAe,SAAUC,EAAmBhjG,GAC1C,SAASijG,EAAaC,EAAIC,GACxB,IAAIjyH,EAAGpB,EAGP,OAFAozH,EAAW,MAANA,EAAa,GAAKA,EACvBC,EAAiB,MAATA,EAAgB,GAAKA,EACtB,WACL,IAAIr1H,EAGJ,GAAS,MAALoD,EAAWpD,EAAIoD,EAAGA,EAAI,UAGrB,GACHA,EAAe,EAAX8uB,IAAe,EACnBlyB,EAAe,EAAXkyB,IAAe,EACnBlwB,EAAIoB,EAAIA,EAAIpD,EAAIA,SACRgC,GAAKA,EAAI,GAEnB,OAAOozH,EAAKC,EAAQr1H,EAAI8G,KAAKoG,MAAM,EAAIpG,KAAKooB,IAAIltB,GAAKA,EACvD,CACF,CAIA,OAFAmzH,EAAajjG,OAASgjG,EAEfC,CACR,CAzBD,CAyBG,ICxBH,GAAe,SAAUG,EAAsBpjG,GAC7C,IAAIpwB,EAAIk6G,GAAO9pF,OAAOA,GAEtB,SAASqjG,IACP,IAAIJ,EAAerzH,EAAEyb,MAAMpgB,KAAMod,WACjC,OAAO,WACL,OAAOzT,KAAK4qC,IAAIyjF,IAClB,CACF,CAIA,OAFAI,EAAgBrjG,OAASojG,EAElBC,CACR,CAbD,CAaG,ICdH,GAAe,SAAUC,EAAsBtjG,GAC7C,SAASujG,EAAgB70H,GACvB,OAAKA,GAAKA,IAAM,EAAU,IAAM,EACzB,WACL,IAAK,IAAIqI,EAAM,EAAGtL,EAAIiD,EAAGjD,EAAI,IAAKA,EAAGsL,GAAOipB,IAC5C,OAAOjpB,EAAMtL,EAAIu0B,GACnB,CACF,CAIA,OAFAujG,EAAgBvjG,OAASsjG,EAElBC,CACR,CAZD,CAYG,ICXH,GAAe,SAAUC,EAAkBxjG,GACzC,IAAIouB,EAAIq1E,GAAUzjG,OAAOA,GAEzB,SAAS0jG,EAAYh1H,GAEnB,GAAiB,IAAZA,GAAKA,GAAU,OAAOsxB,EAC3B,IAAIujG,EAAkBn1E,EAAE1/C,GACxB,OAAO,WACL,OAAO60H,IAAoB70H,CAC7B,CACF,CAIA,OAFAg1H,EAAY1jG,OAASwjG,EAEdE,CACR,CAfD,CAeG,IChBH,GAAe,SAAUC,EAAwB3jG,GAC/C,SAAS4jG,EAAkBhc,GACzB,OAAO,WACL,OAAQhzG,KAAKivH,OAAO7jG,KAAY4nF,CAClC,CACF,CAIA,OAFAgc,EAAkB5jG,OAAS2jG,EAEpBC,CACR,CAVD,CAUG,ICVH,GAAe,SAAUE,EAAmB9jG,GAC1C,SAAS+jG,EAAan4G,GACpB,IAAKA,GAASA,GAAS,EAAG,MAAM,IAAIm5D,WAAW,iBAE/C,OADAn5D,EAAQ,GAAKA,EACN,WACL,OAAOhX,KAAKkB,IAAI,EAAIkqB,IAAUpU,EAChC,CACF,CAIA,OAFAm4G,EAAa/jG,OAAS8jG,EAEfC,CACR,CAZD,CAYG,ICZH,GAAe,SAAUC,EAAsBhkG,GAC7C,SAASikG,EAAgBjxH,GACvB,IAAKA,GAAKA,GAAK,GAAKA,EAAI,EAAG,MAAM,IAAI+xE,WAAW,aAChD,OAAO,WACL,OAAOnwE,KAAKC,MAAMmrB,IAAWhtB,EAC/B,CACF,CAIA,OAFAixH,EAAgBjkG,OAASgkG,EAElBC,CACR,CAXD,CAWG,ICXH,GAAe,SAAUC,EAAsBlkG,GAC7C,SAASmkG,EAAgBnxH,GACvB,IAAKA,GAAKA,GAAK,GAAKA,EAAI,EAAG,MAAM,IAAI+xE,WAAW,aAChD,OAAU,IAAN/xE,EAAgB,IAAMsxC,IAChB,IAANtxC,EAAgB,IAAM,GAC1BA,EAAI4B,KAAKivH,OAAO7wH,GACT,WACL,OAAO,EAAI4B,KAAKC,MAAMD,KAAKivH,OAAO7jG,KAAYhtB,EAChD,EACF,CAIA,OAFAmxH,EAAgBnkG,OAASkkG,EAElBC,CACR,CAdD,CAcG,ICbH,GAAe,SAAUC,EAAkBpkG,GACzC,IAAIijG,EAAenZ,GAAO9pF,OAAOA,EAAd8pF,GAEnB,SAASua,EAAYp4H,EAAGqwE,GACtB,IAAKrwE,GAAKA,GAAK,EAAG,MAAM,IAAI84E,WAAW,aAEvC,GAAU,IAAN94E,EAAS,MAAO,IAAM,EAG1B,GAFAqwE,EAAiB,MAATA,EAAgB,GAAKA,EAEnB,IAANrwE,EAAS,MAAO,KAAO2I,KAAKivH,OAAO7jG,KAAYs8C,EAEnD,IAAI7pE,GAAKxG,EAAI,EAAIA,EAAI,EAAIA,GAAK,EAAI,EAC9BiN,EAAI,GAAK,EAAItE,KAAKoG,KAAKvI,IACvB6xH,EAAar4H,EAAI,EAAI,IAAM2I,KAAKkB,IAAIkqB,IAAU,EAAI/zB,GAAK,IAAM,EACjE,OAAO,WACL,EAAG,CACD,GACE,IAAIiF,EAAI+xH,IACJt0H,EAAI,EAAIuK,EAAIhI,QACTvC,GAAK,GACdA,GAAKA,EAAIA,EACT,IAAIsJ,EAAI,EAAI+nB,GACd,OAAS/nB,GAAK,EAAI,MAAS/G,EAAIA,EAAIA,EAAIA,GAAK0D,KAAKooB,IAAI/kB,IAAM,GAAM/G,EAAIA,EAAIuB,GAAK,EAAI9D,EAAIiG,KAAKooB,IAAIruB,KAC/F,OAAO8D,EAAI9D,EAAI21H,IAAehoD,CAChC,CACF,CAIA,OAFA+nD,EAAYrkG,OAASokG,EAEdC,CACR,CA9BD,CA8BG,IC9BH,GAAe,SAAUE,EAAiBvkG,GACxC,IAAIwkG,EAAI,GAAMxkG,OAAOA,GAErB,SAASykG,EAAW74G,EAAO+zG,GACzB,IAAI90E,EAAI25E,EAAE54G,GACNk/B,EAAI05E,EAAE7E,GACV,OAAO,WACL,IAAIzuH,EAAI25C,IACR,OAAa,IAAN35C,EAAU,EAAIA,GAAKA,EAAI45C,IAChC,CACF,CAIA,OAFA25E,EAAWzkG,OAASukG,EAEbE,CACR,CAfD,CAeG,ICdH,GAAe,SAAUC,EAAqB1kG,GAC5C,IAAIwkG,EAAIG,GAAU3kG,OAAOA,GACrBnoB,EAAI8nH,GAAK3/F,OAAOA,GAEpB,SAAS4kG,EAAel2H,EAAGsE,GAEzB,OADAtE,GAAKA,GACAsE,GAAKA,IAAM,EAAU,IAAMtE,EAC5BsE,GAAK,EAAU,IAAM,EAClB,WAEL,IADA,IAAIiuC,EAAM,EAAG4jF,EAAKn2H,EAAGo2H,EAAK9xH,EACnB6xH,EAAKC,EAAK,IAAMD,GAAM,EAAIC,GAAM,IAAI,CACzC,IAAIr5H,EAAImJ,KAAKC,OAAOgwH,EAAK,GAAKC,GAC1Bh3H,EAAI+J,EAAEpM,EAAGo5H,EAAKp5H,EAAI,EAAdoM,GACJ/J,GAAKg3H,GACP7jF,GAAOx1C,EACPo5H,GAAMp5H,EACNq5H,GAAMA,EAAKh3H,IAAM,EAAIA,KAErB+2H,EAAKp5H,EAAI,EACTq5H,GAAMh3H,EAEV,CAIA,IAHA,IAAI0hG,EAAOs1B,EAAK,GAEZ92H,EAAIw2H,EADKh1B,EAAOs1B,EAAK,EAAIA,GAEpBh5E,EAAI99C,IAAK/B,EAAI,EAAG6/C,GAAK+4E,IAAM54H,EAAG6/C,GAAK99C,IAC5C,OAAOizC,GAAOuuD,EAAOvjG,EAAI44H,EAAK54H,EAChC,CACF,CAIA,OAFA24H,EAAe5kG,OAAS0kG,EAEjBE,CACR,CAjCD,CAiCG,ICnCH,GAAe,SAAUG,EAAoB/kG,GAC3C,SAASglG,EAAc/4H,EAAGuD,EAAGC,GAC3B,IAAIw1H,EASJ,OARiB,IAAZh5H,GAAKA,GACRg5H,EAAY/zH,IAAM0D,KAAKooB,IAAI9rB,IAE3BjF,EAAI,EAAIA,EACRg5H,EAAY/zH,GAAK0D,KAAKkB,IAAI5E,EAAGjF,IAE/BuD,EAAS,MAALA,EAAY,GAAKA,EACrBC,EAAS,MAALA,EAAY,GAAKA,EACd,WACL,OAAOD,EAAIC,EAAIw1H,GAAWrwH,KAAKivH,OAAO7jG,KACxC,CACF,CAIA,OAFAglG,EAAchlG,OAAS+kG,EAEhBC,CACR,CAnBD,CAmBG,ICnBH,GAAe,SAAUE,EAAmBllG,GAC1C,SAASmlG,EAAa31H,EAAGC,GAGvB,OAFAD,EAAS,MAALA,EAAY,GAAKA,EACrBC,EAAS,MAALA,EAAY,GAAKA,EACd,WACL,OAAOD,EAAIC,EAAImF,KAAK0f,IAAI1f,KAAK2qC,GAAKvf,IACpC,CACF,CAIA,OAFAmlG,EAAanlG,OAASklG,EAEfC,CACR,CAZD,CAYG,ICZH,GAAe,SAAUC,EAAqBplG,GAC5C,SAASqlG,EAAe71H,EAAGC,GAGzB,OAFAD,EAAS,MAALA,EAAY,GAAKA,EACrBC,EAAS,MAALA,EAAY,GAAKA,EACd,WACL,IAAIwI,EAAI+nB,IACR,OAAOxwB,EAAIC,EAAImF,KAAKooB,IAAI/kB,GAAK,EAAIA,GACnC,CACF,CAIA,OAFAotH,EAAerlG,OAASolG,EAEjBC,CACR,CAbD,CAaG,ICXH,GAAe,SAAUC,EAAoBtlG,GAC3C,IAAIwkG,EAAI,GAAMxkG,OAAOA,GACjBnoB,EAAI0tH,GAASvlG,OAAOA,GAExB,SAASwlG,EAAc5d,GACrB,OAAO,WAEL,IADA,IAAI3mE,EAAM,EAAGpxC,EAAI+3G,EACV/3G,EAAI,IAAI,CACb,IAAInB,EAAIkG,KAAKC,MAAM,KAAQhF,GACvB9B,EAAIy2H,EAAE91H,EAAF81H,GACR,GAAIz2H,EAAI8B,EAAG,OAAOoxC,EAAMppC,EAAEnJ,EAAI,EAAGmB,EAAI9B,EAAb8J,GACxBopC,GAAOvyC,EACPmB,GAAK9B,CACP,CACA,IAAK,IAAI+9C,GAAKl3C,KAAKivH,OAAO7jG,KAAW/zB,EAAI,EAAG6/C,GAAKj8C,IAAK5D,EAAG6/C,GAAKl3C,KAAKivH,OAAO7jG,KAC1E,OAAOihB,EAAMh1C,CACf,CACF,CAIA,OAFAu5H,EAAcxlG,OAASslG,EAEhBE,CACR,CAtBD,CAsBG,ICzBGC,GAAM,QACNnmD,GAAM,WACNomD,GAAM,EAAI,WAED,SAAS,GAAI/6E,EAAO/1C,KAAKwtB,UACtC,IAAI88D,EAAgE,GAAvD,GAAKv0C,GAAQA,EAAO,EAAIA,EAAO+6E,GAAM9wH,KAAKiE,IAAI8xC,IAC3D,MAAO,KAAOu0C,EAAQumC,GAAMvmC,EAAQ5f,GAAM,EAAGomD,IAAOxmC,IAAU,GAChE,CCRO,SAASymC,GAAU5+F,EAAQn1B,GAChC,OAAQyW,UAAU9c,QAChB,KAAK,EAAG,MACR,KAAK,EAAGN,KAAK2G,MAAMm1B,GAAS,MAC5B,QAAS97B,KAAK2G,MAAMA,GAAOm1B,OAAOA,GAEpC,OAAO97B,IACT,CAEO,SAAS26H,GAAiB7+F,EAAQk7F,GACvC,OAAQ55G,UAAU9c,QAChB,KAAK,EAAG,MACR,KAAK,EACmB,mBAAXw7B,EAAuB97B,KAAKg3H,aAAal7F,GAC/C97B,KAAK2G,MAAMm1B,GAChB,MAEF,QACE97B,KAAK87B,OAAOA,GACgB,mBAAjBk7F,EAA6Bh3H,KAAKg3H,aAAaA,GACrDh3H,KAAK2G,MAAMqwH,GAIpB,OAAOh3H,IACT,CCtBO,MAAM46H,GAAWr3H,OAAO,YAEhB,SAASs3H,KACtB,IAAItzH,EAAQ,IAAIo0E,EACZ7/C,EAAS,GACTn1B,EAAQ,GACRm0H,EAAUF,GAEd,SAAS5hG,EAAMxxB,GACb,IAAIhH,EAAI+G,EAAMyB,IAAIxB,GAClB,QAAU1G,IAANN,EAAiB,CACnB,GAAIs6H,IAAYF,GAAU,OAAOE,EACjCvzH,EAAMmL,IAAIlL,EAAGhH,EAAIs7B,EAAOr8B,KAAK+H,GAAK,EACpC,CACA,OAAOb,EAAMnG,EAAImG,EAAMrG,OACzB,CA0BA,OAxBA04B,EAAM8C,OAAS,SAAS94B,GACtB,IAAKoa,UAAU9c,OAAQ,OAAOw7B,EAAO9kB,QACrC8kB,EAAS,GAAIv0B,EAAQ,IAAIo0E,EACzB,IAAK,MAAM73E,KAASd,EACduE,EAAMsL,IAAI/O,IACdyD,EAAMmL,IAAI5O,EAAOg4B,EAAOr8B,KAAKqE,GAAS,GAExC,OAAOk1B,CACT,EAEAA,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,QAAUqG,EAAQ4S,MAAM+vB,KAAKtmC,GAAIg2B,GAASryB,EAAMqQ,OACnE,EAEAgiB,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEA9hG,EAAM2pD,KAAO,WACX,OAAOk4C,GAAQ/+F,EAAQn1B,GAAOm0H,QAAQA,EACxC,EAEAJ,GAAUt6G,MAAM4Y,EAAO5b,WAEhB4b,CACT,CCzCe,SAAS+hG,KACtB,IAKI92H,EACAw6B,EANAzF,EAAQ6hG,KAAUC,aAAQh6H,GAC1Bg7B,EAAS9C,EAAM8C,OACfk/F,EAAehiG,EAAMryB,MACrBglH,EAAK,EACLiF,EAAK,EAGLzlH,GAAQ,EACR4pH,EAAe,EACfM,EAAe,EACfpgE,EAAQ,GAIZ,SAASgmE,IACP,IAAIx3H,EAAIq4B,IAASx7B,OACbob,EAAUk1G,EAAKjF,EACfniH,EAAQkS,EAAUk1G,EAAKjF,EACvBx5F,EAAOzW,EAAUiwG,EAAKiF,EAC1B3sH,GAAQkuB,EAAO3oB,GAASG,KAAKvC,IAAI,EAAG3D,EAAIsxH,EAA8B,EAAfM,GACnDlqH,IAAOlH,EAAO0F,KAAKC,MAAM3F,IAC7BuF,IAAU2oB,EAAO3oB,EAAQvF,GAAQR,EAAIsxH,IAAiB9/D,EACtDx2B,EAAYx6B,GAAQ,EAAI8wH,GACpB5pH,IAAO3B,EAAQG,KAAKwB,MAAM3B,GAAQi1B,EAAY90B,KAAKwB,MAAMszB,IAC7D,IAAIx3B,EAAS,GAASxD,GAAGxD,KAAI,SAASO,GAAK,OAAOgJ,EAAQvF,EAAOzD,CAAG,IACpE,OAAOw6H,EAAat/G,EAAUzU,EAAOyU,UAAYzU,EACnD,CAkDA,cAhEO+xB,EAAM8hG,QAgBb9hG,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,QAAUw7B,EAAO94B,GAAIi4H,KAAan/F,GACrD,EAEA9C,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,SAAWqrH,EAAIiF,GAAM5tH,EAAG2oH,GAAMA,EAAIiF,GAAMA,EAAIqK,KAAa,CAACtP,EAAIiF,EACjF,EAEA53F,EAAMkiG,WAAa,SAASl4H,GAC1B,OAAQ2oH,EAAIiF,GAAM5tH,EAAG2oH,GAAMA,EAAIiF,GAAMA,EAAIzlH,GAAQ,EAAM8vH,GACzD,EAEAjiG,EAAMyF,UAAY,WAChB,OAAOA,CACT,EAEAzF,EAAM/0B,KAAO,WACX,OAAOA,CACT,EAEA+0B,EAAM7tB,MAAQ,SAASnI,GACrB,OAAOoa,UAAU9c,QAAU6K,IAAUnI,EAAGi4H,KAAa9vH,CACvD,EAEA6tB,EAAM0D,QAAU,SAAS15B,GACvB,OAAOoa,UAAU9c,QAAUy0H,EAAeprH,KAAKzC,IAAI,EAAGmuH,GAAgBryH,GAAIi4H,KAAalG,CACzF,EAEA/7F,EAAM+7F,aAAe,SAAS/xH,GAC5B,OAAOoa,UAAU9c,QAAUy0H,EAAeprH,KAAKzC,IAAI,EAAGlE,GAAIi4H,KAAalG,CACzE,EAEA/7F,EAAMq8F,aAAe,SAASryH,GAC5B,OAAOoa,UAAU9c,QAAU+0H,GAAgBryH,EAAGi4H,KAAa5F,CAC7D,EAEAr8F,EAAMi8B,MAAQ,SAASjyD,GACrB,OAAOoa,UAAU9c,QAAU20D,EAAQtrD,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGlE,IAAKi4H,KAAahmE,CAC/E,EAEAj8B,EAAM2pD,KAAO,WACX,OAAOo4C,GAAKj/F,IAAU,CAAC6vF,EAAIiF,IACtBzlH,MAAMA,GACN4pH,aAAaA,GACbM,aAAaA,GACbpgE,MAAMA,EACb,EAEOylE,GAAUt6G,MAAM66G,IAAW79G,UACpC,CAEA,SAAS+9G,GAASniG,GAChB,IAAI2pD,EAAO3pD,EAAM2pD,KAUjB,OARA3pD,EAAM0D,QAAU1D,EAAMq8F,oBACfr8F,EAAM+7F,oBACN/7F,EAAMq8F,aAEbr8F,EAAM2pD,KAAO,WACX,OAAOw4C,GAASx4C,IAClB,EAEO3pD,CACT,CAEO,SAAS9uB,KACd,OAAOixH,GAASJ,GAAK36G,MAAM,KAAMhD,WAAW23G,aAAa,GAC3D,CCpGe,SAAS,GAAO9uH,GAC7B,OAAQA,CACV,CCGA,IAAIm1H,GAAO,CAAC,EAAG,GAER,SAAS,GAASn1H,GACvB,OAAOA,CACT,CAEA,SAAS,GAAU1B,EAAGC,GACpB,OAAQA,GAAMD,GAAKA,GACb,SAAS0B,GAAK,OAAQA,EAAI1B,GAAKC,CAAG,GCbRyB,EDcjBykB,MAAMlmB,GAAK8pC,IAAM,GCbzB,WACL,OAAOroC,CACT,GAHa,IAAmBA,CDelC,CAUA,SAASo1H,GAAMv/F,EAAQn1B,EAAOivF,GAC5B,IAAI2R,EAAKzrE,EAAO,GAAItlB,EAAKslB,EAAO,GAAI6vF,EAAKhlH,EAAM,GAAIiqH,EAAKjqH,EAAM,GAG9D,OAFI6P,EAAK+wF,GAAIA,EAAK,GAAU/wF,EAAI+wF,GAAKokB,EAAK/1B,EAAYg7B,EAAIjF,KACrDpkB,EAAK,GAAUA,EAAI/wF,GAAKm1G,EAAK/1B,EAAY+1B,EAAIiF,IAC3C,SAAS3qH,GAAK,OAAO0lH,EAAGpkB,EAAGthG,GAAK,CACzC,CAEA,SAASq1H,GAAQx/F,EAAQn1B,EAAOivF,GAC9B,IAAI9rF,EAAIH,KAAKzC,IAAI40B,EAAOx7B,OAAQqG,EAAMrG,QAAU,EAC5CkH,EAAI,IAAI+R,MAAMzP,GACdjF,EAAI,IAAI0U,MAAMzP,GACdtJ,GAAK,EAQT,IALIs7B,EAAOhyB,GAAKgyB,EAAO,KACrBA,EAASA,EAAO9kB,QAAQ0E,UACxB/U,EAAQA,EAAMqQ,QAAQ0E,aAGflb,EAAIsJ,GACXtC,EAAEhH,GAAK,GAAUs7B,EAAOt7B,GAAIs7B,EAAOt7B,EAAI,IACvCqE,EAAErE,GAAKo1F,EAAYjvF,EAAMnG,GAAImG,EAAMnG,EAAI,IAGzC,OAAO,SAASyF,GACd,IAAIzF,EAAIq+E,EAAO/iD,EAAQ71B,EAAG,EAAG6D,GAAK,EAClC,OAAOjF,EAAErE,GAAGgH,EAAEhH,GAAGyF,GACnB,CACF,CAEO,SAAS08E,GAAK5tD,EAAQnH,GAC3B,OAAOA,EACFkO,OAAO/G,EAAO+G,UACdn1B,MAAMouB,EAAOpuB,SACbivF,YAAY7gE,EAAO6gE,eACnB9F,MAAM/6D,EAAO+6D,SACbgrC,QAAQ/lG,EAAO+lG,UACtB,CAEO,SAAS,KACd,IAGIpzF,EACA6zF,EACAT,EAEA/D,EACAj+B,EACAD,EATA/8D,EAASs/F,GACTz0H,EAAQy0H,GACRxlC,EAAc,GAId9F,EAAQ,GAKZ,SAASmrC,IACP,IAAIx3H,EAAIkG,KAAKzC,IAAI40B,EAAOx7B,OAAQqG,EAAMrG,QAItC,OAHIwvF,IAAU,KAAUA,EA7D5B,SAAiBvrF,EAAGC,GAClB,IAAI1B,EAEJ,OADIyB,EAAIC,IAAG1B,EAAIyB,EAAGA,EAAIC,EAAGA,EAAI1B,GACtB,SAASmD,GAAK,OAAO0D,KAAKvC,IAAI7C,EAAGoF,KAAKzC,IAAI1C,EAAGyB,GAAK,CAC3D,CAyDoCu1H,CAAQ1/F,EAAO,GAAIA,EAAOr4B,EAAI,KAC9DszH,EAAYtzH,EAAI,EAAI63H,GAAUD,GAC9BviC,EAASD,EAAQ,KACV7/D,CACT,CAEA,SAASA,EAAM/yB,GACb,OAAY,MAALA,GAAaykB,MAAMzkB,GAAKA,GAAK60H,GAAWhiC,IAAWA,EAASi+B,EAAUj7F,EAAO77B,IAAIynC,GAAY/gC,EAAOivF,KAAeluD,EAAUooD,EAAM7pF,IAC5I,CA8BA,OA5BA+yB,EAAMonF,OAAS,SAASv9G,GACtB,OAAOitF,EAAMyrC,GAAa1iC,IAAUA,EAAQk+B,EAAUpwH,EAAOm1B,EAAO77B,IAAIynC,GAAY,MAAqB7kC,IAC3G,EAEAm2B,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,QAAUw7B,EAASviB,MAAM+vB,KAAKtmC,EAAG,IAASi4H,KAAan/F,EAAO9kB,OACjF,EAEAgiB,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,QAAUqG,EAAQ4S,MAAM+vB,KAAKtmC,GAAIi4H,KAAat0H,EAAMqQ,OACvE,EAEAgiB,EAAMkiG,WAAa,SAASl4H,GAC1B,OAAO2D,EAAQ4S,MAAM+vB,KAAKtmC,GAAI4yF,EAAc,GAAkBqlC,GAChE,EAEAjiG,EAAM82D,MAAQ,SAAS9sF,GACrB,OAAOoa,UAAU9c,QAAUwvF,IAAQ9sF,GAAW,GAAUi4H,KAAanrC,IAAU,EACjF,EAEA92D,EAAM48D,YAAc,SAAS5yF,GAC3B,OAAOoa,UAAU9c,QAAUs1F,EAAc5yF,EAAGi4H,KAAarlC,CAC3D,EAEA58D,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEO,SAASh4H,EAAGkK,GAEjB,OADA06B,EAAY5kC,EAAGy4H,EAAcvuH,EACtBiuH,GACT,CACF,CAEe,SAASQ,KACtB,OAAO,KAAc,GAAU,GACjC,CEzHe,SAASv5C,GAAW14E,EAAO2oB,EAAMvF,EAAOyrF,GACrD,IACI1iC,EADA1xE,EAAOi6E,GAAS10E,EAAO2oB,EAAMvF,GAGjC,QADAyrF,EAAYD,GAA6B,MAAbC,EAAoB,KAAOA,IACrC1/F,MAChB,IAAK,IACH,IAAI7U,EAAQ6F,KAAKvC,IAAIuC,KAAKiE,IAAIpE,GAAQG,KAAKiE,IAAIukB,IAE/C,OAD2B,MAAvBkmF,EAAU1iC,WAAsBjrD,MAAMirD,EAAY+lD,GAAgBz3H,EAAMH,MAASu0G,EAAU1iC,UAAYA,GACpGijC,GAAaP,EAAWv0G,GAEjC,IAAK,GACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACwB,MAAvBu0G,EAAU1iC,WAAsBjrD,MAAMirD,EAAYgmD,GAAe13H,EAAM0F,KAAKvC,IAAIuC,KAAKiE,IAAIpE,GAAQG,KAAKiE,IAAIukB,QAAUkmF,EAAU1iC,UAAYA,GAAgC,MAAnB0iC,EAAU1/F,OACrK,MAEF,IAAK,IACL,IAAK,IACwB,MAAvB0/F,EAAU1iC,WAAsBjrD,MAAMirD,EAAYimD,GAAe33H,MAAQo0G,EAAU1iC,UAAYA,EAAuC,GAAP,MAAnB0iC,EAAU1/F,OAI9H,OAAO2pE,GAAO+1B,EAChB,CCvBO,SAASwjB,GAAU7iG,GACxB,IAAI8C,EAAS9C,EAAM8C,OAkDnB,OAhDA9C,EAAMglD,MAAQ,SAASpxD,GACrB,IAAIplB,EAAIs0B,IACR,OAAOkiD,GAAMx2E,EAAE,GAAIA,EAAEA,EAAElH,OAAS,GAAa,MAATssB,EAAgB,GAAKA,EAC3D,EAEAoM,EAAMkpD,WAAa,SAASt1D,EAAOyrF,GACjC,IAAI7wG,EAAIs0B,IACR,OAAOomD,GAAW16E,EAAE,GAAIA,EAAEA,EAAElH,OAAS,GAAa,MAATssB,EAAgB,GAAKA,EAAOyrF,EACvE,EAEAr/E,EAAMiE,KAAO,SAASrQ,GACP,MAATA,IAAeA,EAAQ,IAE3B,IAKIuxD,EACAl6E,EANAuD,EAAIs0B,IACJ0jD,EAAK,EACLh/B,EAAKh5C,EAAElH,OAAS,EAChBkJ,EAAQhC,EAAEg4E,GACVrtD,EAAO3qB,EAAEg5C,GAGTs7E,EAAU,GAOd,IALI3pG,EAAO3oB,IACTvF,EAAOuF,EAAOA,EAAQ2oB,EAAMA,EAAOluB,EACnCA,EAAOu7E,EAAIA,EAAKh/B,EAAIA,EAAKv8C,GAGpB63H,KAAY,GAAG,CAEpB,IADA73H,EAAOg6E,GAAcz0E,EAAO2oB,EAAMvF,MACrBuxD,EAGX,OAFA32E,EAAEg4E,GAAMh2E,EACRhC,EAAEg5C,GAAMruB,EACD2J,EAAOt0B,GACT,GAAIvD,EAAO,EAChBuF,EAAQG,KAAKC,MAAMJ,EAAQvF,GAAQA,EACnCkuB,EAAOxoB,KAAKwvB,KAAKhH,EAAOluB,GAAQA,MAC3B,MAAIA,EAAO,GAIhB,MAHAuF,EAAQG,KAAKwvB,KAAK3vB,EAAQvF,GAAQA,EAClCkuB,EAAOxoB,KAAKC,MAAMuoB,EAAOluB,GAAQA,CAGnC,CACAk6E,EAAUl6E,CACZ,CAEA,OAAO+0B,CACT,EAEOA,CACT,CAEe,SAAS,KACtB,IAAIA,EAAQyiG,KAQZ,OANAziG,EAAM2pD,KAAO,WACX,OAAOA,GAAK3pD,EAAO,KACrB,EAEA0hG,GAAUt6G,MAAM4Y,EAAO5b,WAEhBy+G,GAAU7iG,EACnB,CClEe,SAAS,GAAS8C,GAC/B,IAAIg/F,EAEJ,SAAS9hG,EAAM/yB,GACb,OAAY,MAALA,GAAaykB,MAAMzkB,GAAKA,GAAK60H,EAAU70H,CAChD,CAkBA,OAhBA+yB,EAAMonF,OAASpnF,EAEfA,EAAM8C,OAAS9C,EAAMryB,MAAQ,SAAS3D,GACpC,OAAOoa,UAAU9c,QAAUw7B,EAASviB,MAAM+vB,KAAKtmC,EAAG,IAASg2B,GAAS8C,EAAO9kB,OAC7E,EAEAgiB,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEA9hG,EAAM2pD,KAAO,WACX,OAAO,GAAS7mD,GAAQg/F,QAAQA,EAClC,EAEAh/F,EAAS1e,UAAU9c,OAASiZ,MAAM+vB,KAAKxN,EAAQ,IAAU,CAAC,EAAG,GAEtD+/F,GAAU7iG,EACnB,CC3Be,SAAS,GAAK8C,EAAQlK,GAGnC,IAII9uB,EAJA08E,EAAK,EACLh/B,GAHJ1kB,EAASA,EAAO9kB,SAGA1W,OAAS,EACrB04C,EAAKld,EAAO0jD,GACZjvC,EAAKzU,EAAO0kB,GAUhB,OAPIjQ,EAAKyI,IACPl2C,EAAI08E,EAAIA,EAAKh/B,EAAIA,EAAK19C,EACtBA,EAAIk2C,EAAIA,EAAKzI,EAAIA,EAAKztC,GAGxBg5B,EAAO0jD,GAAM5tD,EAAShoB,MAAMovC,GAC5Bld,EAAO0kB,GAAM5uB,EAASuH,KAAKoX,GACpBzU,CACT,CCXA,SAASigG,GAAa91H,GACpB,OAAO0D,KAAKooB,IAAI9rB,EAClB,CAEA,SAAS+1H,GAAa/1H,GACpB,OAAO0D,KAAK4qC,IAAItuC,EAClB,CAEA,SAASg2H,GAAch2H,GACrB,OAAQ0D,KAAKooB,KAAK9rB,EACpB,CAEA,SAASi2H,GAAcj2H,GACrB,OAAQ0D,KAAK4qC,KAAKtuC,EACpB,CAEA,SAASk2H,GAAMl2H,GACb,OAAOm4E,SAASn4E,KAAO,KAAOA,GAAKA,EAAI,EAAI,EAAIA,CACjD,CAeA,SAASm2H,GAAQx5H,GACf,MAAO,CAACqD,EAAGjF,KAAO4B,GAAGqD,EAAGjF,EAC1B,CAEO,SAASq7H,GAAQ30F,GACtB,MAAM1O,EAAQ0O,EAAUq0F,GAAcC,IAChClgG,EAAS9C,EAAM8C,OACrB,IACIwgG,EACAC,EAFA5vG,EAAO,GAIX,SAASsuG,IAQP,OAPAqB,EAnBJ,SAAc3vG,GACZ,OAAOA,IAAShjB,KAAKo5C,EAAIp5C,KAAKooB,IACf,KAATpF,GAAehjB,KAAKm0E,OACV,IAATnxD,GAAchjB,KAAK6yH,OAClB7vG,EAAOhjB,KAAKooB,IAAIpF,GAAO1mB,GAAK0D,KAAKooB,IAAI9rB,GAAK0mB,EACpD,CAcW8vG,CAAK9vG,GAAO4vG,EAzBvB,SAAc5vG,GACZ,OAAgB,KAATA,EAAcwvG,GACfxvG,IAAShjB,KAAKo5C,EAAIp5C,KAAK4qC,IACvBtuC,GAAK0D,KAAKkB,IAAI8hB,EAAM1mB,EAC5B,CAqB8By2H,CAAK/vG,GAC3BmP,IAAS,GAAK,GAChBwgG,EAAOF,GAAQE,GAAOC,EAAOH,GAAQG,GACrC70F,EAAUu0F,GAAeC,KAEzBx0F,EAAUq0F,GAAcC,IAEnBhjG,CACT,CAwEA,OAtEAA,EAAMrM,KAAO,SAAS3pB,GACpB,OAAOoa,UAAU9c,QAAUqsB,GAAQ3pB,EAAGi4H,KAAatuG,CACrD,EAEAqM,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,QAAUw7B,EAAO94B,GAAIi4H,KAAan/F,GACrD,EAEA9C,EAAMglD,MAAQpxD,IACZ,MAAMplB,EAAIs0B,IACV,IAAI9uB,EAAIxF,EAAE,GACN9D,EAAI8D,EAAEA,EAAElH,OAAS,GACrB,MAAMuE,EAAInB,EAAIsJ,EAEVnI,KAAKmI,EAAGtJ,GAAK,CAACA,EAAGsJ,IAErB,IAEIhM,EACA8B,EAHAtC,EAAI87H,EAAKtvH,GACTlD,EAAIwyH,EAAK54H,GAGb,MAAMD,EAAa,MAATmpB,EAAgB,IAAMA,EAChC,IAAIsyD,EAAI,GAER,KAAMvyD,EAAO,IAAM7iB,EAAItJ,EAAIiD,EAAG,CAE5B,GADAjD,EAAImJ,KAAKC,MAAMpJ,GAAIsJ,EAAIH,KAAKwvB,KAAKrvB,GAC7BkD,EAAI,GAAG,KAAOxM,GAAKsJ,IAAKtJ,EAC1B,IAAKQ,EAAI,EAAGA,EAAI2rB,IAAQ3rB,EAEtB,GADA8B,EAAItC,EAAI,EAAIQ,EAAIu7H,GAAM/7H,GAAKQ,EAAIu7H,EAAK/7H,KAChCsC,EAAIkK,GAAR,CACA,GAAIlK,EAAIY,EAAG,MACXw7E,EAAEz/E,KAAKqD,EAFY,OAIhB,KAAOtC,GAAKsJ,IAAKtJ,EACtB,IAAKQ,EAAI2rB,EAAO,EAAG3rB,GAAK,IAAKA,EAE3B,GADA8B,EAAItC,EAAI,EAAIQ,EAAIu7H,GAAM/7H,GAAKQ,EAAIu7H,EAAK/7H,KAChCsC,EAAIkK,GAAR,CACA,GAAIlK,EAAIY,EAAG,MACXw7E,EAAEz/E,KAAKqD,EAFY,CAKR,EAAXo8E,EAAE5+E,OAAamD,IAAGy7E,EAAIlB,GAAMhxE,EAAGtJ,EAAGD,GACxC,MACEy7E,EAAIlB,GAAMx9E,EAAGsJ,EAAGH,KAAKzC,IAAI4C,EAAItJ,EAAGiD,IAAIxD,IAAIs8H,GAE1C,OAAO13H,EAAIq6E,EAAExjE,UAAYwjE,CAAC,EAG5BlmD,EAAMkpD,WAAa,CAACt1D,EAAOyrF,KAOzB,GANa,MAATzrF,IAAeA,EAAQ,IACV,MAAbyrF,IAAmBA,EAAqB,KAAT1rF,EAAc,IAAM,KAC9B,mBAAd0rF,IACH1rF,EAAO,GAA4D,OAArD0rF,EAAYD,GAAgBC,IAAY1iC,YAAmB0iC,EAAU7qD,MAAO,GAChG6qD,EAAY/1B,GAAO+1B,IAEjBzrF,IAAUysB,IAAU,OAAOg/D,EAC/B,MAAMr3G,EAAI2I,KAAKvC,IAAI,EAAGulB,EAAOC,EAAQoM,EAAMglD,QAAQ19E,QACnD,OAAOkH,IACL,IAAIhH,EAAIgH,EAAI+0H,EAAK5yH,KAAKwB,MAAMmxH,EAAK90H,KAEjC,OADIhH,EAAImsB,EAAOA,EAAO,KAAKnsB,GAAKmsB,GACzBnsB,GAAKQ,EAAIq3G,EAAU7wG,GAAK,EAAE,CAClC,EAGHwxB,EAAMiE,KAAO,IACJnB,EAAO,GAAKA,IAAU,CAC3BlyB,MAAO3D,GAAKs2H,EAAK5yH,KAAKC,MAAM0yH,EAAKr2H,KACjCkzB,KAAMlzB,GAAKs2H,EAAK5yH,KAAKwvB,KAAKmjG,EAAKr2H,QAI5B+yB,CACT,CAEe,SAAS,KACtB,MAAMA,EAAQqjG,GAAQ,MAAevgG,OAAO,CAAC,EAAG,KAGhD,OAFA9C,EAAM2pD,KAAO,IAAMA,GAAK3pD,EAAO,MAAOrM,KAAKqM,EAAMrM,QACjD+tG,GAAUt6G,MAAM4Y,EAAO5b,WAChB4b,CACT,CCvIA,SAAS2jG,GAAgB1uH,GACvB,OAAO,SAAShI,GACd,OAAO0D,KAAK46F,KAAKt+F,GAAK0D,KAAKivH,MAAMjvH,KAAKiE,IAAI3H,EAAIgI,GAChD,CACF,CAEA,SAAS2uH,GAAgB3uH,GACvB,OAAO,SAAShI,GACd,OAAO0D,KAAK46F,KAAKt+F,GAAK0D,KAAKkzH,MAAMlzH,KAAKiE,IAAI3H,IAAMgI,CAClD,CACF,CAEO,SAAS6uH,GAAUp1F,GACxB,IAAIz5B,EAAI,EAAG+qB,EAAQ0O,EAAUi1F,GAAgB1uH,GAAI2uH,GAAgB3uH,IAMjE,OAJA+qB,EAAMwkD,SAAW,SAASx6E,GACxB,OAAOoa,UAAU9c,OAASonC,EAAUi1F,GAAgB1uH,GAAKjL,GAAI45H,GAAgB3uH,IAAMA,CACrF,EAEO4tH,GAAU7iG,EACnB,CAEe,SAAS+jG,KACtB,IAAI/jG,EAAQ8jG,GAAU,MAMtB,OAJA9jG,EAAM2pD,KAAO,WACX,OAAOA,GAAK3pD,EAAO+jG,MAAUv/C,SAASxkD,EAAMwkD,WAC9C,EAEOk9C,GAAUt6G,MAAM4Y,EAAO5b,UAChC,CC9BA,SAAS4/G,GAAa7qB,GACpB,OAAO,SAASlsG,GACd,OAAOA,EAAI,GAAK0D,KAAKkB,KAAK5E,EAAGksG,GAAYxoG,KAAKkB,IAAI5E,EAAGksG,EACvD,CACF,CAEA,SAAS8qB,GAAch3H,GACrB,OAAOA,EAAI,GAAK0D,KAAKoG,MAAM9J,GAAK0D,KAAKoG,KAAK9J,EAC5C,CAEA,SAASi3H,GAAgBj3H,GACvB,OAAOA,EAAI,GAAKA,EAAIA,EAAIA,EAAIA,CAC9B,CAEO,SAASk3H,GAAOz1F,GACrB,IAAI1O,EAAQ0O,EAAU,GAAU,IAC5ByqE,EAAW,EAYf,OAJAn5E,EAAMm5E,SAAW,SAASnvG,GACxB,OAAOoa,UAAU9c,OANG,IAMO6xG,GAAYnvG,GANf0kC,EAAU,GAAU,IACzB,KAAbyqE,EAAmBzqE,EAAUu1F,GAAeC,IAC5Cx1F,EAAUs1F,GAAa7qB,GAAW6qB,GAAa,EAAI7qB,IAIFA,CACzD,EAEO0pB,GAAU7iG,EACnB,CAEe,SAAS,KACtB,IAAIA,EAAQmkG,GAAO,MAQnB,OANAnkG,EAAM2pD,KAAO,WACX,OAAOA,GAAK3pD,EAAO,MAAOm5E,SAASn5E,EAAMm5E,WAC3C,EAEAuoB,GAAUt6G,MAAM4Y,EAAO5b,WAEhB4b,CACT,CAEO,SAAS,KACd,OAAO,GAAI5Y,MAAM,KAAMhD,WAAW+0F,SAAS,GAC7C,CC5CA,SAASirB,GAAOn3H,GACd,OAAO0D,KAAK46F,KAAKt+F,GAAKA,EAAIA,CAC5B,CAMe,SAAS,KACtB,IAGI60H,EAHAuC,EAAU5B,KACV90H,EAAQ,CAAC,EAAG,GACZwE,GAAQ,EAGZ,SAAS6tB,EAAM/yB,GACb,IAAIpD,EAXR,SAAkBoD,GAChB,OAAO0D,KAAK46F,KAAKt+F,GAAK0D,KAAKoG,KAAKpG,KAAKiE,IAAI3H,GAC3C,CASYq3H,CAASD,EAAQp3H,IACzB,OAAOykB,MAAM7nB,GAAKi4H,EAAU3vH,EAAQxB,KAAKwB,MAAMtI,GAAKA,CACtD,CAuCA,OArCAm2B,EAAMonF,OAAS,SAASv9G,GACtB,OAAOw6H,EAAQjd,OAAOgd,GAAOv6H,GAC/B,EAEAm2B,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,QAAU+8H,EAAQvhG,OAAO94B,GAAIg2B,GAASqkG,EAAQvhG,QACjE,EAEA9C,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,QAAU+8H,EAAQ12H,OAAOA,EAAQ4S,MAAM+vB,KAAKtmC,EAAG,KAAS/C,IAAIm9H,KAAUpkG,GAASryB,EAAMqQ,OACxG,EAEAgiB,EAAMkiG,WAAa,SAASl4H,GAC1B,OAAOg2B,EAAMryB,MAAM3D,GAAGmI,OAAM,EAC9B,EAEA6tB,EAAM7tB,MAAQ,SAASnI,GACrB,OAAOoa,UAAU9c,QAAU6K,IAAUnI,EAAGg2B,GAAS7tB,CACnD,EAEA6tB,EAAM82D,MAAQ,SAAS9sF,GACrB,OAAOoa,UAAU9c,QAAU+8H,EAAQvtC,MAAM9sF,GAAIg2B,GAASqkG,EAAQvtC,OAChE,EAEA92D,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEA9hG,EAAM2pD,KAAO,WACX,OAAO,GAAO06C,EAAQvhG,SAAUn1B,GAC3BwE,MAAMA,GACN2kF,MAAMutC,EAAQvtC,SACdgrC,QAAQA,EACf,EAEAJ,GAAUt6G,MAAM4Y,EAAO5b,WAEhBy+G,GAAU7iG,EACnB,CC3De,SAAS,KACtB,IAGI8hG,EAHAh/F,EAAS,GACTn1B,EAAQ,GACRm4E,EAAa,GAGjB,SAASm8C,IACP,IAAIz6H,EAAI,EAAGiD,EAAIkG,KAAKvC,IAAI,EAAGT,EAAMrG,QAEjC,IADAw+E,EAAa,IAAIvlE,MAAM9V,EAAI,KAClBjD,EAAIiD,GAAGq7E,EAAWt+E,EAAI,GAAK,GAAUs7B,EAAQt7B,EAAIiD,GAC1D,OAAOu1B,CACT,CAEA,SAASA,EAAM/yB,GACb,OAAY,MAALA,GAAaykB,MAAMzkB,GAAKA,GAAK60H,EAAUn0H,EAAMk4E,EAAOC,EAAY74E,GACzE,CAqCA,OAnCA+yB,EAAMukG,aAAe,SAAS16H,GAC5B,IAAIrC,EAAImG,EAAM0Q,QAAQxU,GACtB,OAAOrC,EAAI,EAAI,CAAC8tC,IAAKA,KAAO,CAC1B9tC,EAAI,EAAIs+E,EAAWt+E,EAAI,GAAKs7B,EAAO,GACnCt7B,EAAIs+E,EAAWx+E,OAASw+E,EAAWt+E,GAAKs7B,EAAOA,EAAOx7B,OAAS,GAEnE,EAEA04B,EAAM8C,OAAS,SAAS94B,GACtB,IAAKoa,UAAU9c,OAAQ,OAAOw7B,EAAO9kB,QACrC8kB,EAAS,GACT,IAAK,IAAIt0B,KAAKxE,EAAY,MAALwE,GAAckjB,MAAMljB,GAAKA,IAAIs0B,EAAOr8B,KAAK+H,GAE9D,OADAs0B,EAAO3zB,KAAK4wE,GACLkiD,GACT,EAEAjiG,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,QAAUqG,EAAQ4S,MAAM+vB,KAAKtmC,GAAIi4H,KAAat0H,EAAMqQ,OACvE,EAEAgiB,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEA9hG,EAAMwkG,UAAY,WAChB,OAAO1+C,EAAW9nE,OACpB,EAEAgiB,EAAM2pD,KAAO,WACX,OAAO,KACF7mD,OAAOA,GACPn1B,MAAMA,GACNm0H,QAAQA,EACf,EAEOJ,GAAUt6G,MAAM4Y,EAAO5b,UAChC,CCpDe,SAAS,KACtB,IAKI09G,EALA9hF,EAAK,EACLzI,EAAK,EACL9sC,EAAI,EACJq4B,EAAS,CAAC,IACVn1B,EAAQ,CAAC,EAAG,GAGhB,SAASqyB,EAAM/yB,GACb,OAAY,MAALA,GAAaA,GAAKA,EAAIU,EAAMk4E,EAAO/iD,EAAQ71B,EAAG,EAAGxC,IAAMq3H,CAChE,CAEA,SAASG,IACP,IAAIz6H,GAAK,EAET,IADAs7B,EAAS,IAAIviB,MAAM9V,KACVjD,EAAIiD,GAAGq4B,EAAOt7B,KAAOA,EAAI,GAAK+vC,GAAM/vC,EAAIiD,GAAKu1C,IAAOv1C,EAAI,GACjE,OAAOu1B,CACT,CAiCA,OA/BAA,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,SAAW04C,EAAIzI,GAAMvtC,EAAGg2C,GAAMA,EAAIzI,GAAMA,EAAI0qF,KAAa,CAACjiF,EAAIzI,EACjF,EAEAvX,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,QAAUmD,GAAKkD,EAAQ4S,MAAM+vB,KAAKtmC,IAAI1C,OAAS,EAAG26H,KAAat0H,EAAMqQ,OACxF,EAEAgiB,EAAMukG,aAAe,SAAS16H,GAC5B,IAAIrC,EAAImG,EAAM0Q,QAAQxU,GACtB,OAAOrC,EAAI,EAAI,CAAC8tC,IAAKA,KACf9tC,EAAI,EAAI,CAACw4C,EAAIld,EAAO,IACpBt7B,GAAKiD,EAAI,CAACq4B,EAAOr4B,EAAI,GAAI8sC,GACzB,CAACzU,EAAOt7B,EAAI,GAAIs7B,EAAOt7B,GAC/B,EAEAw4B,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAASA,CACnD,EAEAA,EAAM8lD,WAAa,WACjB,OAAOhjD,EAAO9kB,OAChB,EAEAgiB,EAAM2pD,KAAO,WACX,OAAO,KACF7mD,OAAO,CAACkd,EAAIzI,IACZ5pC,MAAMA,GACNm0H,QAAQA,EACf,EAEOJ,GAAUt6G,MAAMy7G,GAAU7iG,GAAQ5b,UAC3C,CCpDe,SAASkhC,KACtB,IAEIw8E,EAFAh/F,EAAS,CAAC,IACVn1B,EAAQ,CAAC,EAAG,GAEZlD,EAAI,EAER,SAASu1B,EAAM/yB,GACb,OAAY,MAALA,GAAaA,GAAKA,EAAIU,EAAMk4E,EAAO/iD,EAAQ71B,EAAG,EAAGxC,IAAMq3H,CAChE,CA0BA,OAxBA9hG,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,QAAUw7B,EAASviB,MAAM+vB,KAAKtmC,GAAIS,EAAIkG,KAAKzC,IAAI40B,EAAOx7B,OAAQqG,EAAMrG,OAAS,GAAI04B,GAAS8C,EAAO9kB,OACpH,EAEAgiB,EAAMryB,MAAQ,SAAS3D,GACrB,OAAOoa,UAAU9c,QAAUqG,EAAQ4S,MAAM+vB,KAAKtmC,GAAIS,EAAIkG,KAAKzC,IAAI40B,EAAOx7B,OAAQqG,EAAMrG,OAAS,GAAI04B,GAASryB,EAAMqQ,OAClH,EAEAgiB,EAAMukG,aAAe,SAAS16H,GAC5B,IAAIrC,EAAImG,EAAM0Q,QAAQxU,GACtB,MAAO,CAACi5B,EAAOt7B,EAAI,GAAIs7B,EAAOt7B,GAChC,EAEAw4B,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEA9hG,EAAM2pD,KAAO,WACX,OAAOrkC,KACFxiB,OAAOA,GACPn1B,MAAMA,GACNm0H,QAAQA,EACf,EAEOJ,GAAUt6G,MAAM4Y,EAAO5b,UAChC,CCtCO,MAAMqgH,GAAiB,IACjBC,GAAiBD,IACjBE,GAAeD,KACfE,GAAcD,MACdE,GAAeD,OAEfE,GAAeF,QCNtB,GAAK,IAAIt7H,KAAM,GAAK,IAAIA,KAEvB,SAASy7H,GAAaC,EAAQC,EAASrxG,EAAOsxG,GAEnD,SAAStsG,EAAS6/D,GAChB,OAAOusC,EAAOvsC,EAA4B,IAArBr0E,UAAU9c,OAAe,IAAIgC,KAAO,IAAIA,MAAMmvF,IAAQA,CAC7E,CA6DA,OA3DA7/D,EAAShoB,MAAS6nF,IACTusC,EAAOvsC,EAAO,IAAInvF,MAAMmvF,IAAQA,GAGzC7/D,EAASuH,KAAQs4D,IACRusC,EAAOvsC,EAAO,IAAInvF,KAAKmvF,EAAO,IAAKwsC,EAAQxsC,EAAM,GAAIusC,EAAOvsC,GAAOA,GAG5E7/D,EAASzmB,MAASsmF,IAChB,MAAM8V,EAAK31E,EAAS6/D,GAAOj7E,EAAKob,EAASuH,KAAKs4D,GAC9C,OAAOA,EAAO8V,EAAK/wF,EAAKi7E,EAAO8V,EAAK/wF,CAAE,EAGxCob,EAAS6f,OAAS,CAACggD,EAAMxtF,KAChBg6H,EAAQxsC,EAAO,IAAInvF,MAAMmvF,GAAe,MAARxtF,EAAe,EAAI0F,KAAKC,MAAM3F,IAAQwtF,GAG/E7/D,EAASjrB,MAAQ,CAAC6C,EAAO2oB,EAAMluB,KAC7B,MAAM0C,EAAQ,GAGd,GAFA6C,EAAQooB,EAASuH,KAAK3vB,GACtBvF,EAAe,MAARA,EAAe,EAAI0F,KAAKC,MAAM3F,KAC/BuF,EAAQ2oB,GAAWluB,EAAO,GAAI,OAAO0C,EAC3C,IAAI85E,EACJ,GAAG95E,EAAMlH,KAAKghF,EAAW,IAAIn+E,MAAMkH,IAASy0H,EAAQz0H,EAAOvF,GAAO+5H,EAAOx0H,SAClEi3E,EAAWj3E,GAASA,EAAQ2oB,GACnC,OAAOxrB,CAAK,EAGdirB,EAAS0E,OAAUu3B,GACVkwE,IAActsC,IACnB,GAAIA,GAAQA,EAAM,KAAOusC,EAAOvsC,IAAQ5jC,EAAK4jC,IAAOA,EAAKR,QAAQQ,EAAO,EAAE,IACzE,CAACA,EAAMxtF,KACR,GAAIwtF,GAAQA,EACV,GAAIxtF,EAAO,EAAG,OAASA,GAAQ,GAC7B,KAAOg6H,EAAQxsC,GAAO,IAAK5jC,EAAK4jC,UAC3B,OAASxtF,GAAQ,GACtB,KAAOg6H,EAAQxsC,EAAM,IAAM5jC,EAAK4jC,KAEpC,IAIA7kE,IACFgF,EAAShF,MAAQ,CAACpjB,EAAOC,KACvB,GAAGwnF,SAASznF,GAAQ,GAAGynF,SAASxnF,GAChCu0H,EAAO,IAAKA,EAAO,IACZr0H,KAAKC,MAAMgjB,EAAM,GAAI,MAG9BgF,EAASkgB,MAAS7tC,IAChBA,EAAO0F,KAAKC,MAAM3F,GACVm6E,SAASn6E,IAAWA,EAAO,EAC3BA,EAAO,EACT2tB,EAAS0E,OAAO4nG,EACX12H,GAAM02H,EAAM12H,GAAKvD,GAAS,EAC1BuD,GAAMoqB,EAAShF,MAAM,EAAGplB,GAAKvD,GAAS,GAH7B2tB,EADoB,OAQrCA,CACT,CClEO,MAAMusG,GAAcJ,IAAa,SAErC,CAACtsC,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAK,IACzB,CAACuF,EAAOC,IACFA,EAAMD,IAIf20H,GAAYrsF,MAAS9wC,IACnBA,EAAI2I,KAAKC,MAAM5I,GACVo9E,SAASp9E,IAAQA,EAAI,EACpBA,EAAI,EACH+8H,IAActsC,IACnBA,EAAKR,QAAQtnF,KAAKC,MAAM6nF,EAAOzwF,GAAKA,EAAE,IACrC,CAACywF,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAOjD,EAAE,IAC7B,CAACwI,EAAOC,KACDA,EAAMD,GAASxI,IANJm9H,GADgB,MAWhC,MAAMnuB,GAAemuB,GAAYx3H,MCrB3By3H,GAASL,IAActsC,IAClCA,EAAKR,QAAQQ,EAAOA,EAAK/hC,kBAAkB,IAC1C,CAAC+hC,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAOw5H,GAAe,IAC1C,CAACj0H,EAAOC,KACDA,EAAMD,GAASi0H,KACrBhsC,GACKA,EAAKse,kBAGDD,GAAUsuB,GAAOz3H,MCVjB03H,GAAaN,IAActsC,IACtCA,EAAKR,QAAQQ,EAAOA,EAAK/hC,kBAAoB+hC,EAAK6sC,aAAeb,GAAe,IAC/E,CAAChsC,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAOy5H,GAAe,IAC1C,CAACl0H,EAAOC,KACDA,EAAMD,GAASk0H,KACrBjsC,GACKA,EAAK8sC,eAGDC,GAAcH,GAAW13H,MAEzB83H,GAAYV,IAActsC,IACrCA,EAAKitC,cAAc,EAAG,EAAE,IACvB,CAACjtC,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAOy5H,GAAe,IAC1C,CAACl0H,EAAOC,KACDA,EAAMD,GAASk0H,KACrBjsC,GACKA,EAAKoe,kBAGD8uB,GAAaF,GAAU93H,MCtBvBi4H,GAAWb,IAActsC,IACpCA,EAAKR,QAAQQ,EAAOA,EAAK/hC,kBAAoB+hC,EAAK6sC,aAAeb,GAAiBhsC,EAAK8sC,aAAeb,GAAe,IACpH,CAACjsC,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAO05H,GAAa,IACxC,CAACn0H,EAAOC,KACDA,EAAMD,GAASm0H,KACrBlsC,GACKA,EAAKogB,aAGDgtB,GAAYD,GAASj4H,MAErBm4H,GAAUf,IAActsC,IACnCA,EAAKstC,cAAc,EAAG,EAAG,EAAE,IAC1B,CAACttC,EAAMxtF,KACRwtF,EAAKR,SAASQ,EAAOxtF,EAAO05H,GAAa,IACxC,CAACn0H,EAAOC,KACDA,EAAMD,GAASm0H,KACrBlsC,GACKA,EAAKke,gBAGDqvB,GAAWF,GAAQn4H,MCtBnBs4H,GAAUlB,IACrBtsC,GAAQA,EAAKytC,SAAS,EAAG,EAAG,EAAG,KAC/B,CAACztC,EAAMxtF,IAASwtF,EAAK0tC,QAAQ1tC,EAAK2tC,UAAYn7H,KAC9C,CAACuF,EAAOC,KAASA,EAAMD,GAASC,EAAI41H,oBAAsB71H,EAAM61H,qBAAuB3B,IAAkBE,KACzGnsC,GAAQA,EAAK2tC,UAAY,IAGdE,GAAWL,GAAQt4H,MAEnB44H,GAASxB,IAActsC,IAClCA,EAAK+tC,YAAY,EAAG,EAAG,EAAG,EAAE,IAC3B,CAAC/tC,EAAMxtF,KACRwtF,EAAKguC,WAAWhuC,EAAK2e,aAAensG,EAAK,IACxC,CAACuF,EAAOC,KACDA,EAAMD,GAASo0H,KACrBnsC,GACKA,EAAK2e,aAAe,IAGhBsvB,GAAUH,GAAO54H,MAEjBg5H,GAAU5B,IAActsC,IACnCA,EAAK+tC,YAAY,EAAG,EAAG,EAAG,EAAE,IAC3B,CAAC/tC,EAAMxtF,KACRwtF,EAAKguC,WAAWhuC,EAAK2e,aAAensG,EAAK,IACxC,CAACuF,EAAOC,KACDA,EAAMD,GAASo0H,KACrBnsC,GACK9nF,KAAKC,MAAM6nF,EAAOmsC,MAGdgC,GAAWD,GAAQh5H,MC/BhC,SAASk5H,GAAYr/H,GACnB,OAAOu9H,IAActsC,IACnBA,EAAK0tC,QAAQ1tC,EAAK2tC,WAAa3tC,EAAKquC,SAAW,EAAIt/H,GAAK,GACxDixF,EAAKytC,SAAS,EAAG,EAAG,EAAG,EAAE,IACxB,CAACztC,EAAMxtF,KACRwtF,EAAK0tC,QAAQ1tC,EAAK2tC,UAAmB,EAAPn7H,EAAS,IACtC,CAACuF,EAAOC,KACDA,EAAMD,GAASC,EAAI41H,oBAAsB71H,EAAM61H,qBAAuB3B,IAAkBG,IAEpG,CAEO,MAAMkC,GAAaF,GAAY,GACzBG,GAAaH,GAAY,GACzBI,GAAcJ,GAAY,GAC1BK,GAAgBL,GAAY,GAC5BM,GAAeN,GAAY,GAC3BO,GAAaP,GAAY,GACzBQ,GAAeR,GAAY,GAE3BS,GAAcP,GAAWp5H,MACzB45H,GAAcP,GAAWr5H,MACzB65H,GAAeP,GAAYt5H,MAC3B85H,GAAiBP,GAAcv5H,MAC/B+5H,GAAgBP,GAAax5H,MAC7Bg6H,GAAcP,GAAWz5H,MACzBi6H,GAAgBP,GAAa15H,MAE1C,SAASk6H,GAAWrgI,GAClB,OAAOu9H,IAActsC,IACnBA,EAAKguC,WAAWhuC,EAAK2e,cAAgB3e,EAAKqvC,YAAc,EAAItgI,GAAK,GACjEixF,EAAK+tC,YAAY,EAAG,EAAG,EAAG,EAAE,IAC3B,CAAC/tC,EAAMxtF,KACRwtF,EAAKguC,WAAWhuC,EAAK2e,aAAsB,EAAPnsG,EAAS,IAC5C,CAACuF,EAAOC,KACDA,EAAMD,GAASq0H,IAE3B,CAEO,MAAMkD,GAAYF,GAAW,GACvBG,GAAYH,GAAW,GACvBI,GAAaJ,GAAW,GACxBK,GAAeL,GAAW,GAC1BM,GAAcN,GAAW,GACzBO,GAAYP,GAAW,GACvBQ,GAAcR,GAAW,GAEzBS,GAAaP,GAAUp6H,MACvB46H,GAAaP,GAAUr6H,MACvB66H,GAAcP,GAAWt6H,MACzB86H,GAAgBP,GAAav6H,MAC7B+6H,GAAeP,GAAYx6H,MAC3Bg7H,GAAaP,GAAUz6H,MACvBi7H,GAAeP,GAAY16H,MCrD3Bk7H,GAAY9D,IAActsC,IACrCA,EAAK0tC,QAAQ,GACb1tC,EAAKytC,SAAS,EAAG,EAAG,EAAG,EAAE,IACxB,CAACztC,EAAMxtF,KACRwtF,EAAKqwC,SAASrwC,EAAKswC,WAAa99H,EAAK,IACpC,CAACuF,EAAOC,IACFA,EAAIs4H,WAAav4H,EAAMu4H,WAAyD,IAA3Ct4H,EAAIu4H,cAAgBx4H,EAAMw4H,iBACpEvwC,GACKA,EAAKswC,aAGDE,GAAaJ,GAAUl7H,MAEvBu7H,GAAWnE,IAActsC,IACpCA,EAAKguC,WAAW,GAChBhuC,EAAK+tC,YAAY,EAAG,EAAG,EAAG,EAAE,IAC3B,CAAC/tC,EAAMxtF,KACRwtF,EAAK0wC,YAAY1wC,EAAK0e,cAAgBlsG,EAAK,IAC1C,CAACuF,EAAOC,IACFA,EAAI0mG,cAAgB3mG,EAAM2mG,cAAkE,IAAjD1mG,EAAIymG,iBAAmB1mG,EAAM0mG,oBAC7Eze,GACKA,EAAK0e,gBAGDiyB,GAAYF,GAASv7H,MCxBrB07H,GAAWtE,IAActsC,IACpCA,EAAKqwC,SAAS,EAAG,GACjBrwC,EAAKytC,SAAS,EAAG,EAAG,EAAG,EAAE,IACxB,CAACztC,EAAMxtF,KACRwtF,EAAK6wC,YAAY7wC,EAAKuwC,cAAgB/9H,EAAK,IAC1C,CAACuF,EAAOC,IACFA,EAAIu4H,cAAgBx4H,EAAMw4H,gBAC/BvwC,GACKA,EAAKuwC,gBAIdK,GAASvwF,MAAS9wC,GACRo9E,SAASp9E,EAAI2I,KAAKC,MAAM5I,KAASA,EAAI,EAAY+8H,IAActsC,IACrEA,EAAK6wC,YAAY34H,KAAKC,MAAM6nF,EAAKuwC,cAAgBhhI,GAAKA,GACtDywF,EAAKqwC,SAAS,EAAG,GACjBrwC,EAAKytC,SAAS,EAAG,EAAG,EAAG,EAAE,IACxB,CAACztC,EAAMxtF,KACRwtF,EAAK6wC,YAAY7wC,EAAKuwC,cAAgB/9H,EAAOjD,EAAE,IALC,KAS7C,MAAMuhI,GAAYF,GAAS17H,MAErB67H,GAAUzE,IAActsC,IACnCA,EAAK0wC,YAAY,EAAG,GACpB1wC,EAAK+tC,YAAY,EAAG,EAAG,EAAG,EAAE,IAC3B,CAAC/tC,EAAMxtF,KACRwtF,EAAKgxC,eAAehxC,EAAKye,iBAAmBjsG,EAAK,IAChD,CAACuF,EAAOC,IACFA,EAAIymG,iBAAmB1mG,EAAM0mG,mBAClCze,GACKA,EAAKye,mBAIdsyB,GAAQ1wF,MAAS9wC,GACPo9E,SAASp9E,EAAI2I,KAAKC,MAAM5I,KAASA,EAAI,EAAY+8H,IAActsC,IACrEA,EAAKgxC,eAAe94H,KAAKC,MAAM6nF,EAAKye,iBAAmBlvG,GAAKA,GAC5DywF,EAAK0wC,YAAY,EAAG,GACpB1wC,EAAK+tC,YAAY,EAAG,EAAG,EAAG,EAAE,IAC3B,CAAC/tC,EAAMxtF,KACRwtF,EAAKgxC,eAAehxC,EAAKye,iBAAmBjsG,EAAOjD,EAAE,IALL,KAS7C,MAAM0hI,GAAWF,GAAQ77H,MCrChC,SAASg8H,GAAOlzB,EAAMmzB,EAAOC,EAAMC,EAAKC,EAAMC,GAE5C,MAAMC,EAAgB,CACpB,CAAC7E,GAAS,EAAQX,IAClB,CAACW,GAAS,EAAI,KACd,CAACA,GAAQ,GAAI,MACb,CAACA,GAAQ,GAAI,KACb,CAAC4E,EAAS,EAAQtF,IAClB,CAACsF,EAAS,EAAI,KACd,CAACA,EAAQ,GAAI,KACb,CAACA,EAAQ,GAAI,MACb,CAAGD,EAAO,EAAQpF,IAClB,CAAGoF,EAAO,EAAI,OACd,CAAGA,EAAO,EAAI,OACd,CAAGA,EAAM,GAAI,OACb,CAAID,EAAM,EAAQlF,IAClB,CAAIkF,EAAM,EAAI,QACd,CAAGD,EAAO,EAAQhF,IAClB,CAAE+E,EAAQ,EVxBehF,QUyBzB,CAAEgF,EAAQ,EAAI,QACd,CAAGnzB,EAAO,EAAQquB,KAWpB,SAASoF,EAAa15H,EAAO2oB,EAAMvF,GACjC,MAAMgB,EAASjkB,KAAKiE,IAAIukB,EAAO3oB,GAASojB,EAClCpsB,EAAIy4E,GAAS,EAAE,CAAC,CAAEh1E,KAAUA,IAAMI,MAAM4+H,EAAer1G,GAC7D,GAAIptB,IAAMyiI,EAAc3iI,OAAQ,OAAOmvG,EAAK39D,MAAMosC,GAAS10E,EAAQs0H,GAAc3rG,EAAO2rG,GAAclxG,IACtG,GAAU,IAANpsB,EAAS,OAAO29H,GAAYrsF,MAAMnoC,KAAKvC,IAAI82E,GAAS10E,EAAO2oB,EAAMvF,GAAQ,IAC7E,MAAO9pB,EAAGmB,GAAQg/H,EAAcr1G,EAASq1G,EAAcziI,EAAI,GAAG,GAAKyiI,EAAcziI,GAAG,GAAKotB,EAASptB,EAAI,EAAIA,GAC1G,OAAOsC,EAAEgvC,MAAM7tC,EACjB,CAEA,MAAO,CAjBP,SAAeuF,EAAO2oB,EAAMvF,GAC1B,MAAMlR,EAAUyW,EAAO3oB,EACnBkS,KAAUlS,EAAO2oB,GAAQ,CAACA,EAAM3oB,IACpC,MAAMooB,EAAWhF,GAAgC,mBAAhBA,EAAMjmB,MAAuBimB,EAAQs2G,EAAa15H,EAAO2oB,EAAMvF,GAC1FoxD,EAAQpsD,EAAWA,EAASjrB,MAAM6C,GAAQ2oB,EAAO,GAAK,GAC5D,OAAOzW,EAAUsiE,EAAMtiE,UAAYsiE,CACrC,EAWeklD,EACjB,CAEA,MAAOC,GAAUC,IAAmBT,GAAOH,GAASN,GAAUnB,GAAWpB,GAASb,GAASL,KACpF4E,GAAWC,IAAoBX,GAAON,GAAUR,GAAW9B,GAAYd,GAASL,GAAUP,IC1CjG,SAASkF,GAAU/7H,GACjB,GAAI,GAAKA,EAAE3E,GAAK2E,EAAE3E,EAAI,IAAK,CACzB,IAAI4uF,EAAO,IAAInvF,MAAM,EAAGkF,EAAEs6C,EAAGt6C,EAAEA,EAAGA,EAAEk9C,EAAGl9C,EAAE07C,EAAG17C,EAAE47C,EAAG57C,EAAE67C,GAEnD,OADAouC,EAAK6wC,YAAY96H,EAAE3E,GACZ4uF,CACT,CACA,OAAO,IAAInvF,KAAKkF,EAAE3E,EAAG2E,EAAEs6C,EAAGt6C,EAAEA,EAAGA,EAAEk9C,EAAGl9C,EAAE07C,EAAG17C,EAAE47C,EAAG57C,EAAE67C,EAClD,CAEA,SAASmgF,GAAQh8H,GACf,GAAI,GAAKA,EAAE3E,GAAK2E,EAAE3E,EAAI,IAAK,CACzB,IAAI4uF,EAAO,IAAInvF,KAAKA,KAAKmhI,KAAK,EAAGj8H,EAAEs6C,EAAGt6C,EAAEA,EAAGA,EAAEk9C,EAAGl9C,EAAE07C,EAAG17C,EAAE47C,EAAG57C,EAAE67C,IAE5D,OADAouC,EAAKgxC,eAAej7H,EAAE3E,GACf4uF,CACT,CACA,OAAO,IAAInvF,KAAKA,KAAKmhI,IAAIj8H,EAAE3E,EAAG2E,EAAEs6C,EAAGt6C,EAAEA,EAAGA,EAAEk9C,EAAGl9C,EAAE07C,EAAG17C,EAAE47C,EAAG57C,EAAE67C,GAC3D,CAEA,SAASqgF,GAAQ7gI,EAAGi/C,EAAGt6C,GACrB,MAAO,CAAC3E,EAAGA,EAAGi/C,EAAGA,EAAGt6C,EAAGA,EAAGk9C,EAAG,EAAGxB,EAAG,EAAGE,EAAG,EAAGC,EAAG,EACjD,CAEe,SAASsgF,GAAa7qB,GACnC,IAAI8qB,EAAkB9qB,EAAO+qB,SACzBC,EAAchrB,EAAOrnB,KACrBsyC,EAAcjrB,EAAOpnF,KACrBsyG,EAAiBlrB,EAAOmrB,QACxBC,EAAkBprB,EAAOqrB,KACzBC,EAAuBtrB,EAAOurB,UAC9BC,EAAgBxrB,EAAOyrB,OACvBC,EAAqB1rB,EAAO2rB,YAE5BC,EAAWC,GAASX,GACpBY,EAAeC,GAAab,GAC5Bc,EAAYH,GAAST,GACrBa,EAAgBF,GAAaX,GAC7Bc,EAAiBL,GAASP,GAC1Ba,EAAqBJ,GAAaT,GAClCc,EAAUP,GAASL,GACnBa,EAAcN,GAAaP,GAC3Bc,EAAeT,GAASH,GACxBa,EAAmBR,GAAaL,GAEhCc,EAAU,CACZ,EAkQF,SAA4B99H,GAC1B,OAAO48H,EAAqB58H,EAAEs4H,SAChC,EAnQE,EAqQF,SAAuBt4H,GACrB,OAAO08H,EAAgB18H,EAAEs4H,SAC3B,EAtQE,EAwQF,SAA0Bt4H,GACxB,OAAOg9H,EAAmBh9H,EAAEu6H,WAC9B,EAzQE,EA2QF,SAAqBv6H,GACnB,OAAO88H,EAAc98H,EAAEu6H,WACzB,EA5QE,EAAK,KACL,EAAKwD,GACL,EAAKA,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAkQF,SAAsBx+H,GACpB,OAAOw8H,IAAiBx8H,EAAEqqG,YAAc,IAC1C,EAnQE,EAqQF,SAAuBrqG,GACrB,OAAO,KAAOA,EAAEu6H,WAAa,EAC/B,EAtQE,EAAKkE,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAK,KACL,EAAK,KACL,EAAK,GACL,EAAKC,GACL,EAAKC,GACL,IAAKC,IAGHC,EAAa,CACf,EAuPF,SAA+Bp/H,GAC7B,OAAO48H,EAAqB58H,EAAEs5H,YAChC,EAxPE,EA0PF,SAA0Bt5H,GACxB,OAAO08H,EAAgB18H,EAAEs5H,YAC3B,EA3PE,EA6PF,SAA6Bt5H,GAC3B,OAAOg9H,EAAmBh9H,EAAE2oG,cAC9B,EA9PE,EAgQF,SAAwB3oG,GACtB,OAAO88H,EAAc98H,EAAE2oG,cACzB,EAjQE,EAAK,KACL,EAAK02B,GACL,EAAKA,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAuPF,SAAyB9/H,GACvB,OAAOw8H,IAAiBx8H,EAAEmoG,eAAiB,IAC7C,EAxPE,EA0PF,SAA0BnoG,GACxB,OAAO,KAAOA,EAAE2oG,cAAgB,EAClC,EA3PE,EAAK81B,GACL,EAAKC,GACL,EAAKqB,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAK,KACL,EAAK,KACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,IAAKpB,IAGHqB,EAAS,CACX,EA4JF,SAA2BxgI,EAAGo/E,EAAQpmF,GACpC,IAAIiD,EAAIuhI,EAAex6G,KAAKo8D,EAAO5vE,MAAMxW,IACzC,OAAOiD,GAAK+D,EAAEu9C,EAAIkgF,EAAmBj8H,IAAIvF,EAAE,GAAGsd,eAAgBvgB,EAAIiD,EAAE,GAAGnD,SAAW,CACpF,EA9JE,EAgKF,SAAsBkH,EAAGo/E,EAAQpmF,GAC/B,IAAIiD,EAAIqhI,EAAUt6G,KAAKo8D,EAAO5vE,MAAMxW,IACpC,OAAOiD,GAAK+D,EAAEu9C,EAAIggF,EAAc/7H,IAAIvF,EAAE,GAAGsd,eAAgBvgB,EAAIiD,EAAE,GAAGnD,SAAW,CAC/E,EAlKE,EAoKF,SAAyBkH,EAAGo/E,EAAQpmF,GAClC,IAAIiD,EAAI2hI,EAAa56G,KAAKo8D,EAAO5vE,MAAMxW,IACvC,OAAOiD,GAAK+D,EAAEs6C,EAAIujF,EAAiBr8H,IAAIvF,EAAE,GAAGsd,eAAgBvgB,EAAIiD,EAAE,GAAGnD,SAAW,CAClF,EAtKE,EAwKF,SAAoBkH,EAAGo/E,EAAQpmF,GAC7B,IAAIiD,EAAIyhI,EAAQ16G,KAAKo8D,EAAO5vE,MAAMxW,IAClC,OAAOiD,GAAK+D,EAAEs6C,EAAIqjF,EAAYn8H,IAAIvF,EAAE,GAAGsd,eAAgBvgB,EAAIiD,EAAE,GAAGnD,SAAW,CAC7E,EA1KE,EA4KF,SAA6BkH,EAAGo/E,EAAQpmF,GACtC,OAAOynI,EAAezgI,EAAGo8H,EAAiBh9C,EAAQpmF,EACpD,EA7KE,EAAK0nI,GACL,EAAKA,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKA,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAuIF,SAAqBlhI,EAAGo/E,EAAQpmF,GAC9B,IAAIiD,EAAIihI,EAASl6G,KAAKo8D,EAAO5vE,MAAMxW,IACnC,OAAOiD,GAAK+D,EAAEO,EAAI68H,EAAa57H,IAAIvF,EAAE,GAAGsd,eAAgBvgB,EAAIiD,EAAE,GAAGnD,SAAW,CAC9E,EAzIE,EAAKqoI,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EAAKC,GACL,EA0JF,SAAyB3hI,EAAGo/E,EAAQpmF,GAClC,OAAOynI,EAAezgI,EAAGs8H,EAAal9C,EAAQpmF,EAChD,EA3JE,EA6JF,SAAyBgH,EAAGo/E,EAAQpmF,GAClC,OAAOynI,EAAezgI,EAAGu8H,EAAan9C,EAAQpmF,EAChD,EA9JE,EAAK4nI,GACL,EAAKC,GACL,EAAKe,GACL,IAAKC,IAWP,SAAS3vB,EAAUrB,EAAWitB,GAC5B,OAAO,SAAS7zC,GACd,IAIIxjF,EACA6gG,EACAxsB,EANAsE,EAAS,GACTpmF,GAAK,EACLsJ,EAAI,EACJrG,EAAI40G,EAAU/3G,OAOlB,IAFMmxF,aAAgBnvF,OAAOmvF,EAAO,IAAInvF,MAAMmvF,MAErCjxF,EAAIiD,GACqB,KAA5B40G,EAAUtyD,WAAWvlD,KACvBomF,EAAOnnF,KAAK44G,EAAUrhG,MAAMlN,EAAGtJ,IACgB,OAA1CsuG,EAAMw6B,GAAKr7H,EAAIoqG,EAAUz3F,SAASpgB,KAAcyN,EAAIoqG,EAAUz3F,SAASpgB,GACvEsuG,EAAY,MAAN7gG,EAAY,IAAM,KACzBq0E,EAASgjD,EAAQr3H,MAAIA,EAAIq0E,EAAOmP,EAAMqd,IAC1CloB,EAAOnnF,KAAKwO,GACZnE,EAAItJ,EAAI,GAKZ,OADAomF,EAAOnnF,KAAK44G,EAAUrhG,MAAMlN,EAAGtJ,IACxBomF,EAAOrmF,KAAK,GACrB,CACF,CAEA,SAASgpI,EAASlxB,EAAWmxB,GAC3B,OAAO,SAAS5iD,GACd,IAEIi8C,EAAMC,EAFNt7H,EAAIk8H,GAAQ,UAAM5iI,EAAW,GAGjC,GAFQmnI,EAAezgI,EAAG6wG,EAAWzxB,GAAU,GAAI,IAE1CA,EAAOtmF,OAAQ,OAAO,KAG/B,GAAI,MAAOkH,EAAG,OAAO,IAAIlF,KAAKkF,EAAEd,GAChC,GAAI,MAAOc,EAAG,OAAO,IAAIlF,KAAW,IAANkF,EAAEq5C,GAAY,MAAOr5C,EAAIA,EAAE67C,EAAI,IAY7D,GATImmF,KAAO,MAAOhiI,KAAIA,EAAEgiI,EAAI,GAGxB,MAAOhiI,IAAGA,EAAEk9C,EAAIl9C,EAAEk9C,EAAI,GAAW,GAANl9C,EAAEO,QAGrBjH,IAAR0G,EAAEs6C,IAAiBt6C,EAAEs6C,EAAI,MAAOt6C,EAAIA,EAAEm4C,EAAI,GAG1C,MAAOn4C,EAAG,CACZ,GAAIA,EAAEo5E,EAAI,GAAKp5E,EAAEo5E,EAAI,GAAI,OAAO,KAC1B,MAAOp5E,IAAIA,EAAEu9C,EAAI,GACnB,MAAOv9C,GAC2Bs7H,GAApCD,EAAOW,GAAQE,GAAQl8H,EAAE3E,EAAG,EAAG,KAAgBi+H,YAC/C+B,EAAOC,EAAM,GAAa,IAARA,EAAY9B,GAAU7nG,KAAK0pG,GAAQ7B,GAAU6B,GAC/DA,EAAOtD,GAAO9tF,OAAOoxF,EAAkB,GAAXr7H,EAAEo5E,EAAI,IAClCp5E,EAAE3E,EAAIggI,EAAK3yB,iBACX1oG,EAAEs6C,EAAI+gF,EAAK1yB,cACX3oG,EAAEA,EAAIq7H,EAAKzyB,cAAgB5oG,EAAEu9C,EAAI,GAAK,IAEA+9E,GAAtCD,EAAOU,GAAUG,GAAQl8H,EAAE3E,EAAG,EAAG,KAAgBi9H,SACjD+C,EAAOC,EAAM,GAAa,IAARA,EAAY9C,GAAW7mG,KAAK0pG,GAAQ7C,GAAW6C,GACjEA,EAAO5D,GAAQxtF,OAAOoxF,EAAkB,GAAXr7H,EAAEo5E,EAAI,IACnCp5E,EAAE3E,EAAIggI,EAAKb,cACXx6H,EAAEs6C,EAAI+gF,EAAKd,WACXv6H,EAAEA,EAAIq7H,EAAKzD,WAAa53H,EAAEu9C,EAAI,GAAK,EAEvC,MAAW,MAAOv9C,GAAK,MAAOA,KACtB,MAAOA,IAAIA,EAAEu9C,EAAI,MAAOv9C,EAAIA,EAAEwF,EAAI,EAAI,MAAOxF,EAAI,EAAI,GAC3Ds7H,EAAM,MAAOt7H,EAAIg8H,GAAQE,GAAQl8H,EAAE3E,EAAG,EAAG,IAAIi+H,YAAcyC,GAAUG,GAAQl8H,EAAE3E,EAAG,EAAG,IAAIi9H,SACzFt4H,EAAEs6C,EAAI,EACNt6C,EAAEA,EAAI,MAAOA,GAAKA,EAAEu9C,EAAI,GAAK,EAAU,EAANv9C,EAAEy0F,GAAS6mC,EAAM,GAAK,EAAIt7H,EAAEu9C,EAAU,EAANv9C,EAAEw9C,GAAS89E,EAAM,GAAK,GAKzF,MAAI,MAAOt7H,GACTA,EAAEk9C,GAAKl9C,EAAEgiI,EAAI,IAAM,EACnBhiI,EAAE07C,GAAK17C,EAAEgiI,EAAI,IACNhG,GAAQh8H,IAIV+7H,GAAU/7H,EACnB,CACF,CAEA,SAASygI,EAAezgI,EAAG6wG,EAAWzxB,EAAQ98E,GAO5C,IANA,IAGImE,EACAy0B,EAJAliC,EAAI,EACJiD,EAAI40G,EAAU/3G,OACdwhD,EAAI8kC,EAAOtmF,OAIRE,EAAIiD,GAAG,CACZ,GAAIqG,GAAKg4C,EAAG,OAAQ,EAEpB,GAAU,MADV7zC,EAAIoqG,EAAUtyD,WAAWvlD,OAIvB,GAFAyN,EAAIoqG,EAAUz3F,OAAOpgB,OACrBkiC,EAAQslG,EAAO/5H,KAAKq7H,GAAOjxB,EAAUz3F,OAAOpgB,KAAOyN,MACnCnE,EAAI44B,EAAMl7B,EAAGo/E,EAAQ98E,IAAM,EAAI,OAAQ,OAClD,GAAImE,GAAK24E,EAAO7gC,WAAWj8C,KAChC,OAAQ,CAEZ,CAEA,OAAOA,CACT,CAuFA,OAzMAw7H,EAAQr/H,EAAIyzG,EAAUoqB,EAAawB,GACnCA,EAAQ1lF,EAAI85D,EAAUqqB,EAAauB,GACnCA,EAAQr3H,EAAIyrG,EAAUkqB,EAAiB0B,GACvCsB,EAAW3gI,EAAIyzG,EAAUoqB,EAAa8C,GACtCA,EAAWhnF,EAAI85D,EAAUqqB,EAAa6C,GACtCA,EAAW34H,EAAIyrG,EAAUkqB,EAAiBgD,GAoMnC,CACLtkD,OAAQ,SAAS+1B,GACf,IAAIz1G,EAAI82G,EAAUrB,GAAa,GAAIitB,GAEnC,OADA1iI,EAAE7C,SAAW,WAAa,OAAOs4G,CAAW,EACrCz1G,CACT,EACA8/B,MAAO,SAAS21E,GACd,IAAItwG,EAAIwhI,EAASlxB,GAAa,IAAI,GAElC,OADAtwG,EAAEhI,SAAW,WAAa,OAAOs4G,CAAW,EACrCtwG,CACT,EACA0hI,UAAW,SAASpxB,GAClB,IAAIz1G,EAAI82G,EAAUrB,GAAa,GAAIuuB,GAEnC,OADAhkI,EAAE7C,SAAW,WAAa,OAAOs4G,CAAW,EACrCz1G,CACT,EACA8mI,SAAU,SAASrxB,GACjB,IAAItwG,EAAIwhI,EAASlxB,GAAa,IAAI,GAElC,OADAtwG,EAAEhI,SAAW,WAAa,OAAOs4G,CAAW,EACrCtwG,CACT,EAEJ,CAEA,ICjYI,GACO4hI,GACAC,GACAH,GACAC,GD6XPJ,GAAO,CAAC,IAAK,GAAI,EAAK,IAAK,EAAK,KAChCO,GAAW,UACXC,GAAY,KACZC,GAAY,sBAEhB,SAAS,GAAIjmI,EAAO21B,EAAMkJ,GACxB,IAAI4hE,EAAOzgG,EAAQ,EAAI,IAAM,GACzB8iF,GAAU2d,GAAQzgG,EAAQA,GAAS,GACnCxD,EAASsmF,EAAOtmF,OACpB,OAAOikG,GAAQjkG,EAASqiC,EAAQ,IAAIppB,MAAMopB,EAAQriC,EAAS,GAAGC,KAAKk5B,GAAQmtD,EAASA,EACtF,CAEA,SAASojD,GAAQnpF,GACf,OAAOA,EAAE//B,QAAQipH,GAAW,OAC9B,CAEA,SAASpF,GAAS19C,GAChB,OAAO,IAAIoG,OAAO,OAASpG,EAAMhnF,IAAI+pI,IAASzpI,KAAK,KAAO,IAAK,IACjE,CAEA,SAASskI,GAAa59C,GACpB,OAAO,IAAI30E,IAAI20E,EAAMhnF,KAAI,CAAC27C,EAAMp7C,IAAM,CAACo7C,EAAK76B,cAAevgB,KAC7D,CAEA,SAAS0oI,GAAyB1hI,EAAGo/E,EAAQpmF,GAC3C,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEu9C,GAAKthD,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASyoI,GAAyBvhI,EAAGo/E,EAAQpmF,GAC3C,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEwF,GAAKvJ,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAAS0oI,GAAsBxhI,EAAGo/E,EAAQpmF,GACxC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEw9C,GAAKvhD,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAAS2oI,GAAmBzhI,EAAGo/E,EAAQpmF,GACrC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEo5E,GAAKn9E,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAAS6oI,GAAsB3hI,EAAGo/E,EAAQpmF,GACxC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEy0F,GAAKx4F,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAAS+nI,GAAc7gI,EAAGo/E,EAAQpmF,GAChC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAE3E,GAAKY,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAAS8nI,GAAU5gI,EAAGo/E,EAAQpmF,GAC5B,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAE3E,GAAKY,EAAE,KAAOA,EAAE,GAAK,GAAK,KAAO,KAAOjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC5E,CAEA,SAAS8oI,GAAU5hI,EAAGo/E,EAAQpmF,GAC5B,IAAIiD,EAAI,+BAA+B+mB,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAChE,OAAOiD,GAAK+D,EAAEgiI,EAAI/lI,EAAE,GAAK,IAAMA,EAAE,IAAMA,EAAE,IAAM,OAAQjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC7E,CAEA,SAASqoI,GAAanhI,EAAGo/E,EAAQpmF,GAC/B,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEm4C,EAAW,EAAPl8C,EAAE,GAAS,EAAGjD,EAAIiD,EAAE,GAAGnD,SAAW,CACtD,CAEA,SAASmoI,GAAiBjhI,EAAGo/E,EAAQpmF,GACnC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEs6C,EAAIr+C,EAAE,GAAK,EAAGjD,EAAIiD,EAAE,GAAGnD,SAAW,CAClD,CAEA,SAAS4nI,GAAgB1gI,EAAGo/E,EAAQpmF,GAClC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEA,GAAK/D,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASioI,GAAe/gI,EAAGo/E,EAAQpmF,GACjC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEs6C,EAAI,EAAGt6C,EAAEA,GAAK/D,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CACxD,CAEA,SAASgoI,GAAY9gI,EAAGo/E,EAAQpmF,GAC9B,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAEk9C,GAAKjhD,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASooI,GAAalhI,EAAGo/E,EAAQpmF,GAC/B,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAE07C,GAAKz/C,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASwoI,GAAathI,EAAGo/E,EAAQpmF,GAC/B,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAE47C,GAAK3/C,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASkoI,GAAkBhhI,EAAGo/E,EAAQpmF,GACpC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAE67C,GAAK5/C,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAAS6nI,GAAkB3gI,EAAGo/E,EAAQpmF,GACpC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC1C,OAAOiD,GAAK+D,EAAE67C,EAAI15C,KAAKC,MAAMnG,EAAE,GAAK,KAAOjD,EAAIiD,EAAE,GAAGnD,SAAW,CACjE,CAEA,SAAS+oI,GAAoB7hI,EAAGo/E,EAAQpmF,GACtC,IAAIiD,EAAIqmI,GAAUt/G,KAAKo8D,EAAO5vE,MAAMxW,EAAGA,EAAI,IAC3C,OAAOiD,EAAIjD,EAAIiD,EAAE,GAAGnD,QAAU,CAChC,CAEA,SAASsoI,GAAmBphI,EAAGo/E,EAAQpmF,GACrC,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,IACnC,OAAOiD,GAAK+D,EAAEd,GAAKjD,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASuoI,GAA0BrhI,EAAGo/E,EAAQpmF,GAC5C,IAAIiD,EAAIomI,GAASr/G,KAAKo8D,EAAO5vE,MAAMxW,IACnC,OAAOiD,GAAK+D,EAAEq5C,GAAKp9C,EAAE,GAAIjD,EAAIiD,EAAE,GAAGnD,SAAW,CAC/C,CAEA,SAASilI,GAAiB/9H,EAAGO,GAC3B,OAAO,GAAIP,EAAE43H,UAAWr3H,EAAG,EAC7B,CAEA,SAAS49H,GAAan+H,EAAGO,GACvB,OAAO,GAAIP,EAAEqqG,WAAY9pG,EAAG,EAC9B,CAEA,SAAS69H,GAAap+H,EAAGO,GACvB,OAAO,GAAIP,EAAEqqG,WAAa,IAAM,GAAI9pG,EAAG,EACzC,CAEA,SAAS89H,GAAgBr+H,EAAGO,GAC1B,OAAO,GAAI,EAAIk3H,GAAQryG,MAAMy1G,GAAS76H,GAAIA,GAAIO,EAAG,EACnD,CAEA,SAAS+9H,GAAmBt+H,EAAGO,GAC7B,OAAO,GAAIP,EAAEkoD,kBAAmB3nD,EAAG,EACrC,CAEA,SAASy9H,GAAmBh+H,EAAGO,GAC7B,OAAO+9H,GAAmBt+H,EAAGO,GAAK,KACpC,CAEA,SAASg+H,GAAkBv+H,EAAGO,GAC5B,OAAO,GAAIP,EAAEu6H,WAAa,EAAGh6H,EAAG,EAClC,CAEA,SAASi+H,GAAcx+H,EAAGO,GACxB,OAAO,GAAIP,EAAE+2H,aAAcx2H,EAAG,EAChC,CAEA,SAASo+H,GAAc3+H,EAAGO,GACxB,OAAO,GAAIP,EAAE82H,aAAcv2H,EAAG,EAChC,CAEA,SAASq+H,GAA0B5+H,GACjC,IAAIs7H,EAAMt7H,EAAEs4H,SACZ,OAAe,IAARgD,EAAY,EAAIA,CACzB,CAEA,SAASuD,GAAuB7+H,EAAGO,GACjC,OAAO,GAAIg4H,GAAWnzG,MAAMy1G,GAAS76H,GAAK,EAAGA,GAAIO,EAAG,EACtD,CAEA,SAASkiI,GAAKziI,GACZ,IAAIs7H,EAAMt7H,EAAEs4H,SACZ,OAAQgD,GAAO,GAAa,IAARA,EAAa3C,GAAa34H,GAAK24H,GAAahnG,KAAK3xB,EACvE,CAEA,SAAS8+H,GAAoB9+H,EAAGO,GAE9B,OADAP,EAAIyiI,GAAKziI,GACF,GAAI24H,GAAavzG,MAAMy1G,GAAS76H,GAAIA,IAA+B,IAAzB66H,GAAS76H,GAAGs4H,UAAiB/3H,EAAG,EACnF,CAEA,SAASw+H,GAA0B/+H,GACjC,OAAOA,EAAEs4H,QACX,CAEA,SAAS0G,GAAuBh/H,EAAGO,GACjC,OAAO,GAAIi4H,GAAWpzG,MAAMy1G,GAAS76H,GAAK,EAAGA,GAAIO,EAAG,EACtD,CAEA,SAAS,GAAWP,EAAGO,GACrB,OAAO,GAAIP,EAAEw6H,cAAgB,IAAKj6H,EAAG,EACvC,CAEA,SAAS09H,GAAcj+H,EAAGO,GAExB,OAAO,IADPP,EAAIyiI,GAAKziI,IACIw6H,cAAgB,IAAKj6H,EAAG,EACvC,CAEA,SAAS0+H,GAAej/H,EAAGO,GACzB,OAAO,GAAIP,EAAEw6H,cAAgB,IAAOj6H,EAAG,EACzC,CAEA,SAAS29H,GAAkBl+H,EAAGO,GAC5B,IAAI+6H,EAAMt7H,EAAEs4H,SAEZ,OAAO,IADPt4H,EAAKs7H,GAAO,GAAa,IAARA,EAAa3C,GAAa34H,GAAK24H,GAAahnG,KAAK3xB,IACrDw6H,cAAgB,IAAOj6H,EAAG,EACzC,CAEA,SAAS2+H,GAAWl/H,GAClB,IAAI03E,EAAI13E,EAAE63H,oBACV,OAAQngD,EAAI,EAAI,KAAOA,IAAM,EAAG,MAC1B,GAAIA,EAAI,GAAK,EAAG,IAAK,GACrB,GAAIA,EAAI,GAAI,IAAK,EACzB,CAEA,SAAS2nD,GAAoBr/H,EAAGO,GAC9B,OAAO,GAAIP,EAAE4oG,aAAcroG,EAAG,EAChC,CAEA,SAASk/H,GAAgBz/H,EAAGO,GAC1B,OAAO,GAAIP,EAAEmoG,cAAe5nG,EAAG,EACjC,CAEA,SAASm/H,GAAgB1/H,EAAGO,GAC1B,OAAO,GAAIP,EAAEmoG,cAAgB,IAAM,GAAI5nG,EAAG,EAC5C,CAEA,SAASo/H,GAAmB3/H,EAAGO,GAC7B,OAAO,GAAI,EAAIw3H,GAAO3yG,MAAM41G,GAAQh7H,GAAIA,GAAIO,EAAG,EACjD,CAEA,SAASq/H,GAAsB5/H,EAAGO,GAChC,OAAO,GAAIP,EAAEyoG,qBAAsBloG,EAAG,EACxC,CAEA,SAAS++H,GAAsBt/H,EAAGO,GAChC,OAAOq/H,GAAsB5/H,EAAGO,GAAK,KACvC,CAEA,SAASs/H,GAAqB7/H,EAAGO,GAC/B,OAAO,GAAIP,EAAE2oG,cAAgB,EAAGpoG,EAAG,EACrC,CAEA,SAASu/H,GAAiB9/H,EAAGO,GAC3B,OAAO,GAAIP,EAAEqoG,gBAAiB9nG,EAAG,EACnC,CAEA,SAASw/H,GAAiB//H,EAAGO,GAC3B,OAAO,GAAIP,EAAEuoG,gBAAiBhoG,EAAG,EACnC,CAEA,SAASy/H,GAA6BhgI,GACpC,IAAI0iI,EAAM1iI,EAAEs5H,YACZ,OAAe,IAARoJ,EAAY,EAAIA,CACzB,CAEA,SAASzC,GAA0BjgI,EAAGO,GACpC,OAAO,GAAIg5H,GAAUn0G,MAAM41G,GAAQh7H,GAAK,EAAGA,GAAIO,EAAG,EACpD,CAEA,SAASoiI,GAAQ3iI,GACf,IAAIs7H,EAAMt7H,EAAEs5H,YACZ,OAAQgC,GAAO,GAAa,IAARA,EAAa3B,GAAY35H,GAAK25H,GAAYhoG,KAAK3xB,EACrE,CAEA,SAASkgI,GAAuBlgI,EAAGO,GAEjC,OADAP,EAAI2iI,GAAQ3iI,GACL,GAAI25H,GAAYv0G,MAAM41G,GAAQh7H,GAAIA,IAAiC,IAA3Bg7H,GAAQh7H,GAAGs5H,aAAoB/4H,EAAG,EACnF,CAEA,SAAS4/H,GAA6BngI,GACpC,OAAOA,EAAEs5H,WACX,CAEA,SAAS8G,GAA0BpgI,EAAGO,GACpC,OAAO,GAAIi5H,GAAUp0G,MAAM41G,GAAQh7H,GAAK,EAAGA,GAAIO,EAAG,EACpD,CAEA,SAAS8/H,GAAcrgI,EAAGO,GACxB,OAAO,GAAIP,EAAE0oG,iBAAmB,IAAKnoG,EAAG,EAC1C,CAEA,SAASg/H,GAAiBv/H,EAAGO,GAE3B,OAAO,IADPP,EAAI2iI,GAAQ3iI,IACC0oG,iBAAmB,IAAKnoG,EAAG,EAC1C,CAEA,SAAS+/H,GAAkBtgI,EAAGO,GAC5B,OAAO,GAAIP,EAAE0oG,iBAAmB,IAAOnoG,EAAG,EAC5C,CAEA,SAASi/H,GAAqBx/H,EAAGO,GAC/B,IAAI+6H,EAAMt7H,EAAEs5H,YAEZ,OAAO,IADPt5H,EAAKs7H,GAAO,GAAa,IAARA,EAAa3B,GAAY35H,GAAK25H,GAAYhoG,KAAK3xB,IACnD0oG,iBAAmB,IAAOnoG,EAAG,EAC5C,CAEA,SAASggI,KACP,MAAO,OACT,CAEA,SAASpB,KACP,MAAO,GACT,CAEA,SAASV,GAAoBz+H,GAC3B,OAAQA,CACV,CAEA,SAAS0+H,GAA2B1+H,GAClC,OAAOmC,KAAKC,OAAOpC,EAAI,IACzB,CCrqBe,SAAS,GAAcolF,GAMpC,OALA,GAAS+2C,GAAa/2C,GACtB+8C,GAAa,GAAOrnD,OACpBsnD,GAAY,GAAOlnG,MACnB+mG,GAAY,GAAOA,UACnBC,GAAW,GAAOA,SACX,EACT,CCpBA,SAAS,GAAK5mI,GACZ,OAAO,IAAIR,KAAKQ,EAClB,CAEA,SAAS,GAAOA,GACd,OAAOA,aAAaR,MAAQQ,GAAK,IAAIR,MAAMQ,EAC7C,CAEO,SAASsnI,GAASpsD,EAAOklD,EAAczzB,EAAMmzB,EAAOC,EAAMC,EAAKC,EAAMC,EAAQ5E,EAAQ97C,GAC1F,IAAItpD,EAAQyiG,KACRrb,EAASpnF,EAAMonF,OACftkF,EAAS9C,EAAM8C,OAEfuuG,EAAoB/nD,EAAO,OAC3BgoD,EAAehoD,EAAO,OACtBioD,EAAejoD,EAAO,SACtBkoD,EAAaloD,EAAO,SACpBmoD,EAAYnoD,EAAO,SACnBooD,EAAapoD,EAAO,SACpBqoD,EAAcroD,EAAO,MACrBsoD,EAAatoD,EAAO,MAExB,SAASJ,EAAWuP,GAClB,OAAQ2sC,EAAO3sC,GAAQA,EAAO44C,EACxBrH,EAAOvxC,GAAQA,EAAO64C,EACtBvH,EAAKtxC,GAAQA,EAAO84C,EACpBzH,EAAIrxC,GAAQA,EAAO+4C,EACnB5H,EAAMnxC,GAAQA,EAAQoxC,EAAKpxC,GAAQA,EAAOg5C,EAAYC,EACtDj7B,EAAKhe,GAAQA,EAAOk5C,EACpBC,GAAYn5C,EACpB,CA6BA,OA3BAz4D,EAAMonF,OAAS,SAASv9G,GACtB,OAAO,IAAIP,KAAK89G,EAAOv9G,GACzB,EAEAm2B,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,OAASw7B,EAAOviB,MAAM+vB,KAAKtmC,EAAG,KAAW84B,IAAS77B,IAAI,GACzE,EAEA+4B,EAAMglD,MAAQ,SAASpsD,GACrB,IAAIpqB,EAAIs0B,IACR,OAAOkiD,EAAMx2E,EAAE,GAAIA,EAAEA,EAAElH,OAAS,GAAgB,MAAZsxB,EAAmB,GAAKA,EAC9D,EAEAoH,EAAMkpD,WAAa,SAASt1D,EAAOyrF,GACjC,OAAoB,MAAbA,EAAoBn2B,EAAaI,EAAO+1B,EACjD,EAEAr/E,EAAMiE,KAAO,SAASrL,GACpB,IAAIpqB,EAAIs0B,IAER,OADKlK,GAAsC,mBAAnBA,EAASjrB,QAAsBirB,EAAWsxG,EAAa17H,EAAE,GAAIA,EAAEA,EAAElH,OAAS,GAAgB,MAAZsxB,EAAmB,GAAKA,IACvHA,EAAWkK,EAAO,GAAKt0B,EAAGoqB,IAAaoH,CAChD,EAEAA,EAAM2pD,KAAO,WACX,OAAOA,GAAK3pD,EAAOoxG,GAASpsD,EAAOklD,EAAczzB,EAAMmzB,EAAOC,EAAMC,EAAKC,EAAMC,EAAQ5E,EAAQ97C,GACjG,EAEOtpD,CACT,CAEe,SAAStH,KACtB,OAAOgpG,GAAUt6G,MAAMgqH,GAAS/G,GAAWC,GAAkBjB,GAAUR,GAAW,GAAU5C,GAASL,GAAUP,GAAY,GAAYsL,IAAY7tG,OAAO,CAAC,IAAIx5B,KAAK,IAAM,EAAG,GAAI,IAAIA,KAAK,IAAM,EAAG,KAAM8a,UAC3M,CCjEe,SAASytH,KACtB,OAAOnQ,GAAUt6G,MAAMgqH,GAASjH,GAAUC,GAAiBZ,GAASN,GAAU,GAAS3C,GAAQT,GAASL,GAAW,GAAWgL,IAAW3tG,OAAO,CAACx5B,KAAKmhI,IAAI,IAAM,EAAG,GAAInhI,KAAKmhI,IAAI,IAAM,EAAG,KAAMrmH,UACjM,CCCA,SAAS,KACP,IAEIxO,EACAD,EACAm8H,EACApjG,EAGAozF,EARA9hF,EAAK,EACLzI,EAAK,EAKLymF,EAAe,GACflnC,GAAQ,EAGZ,SAAS92D,EAAM/yB,GACb,OAAY,MAALA,GAAaykB,MAAMzkB,GAAKA,GAAK60H,EAAU9D,EAAqB,IAAR8T,EAAY,IAAO7kI,GAAKyhC,EAAUzhC,GAAK2I,GAAMk8H,EAAKh7C,EAAQnmF,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGjB,IAAMA,GACrJ,CAcA,SAASU,EAAMivF,GACb,OAAO,SAAS5yF,GACd,IAAI2oH,EAAIiF,EACR,OAAOxzG,UAAU9c,SAAWqrH,EAAIiF,GAAM5tH,EAAGg0H,EAAephC,EAAY+1B,EAAIiF,GAAK53F,GAAS,CAACg+F,EAAa,GAAIA,EAAa,GACvH,CACF,CAUA,OA3BAh+F,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,SAAW04C,EAAIzI,GAAMvtC,EAAG4L,EAAK84B,EAAUsR,GAAMA,GAAKrqC,EAAK+4B,EAAU6I,GAAMA,GAAKu6F,EAAMl8H,IAAOD,EAAK,EAAI,GAAKA,EAAKC,GAAKoqB,GAAS,CAACggB,EAAIzI,EAClJ,EAEAvX,EAAM82D,MAAQ,SAAS9sF,GACrB,OAAOoa,UAAU9c,QAAUwvF,IAAU9sF,EAAGg2B,GAAS82D,CACnD,EAEA92D,EAAMg+F,aAAe,SAASh0H,GAC5B,OAAOoa,UAAU9c,QAAU02H,EAAeh0H,EAAGg2B,GAASg+F,CACxD,EASAh+F,EAAMryB,MAAQA,EAAM,IAEpBqyB,EAAMkiG,WAAav0H,EAAM,IAEzBqyB,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEO,SAASh4H,GAEd,OADA4kC,EAAY5kC,EAAG8L,EAAK9L,EAAEk2C,GAAKrqC,EAAK7L,EAAEytC,GAAKu6F,EAAMl8H,IAAOD,EAAK,EAAI,GAAKA,EAAKC,GAChEoqB,CACT,CACF,CAEO,SAAS,GAAKjE,EAAQnH,GAC3B,OAAOA,EACFkO,OAAO/G,EAAO+G,UACdk7F,aAAajiG,EAAOiiG,gBACpBlnC,MAAM/6D,EAAO+6D,SACbgrC,QAAQ/lG,EAAO+lG,UACtB,CAEe,SAASzpG,KACtB,IAAI2H,EAAQ6iG,GAAU,KAAc,KAMpC,OAJA7iG,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAO3H,KACrB,EAEOspG,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAAS2tH,KACd,IAAI/xG,EAAQqjG,GAAQ,MAAevgG,OAAO,CAAC,EAAG,KAM9C,OAJA9C,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAO+xG,MAAiBp+G,KAAKqM,EAAMrM,OACjD,EAEOguG,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAAS4tH,KACd,IAAIhyG,EAAQ8jG,GAAU,MAMtB,OAJA9jG,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAOgyG,MAAoBxtD,SAASxkD,EAAMwkD,WACxD,EAEOm9C,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAAS6tH,KACd,IAAIjyG,EAAQmkG,GAAO,MAMnB,OAJAnkG,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAOiyG,MAAiB94B,SAASn5E,EAAMm5E,WACrD,EAEOwoB,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAAS8tH,KACd,OAAOD,GAAc7qH,MAAM,KAAMhD,WAAW+0F,SAAS,GACvD,CCtGe,SAASg5B,KACtB,IAAIrvG,EAAS,GACTk7F,EAAe,GAEnB,SAASh+F,EAAM/yB,GACb,GAAS,MAALA,IAAcykB,MAAMzkB,GAAKA,GAAI,OAAO+wH,GAAcn4C,EAAO/iD,EAAQ71B,EAAG,GAAK,IAAM61B,EAAOx7B,OAAS,GACrG,CA0BA,OAxBA04B,EAAM8C,OAAS,SAAS94B,GACtB,IAAKoa,UAAU9c,OAAQ,OAAOw7B,EAAO9kB,QACrC8kB,EAAS,GACT,IAAK,IAAIt0B,KAAKxE,EAAY,MAALwE,GAAckjB,MAAMljB,GAAKA,IAAIs0B,EAAOr8B,KAAK+H,GAE9D,OADAs0B,EAAO3zB,KAAK4wE,GACL//C,CACT,EAEAA,EAAMg+F,aAAe,SAASh0H,GAC5B,OAAOoa,UAAU9c,QAAU02H,EAAeh0H,EAAGg2B,GAASg+F,CACxD,EAEAh+F,EAAMryB,MAAQ,WACZ,OAAOm1B,EAAO77B,KAAI,CAACuH,EAAGhH,IAAMw2H,EAAax2H,GAAKs7B,EAAOx7B,OAAS,KAChE,EAEA04B,EAAMwkG,UAAY,SAAS/5H,GACzB,OAAO8V,MAAM+vB,KAAK,CAAChpC,OAAQmD,EAAI,IAAI,CAACT,EAAGxC,IAAM++E,GAASzjD,EAAQt7B,EAAIiD,IACpE,EAEAu1B,EAAM2pD,KAAO,WACX,OAAOwoD,GAAmBnU,GAAcl7F,OAAOA,EACjD,EAEO6+F,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CC5BA,SAAS,KACP,IAIIxO,EACAD,EACAwyC,EACA2pF,EACAM,EAEA1jG,EAEAozF,EAZA9hF,EAAK,EACLzI,EAAK,GACLC,EAAK,EACLqQ,EAAI,EAMJm2E,EAAe,GAEflnC,GAAQ,EAGZ,SAAS92D,EAAM/yB,GACb,OAAOykB,MAAMzkB,GAAKA,GAAK60H,GAAW70H,EAAI,KAAQA,GAAKyhC,EAAUzhC,IAAM0I,IAAOkyC,EAAI56C,EAAI46C,EAAIlyC,EAAKm8H,EAAMM,GAAMpU,EAAalnC,EAAQnmF,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGjB,IAAMA,GAC5J,CAcA,SAASU,EAAMivF,GACb,OAAO,SAAS5yF,GACd,IAAI2oH,EAAIiF,EAAIC,EACZ,OAAOzzG,UAAU9c,SAAWqrH,EAAIiF,EAAIC,GAAM7tH,EAAGg0H,EAAeD,GAAUnhC,EAAa,CAAC+1B,EAAIiF,EAAIC,IAAM73F,GAAS,CAACg+F,EAAa,GAAIA,EAAa,IAAMA,EAAa,GAC/J,CACF,CAUA,OA3BAh+F,EAAM8C,OAAS,SAAS94B,GACtB,OAAOoa,UAAU9c,SAAW04C,EAAIzI,EAAIC,GAAMxtC,EAAG4L,EAAK84B,EAAUsR,GAAMA,GAAKrqC,EAAK+4B,EAAU6I,GAAMA,GAAK4Q,EAAKzZ,EAAU8I,GAAMA,GAAKs6F,EAAMl8H,IAAOD,EAAK,EAAI,IAAOA,EAAKC,GAAKw8H,EAAMz8H,IAAOwyC,EAAK,EAAI,IAAOA,EAAKxyC,GAAKkyC,EAAIlyC,EAAKC,GAAM,EAAI,EAAGoqB,GAAS,CAACggB,EAAIzI,EAAIC,EACnP,EAEAxX,EAAM82D,MAAQ,SAAS9sF,GACrB,OAAOoa,UAAU9c,QAAUwvF,IAAU9sF,EAAGg2B,GAAS82D,CACnD,EAEA92D,EAAMg+F,aAAe,SAASh0H,GAC5B,OAAOoa,UAAU9c,QAAU02H,EAAeh0H,EAAGg2B,GAASg+F,CACxD,EASAh+F,EAAMryB,MAAQA,EAAM,IAEpBqyB,EAAMkiG,WAAav0H,EAAM,IAEzBqyB,EAAM8hG,QAAU,SAAS93H,GACvB,OAAOoa,UAAU9c,QAAUw6H,EAAU93H,EAAGg2B,GAAS8hG,CACnD,EAEO,SAASh4H,GAEd,OADA4kC,EAAY5kC,EAAG8L,EAAK9L,EAAEk2C,GAAKrqC,EAAK7L,EAAEytC,GAAK4Q,EAAKr+C,EAAE0tC,GAAKs6F,EAAMl8H,IAAOD,EAAK,EAAI,IAAOA,EAAKC,GAAKw8H,EAAMz8H,IAAOwyC,EAAK,EAAI,IAAOA,EAAKxyC,GAAKkyC,EAAIlyC,EAAKC,GAAM,EAAI,EAC7IoqB,CACT,CACF,CAEe,SAASqyG,KACtB,IAAIryG,EAAQ6iG,GAAU,KAAc,KAMpC,OAJA7iG,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAOqyG,KACrB,EAEO1Q,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAASkuH,KACd,IAAItyG,EAAQqjG,GAAQ,MAAevgG,OAAO,CAAC,GAAK,EAAG,KAMnD,OAJA9C,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAOsyG,MAAgB3+G,KAAKqM,EAAMrM,OAChD,EAEOguG,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAASmuH,KACd,IAAIvyG,EAAQ8jG,GAAU,MAMtB,OAJA9jG,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAOuyG,MAAmB/tD,SAASxkD,EAAMwkD,WACvD,EAEOm9C,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAASouH,KACd,IAAIxyG,EAAQmkG,GAAO,MAMnB,OAJAnkG,EAAM2pD,KAAO,WACX,OAAO,GAAK3pD,EAAOwyG,MAAgBr5B,SAASn5E,EAAMm5E,WACpD,EAEOwoB,GAAiBv6G,MAAM4Y,EAAO5b,UACvC,CAEO,SAASquH,KACd,OAAOD,GAAaprH,MAAM,KAAMhD,WAAW+0F,SAAS,GACtD,CCvGe,YAASkG,GAEtB,IADA,IAAI50G,EAAI40G,EAAU/3G,OAAS,EAAI,EAAGiwF,EAAS,IAAIh3E,MAAM9V,GAAIjD,EAAI,EACtDA,EAAIiD,GAAG8sF,EAAO/vF,GAAK,IAAM63G,EAAUrhG,MAAU,EAAJxW,EAAa,IAAJA,GACzD,OAAO+vF,CACT,CNIA,GAAc,CACZszC,SAAU,SACVpyC,KAAM,aACN//D,KAAM,eACNuyG,QAAS,CAAC,KAAM,MAChBE,KAAM,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACzEE,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtDE,OAAQ,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACvHE,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,SOd7F,SAAel0C,GAAO,gECAtB,GAAeA,GAAO,oDCAtB,GAAeA,GAAO,oDCAtB,GAAeA,GAAO,gECAtB,GAAeA,GAAO,4ECAtB,GAAeA,GAAO,0DCAtB,GAAeA,GAAO,oDCAtB,GAAeA,GAAO,0DCAtB,GAAeA,GAAO,oDCAtB,GAAeA,GAAO,4ECAtB,GAAeA,GAAO,gECAtB,GAAem7C,GAAU,GAAoBA,EAAOA,EAAOprI,OAAS,ICC7D,IAAIorI,GAAS,IAAInyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAKD,ICZb,IAAI,GAAS,IAAInyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,yDACA,+DACA,sEACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICZb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICVb,IAAI,GAAS,IAAIpyH,MAAM,GAAGlZ,OAC/B,qBACA,2BACA,iCACA,uCACA,6CACA,mDACA,0DACAJ,IAAIswF,IAEN,SAAeo7C,GAAK,ICbL,YAAS7oI,GAEtB,OADAA,EAAI6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGpE,IACrB,OACD6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,OAAO,KAAOrI,GAAK,MAAQA,GAAK,QAAUA,GAAK,OAASA,GAAK,QAAc,QAAJA,SAAqB,KAC3H6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,MAAM,MAAQrI,GAAK,OAASA,GAAK,MAAQA,GAAK,OAASA,GAAK,OAAa,MAAJA,SAAmB,KACvH6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,MAAM,MAAQrI,GAAK,OAASA,GAAK,QAAUA,GAAK,QAAUA,GAAK,QAAc,QAAJA,SACxG,GACR,CCJA,SAAe,GAAyB,GAAU,IAAK,GAAK,GAAM,IAAW,IAAK,GAAK,ICAhF,IAAI8oI,GAAO,GAAyB,IAAW,IAAK,IAAM,KAAO,GAAU,GAAI,IAAM,KAEjFC,GAAO,GAAyB,GAAU,IAAK,IAAM,KAAO,GAAU,GAAI,IAAM,KAEvF,GAAI,KAEO,YAAS/oI,IAClBA,EAAI,GAAKA,EAAI,KAAGA,GAAK6G,KAAKC,MAAM9G,IACpC,IAAIgpI,EAAKniI,KAAKiE,IAAI9K,EAAI,IAItB,OAHA,GAAEmJ,EAAI,IAAMnJ,EAAI,IAChB,GAAE+9C,EAAI,IAAM,IAAMirF,EAClB,GAAElnI,EAAI,GAAM,GAAMknI,EACX,GAAI,EACb,CCdA,IAAI,GAAI,KACJC,GAASpiI,KAAK2qC,GAAK,EACnB03F,GAAmB,EAAVriI,KAAK2qC,GAAS,EAEZ,YAASxxC,GACtB,IAAImD,EAKJ,OAJAnD,GAAK,GAAMA,GAAK6G,KAAK2qC,GACrB,GAAEzvC,EAAI,KAAOoB,EAAI0D,KAAK8qC,IAAI3xC,IAAMmD,EAChC,GAAElD,EAAI,KAAOkD,EAAI0D,KAAK8qC,IAAI3xC,EAAIipI,KAAW9lI,EACzC,GAAEzB,EAAI,KAAOyB,EAAI0D,KAAK8qC,IAAI3xC,EAAIkpI,KAAW/lI,EAClC,GAAI,EACb,CCbe,YAASnD,GAEtB,OADAA,EAAI6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,EAAGpE,IACrB,OACD6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,MAAM,MAAQrI,GAAK,QAAUA,GAAK,SAAWA,GAAK,SAAWA,GAAK,SAAe,SAAJA,SAAsB,KAClI6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,MAAM,MAAQrI,GAAK,OAASA,GAAK,QAAUA,GAAK,QAAUA,GAAK,QAAc,OAAJA,SAAoB,KAC5H6G,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAI,IAAKyC,KAAKwB,MAAM,KAAOrI,GAAK,OAASA,GAAK,SAAWA,GAAK,MAAQA,GAAK,SAAe,QAAJA,SACvG,GACR,CCLA,SAAS,GAAK6D,GACZ,IAAIlD,EAAIkD,EAAMrG,OACd,OAAO,SAASwC,GACd,OAAO6D,EAAMgD,KAAKvC,IAAI,EAAGuC,KAAKzC,IAAIzD,EAAI,EAAGkG,KAAKC,MAAM9G,EAAIW,KAC1D,CACF,CAEA,SAAe,GAAK8sF,GAAO,qgDAEpB,IAAI07C,GAAQ,GAAK17C,GAAO,qgDAEpB27C,GAAU,GAAK37C,GAAO,qgDAEtB47C,GAAS,GAAK57C,GAAO,qgDCZjB,YAAS30C,GACtB,OAAO,GAAO+vC,GAAQ/vC,GAAMp5C,KAAK0oB,SAASqrD,iBAC5C,CCLA,IAAI61D,GAAS,EAEE,SAAS,KACtB,OAAO,IAAIC,EACb,CAEA,SAASA,KACPrsI,KAAKgD,EAAI,OAASopI,IAAQrsI,SAAS,GACrC,CCLe,YAASoR,EAAQnM,GAM9B,OALImM,EAAOyc,SACTzc,EAASugF,GAAYvgF,QACRrQ,IAATkE,IAAoBA,EAAOmM,EAAOwgF,eACtCxgF,EAASA,EAAOkqF,SAAW,CAAClqF,IAEvBoI,MAAM+vB,KAAKn4B,GAAQ6J,GAASohF,GAAQphF,EAAOhW,IACpD,CCPe,YAASwnD,GACtB,MAA2B,iBAAbA,EACR,IAAI+8B,GAAU,CAACr+D,SAAS+U,iBAAiBusB,IAAY,CAACthC,SAASqrD,kBAC/D,IAAIgT,GAAU,CAAC,GAAM/8B,IAAYrnD,GACzC,CCPe,YAASc,GACtB,OAAO,WACL,OAAOA,CACT,CACF,CHMAomI,GAAMxmI,UAAY,GAAMA,UAAY,CAClCoF,YAAaohI,GACbrjI,IAAK,SAAShE,GAEZ,IADA,IAAIrF,EAAKK,KAAKgD,IACLrD,KAAMqF,SAAaA,EAAOA,EAAKspB,YAAa,OACrD,OAAOtpB,EAAKrF,EACd,EACA+S,IAAK,SAAS1N,EAAMlB,GAClB,OAAOkB,EAAKhF,KAAKgD,GAAKc,CACxB,EACAiC,OAAQ,SAASf,GACf,OAAOhF,KAAKgD,KAAKgC,UAAeA,EAAKhF,KAAKgD,EAC5C,EACAjD,SAAU,WACR,OAAOC,KAAKgD,CACd,GIzBK,MAAM,GAAM2G,KAAKiE,IACX,GAAQjE,KAAK+lC,MACb,GAAM/lC,KAAK6qC,IACX,GAAM7qC,KAAKvC,IACX,GAAMuC,KAAKzC,IACX,GAAMyC,KAAK8qC,IACX,GAAO9qC,KAAKoG,KAEZ,GAAU,MACV,GAAKpG,KAAK2qC,GACV,GAAS,GAAK,EACd,GAAM,EAAI,GAMhB,SAAS,GAAKruC,GACnB,OAAOA,GAAK,EAAI,GAASA,IAAM,GAAK,GAAS0D,KAAKoqG,KAAK9tG,EACzD,CCjBO,SAASqmI,GAASC,GACvB,IAAIluC,EAAS,EAcb,OAZAkuC,EAAMluC,OAAS,SAASr7F,GACtB,IAAKoa,UAAU9c,OAAQ,OAAO+9F,EAC9B,GAAS,MAALr7F,EACFq7F,EAAS,SACJ,CACL,MAAM72F,EAAImC,KAAKC,MAAM5G,GACrB,KAAMwE,GAAK,GAAI,MAAM,IAAIsyE,WAAW,mBAAmB92E,KACvDq7F,EAAS72F,CACX,CACA,OAAO+kI,CACT,EAEO,IAAM,IAAInuC,GAAKC,EACxB,CCdA,SAASmuC,GAAehlI,GACtB,OAAOA,EAAEilI,WACX,CAEA,SAASC,GAAellI,GACtB,OAAOA,EAAEmlI,WACX,CAEA,SAASC,GAAcplI,GACrB,OAAOA,EAAEw2F,UACX,CAEA,SAAS6uC,GAAYrlI,GACnB,OAAOA,EAAEy2F,QACX,CAEA,SAAS6uC,GAAYtlI,GACnB,OAAOA,GAAKA,EAAE+1F,QAChB,CAaA,SAASwvC,GAAe/zF,EAAI3b,EAAIkT,EAAIz7B,EAAI87G,EAAIoc,EAAIptC,GAC9C,IAAIb,EAAM/lD,EAAKzI,EACXyuD,EAAM3hE,EAAKvoB,EACXskE,GAAMwmB,EAAKotC,GAAMA,GAAM,GAAKjuC,EAAMA,EAAMC,EAAMA,GAC9Cl5B,EAAKsT,EAAK4lB,EACVj5B,GAAMqT,EAAK2lB,EACXkuC,EAAMj0F,EAAK8sB,EACXonE,EAAM7vG,EAAK0oC,EACXonE,EAAM58F,EAAKu1B,EACXsnE,EAAMt4H,EAAKixD,EACXuhD,GAAO2lB,EAAME,GAAO,EACpB5lB,GAAO2lB,EAAME,GAAO,EACpBj5F,EAAKg5F,EAAMF,EACX74F,EAAKg5F,EAAMF,EACXz2H,EAAK09B,EAAKA,EAAKC,EAAKA,EACpBvvC,EAAI+rH,EAAKoc,EACTjgI,EAAIkgI,EAAMG,EAAMD,EAAMD,EACtB1lI,GAAK4sC,EAAK,GAAK,EAAI,GAAK,GAAK,GAAI,EAAGvvC,EAAIA,EAAI4R,EAAK1J,EAAIA,IACrDsgI,GAAOtgI,EAAIqnC,EAAKD,EAAK3sC,GAAKiP,EAC1BuwG,IAAQj6G,EAAIonC,EAAKC,EAAK5sC,GAAKiP,EAC3B62H,GAAOvgI,EAAIqnC,EAAKD,EAAK3sC,GAAKiP,EAC1BwwG,IAAQl6G,EAAIonC,EAAKC,EAAK5sC,GAAKiP,EAC3B82H,EAAMF,EAAM/lB,EACZkmB,EAAMxmB,EAAMO,EACZkmB,EAAMH,EAAMhmB,EACZomB,EAAMzmB,EAAMM,EAMhB,OAFIgmB,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,IAAKL,EAAMC,EAAKtmB,EAAMC,GAE7D,CACL35G,GAAI+/H,EACJ9/H,GAAIy5G,EACJjoB,KAAMj5B,EACNk5B,KAAMj5B,EACNknE,IAAKI,GAAOzc,EAAK/rH,EAAI,GACrBqoI,IAAKlmB,GAAO4J,EAAK/rH,EAAI,GAEzB,CAEe,cACb,IAAI4nI,EAAcD,GACdG,EAAcD,GACdiB,EAAe,GAAS,GACxBC,EAAY,KACZ5vC,EAAa4uC,GACb3uC,EAAW4uC,GACXtvC,EAAWuvC,GACXpgG,EAAU,KACV0F,EAAOk6F,GAAS7jE,GAEpB,SAASA,IACP,IAAIi4B,EACA77F,EF5EaoB,EE6Eb0lH,GAAM8gB,EAAYrsH,MAAMpgB,KAAMod,WAC9BwzG,GAAM+b,EAAYvsH,MAAMpgB,KAAMod,WAC9BsiF,EAAK1B,EAAW59E,MAAMpgB,KAAMod,WAAa,GACzCgrD,EAAK61B,EAAS79E,MAAMpgB,KAAMod,WAAa,GACvCyiF,EAAK,GAAIz3B,EAAKs3B,GACdE,EAAKx3B,EAAKs3B,EAQd,GANKhzD,IAASA,EAAUg0D,EAAStuD,KAG7Bw+E,EAAKjF,IAAI9mH,EAAI+rH,EAAIA,EAAKjF,EAAIA,EAAK9mH,GAG7B+rH,EAAK,GAGN,GAAI/wB,EAAK,GAAM,GAClBnzD,EAAQmpB,OAAO+6D,EAAK,GAAIlxB,GAAKkxB,EAAK,GAAIlxB,IACtChzD,EAAQ+7B,IAAI,EAAG,EAAGmoD,EAAIlxB,EAAIt3B,GAAKw3B,GAC3B+rB,EAAK,KACPj/E,EAAQmpB,OAAO81D,EAAK,GAAIvjD,GAAKujD,EAAK,GAAIvjD,IACtC17B,EAAQ+7B,IAAI,EAAG,EAAGkjD,EAAIvjD,EAAIs3B,EAAIE,QAK7B,CACH,IAWIhxF,EACAD,EAZAk/H,EAAMnuC,EACNouC,EAAM1lE,EACN0hD,EAAMpqB,EACNquC,EAAM3lE,EACN4lE,EAAMnuC,EACNouC,EAAMpuC,EACNc,EAAKpD,EAASn9E,MAAMpgB,KAAMod,WAAa,EACvC8wH,EAAMvtC,EAAK,KAAaitC,GAAaA,EAAUxtH,MAAMpgB,KAAMod,WAAa,GAAKuuG,EAAKA,EAAKiF,EAAKA,IAC5Foc,EAAK,GAAI,GAAIpc,EAAKjF,GAAM,GAAIgiB,EAAavtH,MAAMpgB,KAAMod,YACrD+wH,EAAMnB,EACNoB,EAAMpB,EAKV,GAAIkB,EAAK,GAAS,CAChB,IAAI9vE,EAAK,GAAK8vE,EAAKviB,EAAK,GAAIhrB,IACxBn4F,EAAK,GAAK0lI,EAAKtd,EAAK,GAAIjwB,KACvBqtC,GAAY,EAAL5vE,GAAU,IAA8B0rD,GAArB1rD,GAAOwhC,EAAK,GAAK,EAAemuC,GAAO3vE,IACjE4vE,EAAM,EAAGlkB,EAAMikB,GAAOruC,EAAKt3B,GAAM,IACjC6lE,GAAY,EAALzlI,GAAU,IAA8BqlI,GAArBrlI,GAAOo3F,EAAK,GAAK,EAAekuC,GAAOtlI,IACjEylI,EAAM,EAAGJ,EAAMC,GAAOpuC,EAAKt3B,GAAM,EACxC,CAEA,IAAI22B,EAAM6xB,EAAK,GAAIid,GACf7uC,EAAM4xB,EAAK,GAAIid,GACfV,EAAMxhB,EAAK,GAAIoiB,GACfX,EAAMzhB,EAAK,GAAIoiB,GAGnB,GAAIf,EAAK,GAAS,CAChB,IAIIqB,EAJApB,EAAMrc,EAAK,GAAIkd,GACfZ,EAAMtc,EAAK,GAAIkd,GACfxmB,EAAMqE,EAAK,GAAI7B,GACfvC,EAAMoE,EAAK,GAAI7B,GAMnB,GAAIjqB,EAAK,GACP,GAAIwuC,EAtId,SAAmBr1F,EAAI3b,EAAIkT,EAAIz7B,EAAI07B,EAAIz7B,EAAIynC,EAAIC,GAC7C,IAAI0wF,EAAM58F,EAAKyI,EAAIo0F,EAAMt4H,EAAKuoB,EAC1BixG,EAAM9xF,EAAKhM,EAAI+9F,EAAM9xF,EAAK1nC,EAC1BjS,EAAIyrI,EAAMpB,EAAMmB,EAAMlB,EAC1B,KAAItqI,EAAIA,EAAI,IAEZ,MAAO,CAACk2C,GADRl2C,GAAKwrI,GAAOjxG,EAAKtoB,GAAMw5H,GAAOv1F,EAAKxI,IAAO1tC,GACzBqqI,EAAK9vG,EAAKv6B,EAAIsqI,EACjC,CA+HmB7pB,CAAUxkB,EAAKC,EAAKsoB,EAAKC,EAAK0lB,EAAKC,EAAKC,EAAKC,GAAM,CAC1D,IAAIlgI,EAAK6xF,EAAMsvC,EAAG,GACdlhI,EAAK6xF,EAAMqvC,EAAG,GACdjhI,EAAK6/H,EAAMoB,EAAG,GACdhhI,EAAK6/H,EAAMmB,EAAG,GACdG,EAAK,EAAI,KFtJJvoI,GEsJciH,EAAKE,EAAKD,EAAKE,IAAO,GAAKH,EAAKA,EAAKC,EAAKA,GAAM,GAAKC,EAAKA,EAAKC,EAAKA,KFrJ1F,EAAI,EAAIpH,GAAK,EAAI,GAAK0D,KAAK2zC,KAAKr3C,IEqJkE,GAC/FwoI,EAAK,GAAKJ,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKA,EAAG,IACzCF,EAAM,GAAInB,GAAKrhB,EAAK8iB,IAAOD,EAAK,IAChCJ,EAAM,GAAIpB,GAAKpc,EAAK6d,IAAOD,EAAK,GAClC,MACEL,EAAMC,EAAM,CAGlB,CAGMH,EAAM,GAGHG,EAAM,IACbx/H,EAAKm+H,GAAezlB,EAAKC,EAAKxoB,EAAKC,EAAK4xB,EAAIwd,EAAKxuC,GACjDjxF,EAAKo+H,GAAeE,EAAKC,EAAKC,EAAKC,EAAKxc,EAAIwd,EAAKxuC,GAEjDlzD,EAAQmpB,OAAOjnD,EAAGtB,GAAKsB,EAAGmwF,IAAKnwF,EAAGrB,GAAKqB,EAAGowF,KAGtCovC,EAAMpB,EAAItgG,EAAQ+7B,IAAI75D,EAAGtB,GAAIsB,EAAGrB,GAAI6gI,EAAK,GAAMx/H,EAAGowF,IAAKpwF,EAAGmwF,KAAM,GAAMpwF,EAAGqwF,IAAKrwF,EAAGowF,MAAOa,IAI1FlzD,EAAQ+7B,IAAI75D,EAAGtB,GAAIsB,EAAGrB,GAAI6gI,EAAK,GAAMx/H,EAAGowF,IAAKpwF,EAAGmwF,KAAM,GAAMnwF,EAAGs+H,IAAKt+H,EAAGq+H,MAAOrtC,GAC9ElzD,EAAQ+7B,IAAI,EAAG,EAAGmoD,EAAI,GAAMhiH,EAAGrB,GAAKqB,EAAGs+H,IAAKt+H,EAAGtB,GAAKsB,EAAGq+H,KAAM,GAAMt+H,EAAGpB,GAAKoB,EAAGu+H,IAAKv+H,EAAGrB,GAAKqB,EAAGs+H,MAAOrtC,GACrGlzD,EAAQ+7B,IAAI95D,EAAGrB,GAAIqB,EAAGpB,GAAI6gI,EAAK,GAAMz/H,EAAGu+H,IAAKv+H,EAAGs+H,KAAM,GAAMt+H,EAAGqwF,IAAKrwF,EAAGowF,MAAOa,MAK7ElzD,EAAQmpB,OAAOkpC,EAAKC,GAAMtyD,EAAQ+7B,IAAI,EAAG,EAAGmoD,EAAIid,EAAKC,GAAMluC,IArB1ClzD,EAAQmpB,OAAOkpC,EAAKC,GAyBpC2sB,EAAK,IAAcqiB,EAAM,GAGtBG,EAAM,IACbv/H,EAAKm+H,GAAeI,EAAKC,EAAKH,EAAKC,EAAKvhB,GAAKwiB,EAAKvuC,GAClDjxF,EAAKo+H,GAAehuC,EAAKC,EAAKsoB,EAAKC,EAAKoE,GAAKwiB,EAAKvuC,GAElDlzD,EAAQopB,OAAOlnD,EAAGtB,GAAKsB,EAAGmwF,IAAKnwF,EAAGrB,GAAKqB,EAAGowF,KAGtCmvC,EAAMnB,EAAItgG,EAAQ+7B,IAAI75D,EAAGtB,GAAIsB,EAAGrB,GAAI4gI,EAAK,GAAMv/H,EAAGowF,IAAKpwF,EAAGmwF,KAAM,GAAMpwF,EAAGqwF,IAAKrwF,EAAGowF,MAAOa,IAI1FlzD,EAAQ+7B,IAAI75D,EAAGtB,GAAIsB,EAAGrB,GAAI4gI,EAAK,GAAMv/H,EAAGowF,IAAKpwF,EAAGmwF,KAAM,GAAMnwF,EAAGs+H,IAAKt+H,EAAGq+H,MAAOrtC,GAC9ElzD,EAAQ+7B,IAAI,EAAG,EAAGkjD,EAAI,GAAM/8G,EAAGrB,GAAKqB,EAAGs+H,IAAKt+H,EAAGtB,GAAKsB,EAAGq+H,KAAM,GAAMt+H,EAAGpB,GAAKoB,EAAGu+H,IAAKv+H,EAAGrB,GAAKqB,EAAGs+H,KAAMrtC,GACpGlzD,EAAQ+7B,IAAI95D,EAAGrB,GAAIqB,EAAGpB,GAAI4gI,EAAK,GAAMx/H,EAAGu+H,IAAKv+H,EAAGs+H,KAAM,GAAMt+H,EAAGqwF,IAAKrwF,EAAGowF,MAAOa,KAK7ElzD,EAAQ+7B,IAAI,EAAG,EAAGkjD,EAAIoiB,EAAKjkB,EAAKlqB,GArBIlzD,EAAQopB,OAAOq3E,EAAKC,EAsB/D,MAtHqB1gG,EAAQmpB,OAAO,EAAG,GA0HvC,GAFAnpB,EAAQqpB,YAEJ2qC,EAAQ,OAAOh0D,EAAU,KAAMg0D,EAAS,IAAM,IACpD,CAwCA,OAtCAj4B,EAAIpxC,SAAW,WACb,IAAIxyB,IAAM4nI,EAAYrsH,MAAMpgB,KAAMod,aAAcuvH,EAAYvsH,MAAMpgB,KAAMod,YAAc,EAClF7Y,IAAMy5F,EAAW59E,MAAMpgB,KAAMod,aAAc6gF,EAAS79E,MAAMpgB,KAAMod,YAAc,EAAI,GAAK,EAC3F,MAAO,CAAC,GAAI7Y,GAAKM,EAAG,GAAIN,GAAKM,EAC/B,EAEA4jE,EAAIgkE,YAAc,SAASzpI,GACzB,OAAOoa,UAAU9c,QAAUmsI,EAA2B,mBAANzpI,EAAmBA,EAAI,IAAUA,GAAIylE,GAAOgkE,CAC9F,EAEAhkE,EAAIkkE,YAAc,SAAS3pI,GACzB,OAAOoa,UAAU9c,QAAUqsI,EAA2B,mBAAN3pI,EAAmBA,EAAI,IAAUA,GAAIylE,GAAOkkE,CAC9F,EAEAlkE,EAAIklE,aAAe,SAAS3qI,GAC1B,OAAOoa,UAAU9c,QAAUqtI,EAA4B,mBAAN3qI,EAAmBA,EAAI,IAAUA,GAAIylE,GAAOklE,CAC/F,EAEAllE,EAAImlE,UAAY,SAAS5qI,GACvB,OAAOoa,UAAU9c,QAAUstI,EAAiB,MAAL5qI,EAAY,KAAoB,mBAANA,EAAmBA,EAAI,IAAUA,GAAIylE,GAAOmlE,CAC/G,EAEAnlE,EAAIu1B,WAAa,SAASh7F,GACxB,OAAOoa,UAAU9c,QAAU09F,EAA0B,mBAANh7F,EAAmBA,EAAI,IAAUA,GAAIylE,GAAOu1B,CAC7F,EAEAv1B,EAAIw1B,SAAW,SAASj7F,GACtB,OAAOoa,UAAU9c,QAAU29F,EAAwB,mBAANj7F,EAAmBA,EAAI,IAAUA,GAAIylE,GAAOw1B,CAC3F,EAEAx1B,EAAI80B,SAAW,SAASv6F,GACtB,OAAOoa,UAAU9c,QAAUi9F,EAAwB,mBAANv6F,EAAmBA,EAAI,IAAUA,GAAIylE,GAAO80B,CAC3F,EAEA90B,EAAI/7B,QAAU,SAAS1pC,GACrB,OAAOoa,UAAU9c,QAAWosC,EAAe,MAAL1pC,EAAY,KAAOA,EAAIylE,GAAO/7B,CACtE,EAEO+7B,CACT,CC3QO,IAAI,GAAQlvD,MAAM1T,UAAUmR,MAEpB,YAAS/Q,GACtB,MAAoB,iBAANA,GAAkB,WAAYA,EACxCA,EACAsT,MAAM+vB,KAAKrjC,EACjB,CCNA,SAASyoI,GAAOhiG,GACd1sC,KAAK6nH,SAAWn7E,CAClB,CA0Be,YAASA,GACtB,OAAO,IAAIgiG,GAAOhiG,EACpB,CC9BO,SAAS,GAAE3kC,GAChB,OAAOA,EAAE,EACX,CAEO,SAAS,GAAEA,GAChB,OAAOA,EAAE,EACX,CCAe,YAAS9B,EAAGpD,GACzB,IAAIw8E,EAAU,IAAS,GACnB3yC,EAAU,KACViiG,EAAQ,GACR71C,EAAS,KACT1mD,EAAOk6F,GAAS57F,GAKpB,SAASA,EAAKjvC,GACZ,IAAIjB,EAEAgH,EAEAk5F,EAHAj9F,GAAKhC,EAAO,GAAMA,IAAOnB,OAEzBsuI,GAAW,EAKf,IAFe,MAAXliG,IAAiBosD,EAAS61C,EAAMjuC,EAAStuD,MAExC5xC,EAAI,EAAGA,GAAKiD,IAAKjD,IACdA,EAAIiD,GAAK47E,EAAQ73E,EAAI/F,EAAKjB,GAAIA,EAAGiB,MAAWmtI,KAC5CA,GAAYA,GAAU91C,EAAOnoD,YAC5BmoD,EAAOloD,WAEVg+F,GAAU91C,EAAO5uF,OAAOjE,EAAEuB,EAAGhH,EAAGiB,IAAQoB,EAAE2E,EAAGhH,EAAGiB,IAGtD,GAAIi/F,EAAQ,OAAO5H,EAAS,KAAM4H,EAAS,IAAM,IACnD,CAsBA,OA3CAz6F,EAAiB,mBAANA,EAAmBA,OAAWnF,IAANmF,EAAmB,GAAS,GAASA,GACxEpD,EAAiB,mBAANA,EAAmBA,OAAW/B,IAAN+B,EAAmB,GAAS,GAASA,GAsBxE6tC,EAAKzqC,EAAI,SAASjD,GAChB,OAAOoa,UAAU9c,QAAU2F,EAAiB,mBAANjD,EAAmBA,EAAI,IAAUA,GAAI0tC,GAAQzqC,CACrF,EAEAyqC,EAAK7tC,EAAI,SAASG,GAChB,OAAOoa,UAAU9c,QAAUuC,EAAiB,mBAANG,EAAmBA,EAAI,IAAUA,GAAI0tC,GAAQ7tC,CACrF,EAEA6tC,EAAK2uC,QAAU,SAASr8E,GACtB,OAAOoa,UAAU9c,QAAU++E,EAAuB,mBAANr8E,EAAmBA,EAAI,KAAWA,GAAI0tC,GAAQ2uC,CAC5F,EAEA3uC,EAAKi+F,MAAQ,SAAS3rI,GACpB,OAAOoa,UAAU9c,QAAUquI,EAAQ3rI,EAAc,MAAX0pC,IAAoBosD,EAAS61C,EAAMjiG,IAAWgE,GAAQi+F,CAC9F,EAEAj+F,EAAKhE,QAAU,SAAS1pC,GACtB,OAAOoa,UAAU9c,QAAe,MAAL0C,EAAY0pC,EAAUosD,EAAS,KAAOA,EAAS61C,EAAMjiG,EAAU1pC,GAAI0tC,GAAQhE,CACxG,EAEOgE,CACT,CClDe,YAASsI,EAAI3b,EAAIvoB,GAC9B,IAAIy7B,EAAK,KACL8uC,EAAU,IAAS,GACnB3yC,EAAU,KACViiG,EAAQ,GACR71C,EAAS,KACT1mD,EAAOk6F,GAASpoC,GAMpB,SAASA,EAAKziG,GACZ,IAAIjB,EACAsJ,EACA9I,EAEAwG,EAEAk5F,EAHAj9F,GAAKhC,EAAO,GAAMA,IAAOnB,OAEzBsuI,GAAW,EAEXC,EAAM,IAAIt1H,MAAM9V,GAChBqrI,EAAM,IAAIv1H,MAAM9V,GAIpB,IAFe,MAAXipC,IAAiBosD,EAAS61C,EAAMjuC,EAAStuD,MAExC5xC,EAAI,EAAGA,GAAKiD,IAAKjD,EAAG,CACvB,KAAMA,EAAIiD,GAAK47E,EAAQ73E,EAAI/F,EAAKjB,GAAIA,EAAGiB,MAAWmtI,EAChD,GAAIA,GAAYA,EACd9kI,EAAItJ,EACJs4F,EAAOi2C,YACPj2C,EAAOnoD,gBACF,CAGL,IAFAmoD,EAAOloD,UACPkoD,EAAOnoD,YACF3vC,EAAIR,EAAI,EAAGQ,GAAK8I,IAAK9I,EACxB83F,EAAO5uF,MAAM2kI,EAAI7tI,GAAI8tI,EAAI9tI,IAE3B83F,EAAOloD,UACPkoD,EAAOk2C,SACT,CAEEJ,IACFC,EAAIruI,IAAMw4C,EAAGxxC,EAAGhH,EAAGiB,GAAOqtI,EAAItuI,IAAM68B,EAAG71B,EAAGhH,EAAGiB,GAC7Cq3F,EAAO5uF,MAAMqmC,GAAMA,EAAG/oC,EAAGhH,EAAGiB,GAAQotI,EAAIruI,GAAIsU,GAAMA,EAAGtN,EAAGhH,EAAGiB,GAAQqtI,EAAItuI,IAE3E,CAEA,GAAIkgG,EAAQ,OAAO5H,EAAS,KAAM4H,EAAS,IAAM,IACnD,CAEA,SAASuuC,IACP,OAAO,KAAO5vD,QAAQA,GAASsvD,MAAMA,GAAOjiG,QAAQA,EACtD,CAmDA,OA/FAsM,EAAmB,mBAAPA,EAAoBA,OAAal4C,IAAPk4C,EAAoB,GAAS,IAAUA,GAC7E3b,EAAmB,mBAAPA,EAAoBA,EAA0B,QAAbv8B,IAAPu8B,EAA6B,GAAeA,GAClFvoB,EAAmB,mBAAPA,EAAoBA,OAAahU,IAAPgU,EAAoB,GAAS,IAAUA,GA4C7EovF,EAAKj+F,EAAI,SAASjD,GAChB,OAAOoa,UAAU9c,QAAU04C,EAAkB,mBAANh2C,EAAmBA,EAAI,IAAUA,GAAIutC,EAAK,KAAM2zD,GAAQlrD,CACjG,EAEAkrD,EAAKlrD,GAAK,SAASh2C,GACjB,OAAOoa,UAAU9c,QAAU04C,EAAkB,mBAANh2C,EAAmBA,EAAI,IAAUA,GAAIkhG,GAAQlrD,CACtF,EAEAkrD,EAAK3zD,GAAK,SAASvtC,GACjB,OAAOoa,UAAU9c,QAAUiwC,EAAU,MAALvtC,EAAY,KAAoB,mBAANA,EAAmBA,EAAI,IAAUA,GAAIkhG,GAAQ3zD,CACzG,EAEA2zD,EAAKrhG,EAAI,SAASG,GAChB,OAAOoa,UAAU9c,QAAU+8B,EAAkB,mBAANr6B,EAAmBA,EAAI,IAAUA,GAAI8R,EAAK,KAAMovF,GAAQ7mE,CACjG,EAEA6mE,EAAK7mE,GAAK,SAASr6B,GACjB,OAAOoa,UAAU9c,QAAU+8B,EAAkB,mBAANr6B,EAAmBA,EAAI,IAAUA,GAAIkhG,GAAQ7mE,CACtF,EAEA6mE,EAAKpvF,GAAK,SAAS9R,GACjB,OAAOoa,UAAU9c,QAAUwU,EAAU,MAAL9R,EAAY,KAAoB,mBAANA,EAAmBA,EAAI,IAAUA,GAAIkhG,GAAQpvF,CACzG,EAEAovF,EAAKgrC,OACLhrC,EAAKirC,OAAS,WACZ,OAAOF,IAAWhpI,EAAE+yC,GAAIn2C,EAAEw6B,EAC5B,EAEA6mE,EAAKkrC,OAAS,WACZ,OAAOH,IAAWhpI,EAAE+yC,GAAIn2C,EAAEiS,EAC5B,EAEAovF,EAAKmrC,OAAS,WACZ,OAAOJ,IAAWhpI,EAAEsqC,GAAI1tC,EAAEw6B,EAC5B,EAEA6mE,EAAK7kB,QAAU,SAASr8E,GACtB,OAAOoa,UAAU9c,QAAU++E,EAAuB,mBAANr8E,EAAmBA,EAAI,KAAWA,GAAIkhG,GAAQ7kB,CAC5F,EAEA6kB,EAAKyqC,MAAQ,SAAS3rI,GACpB,OAAOoa,UAAU9c,QAAUquI,EAAQ3rI,EAAc,MAAX0pC,IAAoBosD,EAAS61C,EAAMjiG,IAAWw3D,GAAQyqC,CAC9F,EAEAzqC,EAAKx3D,QAAU,SAAS1pC,GACtB,OAAOoa,UAAU9c,QAAe,MAAL0C,EAAY0pC,EAAUosD,EAAS,KAAOA,EAAS61C,EAAMjiG,EAAU1pC,GAAIkhG,GAAQx3D,CACxG,EAEOw3D,CACT,CC/Ge,YAAS3/F,EAAGC,GACzB,OAAOA,EAAID,GAAK,EAAIC,EAAID,EAAI,EAAIC,GAAKD,EAAI,EAAI+pC,GAC/C,CCFe,YAAS9mC,GACtB,OAAOA,CACT,CCIe,cACb,IAAI1D,EAAQ,GACRwrI,EAAa,GACbnnI,EAAO,KACP61F,EAAa,GAAS,GACtBC,EAAW,GAAS,IACpBV,EAAW,GAAS,GAExB,SAASgyC,EAAI9tI,GACX,IAAIjB,EAEAsJ,EACA9I,EAMAonE,EAGA1kE,EAXAD,GAAKhC,EAAO,GAAMA,IAAOnB,OAGzBwL,EAAM,EACNvE,EAAQ,IAAIgS,MAAM9V,GAClB+rI,EAAO,IAAIj2H,MAAM9V,GACjBi8F,GAAM1B,EAAW59E,MAAMpgB,KAAMod,WAC7ByiF,EAAKl2F,KAAKzC,IAAI,GAAKyC,KAAKvC,KAAK,GAAK62F,EAAS79E,MAAMpgB,KAAMod,WAAasiF,IAEpE33F,EAAI4B,KAAKzC,IAAIyC,KAAKiE,IAAIiyF,GAAMp8F,EAAG85F,EAASn9E,MAAMpgB,KAAMod,YACpDqrC,EAAK1gD,GAAK83F,EAAK,GAAK,EAAI,GAG5B,IAAKr/F,EAAI,EAAGA,EAAIiD,IAAKjD,GACdkD,EAAI8rI,EAAKjoI,EAAM/G,GAAKA,IAAMsD,EAAMrC,EAAKjB,GAAIA,EAAGiB,IAAS,IACxDqK,GAAOpI,GASX,IAJkB,MAAd4rI,EAAoB/nI,EAAMY,MAAK,SAAS3H,EAAGsJ,GAAK,OAAOwlI,EAAWE,EAAKhvI,GAAIgvI,EAAK1lI,GAAK,IACxE,MAAR3B,GAAcZ,EAAMY,MAAK,SAAS3H,EAAGsJ,GAAK,OAAO3B,EAAK1G,EAAKjB,GAAIiB,EAAKqI,GAAK,IAG7EtJ,EAAI,EAAGQ,EAAI8K,GAAO+zF,EAAKp8F,EAAIglD,GAAM38C,EAAM,EAAGtL,EAAIiD,IAAKjD,EAAGk/F,EAAKt3B,EAC9Dt+D,EAAIvC,EAAM/G,GAAiB4nE,EAAKs3B,IAAlBh8F,EAAI8rI,EAAK1lI,IAAmB,EAAIpG,EAAI1C,EAAI,GAAKynD,EAAI+mF,EAAK1lI,GAAK,CACvErI,KAAMA,EAAKqI,GACXvC,MAAO/G,EACPsD,MAAOJ,EACPs6F,WAAY0B,EACZzB,SAAU71B,EACVm1B,SAAUx1F,GAId,OAAOynI,CACT,CA0BA,OAxBAD,EAAIzrI,MAAQ,SAASd,GACnB,OAAOoa,UAAU9c,QAAUwD,EAAqB,mBAANd,EAAmBA,EAAI,IAAUA,GAAIusI,GAAOzrI,CACxF,EAEAyrI,EAAID,WAAa,SAAStsI,GACxB,OAAOoa,UAAU9c,QAAUgvI,EAAatsI,EAAGmF,EAAO,KAAMonI,GAAOD,CACjE,EAEAC,EAAIpnI,KAAO,SAASnF,GAClB,OAAOoa,UAAU9c,QAAU6H,EAAOnF,EAAGssI,EAAa,KAAMC,GAAOpnI,CACjE,EAEAonI,EAAIvxC,WAAa,SAASh7F,GACxB,OAAOoa,UAAU9c,QAAU09F,EAA0B,mBAANh7F,EAAmBA,EAAI,IAAUA,GAAIusI,GAAOvxC,CAC7F,EAEAuxC,EAAItxC,SAAW,SAASj7F,GACtB,OAAOoa,UAAU9c,QAAU29F,EAAwB,mBAANj7F,EAAmBA,EAAI,IAAUA,GAAIusI,GAAOtxC,CAC3F,EAEAsxC,EAAIhyC,SAAW,SAASv6F,GACtB,OAAOoa,UAAU9c,QAAUi9F,EAAwB,mBAANv6F,EAAmBA,EAAI,IAAUA,GAAIusI,GAAOhyC,CAC3F,EAEOgyC,CACT,CN3EAb,GAAO7oI,UAAY,CACjBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,YACH5wC,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAAI,MAC/F,KAAK,EAAG7C,KAAKioH,OAAS,EACtB,QAASjoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAErC,GOvBK,IAAI4sI,GAAoBC,GAAY,IAE3C,SAASC,GAAOhB,GACd3uI,KAAK4vI,OAASjB,CAChB,CAoBe,SAASe,GAAYf,GAElC,SAASkB,EAAOnjG,GACd,OAAO,IAAIijG,GAAOhB,EAAMjiG,GAC1B,CAIA,OAFAmjG,EAAOD,OAASjB,EAETkB,CACT,CChCO,SAASC,GAAWlrI,GACzB,IAAIqJ,EAAIrJ,EAAE+pI,MASV,OAPA/pI,EAAEyvC,MAAQzvC,EAAEqB,SAAUrB,EAAEqB,EACxBrB,EAAEwiD,OAASxiD,EAAE/B,SAAU+B,EAAE/B,EAEzB+B,EAAE+pI,MAAQ,SAAS3rI,GACjB,OAAOoa,UAAU9c,OAAS2N,EAAEyhI,GAAY1sI,IAAMiL,IAAI2hI,MACpD,EAEOhrI,CACT,CAEe,cACb,OAAOkrI,GAAW,KAAOnB,MAAMc,IACjC,CCde,cACb,IAAIlrI,EAAI,KAAOoqI,MAAMc,IACjBxhI,EAAI1J,EAAEoqI,MACN31F,EAAKz0C,EAAE2qI,OACP3+F,EAAKhsC,EAAE8qI,OACPhyG,EAAK94B,EAAE4qI,OACPr6H,EAAKvQ,EAAE6qI,OAiBX,OAfA7qI,EAAE8vC,MAAQ9vC,EAAE0B,SAAU1B,EAAE0B,EACxB1B,EAAEy5F,WAAaz5F,EAAEy0C,UAAWz0C,EAAEy0C,GAC9Bz0C,EAAE05F,SAAW15F,EAAEgsC,UAAWhsC,EAAEgsC,GAC5BhsC,EAAE6iD,OAAS7iD,EAAE1B,SAAU0B,EAAE1B,EACzB0B,EAAEkoI,YAAcloI,EAAE84B,UAAW94B,EAAE84B,GAC/B94B,EAAEooI,YAAcpoI,EAAEuQ,UAAWvQ,EAAEuQ,GAC/BvQ,EAAEwrI,eAAiB,WAAa,OAAOD,GAAW92F,IAAO,SAAUz0C,EAAE2qI,OACrE3qI,EAAEyrI,aAAe,WAAa,OAAOF,GAAWv/F,IAAO,SAAUhsC,EAAE8qI,OACnE9qI,EAAE0rI,gBAAkB,WAAa,OAAOH,GAAWzyG,IAAO,SAAU94B,EAAE4qI,OACtE5qI,EAAE2rI,gBAAkB,WAAa,OAAOJ,GAAWh7H,IAAO,SAAUvQ,EAAE6qI,OAEtE7qI,EAAEoqI,MAAQ,SAAS3rI,GACjB,OAAOoa,UAAU9c,OAAS2N,EAAEyhI,GAAY1sI,IAAMiL,IAAI2hI,MACpD,EAEOrrI,CACT,CC5Be,YAAS0B,EAAGpD,GACzB,MAAO,EAAEA,GAAKA,GAAK8G,KAAK6qC,IAAIvuC,GAAK0D,KAAK2qC,GAAK,GAAIzxC,EAAI8G,KAAK8qC,IAAIxuC,GAC9D,CHMA0pI,GAAO9pI,UAAY,CACjBkpI,UAAW,WACT/uI,KAAK4vI,OAAOb,WACd,EACAC,QAAS,WACPhvI,KAAK4vI,OAAOZ,SACd,EACAr+F,UAAW,WACT3wC,KAAK4vI,OAAOj/F,WACd,EACAC,QAAS,WACP5wC,KAAK4vI,OAAOh/F,SACd,EACA1mC,MAAO,SAAS3F,EAAGM,GACjB7E,KAAK4vI,OAAO1lI,MAAMrF,EAAI8E,KAAK8qC,IAAIlwC,GAAIM,GAAK8E,KAAK6qC,IAAIjwC,GACnD,GIrBF,MAAM4rI,GACJ,WAAAllI,CAAYyhC,EAASzmC,GACnBjG,KAAK6nH,SAAWn7E,EAChB1sC,KAAK6pD,GAAK5jD,CACZ,CACA,SAAA8oI,GACE/uI,KAAKgoH,MAAQ,CACf,CACA,OAAAgnB,GACEhvI,KAAKgoH,MAAQ15E,GACf,CACA,SAAAqC,GACE3wC,KAAKioH,OAAS,CAChB,CACA,OAAAr3E,IACM5wC,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,CACA,KAAA99G,CAAMjE,EAAGpD,GAEP,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EACHjoH,KAAKioH,OAAS,EACVjoH,KAAKgoH,MAAOhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GACnC7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAC7B,MAEF,KAAK,EAAG7C,KAAKioH,OAAS,EACtB,QACMjoH,KAAK6pD,GAAI7pD,KAAK6nH,SAAS//C,cAAc9nE,KAAKs+F,KAAOt+F,KAAKs+F,IAAMr4F,GAAK,EAAGjG,KAAKu+F,IAAKv+F,KAAKs+F,IAAKz7F,EAAGoD,EAAGpD,GAC7F7C,KAAK6nH,SAAS//C,cAAc9nE,KAAKs+F,IAAKt+F,KAAKu+F,KAAOv+F,KAAKu+F,IAAM17F,GAAK,EAAGoD,EAAGjG,KAAKu+F,IAAKt4F,EAAGpD,GAI9F7C,KAAKs+F,IAAMr4F,EAAGjG,KAAKu+F,IAAM17F,CAC3B,EAGF,MAAMutI,GACJ,WAAAnlI,CAAYyhC,GACV1sC,KAAK6nH,SAAWn7E,CAClB,CACA,SAAAiE,GACE3wC,KAAKioH,OAAS,CAChB,CACA,OAAAr3E,GAAW,CACX,KAAA1mC,CAAMjE,EAAGpD,GAEP,GADAoD,GAAKA,EAAGpD,GAAKA,EACO,IAAhB7C,KAAKioH,OACPjoH,KAAKioH,OAAS,MACT,CACL,MAAM7pD,EAAKiyE,GAAYrwI,KAAKs+F,IAAKt+F,KAAKu+F,KAChC/1F,EAAK6nI,GAAYrwI,KAAKs+F,IAAKt+F,KAAKu+F,KAAOv+F,KAAKu+F,IAAM17F,GAAK,GACvD4F,EAAK4nI,GAAYpqI,EAAGjG,KAAKu+F,KACzBjiD,EAAK+zF,GAAYpqI,EAAGpD,GAC1B7C,KAAK6nH,SAAShyD,UAAUuI,GACxBp+D,KAAK6nH,SAAS//C,iBAAiBt/D,KAAOC,KAAO6zC,EAC/C,CACAt8C,KAAKs+F,IAAMr4F,EAAGjG,KAAKu+F,IAAM17F,CAC3B,EAGK,SAASytI,GAAM5jG,GACpB,OAAO,IAAIyjG,GAAKzjG,GAAS,EAC3B,CAEO,SAAS6jG,GAAM7jG,GACpB,OAAO,IAAIyjG,GAAKzjG,GAAS,EAC3B,CAEO,SAAS8jG,GAAW9jG,GACzB,OAAO,IAAI0jG,GAAW1jG,EACxB,CCpEA,SAAS+jG,GAAWjpI,GAClB,OAAOA,EAAEutB,MACX,CAEA,SAAS27G,GAAWlpI,GAClB,OAAOA,EAAEomB,MACX,CAEO,SAAS,GAAK+gH,GACnB,IAAI55G,EAAS07G,GACT7iH,EAAS8iH,GACTzqI,EAAI,GACJpD,EAAI,GACJ6pC,EAAU,KACVosD,EAAS,KACT1mD,EAAOk6F,GAASz7H,GAEpB,SAASA,IACP,IAAI6vF,EACJ,MAAME,EAAO,GAAMp+F,KAAK4a,WAClByjC,EAAI9rB,EAAO3U,MAAMpgB,KAAM4gG,GACvB99F,EAAI8qB,EAAOxN,MAAMpgB,KAAM4gG,GAM7B,GALe,MAAXl0D,IAAiBosD,EAAS61C,EAAMjuC,EAAStuD,MAC7C0mD,EAAOnoD,YACPiwD,EAAK,GAAK//C,EAAGi4C,EAAO5uF,OAAOjE,EAAEma,MAAMpgB,KAAM4gG,IAAQ/9F,EAAEud,MAAMpgB,KAAM4gG,IAC/DA,EAAK,GAAK99F,EAAGg2F,EAAO5uF,OAAOjE,EAAEma,MAAMpgB,KAAM4gG,IAAQ/9F,EAAEud,MAAMpgB,KAAM4gG,IAC/D9H,EAAOloD,UACH8vD,EAAQ,OAAO5H,EAAS,KAAM4H,EAAS,IAAM,IACnD,CAsBA,OApBA7vF,EAAKkkB,OAAS,SAAS/xB,GACrB,OAAOoa,UAAU9c,QAAUy0B,EAAS/xB,EAAG6N,GAAQkkB,CACjD,EAEAlkB,EAAK+c,OAAS,SAAS5qB,GACrB,OAAOoa,UAAU9c,QAAUstB,EAAS5qB,EAAG6N,GAAQ+c,CACjD,EAEA/c,EAAK5K,EAAI,SAASjD,GAChB,OAAOoa,UAAU9c,QAAU2F,EAAiB,mBAANjD,EAAmBA,EAAI,IAAUA,GAAI6N,GAAQ5K,CACrF,EAEA4K,EAAKhO,EAAI,SAASG,GAChB,OAAOoa,UAAU9c,QAAUuC,EAAiB,mBAANG,EAAmBA,EAAI,IAAUA,GAAI6N,GAAQhO,CACrF,EAEAgO,EAAK67B,QAAU,SAAS1pC,GACtB,OAAOoa,UAAU9c,QAAe,MAAL0C,EAAY0pC,EAAUosD,EAAS,KAAOA,EAAS61C,EAAMjiG,EAAU1pC,GAAI6N,GAAQ67B,CACxG,EAEO77B,CACT,CAEO,SAAS8/H,KACd,OAAO,GAAKL,GACd,CAEO,SAASM,KACd,OAAO,GAAKL,GACd,CAEO,SAASM,KACd,MAAMjsI,EAAI,GAAK4rI,IAGf,OAFA5rI,EAAEyvC,MAAQzvC,EAAEqB,SAAUrB,EAAEqB,EACxBrB,EAAEwiD,OAASxiD,EAAE/B,SAAU+B,EAAE/B,EAClB+B,CACT,CCtEA,MAAMksI,GAAQ,GAAK,GAEnB,IACE,IAAAC,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAwC,OAApC,GAAKqD,EAAO,GAAIA,EAAO,GAAI,MAC/BpF,EAAI+B,EAAI,EACRmI,EAAIlK,EAAIguI,GACdpkG,EAAQmpB,OAAO,EAAGhxD,GAClB6nC,EAAQopB,OAAO,GAAIjxD,GACnB6nC,EAAQmpB,QAAQ7oD,GAAIlK,GACpB4pC,EAAQopB,OAAO9oD,EAAGlK,GAClB4pC,EAAQmpB,QAAQ7oD,EAAGlK,GACnB4pC,EAAQopB,OAAO9oD,GAAIlK,EACrB,GCbF,IACE,IAAAiuI,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAI,GAAKqD,EAAO,IACtBwkC,EAAQmpB,OAAOhxD,EAAG,GAClB6nC,EAAQ+7B,IAAI,EAAG,EAAG5jE,EAAG,EAAG,GAC1B,GCLF,IACE,IAAAksI,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAI,GAAKqD,EAAO,GAAK,EAC3BwkC,EAAQmpB,QAAQ,EAAIhxD,GAAIA,GACxB6nC,EAAQopB,QAAQjxD,GAAIA,GACpB6nC,EAAQopB,QAAQjxD,GAAI,EAAIA,GACxB6nC,EAAQopB,OAAOjxD,GAAI,EAAIA,GACvB6nC,EAAQopB,OAAOjxD,GAAIA,GACnB6nC,EAAQopB,OAAO,EAAIjxD,GAAIA,GACvB6nC,EAAQopB,OAAO,EAAIjxD,EAAGA,GACtB6nC,EAAQopB,OAAOjxD,EAAGA,GAClB6nC,EAAQopB,OAAOjxD,EAAG,EAAIA,GACtB6nC,EAAQopB,QAAQjxD,EAAG,EAAIA,GACvB6nC,EAAQopB,QAAQjxD,EAAGA,GACnB6nC,EAAQopB,QAAQ,EAAIjxD,EAAGA,GACvB6nC,EAAQqpB,WACV,GChBIi7E,GAAQ,GAAK,EAAI,GACjBC,GAAkB,EAARD,GAEhB,IACE,IAAAD,CAAKrkG,EAASxkC,GACZ,MAAMrF,EAAI,GAAKqF,EAAO+oI,IAChBhrI,EAAIpD,EAAImuI,GACdtkG,EAAQmpB,OAAO,GAAIhzD,GACnB6pC,EAAQopB,OAAO7vD,EAAG,GAClBymC,EAAQopB,OAAO,EAAGjzD,GAClB6pC,EAAQopB,QAAQ7vD,EAAG,GACnBymC,EAAQqpB,WACV,GCZF,IACE,IAAAg7E,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAiB,OAAb,GAAKqD,GACfwkC,EAAQmpB,OAAO,GAAIhxD,GACnB6nC,EAAQopB,OAAOjxD,EAAG,GAClB6nC,EAAQopB,OAAO,EAAGjxD,GAClB6nC,EAAQopB,QAAQjxD,EAAG,GACnB6nC,EAAQqpB,WACV,GCRF,IACE,IAAAg7E,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAoC,OAAhC,GAAKqD,EAAO,GAAIA,EAAO,EAAG,IACpCwkC,EAAQmpB,QAAQhxD,EAAG,GACnB6nC,EAAQopB,OAAOjxD,EAAG,GAClB6nC,EAAQmpB,OAAO,EAAGhxD,GAClB6nC,EAAQopB,OAAO,GAAIjxD,EACrB,GCPF,IACE,IAAAksI,CAAKrkG,EAASxkC,GACZ,MAAM68C,EAAI,GAAK78C,GACTjC,GAAK8+C,EAAI,EACfrY,EAAQk+B,KAAK3kE,EAAGA,EAAG8+C,EAAGA,EACxB,GCLF,IACE,IAAAgsF,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAiB,MAAb,GAAKqD,GACfwkC,EAAQmpB,OAAOhxD,EAAGA,GAClB6nC,EAAQopB,OAAOjxD,GAAIA,GACnB6nC,EAAQopB,QAAQjxD,GAAIA,GACpB6nC,EAAQopB,QAAQjxD,EAAGA,GACnB6nC,EAAQqpB,WACV,GCPIm7E,GAAK,GAAI,GAAK,IAAM,GAAI,EAAI,GAAK,IACjCnjB,GAAK,GAAI,GAAM,IAAMmjB,GACrBljB,IAAM,GAAI,GAAM,IAAMkjB,GAE5B,IACE,IAAAH,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAI,GAPH,kBAOQqD,GACTjC,EAAI8nH,GAAKlpH,EACThC,EAAImrH,GAAKnpH,EACf6nC,EAAQmpB,OAAO,GAAIhxD,GACnB6nC,EAAQopB,OAAO7vD,EAAGpD,GAClB,IAAK,IAAIrC,EAAI,EAAGA,EAAI,IAAKA,EAAG,CAC1B,MAAM+D,EAAI,GAAM/D,EAAI,EACdyN,EAAI,GAAI1J,GACRs8C,EAAI,GAAIt8C,GACdmoC,EAAQopB,OAAOjV,EAAIh8C,GAAIoJ,EAAIpJ,GAC3B6nC,EAAQopB,OAAO7nD,EAAIhI,EAAI46C,EAAIh+C,EAAGg+C,EAAI56C,EAAIgI,EAAIpL,EAC5C,CACA6pC,EAAQqpB,WACV,GCpBI,GAAQ,GAAK,GAEnB,IACE,IAAAg7E,CAAKrkG,EAASxkC,GACZ,MAAMrF,GAAK,GAAKqF,GAAgB,EAAR,KACxBwkC,EAAQmpB,OAAO,EAAO,EAAJhzD,GAClB6pC,EAAQopB,QAAQ,GAAQjzD,GAAIA,GAC5B6pC,EAAQopB,OAAO,GAAQjzD,GAAIA,GAC3B6pC,EAAQqpB,WACV,GCTI,GAAQ,GAAK,GAEnB,IACE,IAAAg7E,CAAKrkG,EAASxkC,GACZ,MAAM24C,EAAiB,MAAb,GAAK34C,GACTpF,EAAI+9C,EAAK,EACT7zC,EAAK6zC,EAAI,GAAS,EACxBnU,EAAQmpB,OAAO,GAAIhV,GACnBnU,EAAQopB,OAAO9oD,EAAGlK,GAClB4pC,EAAQopB,QAAQ9oD,EAAGlK,GACnB4pC,EAAQqpB,WACV,GCXI,IAAK,GACLlV,GAAI,GAAK,GAAK,EACd7/C,GAAI,EAAI,GAAK,IACb,GAAkB,GAAbA,GAAI,EAAI,GAEnB,IACE,IAAA+vI,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAI,GAAKqD,EAAO,IAChB8wC,EAAKn0C,EAAI,EAAGw4B,EAAKx4B,EAAI7D,GACrBuvC,EAAKyI,EAAIlkC,EAAKjQ,EAAI7D,GAAI6D,EACtB2rC,GAAMD,EAAIx7B,EAAKD,EACrB43B,EAAQmpB,OAAO7c,EAAI3b,GACnBqP,EAAQopB,OAAOvlB,EAAIz7B,GACnB43B,EAAQopB,OAAOtlB,EAAIz7B,GACnB23B,EAAQopB,OAAO,GAAI9c,EAAK6H,GAAIxjB,EAAIwjB,GAAI7H,EAAK,GAAI3b,GAC7CqP,EAAQopB,OAAO,GAAIvlB,EAAKsQ,GAAI/rC,EAAI+rC,GAAItQ,EAAK,GAAIz7B,GAC7C43B,EAAQopB,OAAO,GAAItlB,EAAKqQ,GAAI9rC,EAAI8rC,GAAIrQ,EAAK,GAAIz7B,GAC7C23B,EAAQopB,OAAO,GAAI9c,EAAK6H,GAAIxjB,EAAI,GAAIA,EAAKwjB,GAAI7H,GAC7CtM,EAAQopB,OAAO,GAAIvlB,EAAKsQ,GAAI/rC,EAAI,GAAIA,EAAK+rC,GAAItQ,GAC7C7D,EAAQopB,OAAO,GAAItlB,EAAKqQ,GAAI9rC,EAAI,GAAIA,EAAK8rC,GAAIrQ,GAC7C9D,EAAQqpB,WACV,GCrBF,IACE,IAAAg7E,CAAKrkG,EAASxkC,GACZ,MAAMrD,EAAsC,MAAlC,GAAKqD,EAAO,GAAIA,EAAO,EAAG,MACpCwkC,EAAQmpB,QAAQhxD,GAAIA,GACpB6nC,EAAQopB,OAAOjxD,EAAGA,GAClB6nC,EAAQmpB,QAAQhxD,EAAGA,GACnB6nC,EAAQopB,OAAOjxD,GAAIA,EACrB,GCQWssI,GAAc,CACzB,GACA,GACAC,GACA,GACAC,GACAC,GACAC,IAIWC,GAAgB,CAC3B,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,IAGa,SAAS,GAAOn5H,EAAMzQ,GACnC,IAAIwkC,EAAU,KACV0F,EAAOk6F,GAAS/zB,GAKpB,SAASA,IACP,IAAI7X,EAGJ,GAFKh0D,IAASA,EAAUg0D,EAAStuD,KACjCz5B,EAAKyH,MAAMpgB,KAAMod,WAAW2zH,KAAKrkG,GAAUxkC,EAAKkY,MAAMpgB,KAAMod,YACxDsjF,EAAQ,OAAOh0D,EAAU,KAAMg0D,EAAS,IAAM,IACpD,CAcA,OAtBA/nF,EAAuB,mBAATA,EAAsBA,EAAO,GAASA,GAAQ,IAC5DzQ,EAAuB,mBAATA,EAAsBA,EAAO,QAAkBpH,IAAToH,EAAqB,IAAMA,GAS/EqwG,EAAO5/F,KAAO,SAAS3V,GACrB,OAAOoa,UAAU9c,QAAUqY,EAAoB,mBAAN3V,EAAmBA,EAAI,GAASA,GAAIu1G,GAAU5/F,CACzF,EAEA4/F,EAAOrwG,KAAO,SAASlF,GACrB,OAAOoa,UAAU9c,QAAU4H,EAAoB,mBAANlF,EAAmBA,EAAI,IAAUA,GAAIu1G,GAAUrwG,CAC1F,EAEAqwG,EAAO7rE,QAAU,SAAS1pC,GACxB,OAAOoa,UAAU9c,QAAUosC,EAAe,MAAL1pC,EAAY,KAAOA,EAAGu1G,GAAU7rE,CACvE,EAEO6rE,CACT,CCjEe,cAAY,CCApB,SAAS,GAAM50B,EAAM19E,EAAGpD,GAC7B8gF,EAAKkkC,SAAS//C,eACX,EAAI6b,EAAK2a,IAAM3a,EAAK6a,KAAO,GAC3B,EAAI7a,EAAK4a,IAAM5a,EAAK8a,KAAO,GAC3B9a,EAAK2a,IAAM,EAAI3a,EAAK6a,KAAO,GAC3B7a,EAAK4a,IAAM,EAAI5a,EAAK8a,KAAO,GAC3B9a,EAAK2a,IAAM,EAAI3a,EAAK6a,IAAMv4F,GAAK,GAC/B09E,EAAK4a,IAAM,EAAI5a,EAAK8a,IAAM57F,GAAK,EAEpC,CAEO,SAASkvI,GAAMrlG,GACpB1sC,KAAK6nH,SAAWn7E,CAClB,CAmCe,YAASA,GACtB,OAAO,IAAIqlG,GAAMrlG,EACnB,CC/CA,SAASslG,GAAYtlG,GACnB1sC,KAAK6nH,SAAWn7E,CAClB,CA4Ce,YAASA,GACtB,OAAO,IAAIslG,GAAYtlG,EACzB,CCjDA,SAASulG,GAAUvlG,GACjB1sC,KAAK6nH,SAAWn7E,CAClB,CAgCe,YAASA,GACtB,OAAO,IAAIulG,GAAUvlG,EACvB,CCpCA,SAASwlG,GAAOxlG,EAASgoF,GACvB10H,KAAKmyI,OAAS,IAAIJ,GAAMrlG,GACxB1sC,KAAKoyI,MAAQ1d,CACf,CHUAqd,GAAMlsI,UAAY,CAChBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAChBx+F,KAAKu+F,IAAMv+F,KAAKy+F,IAAMnwD,IACtBtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EAAG,GAAMjoH,KAAMA,KAAKw+F,IAAKx+F,KAAKy+F,KACnC,KAAK,EAAGz+F,KAAK6nH,SAAS/xD,OAAO91D,KAAKw+F,IAAKx+F,KAAKy+F,MAE1Cz+F,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAAI,MAC/F,KAAK,EAAG7C,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAK6nH,SAAS/xD,QAAQ,EAAI91D,KAAKs+F,IAAMt+F,KAAKw+F,KAAO,GAAI,EAAIx+F,KAAKu+F,IAAMv+F,KAAKy+F,KAAO,GACzG,QAAS,GAAMz+F,KAAMiG,EAAGpD,GAE1B7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMv4F,EAChCjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAM57F,CAClC,GCtCFmvI,GAAYnsI,UAAY,CACtBkpI,UAAW,GACXC,QAAS,GACTr+F,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAMryI,KAAKsyI,IAAMtyI,KAAKuyI,IACjDvyI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMxyI,KAAKyyI,IAAMzyI,KAAK0yI,IAAMpkG,IACvDtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EACHjoH,KAAK6nH,SAAShyD,OAAO71D,KAAKqyI,IAAKryI,KAAKwyI,KACpCxyI,KAAK6nH,SAAS9xD,YACd,MAEF,KAAK,EACH/1D,KAAK6nH,SAAShyD,QAAQ71D,KAAKqyI,IAAM,EAAIryI,KAAKsyI,KAAO,GAAItyI,KAAKwyI,IAAM,EAAIxyI,KAAKyyI,KAAO,GAChFzyI,KAAK6nH,SAAS/xD,QAAQ91D,KAAKsyI,IAAM,EAAItyI,KAAKqyI,KAAO,GAAIryI,KAAKyyI,IAAM,EAAIzyI,KAAKwyI,KAAO,GAChFxyI,KAAK6nH,SAAS9xD,YACd,MAEF,KAAK,EACH/1D,KAAKkK,MAAMlK,KAAKqyI,IAAKryI,KAAKwyI,KAC1BxyI,KAAKkK,MAAMlK,KAAKsyI,IAAKtyI,KAAKyyI,KAC1BzyI,KAAKkK,MAAMlK,KAAKuyI,IAAKvyI,KAAK0yI,KAIhC,EACAxoI,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKqyI,IAAMpsI,EAAGjG,KAAKwyI,IAAM3vI,EAAG,MACrD,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAKsyI,IAAMrsI,EAAGjG,KAAKyyI,IAAM5vI,EAAG,MACrD,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAKuyI,IAAMtsI,EAAGjG,KAAK0yI,IAAM7vI,EAAG7C,KAAK6nH,SAAShyD,QAAQ71D,KAAKs+F,IAAM,EAAIt+F,KAAKw+F,IAAMv4F,GAAK,GAAIjG,KAAKu+F,IAAM,EAAIv+F,KAAKy+F,IAAM57F,GAAK,GAAI,MACjJ,QAAS,GAAM7C,KAAMiG,EAAGpD,GAE1B7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMv4F,EAChCjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAM57F,CAClC,GCxCFovI,GAAUpsI,UAAY,CACpBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAChBx+F,KAAKu+F,IAAMv+F,KAAKy+F,IAAMnwD,IACtBtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,YACH5wC,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,IAAIjvE,GAAMh5C,KAAKs+F,IAAM,EAAIt+F,KAAKw+F,IAAMv4F,GAAK,EAAGo3B,GAAMr9B,KAAKu+F,IAAM,EAAIv+F,KAAKy+F,IAAM57F,GAAK,EAAG7C,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO9c,EAAI3b,GAAMr9B,KAAK6nH,SAAShyD,OAAO7c,EAAI3b,GAAK,MACvL,KAAK,EAAGr9B,KAAKioH,OAAS,EACtB,QAAS,GAAMjoH,KAAMiG,EAAGpD,GAE1B7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMv4F,EAChCjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAM57F,CAClC,GC1BFqvI,GAAOrsI,UAAY,CACjB8qC,UAAW,WACT3wC,KAAK6pD,GAAK,GACV7pD,KAAKkrD,GAAK,GACVlrD,KAAKmyI,OAAOxhG,WACd,EACAC,QAAS,WACP,IAAI3qC,EAAIjG,KAAK6pD,GACThnD,EAAI7C,KAAKkrD,GACTphD,EAAI7D,EAAE3F,OAAS,EAEnB,GAAIwJ,EAAI,EAQN,IAPA,IAKIhH,EALAk2C,EAAK/yC,EAAE,GACPo3B,EAAKx6B,EAAE,GACPsxC,EAAKluC,EAAE6D,GAAKkvC,EACZ5E,EAAKvxC,EAAEiH,GAAKuzB,EACZ78B,GAAK,IAGAA,GAAKsJ,GACZhH,EAAItC,EAAIsJ,EACR9J,KAAKmyI,OAAOjoI,MACVlK,KAAKoyI,MAAQnsI,EAAEzF,IAAM,EAAIR,KAAKoyI,QAAUp5F,EAAKl2C,EAAIqxC,GACjDn0C,KAAKoyI,MAAQvvI,EAAErC,IAAM,EAAIR,KAAKoyI,QAAU/0G,EAAKv6B,EAAIsxC,IAKvDp0C,KAAK6pD,GAAK7pD,KAAKkrD,GAAK,KACpBlrD,KAAKmyI,OAAOvhG,SACd,EACA1mC,MAAO,SAASjE,EAAGpD,GACjB7C,KAAK6pD,GAAGpqD,MAAMwG,GACdjG,KAAKkrD,GAAGzrD,MAAMoD,EAChB,GAGF,SAAe,SAAUqvG,EAAOwiB,GAE9B,SAASie,EAAOjmG,GACd,OAAgB,IAATgoF,EAAa,IAAIqd,GAAMrlG,GAAW,IAAIwlG,GAAOxlG,EAASgoF,EAC/D,CAMA,OAJAie,EAAOje,KAAO,SAASA,GACrB,OAAOxiB,GAAQwiB,EACjB,EAEOie,CACR,CAXD,CAWG,KCvDI,SAAS,GAAMhvD,EAAM19E,EAAGpD,GAC7B8gF,EAAKkkC,SAAS//C,cACZ6b,EAAK6a,IAAM7a,EAAK1iF,IAAM0iF,EAAK0uD,IAAM1uD,EAAK2a,KACtC3a,EAAK8a,IAAM9a,EAAK1iF,IAAM0iF,EAAK6uD,IAAM7uD,EAAK4a,KACtC5a,EAAK0uD,IAAM1uD,EAAK1iF,IAAM0iF,EAAK6a,IAAMv4F,GACjC09E,EAAK6uD,IAAM7uD,EAAK1iF,IAAM0iF,EAAK8a,IAAM57F,GACjC8gF,EAAK0uD,IACL1uD,EAAK6uD,IAET,CAEO,SAASI,GAASlmG,EAASmmG,GAChC7yI,KAAK6nH,SAAWn7E,EAChB1sC,KAAKiB,IAAM,EAAI4xI,GAAW,CAC5B,CAEAD,GAAS/sI,UAAY,CACnBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAC3BryI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMlkG,IACjCtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EAAGjoH,KAAK6nH,SAAS/xD,OAAO91D,KAAKqyI,IAAKryI,KAAKwyI,KAAM,MAClD,KAAK,EAAG,GAAMxyI,KAAMA,KAAKw+F,IAAKx+F,KAAKy+F,MAEjCz+F,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAAI,MAC/F,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAKw+F,IAAMv4F,EAAGjG,KAAKy+F,IAAM57F,EAAG,MACrD,KAAK,EAAG7C,KAAKioH,OAAS,EACtB,QAAS,GAAMjoH,KAAMiG,EAAGpD,GAE1B7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAKryI,KAAKqyI,IAAMpsI,EACrDjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAKxyI,KAAKwyI,IAAM3vI,CACvD,GAGF,SAAe,SAAUqvG,EAAO2gC,GAE9B,SAASC,EAASpmG,GAChB,OAAO,IAAIkmG,GAASlmG,EAASmmG,EAC/B,CAMA,OAJAC,EAASD,QAAU,SAASA,GAC1B,OAAO3gC,GAAQ2gC,EACjB,EAEOC,CACR,CAXD,CAWG,GCzDI,SAASC,GAAermG,EAASmmG,GACtC7yI,KAAK6nH,SAAWn7E,EAChB1sC,KAAKiB,IAAM,EAAI4xI,GAAW,CAC5B,CAEAE,GAAeltI,UAAY,CACzBkpI,UAAW,GACXC,QAAS,GACTr+F,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAMryI,KAAKsyI,IAAMtyI,KAAKuyI,IAAMvyI,KAAKgzI,IAC5DhzI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMxyI,KAAKyyI,IAAMzyI,KAAK0yI,IAAM1yI,KAAKizI,IAAM3kG,IAClEtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EACHjoH,KAAK6nH,SAAShyD,OAAO71D,KAAKsyI,IAAKtyI,KAAKyyI,KACpCzyI,KAAK6nH,SAAS9xD,YACd,MAEF,KAAK,EACH/1D,KAAK6nH,SAAS/xD,OAAO91D,KAAKsyI,IAAKtyI,KAAKyyI,KACpCzyI,KAAK6nH,SAAS9xD,YACd,MAEF,KAAK,EACH/1D,KAAKkK,MAAMlK,KAAKsyI,IAAKtyI,KAAKyyI,KAC1BzyI,KAAKkK,MAAMlK,KAAKuyI,IAAKvyI,KAAK0yI,KAC1B1yI,KAAKkK,MAAMlK,KAAKgzI,IAAKhzI,KAAKizI,KAIhC,EACA/oI,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKsyI,IAAMrsI,EAAGjG,KAAKyyI,IAAM5vI,EAAG,MACrD,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAK6nH,SAAShyD,OAAO71D,KAAKuyI,IAAMtsI,EAAGjG,KAAK0yI,IAAM7vI,GAAI,MAC3E,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAKgzI,IAAM/sI,EAAGjG,KAAKizI,IAAMpwI,EAAG,MACrD,QAAS,GAAM7C,KAAMiG,EAAGpD,GAE1B7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAKryI,KAAKqyI,IAAMpsI,EACrDjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAKxyI,KAAKwyI,IAAM3vI,CACvD,GAGF,SAAe,SAAUqvG,EAAO2gC,GAE9B,SAASC,EAASpmG,GAChB,OAAO,IAAIqmG,GAAermG,EAASmmG,EACrC,CAMA,OAJAC,EAASD,QAAU,SAASA,GAC1B,OAAO3gC,GAAQ2gC,EACjB,EAEOC,CACR,CAXD,CAWG,GC1DI,SAASI,GAAaxmG,EAASmmG,GACpC7yI,KAAK6nH,SAAWn7E,EAChB1sC,KAAKiB,IAAM,EAAI4xI,GAAW,CAC5B,CAEAK,GAAartI,UAAY,CACvBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAC3BryI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMlkG,IACjCtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,YACH5wC,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO91D,KAAKqyI,IAAKryI,KAAKwyI,KAAOxyI,KAAK6nH,SAAShyD,OAAO71D,KAAKqyI,IAAKryI,KAAKwyI,KAAM,MAC3H,KAAK,EAAGxyI,KAAKioH,OAAS,EACtB,QAAS,GAAMjoH,KAAMiG,EAAGpD,GAE1B7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAKryI,KAAKqyI,IAAMpsI,EACrDjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAKxyI,KAAKwyI,IAAM3vI,CACvD,GAGF,SAAe,SAAUqvG,EAAO2gC,GAE9B,SAASC,EAASpmG,GAChB,OAAO,IAAIwmG,GAAaxmG,EAASmmG,EACnC,CAMA,OAJAC,EAASD,QAAU,SAASA,GAC1B,OAAO3gC,GAAQ2gC,EACjB,EAEOC,CACR,CAXD,CAWG,GC7CI,SAAS,GAAMnvD,EAAM19E,EAAGpD,GAC7B,IAAI0tC,EAAKozC,EAAK6a,IACV1pF,EAAK6uE,EAAK8a,IACVjuD,EAAKmzC,EAAK0uD,IACVt9H,EAAK4uE,EAAK6uD,IAEd,GAAI7uD,EAAKwvD,OAAS,GAAS,CACzB,IAAI5uI,EAAI,EAAIo/E,EAAKyvD,QAAU,EAAIzvD,EAAKwvD,OAASxvD,EAAK0vD,OAAS1vD,EAAK2vD,QAC5D7vI,EAAI,EAAIkgF,EAAKwvD,QAAUxvD,EAAKwvD,OAASxvD,EAAK0vD,QAC9C9iG,GAAMA,EAAKhsC,EAAIo/E,EAAK2a,IAAM3a,EAAK2vD,QAAU3vD,EAAK0uD,IAAM1uD,EAAKyvD,SAAW3vI,EACpEqR,GAAMA,EAAKvQ,EAAIo/E,EAAK4a,IAAM5a,EAAK2vD,QAAU3vD,EAAK6uD,IAAM7uD,EAAKyvD,SAAW3vI,CACtE,CAEA,GAAIkgF,EAAK4vD,OAAS,GAAS,CACzB,IAAI/uI,EAAI,EAAIm/E,EAAK6vD,QAAU,EAAI7vD,EAAK4vD,OAAS5vD,EAAK0vD,OAAS1vD,EAAK2vD,QAC5DxxF,EAAI,EAAI6hC,EAAK4vD,QAAU5vD,EAAK4vD,OAAS5vD,EAAK0vD,QAC9C7iG,GAAMA,EAAKhsC,EAAIm/E,EAAK6a,IAAM7a,EAAK6vD,QAAUvtI,EAAI09E,EAAK2vD,SAAWxxF,EAC7D/sC,GAAMA,EAAKvQ,EAAIm/E,EAAK8a,IAAM9a,EAAK6vD,QAAU3wI,EAAI8gF,EAAK2vD,SAAWxxF,CAC/D,CAEA6hC,EAAKkkC,SAAS//C,cAAcv3B,EAAIz7B,EAAI07B,EAAIz7B,EAAI4uE,EAAK0uD,IAAK1uD,EAAK6uD,IAC7D,CAEA,SAASiB,GAAW/mG,EAAS/rB,GAC3B3gB,KAAK6nH,SAAWn7E,EAChB1sC,KAAK0zI,OAAS/yH,CAChB,CAEA8yH,GAAW5tI,UAAY,CACrBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAC3BryI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMlkG,IACjCtuC,KAAKmzI,OAASnzI,KAAKqzI,OAASrzI,KAAKuzI,OACjCvzI,KAAKozI,QAAUpzI,KAAKszI,QAAUtzI,KAAKwzI,QACnCxzI,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EAAGjoH,KAAK6nH,SAAS/xD,OAAO91D,KAAKqyI,IAAKryI,KAAKwyI,KAAM,MAClD,KAAK,EAAGxyI,KAAKkK,MAAMlK,KAAKqyI,IAAKryI,KAAKwyI,MAEhCxyI,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAGjB,GAFAoD,GAAKA,EAAGpD,GAAKA,EAET7C,KAAKioH,OAAQ,CACf,IAAI0rB,EAAM3zI,KAAKqyI,IAAMpsI,EACjB2tI,EAAM5zI,KAAKwyI,IAAM3vI,EACrB7C,KAAKuzI,OAAS5pI,KAAKoG,KAAK/P,KAAKwzI,QAAU7pI,KAAKkB,IAAI8oI,EAAMA,EAAMC,EAAMA,EAAK5zI,KAAK0zI,QAC9E,CAEA,OAAQ1zI,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAAI,MAC/F,KAAK,EAAG7C,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EACtB,QAAS,GAAMjoH,KAAMiG,EAAGpD,GAG1B7C,KAAKmzI,OAASnzI,KAAKqzI,OAAQrzI,KAAKqzI,OAASrzI,KAAKuzI,OAC9CvzI,KAAKozI,QAAUpzI,KAAKszI,QAAStzI,KAAKszI,QAAUtzI,KAAKwzI,QACjDxzI,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAKryI,KAAKqyI,IAAMpsI,EACrDjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAKxyI,KAAKwyI,IAAM3vI,CACvD,GAGF,SAAe,SAAUqvG,EAAOvxF,GAE9B,SAASkzH,EAAWnnG,GAClB,OAAO/rB,EAAQ,IAAI8yH,GAAW/mG,EAAS/rB,GAAS,IAAIiyH,GAASlmG,EAAS,EACxE,CAMA,OAJAmnG,EAAWlzH,MAAQ,SAASA,GAC1B,OAAOuxF,GAAQvxF,EACjB,EAEOkzH,CACR,CAXD,CAWG,ICnFH,SAASC,GAAiBpnG,EAAS/rB,GACjC3gB,KAAK6nH,SAAWn7E,EAChB1sC,KAAK0zI,OAAS/yH,CAChB,CAEAmzH,GAAiBjuI,UAAY,CAC3BkpI,UAAW,GACXC,QAAS,GACTr+F,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAMryI,KAAKsyI,IAAMtyI,KAAKuyI,IAAMvyI,KAAKgzI,IAC5DhzI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMxyI,KAAKyyI,IAAMzyI,KAAK0yI,IAAM1yI,KAAKizI,IAAM3kG,IAClEtuC,KAAKmzI,OAASnzI,KAAKqzI,OAASrzI,KAAKuzI,OACjCvzI,KAAKozI,QAAUpzI,KAAKszI,QAAUtzI,KAAKwzI,QACnCxzI,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EACHjoH,KAAK6nH,SAAShyD,OAAO71D,KAAKsyI,IAAKtyI,KAAKyyI,KACpCzyI,KAAK6nH,SAAS9xD,YACd,MAEF,KAAK,EACH/1D,KAAK6nH,SAAS/xD,OAAO91D,KAAKsyI,IAAKtyI,KAAKyyI,KACpCzyI,KAAK6nH,SAAS9xD,YACd,MAEF,KAAK,EACH/1D,KAAKkK,MAAMlK,KAAKsyI,IAAKtyI,KAAKyyI,KAC1BzyI,KAAKkK,MAAMlK,KAAKuyI,IAAKvyI,KAAK0yI,KAC1B1yI,KAAKkK,MAAMlK,KAAKgzI,IAAKhzI,KAAKizI,KAIhC,EACA/oI,MAAO,SAASjE,EAAGpD,GAGjB,GAFAoD,GAAKA,EAAGpD,GAAKA,EAET7C,KAAKioH,OAAQ,CACf,IAAI0rB,EAAM3zI,KAAKqyI,IAAMpsI,EACjB2tI,EAAM5zI,KAAKwyI,IAAM3vI,EACrB7C,KAAKuzI,OAAS5pI,KAAKoG,KAAK/P,KAAKwzI,QAAU7pI,KAAKkB,IAAI8oI,EAAMA,EAAMC,EAAMA,EAAK5zI,KAAK0zI,QAC9E,CAEA,OAAQ1zI,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKsyI,IAAMrsI,EAAGjG,KAAKyyI,IAAM5vI,EAAG,MACrD,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAK6nH,SAAShyD,OAAO71D,KAAKuyI,IAAMtsI,EAAGjG,KAAK0yI,IAAM7vI,GAAI,MAC3E,KAAK,EAAG7C,KAAKioH,OAAS,EAAGjoH,KAAKgzI,IAAM/sI,EAAGjG,KAAKizI,IAAMpwI,EAAG,MACrD,QAAS,GAAM7C,KAAMiG,EAAGpD,GAG1B7C,KAAKmzI,OAASnzI,KAAKqzI,OAAQrzI,KAAKqzI,OAASrzI,KAAKuzI,OAC9CvzI,KAAKozI,QAAUpzI,KAAKszI,QAAStzI,KAAKszI,QAAUtzI,KAAKwzI,QACjDxzI,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAKryI,KAAKqyI,IAAMpsI,EACrDjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAKxyI,KAAKwyI,IAAM3vI,CACvD,GAGF,SAAe,SAAUqvG,EAAOvxF,GAE9B,SAASkzH,EAAWnnG,GAClB,OAAO/rB,EAAQ,IAAImzH,GAAiBpnG,EAAS/rB,GAAS,IAAIoyH,GAAermG,EAAS,EACpF,CAMA,OAJAmnG,EAAWlzH,MAAQ,SAASA,GAC1B,OAAOuxF,GAAQvxF,EACjB,EAEOkzH,CACR,CAXD,CAWG,ICtEH,SAASE,GAAernG,EAAS/rB,GAC/B3gB,KAAK6nH,SAAWn7E,EAChB1sC,KAAK0zI,OAAS/yH,CAChB,CAEAozH,GAAeluI,UAAY,CACzBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAAMx+F,KAAKqyI,IAC3BryI,KAAKu+F,IAAMv+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAMlkG,IACjCtuC,KAAKmzI,OAASnzI,KAAKqzI,OAASrzI,KAAKuzI,OACjCvzI,KAAKozI,QAAUpzI,KAAKszI,QAAUtzI,KAAKwzI,QACnCxzI,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,YACH5wC,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GAGjB,GAFAoD,GAAKA,EAAGpD,GAAKA,EAET7C,KAAKioH,OAAQ,CACf,IAAI0rB,EAAM3zI,KAAKqyI,IAAMpsI,EACjB2tI,EAAM5zI,KAAKwyI,IAAM3vI,EACrB7C,KAAKuzI,OAAS5pI,KAAKoG,KAAK/P,KAAKwzI,QAAU7pI,KAAKkB,IAAI8oI,EAAMA,EAAMC,EAAMA,EAAK5zI,KAAK0zI,QAC9E,CAEA,OAAQ1zI,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO91D,KAAKqyI,IAAKryI,KAAKwyI,KAAOxyI,KAAK6nH,SAAShyD,OAAO71D,KAAKqyI,IAAKryI,KAAKwyI,KAAM,MAC3H,KAAK,EAAGxyI,KAAKioH,OAAS,EACtB,QAAS,GAAMjoH,KAAMiG,EAAGpD,GAG1B7C,KAAKmzI,OAASnzI,KAAKqzI,OAAQrzI,KAAKqzI,OAASrzI,KAAKuzI,OAC9CvzI,KAAKozI,QAAUpzI,KAAKszI,QAAStzI,KAAKszI,QAAUtzI,KAAKwzI,QACjDxzI,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMx+F,KAAKqyI,IAAKryI,KAAKqyI,IAAMpsI,EACrDjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAMz+F,KAAKwyI,IAAKxyI,KAAKwyI,IAAM3vI,CACvD,GAGF,SAAe,SAAUqvG,EAAOvxF,GAE9B,SAASkzH,EAAWnnG,GAClB,OAAO/rB,EAAQ,IAAIozH,GAAernG,EAAS/rB,GAAS,IAAIuyH,GAAaxmG,EAAS,EAChF,CAMA,OAJAmnG,EAAWlzH,MAAQ,SAASA,GAC1B,OAAOuxF,GAAQvxF,EACjB,EAEOkzH,CACR,CAXD,CAWG,IC3DH,SAASG,GAAatnG,GACpB1sC,KAAK6nH,SAAWn7E,CAClB,CAkBe,YAASA,GACtB,OAAO,IAAIsnG,GAAatnG,EAC1B,CCxBA,SAAS,GAAKzmC,GACZ,OAAOA,EAAI,GAAK,EAAI,CACtB,CAMA,SAASguI,GAAOtwD,EAAMnzC,EAAIz7B,GACxB,IAAI+0F,EAAKnmB,EAAK6a,IAAM7a,EAAK2a,IACrByL,EAAKv5D,EAAKmzC,EAAK6a,IACf9vF,GAAMi1E,EAAK8a,IAAM9a,EAAK4a,MAAQuL,GAAMC,EAAK,IAAM,GAC/Ct7F,GAAMsG,EAAK4uE,EAAK8a,MAAQsL,GAAMD,EAAK,IAAM,GACzC/hG,GAAK2G,EAAKq7F,EAAKt7F,EAAKq7F,IAAOA,EAAKC,GACpC,OAAQ,GAAKr7F,GAAM,GAAKD,IAAO9E,KAAKzC,IAAIyC,KAAKiE,IAAIc,GAAK/E,KAAKiE,IAAIa,GAAK,GAAM9E,KAAKiE,IAAI7F,KAAO,CAC5F,CAGA,SAASmsI,GAAOvwD,EAAM7gF,GACpB,IAAImJ,EAAI03E,EAAK6a,IAAM7a,EAAK2a,IACxB,OAAOryF,GAAK,GAAK03E,EAAK8a,IAAM9a,EAAK4a,KAAOtyF,EAAInJ,GAAK,EAAIA,CACvD,CAKA,SAAS,GAAM6gF,EAAM/0E,EAAID,GACvB,IAAIqqC,EAAK2qC,EAAK2a,IACVjhE,EAAKsmD,EAAK4a,IACVhuD,EAAKozC,EAAK6a,IACV1pF,EAAK6uE,EAAK8a,IACVtqD,GAAM5D,EAAKyI,GAAM,EACrB2qC,EAAKkkC,SAAS//C,cAAc9uB,EAAK7E,EAAI9W,EAAK8W,EAAKvlC,EAAI2hC,EAAK4D,EAAIr/B,EAAKq/B,EAAKxlC,EAAI4hC,EAAIz7B,EAChF,CAEA,SAASq/H,GAAUznG,GACjB1sC,KAAK6nH,SAAWn7E,CAClB,CAyCA,SAAS0nG,GAAU1nG,GACjB1sC,KAAK6nH,SAAW,IAAIwsB,GAAe3nG,EACrC,CAMA,SAAS2nG,GAAe3nG,GACtB1sC,KAAK6nH,SAAWn7E,CAClB,CASO,SAAS4nG,GAAU5nG,GACxB,OAAO,IAAIynG,GAAUznG,EACvB,CAEO,SAAS6nG,GAAU7nG,GACxB,OAAO,IAAI0nG,GAAU1nG,EACvB,CCvGA,SAAS8nG,GAAQ9nG,GACf1sC,KAAK6nH,SAAWn7E,CAClB,CA0CA,SAAS+nG,GAAcxuI,GACrB,IAAIzF,EAEAshD,EADAr+C,EAAIwC,EAAE3F,OAAS,EAEfiE,EAAI,IAAIgV,MAAM9V,GACde,EAAI,IAAI+U,MAAM9V,GACdoB,EAAI,IAAI0U,MAAM9V,GAElB,IADAc,EAAE,GAAK,EAAGC,EAAE,GAAK,EAAGK,EAAE,GAAKoB,EAAE,GAAK,EAAIA,EAAE,GACnCzF,EAAI,EAAGA,EAAIiD,EAAI,IAAKjD,EAAG+D,EAAE/D,GAAK,EAAGgE,EAAEhE,GAAK,EAAGqE,EAAErE,GAAK,EAAIyF,EAAEzF,GAAK,EAAIyF,EAAEzF,EAAI,GAE5E,IADA+D,EAAEd,EAAI,GAAK,EAAGe,EAAEf,EAAI,GAAK,EAAGoB,EAAEpB,EAAI,GAAK,EAAIwC,EAAExC,EAAI,GAAKwC,EAAExC,GACnDjD,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGshD,EAAIv9C,EAAE/D,GAAKgE,EAAEhE,EAAI,GAAIgE,EAAEhE,IAAMshD,EAAGj9C,EAAErE,IAAMshD,EAAIj9C,EAAErE,EAAI,GAE1E,IADA+D,EAAEd,EAAI,GAAKoB,EAAEpB,EAAI,GAAKe,EAAEf,EAAI,GACvBjD,EAAIiD,EAAI,EAAGjD,GAAK,IAAKA,EAAG+D,EAAE/D,IAAMqE,EAAErE,GAAK+D,EAAE/D,EAAI,IAAMgE,EAAEhE,GAE1D,IADAgE,EAAEf,EAAI,IAAMwC,EAAExC,GAAKc,EAAEd,EAAI,IAAM,EAC1BjD,EAAI,EAAGA,EAAIiD,EAAI,IAAKjD,EAAGgE,EAAEhE,GAAK,EAAIyF,EAAEzF,EAAI,GAAK+D,EAAE/D,EAAI,GACxD,MAAO,CAAC+D,EAAGC,EACb,CAEe,YAASkoC,GACtB,OAAO,IAAI8nG,GAAQ9nG,EACrB,CChEA,SAASgoG,GAAKhoG,EAAS5pC,GACrB9C,KAAK6nH,SAAWn7E,EAChB1sC,KAAK20I,GAAK7xI,CACZ,CAuCe,YAAS4pC,GACtB,OAAO,IAAIgoG,GAAKhoG,EAAS,GAC3B,CAEO,SAASkoG,GAAWloG,GACzB,OAAO,IAAIgoG,GAAKhoG,EAAS,EAC3B,CAEO,SAASmoG,GAAUnoG,GACxB,OAAO,IAAIgoG,GAAKhoG,EAAS,EAC3B,CCpDe,YAASooG,EAAQjyD,GAC9B,IAAOp/E,EAAIqxI,EAAOx0I,QAAU,EAC5B,IAAK,IAAWwJ,EAAG4E,EAA2BjL,EAArCjD,EAAI,EAAUiO,EAAKqmI,EAAOjyD,EAAM,IAAQ/gC,EAAIrzC,EAAGnO,OAAQE,EAAIiD,IAAKjD,EAEvE,IADAkO,EAAKD,EAAIA,EAAKqmI,EAAOjyD,EAAMriF,IACtBsJ,EAAI,EAAGA,EAAIg4C,IAAKh4C,EACnB2E,EAAG3E,GAAG,IAAM2E,EAAG3E,GAAG,GAAK4gB,MAAMhc,EAAG5E,GAAG,IAAM4E,EAAG5E,GAAG,GAAK4E,EAAG5E,GAAG,EAGhE,CCRe,YAASgrI,GAEtB,IADA,IAAIrxI,EAAIqxI,EAAOx0I,OAAQkhD,EAAI,IAAIjoC,MAAM9V,KAC5BA,GAAK,GAAG+9C,EAAE/9C,GAAKA,EACxB,OAAO+9C,CACT,CCCA,SAASuzF,GAAWvtI,EAAGrD,GACrB,OAAOqD,EAAErD,EACX,CAEA,SAAS6wI,GAAY7wI,GACnB,MAAM2wI,EAAS,GAEf,OADAA,EAAO3wI,IAAMA,EACN2wI,CACT,CAEe,cACb,IAAI/tI,EAAO,GAAS,IAChB87E,EAAQ,GACRpxC,EAAS,GACT3tC,EAAQixI,GAEZ,SAAS73G,EAAMz7B,GACb,IACIjB,EACAy0I,EAFAC,EAAK37H,MAAM+vB,KAAKviC,EAAKqZ,MAAMpgB,KAAMod,WAAY43H,IAC1CvxI,EAAIyxI,EAAG50I,OAAQwJ,GAAK,EAG3B,IAAK,MAAMtC,KAAK/F,EACd,IAAKjB,EAAI,IAAKsJ,EAAGtJ,EAAIiD,IAAKjD,GACvB00I,EAAG10I,GAAGsJ,GAAK,CAAC,GAAIhG,EAAM0D,EAAG0tI,EAAG10I,GAAG2D,IAAK2F,EAAGrI,KAAQA,KAAO+F,EAI3D,IAAKhH,EAAI,EAAGy0I,EAAK,GAAMpyD,EAAMqyD,IAAM10I,EAAIiD,IAAKjD,EAC1C00I,EAAGD,EAAGz0I,IAAI+G,MAAQ/G,EAIpB,OADAixC,EAAOyjG,EAAID,GACJC,CACT,CAkBA,OAhBAh4G,EAAMn2B,KAAO,SAAS/D,GACpB,OAAOoa,UAAU9c,QAAUyG,EAAoB,mBAAN/D,EAAmBA,EAAI,GAASuW,MAAM+vB,KAAKtmC,IAAKk6B,GAASn2B,CACpG,EAEAm2B,EAAMp5B,MAAQ,SAASd,GACrB,OAAOoa,UAAU9c,QAAUwD,EAAqB,mBAANd,EAAmBA,EAAI,IAAUA,GAAIk6B,GAASp5B,CAC1F,EAEAo5B,EAAM2lD,MAAQ,SAAS7/E,GACrB,OAAOoa,UAAU9c,QAAUuiF,EAAa,MAAL7/E,EAAY,GAAyB,mBAANA,EAAmBA,EAAI,GAASuW,MAAM+vB,KAAKtmC,IAAKk6B,GAAS2lD,CAC7H,EAEA3lD,EAAMuU,OAAS,SAASzuC,GACtB,OAAOoa,UAAU9c,QAAUmxC,EAAc,MAALzuC,EAAY,GAAaA,EAAGk6B,GAASuU,CAC3E,EAEOvU,CACT,CCvDe,YAAS43G,EAAQjyD,GAC9B,IAAOp/E,EAAIqxI,EAAOx0I,QAAU,EAA5B,CACA,IAAK,IAAIE,EAAGiD,EAAgCZ,EAA7BiH,EAAI,EAAGg4C,EAAIgzF,EAAO,GAAGx0I,OAAWwJ,EAAIg4C,IAAKh4C,EAAG,CACzD,IAAKjH,EAAIrC,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGqC,GAAKiyI,EAAOt0I,GAAGsJ,GAAG,IAAM,EACpD,GAAIjH,EAAG,IAAKrC,EAAI,EAAGA,EAAIiD,IAAKjD,EAAGs0I,EAAOt0I,GAAGsJ,GAAG,IAAMjH,CACpD,CACA,GAAKiyI,EAAQjyD,EALyB,CAMxC,CCTe,YAASiyD,EAAQjyD,GAC9B,IAAOp/E,EAAIqxI,EAAOx0I,QAAU,EAC5B,IAAK,IAAIE,EAAUgH,EAAG4sC,EAAIuW,EAAIwqF,EAAI1xI,EAAtBqG,EAAI,EAAqBg4C,EAAIgzF,EAAOjyD,EAAM,IAAIviF,OAAQwJ,EAAIg4C,IAAKh4C,EACzE,IAAK6gD,EAAKwqF,EAAK,EAAG30I,EAAI,EAAGA,EAAIiD,IAAKjD,GAC3B4zC,GAAM5sC,EAAIstI,EAAOjyD,EAAMriF,IAAIsJ,IAAI,GAAKtC,EAAE,IAAM,GAC/CA,EAAE,GAAKmjD,EAAInjD,EAAE,GAAKmjD,GAAMvW,GACfA,EAAK,GACd5sC,EAAE,GAAK2tI,EAAI3tI,EAAE,GAAK2tI,GAAM/gG,IAExB5sC,EAAE,GAAK,EAAGA,EAAE,GAAK4sC,EAIzB,CCXe,YAAS0gG,EAAQjyD,GAC9B,IAAOp/E,EAAIqxI,EAAOx0I,QAAU,EAA5B,CACA,IAAK,IAAkCmD,EAA9BqG,EAAI,EAAG4E,EAAKomI,EAAOjyD,EAAM,IAAQ/gC,EAAIpzC,EAAGpO,OAAQwJ,EAAIg4C,IAAKh4C,EAAG,CACnE,IAAK,IAAItJ,EAAI,EAAGqC,EAAI,EAAGrC,EAAIiD,IAAKjD,EAAGqC,GAAKiyI,EAAOt0I,GAAGsJ,GAAG,IAAM,EAC3D4E,EAAG5E,GAAG,IAAM4E,EAAG5E,GAAG,IAAMjH,EAAI,CAC9B,CACA,GAAKiyI,EAAQjyD,EALyB,CAMxC,CCPe,YAASiyD,EAAQjyD,GAC9B,IAAOp/E,EAAIqxI,EAAOx0I,QAAU,IAASwhD,GAAKpzC,EAAKomI,EAAOjyD,EAAM,KAAKviF,QAAU,EAA3E,CACA,IAAK,IAAkBoO,EAAIozC,EAAGr+C,EAArBZ,EAAI,EAAGiH,EAAI,EAAaA,EAAIg4C,IAAKh4C,EAAG,CAC3C,IAAK,IAAItJ,EAAI,EAAGiO,EAAK,EAAG2mI,EAAK,EAAG50I,EAAIiD,IAAKjD,EAAG,CAK1C,IAJA,IAAI60I,EAAKP,EAAOjyD,EAAMriF,IAClB80I,EAAOD,EAAGvrI,GAAG,IAAM,EAEnByrI,GAAMD,GADCD,EAAGvrI,EAAI,GAAG,IAAM,IACF,EAChB9I,EAAI,EAAGA,EAAIR,IAAKQ,EAAG,CAC1B,IAAIwwH,EAAKsjB,EAAOjyD,EAAM7hF,IAGtBu0I,IAFW/jB,EAAG1nH,GAAG,IAAM,IACZ0nH,EAAG1nH,EAAI,GAAG,IAAM,EAE7B,CACA2E,GAAM6mI,EAAMF,GAAMG,EAAKD,CACzB,CACA5mI,EAAG5E,EAAI,GAAG,IAAM4E,EAAG5E,EAAI,GAAG,GAAKjH,EAC3B4L,IAAI5L,GAAKuyI,EAAK3mI,EACpB,CACAC,EAAG5E,EAAI,GAAG,IAAM4E,EAAG5E,EAAI,GAAG,GAAKjH,EAC/B,GAAKiyI,EAAQjyD,EAnBwE,CAoBvF,CCrBe,YAASiyD,GACtB,IAAIU,EAAQV,EAAO70I,IAAIs7B,IACvB,OAAO,GAAKu5G,GAAQ3sI,MAAK,SAAS5D,EAAGC,GAAK,OAAOgxI,EAAMjxI,GAAKixI,EAAMhxI,EAAI,GACxE,CAEA,SAAS+2B,GAAKu5G,GAEZ,IADA,IAAsCW,EAAlCj1I,GAAK,EAAGsJ,EAAI,EAAGrG,EAAIqxI,EAAOx0I,OAAYo1I,GAAK,MACtCl1I,EAAIiD,IAAQgyI,GAAMX,EAAOt0I,GAAG,IAAMk1I,IAAIA,EAAKD,EAAI3rI,EAAItJ,GAC5D,OAAOsJ,CACT,CCTe,YAASgrI,GACtB,IAAIxf,EAAOwf,EAAO70I,IAAI,IACtB,OAAO,GAAK60I,GAAQ3sI,MAAK,SAAS5D,EAAGC,GAAK,OAAO8wH,EAAK/wH,GAAK+wH,EAAK9wH,EAAI,GACtE,CAEO,SAAS,GAAIswI,GAElB,IADA,IAAsCpxI,EAAlCm9C,EAAI,EAAGrgD,GAAK,EAAGiD,EAAIqxI,EAAOx0I,SACrBE,EAAIiD,IAAOC,GAAKoxI,EAAOt0I,GAAG,MAAIqgD,GAAKn9C,GAC5C,OAAOm9C,CACT,CCTe,YAASi0F,GACtB,OAAO,GAAUA,GAAQp5H,SAC3B,CCDe,YAASo5H,GACtB,IACIt0I,EACAsJ,EAFArG,EAAIqxI,EAAOx0I,OAGXg1H,EAAOwf,EAAO70I,IAAI,IAClB4iF,EAAQ8yD,GAAWb,GACnB3iD,EAAM,EACNrQ,EAAS,EACT8zD,EAAO,GACPC,EAAU,GAEd,IAAKr1I,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBsJ,EAAI+4E,EAAMriF,GACN2xF,EAAMrQ,GACRqQ,GAAOmjC,EAAKxrH,GACZ8rI,EAAKn2I,KAAKqK,KAEVg4E,GAAUwzC,EAAKxrH,GACf+rI,EAAQp2I,KAAKqK,IAIjB,OAAO+rI,EAAQn6H,UAAUrb,OAAOu1I,EAClC,CCxBe,YAASd,GACtB,OAAO,GAAKA,GAAQp5H,SACtB,CfEAs4H,GAAanuI,UAAY,CACvBkpI,UAAW,GACXC,QAAS,GACTr+F,UAAW,WACT3wC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACH5wC,KAAKioH,QAAQjoH,KAAK6nH,SAAS9xD,WACjC,EACA7rD,MAAO,SAASjE,EAAGpD,GACjBoD,GAAKA,EAAGpD,GAAKA,EACT7C,KAAKioH,OAAQjoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,IACpC7C,KAAKioH,OAAS,EAAGjoH,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAChD,GCoBFsxI,GAAUtuI,UAAY,CACpBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAKs+F,IAAMt+F,KAAKw+F,IAChBx+F,KAAKu+F,IAAMv+F,KAAKy+F,IAChBz+F,KAAK81I,IAAMxnG,IACXtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACP,OAAQ5wC,KAAKioH,QACX,KAAK,EAAGjoH,KAAK6nH,SAAS/xD,OAAO91D,KAAKw+F,IAAKx+F,KAAKy+F,KAAM,MAClD,KAAK,EAAG,GAAMz+F,KAAMA,KAAK81I,IAAK5B,GAAOl0I,KAAMA,KAAK81I,OAE9C91I,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACzE/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,KACxB,EACA99G,MAAO,SAASjE,EAAGpD,GACjB,IAAI8L,EAAK2/B,IAGT,GADQzrC,GAAKA,GAAboD,GAAKA,KACKjG,KAAKw+F,KAAO37F,IAAM7C,KAAKy+F,IAAjC,CACA,OAAQz+F,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAAI,MAC/F,KAAK,EAAG7C,KAAKioH,OAAS,EAAG,MACzB,KAAK,EAAGjoH,KAAKioH,OAAS,EAAG,GAAMjoH,KAAMk0I,GAAOl0I,KAAM2O,EAAKslI,GAAOj0I,KAAMiG,EAAGpD,IAAK8L,GAAK,MACjF,QAAS,GAAM3O,KAAMA,KAAK81I,IAAKnnI,EAAKslI,GAAOj0I,KAAMiG,EAAGpD,IAGtD7C,KAAKs+F,IAAMt+F,KAAKw+F,IAAKx+F,KAAKw+F,IAAMv4F,EAChCjG,KAAKu+F,IAAMv+F,KAAKy+F,IAAKz+F,KAAKy+F,IAAM57F,EAChC7C,KAAK81I,IAAMnnI,CAViC,CAW9C,IAODylI,GAAUvuI,UAAYiD,OAAOy4C,OAAO4yF,GAAUtuI,YAAYqE,MAAQ,SAASjE,EAAGpD,GAC7EsxI,GAAUtuI,UAAUqE,MAAM1H,KAAKxC,KAAM6C,EAAGoD,EAC1C,EAMAouI,GAAexuI,UAAY,CACzBgwD,OAAQ,SAAS5vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAOhzD,EAAGoD,EAAI,EACrD8vD,UAAW,WAAa/1D,KAAK6nH,SAAS9xD,WAAa,EACnDD,OAAQ,SAAS7vD,EAAGpD,GAAK7C,KAAK6nH,SAAS/xD,OAAOjzD,EAAGoD,EAAI,EACrD6hE,cAAe,SAASv3B,EAAIz7B,EAAI07B,EAAIz7B,EAAI9O,EAAGpD,GAAK7C,KAAK6nH,SAAS//C,cAAchzD,EAAIy7B,EAAIx7B,EAAIy7B,EAAI3tC,EAAGoD,EAAI,GC1FrGuuI,GAAQ3uI,UAAY,CAClBkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAK6pD,GAAK,GACV7pD,KAAKkrD,GAAK,EACZ,EACAta,QAAS,WACP,IAAI3qC,EAAIjG,KAAK6pD,GACThnD,EAAI7C,KAAKkrD,GACTznD,EAAIwC,EAAE3F,OAEV,GAAImD,EAEF,GADAzD,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAE,GAAIpD,EAAE,IAAM7C,KAAK6nH,SAAShyD,OAAO5vD,EAAE,GAAIpD,EAAE,IACnE,IAANY,EACFzD,KAAK6nH,SAAS/xD,OAAO7vD,EAAE,GAAIpD,EAAE,SAI7B,IAFA,IAAIotC,EAAKwkG,GAAcxuI,GACnBiqC,EAAKukG,GAAc5xI,GACd28E,EAAK,EAAGh/B,EAAK,EAAGA,EAAK/8C,IAAK+7E,IAAMh/B,EACvCxgD,KAAK6nH,SAAS//C,cAAc73B,EAAG,GAAGuvC,GAAKtvC,EAAG,GAAGsvC,GAAKvvC,EAAG,GAAGuvC,GAAKtvC,EAAG,GAAGsvC,GAAKv5E,EAAEu6C,GAAK39C,EAAE29C,KAKnFxgD,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAAqB,IAANvkH,IAAUzD,KAAK6nH,SAAS9xD,YAC/D/1D,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,MACtBhoH,KAAK6pD,GAAK7pD,KAAKkrD,GAAK,IACtB,EACAhhD,MAAO,SAASjE,EAAGpD,GACjB7C,KAAK6pD,GAAGpqD,MAAMwG,GACdjG,KAAKkrD,GAAGzrD,MAAMoD,EAChB,GCnCF6xI,GAAK7uI,UAAY,CACfkpI,UAAW,WACT/uI,KAAKgoH,MAAQ,CACf,EACAgnB,QAAS,WACPhvI,KAAKgoH,MAAQ15E,GACf,EACAqC,UAAW,WACT3wC,KAAK6pD,GAAK7pD,KAAKkrD,GAAK5c,IACpBtuC,KAAKioH,OAAS,CAChB,EACAr3E,QAAS,WACH,EAAI5wC,KAAK20I,IAAM30I,KAAK20I,GAAK,GAAqB,IAAhB30I,KAAKioH,QAAcjoH,KAAK6nH,SAAS/xD,OAAO91D,KAAK6pD,GAAI7pD,KAAKkrD,KACpFlrD,KAAKgoH,OAAyB,IAAfhoH,KAAKgoH,OAA+B,IAAhBhoH,KAAKioH,SAAejoH,KAAK6nH,SAAS9xD,YACrE/1D,KAAKgoH,OAAS,IAAGhoH,KAAK20I,GAAK,EAAI30I,KAAK20I,GAAI30I,KAAKgoH,MAAQ,EAAIhoH,KAAKgoH,MACpE,EACA99G,MAAO,SAASjE,EAAGpD,GAEjB,OADAoD,GAAKA,EAAGpD,GAAKA,EACL7C,KAAKioH,QACX,KAAK,EAAGjoH,KAAKioH,OAAS,EAAGjoH,KAAKgoH,MAAQhoH,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,GAAK7C,KAAK6nH,SAAShyD,OAAO5vD,EAAGpD,GAAI,MAC/F,KAAK,EAAG7C,KAAKioH,OAAS,EACtB,QACE,GAAIjoH,KAAK20I,IAAM,EACb30I,KAAK6nH,SAAS/xD,OAAO91D,KAAK6pD,GAAIhnD,GAC9B7C,KAAK6nH,SAAS/xD,OAAO7vD,EAAGpD,OACnB,CACL,IAAI0tC,EAAKvwC,KAAK6pD,IAAM,EAAI7pD,KAAK20I,IAAM1uI,EAAIjG,KAAK20I,GAC5C30I,KAAK6nH,SAAS/xD,OAAOvlB,EAAIvwC,KAAKkrD,IAC9BlrD,KAAK6nH,SAAS/xD,OAAOvlB,EAAI1tC,EAC3B,EAIJ7C,KAAK6pD,GAAK5jD,EAAGjG,KAAKkrD,GAAKroD,CACzB,GarCK,IAAIkzI,GAAe,wBAMtBC,GAAY1zI,KAAKuD,UAAUyxC,YAJ/B,SAAyBm6C,GACvB,OAAOA,EAAKn6C,aACd,EAIMmyF,GAAUsM,IAEhB,YCJA,IAAIE,IAAY,IAAI3zI,KAAK,4BALzB,SAAwBskF,GACtB,IAAI6K,EAAO,IAAInvF,KAAKskF,GACpB,OAAOl8D,MAAM+mE,GAAQ,KAAOA,CAC9B,EAIMi4C,GAASqM,IAEf,YCVe,YAASl2H,EAAU6S,EAAOhB,GACvC,IAAI5uB,EAAI,IAAIgwF,GAAOvzD,EAAQ7M,EAC3B,OAAa,MAATA,GAAsB5vB,EAAEowF,QAAQrzE,EAAU6S,EAAOhB,GAAO5uB,IAC5DA,EAAEozI,SAAWpzI,EAAEowF,QACfpwF,EAAEowF,QAAU,SAASrzE,EAAU6S,EAAOhB,GACpCgB,GAASA,EAAOhB,EAAe,MAARA,EAAexvB,MAASwvB,EAC/C5uB,EAAEozI,UAAS,SAASj/E,EAAK1kC,GACvBA,GAAWgN,EACXz8B,EAAEozI,SAASj/E,EAAM13B,GAAS7M,EAAOhB,GACjC7R,EAAS0S,EACX,GAAGG,EAAOhB,EACZ,EACA5uB,EAAEowF,QAAQrzE,EAAU6S,EAAOhB,GACpB5uB,EACT,CChBA,SAAemD,GAAK,IAAMA,ECAX,SAASkwI,GAAUx9H,GAAM,YACtC+4E,EAAW,OACX9jE,EAAM,UACN8Z,EAAS,SACT67C,IAEAz6E,OAAO+yE,iBAAiB77E,KAAM,CAC5B2Y,KAAM,CAAC7U,MAAO6U,EAAM1P,YAAY,EAAMC,cAAc,GACpDwoF,YAAa,CAAC5tF,MAAO4tF,EAAazoF,YAAY,EAAMC,cAAc,GAClE0kB,OAAQ,CAAC9pB,MAAO8pB,EAAQ3kB,YAAY,EAAMC,cAAc,GACxDw+B,UAAW,CAAC5jC,MAAO4jC,EAAWz+B,YAAY,EAAMC,cAAc,GAC9DlG,EAAG,CAACc,MAAOy/E,IAEf,CCbO,SAAS/pB,GAAUx4D,EAAGiF,EAAGpD,GAC9B7C,KAAKgB,EAAIA,EACThB,KAAKiG,EAAIA,EACTjG,KAAK6C,EAAIA,CACX,CAEA22D,GAAU3zD,UAAY,CACpBoF,YAAauuD,GACbxgC,MAAO,SAASh4B,GACd,OAAa,IAANA,EAAUhB,KAAO,IAAIw5D,GAAUx5D,KAAKgB,EAAIA,EAAGhB,KAAKiG,EAAGjG,KAAK6C,EACjE,EACAomC,UAAW,SAAShjC,EAAGpD,GACrB,OAAa,IAANoD,EAAgB,IAANpD,EAAU7C,KAAO,IAAIw5D,GAAUx5D,KAAKgB,EAAGhB,KAAKiG,EAAIjG,KAAKgB,EAAIiF,EAAGjG,KAAK6C,EAAI7C,KAAKgB,EAAI6B,EACjG,EACAud,MAAO,SAASlW,GACd,MAAO,CAACA,EAAM,GAAKlK,KAAKgB,EAAIhB,KAAKiG,EAAGiE,EAAM,GAAKlK,KAAKgB,EAAIhB,KAAK6C,EAC/D,EACAuzI,OAAQ,SAASnwI,GACf,OAAOA,EAAIjG,KAAKgB,EAAIhB,KAAKiG,CAC3B,EACAowI,OAAQ,SAASxzI,GACf,OAAOA,EAAI7C,KAAKgB,EAAIhB,KAAK6C,CAC3B,EACAu9G,OAAQ,SAASk2B,GACf,MAAO,EAAEA,EAAS,GAAKt2I,KAAKiG,GAAKjG,KAAKgB,GAAIs1I,EAAS,GAAKt2I,KAAK6C,GAAK7C,KAAKgB,EACzE,EACAu1I,QAAS,SAAStwI,GAChB,OAAQA,EAAIjG,KAAKiG,GAAKjG,KAAKgB,CAC7B,EACAw1I,QAAS,SAAS3zI,GAChB,OAAQA,EAAI7C,KAAK6C,GAAK7C,KAAKgB,CAC7B,EACAy1I,SAAU,SAASxwI,GACjB,OAAOA,EAAE08E,OAAO7mD,OAAO71B,EAAEU,QAAQ1G,IAAID,KAAKu2I,QAASv2I,MAAMC,IAAIgG,EAAEm6G,OAAQn6G,GACzE,EACAywI,SAAU,SAAS7zI,GACjB,OAAOA,EAAE8/E,OAAO7mD,OAAOj5B,EAAE8D,QAAQ1G,IAAID,KAAKw2I,QAASx2I,MAAMC,IAAI4C,EAAEu9G,OAAQv9G,GACzE,EACA9C,SAAU,WACR,MAAO,aAAeC,KAAKiG,EAAI,IAAMjG,KAAK6C,EAAI,WAAa7C,KAAKgB,EAAI,GACtE,GAGK,IAAI,GAAW,IAAIw4D,GAAU,EAAG,EAAG,GAI3B,SAAS,GAAUx0D,GAChC,MAAQA,EAAK2xI,aAAc3xI,EAAOA,EAAKspB,YAAa,OAAO,GAC3D,OAAOtpB,EAAK2xI,MACd,CClDO,SAAS,GAAc37H,GAC5BA,EAAMoxE,0BACR,CAEe,YAASpxE,GACtBA,EAAMutB,iBACNvtB,EAAMoxE,0BACR,CCKA,SAAS,GAAcpxE,GACrB,QAASA,EAAM4+E,SAA0B,UAAf5+E,EAAMrC,MAAsBqC,EAAMotB,OAC9D,CAEA,SAAS,KACP,IAAIpkC,EAAIhE,KACR,OAAIgE,aAAa0kE,YACf1kE,EAAIA,EAAE4tF,iBAAmB5tF,GACnB81F,aAAa,WAEV,CAAC,EADR91F,EAAIA,EAAE4kC,QAAQwsD,SACHnvF,EAAGjC,EAAEnB,GAAI,CAACmB,EAAEiC,EAAIjC,EAAE2+B,MAAO3+B,EAAEnB,EAAImB,EAAE6+B,SAEvC,CAAC,CAAC,EAAG,GAAI,CAAC7+B,EAAE2+B,MAAMyyD,QAAQtxF,MAAOE,EAAE6+B,OAAOuyD,QAAQtxF,QAEpD,CAAC,CAAC,EAAG,GAAI,CAACE,EAAE0zD,YAAa1zD,EAAE4zD,cACpC,CAEA,SAASg/E,KACP,OAAO52I,KAAK22I,QAAU,EACxB,CAEA,SAASE,GAAkB77H,GACzB,OAAQA,EAAM87H,QAA8B,IAApB97H,EAAM+7H,UAAkB,IAAO/7H,EAAM+7H,UAAY,EAAI,OAAU/7H,EAAM4+E,QAAU,GAAK,EAC9G,CAEA,SAAS,KACP,OAAOI,UAAUC,gBAAmB,iBAAkBj6F,IACxD,CAEA,SAASg3I,GAAiBtvG,EAAWyzC,EAAQ3zC,GAC3C,IAAI+lG,EAAM7lG,EAAU6uG,QAAQp7D,EAAO,GAAG,IAAM3zC,EAAgB,GAAG,GAC3DimG,EAAM/lG,EAAU6uG,QAAQp7D,EAAO,GAAG,IAAM3zC,EAAgB,GAAG,GAC3DgmG,EAAM9lG,EAAU8uG,QAAQr7D,EAAO,GAAG,IAAM3zC,EAAgB,GAAG,GAC3DkmG,EAAMhmG,EAAU8uG,QAAQr7D,EAAO,GAAG,IAAM3zC,EAAgB,GAAG,GAC/D,OAAOE,EAAUuB,UACfwkG,EAAMF,GAAOA,EAAME,GAAO,EAAI9jI,KAAKzC,IAAI,EAAGqmI,IAAQ5jI,KAAKvC,IAAI,EAAGqmI,GAC9DC,EAAMF,GAAOA,EAAME,GAAO,EAAI/jI,KAAKzC,IAAI,EAAGsmI,IAAQ7jI,KAAKvC,IAAI,EAAGsmI,GAElE,CAEe,cACb,IAUIuJ,EACAC,EACA38C,EAZAjkE,EAAS,GACT6kD,EAAS,GACTg8D,EAAYH,GACZI,EAAaP,GACbr8C,EAAY,GACZ/yD,EAAc,CAAC,EAAG4R,KAClB7R,EAAkB,CAAC,EAAC,KAAW,KAAY,CAAC6R,IAAUA,MACtDrQ,EAAW,IACX4sD,EAAc,GACd6E,EAAY,GAAS,QAAS,OAAQ,OAMtCgT,EAAiB,EACjB4pC,EAAc,GAElB,SAAStwG,EAAK67C,GACZA,EACK4I,SAAS,SAAUorD,IACnBz6G,GAAG,aAAcm7G,EAAS,CAACtrD,SAAS,IACpC7vD,GAAG,iBAAkBwxE,GACrBxxE,GAAG,gBAAiBo7G,GACtBjhH,OAAOkkE,GACLr+D,GAAG,kBAAmByxE,GACtBzxE,GAAG,iBAAkB4+D,GACrB5+D,GAAG,iCAAkC6+D,GACrCvvE,MAAM,8BAA+B,gBAC5C,CA0DA,SAASuN,EAAM0O,EAAW1mC,GAExB,OADAA,EAAI2I,KAAKvC,IAAIqgC,EAAY,GAAI99B,KAAKzC,IAAIugC,EAAY,GAAIzmC,OACzC0mC,EAAU1mC,EAAI0mC,EAAY,IAAI8xB,GAAUx4D,EAAG0mC,EAAUzhC,EAAGyhC,EAAU7kC,EACjF,CAEA,SAASomC,EAAUvB,EAAW02B,EAAI51D,GAChC,IAAIvC,EAAIm4D,EAAG,GAAK51D,EAAG,GAAKk/B,EAAU1mC,EAAG6B,EAAIu7D,EAAG,GAAK51D,EAAG,GAAKk/B,EAAU1mC,EACnE,OAAOiF,IAAMyhC,EAAUzhC,GAAKpD,IAAM6kC,EAAU7kC,EAAI6kC,EAAY,IAAI8xB,GAAU9xB,EAAU1mC,EAAGiF,EAAGpD,EAC5F,CAEA,SAASw0B,EAAS8jD,GAChB,MAAO,GAAGA,EAAO,GAAG,KAAMA,EAAO,GAAG,IAAM,IAAKA,EAAO,GAAG,KAAMA,EAAO,GAAG,IAAM,EACjF,CAEA,SAASjrD,EAAS6Y,EAAYrB,EAAWx9B,EAAO8Q,GAC9C+tB,EACK5M,GAAG,cAAc,WAAa0xE,EAAQ7tG,KAAMod,WAAWpC,MAAMA,GAAOxR,OAAS,IAC7E2yB,GAAG,2BAA2B,WAAa0xE,EAAQ7tG,KAAMod,WAAWpC,MAAMA,GAAOvR,KAAO,IACxFuqF,MAAM,QAAQ,WACb,IAAIrQ,EAAO3jF,KACP8zB,EAAO1W,UACPra,EAAI8qG,EAAQlqB,EAAM7vD,GAAM9Y,MAAMA,GAC9BhX,EAAIm3E,EAAO/6D,MAAMujE,EAAM7vD,GACvB/rB,EAAa,MAATmC,EAAgBmtB,EAASrzB,GAAsB,mBAAVkG,EAAuBA,EAAMkW,MAAMujE,EAAM7vD,GAAQ5pB,EAC1F66C,EAAIp7C,KAAKvC,IAAIpD,EAAE,GAAG,GAAKA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAKA,EAAE,GAAG,IAC/CO,EAAIo/E,EAAKgzD,OACTnyI,EAAyB,mBAAdkjC,EAA2BA,EAAUtnB,MAAMujE,EAAM7vD,GAAQ4T,EACpElnC,EAAIo1F,EAAYrxF,EAAE67G,OAAOr4G,GAAG1H,OAAO0kD,EAAIxgD,EAAEvD,GAAIwD,EAAE47G,OAAOr4G,GAAG1H,OAAO0kD,EAAIvgD,EAAExD,IAC1E,OAAO,SAAS8B,GACd,GAAU,IAANA,EAASA,EAAI0B,MACZ,CAAE,IAAII,EAAIpE,EAAEsC,GAAI9B,EAAI+jD,EAAIngD,EAAE,GAAI9B,EAAI,IAAI02D,GAAUx4D,EAAG+G,EAAE,GAAKnD,EAAE,GAAK5D,EAAG+G,EAAE,GAAKnD,EAAE,GAAK5D,EAAI,CAC3F+B,EAAEgkC,KAAK,KAAMjkC,EACf,CACF,GACN,CAEA,SAAS+qG,EAAQlqB,EAAM7vD,EAAMonE,GAC3B,OAASA,GAASvX,EAAK6zD,WAAc,IAAIC,EAAQ9zD,EAAM7vD,EACzD,CAEA,SAAS2jH,EAAQ9zD,EAAM7vD,GACrB9zB,KAAK2jF,KAAOA,EACZ3jF,KAAK8zB,KAAOA,EACZ9zB,KAAKm0F,OAAS,EACdn0F,KAAK0xF,YAAc,KACnB1xF,KAAKm7E,OAASA,EAAO/6D,MAAMujE,EAAM7vD,GACjC9zB,KAAK03I,KAAO,CACd,CA8CA,SAASJ,EAAQt8H,KAAU8Y,GACzB,GAAKwC,EAAOlW,MAAMpgB,KAAMod,WAAxB,CACA,IAAIra,EAAI8qG,EAAQ7tG,KAAM8zB,GAAM9Y,MAAMA,GAC9BlY,EAAI9C,KAAK22I,OACT31I,EAAI2I,KAAKvC,IAAIqgC,EAAY,GAAI99B,KAAKzC,IAAIugC,EAAY,GAAI3kC,EAAE9B,EAAI2I,KAAKkB,IAAI,EAAGusI,EAAWh3H,MAAMpgB,KAAMod,cAC/FrV,EAAIq0F,GAAQphF,GAIhB,GAAIjY,EAAE40I,MACA50I,EAAE+zD,MAAM,GAAG,KAAO/uD,EAAE,IAAMhF,EAAE+zD,MAAM,GAAG,KAAO/uD,EAAE,KAChDhF,EAAE+zD,MAAM,GAAKh0D,EAAEs9G,OAAOr9G,EAAE+zD,MAAM,GAAK/uD,IAErCkqB,aAAalvB,EAAE40I,WAIZ,IAAI70I,EAAE9B,IAAMA,EAAG,OAIlB+B,EAAE+zD,MAAQ,CAAC/uD,EAAGjF,EAAEs9G,OAAOr4G,IACvBowF,GAAUn4F,MACV+C,EAAEyG,OACJ,CAEA,GAAQwR,GACRjY,EAAE40I,MAAQ53H,YAGV,WACEhd,EAAE40I,MAAQ,KACV50I,EAAE0G,KACJ,GAvMe,KAkMf1G,EAAEgkC,KAAK,QAASowG,EAAUluG,EAAUjQ,EAAMl2B,EAAG9B,GAAI+B,EAAE+zD,MAAM,GAAI/zD,EAAE+zD,MAAM,IAAK/zD,EAAEo4E,OAAQ3zC,GA3B1C,CAiC5C,CAEA,SAASmmE,EAAY3yF,KAAU8Y,GAC7B,IAAIymE,GAAgBjkE,EAAOlW,MAAMpgB,KAAMod,WAAvC,CACA,IAAIu0E,EAAgB32E,EAAM22E,cACtB5uF,EAAI8qG,EAAQ7tG,KAAM8zB,GAAM,GAAM9Y,MAAMA,GACpCtX,EAAI,GAAOsX,EAAMqxE,MAAMlwD,GAAG,kBAW9B,SAAoBnhB,GAElB,GADA,GAAQA,IACHjY,EAAE05F,MAAO,CACZ,IAAItoD,EAAKn5B,EAAMi4C,QAAUja,EAAI5E,EAAKp5B,EAAMk4C,QAAU71B,EAClDt6B,EAAE05F,MAAQtoD,EAAKA,EAAKC,EAAKA,EAAKq5D,CAChC,CACA1qG,EAAEiY,MAAMA,GACN+rB,KAAK,QAASowG,EAAUluG,EAAUlmC,EAAE4gF,KAAKgzD,OAAQ5zI,EAAE+zD,MAAM,GAAKslC,GAAQphF,EAAO22E,GAAgB5uF,EAAE+zD,MAAM,IAAK/zD,EAAEo4E,OAAQ3zC,GACxH,IAnB4D,GAAMrL,GAAG,gBAqBrE,SAAoBnhB,GAClBtX,EAAEy4B,GAAG,8BAA+B,MACpC,GAAWnhB,EAAMqxE,KAAMtpF,EAAE05F,OACzB,GAAQzhF,GACRjY,EAAEiY,MAAMA,GAAOvR,KACjB,IA1BiG,GAC7F1B,EAAIq0F,GAAQphF,EAAO22E,GACnB34C,EAAKh+B,EAAMi4C,QACX51B,EAAKriB,EAAMk4C,QAEf,GAAYl4C,EAAMqxE,MAClB,GAAcrxE,GACdjY,EAAE+zD,MAAQ,CAAC/uD,EAAG/H,KAAK22I,OAAOv2B,OAAOr4G,IACjCowF,GAAUn4F,MACV+C,EAAEyG,OAZuD,CA8B3D,CAEA,SAAS+tI,EAAWv8H,KAAU8Y,GAC5B,GAAKwC,EAAOlW,MAAMpgB,KAAMod,WAAxB,CACA,IAAIxO,EAAK5O,KAAK22I,OACVv4E,EAAKg+B,GAAQphF,EAAM4hF,eAAiB5hF,EAAM4hF,eAAe,GAAK5hF,EAAOhb,MACrEwI,EAAKoG,EAAGwxG,OAAOhiD,GACfw5E,EAAKhpI,EAAG5N,GAAKga,EAAMmhF,SAAW,GAAM,GACpCxtF,EAAKwoI,EAAUluG,EAAUjQ,EAAMpqB,EAAIgpI,GAAKx5E,EAAI51D,GAAK2yE,EAAO/6D,MAAMpgB,KAAM8zB,GAAO0T,GAE/E,GAAQxsB,GACJguB,EAAW,EAAG,GAAOhpC,MAAM+oC,aAAaC,SAASA,GAAUxmC,KAAK0tB,EAAUvhB,EAAIyvD,EAAIpjD,GACjF,GAAOhb,MAAMwC,KAAKukC,EAAKW,UAAW/4B,EAAIyvD,EAAIpjD,EATL,CAU5C,CAEA,SAAS4yF,EAAa5yF,KAAU8Y,GAC9B,GAAKwC,EAAOlW,MAAMpgB,KAAMod,WAAxB,CACA,IAGI09E,EAASt6F,EAAGsC,EAAGiF,EAHfszF,EAAUrgF,EAAMqgF,QAChB53F,EAAI43F,EAAQ/6F,OACZyC,EAAI8qG,EAAQ7tG,KAAM8zB,EAAM9Y,EAAM4hF,eAAet8F,SAAWmD,GAAGuX,MAAMA,GAIrE,IADA,GAAcA,GACTxa,EAAI,EAAGA,EAAIiD,IAAKjD,EAEnBuH,EAAI,CADYA,EAAIq0F,GAApBt5F,EAAIu4F,EAAQ76F,GAAmBR,MACvBA,KAAK22I,OAAOv2B,OAAOr4G,GAAIjF,EAAEwpB,YAC5BvpB,EAAE80I,OACG90I,EAAE+0I,QAAU/0I,EAAE80I,OAAO,KAAO9vI,EAAE,KAAIhF,EAAE+0I,OAAS/vI,EAAGhF,EAAE20I,KAAO,IADpD30I,EAAE80I,OAAS9vI,EAAG+yF,GAAU,EAAM/3F,EAAE20I,KAAO,IAAMT,GAI1DA,IAAeA,EAAgBhlH,aAAaglH,IAE5Cn8C,IACE/3F,EAAE20I,KAAO,IAAGR,EAAanvI,EAAE,GAAIkvI,EAAgBl3H,YAAW,WAAak3H,EAAgB,IAAM,GA3QpF,MA4Qb9+C,GAAUn4F,MACV+C,EAAEyG,QAnBsC,CAqB5C,CAEA,SAASuxF,EAAW//E,KAAU8Y,GAC5B,GAAK9zB,KAAKw3I,UAAV,CACA,IAEwBh3I,EAAGsC,EAAGiF,EAAGnD,EAF7B7B,EAAI8qG,EAAQ7tG,KAAM8zB,GAAM9Y,MAAMA,GAC9BqgF,EAAUrgF,EAAM4hF,eAChBn5F,EAAI43F,EAAQ/6F,OAGhB,IADA,GAAQ0a,GACHxa,EAAI,EAAGA,EAAIiD,IAAKjD,EACHuH,EAAIq0F,GAApBt5F,EAAIu4F,EAAQ76F,GAAmBR,MAC3B+C,EAAE80I,QAAU90I,EAAE80I,OAAO,KAAO/0I,EAAEwpB,WAAYvpB,EAAE80I,OAAO,GAAK9vI,EACnDhF,EAAE+0I,QAAU/0I,EAAE+0I,OAAO,KAAOh1I,EAAEwpB,aAAYvpB,EAAE+0I,OAAO,GAAK/vI,GAGnE,GADAjF,EAAIC,EAAE4gF,KAAKgzD,OACP5zI,EAAE+0I,OAAQ,CACZ,IAAI15E,EAAKr7D,EAAE80I,OAAO,GAAIE,EAAKh1I,EAAE80I,OAAO,GAChCrvI,EAAKzF,EAAE+0I,OAAO,GAAIxvI,EAAKvF,EAAE+0I,OAAO,GAChCE,GAAMA,EAAKxvI,EAAG,GAAK41D,EAAG,IAAM45E,GAAMA,EAAKxvI,EAAG,GAAK41D,EAAG,IAAM45E,EACxDC,GAAMA,EAAK3vI,EAAG,GAAKyvI,EAAG,IAAME,GAAMA,EAAK3vI,EAAG,GAAKyvI,EAAG,IAAME,EAC5Dn1I,EAAIk2B,EAAMl2B,EAAG6G,KAAKoG,KAAKioI,EAAKC,IAC5BlwI,EAAI,EAAEq2D,EAAG,GAAK51D,EAAG,IAAM,GAAI41D,EAAG,GAAK51D,EAAG,IAAM,GAC5C5D,EAAI,EAAEmzI,EAAG,GAAKzvI,EAAG,IAAM,GAAIyvI,EAAG,GAAKzvI,EAAG,IAAM,EAC9C,KACK,KAAIvF,EAAE80I,OACN,OADc9vI,EAAIhF,EAAE80I,OAAO,GAAIjzI,EAAI7B,EAAE80I,OAAO,EACtC,CAEX90I,EAAEgkC,KAAK,QAASowG,EAAUluG,EAAUnmC,EAAGiF,EAAGnD,GAAI7B,EAAEo4E,OAAQ3zC,GAxB7B,CAyB7B,CAEA,SAASwzD,EAAWhgF,KAAU8Y,GAC5B,GAAK9zB,KAAKw3I,UAAV,CACA,IAEwBh3I,EAAGsC,EAFvBC,EAAI8qG,EAAQ7tG,KAAM8zB,GAAM9Y,MAAMA,GAC9BqgF,EAAUrgF,EAAM4hF,eAChBn5F,EAAI43F,EAAQ/6F,OAKhB,IAHA,GAAc0a,GACVu/E,GAAatoE,aAAasoE,GAC9BA,EAAcx6E,YAAW,WAAaw6E,EAAc,IAAM,GArT3C,KAsTV/5F,EAAI,EAAGA,EAAIiD,IAAKjD,EACnBsC,EAAIu4F,EAAQ76F,GACRuC,EAAE80I,QAAU90I,EAAE80I,OAAO,KAAO/0I,EAAEwpB,kBAAmBvpB,EAAE80I,OAC9C90I,EAAE+0I,QAAU/0I,EAAE+0I,OAAO,KAAOh1I,EAAEwpB,mBAAmBvpB,EAAE+0I,OAG9D,GADI/0I,EAAE+0I,SAAW/0I,EAAE80I,SAAQ90I,EAAE80I,OAAS90I,EAAE+0I,cAAe/0I,EAAE+0I,QACrD/0I,EAAE80I,OAAQ90I,EAAE80I,OAAO,GAAK73I,KAAK22I,OAAOv2B,OAAOr9G,EAAE80I,OAAO,SAItD,GAFA90I,EAAE0G,MAEa,IAAX1G,EAAE20I,OACJ50I,EAAIs5F,GAAQt5F,EAAG9C,MACX2J,KAAK+iG,MAAMwqC,EAAW,GAAKp0I,EAAE,GAAIo0I,EAAW,GAAKp0I,EAAE,IAAMu0I,GAAa,CACxE,IAAItvI,EAAI,GAAO/H,MAAMm8B,GAAG,iBACpBp0B,GAAGA,EAAEqY,MAAMpgB,KAAMod,UACvB,CAvBuB,CA0B7B,CAmDA,OAzWA2pB,EAAKW,UAAY,SAASwwG,EAAYxwG,EAAWx9B,EAAO8Q,GACtD,IAAI4nE,EAAYs1D,EAAWt1D,UAAYs1D,EAAWt1D,YAAcs1D,EAChEt1D,EAAU4I,SAAS,SAAUorD,IACzBsB,IAAet1D,EACjB1yD,EAASgoH,EAAYxwG,EAAWx9B,EAAO8Q,GAEvC4nE,EAAUuV,YAAYlV,MAAK,WACzB4qB,EAAQ7tG,KAAMod,WACXpC,MAAMA,GACNxR,QACAu9B,KAAK,KAA2B,mBAAdW,EAA2BA,EAAUtnB,MAAMpgB,KAAMod,WAAasqB,GAChFj+B,KACL,GAEJ,EAEAs9B,EAAKoxG,QAAU,SAASv1D,EAAW5hF,EAAG+G,EAAGiT,GACvC+rB,EAAKqxG,QAAQx1D,GAAW,WAGtB,OAFS5iF,KAAK22I,OAAO31I,GACC,mBAANA,EAAmBA,EAAEof,MAAMpgB,KAAMod,WAAapc,EAEhE,GAAG+G,EAAGiT,EACR,EAEA+rB,EAAKqxG,QAAU,SAASx1D,EAAW5hF,EAAG+G,EAAGiT,GACvC+rB,EAAKW,UAAUk7C,GAAW,WACxB,IAAI5+E,EAAIm3E,EAAO/6D,MAAMpgB,KAAMod,WACvBxO,EAAK5O,KAAK22I,OACVv4E,EAAU,MAALr2D,EAAYsvB,EAASrzB,GAAkB,mBAAN+D,EAAmBA,EAAEqY,MAAMpgB,KAAMod,WAAarV,EACpFS,EAAKoG,EAAGwxG,OAAOhiD,GACfw5E,EAAkB,mBAAN52I,EAAmBA,EAAEof,MAAMpgB,KAAMod,WAAapc,EAC9D,OAAOm2I,EAAUluG,EAAUjQ,EAAMpqB,EAAIgpI,GAAKx5E,EAAI51D,GAAKxE,EAAGwjC,EACxD,GAAGz/B,EAAGiT,EACR,EAEA+rB,EAAKsxG,YAAc,SAASz1D,EAAW38E,EAAGpD,EAAGmY,GAC3C+rB,EAAKW,UAAUk7C,GAAW,WACxB,OAAOu0D,EAAUn3I,KAAK22I,OAAO1tG,UACd,mBAANhjC,EAAmBA,EAAEma,MAAMpgB,KAAMod,WAAanX,EACxC,mBAANpD,EAAmBA,EAAEud,MAAMpgB,KAAMod,WAAava,GACpDs4E,EAAO/6D,MAAMpgB,KAAMod,WAAYoqB,EACpC,GAAG,KAAMxsB,EACX,EAEA+rB,EAAKuxG,YAAc,SAAS11D,EAAW38E,EAAGpD,EAAGkF,EAAGiT,GAC9C+rB,EAAKW,UAAUk7C,GAAW,WACxB,IAAI5+E,EAAIm3E,EAAO/6D,MAAMpgB,KAAMod,WACvBta,EAAI9C,KAAK22I,OACTv4E,EAAU,MAALr2D,EAAYsvB,EAASrzB,GAAkB,mBAAN+D,EAAmBA,EAAEqY,MAAMpgB,KAAMod,WAAarV,EACxF,OAAOovI,EAAU,GAASluG,UAAUm1B,EAAG,GAAIA,EAAG,IAAIplC,MAAMl2B,EAAE9B,GAAGioC,UAC9C,mBAANhjC,GAAoBA,EAAEma,MAAMpgB,KAAMod,YAAcnX,EAC1C,mBAANpD,GAAoBA,EAAEud,MAAMpgB,KAAMod,YAAcva,GACtDmB,EAAGwjC,EACR,GAAGz/B,EAAGiT,EACR,EAmDAy8H,EAAQ5xI,UAAY,CAClBmV,MAAO,SAASA,GAEd,OADIA,IAAOhb,KAAK0xF,YAAc12E,GACvBhb,IACT,EACAwJ,MAAO,WAKL,OAJsB,KAAhBxJ,KAAKm0F,SACTn0F,KAAK2jF,KAAK6zD,UAAYx3I,KACtBA,KAAKm7F,KAAK,UAELn7F,IACT,EACA+mC,KAAM,SAAS5iC,EAAKujC,GAMlB,OALI1nC,KAAK82D,OAAiB,UAAR3yD,IAAiBnE,KAAK82D,MAAM,GAAKpvB,EAAU04E,OAAOpgH,KAAK82D,MAAM,KAC3E92D,KAAK63I,QAAkB,UAAR1zI,IAAiBnE,KAAK63I,OAAO,GAAKnwG,EAAU04E,OAAOpgH,KAAK63I,OAAO,KAC9E73I,KAAK83I,QAAkB,UAAR3zI,IAAiBnE,KAAK83I,OAAO,GAAKpwG,EAAU04E,OAAOpgH,KAAK83I,OAAO,KAClF93I,KAAK2jF,KAAKgzD,OAASjvG,EACnB1nC,KAAKm7F,KAAK,QACHn7F,IACT,EACAyJ,IAAK,WAKH,OAJsB,KAAhBzJ,KAAKm0F,gBACFn0F,KAAK2jF,KAAK6zD,UACjBx3I,KAAKm7F,KAAK,QAELn7F,IACT,EACAm7F,KAAM,SAASxiF,GACb,IAAInR,EAAI,GAAOxH,KAAK2jF,MAAMM,QAC1BwW,EAAUj4F,KACRmW,EACA3Y,KAAK2jF,KACL,IAAIwyD,GAAUx9H,EAAM,CAClB+4E,YAAa1xF,KAAK0xF,YAClB9jE,OAAQmZ,EACRpuB,OACA+uB,UAAW1nC,KAAK2jF,KAAKgzD,OACrBpzD,SAAUkX,IAEZjzF,EAEJ,GAsKFu/B,EAAKqwG,WAAa,SAASp0I,GACzB,OAAOoa,UAAU9c,QAAU82I,EAA0B,mBAANp0I,EAAmBA,EAAI,IAAUA,GAAI+jC,GAAQqwG,CAC9F,EAEArwG,EAAKzQ,OAAS,SAAStzB,GACrB,OAAOoa,UAAU9c,QAAUg2B,EAAsB,mBAANtzB,EAAmBA,EAAI,KAAWA,GAAI+jC,GAAQzQ,CAC3F,EAEAyQ,EAAKyzD,UAAY,SAASx3F,GACxB,OAAOoa,UAAU9c,QAAUk6F,EAAyB,mBAANx3F,EAAmBA,EAAI,KAAWA,GAAI+jC,GAAQyzD,CAC9F,EAEAzzD,EAAKo0C,OAAS,SAASn4E,GACrB,OAAOoa,UAAU9c,QAAU66E,EAAsB,mBAANn4E,EAAmBA,EAAI,GAAS,CAAC,EAAEA,EAAE,GAAG,IAAKA,EAAE,GAAG,IAAK,EAAEA,EAAE,GAAG,IAAKA,EAAE,GAAG,MAAO+jC,GAAQo0C,CACpI,EAEAp0C,EAAKU,YAAc,SAASzkC,GAC1B,OAAOoa,UAAU9c,QAAUmnC,EAAY,IAAMzkC,EAAE,GAAIykC,EAAY,IAAMzkC,EAAE,GAAI+jC,GAAQ,CAACU,EAAY,GAAIA,EAAY,GAClH,EAEAV,EAAKS,gBAAkB,SAASxkC,GAC9B,OAAOoa,UAAU9c,QAAUknC,EAAgB,GAAG,IAAMxkC,EAAE,GAAG,GAAIwkC,EAAgB,GAAG,IAAMxkC,EAAE,GAAG,GAAIwkC,EAAgB,GAAG,IAAMxkC,EAAE,GAAG,GAAIwkC,EAAgB,GAAG,IAAMxkC,EAAE,GAAG,GAAI+jC,GAAQ,CAAC,CAACS,EAAgB,GAAG,GAAIA,EAAgB,GAAG,IAAK,CAACA,EAAgB,GAAG,GAAIA,EAAgB,GAAG,IACzQ,EAEAT,EAAKowG,UAAY,SAASn0I,GACxB,OAAOoa,UAAU9c,QAAU62I,EAAYn0I,EAAG+jC,GAAQowG,CACpD,EAEApwG,EAAKiC,SAAW,SAAShmC,GACvB,OAAOoa,UAAU9c,QAAU0oC,GAAYhmC,EAAG+jC,GAAQiC,CACpD,EAEAjC,EAAK6uD,YAAc,SAAS5yF,GAC1B,OAAOoa,UAAU9c,QAAUs1F,EAAc5yF,EAAG+jC,GAAQ6uD,CACtD,EAEA7uD,EAAK5K,GAAK,WACR,IAAIr4B,EAAQ22F,EAAUt+D,GAAG/b,MAAMq6E,EAAWr9E,WAC1C,OAAOtZ,IAAU22F,EAAY1zD,EAAOjjC,CACtC,EAEAijC,EAAKmnE,cAAgB,SAASlrG,GAC5B,OAAOoa,UAAU9c,QAAUmtG,GAAkBzqG,GAAKA,GAAKA,EAAG+jC,GAAQp9B,KAAKoG,KAAK09F,EAC9E,EAEA1mE,EAAKswG,YAAc,SAASr0I,GAC1B,OAAOoa,UAAU9c,QAAU+2I,GAAer0I,EAAG+jC,GAAQswG,CACvD,EAEOtwG,CACT,CFjZA,GAAUlhC,UAAY2zD,GAAU3zD,YG5C5B0yI,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB33I,IAAjB43I,EACH,OAAOA,EAAa94I,QAGrB,IAAIF,EAAS64I,EAAyBE,GAAY,CACjD94I,GAAI84I,EAEJ74I,QAAS,CAAC,GAOX,OAHA+4I,EAAoBF,GAAUj2I,KAAK9C,EAAOE,QAASF,EAAQA,EAAOE,QAAS44I,GAGpE94I,EAAOE,OACf,CzjBtBIR,EAAkC,mBAAXmE,OAAwBA,OAAO,kBAAoB,qBAC1ElE,EAAmC,mBAAXkE,OAAwBA,OAAO,mBAAqB,sBAC5EjE,EAAiC,mBAAXiE,OAAwBA,OAAO,iBAAmB,oBACxEhE,EAAgB4d,IAChBA,GAASA,EAAM3V,EAAI,IACrB2V,EAAM3V,EAAI,EACV2V,EAAM5W,SAASO,GAAQA,EAAGjC,MAC1BsY,EAAM5W,SAASO,GAAQA,EAAGjC,IAAMiC,EAAGjC,IAAMiC,MAC1C,EAyBD0xI,EAAoBj0I,EAAI,CAAC7E,EAAQiD,EAAMi2I,KACtC,IAAIz7H,EACJy7H,KAAcz7H,EAAQ,IAAI3V,GAAK,GAC/B,IAEIqxI,EACAC,EACAzgE,EAJA0gE,EAAY,IAAIv1G,IAChB5jC,EAAUF,EAAOE,QAIjBo5I,EAAU,IAAI/lH,SAAQ,CAAC7D,EAAS6pH,KACnC5gE,EAAS4gE,EACTH,EAAe1pH,CAAO,IAEvB4pH,EAAQ35I,GAAkBO,EAC1Bo5I,EAAQ55I,GAAkB0H,IAAQqW,GAASrW,EAAGqW,GAAQ47H,EAAUxyI,QAAQO,GAAKkyI,EAAe,OAAE/yI,SAC9FvG,EAAOE,QAAUo5I,EACjBr2I,GAAMu2I,IAEL,IAAIpyI,EADJ+xI,EAvCa,CAACK,GAAUA,EAAKj5I,KAAKk5I,IACnC,GAAW,OAARA,GAA+B,iBAARA,EAAkB,CAC3C,GAAGA,EAAI/5I,GAAgB,OAAO+5I,EAC9B,GAAGA,EAAIpiG,KAAM,CACZ,IAAI55B,EAAQ,GACZA,EAAM3V,EAAI,EACV2xI,EAAIpiG,MAAMlyC,IACTioB,EAAIztB,GAAkBwF,EACtBtF,EAAa4d,EAAM,IAChBnZ,IACH8oB,EAAIxtB,GAAgB0E,EACpBzE,EAAa4d,EAAM,IAEpB,IAAI2P,EAAM,CAAC,EAEX,OADAA,EAAI1tB,GAAkB0H,GAAQA,EAAGqW,GAC1B2P,CACR,CACD,CACA,IAAIssH,EAAM,CAAC,EAGX,OAFAA,EAAIh6I,GAAiB6G,MACrBmzI,EAAI/5I,GAAkB85I,EACfC,CAAG,IAkBKC,CAASH,GAEvB,IAAII,EAAY,IAAOT,EAAY54I,KAAKuH,IACvC,GAAGA,EAAElI,GAAe,MAAMkI,EAAElI,GAC5B,OAAOkI,EAAEnI,EAAe,IAErB25I,EAAU,IAAI/lH,SAAS7D,KAC1BtoB,EAAK,IAAOsoB,EAAQkqH,IACjBz0I,EAAI,EACP,IAAI00I,EAAW55F,GAAOA,IAAMxiC,IAAU47H,EAAUlmI,IAAI8sC,KAAOo5F,EAAUjzI,IAAI65C,GAAIA,IAAMA,EAAEn4C,IAAMV,EAAGjC,IAAK86C,EAAElgD,KAAKqH,KAC1G+xI,EAAY54I,KAAKk5I,GAASA,EAAI/5I,GAAem6I,IAAU,IAExD,OAAOzyI,EAAGjC,EAAIm0I,EAAUM,GAAW,IAChCpiG,IAAUA,EAAMmhC,EAAO2gE,EAAQ15I,GAAgB43C,GAAO4hG,EAAal5I,GAAWL,EAAa4d,MAC/FA,GAASA,EAAM3V,EAAI,IAAM2V,EAAM3V,EAAI,EAAE,E0jB9DtCgxI,EAAoB/0I,EAAK/D,IACxB,IAAI85I,EAAS95I,GAAUA,EAAO+5I,WAC7B,IAAO/5I,EAAiB,QACxB,IAAM,EAEP,OADA84I,EAAoBhxI,EAAEgyI,EAAQ,CAAEj1I,EAAGi1I,IAC5BA,CAAM,ECLdhB,EAAoBhxI,EAAI,CAAC5H,EAASgtF,KACjC,IAAI,IAAIzoF,KAAOyoF,EACX4rD,EAAoBh3F,EAAEorC,EAAYzoF,KAASq0I,EAAoBh3F,EAAE5hD,EAASuE,IAC5E2E,OAAOC,eAAenJ,EAASuE,EAAK,CAAE8E,YAAY,EAAMD,IAAK4jF,EAAWzoF,IAE1E,ECNDq0I,EAAoBz1I,EAAI,WACvB,GAA0B,iBAAf22I,WAAyB,OAAOA,WAC3C,IACC,OAAO15I,MAAQ,IAAI0uG,SAAS,cAAb,EAChB,CAAE,MAAO1qG,GACR,GAAsB,iBAAXsb,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBk5H,EAAoBh3F,EAAI,CAAC10B,EAAKg/C,IAAUhjE,OAAOjD,UAAUy7C,eAAe9+C,KAAKsqB,EAAKg/C,GCClF0sE,EAAoB3zI,EAAKjF,IACH,oBAAX2D,QAA0BA,OAAOo2I,aAC1C7wI,OAAOC,eAAenJ,EAAS2D,OAAOo2I,YAAa,CAAE71I,MAAO,WAE7DgF,OAAOC,eAAenJ,EAAS,aAAc,CAAEkE,OAAO,GAAO,ECL9D00I,EAAoBoB,QAAK94I,ECGC03I,EAAoB","sources":["webpack://voronoi/webpack/runtime/async module","webpack://voronoi/./src/styles.css","webpack://voronoi/./node_modules/css-loader/dist/runtime/api.js","webpack://voronoi/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://voronoi/./node_modules/performance-now/lib/performance-now.js","webpack://voronoi/./node_modules/polygon-clipping/dist/polygon-clipping.umd.js","webpack://voronoi/./node_modules/raf/index.js","webpack://voronoi/./node_modules/rgbcolor/index.js","webpack://voronoi/./src/styles.css?44b2","webpack://voronoi/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://voronoi/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://voronoi/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://voronoi/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://voronoi/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://voronoi/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://voronoi/./src/assistant/Typewriter.js","webpack://voronoi/./src/assistant/OzAssistant.js","webpack://voronoi/./src/clustering/kmeans.js","webpack://voronoi/./src/display/chart.js","webpack://voronoi/./src/display/interface.js","webpack://voronoi/./src/display/world.js","webpack://voronoi/./src/environment/environment.js","webpack://voronoi/./src/newmain.js","webpack://voronoi/./src/pathfinder/astar.js","webpack://voronoi/./src/pathfinder/binaryHeap.js","webpack://voronoi/./src/pathfinder/thetastar.js","webpack://voronoi/./src/settings.js","webpack://voronoi/./src/utility/HighlightUtils.js","webpack://voronoi/./src/utility/RenderUtils.js","webpack://voronoi/./src/utility/animation.js","webpack://voronoi/./src/utility/geometry.js","webpack://voronoi/./src/utility/noise.js","webpack://voronoi/./node_modules/svg-pathdata/lib/SVGPathData.module.js","webpack://voronoi/./node_modules/stackblur-canvas/dist/stackblur-es.js","webpack://voronoi/./node_modules/canvg/dist/index.js","webpack://voronoi/./node_modules/d3-array/src/ascending.js","webpack://voronoi/./node_modules/d3-array/src/descending.js","webpack://voronoi/./node_modules/d3-array/src/bisector.js","webpack://voronoi/./node_modules/d3-array/src/number.js","webpack://voronoi/./node_modules/d3-array/src/bisect.js","webpack://voronoi/./node_modules/d3-array/src/blur.js","webpack://voronoi/./node_modules/d3-array/src/count.js","webpack://voronoi/./node_modules/d3-array/src/cross.js","webpack://voronoi/./node_modules/d3-array/src/cumsum.js","webpack://voronoi/./node_modules/d3-array/src/variance.js","webpack://voronoi/./node_modules/d3-array/src/deviation.js","webpack://voronoi/./node_modules/d3-array/src/extent.js","webpack://voronoi/./node_modules/d3-array/src/fsum.js","webpack://voronoi/./node_modules/internmap/src/index.js","webpack://voronoi/./node_modules/d3-array/src/identity.js","webpack://voronoi/./node_modules/d3-array/src/group.js","webpack://voronoi/./node_modules/d3-array/src/permute.js","webpack://voronoi/./node_modules/d3-array/src/sort.js","webpack://voronoi/./node_modules/d3-array/src/groupSort.js","webpack://voronoi/./node_modules/d3-array/src/array.js","webpack://voronoi/./node_modules/d3-array/src/constant.js","webpack://voronoi/./node_modules/d3-array/src/ticks.js","webpack://voronoi/./node_modules/d3-array/src/nice.js","webpack://voronoi/./node_modules/d3-array/src/threshold/sturges.js","webpack://voronoi/./node_modules/d3-array/src/bin.js","webpack://voronoi/./node_modules/d3-array/src/max.js","webpack://voronoi/./node_modules/d3-array/src/maxIndex.js","webpack://voronoi/./node_modules/d3-array/src/min.js","webpack://voronoi/./node_modules/d3-array/src/minIndex.js","webpack://voronoi/./node_modules/d3-array/src/quickselect.js","webpack://voronoi/./node_modules/d3-array/src/greatest.js","webpack://voronoi/./node_modules/d3-array/src/quantile.js","webpack://voronoi/./node_modules/d3-array/src/threshold/freedmanDiaconis.js","webpack://voronoi/./node_modules/d3-array/src/threshold/scott.js","webpack://voronoi/./node_modules/d3-array/src/mean.js","webpack://voronoi/./node_modules/d3-array/src/median.js","webpack://voronoi/./node_modules/d3-array/src/merge.js","webpack://voronoi/./node_modules/d3-array/src/mode.js","webpack://voronoi/./node_modules/d3-array/src/pairs.js","webpack://voronoi/./node_modules/d3-array/src/range.js","webpack://voronoi/./node_modules/d3-array/src/rank.js","webpack://voronoi/./node_modules/d3-array/src/least.js","webpack://voronoi/./node_modules/d3-array/src/leastIndex.js","webpack://voronoi/./node_modules/d3-array/src/greatestIndex.js","webpack://voronoi/./node_modules/d3-array/src/scan.js","webpack://voronoi/./node_modules/d3-array/src/shuffle.js","webpack://voronoi/./node_modules/d3-array/src/sum.js","webpack://voronoi/./node_modules/d3-array/src/transpose.js","webpack://voronoi/./node_modules/d3-array/src/zip.js","webpack://voronoi/./node_modules/d3-array/src/every.js","webpack://voronoi/./node_modules/d3-array/src/some.js","webpack://voronoi/./node_modules/d3-array/src/filter.js","webpack://voronoi/./node_modules/d3-array/src/map.js","webpack://voronoi/./node_modules/d3-array/src/reduce.js","webpack://voronoi/./node_modules/d3-array/src/reverse.js","webpack://voronoi/./node_modules/d3-array/src/difference.js","webpack://voronoi/./node_modules/d3-array/src/disjoint.js","webpack://voronoi/./node_modules/d3-array/src/intersection.js","webpack://voronoi/./node_modules/d3-array/src/superset.js","webpack://voronoi/./node_modules/d3-array/src/subset.js","webpack://voronoi/./node_modules/d3-array/src/union.js","webpack://voronoi/./node_modules/d3-axis/src/identity.js","webpack://voronoi/./node_modules/d3-axis/src/axis.js","webpack://voronoi/./node_modules/d3-dispatch/src/dispatch.js","webpack://voronoi/./node_modules/d3-selection/src/selector.js","webpack://voronoi/./node_modules/d3-selection/src/array.js","webpack://voronoi/./node_modules/d3-selection/src/selectorAll.js","webpack://voronoi/./node_modules/d3-selection/src/matcher.js","webpack://voronoi/./node_modules/d3-selection/src/selection/selectChild.js","webpack://voronoi/./node_modules/d3-selection/src/selection/selectChildren.js","webpack://voronoi/./node_modules/d3-selection/src/selection/sparse.js","webpack://voronoi/./node_modules/d3-selection/src/selection/enter.js","webpack://voronoi/./node_modules/d3-selection/src/selection/data.js","webpack://voronoi/./node_modules/d3-selection/src/selection/sort.js","webpack://voronoi/./node_modules/d3-selection/src/namespaces.js","webpack://voronoi/./node_modules/d3-selection/src/namespace.js","webpack://voronoi/./node_modules/d3-selection/src/selection/attr.js","webpack://voronoi/./node_modules/d3-selection/src/window.js","webpack://voronoi/./node_modules/d3-selection/src/selection/style.js","webpack://voronoi/./node_modules/d3-selection/src/selection/property.js","webpack://voronoi/./node_modules/d3-selection/src/selection/classed.js","webpack://voronoi/./node_modules/d3-selection/src/selection/text.js","webpack://voronoi/./node_modules/d3-selection/src/selection/html.js","webpack://voronoi/./node_modules/d3-selection/src/selection/raise.js","webpack://voronoi/./node_modules/d3-selection/src/selection/lower.js","webpack://voronoi/./node_modules/d3-selection/src/creator.js","webpack://voronoi/./node_modules/d3-selection/src/selection/insert.js","webpack://voronoi/./node_modules/d3-selection/src/selection/remove.js","webpack://voronoi/./node_modules/d3-selection/src/selection/clone.js","webpack://voronoi/./node_modules/d3-selection/src/selection/on.js","webpack://voronoi/./node_modules/d3-selection/src/selection/dispatch.js","webpack://voronoi/./node_modules/d3-selection/src/selection/index.js","webpack://voronoi/./node_modules/d3-selection/src/selection/select.js","webpack://voronoi/./node_modules/d3-selection/src/selection/selectAll.js","webpack://voronoi/./node_modules/d3-selection/src/selection/filter.js","webpack://voronoi/./node_modules/d3-selection/src/constant.js","webpack://voronoi/./node_modules/d3-selection/src/selection/exit.js","webpack://voronoi/./node_modules/d3-selection/src/selection/join.js","webpack://voronoi/./node_modules/d3-selection/src/selection/merge.js","webpack://voronoi/./node_modules/d3-selection/src/selection/order.js","webpack://voronoi/./node_modules/d3-selection/src/selection/call.js","webpack://voronoi/./node_modules/d3-selection/src/selection/nodes.js","webpack://voronoi/./node_modules/d3-selection/src/selection/node.js","webpack://voronoi/./node_modules/d3-selection/src/selection/size.js","webpack://voronoi/./node_modules/d3-selection/src/selection/empty.js","webpack://voronoi/./node_modules/d3-selection/src/selection/each.js","webpack://voronoi/./node_modules/d3-selection/src/selection/append.js","webpack://voronoi/./node_modules/d3-selection/src/selection/datum.js","webpack://voronoi/./node_modules/d3-selection/src/selection/iterator.js","webpack://voronoi/./node_modules/d3-selection/src/select.js","webpack://voronoi/./node_modules/d3-drag/src/noevent.js","webpack://voronoi/./node_modules/d3-drag/src/nodrag.js","webpack://voronoi/./node_modules/d3-color/src/define.js","webpack://voronoi/./node_modules/d3-color/src/color.js","webpack://voronoi/./node_modules/d3-interpolate/src/basis.js","webpack://voronoi/./node_modules/d3-interpolate/src/basisClosed.js","webpack://voronoi/./node_modules/d3-interpolate/src/constant.js","webpack://voronoi/./node_modules/d3-interpolate/src/color.js","webpack://voronoi/./node_modules/d3-interpolate/src/rgb.js","webpack://voronoi/./node_modules/d3-interpolate/src/numberArray.js","webpack://voronoi/./node_modules/d3-interpolate/src/array.js","webpack://voronoi/./node_modules/d3-interpolate/src/date.js","webpack://voronoi/./node_modules/d3-interpolate/src/number.js","webpack://voronoi/./node_modules/d3-interpolate/src/object.js","webpack://voronoi/./node_modules/d3-interpolate/src/string.js","webpack://voronoi/./node_modules/d3-interpolate/src/value.js","webpack://voronoi/./node_modules/d3-selection/src/sourceEvent.js","webpack://voronoi/./node_modules/d3-selection/src/pointer.js","webpack://voronoi/./node_modules/d3-timer/src/timer.js","webpack://voronoi/./node_modules/d3-timer/src/timeout.js","webpack://voronoi/./node_modules/d3-transition/src/transition/schedule.js","webpack://voronoi/./node_modules/d3-transition/src/interrupt.js","webpack://voronoi/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://voronoi/./node_modules/d3-interpolate/src/transform/parse.js","webpack://voronoi/./node_modules/d3-interpolate/src/transform/index.js","webpack://voronoi/./node_modules/d3-transition/src/transition/tween.js","webpack://voronoi/./node_modules/d3-transition/src/transition/interpolate.js","webpack://voronoi/./node_modules/d3-transition/src/transition/attr.js","webpack://voronoi/./node_modules/d3-transition/src/transition/attrTween.js","webpack://voronoi/./node_modules/d3-transition/src/transition/delay.js","webpack://voronoi/./node_modules/d3-transition/src/transition/duration.js","webpack://voronoi/./node_modules/d3-transition/src/transition/selection.js","webpack://voronoi/./node_modules/d3-transition/src/transition/style.js","webpack://voronoi/./node_modules/d3-transition/src/transition/index.js","webpack://voronoi/./node_modules/d3-ease/src/cubic.js","webpack://voronoi/./node_modules/d3-transition/src/transition/select.js","webpack://voronoi/./node_modules/d3-transition/src/transition/selectAll.js","webpack://voronoi/./node_modules/d3-transition/src/transition/filter.js","webpack://voronoi/./node_modules/d3-transition/src/transition/merge.js","webpack://voronoi/./node_modules/d3-transition/src/transition/transition.js","webpack://voronoi/./node_modules/d3-transition/src/transition/on.js","webpack://voronoi/./node_modules/d3-transition/src/transition/styleTween.js","webpack://voronoi/./node_modules/d3-transition/src/transition/text.js","webpack://voronoi/./node_modules/d3-transition/src/transition/textTween.js","webpack://voronoi/./node_modules/d3-transition/src/transition/remove.js","webpack://voronoi/./node_modules/d3-transition/src/transition/ease.js","webpack://voronoi/./node_modules/d3-transition/src/transition/easeVarying.js","webpack://voronoi/./node_modules/d3-transition/src/transition/end.js","webpack://voronoi/./node_modules/d3-transition/src/selection/transition.js","webpack://voronoi/./node_modules/d3-transition/src/selection/index.js","webpack://voronoi/./node_modules/d3-transition/src/selection/interrupt.js","webpack://voronoi/./node_modules/d3-transition/src/active.js","webpack://voronoi/./node_modules/d3-brush/src/constant.js","webpack://voronoi/./node_modules/d3-brush/src/event.js","webpack://voronoi/./node_modules/d3-brush/src/noevent.js","webpack://voronoi/./node_modules/d3-brush/src/brush.js","webpack://voronoi/./node_modules/d3-chord/src/math.js","webpack://voronoi/./node_modules/d3-chord/src/chord.js","webpack://voronoi/./node_modules/d3-path/src/path.js","webpack://voronoi/./node_modules/d3-chord/src/array.js","webpack://voronoi/./node_modules/d3-chord/src/constant.js","webpack://voronoi/./node_modules/d3-chord/src/ribbon.js","webpack://voronoi/./node_modules/d3-color/src/math.js","webpack://voronoi/./node_modules/d3-color/src/lab.js","webpack://voronoi/./node_modules/d3-color/src/cubehelix.js","webpack://voronoi/./node_modules/d3-contour/src/array.js","webpack://voronoi/./node_modules/d3-contour/src/ascending.js","webpack://voronoi/./node_modules/d3-contour/src/constant.js","webpack://voronoi/./node_modules/d3-contour/src/contains.js","webpack://voronoi/./node_modules/d3-contour/src/noop.js","webpack://voronoi/./node_modules/d3-contour/src/contours.js","webpack://voronoi/./node_modules/d3-contour/src/area.js","webpack://voronoi/./node_modules/d3-contour/src/density.js","webpack://voronoi/./node_modules/robust-predicates/esm/util.js","webpack://voronoi/./node_modules/robust-predicates/esm/orient2d.js","webpack://voronoi/./node_modules/robust-predicates/esm/orient3d.js","webpack://voronoi/./node_modules/robust-predicates/esm/incircle.js","webpack://voronoi/./node_modules/robust-predicates/esm/insphere.js","webpack://voronoi/./node_modules/delaunator/index.js","webpack://voronoi/./node_modules/d3-delaunay/src/path.js","webpack://voronoi/./node_modules/d3-delaunay/src/polygon.js","webpack://voronoi/./node_modules/d3-delaunay/src/voronoi.js","webpack://voronoi/./node_modules/d3-delaunay/src/delaunay.js","webpack://voronoi/./node_modules/d3-drag/src/constant.js","webpack://voronoi/./node_modules/d3-drag/src/event.js","webpack://voronoi/./node_modules/d3-drag/src/drag.js","webpack://voronoi/./node_modules/d3-dsv/src/dsv.js","webpack://voronoi/./node_modules/d3-dsv/src/csv.js","webpack://voronoi/./node_modules/d3-dsv/src/tsv.js","webpack://voronoi/./node_modules/d3-dsv/src/autoType.js","webpack://voronoi/./node_modules/d3-ease/src/linear.js","webpack://voronoi/./node_modules/d3-ease/src/quad.js","webpack://voronoi/./node_modules/d3-ease/src/poly.js","webpack://voronoi/./node_modules/d3-ease/src/sin.js","webpack://voronoi/./node_modules/d3-ease/src/math.js","webpack://voronoi/./node_modules/d3-ease/src/exp.js","webpack://voronoi/./node_modules/d3-ease/src/circle.js","webpack://voronoi/./node_modules/d3-ease/src/bounce.js","webpack://voronoi/./node_modules/d3-ease/src/back.js","webpack://voronoi/./node_modules/d3-ease/src/elastic.js","webpack://voronoi/./node_modules/d3-fetch/src/blob.js","webpack://voronoi/./node_modules/d3-fetch/src/buffer.js","webpack://voronoi/./node_modules/d3-fetch/src/text.js","webpack://voronoi/./node_modules/d3-fetch/src/dsv.js","webpack://voronoi/./node_modules/d3-fetch/src/image.js","webpack://voronoi/./node_modules/d3-fetch/src/json.js","webpack://voronoi/./node_modules/d3-fetch/src/xml.js","webpack://voronoi/./node_modules/d3-force/src/center.js","webpack://voronoi/./node_modules/d3-quadtree/src/add.js","webpack://voronoi/./node_modules/d3-quadtree/src/quad.js","webpack://voronoi/./node_modules/d3-quadtree/src/x.js","webpack://voronoi/./node_modules/d3-quadtree/src/y.js","webpack://voronoi/./node_modules/d3-quadtree/src/quadtree.js","webpack://voronoi/./node_modules/d3-force/src/constant.js","webpack://voronoi/./node_modules/d3-force/src/jiggle.js","webpack://voronoi/./node_modules/d3-force/src/collide.js","webpack://voronoi/./node_modules/d3-force/src/link.js","webpack://voronoi/./node_modules/d3-quadtree/src/cover.js","webpack://voronoi/./node_modules/d3-quadtree/src/data.js","webpack://voronoi/./node_modules/d3-quadtree/src/extent.js","webpack://voronoi/./node_modules/d3-quadtree/src/find.js","webpack://voronoi/./node_modules/d3-quadtree/src/remove.js","webpack://voronoi/./node_modules/d3-quadtree/src/root.js","webpack://voronoi/./node_modules/d3-quadtree/src/size.js","webpack://voronoi/./node_modules/d3-quadtree/src/visit.js","webpack://voronoi/./node_modules/d3-quadtree/src/visitAfter.js","webpack://voronoi/./node_modules/d3-force/src/lcg.js","webpack://voronoi/./node_modules/d3-force/src/simulation.js","webpack://voronoi/./node_modules/d3-force/src/manyBody.js","webpack://voronoi/./node_modules/d3-force/src/radial.js","webpack://voronoi/./node_modules/d3-force/src/x.js","webpack://voronoi/./node_modules/d3-force/src/y.js","webpack://voronoi/./node_modules/d3-format/src/formatDecimal.js","webpack://voronoi/./node_modules/d3-format/src/exponent.js","webpack://voronoi/./node_modules/d3-format/src/formatSpecifier.js","webpack://voronoi/./node_modules/d3-format/src/formatPrefixAuto.js","webpack://voronoi/./node_modules/d3-format/src/formatRounded.js","webpack://voronoi/./node_modules/d3-format/src/formatTypes.js","webpack://voronoi/./node_modules/d3-format/src/identity.js","webpack://voronoi/./node_modules/d3-format/src/locale.js","webpack://voronoi/./node_modules/d3-format/src/defaultLocale.js","webpack://voronoi/./node_modules/d3-format/src/formatGroup.js","webpack://voronoi/./node_modules/d3-format/src/formatNumerals.js","webpack://voronoi/./node_modules/d3-format/src/formatTrim.js","webpack://voronoi/./node_modules/d3-format/src/precisionFixed.js","webpack://voronoi/./node_modules/d3-format/src/precisionPrefix.js","webpack://voronoi/./node_modules/d3-format/src/precisionRound.js","webpack://voronoi/./node_modules/d3-geo/src/math.js","webpack://voronoi/./node_modules/d3-geo/src/noop.js","webpack://voronoi/./node_modules/d3-geo/src/stream.js","webpack://voronoi/./node_modules/d3-geo/src/area.js","webpack://voronoi/./node_modules/d3-geo/src/bounds.js","webpack://voronoi/./node_modules/d3-geo/src/cartesian.js","webpack://voronoi/./node_modules/d3-geo/src/centroid.js","webpack://voronoi/./node_modules/d3-geo/src/constant.js","webpack://voronoi/./node_modules/d3-geo/src/compose.js","webpack://voronoi/./node_modules/d3-geo/src/rotation.js","webpack://voronoi/./node_modules/d3-geo/src/circle.js","webpack://voronoi/./node_modules/d3-geo/src/clip/buffer.js","webpack://voronoi/./node_modules/d3-geo/src/pointEqual.js","webpack://voronoi/./node_modules/d3-geo/src/clip/rejoin.js","webpack://voronoi/./node_modules/d3-geo/src/polygonContains.js","webpack://voronoi/./node_modules/d3-geo/src/clip/index.js","webpack://voronoi/./node_modules/d3-geo/src/clip/antimeridian.js","webpack://voronoi/./node_modules/d3-geo/src/clip/circle.js","webpack://voronoi/./node_modules/d3-geo/src/clip/rectangle.js","webpack://voronoi/./node_modules/d3-geo/src/length.js","webpack://voronoi/./node_modules/d3-geo/src/clip/line.js","webpack://voronoi/./node_modules/d3-geo/src/clip/extent.js","webpack://voronoi/./node_modules/d3-geo/src/distance.js","webpack://voronoi/./node_modules/d3-geo/src/contains.js","webpack://voronoi/./node_modules/d3-geo/src/graticule.js","webpack://voronoi/./node_modules/d3-geo/src/interpolate.js","webpack://voronoi/./node_modules/d3-geo/src/identity.js","webpack://voronoi/./node_modules/d3-geo/src/path/area.js","webpack://voronoi/./node_modules/d3-geo/src/path/bounds.js","webpack://voronoi/./node_modules/d3-geo/src/path/centroid.js","webpack://voronoi/./node_modules/d3-geo/src/path/context.js","webpack://voronoi/./node_modules/d3-geo/src/path/measure.js","webpack://voronoi/./node_modules/d3-geo/src/path/string.js","webpack://voronoi/./node_modules/d3-geo/src/path/index.js","webpack://voronoi/./node_modules/d3-geo/src/transform.js","webpack://voronoi/./node_modules/d3-geo/src/projection/fit.js","webpack://voronoi/./node_modules/d3-geo/src/projection/resample.js","webpack://voronoi/./node_modules/d3-geo/src/projection/index.js","webpack://voronoi/./node_modules/d3-geo/src/projection/conic.js","webpack://voronoi/./node_modules/d3-geo/src/projection/conicEqualArea.js","webpack://voronoi/./node_modules/d3-geo/src/projection/cylindricalEqualArea.js","webpack://voronoi/./node_modules/d3-geo/src/projection/albers.js","webpack://voronoi/./node_modules/d3-geo/src/projection/albersUsa.js","webpack://voronoi/./node_modules/d3-geo/src/projection/azimuthal.js","webpack://voronoi/./node_modules/d3-geo/src/projection/azimuthalEqualArea.js","webpack://voronoi/./node_modules/d3-geo/src/projection/azimuthalEquidistant.js","webpack://voronoi/./node_modules/d3-geo/src/projection/mercator.js","webpack://voronoi/./node_modules/d3-geo/src/projection/conicConformal.js","webpack://voronoi/./node_modules/d3-geo/src/projection/equirectangular.js","webpack://voronoi/./node_modules/d3-geo/src/projection/conicEquidistant.js","webpack://voronoi/./node_modules/d3-geo/src/projection/equalEarth.js","webpack://voronoi/./node_modules/d3-geo/src/projection/gnomonic.js","webpack://voronoi/./node_modules/d3-geo/src/projection/identity.js","webpack://voronoi/./node_modules/d3-geo/src/projection/naturalEarth1.js","webpack://voronoi/./node_modules/d3-geo/src/projection/orthographic.js","webpack://voronoi/./node_modules/d3-geo/src/projection/stereographic.js","webpack://voronoi/./node_modules/d3-geo/src/projection/transverseMercator.js","webpack://voronoi/./node_modules/d3-hierarchy/src/cluster.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/count.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/index.js","webpack://voronoi/./node_modules/d3-hierarchy/src/accessors.js","webpack://voronoi/./node_modules/d3-hierarchy/src/constant.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/each.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/find.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/sum.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/sort.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/path.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/ancestors.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/descendants.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/leaves.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/links.js","webpack://voronoi/./node_modules/d3-hierarchy/src/hierarchy/iterator.js","webpack://voronoi/./node_modules/d3-hierarchy/src/lcg.js","webpack://voronoi/./node_modules/d3-hierarchy/src/pack/enclose.js","webpack://voronoi/./node_modules/d3-hierarchy/src/array.js","webpack://voronoi/./node_modules/d3-hierarchy/src/pack/siblings.js","webpack://voronoi/./node_modules/d3-hierarchy/src/pack/index.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/round.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/dice.js","webpack://voronoi/./node_modules/d3-hierarchy/src/partition.js","webpack://voronoi/./node_modules/d3-hierarchy/src/stratify.js","webpack://voronoi/./node_modules/d3-hierarchy/src/tree.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/slice.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/squarify.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/index.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/binary.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/sliceDice.js","webpack://voronoi/./node_modules/d3-hierarchy/src/treemap/resquarify.js","webpack://voronoi/./node_modules/d3-interpolate/src/discrete.js","webpack://voronoi/./node_modules/d3-interpolate/src/hue.js","webpack://voronoi/./node_modules/d3-interpolate/src/round.js","webpack://voronoi/./node_modules/d3-interpolate/src/zoom.js","webpack://voronoi/./node_modules/d3-interpolate/src/hsl.js","webpack://voronoi/./node_modules/d3-interpolate/src/lab.js","webpack://voronoi/./node_modules/d3-interpolate/src/hcl.js","webpack://voronoi/./node_modules/d3-interpolate/src/cubehelix.js","webpack://voronoi/./node_modules/d3-interpolate/src/piecewise.js","webpack://voronoi/./node_modules/d3-interpolate/src/quantize.js","webpack://voronoi/./node_modules/d3-polygon/src/area.js","webpack://voronoi/./node_modules/d3-polygon/src/centroid.js","webpack://voronoi/./node_modules/d3-polygon/src/cross.js","webpack://voronoi/./node_modules/d3-polygon/src/hull.js","webpack://voronoi/./node_modules/d3-polygon/src/contains.js","webpack://voronoi/./node_modules/d3-polygon/src/length.js","webpack://voronoi/./node_modules/d3-random/src/defaultSource.js","webpack://voronoi/./node_modules/d3-random/src/uniform.js","webpack://voronoi/./node_modules/d3-random/src/int.js","webpack://voronoi/./node_modules/d3-random/src/normal.js","webpack://voronoi/./node_modules/d3-random/src/logNormal.js","webpack://voronoi/./node_modules/d3-random/src/irwinHall.js","webpack://voronoi/./node_modules/d3-random/src/bates.js","webpack://voronoi/./node_modules/d3-random/src/exponential.js","webpack://voronoi/./node_modules/d3-random/src/pareto.js","webpack://voronoi/./node_modules/d3-random/src/bernoulli.js","webpack://voronoi/./node_modules/d3-random/src/geometric.js","webpack://voronoi/./node_modules/d3-random/src/gamma.js","webpack://voronoi/./node_modules/d3-random/src/beta.js","webpack://voronoi/./node_modules/d3-random/src/binomial.js","webpack://voronoi/./node_modules/d3-random/src/weibull.js","webpack://voronoi/./node_modules/d3-random/src/cauchy.js","webpack://voronoi/./node_modules/d3-random/src/logistic.js","webpack://voronoi/./node_modules/d3-random/src/poisson.js","webpack://voronoi/./node_modules/d3-random/src/lcg.js","webpack://voronoi/./node_modules/d3-scale/src/init.js","webpack://voronoi/./node_modules/d3-scale/src/ordinal.js","webpack://voronoi/./node_modules/d3-scale/src/band.js","webpack://voronoi/./node_modules/d3-scale/src/number.js","webpack://voronoi/./node_modules/d3-scale/src/continuous.js","webpack://voronoi/./node_modules/d3-scale/src/constant.js","webpack://voronoi/./node_modules/d3-scale/src/tickFormat.js","webpack://voronoi/./node_modules/d3-scale/src/linear.js","webpack://voronoi/./node_modules/d3-scale/src/identity.js","webpack://voronoi/./node_modules/d3-scale/src/nice.js","webpack://voronoi/./node_modules/d3-scale/src/log.js","webpack://voronoi/./node_modules/d3-scale/src/symlog.js","webpack://voronoi/./node_modules/d3-scale/src/pow.js","webpack://voronoi/./node_modules/d3-scale/src/radial.js","webpack://voronoi/./node_modules/d3-scale/src/quantile.js","webpack://voronoi/./node_modules/d3-scale/src/quantize.js","webpack://voronoi/./node_modules/d3-scale/src/threshold.js","webpack://voronoi/./node_modules/d3-time/src/duration.js","webpack://voronoi/./node_modules/d3-time/src/interval.js","webpack://voronoi/./node_modules/d3-time/src/millisecond.js","webpack://voronoi/./node_modules/d3-time/src/second.js","webpack://voronoi/./node_modules/d3-time/src/minute.js","webpack://voronoi/./node_modules/d3-time/src/hour.js","webpack://voronoi/./node_modules/d3-time/src/day.js","webpack://voronoi/./node_modules/d3-time/src/week.js","webpack://voronoi/./node_modules/d3-time/src/month.js","webpack://voronoi/./node_modules/d3-time/src/year.js","webpack://voronoi/./node_modules/d3-time/src/ticks.js","webpack://voronoi/./node_modules/d3-time-format/src/locale.js","webpack://voronoi/./node_modules/d3-time-format/src/defaultLocale.js","webpack://voronoi/./node_modules/d3-scale/src/time.js","webpack://voronoi/./node_modules/d3-scale/src/utcTime.js","webpack://voronoi/./node_modules/d3-scale/src/sequential.js","webpack://voronoi/./node_modules/d3-scale/src/sequentialQuantile.js","webpack://voronoi/./node_modules/d3-scale/src/diverging.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/colors.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/observable10.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/categorical/Tableau10.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/ramp.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js","webpack://voronoi/./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://voronoi/./node_modules/d3-selection/src/create.js","webpack://voronoi/./node_modules/d3-selection/src/local.js","webpack://voronoi/./node_modules/d3-selection/src/pointers.js","webpack://voronoi/./node_modules/d3-selection/src/selectAll.js","webpack://voronoi/./node_modules/d3-shape/src/constant.js","webpack://voronoi/./node_modules/d3-shape/src/math.js","webpack://voronoi/./node_modules/d3-shape/src/path.js","webpack://voronoi/./node_modules/d3-shape/src/arc.js","webpack://voronoi/./node_modules/d3-shape/src/array.js","webpack://voronoi/./node_modules/d3-shape/src/curve/linear.js","webpack://voronoi/./node_modules/d3-shape/src/point.js","webpack://voronoi/./node_modules/d3-shape/src/line.js","webpack://voronoi/./node_modules/d3-shape/src/area.js","webpack://voronoi/./node_modules/d3-shape/src/descending.js","webpack://voronoi/./node_modules/d3-shape/src/identity.js","webpack://voronoi/./node_modules/d3-shape/src/pie.js","webpack://voronoi/./node_modules/d3-shape/src/curve/radial.js","webpack://voronoi/./node_modules/d3-shape/src/lineRadial.js","webpack://voronoi/./node_modules/d3-shape/src/areaRadial.js","webpack://voronoi/./node_modules/d3-shape/src/pointRadial.js","webpack://voronoi/./node_modules/d3-shape/src/curve/bump.js","webpack://voronoi/./node_modules/d3-shape/src/link.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/asterisk.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/circle.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/cross.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/diamond.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/diamond2.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/plus.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/square.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/square2.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/star.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/triangle.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/triangle2.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/wye.js","webpack://voronoi/./node_modules/d3-shape/src/symbol/times.js","webpack://voronoi/./node_modules/d3-shape/src/symbol.js","webpack://voronoi/./node_modules/d3-shape/src/noop.js","webpack://voronoi/./node_modules/d3-shape/src/curve/basis.js","webpack://voronoi/./node_modules/d3-shape/src/curve/basisClosed.js","webpack://voronoi/./node_modules/d3-shape/src/curve/basisOpen.js","webpack://voronoi/./node_modules/d3-shape/src/curve/bundle.js","webpack://voronoi/./node_modules/d3-shape/src/curve/cardinal.js","webpack://voronoi/./node_modules/d3-shape/src/curve/cardinalClosed.js","webpack://voronoi/./node_modules/d3-shape/src/curve/cardinalOpen.js","webpack://voronoi/./node_modules/d3-shape/src/curve/catmullRom.js","webpack://voronoi/./node_modules/d3-shape/src/curve/catmullRomClosed.js","webpack://voronoi/./node_modules/d3-shape/src/curve/catmullRomOpen.js","webpack://voronoi/./node_modules/d3-shape/src/curve/linearClosed.js","webpack://voronoi/./node_modules/d3-shape/src/curve/monotone.js","webpack://voronoi/./node_modules/d3-shape/src/curve/natural.js","webpack://voronoi/./node_modules/d3-shape/src/curve/step.js","webpack://voronoi/./node_modules/d3-shape/src/offset/none.js","webpack://voronoi/./node_modules/d3-shape/src/order/none.js","webpack://voronoi/./node_modules/d3-shape/src/stack.js","webpack://voronoi/./node_modules/d3-shape/src/offset/expand.js","webpack://voronoi/./node_modules/d3-shape/src/offset/diverging.js","webpack://voronoi/./node_modules/d3-shape/src/offset/silhouette.js","webpack://voronoi/./node_modules/d3-shape/src/offset/wiggle.js","webpack://voronoi/./node_modules/d3-shape/src/order/appearance.js","webpack://voronoi/./node_modules/d3-shape/src/order/ascending.js","webpack://voronoi/./node_modules/d3-shape/src/order/descending.js","webpack://voronoi/./node_modules/d3-shape/src/order/insideOut.js","webpack://voronoi/./node_modules/d3-shape/src/order/reverse.js","webpack://voronoi/./node_modules/d3-time-format/src/isoFormat.js","webpack://voronoi/./node_modules/d3-time-format/src/isoParse.js","webpack://voronoi/./node_modules/d3-timer/src/interval.js","webpack://voronoi/./node_modules/d3-zoom/src/constant.js","webpack://voronoi/./node_modules/d3-zoom/src/event.js","webpack://voronoi/./node_modules/d3-zoom/src/transform.js","webpack://voronoi/./node_modules/d3-zoom/src/noevent.js","webpack://voronoi/./node_modules/d3-zoom/src/zoom.js","webpack://voronoi/webpack/bootstrap","webpack://voronoi/webpack/runtime/compat get default export","webpack://voronoi/webpack/runtime/define property getters","webpack://voronoi/webpack/runtime/global","webpack://voronoi/webpack/runtime/hasOwnProperty shorthand","webpack://voronoi/webpack/runtime/make namespace object","webpack://voronoi/webpack/runtime/nonce","webpack://voronoi/webpack/startup"],"sourcesContent":["var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tooltip {\r\n    position: absolute;\r\n    background: rgba(106, 102, 102, 0.8);\r\n    color: white;\r\n    padding: 5px 10px;\r\n    border-radius: 5px;\r\n    font-size: 14px;\r\n    pointer-events: none;\r\n    visibility: hidden;\r\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.cell {\r\n    stroke: #ccc;\r\n    stroke-width: 1px;\r\n}\r\n\r\ninput[type=\"file\"] {\r\n    display: none; /* Hide the file input */\r\n}\r\n\r\n.canvas-container {\r\n    text-align: center;  /* Center align the canvas */\r\n    margin-bottom: 10px; /* Space between canvas and checkboxes */\r\n}\r\n\r\n#voronoi-wrapper {\r\n    display: flex;\r\n    flex-direction: column; /* Stack the Voronoi canvas and checkboxes vertically */\r\n    align-items: flex-start; /* Align to the left */\r\n}\r\n\r\n.controls {\r\n    text-align: center;  /* Center the checkboxes */\r\n    margin-top: 10px;    /* Space from the canvas */\r\n    font-size: 16px;     /* Make checkboxes easier to read */\r\n}\r\n.controls label {\r\n    display: block;  /* Each checkbox on a new line */\r\n    margin: 5px 0;\r\n}\r\n\r\n.variance-box {\r\n    margin-top: 10px;\r\n    padding: 8px;\r\n    /*font-size: 12px;*/\r\n    font-weight: bold;\r\n    width: 80%;\r\n}\r\n\r\n.peak-box {\r\n    margin-top: 10px;\r\n    padding: 8px;\r\n    /*font-size: 12px;*/\r\n    font-weight: bold;\r\n    width: 80%;\r\n}\r\n\r\n.legend text {\r\n    font-size: 10px;\r\n}\r\n\r\n.legend {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 20px;\r\n    margin-bottom: 20px;\r\n}\r\n.legend-item {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-right: 15px;\r\n}\r\n.legend-rect {\r\n    width: 20px;\r\n    height: 20px;\r\n    margin-right: 5px;\r\n}\r\n\r\n#main-container {\r\n    display: flex;\r\n    justify-content: left;\r\n    gap: 20px;\r\n}\r\n\r\n#voronoi-container {\r\n    border: 2px solid #ccc;\r\n    padding: 10px;\r\n}\r\n\r\n#barchart-container {\r\n    border: 2px solid #ccc;\r\n    padding: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n#settings-container {\r\n    justify-content: stretch;\r\n    width: 100%;\r\n}\r\n\r\n.slider-container {\r\n    position: relative;\r\n    width: 700px;\r\n}\r\n\r\n/* Style the slider track */\r\ninput[type=\"range\"] {\r\n    -webkit-appearance: none; /* Remove default styling */\r\n    appearance: none;\r\n    width: 700px;\r\n    height: 10px; /* Track thickness */\r\n    background: #ddd;\r\n    outline: none;\r\n    opacity: 0.9;\r\n    border-radius: 0; /* Remove round edges */\r\n    margin-top: 10px;\r\n}\r\n\r\n/* Square thumb (Chrome, Safari, Edge) */\r\ninput[type=\"range\"]::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    appearance: none;\r\n    width: 20px; /* Thumb size */\r\n    height: 20px;\r\n    background: steelblue;\r\n    cursor: pointer;\r\n    border-radius: 0; /* Square shape */\r\n}\r\n\r\n/* Square thumb (Firefox) */\r\ninput[type=\"range\"]::-moz-range-thumb {\r\n    width: 20px;\r\n    height: 20px;\r\n    background: steelblue;\r\n    cursor: pointer;\r\n    border-radius: 0;\r\n}\r\n\r\ninput[type=\"range\"]:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n}\r\n\r\n.slider-end {\r\n    padding: 0px;\r\n    margin-top: 5px;\r\n    /*text-align: center;*/\r\n}\r\n\r\n.gen-container {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    margin-top: 10px;    /* Space from the canvas */\r\n    gap: 10px;\r\n}\r\n\r\n/*.slider-tooltip {*/\r\n/*    position: absolute;*/\r\n/*    top: -20px;*/\r\n/*    left: 0%;*/\r\n/*    transform: translateX(-50%);*/\r\n/*    background: #007bff;*/\r\n/*    color: #fff;*/\r\n/*    padding: 5px 10px;*/\r\n/*    border-radius: 5px;*/\r\n/*    font-size: 11px;*/\r\n/*    white-space: nowrap;*/\r\n/*}*/\r\n\r\n/* Display slider value */\r\n#sliderValue {\r\n    font-size: 18px;\r\n    margin-left: 10px;\r\n}\r\n\r\n.context-menu {\r\n    position: absolute;\r\n    background: white;\r\n    border: 1px solid gray;\r\n    display: none;\r\n    z-index: 1000;\r\n    padding: 0;\r\n    list-style: none;\r\n    box-shadow: 2px 2px 5px rgba(0,0,0,0.3);\r\n}\r\n/*.context-menu ul {*/\r\n/*    margin: 0;*/\r\n/*    padding: 0;*/\r\n/*}*/\r\n\r\n#context-menu li {\r\n    padding: 8px 12px;\r\n    cursor: pointer;\r\n}\r\n.context-menu li:hover {\r\n    background: lightgray;\r\n}\r\n\r\n.min-linelength {\r\n    margin-left: 150px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.min-crossdistance {\r\n    margin-left: 89px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.min-vertex {\r\n    margin-left: 14px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.pathfinder-menu {\r\n    margin-left: 44px;\r\n    margin-right: 2px;\r\n    margin-bottom: 10px;\r\n    margin-top: 20px;\r\n    width: 72px;\r\n    height: 20px;\r\n}\r\n\r\n.tabs {\r\n    display: flex;\r\n    cursor: pointer;\r\n    margin-bottom: 1em;\r\n}\r\n.tab {\r\n    padding: 5px 10px;\r\n    font-size: 12pt;\r\n    background-color: #eee;\r\n    border: 1px solid #ccc;\r\n    margin-right: 5px;\r\n    border-radius: 5px 5px 0 0;\r\n}\r\n.tab.active {\r\n    background-color: #fff;\r\n    border-bottom: none;\r\n}\r\n.tab-content {\r\n    /*border: 1px solid #ccc;*/\r\n    padding: 0px;\r\n    display: none;\r\n    /*border-radius: 0 5px 5px 5px;*/\r\n}\r\n.tab-content.active {\r\n    display: block;\r\n}\r\n\r\n@keyframes pulse-warning {\r\n    0% { background-color: #e68320; }\r\n    50% { background-color: #f1b979; } /* lighter orange */\r\n    100% { background-color: #e68320; }\r\n}\r\n\r\n.tab-warning {\r\n    animation: pulse-warning 1.0s ease-in-out infinite;\r\n    transition: background-color 0.5s ease;\r\n    color: white; /* or your preferred text color */\r\n}\r\n\r\n/*.tab-warning {*/\r\n/*    background-color: #e68320;*/\r\n/*    color: white;*/\r\n/*}*/\r\n\r\n/* Optional: separation between components */\r\n.tab-container {\r\n    margin-bottom: 0px;\r\n}\r\n\r\n.voronoi-point {\r\n    cursor: move;\r\n}\r\n\r\n.graphcontrol-point {\r\n    cursor: move;\r\n}\r\n\r\n.edit-vertex {\r\n    cursor: move;\r\n}\r\n\r\n.clipping-vertex {\r\n    cursor: move;\r\n}\r\n\r\n.wind-vector {\r\n    stroke-width: 1.5;\r\n    marker-end: url(#arrow);\r\n}\r\n\r\ntextarea {\r\n    /*font-family: 'Courier New', Courier, monospace;*/\r\n    font-size: 14px;\r\n    background-color: #efefef;\r\n    color: #6c6767;\r\n    border: 2px solid #afb1af;\r\n    padding: 10px;\r\n    resize: none;\r\n    width: 500px;\r\n    height: 200px;\r\n    overflow-y: scroll;\r\n    white-space: pre-wrap;\r\n    line-height: 1.4em;\r\n}\r\n\r\n#oz-confirm-dialog {\r\n    border: 2px solid #aaa;\r\n    padding: 10px;\r\n    width: 500px;\r\n    min-height: 100px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    background-color: #fff;\r\n    transition: opacity 0.3s ease;\r\n    opacity: 1;\r\n}\r\n\r\n.oz-dialog-message,\r\n.oz-dialog-buttons {\r\n    display: none;\r\n}\r\n\r\n#oz-confirm-dialog.active .oz-dialog-message,\r\n#oz-confirm-dialog.active .oz-dialog-buttons {\r\n    display: block;\r\n    font-family: monospace;\r\n    font-size: 14px;\r\n}\r\n\r\n/* Fading out */\r\n#oz-confirm-dialog.fade-out {\r\n    opacity: 0;\r\n}\r\n\r\n#oz-confirm-dialog.fade-in {\r\n    opacity: 0;\r\n}\r\n#oz-confirm-dialog.active.fade-in {\r\n    opacity: 1;\r\n    transition: opacity 0.3s ease;\r\n}\r\n\r\n/*#oz-confirm-dialog {*/\r\n/*    display: none;*/\r\n/*    position: fixed;*/\r\n/*    width: 500px;*/\r\n/*    !*top: 0%; left: 0%;*!*/\r\n/*    !*transform: translate(-50%, -50%);*!*/\r\n/*    background: #ffffff;*/\r\n/*    border: 2px solid #afb1af;*/\r\n/*    !*box-shadow: 0 4px 12px rgba(0,0,0,0.2);*!*/\r\n/*    padding: 10px;*/\r\n/*    !*z-index: 9999;*!*/\r\n/*    font-family: monospace;*/\r\n/*    font-size: 14px;*/\r\n/*}*/\r\n\r\n/*#placeholder {*/\r\n/*    position: fixed;*/\r\n/*    width: 500px;*/\r\n/*    height: 50px;*/\r\n/*    !*top: 50%; left: 50%;*!*/\r\n/*    !*transform: translate(-50%, -50%);*!*/\r\n/*    background: #ffffff;*/\r\n/*    padding: 10px;*/\r\n/*    border: 2px solid #afb1af;*/\r\n/*}*/`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/styles.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".tooltip {\\r\\n    position: absolute;\\r\\n    background: rgba(106, 102, 102, 0.8);\\r\\n    color: white;\\r\\n    padding: 5px 10px;\\r\\n    border-radius: 5px;\\r\\n    font-size: 14px;\\r\\n    pointer-events: none;\\r\\n    visibility: hidden;\\r\\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.cell {\\r\\n    stroke: #ccc;\\r\\n    stroke-width: 1px;\\r\\n}\\r\\n\\r\\ninput[type=\\\"file\\\"] {\\r\\n    display: none; /* Hide the file input */\\r\\n}\\r\\n\\r\\n.canvas-container {\\r\\n    text-align: center;  /* Center align the canvas */\\r\\n    margin-bottom: 10px; /* Space between canvas and checkboxes */\\r\\n}\\r\\n\\r\\n#voronoi-wrapper {\\r\\n    display: flex;\\r\\n    flex-direction: column; /* Stack the Voronoi canvas and checkboxes vertically */\\r\\n    align-items: flex-start; /* Align to the left */\\r\\n}\\r\\n\\r\\n.controls {\\r\\n    text-align: center;  /* Center the checkboxes */\\r\\n    margin-top: 10px;    /* Space from the canvas */\\r\\n    font-size: 16px;     /* Make checkboxes easier to read */\\r\\n}\\r\\n.controls label {\\r\\n    display: block;  /* Each checkbox on a new line */\\r\\n    margin: 5px 0;\\r\\n}\\r\\n\\r\\n.variance-box {\\r\\n    margin-top: 10px;\\r\\n    padding: 8px;\\r\\n    /*font-size: 12px;*/\\r\\n    font-weight: bold;\\r\\n    width: 80%;\\r\\n}\\r\\n\\r\\n.peak-box {\\r\\n    margin-top: 10px;\\r\\n    padding: 8px;\\r\\n    /*font-size: 12px;*/\\r\\n    font-weight: bold;\\r\\n    width: 80%;\\r\\n}\\r\\n\\r\\n.legend text {\\r\\n    font-size: 10px;\\r\\n}\\r\\n\\r\\n.legend {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    margin-top: 20px;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n.legend-item {\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    margin-right: 15px;\\r\\n}\\r\\n.legend-rect {\\r\\n    width: 20px;\\r\\n    height: 20px;\\r\\n    margin-right: 5px;\\r\\n}\\r\\n\\r\\n#main-container {\\r\\n    display: flex;\\r\\n    justify-content: left;\\r\\n    gap: 20px;\\r\\n}\\r\\n\\r\\n#voronoi-container {\\r\\n    border: 2px solid #ccc;\\r\\n    padding: 10px;\\r\\n}\\r\\n\\r\\n#barchart-container {\\r\\n    border: 2px solid #ccc;\\r\\n    padding: 10px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n#settings-container {\\r\\n    justify-content: stretch;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.slider-container {\\r\\n    position: relative;\\r\\n    width: 700px;\\r\\n}\\r\\n\\r\\n/* Style the slider track */\\r\\ninput[type=\\\"range\\\"] {\\r\\n    -webkit-appearance: none; /* Remove default styling */\\r\\n    appearance: none;\\r\\n    width: 700px;\\r\\n    height: 10px; /* Track thickness */\\r\\n    background: #ddd;\\r\\n    outline: none;\\r\\n    opacity: 0.9;\\r\\n    border-radius: 0; /* Remove round edges */\\r\\n    margin-top: 10px;\\r\\n}\\r\\n\\r\\n/* Square thumb (Chrome, Safari, Edge) */\\r\\ninput[type=\\\"range\\\"]::-webkit-slider-thumb {\\r\\n    -webkit-appearance: none;\\r\\n    appearance: none;\\r\\n    width: 20px; /* Thumb size */\\r\\n    height: 20px;\\r\\n    background: steelblue;\\r\\n    cursor: pointer;\\r\\n    border-radius: 0; /* Square shape */\\r\\n}\\r\\n\\r\\n/* Square thumb (Firefox) */\\r\\ninput[type=\\\"range\\\"]::-moz-range-thumb {\\r\\n    width: 20px;\\r\\n    height: 20px;\\r\\n    background: steelblue;\\r\\n    cursor: pointer;\\r\\n    border-radius: 0;\\r\\n}\\r\\n\\r\\ninput[type=\\\"range\\\"]:disabled {\\r\\n    opacity: 0.5;\\r\\n    cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.slider-end {\\r\\n    padding: 0px;\\r\\n    margin-top: 5px;\\r\\n    /*text-align: center;*/\\r\\n}\\r\\n\\r\\n.gen-container {\\r\\n    display: flex;\\r\\n    align-items: flex-start;\\r\\n    margin-top: 10px;    /* Space from the canvas */\\r\\n    gap: 10px;\\r\\n}\\r\\n\\r\\n/*.slider-tooltip {*/\\r\\n/*    position: absolute;*/\\r\\n/*    top: -20px;*/\\r\\n/*    left: 0%;*/\\r\\n/*    transform: translateX(-50%);*/\\r\\n/*    background: #007bff;*/\\r\\n/*    color: #fff;*/\\r\\n/*    padding: 5px 10px;*/\\r\\n/*    border-radius: 5px;*/\\r\\n/*    font-size: 11px;*/\\r\\n/*    white-space: nowrap;*/\\r\\n/*}*/\\r\\n\\r\\n/* Display slider value */\\r\\n#sliderValue {\\r\\n    font-size: 18px;\\r\\n    margin-left: 10px;\\r\\n}\\r\\n\\r\\n.context-menu {\\r\\n    position: absolute;\\r\\n    background: white;\\r\\n    border: 1px solid gray;\\r\\n    display: none;\\r\\n    z-index: 1000;\\r\\n    padding: 0;\\r\\n    list-style: none;\\r\\n    box-shadow: 2px 2px 5px rgba(0,0,0,0.3);\\r\\n}\\r\\n/*.context-menu ul {*/\\r\\n/*    margin: 0;*/\\r\\n/*    padding: 0;*/\\r\\n/*}*/\\r\\n\\r\\n#context-menu li {\\r\\n    padding: 8px 12px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n.context-menu li:hover {\\r\\n    background: lightgray;\\r\\n}\\r\\n\\r\\n.min-linelength {\\r\\n    margin-left: 150px;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n.min-crossdistance {\\r\\n    margin-left: 89px;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n.min-vertex {\\r\\n    margin-left: 14px;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n.pathfinder-menu {\\r\\n    margin-left: 44px;\\r\\n    margin-right: 2px;\\r\\n    margin-bottom: 10px;\\r\\n    margin-top: 20px;\\r\\n    width: 72px;\\r\\n    height: 20px;\\r\\n}\\r\\n\\r\\n.tabs {\\r\\n    display: flex;\\r\\n    cursor: pointer;\\r\\n    margin-bottom: 1em;\\r\\n}\\r\\n.tab {\\r\\n    padding: 5px 10px;\\r\\n    font-size: 12pt;\\r\\n    background-color: #eee;\\r\\n    border: 1px solid #ccc;\\r\\n    margin-right: 5px;\\r\\n    border-radius: 5px 5px 0 0;\\r\\n}\\r\\n.tab.active {\\r\\n    background-color: #fff;\\r\\n    border-bottom: none;\\r\\n}\\r\\n.tab-content {\\r\\n    /*border: 1px solid #ccc;*/\\r\\n    padding: 0px;\\r\\n    display: none;\\r\\n    /*border-radius: 0 5px 5px 5px;*/\\r\\n}\\r\\n.tab-content.active {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n@keyframes pulse-warning {\\r\\n    0% { background-color: #e68320; }\\r\\n    50% { background-color: #f1b979; } /* lighter orange */\\r\\n    100% { background-color: #e68320; }\\r\\n}\\r\\n\\r\\n.tab-warning {\\r\\n    animation: pulse-warning 1.0s ease-in-out infinite;\\r\\n    transition: background-color 0.5s ease;\\r\\n    color: white; /* or your preferred text color */\\r\\n}\\r\\n\\r\\n/*.tab-warning {*/\\r\\n/*    background-color: #e68320;*/\\r\\n/*    color: white;*/\\r\\n/*}*/\\r\\n\\r\\n/* Optional: separation between components */\\r\\n.tab-container {\\r\\n    margin-bottom: 0px;\\r\\n}\\r\\n\\r\\n.voronoi-point {\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.graphcontrol-point {\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.edit-vertex {\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.clipping-vertex {\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.wind-vector {\\r\\n    stroke-width: 1.5;\\r\\n    marker-end: url(#arrow);\\r\\n}\\r\\n\\r\\ntextarea {\\r\\n    /*font-family: 'Courier New', Courier, monospace;*/\\r\\n    font-size: 14px;\\r\\n    background-color: #efefef;\\r\\n    color: #6c6767;\\r\\n    border: 2px solid #afb1af;\\r\\n    padding: 10px;\\r\\n    resize: none;\\r\\n    width: 500px;\\r\\n    height: 200px;\\r\\n    overflow-y: scroll;\\r\\n    white-space: pre-wrap;\\r\\n    line-height: 1.4em;\\r\\n}\\r\\n\\r\\n#oz-confirm-dialog {\\r\\n    border: 2px solid #aaa;\\r\\n    padding: 10px;\\r\\n    width: 500px;\\r\\n    min-height: 100px;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    justify-content: center;\\r\\n    background-color: #fff;\\r\\n    transition: opacity 0.3s ease;\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.oz-dialog-message,\\r\\n.oz-dialog-buttons {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n#oz-confirm-dialog.active .oz-dialog-message,\\r\\n#oz-confirm-dialog.active .oz-dialog-buttons {\\r\\n    display: block;\\r\\n    font-family: monospace;\\r\\n    font-size: 14px;\\r\\n}\\r\\n\\r\\n/* Fading out */\\r\\n#oz-confirm-dialog.fade-out {\\r\\n    opacity: 0;\\r\\n}\\r\\n\\r\\n#oz-confirm-dialog.fade-in {\\r\\n    opacity: 0;\\r\\n}\\r\\n#oz-confirm-dialog.active.fade-in {\\r\\n    opacity: 1;\\r\\n    transition: opacity 0.3s ease;\\r\\n}\\r\\n\\r\\n/*#oz-confirm-dialog {*/\\r\\n/*    display: none;*/\\r\\n/*    position: fixed;*/\\r\\n/*    width: 500px;*/\\r\\n/*    !*top: 0%; left: 0%;*!*/\\r\\n/*    !*transform: translate(-50%, -50%);*!*/\\r\\n/*    background: #ffffff;*/\\r\\n/*    border: 2px solid #afb1af;*/\\r\\n/*    !*box-shadow: 0 4px 12px rgba(0,0,0,0.2);*!*/\\r\\n/*    padding: 10px;*/\\r\\n/*    !*z-index: 9999;*!*/\\r\\n/*    font-family: monospace;*/\\r\\n/*    font-size: 14px;*/\\r\\n/*}*/\\r\\n\\r\\n/*#placeholder {*/\\r\\n/*    position: fixed;*/\\r\\n/*    width: 500px;*/\\r\\n/*    height: 50px;*/\\r\\n/*    !*top: 50%; left: 50%;*!*/\\r\\n/*    !*transform: translate(-50%, -50%);*!*/\\r\\n/*    background: #ffffff;*/\\r\\n/*    padding: 10px;*/\\r\\n/*    border: 2px solid #afb1af;*/\\r\\n/*}*/\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.polygonClipping = factory());\n})(this, (function () { 'use strict';\n\n    /**\n     * splaytree v3.1.2\n     * Fast Splay tree for Node and browser\n     *\n     * @author Alexander Milevski <info@w8r.name>\n     * @license MIT\n     * @preserve\n     */\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\n\n    function __generator(thisArg, body) {\n      var _ = {\n          label: 0,\n          sent: function () {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n          },\n          trys: [],\n          ops: []\n        },\n        f,\n        y,\n        t,\n        g;\n      return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n      }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n        return this;\n      }), g;\n      function verb(n) {\n        return function (v) {\n          return step([n, v]);\n        };\n      }\n      function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n            case 0:\n            case 1:\n              t = op;\n              break;\n            case 4:\n              _.label++;\n              return {\n                value: op[1],\n                done: false\n              };\n            case 5:\n              _.label++;\n              y = op[1];\n              op = [0];\n              continue;\n            case 7:\n              op = _.ops.pop();\n              _.trys.pop();\n              continue;\n            default:\n              if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                _ = 0;\n                continue;\n              }\n              if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                _.label = op[1];\n                break;\n              }\n              if (op[0] === 6 && _.label < t[1]) {\n                _.label = t[1];\n                t = op;\n                break;\n              }\n              if (t && _.label < t[2]) {\n                _.label = t[2];\n                _.ops.push(op);\n                break;\n              }\n              if (t[2]) _.ops.pop();\n              _.trys.pop();\n              continue;\n          }\n          op = body.call(thisArg, _);\n        } catch (e) {\n          op = [6, e];\n          y = 0;\n        } finally {\n          f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n          value: op[0] ? op[1] : void 0,\n          done: true\n        };\n      }\n    }\n    var Node = /** @class */function () {\n      function Node(key, data) {\n        this.next = null;\n        this.key = key;\n        this.data = data;\n        this.left = null;\n        this.right = null;\n      }\n      return Node;\n    }();\n\n    /* follows \"An implementation of top-down splaying\"\r\n     * by D. Sleator <sleator@cs.cmu.edu> March 1992\r\n     */\n    function DEFAULT_COMPARE(a, b) {\n      return a > b ? 1 : a < b ? -1 : 0;\n    }\n    /**\r\n     * Simple top down splay, not requiring i to be in the tree t.\r\n     */\n    function splay(i, t, comparator) {\n      var N = new Node(null, null);\n      var l = N;\n      var r = N;\n      while (true) {\n        var cmp = comparator(i, t.key);\n        //if (i < t.key) {\n        if (cmp < 0) {\n          if (t.left === null) break;\n          //if (i < t.left.key) {\n          if (comparator(i, t.left.key) < 0) {\n            var y = t.left; /* rotate right */\n            t.left = y.right;\n            y.right = t;\n            t = y;\n            if (t.left === null) break;\n          }\n          r.left = t; /* link right */\n          r = t;\n          t = t.left;\n          //} else if (i > t.key) {\n        } else if (cmp > 0) {\n          if (t.right === null) break;\n          //if (i > t.right.key) {\n          if (comparator(i, t.right.key) > 0) {\n            var y = t.right; /* rotate left */\n            t.right = y.left;\n            y.left = t;\n            t = y;\n            if (t.right === null) break;\n          }\n          l.right = t; /* link left */\n          l = t;\n          t = t.right;\n        } else break;\n      }\n      /* assemble */\n      l.right = t.left;\n      r.left = t.right;\n      t.left = N.right;\n      t.right = N.left;\n      return t;\n    }\n    function insert(i, data, t, comparator) {\n      var node = new Node(i, data);\n      if (t === null) {\n        node.left = node.right = null;\n        return node;\n      }\n      t = splay(i, t, comparator);\n      var cmp = comparator(i, t.key);\n      if (cmp < 0) {\n        node.left = t.left;\n        node.right = t;\n        t.left = null;\n      } else if (cmp >= 0) {\n        node.right = t.right;\n        node.left = t;\n        t.right = null;\n      }\n      return node;\n    }\n    function split(key, v, comparator) {\n      var left = null;\n      var right = null;\n      if (v) {\n        v = splay(key, v, comparator);\n        var cmp = comparator(v.key, key);\n        if (cmp === 0) {\n          left = v.left;\n          right = v.right;\n        } else if (cmp < 0) {\n          right = v.right;\n          v.right = null;\n          left = v;\n        } else {\n          left = v.left;\n          v.left = null;\n          right = v;\n        }\n      }\n      return {\n        left: left,\n        right: right\n      };\n    }\n    function merge(left, right, comparator) {\n      if (right === null) return left;\n      if (left === null) return right;\n      right = splay(left.key, right, comparator);\n      right.left = left;\n      return right;\n    }\n    /**\r\n     * Prints level of the tree\r\n     */\n    function printRow(root, prefix, isTail, out, printNode) {\n      if (root) {\n        out(\"\" + prefix + (isTail ? ' ' : ' ') + printNode(root) + \"\\n\");\n        var indent = prefix + (isTail ? '    ' : '   ');\n        if (root.left) printRow(root.left, indent, false, out, printNode);\n        if (root.right) printRow(root.right, indent, true, out, printNode);\n      }\n    }\n    var Tree = /** @class */function () {\n      function Tree(comparator) {\n        if (comparator === void 0) {\n          comparator = DEFAULT_COMPARE;\n        }\n        this._root = null;\n        this._size = 0;\n        this._comparator = comparator;\n      }\n      /**\r\n       * Inserts a key, allows duplicates\r\n       */\n      Tree.prototype.insert = function (key, data) {\n        this._size++;\n        return this._root = insert(key, data, this._root, this._comparator);\n      };\n      /**\r\n       * Adds a key, if it is not present in the tree\r\n       */\n      Tree.prototype.add = function (key, data) {\n        var node = new Node(key, data);\n        if (this._root === null) {\n          node.left = node.right = null;\n          this._size++;\n          this._root = node;\n        }\n        var comparator = this._comparator;\n        var t = splay(key, this._root, comparator);\n        var cmp = comparator(key, t.key);\n        if (cmp === 0) this._root = t;else {\n          if (cmp < 0) {\n            node.left = t.left;\n            node.right = t;\n            t.left = null;\n          } else if (cmp > 0) {\n            node.right = t.right;\n            node.left = t;\n            t.right = null;\n          }\n          this._size++;\n          this._root = node;\n        }\n        return this._root;\n      };\n      /**\r\n       * @param  {Key} key\r\n       * @return {Node|null}\r\n       */\n      Tree.prototype.remove = function (key) {\n        this._root = this._remove(key, this._root, this._comparator);\n      };\n      /**\r\n       * Deletes i from the tree if it's there\r\n       */\n      Tree.prototype._remove = function (i, t, comparator) {\n        var x;\n        if (t === null) return null;\n        t = splay(i, t, comparator);\n        var cmp = comparator(i, t.key);\n        if (cmp === 0) {\n          /* found it */\n          if (t.left === null) {\n            x = t.right;\n          } else {\n            x = splay(i, t.left, comparator);\n            x.right = t.right;\n          }\n          this._size--;\n          return x;\n        }\n        return t; /* It wasn't there */\n      };\n      /**\r\n       * Removes and returns the node with smallest key\r\n       */\n      Tree.prototype.pop = function () {\n        var node = this._root;\n        if (node) {\n          while (node.left) node = node.left;\n          this._root = splay(node.key, this._root, this._comparator);\n          this._root = this._remove(node.key, this._root, this._comparator);\n          return {\n            key: node.key,\n            data: node.data\n          };\n        }\n        return null;\n      };\n      /**\r\n       * Find without splaying\r\n       */\n      Tree.prototype.findStatic = function (key) {\n        var current = this._root;\n        var compare = this._comparator;\n        while (current) {\n          var cmp = compare(key, current.key);\n          if (cmp === 0) return current;else if (cmp < 0) current = current.left;else current = current.right;\n        }\n        return null;\n      };\n      Tree.prototype.find = function (key) {\n        if (this._root) {\n          this._root = splay(key, this._root, this._comparator);\n          if (this._comparator(key, this._root.key) !== 0) return null;\n        }\n        return this._root;\n      };\n      Tree.prototype.contains = function (key) {\n        var current = this._root;\n        var compare = this._comparator;\n        while (current) {\n          var cmp = compare(key, current.key);\n          if (cmp === 0) return true;else if (cmp < 0) current = current.left;else current = current.right;\n        }\n        return false;\n      };\n      Tree.prototype.forEach = function (visitor, ctx) {\n        var current = this._root;\n        var Q = []; /* Initialize stack s */\n        var done = false;\n        while (!done) {\n          if (current !== null) {\n            Q.push(current);\n            current = current.left;\n          } else {\n            if (Q.length !== 0) {\n              current = Q.pop();\n              visitor.call(ctx, current);\n              current = current.right;\n            } else done = true;\n          }\n        }\n        return this;\n      };\n      /**\r\n       * Walk key range from `low` to `high`. Stops if `fn` returns a value.\r\n       */\n      Tree.prototype.range = function (low, high, fn, ctx) {\n        var Q = [];\n        var compare = this._comparator;\n        var node = this._root;\n        var cmp;\n        while (Q.length !== 0 || node) {\n          if (node) {\n            Q.push(node);\n            node = node.left;\n          } else {\n            node = Q.pop();\n            cmp = compare(node.key, high);\n            if (cmp > 0) {\n              break;\n            } else if (compare(node.key, low) >= 0) {\n              if (fn.call(ctx, node)) return this; // stop if smth is returned\n            }\n            node = node.right;\n          }\n        }\n        return this;\n      };\n      /**\r\n       * Returns array of keys\r\n       */\n      Tree.prototype.keys = function () {\n        var keys = [];\n        this.forEach(function (_a) {\n          var key = _a.key;\n          return keys.push(key);\n        });\n        return keys;\n      };\n      /**\r\n       * Returns array of all the data in the nodes\r\n       */\n      Tree.prototype.values = function () {\n        var values = [];\n        this.forEach(function (_a) {\n          var data = _a.data;\n          return values.push(data);\n        });\n        return values;\n      };\n      Tree.prototype.min = function () {\n        if (this._root) return this.minNode(this._root).key;\n        return null;\n      };\n      Tree.prototype.max = function () {\n        if (this._root) return this.maxNode(this._root).key;\n        return null;\n      };\n      Tree.prototype.minNode = function (t) {\n        if (t === void 0) {\n          t = this._root;\n        }\n        if (t) while (t.left) t = t.left;\n        return t;\n      };\n      Tree.prototype.maxNode = function (t) {\n        if (t === void 0) {\n          t = this._root;\n        }\n        if (t) while (t.right) t = t.right;\n        return t;\n      };\n      /**\r\n       * Returns node at given index\r\n       */\n      Tree.prototype.at = function (index) {\n        var current = this._root;\n        var done = false;\n        var i = 0;\n        var Q = [];\n        while (!done) {\n          if (current) {\n            Q.push(current);\n            current = current.left;\n          } else {\n            if (Q.length > 0) {\n              current = Q.pop();\n              if (i === index) return current;\n              i++;\n              current = current.right;\n            } else done = true;\n          }\n        }\n        return null;\n      };\n      Tree.prototype.next = function (d) {\n        var root = this._root;\n        var successor = null;\n        if (d.right) {\n          successor = d.right;\n          while (successor.left) successor = successor.left;\n          return successor;\n        }\n        var comparator = this._comparator;\n        while (root) {\n          var cmp = comparator(d.key, root.key);\n          if (cmp === 0) break;else if (cmp < 0) {\n            successor = root;\n            root = root.left;\n          } else root = root.right;\n        }\n        return successor;\n      };\n      Tree.prototype.prev = function (d) {\n        var root = this._root;\n        var predecessor = null;\n        if (d.left !== null) {\n          predecessor = d.left;\n          while (predecessor.right) predecessor = predecessor.right;\n          return predecessor;\n        }\n        var comparator = this._comparator;\n        while (root) {\n          var cmp = comparator(d.key, root.key);\n          if (cmp === 0) break;else if (cmp < 0) root = root.left;else {\n            predecessor = root;\n            root = root.right;\n          }\n        }\n        return predecessor;\n      };\n      Tree.prototype.clear = function () {\n        this._root = null;\n        this._size = 0;\n        return this;\n      };\n      Tree.prototype.toList = function () {\n        return toList(this._root);\n      };\n      /**\r\n       * Bulk-load items. Both array have to be same size\r\n       */\n      Tree.prototype.load = function (keys, values, presort) {\n        if (values === void 0) {\n          values = [];\n        }\n        if (presort === void 0) {\n          presort = false;\n        }\n        var size = keys.length;\n        var comparator = this._comparator;\n        // sort if needed\n        if (presort) sort(keys, values, 0, size - 1, comparator);\n        if (this._root === null) {\n          // empty tree\n          this._root = loadRecursive(keys, values, 0, size);\n          this._size = size;\n        } else {\n          // that re-builds the whole tree from two in-order traversals\n          var mergedList = mergeLists(this.toList(), createList(keys, values), comparator);\n          size = this._size + size;\n          this._root = sortedListToBST({\n            head: mergedList\n          }, 0, size);\n        }\n        return this;\n      };\n      Tree.prototype.isEmpty = function () {\n        return this._root === null;\n      };\n      Object.defineProperty(Tree.prototype, \"size\", {\n        get: function () {\n          return this._size;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Tree.prototype, \"root\", {\n        get: function () {\n          return this._root;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Tree.prototype.toString = function (printNode) {\n        if (printNode === void 0) {\n          printNode = function (n) {\n            return String(n.key);\n          };\n        }\n        var out = [];\n        printRow(this._root, '', true, function (v) {\n          return out.push(v);\n        }, printNode);\n        return out.join('');\n      };\n      Tree.prototype.update = function (key, newKey, newData) {\n        var comparator = this._comparator;\n        var _a = split(key, this._root, comparator),\n          left = _a.left,\n          right = _a.right;\n        if (comparator(key, newKey) < 0) {\n          right = insert(newKey, newData, right, comparator);\n        } else {\n          left = insert(newKey, newData, left, comparator);\n        }\n        this._root = merge(left, right, comparator);\n      };\n      Tree.prototype.split = function (key) {\n        return split(key, this._root, this._comparator);\n      };\n      Tree.prototype[Symbol.iterator] = function () {\n        var current, Q, done;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              current = this._root;\n              Q = [];\n              done = false;\n              _a.label = 1;\n            case 1:\n              if (!!done) return [3 /*break*/, 6];\n              if (!(current !== null)) return [3 /*break*/, 2];\n              Q.push(current);\n              current = current.left;\n              return [3 /*break*/, 5];\n            case 2:\n              if (!(Q.length !== 0)) return [3 /*break*/, 4];\n              current = Q.pop();\n              return [4 /*yield*/, current];\n            case 3:\n              _a.sent();\n              current = current.right;\n              return [3 /*break*/, 5];\n            case 4:\n              done = true;\n              _a.label = 5;\n            case 5:\n              return [3 /*break*/, 1];\n            case 6:\n              return [2 /*return*/];\n          }\n        });\n      };\n      return Tree;\n    }();\n    function loadRecursive(keys, values, start, end) {\n      var size = end - start;\n      if (size > 0) {\n        var middle = start + Math.floor(size / 2);\n        var key = keys[middle];\n        var data = values[middle];\n        var node = new Node(key, data);\n        node.left = loadRecursive(keys, values, start, middle);\n        node.right = loadRecursive(keys, values, middle + 1, end);\n        return node;\n      }\n      return null;\n    }\n    function createList(keys, values) {\n      var head = new Node(null, null);\n      var p = head;\n      for (var i = 0; i < keys.length; i++) {\n        p = p.next = new Node(keys[i], values[i]);\n      }\n      p.next = null;\n      return head.next;\n    }\n    function toList(root) {\n      var current = root;\n      var Q = [];\n      var done = false;\n      var head = new Node(null, null);\n      var p = head;\n      while (!done) {\n        if (current) {\n          Q.push(current);\n          current = current.left;\n        } else {\n          if (Q.length > 0) {\n            current = p = p.next = Q.pop();\n            current = current.right;\n          } else done = true;\n        }\n      }\n      p.next = null; // that'll work even if the tree was empty\n      return head.next;\n    }\n    function sortedListToBST(list, start, end) {\n      var size = end - start;\n      if (size > 0) {\n        var middle = start + Math.floor(size / 2);\n        var left = sortedListToBST(list, start, middle);\n        var root = list.head;\n        root.left = left;\n        list.head = list.head.next;\n        root.right = sortedListToBST(list, middle + 1, end);\n        return root;\n      }\n      return null;\n    }\n    function mergeLists(l1, l2, compare) {\n      var head = new Node(null, null); // dummy\n      var p = head;\n      var p1 = l1;\n      var p2 = l2;\n      while (p1 !== null && p2 !== null) {\n        if (compare(p1.key, p2.key) < 0) {\n          p.next = p1;\n          p1 = p1.next;\n        } else {\n          p.next = p2;\n          p2 = p2.next;\n        }\n        p = p.next;\n      }\n      if (p1 !== null) {\n        p.next = p1;\n      } else if (p2 !== null) {\n        p.next = p2;\n      }\n      return head.next;\n    }\n    function sort(keys, values, left, right, compare) {\n      if (left >= right) return;\n      var pivot = keys[left + right >> 1];\n      var i = left - 1;\n      var j = right + 1;\n      while (true) {\n        do i++; while (compare(keys[i], pivot) < 0);\n        do j--; while (compare(keys[j], pivot) > 0);\n        if (i >= j) break;\n        var tmp = keys[i];\n        keys[i] = keys[j];\n        keys[j] = tmp;\n        tmp = values[i];\n        values[i] = values[j];\n        values[j] = tmp;\n      }\n      sort(keys, values, left, j, compare);\n      sort(keys, values, j + 1, right, compare);\n    }\n\n    /**\n     * A bounding box has the format:\n     *\n     *  { ll: { x: xmin, y: ymin }, ur: { x: xmax, y: ymax } }\n     *\n     */\n\n    const isInBbox = (bbox, point) => {\n      return bbox.ll.x <= point.x && point.x <= bbox.ur.x && bbox.ll.y <= point.y && point.y <= bbox.ur.y;\n    };\n\n    /* Returns either null, or a bbox (aka an ordered pair of points)\n     * If there is only one point of overlap, a bbox with identical points\n     * will be returned */\n    const getBboxOverlap = (b1, b2) => {\n      // check if the bboxes overlap at all\n      if (b2.ur.x < b1.ll.x || b1.ur.x < b2.ll.x || b2.ur.y < b1.ll.y || b1.ur.y < b2.ll.y) return null;\n\n      // find the middle two X values\n      const lowerX = b1.ll.x < b2.ll.x ? b2.ll.x : b1.ll.x;\n      const upperX = b1.ur.x < b2.ur.x ? b1.ur.x : b2.ur.x;\n\n      // find the middle two Y values\n      const lowerY = b1.ll.y < b2.ll.y ? b2.ll.y : b1.ll.y;\n      const upperY = b1.ur.y < b2.ur.y ? b1.ur.y : b2.ur.y;\n\n      // put those middle values together to get the overlap\n      return {\n        ll: {\n          x: lowerX,\n          y: lowerY\n        },\n        ur: {\n          x: upperX,\n          y: upperY\n        }\n      };\n    };\n\n    /* Javascript doesn't do integer math. Everything is\n     * floating point with percision Number.EPSILON.\n     *\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON\n     */\n\n    let epsilon$1 = Number.EPSILON;\n\n    // IE Polyfill\n    if (epsilon$1 === undefined) epsilon$1 = Math.pow(2, -52);\n    const EPSILON_SQ = epsilon$1 * epsilon$1;\n\n    /* FLP comparator */\n    const cmp = (a, b) => {\n      // check if they're both 0\n      if (-epsilon$1 < a && a < epsilon$1) {\n        if (-epsilon$1 < b && b < epsilon$1) {\n          return 0;\n        }\n      }\n\n      // check if they're flp equal\n      const ab = a - b;\n      if (ab * ab < EPSILON_SQ * a * b) {\n        return 0;\n      }\n\n      // normal comparison\n      return a < b ? -1 : 1;\n    };\n\n    /**\n     * This class rounds incoming values sufficiently so that\n     * floating points problems are, for the most part, avoided.\n     *\n     * Incoming points are have their x & y values tested against\n     * all previously seen x & y values. If either is 'too close'\n     * to a previously seen value, it's value is 'snapped' to the\n     * previously seen value.\n     *\n     * All points should be rounded by this class before being\n     * stored in any data structures in the rest of this algorithm.\n     */\n\n    class PtRounder {\n      constructor() {\n        this.reset();\n      }\n      reset() {\n        this.xRounder = new CoordRounder();\n        this.yRounder = new CoordRounder();\n      }\n      round(x, y) {\n        return {\n          x: this.xRounder.round(x),\n          y: this.yRounder.round(y)\n        };\n      }\n    }\n    class CoordRounder {\n      constructor() {\n        this.tree = new Tree();\n        // preseed with 0 so we don't end up with values < Number.EPSILON\n        this.round(0);\n      }\n\n      // Note: this can rounds input values backwards or forwards.\n      //       You might ask, why not restrict this to just rounding\n      //       forwards? Wouldn't that allow left endpoints to always\n      //       remain left endpoints during splitting (never change to\n      //       right). No - it wouldn't, because we snap intersections\n      //       to endpoints (to establish independence from the segment\n      //       angle for t-intersections).\n      round(coord) {\n        const node = this.tree.add(coord);\n        const prevNode = this.tree.prev(node);\n        if (prevNode !== null && cmp(node.key, prevNode.key) === 0) {\n          this.tree.remove(coord);\n          return prevNode.key;\n        }\n        const nextNode = this.tree.next(node);\n        if (nextNode !== null && cmp(node.key, nextNode.key) === 0) {\n          this.tree.remove(coord);\n          return nextNode.key;\n        }\n        return coord;\n      }\n    }\n\n    // singleton available by import\n    const rounder = new PtRounder();\n\n    const epsilon = 1.1102230246251565e-16;\n    const splitter = 134217729;\n    const resulterrbound = (3 + 8 * epsilon) * epsilon;\n\n    // fast_expansion_sum_zeroelim routine from oritinal code\n    function sum(elen, e, flen, f, h) {\n      let Q, Qnew, hh, bvirt;\n      let enow = e[0];\n      let fnow = f[0];\n      let eindex = 0;\n      let findex = 0;\n      if (fnow > enow === fnow > -enow) {\n        Q = enow;\n        enow = e[++eindex];\n      } else {\n        Q = fnow;\n        fnow = f[++findex];\n      }\n      let hindex = 0;\n      if (eindex < elen && findex < flen) {\n        if (fnow > enow === fnow > -enow) {\n          Qnew = enow + Q;\n          hh = Q - (Qnew - enow);\n          enow = e[++eindex];\n        } else {\n          Qnew = fnow + Q;\n          hh = Q - (Qnew - fnow);\n          fnow = f[++findex];\n        }\n        Q = Qnew;\n        if (hh !== 0) {\n          h[hindex++] = hh;\n        }\n        while (eindex < elen && findex < flen) {\n          if (fnow > enow === fnow > -enow) {\n            Qnew = Q + enow;\n            bvirt = Qnew - Q;\n            hh = Q - (Qnew - bvirt) + (enow - bvirt);\n            enow = e[++eindex];\n          } else {\n            Qnew = Q + fnow;\n            bvirt = Qnew - Q;\n            hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n            fnow = f[++findex];\n          }\n          Q = Qnew;\n          if (hh !== 0) {\n            h[hindex++] = hh;\n          }\n        }\n      }\n      while (eindex < elen) {\n        Qnew = Q + enow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (enow - bvirt);\n        enow = e[++eindex];\n        Q = Qnew;\n        if (hh !== 0) {\n          h[hindex++] = hh;\n        }\n      }\n      while (findex < flen) {\n        Qnew = Q + fnow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n        fnow = f[++findex];\n        Q = Qnew;\n        if (hh !== 0) {\n          h[hindex++] = hh;\n        }\n      }\n      if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n      }\n      return hindex;\n    }\n    function estimate(elen, e) {\n      let Q = e[0];\n      for (let i = 1; i < elen; i++) Q += e[i];\n      return Q;\n    }\n    function vec(n) {\n      return new Float64Array(n);\n    }\n\n    const ccwerrboundA = (3 + 16 * epsilon) * epsilon;\n    const ccwerrboundB = (2 + 12 * epsilon) * epsilon;\n    const ccwerrboundC = (9 + 64 * epsilon) * epsilon * epsilon;\n    const B = vec(4);\n    const C1 = vec(8);\n    const C2 = vec(12);\n    const D = vec(16);\n    const u = vec(4);\n    function orient2dadapt(ax, ay, bx, by, cx, cy, detsum) {\n      let acxtail, acytail, bcxtail, bcytail;\n      let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n      const acx = ax - cx;\n      const bcx = bx - cx;\n      const acy = ay - cy;\n      const bcy = by - cy;\n      s1 = acx * bcy;\n      c = splitter * acx;\n      ahi = c - (c - acx);\n      alo = acx - ahi;\n      c = splitter * bcy;\n      bhi = c - (c - bcy);\n      blo = bcy - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = acy * bcx;\n      c = splitter * acy;\n      ahi = c - (c - acy);\n      alo = acy - ahi;\n      c = splitter * bcx;\n      bhi = c - (c - bcx);\n      blo = bcx - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      B[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      B[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      B[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      B[3] = u3;\n      let det = estimate(4, B);\n      let errbound = ccwerrboundB * detsum;\n      if (det >= errbound || -det >= errbound) {\n        return det;\n      }\n      bvirt = ax - acx;\n      acxtail = ax - (acx + bvirt) + (bvirt - cx);\n      bvirt = bx - bcx;\n      bcxtail = bx - (bcx + bvirt) + (bvirt - cx);\n      bvirt = ay - acy;\n      acytail = ay - (acy + bvirt) + (bvirt - cy);\n      bvirt = by - bcy;\n      bcytail = by - (bcy + bvirt) + (bvirt - cy);\n      if (acxtail === 0 && acytail === 0 && bcxtail === 0 && bcytail === 0) {\n        return det;\n      }\n      errbound = ccwerrboundC * detsum + resulterrbound * Math.abs(det);\n      det += acx * bcytail + bcy * acxtail - (acy * bcxtail + bcx * acytail);\n      if (det >= errbound || -det >= errbound) return det;\n      s1 = acxtail * bcy;\n      c = splitter * acxtail;\n      ahi = c - (c - acxtail);\n      alo = acxtail - ahi;\n      c = splitter * bcy;\n      bhi = c - (c - bcy);\n      blo = bcy - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = acytail * bcx;\n      c = splitter * acytail;\n      ahi = c - (c - acytail);\n      alo = acytail - ahi;\n      c = splitter * bcx;\n      bhi = c - (c - bcx);\n      blo = bcx - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      u[3] = u3;\n      const C1len = sum(4, B, 4, u, C1);\n      s1 = acx * bcytail;\n      c = splitter * acx;\n      ahi = c - (c - acx);\n      alo = acx - ahi;\n      c = splitter * bcytail;\n      bhi = c - (c - bcytail);\n      blo = bcytail - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = acy * bcxtail;\n      c = splitter * acy;\n      ahi = c - (c - acy);\n      alo = acy - ahi;\n      c = splitter * bcxtail;\n      bhi = c - (c - bcxtail);\n      blo = bcxtail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      u[3] = u3;\n      const C2len = sum(C1len, C1, 4, u, C2);\n      s1 = acxtail * bcytail;\n      c = splitter * acxtail;\n      ahi = c - (c - acxtail);\n      alo = acxtail - ahi;\n      c = splitter * bcytail;\n      bhi = c - (c - bcytail);\n      blo = bcytail - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = acytail * bcxtail;\n      c = splitter * acytail;\n      ahi = c - (c - acytail);\n      alo = acytail - ahi;\n      c = splitter * bcxtail;\n      bhi = c - (c - bcxtail);\n      blo = bcxtail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      u[3] = u3;\n      const Dlen = sum(C2len, C2, 4, u, D);\n      return D[Dlen - 1];\n    }\n    function orient2d(ax, ay, bx, by, cx, cy) {\n      const detleft = (ay - cy) * (bx - cx);\n      const detright = (ax - cx) * (by - cy);\n      const det = detleft - detright;\n      const detsum = Math.abs(detleft + detright);\n      if (Math.abs(det) >= ccwerrboundA * detsum) return det;\n      return -orient2dadapt(ax, ay, bx, by, cx, cy, detsum);\n    }\n\n    /* Cross Product of two vectors with first point at origin */\n    const crossProduct = (a, b) => a.x * b.y - a.y * b.x;\n\n    /* Dot Product of two vectors with first point at origin */\n    const dotProduct = (a, b) => a.x * b.x + a.y * b.y;\n\n    /* Comparator for two vectors with same starting point */\n    const compareVectorAngles = (basePt, endPt1, endPt2) => {\n      const res = orient2d(basePt.x, basePt.y, endPt1.x, endPt1.y, endPt2.x, endPt2.y);\n      if (res > 0) return -1;\n      if (res < 0) return 1;\n      return 0;\n    };\n    const length = v => Math.sqrt(dotProduct(v, v));\n\n    /* Get the sine of the angle from pShared -> pAngle to pShaed -> pBase */\n    const sineOfAngle = (pShared, pBase, pAngle) => {\n      const vBase = {\n        x: pBase.x - pShared.x,\n        y: pBase.y - pShared.y\n      };\n      const vAngle = {\n        x: pAngle.x - pShared.x,\n        y: pAngle.y - pShared.y\n      };\n      return crossProduct(vAngle, vBase) / length(vAngle) / length(vBase);\n    };\n\n    /* Get the cosine of the angle from pShared -> pAngle to pShaed -> pBase */\n    const cosineOfAngle = (pShared, pBase, pAngle) => {\n      const vBase = {\n        x: pBase.x - pShared.x,\n        y: pBase.y - pShared.y\n      };\n      const vAngle = {\n        x: pAngle.x - pShared.x,\n        y: pAngle.y - pShared.y\n      };\n      return dotProduct(vAngle, vBase) / length(vAngle) / length(vBase);\n    };\n\n    /* Get the x coordinate where the given line (defined by a point and vector)\n     * crosses the horizontal line with the given y coordiante.\n     * In the case of parrallel lines (including overlapping ones) returns null. */\n    const horizontalIntersection = (pt, v, y) => {\n      if (v.y === 0) return null;\n      return {\n        x: pt.x + v.x / v.y * (y - pt.y),\n        y: y\n      };\n    };\n\n    /* Get the y coordinate where the given line (defined by a point and vector)\n     * crosses the vertical line with the given x coordiante.\n     * In the case of parrallel lines (including overlapping ones) returns null. */\n    const verticalIntersection = (pt, v, x) => {\n      if (v.x === 0) return null;\n      return {\n        x: x,\n        y: pt.y + v.y / v.x * (x - pt.x)\n      };\n    };\n\n    /* Get the intersection of two lines, each defined by a base point and a vector.\n     * In the case of parrallel lines (including overlapping ones) returns null. */\n    const intersection$1 = (pt1, v1, pt2, v2) => {\n      // take some shortcuts for vertical and horizontal lines\n      // this also ensures we don't calculate an intersection and then discover\n      // it's actually outside the bounding box of the line\n      if (v1.x === 0) return verticalIntersection(pt2, v2, pt1.x);\n      if (v2.x === 0) return verticalIntersection(pt1, v1, pt2.x);\n      if (v1.y === 0) return horizontalIntersection(pt2, v2, pt1.y);\n      if (v2.y === 0) return horizontalIntersection(pt1, v1, pt2.y);\n\n      // General case for non-overlapping segments.\n      // This algorithm is based on Schneider and Eberly.\n      // http://www.cimec.org.ar/~ncalvo/Schneider_Eberly.pdf - pg 244\n\n      const kross = crossProduct(v1, v2);\n      if (kross == 0) return null;\n      const ve = {\n        x: pt2.x - pt1.x,\n        y: pt2.y - pt1.y\n      };\n      const d1 = crossProduct(ve, v1) / kross;\n      const d2 = crossProduct(ve, v2) / kross;\n\n      // take the average of the two calculations to minimize rounding error\n      const x1 = pt1.x + d2 * v1.x,\n        x2 = pt2.x + d1 * v2.x;\n      const y1 = pt1.y + d2 * v1.y,\n        y2 = pt2.y + d1 * v2.y;\n      const x = (x1 + x2) / 2;\n      const y = (y1 + y2) / 2;\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    class SweepEvent {\n      // for ordering sweep events in the sweep event queue\n      static compare(a, b) {\n        // favor event with a point that the sweep line hits first\n        const ptCmp = SweepEvent.comparePoints(a.point, b.point);\n        if (ptCmp !== 0) return ptCmp;\n\n        // the points are the same, so link them if needed\n        if (a.point !== b.point) a.link(b);\n\n        // favor right events over left\n        if (a.isLeft !== b.isLeft) return a.isLeft ? 1 : -1;\n\n        // we have two matching left or right endpoints\n        // ordering of this case is the same as for their segments\n        return Segment.compare(a.segment, b.segment);\n      }\n\n      // for ordering points in sweep line order\n      static comparePoints(aPt, bPt) {\n        if (aPt.x < bPt.x) return -1;\n        if (aPt.x > bPt.x) return 1;\n        if (aPt.y < bPt.y) return -1;\n        if (aPt.y > bPt.y) return 1;\n        return 0;\n      }\n\n      // Warning: 'point' input will be modified and re-used (for performance)\n      constructor(point, isLeft) {\n        if (point.events === undefined) point.events = [this];else point.events.push(this);\n        this.point = point;\n        this.isLeft = isLeft;\n        // this.segment, this.otherSE set by factory\n      }\n      link(other) {\n        if (other.point === this.point) {\n          throw new Error(\"Tried to link already linked events\");\n        }\n        const otherEvents = other.point.events;\n        for (let i = 0, iMax = otherEvents.length; i < iMax; i++) {\n          const evt = otherEvents[i];\n          this.point.events.push(evt);\n          evt.point = this.point;\n        }\n        this.checkForConsuming();\n      }\n\n      /* Do a pass over our linked events and check to see if any pair\n       * of segments match, and should be consumed. */\n      checkForConsuming() {\n        // FIXME: The loops in this method run O(n^2) => no good.\n        //        Maintain little ordered sweep event trees?\n        //        Can we maintaining an ordering that avoids the need\n        //        for the re-sorting with getLeftmostComparator in geom-out?\n\n        // Compare each pair of events to see if other events also match\n        const numEvents = this.point.events.length;\n        for (let i = 0; i < numEvents; i++) {\n          const evt1 = this.point.events[i];\n          if (evt1.segment.consumedBy !== undefined) continue;\n          for (let j = i + 1; j < numEvents; j++) {\n            const evt2 = this.point.events[j];\n            if (evt2.consumedBy !== undefined) continue;\n            if (evt1.otherSE.point.events !== evt2.otherSE.point.events) continue;\n            evt1.segment.consume(evt2.segment);\n          }\n        }\n      }\n      getAvailableLinkedEvents() {\n        // point.events is always of length 2 or greater\n        const events = [];\n        for (let i = 0, iMax = this.point.events.length; i < iMax; i++) {\n          const evt = this.point.events[i];\n          if (evt !== this && !evt.segment.ringOut && evt.segment.isInResult()) {\n            events.push(evt);\n          }\n        }\n        return events;\n      }\n\n      /**\n       * Returns a comparator function for sorting linked events that will\n       * favor the event that will give us the smallest left-side angle.\n       * All ring construction starts as low as possible heading to the right,\n       * so by always turning left as sharp as possible we'll get polygons\n       * without uncessary loops & holes.\n       *\n       * The comparator function has a compute cache such that it avoids\n       * re-computing already-computed values.\n       */\n      getLeftmostComparator(baseEvent) {\n        const cache = new Map();\n        const fillCache = linkedEvent => {\n          const nextEvent = linkedEvent.otherSE;\n          cache.set(linkedEvent, {\n            sine: sineOfAngle(this.point, baseEvent.point, nextEvent.point),\n            cosine: cosineOfAngle(this.point, baseEvent.point, nextEvent.point)\n          });\n        };\n        return (a, b) => {\n          if (!cache.has(a)) fillCache(a);\n          if (!cache.has(b)) fillCache(b);\n          const {\n            sine: asine,\n            cosine: acosine\n          } = cache.get(a);\n          const {\n            sine: bsine,\n            cosine: bcosine\n          } = cache.get(b);\n\n          // both on or above x-axis\n          if (asine >= 0 && bsine >= 0) {\n            if (acosine < bcosine) return 1;\n            if (acosine > bcosine) return -1;\n            return 0;\n          }\n\n          // both below x-axis\n          if (asine < 0 && bsine < 0) {\n            if (acosine < bcosine) return -1;\n            if (acosine > bcosine) return 1;\n            return 0;\n          }\n\n          // one above x-axis, one below\n          if (bsine < asine) return -1;\n          if (bsine > asine) return 1;\n          return 0;\n        };\n      }\n    }\n\n    // Give segments unique ID's to get consistent sorting of\n    // segments and sweep events when all else is identical\n    let segmentId = 0;\n    class Segment {\n      /* This compare() function is for ordering segments in the sweep\n       * line tree, and does so according to the following criteria:\n       *\n       * Consider the vertical line that lies an infinestimal step to the\n       * right of the right-more of the two left endpoints of the input\n       * segments. Imagine slowly moving a point up from negative infinity\n       * in the increasing y direction. Which of the two segments will that\n       * point intersect first? That segment comes 'before' the other one.\n       *\n       * If neither segment would be intersected by such a line, (if one\n       * or more of the segments are vertical) then the line to be considered\n       * is directly on the right-more of the two left inputs.\n       */\n      static compare(a, b) {\n        const alx = a.leftSE.point.x;\n        const blx = b.leftSE.point.x;\n        const arx = a.rightSE.point.x;\n        const brx = b.rightSE.point.x;\n\n        // check if they're even in the same vertical plane\n        if (brx < alx) return 1;\n        if (arx < blx) return -1;\n        const aly = a.leftSE.point.y;\n        const bly = b.leftSE.point.y;\n        const ary = a.rightSE.point.y;\n        const bry = b.rightSE.point.y;\n\n        // is left endpoint of segment B the right-more?\n        if (alx < blx) {\n          // are the two segments in the same horizontal plane?\n          if (bly < aly && bly < ary) return 1;\n          if (bly > aly && bly > ary) return -1;\n\n          // is the B left endpoint colinear to segment A?\n          const aCmpBLeft = a.comparePoint(b.leftSE.point);\n          if (aCmpBLeft < 0) return 1;\n          if (aCmpBLeft > 0) return -1;\n\n          // is the A right endpoint colinear to segment B ?\n          const bCmpARight = b.comparePoint(a.rightSE.point);\n          if (bCmpARight !== 0) return bCmpARight;\n\n          // colinear segments, consider the one with left-more\n          // left endpoint to be first (arbitrary?)\n          return -1;\n        }\n\n        // is left endpoint of segment A the right-more?\n        if (alx > blx) {\n          if (aly < bly && aly < bry) return -1;\n          if (aly > bly && aly > bry) return 1;\n\n          // is the A left endpoint colinear to segment B?\n          const bCmpALeft = b.comparePoint(a.leftSE.point);\n          if (bCmpALeft !== 0) return bCmpALeft;\n\n          // is the B right endpoint colinear to segment A?\n          const aCmpBRight = a.comparePoint(b.rightSE.point);\n          if (aCmpBRight < 0) return 1;\n          if (aCmpBRight > 0) return -1;\n\n          // colinear segments, consider the one with left-more\n          // left endpoint to be first (arbitrary?)\n          return 1;\n        }\n\n        // if we get here, the two left endpoints are in the same\n        // vertical plane, ie alx === blx\n\n        // consider the lower left-endpoint to come first\n        if (aly < bly) return -1;\n        if (aly > bly) return 1;\n\n        // left endpoints are identical\n        // check for colinearity by using the left-more right endpoint\n\n        // is the A right endpoint more left-more?\n        if (arx < brx) {\n          const bCmpARight = b.comparePoint(a.rightSE.point);\n          if (bCmpARight !== 0) return bCmpARight;\n        }\n\n        // is the B right endpoint more left-more?\n        if (arx > brx) {\n          const aCmpBRight = a.comparePoint(b.rightSE.point);\n          if (aCmpBRight < 0) return 1;\n          if (aCmpBRight > 0) return -1;\n        }\n        if (arx !== brx) {\n          // are these two [almost] vertical segments with opposite orientation?\n          // if so, the one with the lower right endpoint comes first\n          const ay = ary - aly;\n          const ax = arx - alx;\n          const by = bry - bly;\n          const bx = brx - blx;\n          if (ay > ax && by < bx) return 1;\n          if (ay < ax && by > bx) return -1;\n        }\n\n        // we have colinear segments with matching orientation\n        // consider the one with more left-more right endpoint to be first\n        if (arx > brx) return 1;\n        if (arx < brx) return -1;\n\n        // if we get here, two two right endpoints are in the same\n        // vertical plane, ie arx === brx\n\n        // consider the lower right-endpoint to come first\n        if (ary < bry) return -1;\n        if (ary > bry) return 1;\n\n        // right endpoints identical as well, so the segments are idential\n        // fall back on creation order as consistent tie-breaker\n        if (a.id < b.id) return -1;\n        if (a.id > b.id) return 1;\n\n        // identical segment, ie a === b\n        return 0;\n      }\n\n      /* Warning: a reference to ringWindings input will be stored,\n       *  and possibly will be later modified */\n      constructor(leftSE, rightSE, rings, windings) {\n        this.id = ++segmentId;\n        this.leftSE = leftSE;\n        leftSE.segment = this;\n        leftSE.otherSE = rightSE;\n        this.rightSE = rightSE;\n        rightSE.segment = this;\n        rightSE.otherSE = leftSE;\n        this.rings = rings;\n        this.windings = windings;\n        // left unset for performance, set later in algorithm\n        // this.ringOut, this.consumedBy, this.prev\n      }\n      static fromRing(pt1, pt2, ring) {\n        let leftPt, rightPt, winding;\n\n        // ordering the two points according to sweep line ordering\n        const cmpPts = SweepEvent.comparePoints(pt1, pt2);\n        if (cmpPts < 0) {\n          leftPt = pt1;\n          rightPt = pt2;\n          winding = 1;\n        } else if (cmpPts > 0) {\n          leftPt = pt2;\n          rightPt = pt1;\n          winding = -1;\n        } else throw new Error(`Tried to create degenerate segment at [${pt1.x}, ${pt1.y}]`);\n        const leftSE = new SweepEvent(leftPt, true);\n        const rightSE = new SweepEvent(rightPt, false);\n        return new Segment(leftSE, rightSE, [ring], [winding]);\n      }\n\n      /* When a segment is split, the rightSE is replaced with a new sweep event */\n      replaceRightSE(newRightSE) {\n        this.rightSE = newRightSE;\n        this.rightSE.segment = this;\n        this.rightSE.otherSE = this.leftSE;\n        this.leftSE.otherSE = this.rightSE;\n      }\n      bbox() {\n        const y1 = this.leftSE.point.y;\n        const y2 = this.rightSE.point.y;\n        return {\n          ll: {\n            x: this.leftSE.point.x,\n            y: y1 < y2 ? y1 : y2\n          },\n          ur: {\n            x: this.rightSE.point.x,\n            y: y1 > y2 ? y1 : y2\n          }\n        };\n      }\n\n      /* A vector from the left point to the right */\n      vector() {\n        return {\n          x: this.rightSE.point.x - this.leftSE.point.x,\n          y: this.rightSE.point.y - this.leftSE.point.y\n        };\n      }\n      isAnEndpoint(pt) {\n        return pt.x === this.leftSE.point.x && pt.y === this.leftSE.point.y || pt.x === this.rightSE.point.x && pt.y === this.rightSE.point.y;\n      }\n\n      /* Compare this segment with a point.\n       *\n       * A point P is considered to be colinear to a segment if there\n       * exists a distance D such that if we travel along the segment\n       * from one * endpoint towards the other a distance D, we find\n       * ourselves at point P.\n       *\n       * Return value indicates:\n       *\n       *   1: point lies above the segment (to the left of vertical)\n       *   0: point is colinear to segment\n       *  -1: point lies below the segment (to the right of vertical)\n       */\n      comparePoint(point) {\n        if (this.isAnEndpoint(point)) return 0;\n        const lPt = this.leftSE.point;\n        const rPt = this.rightSE.point;\n        const v = this.vector();\n\n        // Exactly vertical segments.\n        if (lPt.x === rPt.x) {\n          if (point.x === lPt.x) return 0;\n          return point.x < lPt.x ? 1 : -1;\n        }\n\n        // Nearly vertical segments with an intersection.\n        // Check to see where a point on the line with matching Y coordinate is.\n        const yDist = (point.y - lPt.y) / v.y;\n        const xFromYDist = lPt.x + yDist * v.x;\n        if (point.x === xFromYDist) return 0;\n\n        // General case.\n        // Check to see where a point on the line with matching X coordinate is.\n        const xDist = (point.x - lPt.x) / v.x;\n        const yFromXDist = lPt.y + xDist * v.y;\n        if (point.y === yFromXDist) return 0;\n        return point.y < yFromXDist ? -1 : 1;\n      }\n\n      /**\n       * Given another segment, returns the first non-trivial intersection\n       * between the two segments (in terms of sweep line ordering), if it exists.\n       *\n       * A 'non-trivial' intersection is one that will cause one or both of the\n       * segments to be split(). As such, 'trivial' vs. 'non-trivial' intersection:\n       *\n       *   * endpoint of segA with endpoint of segB --> trivial\n       *   * endpoint of segA with point along segB --> non-trivial\n       *   * endpoint of segB with point along segA --> non-trivial\n       *   * point along segA with point along segB --> non-trivial\n       *\n       * If no non-trivial intersection exists, return null\n       * Else, return null.\n       */\n      getIntersection(other) {\n        // If bboxes don't overlap, there can't be any intersections\n        const tBbox = this.bbox();\n        const oBbox = other.bbox();\n        const bboxOverlap = getBboxOverlap(tBbox, oBbox);\n        if (bboxOverlap === null) return null;\n\n        // We first check to see if the endpoints can be considered intersections.\n        // This will 'snap' intersections to endpoints if possible, and will\n        // handle cases of colinearity.\n\n        const tlp = this.leftSE.point;\n        const trp = this.rightSE.point;\n        const olp = other.leftSE.point;\n        const orp = other.rightSE.point;\n\n        // does each endpoint touch the other segment?\n        // note that we restrict the 'touching' definition to only allow segments\n        // to touch endpoints that lie forward from where we are in the sweep line pass\n        const touchesOtherLSE = isInBbox(tBbox, olp) && this.comparePoint(olp) === 0;\n        const touchesThisLSE = isInBbox(oBbox, tlp) && other.comparePoint(tlp) === 0;\n        const touchesOtherRSE = isInBbox(tBbox, orp) && this.comparePoint(orp) === 0;\n        const touchesThisRSE = isInBbox(oBbox, trp) && other.comparePoint(trp) === 0;\n\n        // do left endpoints match?\n        if (touchesThisLSE && touchesOtherLSE) {\n          // these two cases are for colinear segments with matching left\n          // endpoints, and one segment being longer than the other\n          if (touchesThisRSE && !touchesOtherRSE) return trp;\n          if (!touchesThisRSE && touchesOtherRSE) return orp;\n          // either the two segments match exactly (two trival intersections)\n          // or just on their left endpoint (one trivial intersection\n          return null;\n        }\n\n        // does this left endpoint matches (other doesn't)\n        if (touchesThisLSE) {\n          // check for segments that just intersect on opposing endpoints\n          if (touchesOtherRSE) {\n            if (tlp.x === orp.x && tlp.y === orp.y) return null;\n          }\n          // t-intersection on left endpoint\n          return tlp;\n        }\n\n        // does other left endpoint matches (this doesn't)\n        if (touchesOtherLSE) {\n          // check for segments that just intersect on opposing endpoints\n          if (touchesThisRSE) {\n            if (trp.x === olp.x && trp.y === olp.y) return null;\n          }\n          // t-intersection on left endpoint\n          return olp;\n        }\n\n        // trivial intersection on right endpoints\n        if (touchesThisRSE && touchesOtherRSE) return null;\n\n        // t-intersections on just one right endpoint\n        if (touchesThisRSE) return trp;\n        if (touchesOtherRSE) return orp;\n\n        // None of our endpoints intersect. Look for a general intersection between\n        // infinite lines laid over the segments\n        const pt = intersection$1(tlp, this.vector(), olp, other.vector());\n\n        // are the segments parrallel? Note that if they were colinear with overlap,\n        // they would have an endpoint intersection and that case was already handled above\n        if (pt === null) return null;\n\n        // is the intersection found between the lines not on the segments?\n        if (!isInBbox(bboxOverlap, pt)) return null;\n\n        // round the the computed point if needed\n        return rounder.round(pt.x, pt.y);\n      }\n\n      /**\n       * Split the given segment into multiple segments on the given points.\n       *  * Each existing segment will retain its leftSE and a new rightSE will be\n       *    generated for it.\n       *  * A new segment will be generated which will adopt the original segment's\n       *    rightSE, and a new leftSE will be generated for it.\n       *  * If there are more than two points given to split on, new segments\n       *    in the middle will be generated with new leftSE and rightSE's.\n       *  * An array of the newly generated SweepEvents will be returned.\n       *\n       * Warning: input array of points is modified\n       */\n      split(point) {\n        const newEvents = [];\n        const alreadyLinked = point.events !== undefined;\n        const newLeftSE = new SweepEvent(point, true);\n        const newRightSE = new SweepEvent(point, false);\n        const oldRightSE = this.rightSE;\n        this.replaceRightSE(newRightSE);\n        newEvents.push(newRightSE);\n        newEvents.push(newLeftSE);\n        const newSeg = new Segment(newLeftSE, oldRightSE, this.rings.slice(), this.windings.slice());\n\n        // when splitting a nearly vertical downward-facing segment,\n        // sometimes one of the resulting new segments is vertical, in which\n        // case its left and right events may need to be swapped\n        if (SweepEvent.comparePoints(newSeg.leftSE.point, newSeg.rightSE.point) > 0) {\n          newSeg.swapEvents();\n        }\n        if (SweepEvent.comparePoints(this.leftSE.point, this.rightSE.point) > 0) {\n          this.swapEvents();\n        }\n\n        // in the point we just used to create new sweep events with was already\n        // linked to other events, we need to check if either of the affected\n        // segments should be consumed\n        if (alreadyLinked) {\n          newLeftSE.checkForConsuming();\n          newRightSE.checkForConsuming();\n        }\n        return newEvents;\n      }\n\n      /* Swap which event is left and right */\n      swapEvents() {\n        const tmpEvt = this.rightSE;\n        this.rightSE = this.leftSE;\n        this.leftSE = tmpEvt;\n        this.leftSE.isLeft = true;\n        this.rightSE.isLeft = false;\n        for (let i = 0, iMax = this.windings.length; i < iMax; i++) {\n          this.windings[i] *= -1;\n        }\n      }\n\n      /* Consume another segment. We take their rings under our wing\n       * and mark them as consumed. Use for perfectly overlapping segments */\n      consume(other) {\n        let consumer = this;\n        let consumee = other;\n        while (consumer.consumedBy) consumer = consumer.consumedBy;\n        while (consumee.consumedBy) consumee = consumee.consumedBy;\n        const cmp = Segment.compare(consumer, consumee);\n        if (cmp === 0) return; // already consumed\n        // the winner of the consumption is the earlier segment\n        // according to sweep line ordering\n        if (cmp > 0) {\n          const tmp = consumer;\n          consumer = consumee;\n          consumee = tmp;\n        }\n\n        // make sure a segment doesn't consume it's prev\n        if (consumer.prev === consumee) {\n          const tmp = consumer;\n          consumer = consumee;\n          consumee = tmp;\n        }\n        for (let i = 0, iMax = consumee.rings.length; i < iMax; i++) {\n          const ring = consumee.rings[i];\n          const winding = consumee.windings[i];\n          const index = consumer.rings.indexOf(ring);\n          if (index === -1) {\n            consumer.rings.push(ring);\n            consumer.windings.push(winding);\n          } else consumer.windings[index] += winding;\n        }\n        consumee.rings = null;\n        consumee.windings = null;\n        consumee.consumedBy = consumer;\n\n        // mark sweep events consumed as to maintain ordering in sweep event queue\n        consumee.leftSE.consumedBy = consumer.leftSE;\n        consumee.rightSE.consumedBy = consumer.rightSE;\n      }\n\n      /* The first segment previous segment chain that is in the result */\n      prevInResult() {\n        if (this._prevInResult !== undefined) return this._prevInResult;\n        if (!this.prev) this._prevInResult = null;else if (this.prev.isInResult()) this._prevInResult = this.prev;else this._prevInResult = this.prev.prevInResult();\n        return this._prevInResult;\n      }\n      beforeState() {\n        if (this._beforeState !== undefined) return this._beforeState;\n        if (!this.prev) this._beforeState = {\n          rings: [],\n          windings: [],\n          multiPolys: []\n        };else {\n          const seg = this.prev.consumedBy || this.prev;\n          this._beforeState = seg.afterState();\n        }\n        return this._beforeState;\n      }\n      afterState() {\n        if (this._afterState !== undefined) return this._afterState;\n        const beforeState = this.beforeState();\n        this._afterState = {\n          rings: beforeState.rings.slice(0),\n          windings: beforeState.windings.slice(0),\n          multiPolys: []\n        };\n        const ringsAfter = this._afterState.rings;\n        const windingsAfter = this._afterState.windings;\n        const mpsAfter = this._afterState.multiPolys;\n\n        // calculate ringsAfter, windingsAfter\n        for (let i = 0, iMax = this.rings.length; i < iMax; i++) {\n          const ring = this.rings[i];\n          const winding = this.windings[i];\n          const index = ringsAfter.indexOf(ring);\n          if (index === -1) {\n            ringsAfter.push(ring);\n            windingsAfter.push(winding);\n          } else windingsAfter[index] += winding;\n        }\n\n        // calcualte polysAfter\n        const polysAfter = [];\n        const polysExclude = [];\n        for (let i = 0, iMax = ringsAfter.length; i < iMax; i++) {\n          if (windingsAfter[i] === 0) continue; // non-zero rule\n          const ring = ringsAfter[i];\n          const poly = ring.poly;\n          if (polysExclude.indexOf(poly) !== -1) continue;\n          if (ring.isExterior) polysAfter.push(poly);else {\n            if (polysExclude.indexOf(poly) === -1) polysExclude.push(poly);\n            const index = polysAfter.indexOf(ring.poly);\n            if (index !== -1) polysAfter.splice(index, 1);\n          }\n        }\n\n        // calculate multiPolysAfter\n        for (let i = 0, iMax = polysAfter.length; i < iMax; i++) {\n          const mp = polysAfter[i].multiPoly;\n          if (mpsAfter.indexOf(mp) === -1) mpsAfter.push(mp);\n        }\n        return this._afterState;\n      }\n\n      /* Is this segment part of the final result? */\n      isInResult() {\n        // if we've been consumed, we're not in the result\n        if (this.consumedBy) return false;\n        if (this._isInResult !== undefined) return this._isInResult;\n        const mpsBefore = this.beforeState().multiPolys;\n        const mpsAfter = this.afterState().multiPolys;\n        switch (operation.type) {\n          case \"union\":\n            {\n              // UNION - included iff:\n              //  * On one side of us there is 0 poly interiors AND\n              //  * On the other side there is 1 or more.\n              const noBefores = mpsBefore.length === 0;\n              const noAfters = mpsAfter.length === 0;\n              this._isInResult = noBefores !== noAfters;\n              break;\n            }\n          case \"intersection\":\n            {\n              // INTERSECTION - included iff:\n              //  * on one side of us all multipolys are rep. with poly interiors AND\n              //  * on the other side of us, not all multipolys are repsented\n              //    with poly interiors\n              let least;\n              let most;\n              if (mpsBefore.length < mpsAfter.length) {\n                least = mpsBefore.length;\n                most = mpsAfter.length;\n              } else {\n                least = mpsAfter.length;\n                most = mpsBefore.length;\n              }\n              this._isInResult = most === operation.numMultiPolys && least < most;\n              break;\n            }\n          case \"xor\":\n            {\n              // XOR - included iff:\n              //  * the difference between the number of multipolys represented\n              //    with poly interiors on our two sides is an odd number\n              const diff = Math.abs(mpsBefore.length - mpsAfter.length);\n              this._isInResult = diff % 2 === 1;\n              break;\n            }\n          case \"difference\":\n            {\n              // DIFFERENCE included iff:\n              //  * on exactly one side, we have just the subject\n              const isJustSubject = mps => mps.length === 1 && mps[0].isSubject;\n              this._isInResult = isJustSubject(mpsBefore) !== isJustSubject(mpsAfter);\n              break;\n            }\n          default:\n            throw new Error(`Unrecognized operation type found ${operation.type}`);\n        }\n        return this._isInResult;\n      }\n    }\n\n    class RingIn {\n      constructor(geomRing, poly, isExterior) {\n        if (!Array.isArray(geomRing) || geomRing.length === 0) {\n          throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n        }\n        this.poly = poly;\n        this.isExterior = isExterior;\n        this.segments = [];\n        if (typeof geomRing[0][0] !== \"number\" || typeof geomRing[0][1] !== \"number\") {\n          throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n        }\n        const firstPoint = rounder.round(geomRing[0][0], geomRing[0][1]);\n        this.bbox = {\n          ll: {\n            x: firstPoint.x,\n            y: firstPoint.y\n          },\n          ur: {\n            x: firstPoint.x,\n            y: firstPoint.y\n          }\n        };\n        let prevPoint = firstPoint;\n        for (let i = 1, iMax = geomRing.length; i < iMax; i++) {\n          if (typeof geomRing[i][0] !== \"number\" || typeof geomRing[i][1] !== \"number\") {\n            throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n          }\n          let point = rounder.round(geomRing[i][0], geomRing[i][1]);\n          // skip repeated points\n          if (point.x === prevPoint.x && point.y === prevPoint.y) continue;\n          this.segments.push(Segment.fromRing(prevPoint, point, this));\n          if (point.x < this.bbox.ll.x) this.bbox.ll.x = point.x;\n          if (point.y < this.bbox.ll.y) this.bbox.ll.y = point.y;\n          if (point.x > this.bbox.ur.x) this.bbox.ur.x = point.x;\n          if (point.y > this.bbox.ur.y) this.bbox.ur.y = point.y;\n          prevPoint = point;\n        }\n        // add segment from last to first if last is not the same as first\n        if (firstPoint.x !== prevPoint.x || firstPoint.y !== prevPoint.y) {\n          this.segments.push(Segment.fromRing(prevPoint, firstPoint, this));\n        }\n      }\n      getSweepEvents() {\n        const sweepEvents = [];\n        for (let i = 0, iMax = this.segments.length; i < iMax; i++) {\n          const segment = this.segments[i];\n          sweepEvents.push(segment.leftSE);\n          sweepEvents.push(segment.rightSE);\n        }\n        return sweepEvents;\n      }\n    }\n    class PolyIn {\n      constructor(geomPoly, multiPoly) {\n        if (!Array.isArray(geomPoly)) {\n          throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n        }\n        this.exteriorRing = new RingIn(geomPoly[0], this, true);\n        // copy by value\n        this.bbox = {\n          ll: {\n            x: this.exteriorRing.bbox.ll.x,\n            y: this.exteriorRing.bbox.ll.y\n          },\n          ur: {\n            x: this.exteriorRing.bbox.ur.x,\n            y: this.exteriorRing.bbox.ur.y\n          }\n        };\n        this.interiorRings = [];\n        for (let i = 1, iMax = geomPoly.length; i < iMax; i++) {\n          const ring = new RingIn(geomPoly[i], this, false);\n          if (ring.bbox.ll.x < this.bbox.ll.x) this.bbox.ll.x = ring.bbox.ll.x;\n          if (ring.bbox.ll.y < this.bbox.ll.y) this.bbox.ll.y = ring.bbox.ll.y;\n          if (ring.bbox.ur.x > this.bbox.ur.x) this.bbox.ur.x = ring.bbox.ur.x;\n          if (ring.bbox.ur.y > this.bbox.ur.y) this.bbox.ur.y = ring.bbox.ur.y;\n          this.interiorRings.push(ring);\n        }\n        this.multiPoly = multiPoly;\n      }\n      getSweepEvents() {\n        const sweepEvents = this.exteriorRing.getSweepEvents();\n        for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n          const ringSweepEvents = this.interiorRings[i].getSweepEvents();\n          for (let j = 0, jMax = ringSweepEvents.length; j < jMax; j++) {\n            sweepEvents.push(ringSweepEvents[j]);\n          }\n        }\n        return sweepEvents;\n      }\n    }\n    class MultiPolyIn {\n      constructor(geom, isSubject) {\n        if (!Array.isArray(geom)) {\n          throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n        }\n        try {\n          // if the input looks like a polygon, convert it to a multipolygon\n          if (typeof geom[0][0][0] === \"number\") geom = [geom];\n        } catch (ex) {\n          // The input is either malformed or has empty arrays.\n          // In either case, it will be handled later on.\n        }\n        this.polys = [];\n        this.bbox = {\n          ll: {\n            x: Number.POSITIVE_INFINITY,\n            y: Number.POSITIVE_INFINITY\n          },\n          ur: {\n            x: Number.NEGATIVE_INFINITY,\n            y: Number.NEGATIVE_INFINITY\n          }\n        };\n        for (let i = 0, iMax = geom.length; i < iMax; i++) {\n          const poly = new PolyIn(geom[i], this);\n          if (poly.bbox.ll.x < this.bbox.ll.x) this.bbox.ll.x = poly.bbox.ll.x;\n          if (poly.bbox.ll.y < this.bbox.ll.y) this.bbox.ll.y = poly.bbox.ll.y;\n          if (poly.bbox.ur.x > this.bbox.ur.x) this.bbox.ur.x = poly.bbox.ur.x;\n          if (poly.bbox.ur.y > this.bbox.ur.y) this.bbox.ur.y = poly.bbox.ur.y;\n          this.polys.push(poly);\n        }\n        this.isSubject = isSubject;\n      }\n      getSweepEvents() {\n        const sweepEvents = [];\n        for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n          const polySweepEvents = this.polys[i].getSweepEvents();\n          for (let j = 0, jMax = polySweepEvents.length; j < jMax; j++) {\n            sweepEvents.push(polySweepEvents[j]);\n          }\n        }\n        return sweepEvents;\n      }\n    }\n\n    class RingOut {\n      /* Given the segments from the sweep line pass, compute & return a series\n       * of closed rings from all the segments marked to be part of the result */\n      static factory(allSegments) {\n        const ringsOut = [];\n        for (let i = 0, iMax = allSegments.length; i < iMax; i++) {\n          const segment = allSegments[i];\n          if (!segment.isInResult() || segment.ringOut) continue;\n          let prevEvent = null;\n          let event = segment.leftSE;\n          let nextEvent = segment.rightSE;\n          const events = [event];\n          const startingPoint = event.point;\n          const intersectionLEs = [];\n\n          /* Walk the chain of linked events to form a closed ring */\n          while (true) {\n            prevEvent = event;\n            event = nextEvent;\n            events.push(event);\n\n            /* Is the ring complete? */\n            if (event.point === startingPoint) break;\n            while (true) {\n              const availableLEs = event.getAvailableLinkedEvents();\n\n              /* Did we hit a dead end? This shouldn't happen.\n               * Indicates some earlier part of the algorithm malfunctioned. */\n              if (availableLEs.length === 0) {\n                const firstPt = events[0].point;\n                const lastPt = events[events.length - 1].point;\n                throw new Error(`Unable to complete output ring starting at [${firstPt.x},` + ` ${firstPt.y}]. Last matching segment found ends at` + ` [${lastPt.x}, ${lastPt.y}].`);\n              }\n\n              /* Only one way to go, so cotinue on the path */\n              if (availableLEs.length === 1) {\n                nextEvent = availableLEs[0].otherSE;\n                break;\n              }\n\n              /* We must have an intersection. Check for a completed loop */\n              let indexLE = null;\n              for (let j = 0, jMax = intersectionLEs.length; j < jMax; j++) {\n                if (intersectionLEs[j].point === event.point) {\n                  indexLE = j;\n                  break;\n                }\n              }\n              /* Found a completed loop. Cut that off and make a ring */\n              if (indexLE !== null) {\n                const intersectionLE = intersectionLEs.splice(indexLE)[0];\n                const ringEvents = events.splice(intersectionLE.index);\n                ringEvents.unshift(ringEvents[0].otherSE);\n                ringsOut.push(new RingOut(ringEvents.reverse()));\n                continue;\n              }\n              /* register the intersection */\n              intersectionLEs.push({\n                index: events.length,\n                point: event.point\n              });\n              /* Choose the left-most option to continue the walk */\n              const comparator = event.getLeftmostComparator(prevEvent);\n              nextEvent = availableLEs.sort(comparator)[0].otherSE;\n              break;\n            }\n          }\n          ringsOut.push(new RingOut(events));\n        }\n        return ringsOut;\n      }\n      constructor(events) {\n        this.events = events;\n        for (let i = 0, iMax = events.length; i < iMax; i++) {\n          events[i].segment.ringOut = this;\n        }\n        this.poly = null;\n      }\n      getGeom() {\n        // Remove superfluous points (ie extra points along a straight line),\n        let prevPt = this.events[0].point;\n        const points = [prevPt];\n        for (let i = 1, iMax = this.events.length - 1; i < iMax; i++) {\n          const pt = this.events[i].point;\n          const nextPt = this.events[i + 1].point;\n          if (compareVectorAngles(pt, prevPt, nextPt) === 0) continue;\n          points.push(pt);\n          prevPt = pt;\n        }\n\n        // ring was all (within rounding error of angle calc) colinear points\n        if (points.length === 1) return null;\n\n        // check if the starting point is necessary\n        const pt = points[0];\n        const nextPt = points[1];\n        if (compareVectorAngles(pt, prevPt, nextPt) === 0) points.shift();\n        points.push(points[0]);\n        const step = this.isExteriorRing() ? 1 : -1;\n        const iStart = this.isExteriorRing() ? 0 : points.length - 1;\n        const iEnd = this.isExteriorRing() ? points.length : -1;\n        const orderedPoints = [];\n        for (let i = iStart; i != iEnd; i += step) orderedPoints.push([points[i].x, points[i].y]);\n        return orderedPoints;\n      }\n      isExteriorRing() {\n        if (this._isExteriorRing === undefined) {\n          const enclosing = this.enclosingRing();\n          this._isExteriorRing = enclosing ? !enclosing.isExteriorRing() : true;\n        }\n        return this._isExteriorRing;\n      }\n      enclosingRing() {\n        if (this._enclosingRing === undefined) {\n          this._enclosingRing = this._calcEnclosingRing();\n        }\n        return this._enclosingRing;\n      }\n\n      /* Returns the ring that encloses this one, if any */\n      _calcEnclosingRing() {\n        // start with the ealier sweep line event so that the prevSeg\n        // chain doesn't lead us inside of a loop of ours\n        let leftMostEvt = this.events[0];\n        for (let i = 1, iMax = this.events.length; i < iMax; i++) {\n          const evt = this.events[i];\n          if (SweepEvent.compare(leftMostEvt, evt) > 0) leftMostEvt = evt;\n        }\n        let prevSeg = leftMostEvt.segment.prevInResult();\n        let prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n        while (true) {\n          // no segment found, thus no ring can enclose us\n          if (!prevSeg) return null;\n\n          // no segments below prev segment found, thus the ring of the prev\n          // segment must loop back around and enclose us\n          if (!prevPrevSeg) return prevSeg.ringOut;\n\n          // if the two segments are of different rings, the ring of the prev\n          // segment must either loop around us or the ring of the prev prev\n          // seg, which would make us and the ring of the prev peers\n          if (prevPrevSeg.ringOut !== prevSeg.ringOut) {\n            if (prevPrevSeg.ringOut.enclosingRing() !== prevSeg.ringOut) {\n              return prevSeg.ringOut;\n            } else return prevSeg.ringOut.enclosingRing();\n          }\n\n          // two segments are from the same ring, so this was a penisula\n          // of that ring. iterate downward, keep searching\n          prevSeg = prevPrevSeg.prevInResult();\n          prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n        }\n      }\n    }\n    class PolyOut {\n      constructor(exteriorRing) {\n        this.exteriorRing = exteriorRing;\n        exteriorRing.poly = this;\n        this.interiorRings = [];\n      }\n      addInterior(ring) {\n        this.interiorRings.push(ring);\n        ring.poly = this;\n      }\n      getGeom() {\n        const geom = [this.exteriorRing.getGeom()];\n        // exterior ring was all (within rounding error of angle calc) colinear points\n        if (geom[0] === null) return null;\n        for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n          const ringGeom = this.interiorRings[i].getGeom();\n          // interior ring was all (within rounding error of angle calc) colinear points\n          if (ringGeom === null) continue;\n          geom.push(ringGeom);\n        }\n        return geom;\n      }\n    }\n    class MultiPolyOut {\n      constructor(rings) {\n        this.rings = rings;\n        this.polys = this._composePolys(rings);\n      }\n      getGeom() {\n        const geom = [];\n        for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n          const polyGeom = this.polys[i].getGeom();\n          // exterior ring was all (within rounding error of angle calc) colinear points\n          if (polyGeom === null) continue;\n          geom.push(polyGeom);\n        }\n        return geom;\n      }\n      _composePolys(rings) {\n        const polys = [];\n        for (let i = 0, iMax = rings.length; i < iMax; i++) {\n          const ring = rings[i];\n          if (ring.poly) continue;\n          if (ring.isExteriorRing()) polys.push(new PolyOut(ring));else {\n            const enclosingRing = ring.enclosingRing();\n            if (!enclosingRing.poly) polys.push(new PolyOut(enclosingRing));\n            enclosingRing.poly.addInterior(ring);\n          }\n        }\n        return polys;\n      }\n    }\n\n    /**\n     * NOTE:  We must be careful not to change any segments while\n     *        they are in the SplayTree. AFAIK, there's no way to tell\n     *        the tree to rebalance itself - thus before splitting\n     *        a segment that's in the tree, we remove it from the tree,\n     *        do the split, then re-insert it. (Even though splitting a\n     *        segment *shouldn't* change its correct position in the\n     *        sweep line tree, the reality is because of rounding errors,\n     *        it sometimes does.)\n     */\n\n    class SweepLine {\n      constructor(queue) {\n        let comparator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Segment.compare;\n        this.queue = queue;\n        this.tree = new Tree(comparator);\n        this.segments = [];\n      }\n      process(event) {\n        const segment = event.segment;\n        const newEvents = [];\n\n        // if we've already been consumed by another segment,\n        // clean up our body parts and get out\n        if (event.consumedBy) {\n          if (event.isLeft) this.queue.remove(event.otherSE);else this.tree.remove(segment);\n          return newEvents;\n        }\n        const node = event.isLeft ? this.tree.add(segment) : this.tree.find(segment);\n        if (!node) throw new Error(`Unable to find segment #${segment.id} ` + `[${segment.leftSE.point.x}, ${segment.leftSE.point.y}] -> ` + `[${segment.rightSE.point.x}, ${segment.rightSE.point.y}] ` + \"in SweepLine tree.\");\n        let prevNode = node;\n        let nextNode = node;\n        let prevSeg = undefined;\n        let nextSeg = undefined;\n\n        // skip consumed segments still in tree\n        while (prevSeg === undefined) {\n          prevNode = this.tree.prev(prevNode);\n          if (prevNode === null) prevSeg = null;else if (prevNode.key.consumedBy === undefined) prevSeg = prevNode.key;\n        }\n\n        // skip consumed segments still in tree\n        while (nextSeg === undefined) {\n          nextNode = this.tree.next(nextNode);\n          if (nextNode === null) nextSeg = null;else if (nextNode.key.consumedBy === undefined) nextSeg = nextNode.key;\n        }\n        if (event.isLeft) {\n          // Check for intersections against the previous segment in the sweep line\n          let prevMySplitter = null;\n          if (prevSeg) {\n            const prevInter = prevSeg.getIntersection(segment);\n            if (prevInter !== null) {\n              if (!segment.isAnEndpoint(prevInter)) prevMySplitter = prevInter;\n              if (!prevSeg.isAnEndpoint(prevInter)) {\n                const newEventsFromSplit = this._splitSafely(prevSeg, prevInter);\n                for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n                  newEvents.push(newEventsFromSplit[i]);\n                }\n              }\n            }\n          }\n\n          // Check for intersections against the next segment in the sweep line\n          let nextMySplitter = null;\n          if (nextSeg) {\n            const nextInter = nextSeg.getIntersection(segment);\n            if (nextInter !== null) {\n              if (!segment.isAnEndpoint(nextInter)) nextMySplitter = nextInter;\n              if (!nextSeg.isAnEndpoint(nextInter)) {\n                const newEventsFromSplit = this._splitSafely(nextSeg, nextInter);\n                for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n                  newEvents.push(newEventsFromSplit[i]);\n                }\n              }\n            }\n          }\n\n          // For simplicity, even if we find more than one intersection we only\n          // spilt on the 'earliest' (sweep-line style) of the intersections.\n          // The other intersection will be handled in a future process().\n          if (prevMySplitter !== null || nextMySplitter !== null) {\n            let mySplitter = null;\n            if (prevMySplitter === null) mySplitter = nextMySplitter;else if (nextMySplitter === null) mySplitter = prevMySplitter;else {\n              const cmpSplitters = SweepEvent.comparePoints(prevMySplitter, nextMySplitter);\n              mySplitter = cmpSplitters <= 0 ? prevMySplitter : nextMySplitter;\n            }\n\n            // Rounding errors can cause changes in ordering,\n            // so remove afected segments and right sweep events before splitting\n            this.queue.remove(segment.rightSE);\n            newEvents.push(segment.rightSE);\n            const newEventsFromSplit = segment.split(mySplitter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n          if (newEvents.length > 0) {\n            // We found some intersections, so re-do the current event to\n            // make sure sweep line ordering is totally consistent for later\n            // use with the segment 'prev' pointers\n            this.tree.remove(segment);\n            newEvents.push(event);\n          } else {\n            // done with left event\n            this.segments.push(segment);\n            segment.prev = prevSeg;\n          }\n        } else {\n          // event.isRight\n\n          // since we're about to be removed from the sweep line, check for\n          // intersections between our previous and next segments\n          if (prevSeg && nextSeg) {\n            const inter = prevSeg.getIntersection(nextSeg);\n            if (inter !== null) {\n              if (!prevSeg.isAnEndpoint(inter)) {\n                const newEventsFromSplit = this._splitSafely(prevSeg, inter);\n                for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n                  newEvents.push(newEventsFromSplit[i]);\n                }\n              }\n              if (!nextSeg.isAnEndpoint(inter)) {\n                const newEventsFromSplit = this._splitSafely(nextSeg, inter);\n                for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n                  newEvents.push(newEventsFromSplit[i]);\n                }\n              }\n            }\n          }\n          this.tree.remove(segment);\n        }\n        return newEvents;\n      }\n\n      /* Safely split a segment that is currently in the datastructures\n       * IE - a segment other than the one that is currently being processed. */\n      _splitSafely(seg, pt) {\n        // Rounding errors can cause changes in ordering,\n        // so remove afected segments and right sweep events before splitting\n        // removeNode() doesn't work, so have re-find the seg\n        // https://github.com/w8r/splay-tree/pull/5\n        this.tree.remove(seg);\n        const rightSE = seg.rightSE;\n        this.queue.remove(rightSE);\n        const newEvents = seg.split(pt);\n        newEvents.push(rightSE);\n        // splitting can trigger consumption\n        if (seg.consumedBy === undefined) this.tree.add(seg);\n        return newEvents;\n      }\n    }\n\n    // Limits on iterative processes to prevent infinite loops - usually caused by floating-point math round-off errors.\n    const POLYGON_CLIPPING_MAX_QUEUE_SIZE = typeof process !== \"undefined\" && process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE || 1000000;\n    const POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS = typeof process !== \"undefined\" && process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS || 1000000;\n    class Operation {\n      run(type, geom, moreGeoms) {\n        operation.type = type;\n        rounder.reset();\n\n        /* Convert inputs to MultiPoly objects */\n        const multipolys = [new MultiPolyIn(geom, true)];\n        for (let i = 0, iMax = moreGeoms.length; i < iMax; i++) {\n          multipolys.push(new MultiPolyIn(moreGeoms[i], false));\n        }\n        operation.numMultiPolys = multipolys.length;\n\n        /* BBox optimization for difference operation\n         * If the bbox of a multipolygon that's part of the clipping doesn't\n         * intersect the bbox of the subject at all, we can just drop that\n         * multiploygon. */\n        if (operation.type === \"difference\") {\n          // in place removal\n          const subject = multipolys[0];\n          let i = 1;\n          while (i < multipolys.length) {\n            if (getBboxOverlap(multipolys[i].bbox, subject.bbox) !== null) i++;else multipolys.splice(i, 1);\n          }\n        }\n\n        /* BBox optimization for intersection operation\n         * If we can find any pair of multipolygons whose bbox does not overlap,\n         * then the result will be empty. */\n        if (operation.type === \"intersection\") {\n          // TODO: this is O(n^2) in number of polygons. By sorting the bboxes,\n          //       it could be optimized to O(n * ln(n))\n          for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n            const mpA = multipolys[i];\n            for (let j = i + 1, jMax = multipolys.length; j < jMax; j++) {\n              if (getBboxOverlap(mpA.bbox, multipolys[j].bbox) === null) return [];\n            }\n          }\n        }\n\n        /* Put segment endpoints in a priority queue */\n        const queue = new Tree(SweepEvent.compare);\n        for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n          const sweepEvents = multipolys[i].getSweepEvents();\n          for (let j = 0, jMax = sweepEvents.length; j < jMax; j++) {\n            queue.insert(sweepEvents[j]);\n            if (queue.size > POLYGON_CLIPPING_MAX_QUEUE_SIZE) {\n              // prevents an infinite loop, an otherwise common manifestation of bugs\n              throw new Error(\"Infinite loop when putting segment endpoints in a priority queue \" + \"(queue size too big).\");\n            }\n          }\n        }\n\n        /* Pass the sweep line over those endpoints */\n        const sweepLine = new SweepLine(queue);\n        let prevQueueSize = queue.size;\n        let node = queue.pop();\n        while (node) {\n          const evt = node.key;\n          if (queue.size === prevQueueSize) {\n            // prevents an infinite loop, an otherwise common manifestation of bugs\n            const seg = evt.segment;\n            throw new Error(`Unable to pop() ${evt.isLeft ? \"left\" : \"right\"} SweepEvent ` + `[${evt.point.x}, ${evt.point.y}] from segment #${seg.id} ` + `[${seg.leftSE.point.x}, ${seg.leftSE.point.y}] -> ` + `[${seg.rightSE.point.x}, ${seg.rightSE.point.y}] from queue.`);\n          }\n          if (queue.size > POLYGON_CLIPPING_MAX_QUEUE_SIZE) {\n            // prevents an infinite loop, an otherwise common manifestation of bugs\n            throw new Error(\"Infinite loop when passing sweep line over endpoints \" + \"(queue size too big).\");\n          }\n          if (sweepLine.segments.length > POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS) {\n            // prevents an infinite loop, an otherwise common manifestation of bugs\n            throw new Error(\"Infinite loop when passing sweep line over endpoints \" + \"(too many sweep line segments).\");\n          }\n          const newEvents = sweepLine.process(evt);\n          for (let i = 0, iMax = newEvents.length; i < iMax; i++) {\n            const evt = newEvents[i];\n            if (evt.consumedBy === undefined) queue.insert(evt);\n          }\n          prevQueueSize = queue.size;\n          node = queue.pop();\n        }\n\n        // free some memory we don't need anymore\n        rounder.reset();\n\n        /* Collect and compile segments we're keeping into a multipolygon */\n        const ringsOut = RingOut.factory(sweepLine.segments);\n        const result = new MultiPolyOut(ringsOut);\n        return result.getGeom();\n      }\n    }\n\n    // singleton available by import\n    const operation = new Operation();\n\n    const union = function (geom) {\n      for (var _len = arguments.length, moreGeoms = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        moreGeoms[_key - 1] = arguments[_key];\n      }\n      return operation.run(\"union\", geom, moreGeoms);\n    };\n    const intersection = function (geom) {\n      for (var _len2 = arguments.length, moreGeoms = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        moreGeoms[_key2 - 1] = arguments[_key2];\n      }\n      return operation.run(\"intersection\", geom, moreGeoms);\n    };\n    const xor = function (geom) {\n      for (var _len3 = arguments.length, moreGeoms = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        moreGeoms[_key3 - 1] = arguments[_key3];\n      }\n      return operation.run(\"xor\", geom, moreGeoms);\n    };\n    const difference = function (subjectGeom) {\n      for (var _len4 = arguments.length, clippingGeoms = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        clippingGeoms[_key4 - 1] = arguments[_key4];\n      }\n      return operation.run(\"difference\", subjectGeom, clippingGeoms);\n    };\n    var index = {\n      union: union,\n      intersection: intersection,\n      xor: xor,\n      difference: difference\n    };\n\n    return index;\n\n}));\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","/*\n\tBased on rgbcolor.js by Stoyan Stefanov <sstoo@gmail.com>\n\thttp://www.phpied.com/rgb-color-parser-in-javascript/\n*/\n\nmodule.exports = function(color_string) {\n    this.ok = false;\n    this.alpha = 1.0;\n\n    // strip any leading #\n    if (color_string.charAt(0) == '#') { // remove # if any\n        color_string = color_string.substr(1,6);\n    }\n\n    color_string = color_string.replace(/ /g,'');\n    color_string = color_string.toLowerCase();\n\n    // before getting into regexps, try simple matches\n    // and overwrite the input\n    var simple_colors = {\n        aliceblue: 'f0f8ff',\n        antiquewhite: 'faebd7',\n        aqua: '00ffff',\n        aquamarine: '7fffd4',\n        azure: 'f0ffff',\n        beige: 'f5f5dc',\n        bisque: 'ffe4c4',\n        black: '000000',\n        blanchedalmond: 'ffebcd',\n        blue: '0000ff',\n        blueviolet: '8a2be2',\n        brown: 'a52a2a',\n        burlywood: 'deb887',\n        cadetblue: '5f9ea0',\n        chartreuse: '7fff00',\n        chocolate: 'd2691e',\n        coral: 'ff7f50',\n        cornflowerblue: '6495ed',\n        cornsilk: 'fff8dc',\n        crimson: 'dc143c',\n        cyan: '00ffff',\n        darkblue: '00008b',\n        darkcyan: '008b8b',\n        darkgoldenrod: 'b8860b',\n        darkgray: 'a9a9a9',\n        darkgreen: '006400',\n        darkkhaki: 'bdb76b',\n        darkmagenta: '8b008b',\n        darkolivegreen: '556b2f',\n        darkorange: 'ff8c00',\n        darkorchid: '9932cc',\n        darkred: '8b0000',\n        darksalmon: 'e9967a',\n        darkseagreen: '8fbc8f',\n        darkslateblue: '483d8b',\n        darkslategray: '2f4f4f',\n        darkturquoise: '00ced1',\n        darkviolet: '9400d3',\n        deeppink: 'ff1493',\n        deepskyblue: '00bfff',\n        dimgray: '696969',\n        dodgerblue: '1e90ff',\n        feldspar: 'd19275',\n        firebrick: 'b22222',\n        floralwhite: 'fffaf0',\n        forestgreen: '228b22',\n        fuchsia: 'ff00ff',\n        gainsboro: 'dcdcdc',\n        ghostwhite: 'f8f8ff',\n        gold: 'ffd700',\n        goldenrod: 'daa520',\n        gray: '808080',\n        green: '008000',\n        greenyellow: 'adff2f',\n        honeydew: 'f0fff0',\n        hotpink: 'ff69b4',\n        indianred : 'cd5c5c',\n        indigo : '4b0082',\n        ivory: 'fffff0',\n        khaki: 'f0e68c',\n        lavender: 'e6e6fa',\n        lavenderblush: 'fff0f5',\n        lawngreen: '7cfc00',\n        lemonchiffon: 'fffacd',\n        lightblue: 'add8e6',\n        lightcoral: 'f08080',\n        lightcyan: 'e0ffff',\n        lightgoldenrodyellow: 'fafad2',\n        lightgrey: 'd3d3d3',\n        lightgreen: '90ee90',\n        lightpink: 'ffb6c1',\n        lightsalmon: 'ffa07a',\n        lightseagreen: '20b2aa',\n        lightskyblue: '87cefa',\n        lightslateblue: '8470ff',\n        lightslategray: '778899',\n        lightsteelblue: 'b0c4de',\n        lightyellow: 'ffffe0',\n        lime: '00ff00',\n        limegreen: '32cd32',\n        linen: 'faf0e6',\n        magenta: 'ff00ff',\n        maroon: '800000',\n        mediumaquamarine: '66cdaa',\n        mediumblue: '0000cd',\n        mediumorchid: 'ba55d3',\n        mediumpurple: '9370d8',\n        mediumseagreen: '3cb371',\n        mediumslateblue: '7b68ee',\n        mediumspringgreen: '00fa9a',\n        mediumturquoise: '48d1cc',\n        mediumvioletred: 'c71585',\n        midnightblue: '191970',\n        mintcream: 'f5fffa',\n        mistyrose: 'ffe4e1',\n        moccasin: 'ffe4b5',\n        navajowhite: 'ffdead',\n        navy: '000080',\n        oldlace: 'fdf5e6',\n        olive: '808000',\n        olivedrab: '6b8e23',\n        orange: 'ffa500',\n        orangered: 'ff4500',\n        orchid: 'da70d6',\n        palegoldenrod: 'eee8aa',\n        palegreen: '98fb98',\n        paleturquoise: 'afeeee',\n        palevioletred: 'd87093',\n        papayawhip: 'ffefd5',\n        peachpuff: 'ffdab9',\n        peru: 'cd853f',\n        pink: 'ffc0cb',\n        plum: 'dda0dd',\n        powderblue: 'b0e0e6',\n        purple: '800080',\n        rebeccapurple: '663399',\n        red: 'ff0000',\n        rosybrown: 'bc8f8f',\n        royalblue: '4169e1',\n        saddlebrown: '8b4513',\n        salmon: 'fa8072',\n        sandybrown: 'f4a460',\n        seagreen: '2e8b57',\n        seashell: 'fff5ee',\n        sienna: 'a0522d',\n        silver: 'c0c0c0',\n        skyblue: '87ceeb',\n        slateblue: '6a5acd',\n        slategray: '708090',\n        snow: 'fffafa',\n        springgreen: '00ff7f',\n        steelblue: '4682b4',\n        tan: 'd2b48c',\n        teal: '008080',\n        thistle: 'd8bfd8',\n        tomato: 'ff6347',\n        turquoise: '40e0d0',\n        violet: 'ee82ee',\n        violetred: 'd02090',\n        wheat: 'f5deb3',\n        white: 'ffffff',\n        whitesmoke: 'f5f5f5',\n        yellow: 'ffff00',\n        yellowgreen: '9acd32'\n    };\n    color_string = simple_colors[color_string] || color_string;\n    // emd of simple type-in colors\n\n    // array of color definition objects\n    var color_defs = [\n        {\n            re: /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*((?:\\d?\\.)?\\d)\\)$/,\n            example: ['rgba(123, 234, 45, 0.8)', 'rgba(255,234,245,1.0)'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1]),\n                    parseInt(bits[2]),\n                    parseInt(bits[3]),\n                    parseFloat(bits[4])\n                ];\n            }\n        },\n        {\n            re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n            example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1]),\n                    parseInt(bits[2]),\n                    parseInt(bits[3])\n                ];\n            }\n        },\n        {\n            re: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n            example: ['#00ff00', '336699'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1], 16),\n                    parseInt(bits[2], 16),\n                    parseInt(bits[3], 16)\n                ];\n            }\n        },\n        {\n            re: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            example: ['#fb0', 'f0f'],\n            process: function (bits){\n                return [\n                    parseInt(bits[1] + bits[1], 16),\n                    parseInt(bits[2] + bits[2], 16),\n                    parseInt(bits[3] + bits[3], 16)\n                ];\n            }\n        }\n    ];\n\n    // search through the definitions to find a match\n    for (var i = 0; i < color_defs.length; i++) {\n        var re = color_defs[i].re;\n        var processor = color_defs[i].process;\n        var bits = re.exec(color_string);\n        if (bits) {\n            var channels = processor(bits);\n            this.r = channels[0];\n            this.g = channels[1];\n            this.b = channels[2];\n            if (channels.length > 3) {\n                this.alpha = channels[3];\n            }\n            this.ok = true;\n        }\n\n    }\n\n    // validate/cleanup values\n    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);\n    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);\n    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);\n    this.alpha = (this.alpha < 0) ? 0 : ((this.alpha > 1.0 || isNaN(this.alpha)) ? 1.0 : this.alpha);\n\n    // some getters\n    this.toRGB = function () {\n        return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';\n    }\n    this.toRGBA = function () {\n        return 'rgba(' + this.r + ', ' + this.g + ', ' + this.b + ', ' + this.alpha + ')';\n    }\n    this.toHex = function () {\n        var r = this.r.toString(16);\n        var g = this.g.toString(16);\n        var b = this.b.toString(16);\n        if (r.length == 1) r = '0' + r;\n        if (g.length == 1) g = '0' + g;\n        if (b.length == 1) b = '0' + b;\n        return '#' + r + g + b;\n    }\n\n    // help\n    this.getHelpXML = function () {\n\n        var examples = new Array();\n        // add regexps\n        for (var i = 0; i < color_defs.length; i++) {\n            var example = color_defs[i].example;\n            for (var j = 0; j < example.length; j++) {\n                examples[examples.length] = example[j];\n            }\n        }\n        // add type-in colors\n        for (var sc in simple_colors) {\n            examples[examples.length] = sc;\n        }\n\n        var xml = document.createElement('ul');\n        xml.setAttribute('id', 'rgbcolor-examples');\n        for (var i = 0; i < examples.length; i++) {\n            try {\n                var list_item = document.createElement('li');\n                var list_color = new RGBColor(examples[i]);\n                var example_div = document.createElement('div');\n                example_div.style.cssText =\n                        'margin: 3px; '\n                        + 'border: 1px solid black; '\n                        + 'background:' + list_color.toHex() + '; '\n                        + 'color:' + list_color.toHex()\n                ;\n                example_div.appendChild(document.createTextNode('test'));\n                var list_item_value = document.createTextNode(\n                    ' ' + examples[i] + ' -> ' + list_color.toRGB() + ' -> ' + list_color.toHex()\n                );\n                list_item.appendChild(example_div);\n                list_item.appendChild(list_item_value);\n                xml.appendChild(list_item);\n\n            } catch(e){}\n        }\n        return xml;\n\n    }\n\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","export class Typewriter {\r\n    constructor(textboxId, speed = 25, cursorChar = \"\") {\r\n        this.textbox = document.getElementById(textboxId);\r\n        this.speed = speed;\r\n        this.cursorChar = cursorChar;\r\n        this.index = 0;\r\n        this.cursorVisible = true;\r\n        this.message = \"\";\r\n        this.onComplete = undefined;  // store callback\r\n        this.resolve = null;\r\n\r\n        setInterval(() => {\r\n            this.cursorVisible = !this.cursorVisible;\r\n            this.updateText();\r\n        }, 500);\r\n    }\r\n\r\n    updateText() {\r\n        const typed = this.message.substring(0, this.index);\r\n        this.textbox.value = typed + (this.cursorVisible ? this.cursorChar : \" \");\r\n        this.textbox.scrollTop = this.textbox.scrollHeight;\r\n    }\r\n\r\n    typeMessage(newMessage, resolveCallback) {\r\n        this.message = newMessage;\r\n        this.index = 0;\r\n        this.textbox.value = \"\";\r\n        this.resolve = resolveCallback;\r\n        this.typeCharacter();\r\n    }\r\n\r\n    typeCharacter() {\r\n        if (this.index <= this.message.length) {\r\n            this.updateText();\r\n            this.index++;\r\n            setTimeout(() => this.typeCharacter(), this.speed);\r\n        }\r\n        else {\r\n            //  Typing is done, call the resolve callback\r\n            if (typeof this.resolve === \"function\") {\r\n                this.resolve();\r\n                this.resolve = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.textbox.value = \"\";\r\n        this.message = \"\";\r\n        this.index = 0;\r\n    }\r\n}\r\n","import {Typewriter} from \"./Typewriter.js\";\r\nimport '../styles.css';\r\nimport {envState} from \"../settings\";\r\n\r\nexport class OzAssistant {\r\n    constructor(conditionFn) {\r\n        this.typewriter = new Typewriter(\"oztext-box\", 10);\r\n        this.conditionFn = conditionFn;\r\n        this.schedule = undefined;\r\n        this.commandRegistry = undefined;\r\n        this.previewRegistry = undefined;\r\n\r\n        // Execution state\r\n        this.timers = [];\r\n        this.intervals = [];\r\n        this.paused = false;\r\n        this.stopped = false;\r\n\r\n        this.scheduledItems = []; // Tracks pending items to reschedule after resume\r\n\r\n        this.confirmationStats = {\r\n            approved: 0,\r\n            denied: 0\r\n        };\r\n\r\n        this.confirmationLog = [];\r\n\r\n        this.options = undefined;\r\n\r\n        this.scriptStartTime = null;\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.commandRegistry = {\r\n            addPoint: ([x, y]) => {\r\n                // this.environment.voronoiPoints\r\n                // console.log(\"trying to a point to the environment at: \", x, y);\r\n            }\r\n        };\r\n\r\n        this.previewRegistry = {\r\n            addPoint: ([x, y]) => {\r\n                // this.environment.voronoiPoints\r\n                // console.log(\"trying to a point to the environment at: \", x, y);\r\n            }\r\n        };\r\n    }\r\n\r\n    async load(jsonUrl) {\r\n        this.reset();\r\n\r\n        try {\r\n            const response = await fetch(jsonUrl);\r\n            if (!response.ok) throw new Error(\"Failed to fetch messages JSON\");\r\n\r\n            const data = await response.json();\r\n\r\n            if (Array.isArray(data)) {\r\n                // fallback: treat raw array as items\r\n                this.schedule = data;\r\n                this.options = { sequential: false }; // default\r\n            } else {\r\n                this.schedule = Array.isArray(data.items) ? data.items : [];\r\n                this.options = { sequential: false, ...data.options }; // merge with defaults\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Error loading schedule:\", error);\r\n            this.typewriter.typeMessage(\"Failed to load messages.\");\r\n        }\r\n    }\r\n\r\n    start() {\r\n\r\n        this.scriptStartTime = Date.now(); //  Set start time once\r\n\r\n        if(this.schedule && !this.options.sequential) {\r\n            this.schedule.forEach(item => {\r\n                this.scheduleItem(item, item.time);\r\n\r\n                if (item.repeat === \"infinite\" && item.interval) {\r\n                    const infiniteTimer = setTimeout(() => {\r\n                        this.repeatIndefinitely(item);\r\n                    }, item.time + item.interval);\r\n                    this.timers.push(infiniteTimer);\r\n                } else if (typeof item.repeat === \"number\" && item.interval) {\r\n                    for (let i = 1; i <= item.repeat; i++) {\r\n                        this.scheduleItem(item, item.time + i * item.interval);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else if(this.schedule && this.options.sequential) {\r\n            console.log(\"run in sequence\");\r\n            this.runSequentialScript(this.schedule);\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        // Clear all timeouts/intervals\r\n        this.timers.forEach(clearTimeout);\r\n        this.intervals.forEach(clearInterval);\r\n        this.timers = [];\r\n        this.intervals = [];\r\n        this.scheduledItems = [];\r\n        this.paused = false;\r\n        this.stopped = false;\r\n        this.confirmationLog = [];\r\n        this.confirmationStats = {\r\n            approved: 0,\r\n            denied: 0\r\n        };\r\n    }\r\n\r\n    stop() {\r\n        this.reset();        // Cancel timers/intervals\r\n        this.stopped = true; // Block new execution\r\n    }\r\n\r\n    pause() {\r\n        if (this.paused) return;\r\n        this.paused = true;\r\n\r\n        // Cancel scheduled timers\r\n        this.scheduledItems.forEach(sched => {\r\n            clearTimeout(sched.timeoutId);\r\n            const elapsed = Date.now() - sched.startTime;\r\n            sched.remaining = Math.max(0, sched.delay - elapsed);\r\n        });\r\n    }\r\n\r\n    resume() {\r\n        if (!this.paused) return;\r\n        this.paused = false;\r\n\r\n        this.scheduledItems.forEach(sched => {\r\n            if (this.stopped) return;\r\n\r\n            const newTimeoutId = setTimeout(() => {\r\n                if (this.stopped) return;\r\n\r\n                if ('message' in sched.item) {\r\n                    this.waitAndType(sched.item.message);\r\n                } else if ('command' in sched.item) {\r\n                    this.waitAndExecute(sched.item);\r\n                }\r\n            }, sched.remaining);\r\n\r\n            this.timers.push(newTimeoutId);\r\n            sched.timeoutId = newTimeoutId;\r\n            sched.startTime = Date.now();\r\n            sched.delay = sched.remaining;\r\n            delete sched.remaining;\r\n        });\r\n    }\r\n\r\n    sleep(ms) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    async runSequentialScript(items) {\r\n        for (const item of items) {\r\n            if (this.stopped) break;\r\n\r\n            if (this.paused) {\r\n                await new Promise(resolve => {\r\n                    const checkResume = setInterval(() => {\r\n                        if (!this.paused && !this.stopped) {\r\n                            clearInterval(checkResume);\r\n                            resolve();\r\n                        }\r\n                    }, 200);\r\n                });\r\n            }\r\n\r\n            if ('message' in item) {\r\n                await this.waitAndType(item.message);\r\n            } else if ('command' in item) {\r\n                await this.waitAndExecute(item);\r\n            }\r\n\r\n            // Optional delay between items\r\n            if (this.options.stepDelay) {\r\n                await this.sleep(this.options.stepDelay);\r\n            }\r\n        }\r\n    }\r\n\r\n    scheduleItem(item, delay) {\r\n        const startTime = Date.now();\r\n\r\n        const timeoutId = setTimeout(() => {\r\n            if (this.stopped) return;\r\n\r\n            if ('message' in item) {\r\n                this.waitAndType(item.message);\r\n            } else if ('command' in item) {\r\n                this.waitAndExecute(item);\r\n            }\r\n        }, delay);\r\n        this.timers.push(timeoutId);\r\n\r\n        // Store metadata for pause/resume\r\n        this.scheduledItems.push({\r\n            item,\r\n            startTime,\r\n            delay,\r\n            timeoutId,\r\n        });\r\n    }\r\n\r\n    repeatIndefinitely(item) {\r\n        const handler = () => {\r\n            if (this.paused || this.stopped || !this.conditionFn()) return;\r\n\r\n            if ('message' in item) {\r\n                this.typewriter.typeMessage(item.message);\r\n            } else if ('command' in item) {\r\n                const fn = this.commandRegistry[item.command];\r\n                if (typeof fn === \"function\") {\r\n                    fn((item));\r\n                }\r\n            }\r\n        };\r\n\r\n        const intervalId = setInterval(handler, item.interval);\r\n        this.intervals.push(intervalId);\r\n\r\n        if (typeof item.maxRuntime === \"number\") {\r\n            const maxTimer = setTimeout(() => {\r\n                clearInterval(intervalId);\r\n                console.log(`[OzAssistant] Stopped repeating after ${item.maxRuntime}ms`);\r\n            }, item.maxRuntime);\r\n            this.timers.push(maxTimer);\r\n        }\r\n    }\r\n\r\n    waitAndType(message) {\r\n        envState.warningTab = ['ai-container'];\r\n        window.GlobalEventBus.dispatchEvent(new CustomEvent('sync-tab-state', {\r\n            detail: envState\r\n        }));\r\n\r\n        return new Promise((resolve) => {\r\n            const interval = setInterval(() => {\r\n                if (this.paused || this.stopped) return;\r\n\r\n                if (this.conditionFn()) {\r\n                    clearInterval(interval);\r\n                    this.typewriter.typeMessage(message, resolve);  // resolve on complete\r\n                }\r\n            }, 200);\r\n\r\n            this.intervals.push(interval);\r\n        });\r\n    }\r\n\r\n    waitAndExecute(item) {\r\n        envState.warningTab = ['ai-container'];\r\n        window.GlobalEventBus.dispatchEvent(new CustomEvent('sync-tab-state', {\r\n            detail: envState\r\n        }));\r\n\r\n        return new Promise((resolve) => {\r\n            const {\r\n                command: commandName,\r\n                args = [],\r\n                requiresConfirmation = true,\r\n                explanation,\r\n                previewable = false,\r\n                fromUser = false\r\n            } = item;\r\n\r\n            const interval = setInterval(async () => {\r\n                if (this.paused || this.stopped) return;\r\n\r\n                if (this.conditionFn()) {\r\n                    clearInterval(interval);\r\n\r\n                    const triggeredAt = Date.now(); // Time when command becomes eligible\r\n                    const commandFn = this.commandRegistry[commandName];\r\n                    if (typeof commandFn !== \"function\") {\r\n                        console.warn(`[OzAssistant] Unknown command \"${commandName}\".`);\r\n                        resolve();\r\n                        return;\r\n                    }\r\n\r\n                    let approved = true;\r\n                    let confirmedAt = null;\r\n                    let previewedAt = null;\r\n                    let postPreviewDelay = null;\r\n\r\n                    const proceedToExecute = async () => {\r\n                        if (requiresConfirmation !== false) {\r\n                            const result = await this.confirmExecution(commandName, args, previewable);\r\n                            approved = result.approved;\r\n                            confirmedAt = result.confirmedAt;\r\n                            previewedAt = result.previewedAt;\r\n                            postPreviewDelay = result.postPreviewDelay;\r\n                        } else {\r\n                            confirmedAt = Date.now(); // No dialog, still log timestamp\r\n                        }\r\n\r\n                        // Track log\r\n                        this.confirmationLog.push({\r\n                            command: commandName,\r\n                            args,\r\n                            approved,\r\n                            triggeredAt,\r\n                            confirmedAt,\r\n                            delay: confirmedAt - triggeredAt,\r\n                            previewedAt,\r\n                            postPreviewDelay,\r\n                            triggeredSinceStart: triggeredAt - this.scriptStartTime,\r\n                            confirmedSinceStart: confirmedAt - this.scriptStartTime,\r\n                            previewedSinceStart: previewedAt ? previewedAt - this.scriptStartTime : null,\r\n                            source: fromUser ? \"user\" : \"script\"\r\n                        });\r\n\r\n                        if (approved) {\r\n                            commandFn(args);\r\n                        } else {\r\n                            console.log(`[OzAssistant] Command \"${commandName}\" was blocked by user.`);\r\n                        }\r\n\r\n                        //console.table(this.getConfirmationStats().entries);\r\n                        console.table(this.getConfirmationStats().entries.map(entry => ({\r\n                            command: entry.command,\r\n                            triggeredMs: entry.triggeredSinceStart,\r\n                            confirmedMs: entry.confirmedSinceStart,\r\n                            delay: entry.delay,\r\n                            previewedMs: entry.previewedSinceStart,\r\n                            postPreviewDelay: entry.postPreviewDelay,\r\n                            approved: entry.approved\r\n                        })));\r\n\r\n                        resolve(); //  Resolve after everything is done\r\n                    };\r\n\r\n                    if (explanation) {\r\n                        await this.waitAndType(explanation);\r\n                        await this.sleep(300);\r\n                        await proceedToExecute();\r\n                        this.typewriter.clear();\r\n                    } else {\r\n                        await proceedToExecute();\r\n                    }\r\n                }\r\n            }, 200);\r\n\r\n            this.intervals.push(interval);\r\n        });\r\n    }\r\n\r\n    async confirmExecution(commandName, args, previewable = false) {\r\n        const dialog = document.getElementById(\"oz-confirm-dialog\");\r\n        const message = document.getElementById(\"oz-confirm-message\");\r\n        const yesBtn = document.getElementById(\"oz-confirm-yes\");\r\n        const noBtn = document.getElementById(\"oz-confirm-no\");\r\n        const previewBtn = document.getElementById(\"oz-confirm-preview\");\r\n\r\n        if (!dialog || !message || !yesBtn || !noBtn || !previewBtn) {\r\n            console.warn(\"Confirmation dialog elements not found.\");\r\n            return false;\r\n        }\r\n\r\n        let previewedAt = null;\r\n\r\n        return new Promise((resolve) => {\r\n            message.textContent = `Allow OzAssistant to execute command: ${commandName}(${args.join(\", \")})?`;\r\n\r\n            dialog.classList.remove(\"fade-out\");\r\n            dialog.classList.add(\"fade-in\");\r\n            dialog.style.display = \"block\";\r\n\r\n            // Force reflow for animation restart\r\n            void dialog.offsetWidth;\r\n\r\n            dialog.classList.add(\"active\");\r\n\r\n            // Remove fade-in class after animation\r\n            setTimeout(() => {\r\n                dialog.classList.remove(\"fade-in\");\r\n            }, 300);\r\n\r\n            // dialog.style.display = \"block\";\r\n            // // Prepare dialog fade-in\r\n            // dialog.classList.remove(\"fade-out\");\r\n            // dialog.classList.add(\"fade-in\");\r\n            //\r\n            // // Force reflow for animation restart\r\n            // void dialog.offsetWidth;\r\n            //\r\n            // dialog.classList.add(\"active\");\r\n            //\r\n            // // Remove fade-in class after animation\r\n            // setTimeout(() => {\r\n            //     dialog.classList.remove(\"fade-in\");\r\n            // }, 300);\r\n\r\n            //dialog.classList.add(\"active\");\r\n            previewBtn.style.display = previewable ? \"inline-block\" : \"none\";\r\n\r\n            const cleanup = () => {\r\n\r\n                dialog.classList.remove(\"active\");\r\n                dialog.classList.add(\"fade-out\");\r\n\r\n                // Remove fade-out after animation, reset opacity\r\n                setTimeout(() => {\r\n                    dialog.classList.remove(\"fade-out\");\r\n                }, 300); // Match the CSS transition duration (300ms)\r\n\r\n                yesBtn.removeEventListener(\"click\", onYes);\r\n                noBtn.removeEventListener(\"click\", onNo);\r\n                previewBtn.removeEventListener(\"click\", onPreview);\r\n            };\r\n\r\n            const onYes = () => {\r\n                const confirmedAt = Date.now();\r\n                cleanup();\r\n                resolve({\r\n                    approved: true,\r\n                    confirmedAt,\r\n                    previewedAt,\r\n                    postPreviewDelay: previewedAt ? confirmedAt - previewedAt : null\r\n                });\r\n            };\r\n\r\n            const onNo = () => {\r\n                const confirmedAt = Date.now();\r\n                cleanup();\r\n                resolve({\r\n                    approved: false,\r\n                    confirmedAt,\r\n                    previewedAt,\r\n                    postPreviewDelay: previewedAt ? confirmedAt - previewedAt : null\r\n                });\r\n            };\r\n\r\n            const onPreview = () => {\r\n                previewedAt = Date.now();\r\n                if (typeof this.previewRegistry[commandName] === \"function\") {\r\n                    this.previewRegistry[commandName](args);\r\n                } else {\r\n                    console.warn(`[OzAssistant] No preview function registered for \"${commandName}\"`);\r\n                }\r\n            };\r\n\r\n            yesBtn.addEventListener(\"click\", onYes);\r\n            noBtn.addEventListener(\"click\", onNo);\r\n            previewBtn.addEventListener(\"click\", onPreview);\r\n        });\r\n    }\r\n\r\n    getConfirmationStats() {\r\n        return {\r\n            totalApproved: this.confirmationLog.filter(e => e.approved).length,\r\n            totalDenied: this.confirmationLog.filter(e => !e.approved).length,\r\n            entries: [...this.confirmationLog]\r\n        };\r\n    }\r\n\r\n    async triggerCommand(item) {\r\n        // Immediately schedule like other JSON-based items\r\n        await this.waitAndExecute({\r\n            ...item,\r\n            fromUser: true // make it execute immediately\r\n        });\r\n    }\r\n}","// Code from https://medium.com/geekculture/implementing-k-means-clustering-from-scratch-in-javascript-13d71fbcb31e\r\n//\r\n// Uses a more sophisticated initialization method called Naive Sharding\r\n// ( https://www.kdnuggets.com/2017/03/naive-sharding-centroid-initialization-method.html )\r\n//\r\n\r\nconst {color} = require(\"d3\");\r\nconst MAX_ITERATIONS = 10000;\r\n\r\nfunction randomBetween(min, max) {\r\n    return Math.floor(\r\n        Math.random() * (max - min) + min\r\n    );\r\n}\r\n\r\nfunction calcMeanCentroid(dataSet, start, end) {\r\n    const features = dataSet[0].length;\r\n    const n = end - start;\r\n    let mean = [];\r\n    for (let i = 0; i < features; i++) {\r\n        mean.push(0);\r\n    }\r\n    for (let i = start; i < end; i++) {\r\n        for (let j = 0; j < features; j++) {\r\n            mean[j] = mean[j] + dataSet[i][j] / n;\r\n        }\r\n    }\r\n    return mean;\r\n}\r\n\r\nfunction getRandomCentroidsNaiveSharding(dataset, k) {\r\n    // implementation of a variation of naive sharding centroid initialization method\r\n    // (not using sums or sorting, just dividing into k shards and calc mean)\r\n    // https://www.kdnuggets.com/2017/03/naive-sharding-centroid-initialization-method.html\r\n    const numSamples = dataset.length;\r\n    // Divide dataset into k shards:\r\n    const step = Math.floor(numSamples / k);\r\n    const centroids = [];\r\n    for (let i = 0; i < k; i++) {\r\n        const start = step * i;\r\n        let end = step * (i + 1);\r\n        if (i + 1 === k) {\r\n            end = numSamples;\r\n        }\r\n        centroids.push(calcMeanCentroid(dataset, start, end));\r\n    }\r\n    return centroids;\r\n}\r\n\r\nfunction getRandomCentroids(dataset, k) {\r\n    // selects random points as centroids from the dataset\r\n    const numSamples = dataset.length;\r\n    const centroidsIndex = [];\r\n    let index;\r\n    while (centroidsIndex.length < k) {\r\n        index = randomBetween(0, numSamples);\r\n        if (centroidsIndex.indexOf(index) === -1) {\r\n            centroidsIndex.push(index);\r\n        }\r\n    }\r\n    const centroids = [];\r\n    for (let i = 0; i < centroidsIndex.length; i++) {\r\n        const centroid = [...dataset[centroidsIndex[i]]];\r\n        centroids.push(centroid);\r\n    }\r\n    return centroids;\r\n}\r\n\r\nfunction compareCentroids(a, b) {\r\n    for (let i = 0; i < a.length; i++) {\r\n        if (a[i] !== b[i]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction shouldStop(oldCentroids, centroids, iterations) {\r\n    if (iterations > MAX_ITERATIONS) {\r\n        return true;\r\n    }\r\n    if (!oldCentroids || !oldCentroids.length) {\r\n        return false;\r\n    }\r\n    let sameCount = true;\r\n    for (let i = 0; i < centroids.length; i++) {\r\n        if (!compareCentroids(centroids[i], oldCentroids[i])) {\r\n            sameCount = false;\r\n        }\r\n    }\r\n    return sameCount;\r\n}\r\n\r\n// Calculate Squared Euclidean Distance\r\nfunction getDistanceSQ(a, b) {\r\n    const diffs = [];\r\n    for (let i = 0; i < a.length; i++) {\r\n        diffs.push(a[i] - b[i]);\r\n    }\r\n    return diffs.reduce((r, e) => (r + (e * e)), 0);\r\n}\r\n\r\n// Returns a label for each piece of data in the dataset.\r\nfunction getLabels(dataSet, centroids) {\r\n    // prep data structure:\r\n    const labels = {};\r\n    for (let c = 0; c < centroids.length; c++) {\r\n        labels[c] = {\r\n            points: [],\r\n            centroid: centroids[c],\r\n        };\r\n    }\r\n    // For each element in the dataset, choose the closest centroid.\r\n    // Make that centroid the element's label.\r\n    for (let i = 0; i < dataSet.length; i++) {\r\n        const a = dataSet[i];\r\n        let closestCentroid, closestCentroidIndex, prevDistance;\r\n        for (let j = 0; j < centroids.length; j++) {\r\n            let centroid = centroids[j];\r\n            if (j === 0) {\r\n                closestCentroid = centroid;\r\n                closestCentroidIndex = j;\r\n                prevDistance = getDistanceSQ(a, closestCentroid);\r\n            } else {\r\n                // get distance:\r\n                const distance = getDistanceSQ(a, centroid);\r\n                if (distance < prevDistance) {\r\n                    prevDistance = distance;\r\n                    closestCentroid = centroid;\r\n                    closestCentroidIndex = j;\r\n                }\r\n            }\r\n        }\r\n        // add point to centroid labels:\r\n        labels[closestCentroidIndex].points.push(a);\r\n    }\r\n    return labels;\r\n}\r\n\r\nfunction getPointsMean(pointList) {\r\n    const totalPoints = pointList.length;\r\n    const means = [];\r\n    for (let j = 0; j < pointList[0].length; j++) {\r\n        means.push(0);\r\n    }\r\n    for (let i = 0; i < pointList.length; i++) {\r\n        const point = pointList[i];\r\n        for (let j = 0; j < point.length; j++) {\r\n            const val = point[j];\r\n            means[j] = means[j] + val / totalPoints;\r\n        }\r\n    }\r\n    return means;\r\n}\r\n\r\nfunction recalculateCentroids(dataSet, labels, k) {\r\n    // Each centroid is the geometric mean of the points that\r\n    // have that centroid's label. Important: If a centroid is empty (no points have\r\n    // that centroid's label) you should randomly re-initialize it.\r\n    let newCentroid;\r\n    const newCentroidList = [];\r\n    for (const k in labels) {\r\n        const centroidGroup = labels[k];\r\n        if (centroidGroup.points.length > 0) {\r\n            // find mean:\r\n            newCentroid = getPointsMean(centroidGroup.points);\r\n        } else {\r\n            // get new random centroid\r\n            newCentroid = getRandomCentroids(dataSet, 1)[0];\r\n        }\r\n        newCentroidList.push(newCentroid);\r\n    }\r\n    return newCentroidList;\r\n}\r\n\r\nfunction createWeightedDataset(dataset, weights, scale) {\r\n\r\n    if(weights.length === 0) {return dataset;}\r\n\r\n    let weightedDataset = [];\r\n\r\n    //console.log(weights);\r\n\r\n    if(weights.length > 0 && dataset.length === weights.length) {\r\n\r\n        //console.log('here');\r\n        for(let i = 0; i < weights.length; i++) {\r\n            const amount = Math.ceil(weights[i]/scale);\r\n            for (let j = 0; j < amount; j++) {\r\n                weightedDataset.push(dataset[i]);\r\n            }\r\n        }\r\n    }\r\n    return weightedDataset;\r\n}\r\n\r\nfunction kmeans(dataset, k, useNaiveSharding = true, weights = [], scale = 10) {\r\n\r\n    dataset = createWeightedDataset(dataset,weights,scale);\r\n\r\n    //console.log(dataset);\r\n\r\n    if (dataset.length && dataset[0].length && dataset.length > k) {\r\n        // Initialize book keeping variables\r\n        let iterations = 0;\r\n        let oldCentroids, labels, centroids = [];\r\n\r\n        // Initialize centroids randomly\r\n        if (useNaiveSharding) {\r\n            centroids = getRandomCentroidsNaiveSharding(dataset, k);\r\n        } else {\r\n            centroids = getRandomCentroids(dataset, k);\r\n        }\r\n\r\n        // Run the main k-means algorithm\r\n        while (!shouldStop(oldCentroids, centroids, iterations)) {\r\n            // Save old centroids for convergence test.\r\n            oldCentroids = [...centroids];\r\n            iterations++;\r\n\r\n            // Assign labels to each datapoint based on centroids\r\n            labels = getLabels(dataset, centroids);\r\n            centroids = recalculateCentroids(dataset, labels, k);\r\n        }\r\n\r\n        const clusters = [];\r\n        for (let i = 0; i < k; i++) {\r\n            clusters.push(labels[i]);\r\n        }\r\n\r\n        // generate an array with labels for the points in the dataset\r\n        // this is handy for calculating the ARI score representing\r\n        // the cluster stability over several kmeans cycles\r\n        const lab = [];\r\n\r\n        clusters.forEach((cluster, index) => {\r\n            lab.push(...Array(cluster.points.length).fill(index));\r\n        });\r\n\r\n        const results = {\r\n            labels: lab,\r\n            clusters: clusters,\r\n            centroids: centroids,\r\n            iterations: iterations,\r\n            converged: iterations <= MAX_ITERATIONS,\r\n        };\r\n        return results;\r\n    } else {\r\n        throw new Error('Invalid dataset');\r\n    }\r\n}\r\n\r\n/**\r\n * Compute Adjusted Rand Index between two clusterings\r\n * @param {Array<number>} labels1\r\n * @param {Array<number>} labels2\r\n * @returns {number} ARI score\r\n */\r\nfunction adjustedRandIndex(labels1, labels2) {\r\n    const n = labels1.length;\r\n\r\n    const contingency = {};\r\n    const aCounts = {};\r\n    const bCounts = {};\r\n\r\n    for (let i = 0; i < n; i++) {\r\n        const a = labels1[i];\r\n        const b = labels2[i];\r\n\r\n        contingency[a] = contingency[a] || {};\r\n        contingency[a][b] = (contingency[a][b] || 0) + 1;\r\n\r\n        aCounts[a] = (aCounts[a] || 0) + 1;\r\n        bCounts[b] = (bCounts[b] || 0) + 1;\r\n    }\r\n\r\n    const comb2 = x => (x * (x - 1)) / 2;\r\n\r\n    let index = 0;\r\n    for (const a in contingency) {\r\n        for (const b in contingency[a]) {\r\n            index += comb2(contingency[a][b]);\r\n        }\r\n    }\r\n\r\n    const aSum = Object.values(aCounts).reduce((sum, val) => sum + comb2(val), 0);\r\n    const bSum = Object.values(bCounts).reduce((sum, val) => sum + comb2(val), 0);\r\n    const totalComb = comb2(n);\r\n\r\n    const expectedIndex = (aSum * bSum) / totalComb;\r\n    const maxIndex = 0.5 * (aSum + bSum);\r\n\r\n    return (index - expectedIndex) / (maxIndex - expectedIndex);\r\n}\r\n\r\n/**\r\n * Evaluate the stability of KMeans clustering using ARI\r\n * @param {Array<Array<number>>} data - 2D data points\r\n * @param {number} k - Number of clusters\r\n * @param {number} runs - Number of KMeans runs\r\n * @returns {number}  Clusters with ARI stability score: -1 (worst) to 1 (perfect agreement); random clustering gives ARI near 0.\r\n */\r\nfunction kmeansStability(data, k, useNaiveSharding = true, weights = [], scale = 10, runs = 10) {\r\n    const clusterings = [];\r\n    let result = [];\r\n\r\n    for (let i = 0; i < runs; i++) {\r\n        result =  kmeans(data, k, useNaiveSharding, weights, scale);\r\n        clusterings.push(result.labels);\r\n    }\r\n\r\n    // Compare all pairs of clusterings using ARI\r\n    let totalARI = 0;\r\n    let comparisons = 0;\r\n    for (let i = 0; i < clusterings.length; i++) {\r\n        for (let j = i + 1; j < clusterings.length; j++) {\r\n            totalARI += adjustedRandIndex(clusterings[i], clusterings[j]);\r\n            comparisons++;\r\n        }\r\n    }\r\n\r\n    return {\r\n        stability: totalARI / comparisons,\r\n        clusters: result.clusters,\r\n        centroids: result.centroids,\r\n        iterations: result.iterations,\r\n        converged: result.iterations <= MAX_ITERATIONS,\r\n    };\r\n}\r\n\r\n\r\n\r\nmodule.exports = { kmeans, kmeansStability};\r\n","import {Environment} from \"../environment/environment.js\";\r\nimport { envState } from \"../settings\";\r\nimport { highlightUtils } from '../newmain.js';\r\nimport { renderUtils } from '../newmain.js';\r\nimport '../styles.css';\r\nimport * as d3 from \"d3\";\r\nimport {isPointInsidePolygon} from \"../utility/geometry\";\r\n\r\nexport class Chart {\r\n    constructor(environment) {\r\n        this.environment = environment;\r\n        this.chartWidth = 600;\r\n        this.chartHeight = 300;\r\n        this.showLineChart = false;\r\n        this.chartSvg = undefined;\r\n        this.barChartSvg = undefined;\r\n        this.lineChartSvg = undefined;\r\n        this.legend = undefined;\r\n        this.categories = undefined;\r\n        this.colorScale = undefined;\r\n        this.variance = -1.0;\r\n        this.peak = -1.0;\r\n        this.std = -1.0;\r\n        this.avg = -1.0;\r\n        this.lineData = [];\r\n\r\n        highlightUtils.setInstance(\"chart\", this);\r\n        renderUtils.setInstance(\"chart\", this);\r\n    }\r\n\r\n    init() {\r\n        this.chartSvg = d3.select(\"#barchart-container\")\r\n            .append(\"svg\")\r\n            .attr(\"width\", this.chartWidth)\r\n            .attr(\"height\", this.chartHeight);\r\n\r\n        this.categories = ['nLIntersections', 'nLCrossingPoints', 'nParticles', 'nConflicts'];  // Three fixed categories\r\n        this.colorScale = d3.scaleOrdinal()\r\n            .domain(this.categories)\r\n            .range(['#98abc5', '#aa6caa', '#ff8c00','#e30945']);\r\n\r\n        // Add Legend under the chart, horizontally\r\n        this.legend = d3.select(\"#legend\");\r\n\r\n        this.categories.forEach(key => {\r\n            const legendItem = this.legend.append(\"div\").attr(\"class\", \"legend-item\");\r\n\r\n            legendItem.append(\"div\")\r\n                .attr(\"class\", \"legend-rect\")\r\n                .style(\"background-color\", this.colorScale(key));\r\n\r\n            legendItem.append(\"span\").text(key.charAt(0).toUpperCase() + key.slice(1));\r\n        });\r\n\r\n        this.barChartSvg = this.chartSvg.append(\"g\").attr(\"class\", \"bars\");\r\n        this.lineChartSvg = this.chartSvg.append(\"g\").attr(\"class\", \"areas\").style(\"display\", \"none\");\r\n    }\r\n\r\n    initEventHandlers() {\r\n        this.chartSvg.on(\"click\", () => {\r\n            this.barChartSvg.style(\"display\", \"block\");\r\n            this.lineChartSvg.style(\"display\", \"none\");\r\n            this.showLineChart = false;\r\n            this.environment.selectedPolygonIdx = -1;\r\n            this.environment.selectedPolygon = [];\r\n            //console.log(\"chart clicked\");\r\n        });\r\n    }\r\n\r\n    updateLineChart() {\r\n        if(!this.showLineChart) return;\r\n\r\n        this.barChartSvg.style(\"display\", \"none\");\r\n        this.lineChartSvg.style(\"display\", \"block\");\r\n\r\n        this.lineChartSvg.selectAll(\"*\").remove();  // Clear previous chart rendering\r\n\r\n        this.lineData = this.environment.getTimeLineData();\r\n\r\n        // Set up scales\r\n        const xScale = d3.scalePoint()\r\n            .domain(this.lineData.map(d => d.time))\r\n            .range([50, this.chartWidth - 10])\r\n            .padding(0.3);\r\n\r\n        const yScale = d3.scaleLinear()\r\n            //.domain([0, d3.max(data, d => d.A + d.B + d.Cross + d.Area)])\r\n            .domain([0, (this.environment.lines.length + this.environment.particles.length + this.environment.crossings.length + Math.ceil(this.environment.numLinePolygonIntersections/this.environment.voronoiPoints.length))])\r\n            .nice()\r\n            .range([this.chartHeight - 50, 10]);\r\n\r\n\r\n        const stack = d3.stack().keys(this.categories)(this.lineData);\r\n\r\n        // X Axis\r\n        this.lineChartSvg.append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${this.chartHeight - 50})`)\r\n            .call(\r\n                d3.axisBottom(xScale)\r\n                    .tickValues(d3.range(0, 240, 10)) // <-- every 10 units\r\n                    .tickSizeOuter(0)                 // <-- no outer ticks\r\n            )\r\n            .selectAll(\"text\")\r\n            .style(\"display\", \"none\");  // hides them\r\n\r\n        // Y Axis\r\n        this.lineChartSvg.append(\"g\")\r\n            .attr(\"transform\", \"translate(50, 0)\")\r\n            .call(d3.axisLeft(yScale));\r\n\r\n        this.lineChartSvg.append(\"g\")\r\n            .selectAll(\"path\")\r\n            .data(stack)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"area\")\r\n            .attr(\"d\", d3.area()\r\n                .x(d => xScale(d.data.time))\r\n                .y0(d => yScale(d[0]))\r\n                .y1(d => yScale(d[1])))\r\n            .attr(\"fill\", d => this.colorScale(d.key));\r\n\r\n        // Add a vertical time line to the chart\r\n        this.lineChartSvg.append(\"line\")\r\n            .attr(\"x1\", xScale(this.environment.timeValue))\r\n            .attr(\"y1\", 0)\r\n            .attr(\"x2\", xScale(this.environment.timeValue))\r\n            .attr(\"y2\", this.chartHeight)\r\n            .attr(\"stroke\", \"black\")\r\n            .attr(\"stroke-dasharray\", \"2\")\r\n            .attr(\"stroke-width\", 2);\r\n\r\n        // Add a max line to the chart\r\n        this.lineChartSvg.append(\"line\")\r\n            .attr(\"x1\", 0)\r\n            .attr(\"x2\", this.chartWidth)\r\n            .attr(\"y1\", yScale(envState.complexity_limit))\r\n            .attr(\"y2\", yScale(envState.complexity_limit))\r\n            .attr(\"stroke\", \"red\")\r\n            .attr(\"stroke-dasharray\", \"4\")\r\n            .attr(\"stroke-width\", 2);\r\n    }\r\n\r\n    updateBarChart() {\r\n        if(this.showLineChart) return;\r\n\r\n        this.barChartSvg.selectAll(\"*\").remove();  // Clear previous bars\r\n\r\n        const self = this;\r\n\r\n        //const area_clipping = Math.abs(d3.polygonArea(clippingPolygon[0]));\r\n        //console.log('Clipping Polygon Area: : ' + area_clipping);\r\n\r\n        const polys = (envState.editMode === 'voronoi' ? this.environment.polygons : this.environment.editPolygons);\r\n\r\n        // Generate data with calculated Voronoi areas\r\n        const data = polys.map((polygon, i) => {\r\n            //const area =  Math.abs(d3.polygonArea(polygon));  // Calculate area\r\n            const num_particles = this.environment.particlePositions.filter(pt => isPointInsidePolygon(pt, polygon)).length;\r\n            const numCrossings = this.environment.crossings.filter(pt => isPointInsidePolygon(pt, polygon)).length;\r\n            const numLineCrossings = this.environment.countLineIntersections(polygon);\r\n            const conflicts = this.environment.countParticleSeparationProblems(this.environment.particlePositions, polygon);\r\n\r\n            //console.log('Area: : ' + area);\r\n            //console.log('---');\r\n            return {\r\n                category: `Cell ${i + 1}`,\r\n                //A: 0, //Math.floor(Math.random() * 50 + 10),\r\n                nLIntersections: numLineCrossings, //Math.floor(Math.random() * 50 + 10),\r\n                nLCrossingPoints: numCrossings, //Math.floor(Math.random() * 50 + 10),\r\n                nParticles: num_particles, //(area / area_clipping) * 100  // Normalize area for visualization\r\n                nConflicts: conflicts\r\n            };\r\n        });\r\n\r\n        // Set up scales\r\n        const xScale = d3.scaleBand()\r\n            .domain(data.map(d => d.category))\r\n            .range([50, this.chartWidth - 10])\r\n            .padding(0.3);\r\n\r\n        const yScale = d3.scaleLinear()\r\n            //.domain([0, d3.max(data, d => d.A + d.B + d.Cross + d.Area)])\r\n            .domain([0, (this.environment.lines.length + this.environment.particles.length + this.environment.crossings.length + Math.ceil(this.environment.numLinePolygonIntersections/this.environment.voronoiPoints.length))])\r\n            .nice()\r\n            .range([this.chartHeight - 50, 10]);\r\n\r\n        // Stack data\r\n        const stack = d3.stack()\r\n            .keys(this.categories)\r\n            (data);\r\n\r\n        // X Axis\r\n        this.barChartSvg.append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${this.chartHeight - 50})`)\r\n            .call(d3.axisBottom(xScale).tickSizeOuter(0))\r\n            .selectAll(\"text\")\r\n            .attr(\"transform\", \"rotate(-45)\")\r\n            .style(\"text-anchor\", \"end\");\r\n\r\n        // Y Axis\r\n        this.barChartSvg.append(\"g\")\r\n            .attr(\"transform\", \"translate(50, 0)\")\r\n            .call(d3.axisLeft(yScale));\r\n\r\n        // Draw stacked bars\r\n        this.barChartSvg.append(\"g\")\r\n            .selectAll(\"g\")\r\n            .data(stack)\r\n            .enter()\r\n            .append(\"g\")\r\n            .attr(\"fill\", d => this.colorScale(d.key))\r\n            .selectAll(\"rect\")\r\n            .data(d => d)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"x\", d => xScale(d.data.category))\r\n            .attr(\"y\", d => yScale(d[1]))\r\n            .attr(\"height\", d => yScale(d[0]) - yScale(d[1]))\r\n            .attr(\"width\", xScale.bandwidth())\r\n            .attr(\"data-index\", (d, i) => i)\r\n            .on(\"mouseover\", function(event, d) {\r\n                const index = d3.select(this).attr(\"data-index\"); // Get the index\r\n                self.highlightBar(parseInt(index));\r\n                envState.editMode === 'voronoi' ? highlightUtils.highlightVoronoi(parseInt(index)): highlightUtils.highlightPolygon(parseInt(index));\r\n                //console.log(\"Hovered Bar Index:\", index); // Print the index\r\n            })\r\n            .on(\"mouseout\", function() {\r\n                //console.log(\"Mouse left bar\");\r\n                //if(self.environment.selectedPolygonIdx !== -1) {\r\n                const index = d3.select(this).attr(\"data-index\");\r\n                self.removeHighlightBar(parseInt(index));\r\n                envState.editMode === 'voronoi' ? highlightUtils.removeHighlightVoronoi(parseInt(index)) : highlightUtils.removeHighlightPolygon(parseInt(index));\r\n                //} // Get the index\r\n            })\r\n            .on(\"click\", function(event, d) {\r\n                const index = d3.select(this).attr(\"data-index\"); // Get the index\r\n                event.stopPropagation();\r\n                //showLineChart(d.data.category);\r\n                //console.log(\"clicked on bar: \" + index);\r\n                //console.log(\"polygon: \" + polygons[index]);\r\n                self.showLineChart = true;\r\n                self.environment.selectedPolygonIdx = parseInt(index);\r\n                self.lineData = self.environment.getTimeLineData();\r\n                envState.editMode === 'voronoi' ? highlightUtils.highlightVoronoi(parseInt(index)): highlightUtils.highlightPolygon(parseInt(index));\r\n                //selectedPolygon = polygons[index];\r\n                //updateLineChart();\r\n                self.render();\r\n            });\r\n\r\n        // Display variance below the bar chart\r\n        this.variance = this.calculateVariance(data);\r\n        this.peak = this.calculatePeak(data);\r\n        this.std = this.calculateStandardDeviation(data);\r\n        this.avg = this.calculateAverage(data);\r\n\r\n        // Add a mean line to the chart\r\n        this.barChartSvg.append(\"line\")\r\n            .attr(\"x1\", 0)\r\n            .attr(\"x2\", this.chartWidth)\r\n            .attr(\"y1\", yScale(this.avg))\r\n            .attr(\"y2\", yScale(this.avg))\r\n            .attr(\"stroke\", \"blue\")\r\n            .attr(\"stroke-dasharray\", \"4\")\r\n            .attr(\"stroke-width\", 2);\r\n\r\n        // Add a max line to the chart\r\n        this.barChartSvg.append(\"line\")\r\n            .attr(\"x1\", 0)\r\n            .attr(\"x2\", this.chartWidth)\r\n            .attr(\"y1\", yScale(envState.complexity_limit))\r\n            .attr(\"y2\", yScale(envState.complexity_limit))\r\n            .attr(\"stroke\", \"red\")\r\n            .attr(\"stroke-dasharray\", \"4\")\r\n            .attr(\"stroke-width\", 2);\r\n    }\r\n\r\n    calculateVariance(data) {\r\n        const values = data.map(d =>\r\n            d3.sum(this.categories, key => d[key])\r\n        );\r\n        const meanBars = d3.mean(values);\r\n        return d3.mean(values.map(total =>\r\n            Math.pow(total - meanBars, 2)\r\n        ));\r\n    }\r\n\r\n    calculatePeak(data) {\r\n        return d3.max(data, d => d.nLIntersections + d.nLCrossingPoints + d.nParticles + d.nConflicts);\r\n    }\r\n\r\n    calculateStandardDeviation(data) {\r\n        return Math.sqrt(this.calculateVariance(data));\r\n    }\r\n\r\n    calculateAverage(data) {\r\n        return d3.mean(data, d => d.nLIntersections + d.nLCrossingPoints + d.nParticles + d.nConflicts);\r\n    }\r\n\r\n    highlightBar(index) {\r\n        this.barChartSvg.selectAll(\"text\")\r\n            //.attr(\"stroke\", (d, i) => i === index ? \"black\" : \"none\") // Highlight with black stroke\r\n            //.attr(\"stroke-width\", (d, i) => i === index ? 2 : 0)\r\n            .style(\"font-size\", (d, i) => i === index ? 14 : 10)\r\n            .style(\"font-weight\", (d, i) => i === index ? \"bold\" : \"normal\");\r\n    }\r\n\r\n    removeHighlightBar(index) {\r\n        this.barChartSvg.selectAll(\"text\")\r\n            //.attr(\"stroke\", (d, i) => i === index ? \"black\" : \"none\") // Highlight with black stroke\r\n            //.attr(\"stroke-width\", (d, i) => i === index ? 2 : 0)\r\n            .style(\"font-size\", 10)\r\n            .style(\"font-weight\",  \"normal\");\r\n    }\r\n\r\n    render() {\r\n        this.updateBarChart();\r\n        this.updateLineChart();\r\n\r\n        // Display variance in the input box\r\n        //document.getElementById(\"varianceBox\").value = `Variance: ${variance.toFixed(2)}`;\r\n        document.getElementById(\"stdBox\").value = `Standard deviation: ${this.std.toFixed(2)}`;\r\n        document.getElementById(\"peakBox\").value = `Peak value: ${this.peak.toFixed(2)}`;\r\n        document.getElementById(\"meanBox\").value = `Mean value: ${this.avg.toFixed(2)}`;\r\n        document.getElementById(\"stabilityBox\").value = `Stability: ${this.environment.clusterStability.toFixed(4)}`;\r\n    }\r\n\r\n} // close class","import * as d3 from 'd3';\r\nimport {World} from \"./world\";\r\nimport {Chart} from \"./chart\";\r\nimport { envState } from \"../settings\";\r\nimport { renderUtils } from \"../newmain\";\r\nimport '../styles.css';\r\n\r\nexport class Interface {\r\n    constructor(environment) {\r\n        this.environment = environment;\r\n        this.tabcontainer = undefined;\r\n        this.tabComponents = [];\r\n        this.world = new World(environment);\r\n        this.chart = new Chart(environment);\r\n        this.animationInterval = 0;\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        window.GlobalEventBus = new EventTarget();\r\n\r\n        const self = this;\r\n\r\n        // create the tabcontainers\r\n        this.tabcontainer = document.querySelectorAll('.tab-container');\r\n        this.tabcontainer.forEach(container => {\r\n            const tabs = new TabComponent(container, this, (activeId) => {\r\n                // Optional callback example\r\n                //console.log(`Callback says active tab is: ${activeId}`);\r\n            });\r\n            const id = container.getAttribute('id'); // custom attribute\r\n            this.tabComponents.push(tabs); // Save reference\r\n        });\r\n\r\n        // Container for controls\r\n        const controls = d3.select(\"#scene\").append(\"div\")\r\n            .style(\"margin-bottom\", \"30px\")\r\n            .style(\"margin-top\", \"1px\");\r\n\r\n        controls.append(\"label\")\r\n            .text(\"Random Lines: \")\r\n            .style(\"margin-right\", \"25px\");\r\n\r\n        const inputBox = controls.append(\"input\")\r\n            .attr(\"type\", \"number\")\r\n            .attr(\"value\", \"10\")\r\n            .attr(\"min\", \"1\")\r\n            .attr(\"max\", \"100\");\r\n\r\n        // \"Generate Random Lines\" button\r\n        controls.append(\"button\")\r\n            .text(\"Randomize\")\r\n            .style(\"margin-left\", \"10px\")\r\n            .on(\"click\", () => {\r\n                const numLines = parseInt(inputBox.node().value, 10);\r\n                this.environment.generateRandomLines(numLines);\r\n                this.environment.dynamicLines = this.environment.lines;\r\n                this.environment.pathFinding();\r\n                this.environment.particles = []; // clear particles\r\n                document.getElementById(\"sliderEnd\").value = 0;\r\n                this.resetSlider();\r\n                this.environment.update();\r\n                renderUtils.renderAll();\r\n                //socket.emit(\"generateRandomLines\", numLines); // Emit request to generate random lines\r\n            });\r\n\r\n        // \"Generate Random Lines\" button\r\n        controls.append(\"button\")\r\n            .text(\"Jitter\")\r\n            .style(\"margin-left\", \"10px\")\r\n            .style(\"margin-right\", \"10px\")\r\n            .on(\"click\", () => {\r\n                const dist = parseInt(inputBox4.node().value, 10);\r\n                this.environment.jitterLines(dist);\r\n                this.environment.dynamicLines = this.environment.lines;\r\n                this.environment.pathFinding();\r\n                this.environment.generateRandomParticles(this.environment.lines,this.environment.numberOfParticles);\r\n                document.getElementById(\"sliderEnd\").value = 0;\r\n                this.resetSlider();\r\n                this.environment.update();\r\n                renderUtils.renderAll();\r\n                //socket.emit(\"generateRandomLines\", numLines); // Emit request to generate random lines\r\n            });\r\n\r\n        const inputBox4 = controls.append(\"input\")\r\n            .attr(\"type\", \"number\")\r\n            .attr(\"value\", \"5\")\r\n            .attr(\"min\", \"1\")\r\n            .attr(\"max\", \"50\");\r\n\r\n        controls.append(\"label\")\r\n            .style(\"display\", \"block\")\r\n            .style(\"margin-top\", \"10px\")\r\n\r\n        controls.append(\"label\")\r\n            .text(\"Particles per Line: \")\r\n            .style(\"margin-right\", \"6px\");\r\n\r\n        const inputBox3 = controls.append(\"input\")\r\n            .attr(\"type\", \"number\")\r\n            .attr(\"value\", \"10\")\r\n            .attr(\"min\", \"0\")\r\n            .attr(\"max\", \"120\");\r\n\r\n        controls.append(\"button\")\r\n            .text(\"Randomize\")\r\n            .style(\"margin-left\", \"10px\")\r\n            .on(\"click\", () => {\r\n                this.environment.numberOfParticles = parseInt(inputBox3.node().value, 10); // stores number of particles globally\r\n                this.environment.generateRandomParticles(this.environment.lines, this.environment.numberOfParticles);\r\n                document.getElementById(\"sliderEnd\").value = 0;\r\n                this.resetSlider();\r\n                this.environment.update();\r\n                renderUtils.renderAll();\r\n                //socket.emit(\"generateVoronoi\", {numPoints});\r\n            });\r\n\r\n        controls.append(\"label\")\r\n            .style(\"display\", \"block\")\r\n            .style(\"margin-top\", \"10px\")\r\n\r\n        controls.append(\"label\")\r\n            .text(\"Voronoi Points: \")\r\n            .style(\"margin-right\", \"24px\");\r\n\r\n        const inputBox2 = controls.append(\"input\")\r\n            .attr(\"type\", \"number\")\r\n            .attr(\"value\", \"10\")\r\n            .attr(\"min\", \"1\")\r\n            .attr(\"max\", \"100\");\r\n\r\n        // \"Generate Voronoi\" button appears first\r\n        controls.append(\"button\")\r\n            .text(\"Randomize\")\r\n            .style(\"margin-left\", \"10px\")\r\n            .on(\"click\", () => {\r\n                const numPoints = parseInt(inputBox2.node().value, 10);\r\n                this.environment.generateRandomPoints(numPoints);\r\n                this.environment.generateRandomSpeeds(numPoints);\r\n                this.environment.update();//computeVoronoi();\r\n                renderUtils.renderAll();\r\n                //socket.emit(\"generateVoronoi\", {numPoints});\r\n            });\r\n\r\n        // \"Cluster Voronoi\" button\r\n        controls.append(\"button\")\r\n            .text(\"Cluster\")\r\n            .style(\"margin-left\", \"10px\")\r\n            .on(\"click\", () => {\r\n                this.world.clusterPoints();\r\n                //socket.emit(\"generateVoronoi\", {numPoints});\r\n            });\r\n\r\n        controls.append(\"button\")\r\n            .text(\"Animate\") // initial button text\r\n            .style(\"margin-left\", \"10px\")\r\n            .on(\"click\", function () {\r\n                if (!envState.isPlaying) {\r\n                    envState.isPlaying = true;\r\n                    self.animationInterval = setInterval(() => self.animatePoints(), 50);\r\n                    renderUtils.renderAll();\r\n                } else {\r\n                    //d3.select(this).text(\"Animate\");\r\n                    envState.isPlaying = false;\r\n                    clearInterval(self.animationInterval);  // Stop animation\r\n                }\r\n                d3.select(this).text(envState.isPlaying ? \"Stop\" : \"Animate\");\r\n            });\r\n\r\n        // \"Save as SVG\" button appears below\r\n        controls.append(\"button\")\r\n            .text(\"Save as SVG\")\r\n            .style(\"display\", \"block\")\r\n            .style(\"margin-top\", \"10px\")\r\n            .on(\"click\", () => this.world.saveAsSVG());\r\n\r\n        // \"Save as JSON\" button\r\n        controls.append(\"button\")\r\n            .text(\"Save as JSON\")\r\n            .style(\"display\", \"block\")\r\n            .style(\"margin-top\", \"5px\")\r\n            .on(\"click\", () => this.environment.saveAsJSON());\r\n\r\n        // \"Load from JSON\" button\r\n        controls.append(\"button\")\r\n            .text(\"Load from JSON\")\r\n            .style(\"display\", \"block\")\r\n            .style(\"margin-top\", \"5px\")\r\n            .on(\"click\", () => this.loadFromJSON());\r\n\r\n        // init other event handlers related to the html document elements\r\n        document.addEventListener(\"keydown\", (event) => {\r\n            if (event.key === \"Control\" && !envState.isCtrlPressed) {\r\n                envState.isCtrlPressed = true;\r\n                renderUtils.renderAll();\r\n            }\r\n        });\r\n\r\n        document.addEventListener(\"keyup\", (event) => {\r\n            if (event.key === \"Control\" && envState.isCtrlPressed) {\r\n                envState.isCtrlPressed = false;\r\n                // trigger pathfinder\r\n                this.environment.pathFinding();\r\n                this.environment.generateRandomParticles(this.environment.lines,this.environment.numberOfParticles);\r\n                // and redraw\r\n                this.environment.update();\r\n                renderUtils.renderAll();\r\n            }\r\n        });\r\n\r\n        let menu = document.querySelector(\".pathfinder-menu\");\r\n        menu.addEventListener(\"change\", function() {\r\n            envState.pathFinder = this.value;\r\n            self.environment.pathFinding();\r\n            self.environment.generateRandomParticles(self.environment.lines,self.environment.numberOfParticles);\r\n            // and redraw\r\n            renderUtils.renderAll();\r\n        });\r\n\r\n        // Add event listener to slider\r\n        document.getElementById(\"slider\").addEventListener(\"input\", function() {\r\n            if (envState.activeTab === 'environment') {\r\n                document.getElementById(\"demo\").innerText = this.value;\r\n                self.sliderChanged(this.value);\r\n            }\r\n        });\r\n\r\n        // Add file input change event to parse JSON\r\n        document.getElementById(\"fileInput\").addEventListener(\"change\", function(event) {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n                const reader = new FileReader();\r\n                reader.onload = function(e) {\r\n                    try {\r\n                        const jsonData = JSON.parse(e.target.result);  // Parse the JSON data\r\n\r\n                        // reset global variables using data structure from parsed JSON\r\n                        self.environment.width = jsonData.dimension.width;\r\n                        self.environment.height = jsonData.dimension.height;\r\n\r\n                        // sets the initial zooming viewBox to the new width/height\r\n                        self.initWorld();\r\n\r\n                        // init the grid\r\n                        self.environment.initGrid(jsonData.gridSize);\r\n                        envState.pathFinder = jsonData.pathFinder;\r\n                        document.querySelector(\".pathfinder-menu\").value = envState.pathFinder;\r\n\r\n                        self.environment.voronoiPoints = jsonData.voronoiPoints;\r\n                        self.environment.generateRandomSpeeds(self.environment.voronoiPoints.length);\r\n                        self.environment.clippingPolygon = jsonData.clippingPolygon;\r\n                        self.environment.lines = jsonData.lines;\r\n                        self.environment.editPolygons = jsonData.editPolygons;\r\n                        self.environment.editVertices = jsonData.polygonVertices;\r\n                        self.environment.editPolygonIndices = jsonData.polygonIndices;\r\n\r\n                        self.environment.lines.dynamicLines = self.environment.lines;\r\n                        self.environment.particles = jsonData.particles;\r\n                        self.environment.numberOfParticles = jsonData.numLineParticles;\r\n                        self.environment.selectedCells = new Set(jsonData.blockedCells);\r\n\r\n                        inputBox.attr(\"value\", jsonData.numLines);\r\n                        inputBox2.attr(\"value\", jsonData.numVoronoiPoints);\r\n                        inputBox3.attr(\"value\", self.environment.numberOfParticles);\r\n\r\n                        // update voronoi and trigger a redraw\r\n                        self.resetSlider();\r\n                        document.getElementById(\"sliderEnd\").value = 0;\r\n\r\n                        envState.editMode = jsonData.mode;\r\n\r\n                        self.environment.update();\r\n                        renderUtils.renderAll();\r\n\r\n                    } catch (error) {\r\n                        alert(\"Error parsing JSON file: \" + error.message);\r\n                    }\r\n                };\r\n                reader.readAsText(file);\r\n            }\r\n            document.getElementById(\"fileInput\").value = \"\"; // Reset file input to allow reloading the same file\r\n        });\r\n\r\n        // Attach event listeners to checkboxes\r\n        document.getElementById(\"toggleCrossings\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"toggleIntersections\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"toggleVoronoiPoints\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"toggleLines\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"minLength\").addEventListener(\"change\", () => this.updateValueSettings());\r\n        document.getElementById(\"minDistance\").addEventListener(\"change\", () => this.updateValueSettings());\r\n        document.getElementById(\"minVertex\").addEventListener(\"change\", () => this.updateValueSettings());\r\n        document.getElementById(\"toggleDelaunay\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"sliderEnd\").addEventListener(\"change\", () => this.updateParticleOffset());\r\n        document.getElementById(\"toggleParticles\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"togglePolygons\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"toggleDirect\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"toggleWeatherCell\").addEventListener(\"change\", () => this.updateVisibility());\r\n        document.getElementById(\"toggleWindField\").addEventListener(\"change\", () => this.updateVisibility());\r\n\r\n        this.initVisibility();\r\n        this.initValueSettings();\r\n\r\n        // init the world and chart\r\n        this.initWorld();\r\n        this.initChart();\r\n\r\n        // init canvas event handlers\r\n        this.world.initEventHandlers();\r\n        this.chart.initEventHandlers();\r\n\r\n        // draw all components for the first time\r\n        this.render();\r\n    }\r\n\r\n    initWorld() {\r\n        this.world.init();\r\n    }\r\n\r\n    initChart() {\r\n        this.chart.init();\r\n    }\r\n\r\n    sliderChanged(value) {\r\n        this.environment.particlePositions = this.environment.updateParticles(value);\r\n        this.environment.timeValue = parseInt(value);\r\n        this.environment.timeValue += this.environment.timeOffset;\r\n        this.environment.update();\r\n        renderUtils.renderAll();\r\n    }\r\n\r\n    resetSlider() {\r\n        document.getElementById(\"slider\").value = 0;\r\n        document.getElementById(\"slider\").max = 120;\r\n        document.getElementById(\"demo\").innerText = \"0\";\r\n        this.environment.particlePositions = this.environment.updateParticles(0);\r\n        this.environment.timeValue = this.environment.timeOffset;\r\n    }\r\n\r\n    updateParticleOffset() {\r\n        const offsetValue = document.getElementById(\"sliderEnd\").value;\r\n        this.environment.offsetParticles(offsetValue);\r\n        this.environment.timeOffset = parseInt(offsetValue);\r\n        this.environment.timeValue += this.environment.timeOffset;\r\n        this.resetSlider();\r\n        this.environment.update();\r\n        renderUtils.renderAll();\r\n    }\r\n\r\n    loadFromJSON(filename) {\r\n        if(filename)\r\n            this.loadJSON(filename);\r\n        else\r\n            document.getElementById(\"fileInput\").click(); // opens the file browser\r\n    }\r\n\r\n    animatePoints() {\r\n        this.environment.voronoiPoints = this.environment.voronoiPoints.map((point, index) => {\r\n            let [x, y] = point;\r\n            let [vx, vy] = this.environment.voronoiSpeeds[index];\r\n\r\n            // Update positions based on \"speed\" vector\r\n            x += vx;\r\n            y += vy;\r\n\r\n            // Bounce off the walls\r\n            if (x <= 0 || x >= this.environment.width) {\r\n                vx *= -1;\r\n                x = Math.max(0, Math.min(x, this.environment.width));  // Keep point within bounds\r\n            }\r\n            if (y <= 0 || y >= this.environment.height) {\r\n                vy *= -1;\r\n                y = Math.max(0, Math.min(y, this.environment.height));  // Keep point within bounds\r\n            }\r\n\r\n            // Update speed for bouncing effect\r\n            this.environment.voronoiSpeeds[index] = [vx, vy];\r\n\r\n            return [x, y];  // Return updated point position\r\n        });\r\n\r\n        this.environment.update();\r\n        this.render();\r\n    }\r\n\r\n    async loadJSON(filename) {\r\n        // const filePath = this.path.resolve(__dirname, filename);\r\n        // const rawData = this.fs.readFileSync(filePath, 'utf-8');\r\n        // const jsonData = JSON.parse(rawData);\r\n\r\n        const response = await fetch(filename);\r\n        const jsonData = await response.json();\r\n\r\n        // reset global variables using data structure from parsed JSON\r\n        this.environment.width = jsonData.dimension.width;\r\n        this.environment.height = jsonData.dimension.height;\r\n\r\n        // sets the initial zooming viewBox to the new width/height\r\n        this.initWorld();\r\n\r\n        // init the grid\r\n        this.environment.initGrid(jsonData.gridSize);\r\n        envState.pathFinder = jsonData.pathFinder;\r\n        document.querySelector(\".pathfinder-menu\").value = envState.pathFinder;\r\n\r\n        this.environment.voronoiPoints = jsonData.voronoiPoints;\r\n        this.environment.generateRandomSpeeds(this.environment.voronoiPoints.length);\r\n        this.environment.clippingPolygon = jsonData.clippingPolygon;\r\n        this.environment.lines = jsonData.lines;\r\n        this.environment.particles = jsonData.particles;\r\n        this.environment.editPolygons = jsonData.editPolygons;\r\n        this.environment.editVertices = jsonData.polygonVertices;\r\n        this.environment.editPolygonIndices = jsonData.polygonIndices;\r\n\r\n        this.environment.dynamicLines = this.environment.lines;\r\n        this.environment.numberOfParticles = jsonData.numLineParticles;\r\n        this.environment.selectedCells = new Set(jsonData.blockedCells);\r\n\r\n        // update voronoi and trigger a redraw\r\n        this.resetSlider();\r\n\r\n        // reset slider offset\r\n        document.getElementById(\"sliderEnd\").value = 0;\r\n\r\n        envState.editMode = jsonData.mode;\r\n\r\n        this.environment.update();\r\n        renderUtils.renderAll();\r\n    }\r\n\r\n    initVisibility() {\r\n        document.getElementById(\"toggleCrossings\").checked = envState.showCrossings;\r\n        document.getElementById(\"toggleIntersections\").checked = envState.showIntersections;\r\n        document.getElementById(\"toggleVoronoiPoints\").checked = envState.showVoronoiPoints;\r\n        document.getElementById(\"toggleLines\").checked = envState.showLines;\r\n        document.getElementById(\"toggleDelaunay\").checked = envState.showDelaunay;\r\n        document.getElementById(\"toggleParticles\").checked = envState.showParticles;\r\n        document.getElementById(\"togglePolygons\").checked = envState.showPolygons;\r\n        document.getElementById(\"toggleWeatherCell\").checked = envState.showWeather;\r\n        document.getElementById(\"toggleWindField\").checked = envState.showWindField;\r\n        document.getElementById(\"toggleDirect\").checked = envState.showDirectLines;\r\n    }\r\n\r\n    initValueSettings() {\r\n        document.getElementById(\"minLength\").value = envState.length_threshold;\r\n        document.getElementById(\"minDistance\").value = envState.distance_threshold;\r\n        document.getElementById(\"minVertex\").value = envState.vertex_line_threshold;\r\n        document.querySelector(\".pathfinder-menu\").value = envState.pathFinder;\r\n    }\r\n\r\n    updateVisibility() {\r\n        envState.showCrossings = document.getElementById(\"toggleCrossings\").checked;\r\n        envState.showIntersections = document.getElementById(\"toggleIntersections\").checked;\r\n        envState.showVoronoiPoints = document.getElementById(\"toggleVoronoiPoints\").checked;\r\n        envState.showLines = document.getElementById(\"toggleLines\").checked;\r\n        envState.showDelaunay = document.getElementById(\"toggleDelaunay\").checked;\r\n        envState.showParticles = document.getElementById(\"toggleParticles\").checked;\r\n        envState.showPolygons = document.getElementById(\"togglePolygons\").checked;\r\n        envState.showWeather = document.getElementById(\"toggleWeatherCell\").checked;\r\n        envState.showWindField = document.getElementById(\"toggleWindField\").checked;\r\n        envState.showDirectLines = document.getElementById(\"toggleDirect\").checked;\r\n\r\n        this.environment.update();\r\n        this.render();\r\n    }\r\n\r\n    updateValueSettings() {\r\n        envState.length_threshold = document.getElementById(\"minLength\").value;\r\n        envState.distance_threshold = document.getElementById(\"minDistance\").value;\r\n        envState.vertex_line_threshold = document.getElementById(\"minVertex\").value;\r\n\r\n        this.environment.update();\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        renderUtils.renderAll();\r\n    }\r\n}\r\n\r\nclass TabComponent {\r\n    constructor(container, display, onTabChange = null) {\r\n        this.container = container;\r\n        this.display = display;\r\n        this.tabs = container.querySelectorAll('.tab');\r\n        this.contents = container.querySelectorAll('.tab-content');\r\n        this.onTabChange = onTabChange; // Optional callback\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.tabs.forEach(tab => {\r\n            tab.addEventListener('click', () => this.activateTab(tab));\r\n        });\r\n\r\n        //  Listen for global sync events\r\n        window.GlobalEventBus.addEventListener('sync-tab-state', (e) => {\r\n            this.syncWithExternalState(e.detail); // e.g., envState\r\n        });\r\n    }\r\n\r\n    activateTab(selectedTab) {\r\n        this.tabs.forEach(tab => tab.classList.remove('active'));\r\n        this.contents.forEach(content => content.classList.remove('active'));\r\n\r\n        selectedTab.classList.add('active');\r\n        selectedTab.classList.remove('tab-warning'); //  Remove warning when activated\r\n\r\n        const targetId = selectedTab.getAttribute('data-tab');\r\n        const targetContent = this.container.querySelector(`#${targetId}`);\r\n        if (targetContent) {\r\n            targetContent.classList.add('active');\r\n        }\r\n\r\n        //  Log or use active tab ID\r\n        //console.log(`Active Tab ID: ${targetId}`);\r\n\r\n        //envState.activeTab = targetId;\r\n        //console.log(envState.activeTab);\r\n\r\n        //console.log(targetId);\r\n        if(targetId === 'environment' || targetId === 'graph' || targetId === 'heatmap') {\r\n            envState.activeTab = targetId;\r\n            const slider = document.getElementById(\"slider\");\r\n            slider.disabled = envState.activeTab !== 'environment';\r\n            envState.assistantTab = null;\r\n            renderUtils.renderAll();\r\n        }\r\n        else if(targetId === 'ai-container'){\r\n            envState.assistantTab = targetId;\r\n        }\r\n        else\r\n            envState.assistantTab = null;\r\n\r\n        //  Optional: Call a callback\r\n        // if (typeof this.onTabChange === 'function') {\r\n        //     this.onTabChange(targetId);\r\n        // }\r\n        //\r\n        // //  Optional: Dispatch custom event\r\n        // this.container.dispatchEvent(new CustomEvent('tabChange', {\r\n        //     detail: { activeTabId: targetId }\r\n        // }));\r\n    }\r\n\r\n    // New method to highlight tabs based on a condition\r\n    highlightTabIfNeeded(conditionFn) {\r\n        this.tabs.forEach(tab => {\r\n            if (conditionFn(tab)) {\r\n                tab.classList.add('tab-warning');\r\n            } else {\r\n                tab.classList.remove('tab-warning');\r\n            }\r\n        });\r\n    }\r\n\r\n    syncWithExternalState(externalState) {\r\n        this.highlightTabIfNeeded(tab => {\r\n            const tabId = tab.getAttribute('data-tab');\r\n            const isInWarningList = externalState.warningTab.includes(tabId);\r\n            const isActive = tab.classList.contains('active');\r\n            return isInWarningList && !isActive; //  Only highlight if NOT active\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as d3 from 'd3';\r\nimport { envState } from \"../settings\";\r\nimport { highlightUtils } from '../newmain.js';\r\nimport { renderUtils } from '../newmain.js';\r\nimport * as canvg from \"canvg\";\r\nimport '../styles.css';\r\nimport {kmeansStability} from \"../clustering/kmeans\";\r\nimport {easeInOutCubic} from \"../utility/animation\";\r\n\r\nexport class World {\r\n    constructor(environment) {\r\n        this.environment = environment;\r\n        this.svgCanvas = undefined;\r\n        this.svg = undefined;\r\n        this.zoom = undefined;\r\n        this.tooltip = undefined;\r\n        this.contextMenu = undefined;\r\n        this.svgWidth = 800;\r\n        this.svgHeight = 600;\r\n        this.draggingPoint = null;\r\n        this.draggingPolygonPoint = null;\r\n        this.selectedPoint = null;\r\n        this.hoveredGridCell = null;\r\n\r\n        highlightUtils.setInstance(\"world\", this);\r\n        renderUtils.setInstance(\"world\", this);\r\n    }\r\n\r\n    init() {\r\n\r\n        // Create tooltip if not already created\r\n        if (!this.tooltip) {\r\n            this.tooltip = d3.select(\"body\")\r\n                .append(\"div\")\r\n                .attr(\"class\", \"tooltip\");\r\n        }\r\n\r\n        // Create SVG canvas if not already created\r\n        if (!this.svgCanvas) {\r\n            this.svgCanvas = d3.select(\"#voronoi-container\")\r\n                .append(\"svg\")\r\n                .attr(\"id\", \"voronoiCanvas\")\r\n                .style(\"border\", \"1px solid #ccc\")\r\n                .style(\"margin-bottom\", \"8px\");\r\n\r\n            this.svg = this.svgCanvas.append(\"g\");\r\n        }\r\n\r\n        // Always update size and viewBox in case environment changed\r\n        this.svgCanvas\r\n            .attr(\"width\", this.svgWidth)\r\n            .attr(\"height\", this.svgHeight)\r\n            .attr(\"viewBox\", `0 0 ${this.environment.width} ${this.environment.height}`)\r\n            .attr(\"preserveAspectRatio\", \"xMidYMid meet\");\r\n\r\n        // Create zoom behavior only once\r\n        if (!this.zoom) {\r\n            this.zoom = d3.zoom()\r\n                .scaleExtent([0.25, 3.0])\r\n                .translateExtent([[0, 0], [this.environment.width, this.environment.height]])\r\n                .on(\"zoom\", (event) => {\r\n                    this.svg.attr(\"transform\", event.transform);\r\n                });\r\n        } else {\r\n            // Update translateExtent in case environment changed\r\n            this.zoom.translateExtent([[0, 0], [this.environment.width, this.environment.height]]);\r\n        }\r\n\r\n        // Apply zoom behavior to this.svg (the <g> group)\r\n        this.svg.call(this.zoom);\r\n    }\r\n\r\n    initEventHandlers() {\r\n        // attach event handlers\r\n\r\n        this.contextMenu = d3.select(\"#context-menu\");\r\n\r\n        d3.select(\"body\").on(\"click\", () => this.hideContextMenu());\r\n\r\n        this.svg.on(\"mousemove\", (event) => {\r\n            if (!envState.isCtrlPressed || envState.activeTab !== 'environment') return;\r\n\r\n            const [mouseX, mouseY] = d3.pointer(event, this.svg.node());\r\n            const cell = this.environment.getNearestCell(mouseX, mouseY);\r\n\r\n            if (cell && this.hoveredGridCell !== cell) {\r\n                //svg.selectAll(\"rect\").attr(\"fill\", d => selectedCells.has(d.index) ? \"orange\" : \"none\");\r\n                this.drawGridCell();\r\n                d3.selectAll(\"rect\").filter(d => d.x === cell.x && d.y === cell.y).attr(\"fill\", \"lightblue\");\r\n                this.hoveredGridCell = cell;\r\n            }\r\n\r\n            if (envState.isDragging && cell && !this.environment.selectedCells.has(cell.index)) {\r\n                this.environment.selectedCells.add(cell.index);\r\n                this.drawGridCell();\r\n                //d3.selectAll(\"rect\").filter(d => d.index === cell.index).attr(\"fill\", \"orange\");\r\n            }\r\n\r\n            if (envState.isRightDragging && cell && this.environment.selectedCells.has(cell.index)) {\r\n                this.environment.selectedCells.delete(cell.index);\r\n                //d3.selectAll(\"rect\").filter(d => d.index === cell.index).attr(\"fill\", \"none\");\r\n                this.drawGridCell();\r\n            }\r\n        });\r\n\r\n        this.svg.on(\"mousedown\", (event) => {\r\n            if (!envState.isCtrlPressed || envState.activeTab !== 'environment') return;\r\n            envState.isDragging = true;\r\n\r\n            const [mouseX, mouseY] = d3.pointer(event, this.svg.node());\r\n            const cell = this.environment.getNearestCell(mouseX, mouseY);\r\n\r\n            if (event.button === 0) { // Left mouse button for selecting\r\n                envState.isDragging = true;\r\n                if (cell) {\r\n                    this.environment.selectedCells.add(cell.index);\r\n                    this.drawGridCell();\r\n                }\r\n            } else if (event.button === 2) { // Right mouse button for deselecting\r\n                envState.isRightDragging = true;\r\n                if (cell) {\r\n                    this.environment.selectedCells.delete(cell.index);\r\n                    this.drawGridCell();\r\n                }\r\n            }\r\n        });\r\n\r\n        this.svg.on(\"mouseup\", function () {\r\n            envState.isDragging = false;\r\n            envState.isRightDragging = false;\r\n        });\r\n\r\n        // Prevent context menu from appearing on right-click\r\n        this.svg.on(\"contextmenu\", (event) => {\r\n            [envState.mouseXPos, envState.mouseYPos] = d3.pointer(event, this.svg.node());\r\n            event.preventDefault();\r\n            if (!envState.isCtrlPressed) this.showContextMenu('global', event.pageX, event.pageY);\r\n        });\r\n    }\r\n\r\n    async zoomToPoint(x, y, scale) {\r\n        const viewBox = this.svgCanvas.attr(\"viewBox\").split(\" \").map(Number);\r\n        const vbWidth = viewBox[2];\r\n        const vbHeight = viewBox[3];\r\n\r\n        // Compute translation to center the (x, y) point\r\n        const translateX = vbWidth / 2 - x * scale;\r\n        const translateY = vbHeight / 2 - y * scale;\r\n\r\n        const t = this.svg.transition().duration(750);\r\n\r\n        // Apply transform\r\n        t.call(this.zoom.transform,\r\n            d3.zoomIdentity\r\n                .translate(translateX, translateY)\r\n                .scale(scale)\r\n        );\r\n\r\n        await t.end();\r\n    }\r\n\r\n    async zoomToArea(x, y, width, height, scale) {\r\n        const viewBox = this.svgCanvas.attr(\"viewBox\").split(\" \").map(Number);\r\n        const vbWidth = viewBox[2];\r\n        const vbHeight = viewBox[3];\r\n\r\n        // Compute center of the area to zoom to\r\n        const centerX = x + width / 2;\r\n        const centerY = y + height / 2;\r\n\r\n        // Translate so that center of area appears in center of viewBox\r\n        const translateX = vbWidth / 2 - centerX * scale;\r\n        const translateY = vbHeight / 2 - centerY * scale;\r\n\r\n        const t = this.svg.transition().duration(750);\r\n\r\n        // Apply transform\r\n        t.call(this.zoom.transform,\r\n            d3.zoomIdentity\r\n                .translate(translateX, translateY)\r\n                .scale(scale)\r\n        );\r\n\r\n        await t.end();\r\n    }\r\n\r\n    drawEmptySVG() {\r\n        this.svg.selectAll(\".empty\").remove(); // Remove old heatmap\r\n\r\n        // Draw grid cells\r\n        this.svg.selectAll(\".empty\")\r\n            .data([0, 0])\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"empty\")\r\n            .attr(\"x\", d => d[0])\r\n            .attr(\"y\", d => d[1])\r\n            .attr(\"width\", this.environment.width)\r\n            .attr(\"height\", this.environment.height)\r\n            .attr(\"fill\", \"rgba(228,227,227,0.1)\")\r\n            .attr(\"stroke\", \"none\");\r\n    }\r\n\r\n    drawDelaunayGraph() {\r\n\r\n        // Draw Delaunay lines\r\n        const delaunay = d3.Delaunay.from(this.environment.voronoiPoints);\r\n        const triangles = delaunay.trianglePolygons();\r\n\r\n        this.svg.selectAll(\".delaunay-edges\").remove(); // Remove old\r\n\r\n        this.svg.selectAll(\"delaunay-edges\")\r\n            .data(triangles)\r\n            .enter()\r\n            .append(\"path\")\r\n            .attr(\"class\", \"delaunay-edges\")\r\n            .attr(\"d\", d => \"M\" + d.join(\"L\") + \"Z\")\r\n            .attr(\"stroke\", \"#000\")\r\n            .attr(\"fill\", \"none\");\r\n\r\n        this.svg.selectAll(\".graphcontrol-point\").remove(); // Remove old\r\n\r\n        // Draw Voronoi Points\r\n        this.svg.selectAll(\".graphcontrol-point\")\r\n            .data(this.environment.voronoiPoints)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"graphcontrol-point\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 6)\r\n            .attr(\"fill\", \"green\")\r\n            .attr(\"stroke\", \"rgba(66,74,41,0.7)\")\r\n            .attr(\"stroke-width\", 2)\r\n            .call(d3.drag()\r\n                .on(\"start\", (_, d) => {\r\n                    if (!envState.isCtrlPressed) {\r\n                        this.draggingPoint = this.environment.voronoiPoints.findIndex(p => p[0] === d[0] && p[1] === d[1]);\r\n                    }\r\n                })\r\n                .on(\"drag\", (event) => {\r\n                    if (this.draggingPoint !== null && !envState.isCtrlPressed) {\r\n                        this.environment.voronoiPoints[this.draggingPoint] = [Math.max(0, Math.min(this.environment.width, event.x)), Math.max(0, Math.min(this.environment.height, event.y))];\r\n                        //requestAnimationFrame(render);\r\n                        this.environment.update();\r\n                        renderUtils.renderAll();\r\n                        //computeVoronoi();\r\n                        //render();\r\n                    }\r\n                })\r\n                .on(\"end\", () => {\r\n                    if (this.draggingPoint !== null && !envState.isCtrlPressed) {\r\n                        // socket.emit(\"updatePoint\", {\r\n                        //     index: draggingPoint,\r\n                        //     x: points[draggingPoint][0],\r\n                        //     y: points[draggingPoint][1]\r\n                        // });\r\n                        this.draggingPoint = null;\r\n                    }\r\n                })\r\n            )\r\n            .on(\"contextmenu\", (event, d) => {\r\n                if (!envState.isCtrlPressed) {\r\n                    event.preventDefault();\r\n                    this.selectedPoint = d;\r\n                    event.stopPropagation(); // Prevent SVG context menu from showing\r\n                    [envState.mouseXPos, envState.mouseYPos] = d3.pointer(event, this.svg.node());\r\n                    this.showContextMenu('element', event.pageX, event.pageY);\r\n                }\r\n            });\r\n    }\r\n\r\n    drawVoronoi() {\r\n        let index = -1;\r\n        this.svg.selectAll(\".edit-polygon\").remove(); // Remove old\r\n\r\n        this.svg.selectAll(\".polygon\").remove(); // Remove old\r\n        this.svg.selectAll(\".voronoi-vertex\").remove();\r\n        this.svg.selectAll(\".voronoi-point\").remove();\r\n\r\n        const self = this;\r\n\r\n        // Draw Voronoi Polygons (Clipped)\r\n        this.svg.selectAll(\".polygon\")\r\n            .data(this.environment.polygons)\r\n            .enter().append(\"polygon\")\r\n            .attr(\"class\", \"polygon\")\r\n            .attr(\"points\", d => d ? d.map(p => p.join(\",\")).join(\" \") : \"\")\r\n            //.attr(\"fill\", \"rgba(225,225,225,0.7)\")\r\n            .attr(\"fill\", (d, i) => i === this.environment.selectedPolygonIdx ? \"rgba(145,180,227,0.6)\" : \"rgba(225,225,225,0.7)\")\r\n            .attr(\"stroke\", \"black\")\r\n            .attr(\"stroke-width\", 2.0)\r\n            .attr(\"data-index\", (d, i) => i)\r\n            .on(\"mouseover\", function (event, d) {\r\n                if (!envState.isCtrlPressed) {\r\n                    //const area = calculatePolygonArea(d);\r\n                    //const numIntersections = intersectionPoints.filter(pt => isPointInsidePolygon(pt, d)).length;\r\n\r\n                    // Count line crossing points inside the polygon\r\n                    //const numCrossings = crossings.filter(pt => isPointInsidePolygon(pt, d)).length;\r\n\r\n                    index = self.environment.polygons.indexOf(d);\r\n\r\n                    d3.select(this).attr(\"fill\", \"rgba(255,165,0,0.6)\"); // Highlight with orange\r\n                    self.tooltip.style(\"visibility\", \"visible\")\r\n                        .text(`Cell: ${index + 1}`);\r\n\r\n                    highlightUtils.highlightBar(index);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            })\r\n            .on(\"mousemove\", function (event) {\r\n                if (!envState.isCtrlPressed) {\r\n                    self.tooltip.style(\"top\", `${event.pageY + 10}px`)\r\n                        .style(\"left\", `${event.pageX + 10}px`);\r\n                    highlightUtils.highlightBar(index);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            })\r\n            .on(\"mouseout\", function () {\r\n                if (!envState.isCtrlPressed) {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                    if(index !== self.environment.selectedPolygonIdx)\r\n                        d3.select(this).attr(\"fill\", \"rgba(225,225,225,0.7)\"); // Reset\r\n                    else\r\n                        d3.select(this).attr(\"fill\", \"rgba(145,180,227,0.6)\"); // Reset\r\n                    highlightUtils.removeHighlightBar(index);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            });\r\n\r\n        // Draw Voronoi Vertices (Green Dots)\r\n        this.svg.selectAll(\".voronoi-vertex\")\r\n            .data(this.environment.voronoiVertices)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"voronoi-vertex\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 3)\r\n            .attr(\"fill\", \"green\");\r\n\r\n        // Draw Voronoi Points (Red)\r\n        this.svg.selectAll(\".voronoi-point\")\r\n            .data(this.environment.voronoiPoints)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"voronoi-point\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 6)\r\n            .attr(\"fill\", \"green\")\r\n            .attr(\"stroke\", \"rgba(66,74,41,0.7)\")\r\n            .attr(\"stroke-width\", 2)\r\n            .call(d3.drag()\r\n                .on(\"start\", (_, d) => {\r\n                    if (!envState.isCtrlPressed) {\r\n                        this.draggingPoint = this.environment.voronoiPoints.findIndex(p => p[0] === d[0] && p[1] === d[1]);\r\n                    }\r\n                })\r\n                .on(\"drag\", (event) => {\r\n                    if (this.draggingPoint !== null && !envState.isCtrlPressed) {\r\n                        this.environment.voronoiPoints[this.draggingPoint] = [Math.max(0, Math.min(this.environment.width, event.x)), Math.max(0, Math.min(this.environment.height, event.y))];\r\n                        //requestAnimationFrame(render);\r\n                        this.environment.update();\r\n                        renderUtils.renderAll();\r\n                        //computeVoronoi();\r\n                        //render();\r\n                    }\r\n                })\r\n                .on(\"end\", () => {\r\n                    if (this.draggingPoint !== null && !envState.isCtrlPressed) {\r\n                        // socket.emit(\"updatePoint\", {\r\n                        //     index: draggingPoint,\r\n                        //     x: points[draggingPoint][0],\r\n                        //     y: points[draggingPoint][1]\r\n                        // });\r\n                        this.draggingPoint = null;\r\n                    }\r\n                })\r\n            )\r\n            .on(\"contextmenu\", (event, d) => {\r\n                if (!envState.isCtrlPressed) {\r\n                    event.preventDefault();\r\n                    event.stopPropagation(); // Prevent SVG context menu from showing\r\n                    this.selectedPoint = d;\r\n                    [envState.mouseXPos, envState.mouseYPos] = d3.pointer(event, this.svg.node());\r\n                    this.showContextMenu('element', event.pageX, event.pageY);\r\n                }\r\n            });\r\n    }\r\n\r\n    drawEditablePolygons() {\r\n        let index = -1;\r\n        const self = this;\r\n\r\n        //this.svg.selectAll(\".edit-polygon\").remove();\r\n        //this.svg.selectAll(\".edit-vertex\").remove();\r\n\r\n        // Draw Voronoi Polygons (Clipped)\r\n        this.svg.selectAll(\".edit-polygon\")\r\n            .data(this.environment.editPolygonIndices)\r\n            .enter().append(\"polygon\")\r\n            .attr(\"class\", \"edit-polygon\")\r\n            .attr(\"points\", d => d.map(i => this.environment.editVertices[i].join(\",\")).join(\" \"))\r\n            .attr(\"fill\", (d, i) => i === this.environment.selectedPolygonIdx ? \"rgba(145,180,227,0.6)\" : \"rgba(225,225,225,0.7)\")\r\n            .attr(\"stroke\", \"blue\")\r\n            .attr(\"stroke-width\", 2.0)\r\n            .on(\"mouseover\", function (event, d) {\r\n                if (!envState.isCtrlPressed) {\r\n\r\n                    index = self.environment.editPolygonIndices.indexOf(d);\r\n                    d3.select(this).attr(\"fill\", \"rgba(255,165,0,0.6)\"); // Highlight with orange\r\n                    self.tooltip.style(\"visibility\", \"visible\")\r\n                        .text(`Cell: ${index + 1}`);\r\n                    highlightUtils.highlightBar(index);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            })\r\n            .on(\"mousemove\", function (event) {\r\n                if (!envState.isCtrlPressed) {\r\n                    self.tooltip.style(\"top\", `${event.pageY + 10}px`)\r\n                        .style(\"left\", `${event.pageX + 10}px`);\r\n                    highlightUtils.highlightBar(index);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            })\r\n            .on(\"mouseout\", function () {\r\n                if (!envState.isCtrlPressed) {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                    if(index !== self.environment.selectedPolygonIdx)\r\n                        d3.select(this).attr(\"fill\", \"rgba(225,225,225,0.7)\"); // Reset\r\n                    else\r\n                        d3.select(this).attr(\"fill\", \"rgba(145,180,227,0.6)\"); // Reset\r\n                    highlightUtils.removeHighlightBar(index);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            });\r\n\r\n        // Draw polygon vertices\r\n        this.svg.selectAll(\".edit-vertex\")\r\n            .data(this.environment.editVertices)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"edit-vertex\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 5)\r\n            .attr(\"fill\", \"blue\")\r\n            .call(d3.drag()\r\n                .on(\"drag\", (event, d) => {\r\n                    d[0] = Math.max(0, Math.min(this.environment.width, event.x));\r\n                    d[1] = Math.max(0, Math.min(this.environment.height, event.y));\r\n                    this.environment.update();\r\n                    renderUtils.renderAll();\r\n                })\r\n            );\r\n    }\r\n\r\n    drawLines() {\r\n        this.environment.lines.forEach(points => {\r\n            const polylinePoints = points.map(d => d.join(\",\")).join(\" \");\r\n\r\n            // draw direct line if the polyline has more than 2 points\r\n            if (points.length > 2 && envState.showDirectLines) {\r\n                this.svg.append(\"line\")\r\n                    .attr(\"class\", \"line\")\r\n                    .attr(\"x1\", points[0][0])\r\n                    .attr(\"y1\", points[0][1])\r\n                    .attr(\"x2\", points[points.length - 1][0])\r\n                    .attr(\"y2\", points[points.length - 1][1])\r\n                    .attr(\"stroke\", `rgb(15, 179, 179)`)\r\n                    .style(\"stroke-dasharray\", (\"3, 3\"))\r\n                    .attr(\"stroke-width\", 2);\r\n            }\r\n\r\n            // draw polyline\r\n            this.svg.append(\"polyline\")\r\n                .attr(\"points\", polylinePoints)\r\n                .attr(\"class\", \"line\")\r\n                .attr(\"fill\", \"none\")\r\n                .attr(\"stroke\", \"cyan\")\r\n                .attr(\"stroke-width\", 2);\r\n        });\r\n    }\r\n\r\n    drawParticles() {\r\n        this.svg.selectAll(\".particle-circle\")\r\n            .data(this.environment.particlePositions)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"particle-circle\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 5)\r\n            .attr(\"fill\", \"black\");\r\n    }\r\n\r\n    drawClippingPolygon() {\r\n        // Draw Clipping Polygon (Boundary)\r\n        this.svg.append(\"polygon\")\r\n            .attr(\"points\", this.environment.clippingPolygon[0].map(p => p.join(\",\")).join(\" \"))\r\n            .attr(\"stroke\", \"blue\")\r\n            .attr(\"fill\", \"none\")\r\n            .attr(\"stroke-width\", 2);\r\n\r\n        // Draw Clipping Polygon Points (Blue)\r\n        this.svg.selectAll(\".polygon-point\")\r\n            .data(this.environment.clippingPolygon[0])\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"clipping-vertex\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 6)\r\n            .attr(\"fill\", \"blue\")\r\n            .call(d3.drag()\r\n                .on(\"start\", (_, d) => {\r\n                    if (!envState.isCtrlPressed) {\r\n                        this.draggingPolygonPoint = this.environment.clippingPolygon[0].findIndex(p => p[0] === d[0] && p[1] === d[1]);\r\n                    }\r\n                })\r\n                .on(\"drag\", (event) => {\r\n                    if (this.draggingPolygonPoint !== null && !envState.isCtrlPressed) {\r\n                        this.environment.clippingPolygon[0][this.draggingPolygonPoint] = [Math.max(0, Math.min(this.environment.width, event.x)), Math.max(0, Math.min(this.environment.height, event.y))];\r\n                        //requestAnimationFrame(render);\r\n                        //computeVoronoi();\r\n                        //render();\r\n                        this.environment.update();\r\n                        renderUtils.renderAll();\r\n                    }\r\n                })\r\n                .on(\"end\", () => {\r\n                    if (this.draggingPolygonPoint !== null && !envState.isCtrlPressed) {\r\n                        // socket.emit(\"updatePolygon\", {\r\n                        //     index: draggingPolygonPoint,\r\n                        //     x: clippingPolygon[0][draggingPolygonPoint][0],\r\n                        //     y: clippingPolygon[0][draggingPolygonPoint][1]\r\n                        // });\r\n                        this.draggingPolygonPoint = null;\r\n                    }\r\n                })\r\n            );\r\n    }\r\n\r\n    drawGridCell() {\r\n        // Draw grid cells\r\n        this.svg.selectAll(\".grid\").remove();\r\n\r\n        let visibleCells = envState.isCtrlPressed ? this.environment.gridCells : this.environment.gridCells.filter(d => this.environment.selectedCells.has(d.index));\r\n\r\n        // first, draw an empty white box before showing grid cells to\r\n        // ensure that grid selection outside of the clipping polygon keeps on working well\r\n        if(envState.isCtrlPressed) this.drawEmptySVG();\r\n\r\n        this.svg.selectAll(\".grid\")\r\n            .data(visibleCells)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"grid\")\r\n            .attr(\"x\", d => d.x)\r\n            .attr(\"y\", d => d.y)\r\n            .attr(\"width\", this.environment.cellSize)\r\n            .attr(\"height\", this.environment.cellSize)\r\n            .attr(\"fill\", d => this.environment.selectedCells.has(d.index) ? \"orange\" : \"none\")\r\n            .attr(\"stroke\", \"lightgrey\");\r\n    }\r\n\r\n    drawHeatMap() {\r\n        // Color scale based on point density\r\n        const maxDensity = d3.max(this.environment.heatmapGrid); // parseInt(d3.max(heatmapGrid.map(grid => grid.value)));\r\n        const colorScaleHM = envState.activeTab === 'heatmap' ? d3.scaleSequential(d3.interpolateInferno)\r\n            .domain([0, maxDensity]) : d3.scaleSequential(d3.interpolateBlues)\r\n            .domain([0, maxDensity]);\r\n\r\n        this.svg.selectAll(\".heatmap\").remove(); // Remove old heatmap\r\n\r\n        const self = this;\r\n\r\n        // Draw grid cells\r\n        this.svg.selectAll(\".heatmap\")\r\n            .data(this.environment.gridCells)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"heatmap\")\r\n            .attr(\"x\", d => d.x)\r\n            .attr(\"y\", d => d.y)\r\n            .attr(\"width\", this.environment.cellSize)\r\n            .attr(\"height\", this.environment.cellSize)\r\n            .attr(\"fill\", d => colorScaleHM(this.environment.heatmapGrid[d.index]))\r\n            .attr(\"stroke\", \"none\")\r\n            .attr(\"data-index\", (d, i) => i)\r\n            .on(\"mouseover\", function (event, d) {\r\n                if (!envState.isCtrlPressed) {\r\n\r\n                    const value = self.environment.heatmapGrid[d.index];\r\n\r\n                    d3.select(this).attr(\"stroke\", \"rgb(255,255,255)\"); // outline in white\r\n\r\n                    self.tooltip.style(\"visibility\", \"visible\")\r\n                        .text(`${value}`);\r\n\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            })\r\n            .on(\"mousemove\", function (event) {\r\n                if (!envState.isCtrlPressed) {\r\n                    self.tooltip.style(\"top\", `${event.pageY + 10}px`)\r\n                        .style(\"left\", `${event.pageX + 10}px`);\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            })\r\n            .on(\"mouseout\", function () {\r\n                if (!envState.isCtrlPressed) {\r\n                    d3.select(this).attr(\"stroke\", \"none\"); // Reset\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                } else {\r\n                    self.tooltip.style(\"visibility\", \"hidden\");\r\n                }\r\n            });\r\n    }\r\n\r\n    drawGraphLineCrossings() {\r\n        this.svg.selectAll(\".graphcrossing-point\").remove(); // Remove old points\r\n\r\n        this.svg.append(\"g\")\r\n            .selectAll(\".graphcrossing-point\")\r\n            .data(this.environment.crossings)\r\n            .enter()\r\n            .append(\"circle\")\r\n            .attr(\"class\", \"graphcrossing-point\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 3)\r\n            //.attr(\"fill\", \"#FD3DB5\") // Magenta color  6b486b\r\n            .attr(\"fill\", \"#aa6caa\") // Magenta color  6b486b\r\n            .attr('opacity', 0.8)\r\n            .attr(\"stroke\", \"black\")\r\n            .attr(\"stroke-width\", 1);\r\n    }\r\n\r\n    drawWeatherCells(x,y,width,height) {\r\n        const imagePath = \"data/image/weathercell_small.png\";  // relative path to subfolder\r\n\r\n        this.svg.append(\"image\")\r\n            .attr(\"class\", \"weather\")\r\n            .attr(\"href\", imagePath)\r\n            .attr(\"x\", x)\r\n            .attr(\"y\", y)\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", height);\r\n    }\r\n\r\n    drawLineCrossings() {\r\n        this.svg.selectAll(\".crossing-point\").remove(); // Remove old points\r\n\r\n        this.svg.selectAll(\".crossing-point\")\r\n            .data(this.environment.crossings)\r\n            .enter()\r\n            .append(\"circle\")\r\n            .attr(\"class\", \"crossing-point\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 3)\r\n            //.attr(\"fill\", \"#FD3DB5\") // Magenta color  6b486b\r\n            .attr(\"fill\", \"#aa6caa\") // Magenta color  6b486b\r\n            .attr('opacity', 0.8)\r\n            .attr(\"stroke\", \"black\")\r\n            .attr(\"stroke-width\", 1);\r\n    }\r\n\r\n    drawDelaunayTriangulation() {\r\n        // Draw Delaunay lines\r\n        const delaunay = d3.Delaunay.from(this.environment.voronoiPoints);\r\n\r\n        const triangles = delaunay.triangles;\r\n        const halfedges = delaunay.halfedges;\r\n\r\n        const edges = new Set();\r\n        for (let i = 0; i < halfedges.length; i++) {\r\n            const j = halfedges[i];\r\n            if (j > i) {\r\n                edges.add([triangles[i], triangles[j]]);\r\n            }\r\n        }\r\n\r\n        // Convert Set to Array\r\n        const links = Array.from(edges);\r\n\r\n        // Draw Delaunay lines\r\n        this.svg.append(\"g\")\r\n            .selectAll(\"delaunay-line\")\r\n            .data(links)\r\n            .enter().append(\"line\")\r\n            .attr(\"class\", \"delaunay-line\")\r\n            .attr(\"x1\", d => this.environment.voronoiPoints[d[0]][0])\r\n            .attr(\"y1\", d => this.environment.voronoiPoints[d[0]][1])\r\n            .attr(\"x2\", d => this.environment.voronoiPoints[d[1]][0])\r\n            .attr(\"y2\", d => this.environment.voronoiPoints[d[1]][1])\r\n            .attr(\"stroke\", \"steelblue\");\r\n    }\r\n\r\n    drawIntersectionPoints() {\r\n        this.svg.selectAll(\".intersection\")\r\n            .data(this.environment.intersectionPoints)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"intersection\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", d => (d[2] < 25.0 || d[2] > 165.0) ? 5 : 3)\r\n            //.attr(\"fill\", \"rgba(0,200,200,1.0)\")  // #98abc5\r\n            .attr(\"fill\", d => (d[2] < 25.0 || d[2] > 165.0) ? \"red\" : \"#98abc5\")  // #98abc5\r\n            .attr(\"stroke\", \"black\");\r\n    }\r\n\r\n    drawProblematicSegments() {\r\n        this.svg.selectAll(\".conflict-line\")\r\n            .data(this.environment.problemSegments)\r\n            .enter().append(\"line\")\r\n            .attr(\"class\", \"conflict-line\")\r\n            .attr(\"x1\", d => d[0][0])\r\n            .attr(\"y1\", d => d[0][1])\r\n            .attr(\"x2\", d => d[1][0])\r\n            .attr(\"y2\", d => d[1][1])\r\n            .attr(\"stroke\", \"rgba(255,0,0,0.7)\")\r\n            .attr(\"stroke-width\", 2);\r\n    }\r\n\r\n    drawProblematicCrossings() {\r\n        this.svg.selectAll(\".conflict-crossing-point\").remove(); // Remove old points\r\n\r\n        this.svg.selectAll(\".conflict-crossing-point\")\r\n            .data(this.environment.problemLinePolygonCrossings)\r\n            .enter()\r\n            .append(\"circle\")\r\n            .attr(\"class\", \"conflict-crossing-point\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", envState.distance_threshold)\r\n            .attr(\"fill\", \"none\") // Magenta color  6b486b\r\n            .attr(\"stroke\", \"#e30945\")\r\n            .style(\"stroke-dasharray\", (\"3, 3\"))\r\n            .attr(\"stroke-width\", 1);\r\n    }\r\n\r\n    drawProblematicVertices() {\r\n        this.svg.selectAll(\".conflict-vertices\").remove(); // Remove old points\r\n\r\n        this.svg.selectAll(\".conflict-vertices\")\r\n            .data(this.environment.problemVertices)\r\n            .enter()\r\n            .append(\"circle\")\r\n            .attr(\"class\", \"conflict-vertices\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", envState.vertex_line_threshold)\r\n            .attr(\"fill\", \"none\") // Magenta color  6b486b\r\n            .attr(\"stroke\", \"#e38c09\")\r\n            .style(\"stroke-dasharray\", (\"3, 3\"))\r\n            .attr(\"stroke-width\", 1);\r\n    }\r\n\r\n    drawProblematicParticles(problem_particles) {\r\n        const problems = problem_particles.flatMap(row => row);\r\n\r\n        this.svg.selectAll(\".conflict-particle\")\r\n            .data(problems)\r\n            .enter().append(\"circle\")\r\n            .attr(\"class\", \"conflict-particle\")\r\n            .attr(\"cx\", d => d[0])\r\n            .attr(\"cy\", d => d[1])\r\n            .attr(\"r\", 5)\r\n            .attr(\"fill\", \"red\");\r\n    }\r\n\r\n    drawWindField() {\r\n\r\n        // prevent drawing the wind field when no data has been finished loading\r\n        // especially when loading from a file that uses asynchronous fetch()! (see environment class)\r\n        if(!this.environment.wind_loaded) return;\r\n\r\n        this.svg.select(\".wind-vector\").remove();\r\n\r\n        const lengthMultiplier = 10;\r\n\r\n        let defs = this.svg.select(\"defs\");\r\n        if (defs.empty()) {\r\n            defs = this.svg.append(\"defs\");\r\n        }\r\n\r\n        defs.selectAll(\"marker\").remove();\r\n\r\n        defs.append(\"marker\")\r\n            .attr(\"id\", \"arrow\")\r\n            .attr(\"viewBox\", \"0 -5 10 10\")\r\n            .attr(\"refX\", 8)\r\n            .attr(\"refY\", 0)\r\n            .attr(\"markerWidth\", 4)\r\n            .attr(\"markerHeight\", 4)\r\n            .attr(\"orient\", \"auto\")\r\n            .append(\"path\")\r\n            .attr(\"d\", \"M0,-5L10,0L0,5\")\r\n            .attr(\"fill\", \"inherit\");\r\n\r\n\r\n        // Color scale for speeds\r\n        const colorScale = d3.scaleLinear()\r\n            .domain([0.2, 1, 2, 3.5])\r\n            .range([\"green\", \"yellow\", \"orange\", \"red\"]);\r\n\r\n        // const colorScale = d3.scaleLinear()\r\n        //     .domain([0, 10])\r\n        //     .range([\"#dddddd\", \"#222222\"]);  // light gray to dark gray\r\n\r\n        // Draw arrows\r\n        this.svg.selectAll(\".wind-vector\")\r\n            .data(this.environment.wind_vectors)\r\n            .join(\"line\")\r\n            .attr(\"class\", \"wind-vector\")\r\n            .attr(\"x1\", d => d.x)\r\n            .attr(\"y1\", d => d.y)\r\n            .attr(\"x2\", d => d.x + (d.vx / d.speed) * lengthMultiplier * d.speed)\r\n            .attr(\"y2\", d => d.y + (d.vy / d.speed) * lengthMultiplier * d.speed)\r\n            .attr(\"stroke\", d => colorScale(d.speed))\r\n            .attr(\"stroke-width\", 1.0)\r\n            .attr(\"marker-end\", \"url(#arrow)\");\r\n    }\r\n\r\n    addPoint() {\r\n        if (envState.mouseXPos === -1 || envState.mouseYPos === -1)\r\n            return;\r\n\r\n        this.environment.voronoiPoints.push([envState.mouseXPos, envState.mouseYPos]);\r\n        this.environment.generateRandomSpeeds(this.environment.voronoiPoints.length);\r\n        this.hideContextMenu();\r\n        this.environment.update();\r\n        renderUtils.renderAll();\r\n    }\r\n\r\n    removePoint() {\r\n        this.environment.voronoiPoints = this.environment.voronoiPoints.filter(p => p !== this.selectedPoint);\r\n        this.environment.generateRandomSpeeds(this.environment.voronoiPoints.length);\r\n        this.environment.update();\r\n        renderUtils.renderAll();\r\n    }\r\n\r\n    clusterPoints() {\r\n        const clustering = kmeansStability(this.environment.crossings, this.environment.voronoiPoints.length);\r\n        // const clustering = kmeansStability(dataset, points.length, true, heatmapGrid);\r\n        this.environment.clusterStability = clustering.stability;\r\n        this.environment.targetPoints = clustering.centroids;\r\n        this.environment.generateRandomSpeeds(this.environment.voronoiPoints.length);\r\n        if(this.environment.targetPoints.length !== this.environment.voronoiPoints.length) {\r\n            this.environment.generateRandomPoints(this.environment.targetPoints.length);\r\n        }\r\n        this.environment.startTime = null;\r\n        requestAnimationFrame((timestamp) => this.transitionPoints(timestamp));\r\n    }\r\n\r\n    // function to smoothly transition Voronoi points\r\n    transitionPoints(timestamp) {\r\n        if (!this.environment.startTime) this.environment.startTime = timestamp;\r\n        const elapsed = timestamp - this.environment.startTime;\r\n        const t = Math.min(elapsed / envState.transitionDuration, 1); // Linear normalized time\r\n        const easedT = easeInOutCubic(t); // Apply easing\r\n\r\n        this.environment.voronoiPoints = this.environment.voronoiPoints.map((point, index) => {\r\n            let [x, y] = point;\r\n\r\n            x += (this.environment.targetPoints[index][0] - x) * easedT;\r\n            y += (this.environment.targetPoints[index][1] - y) * easedT;\r\n\r\n            return [x, y];  // Return updated point position\r\n        });\r\n\r\n        this.environment.update();\r\n        renderUtils.renderAll();\r\n\r\n        if (t < 1) {\r\n            requestAnimationFrame((timestamp) => this.transitionPoints(timestamp));\r\n        }\r\n    }\r\n\r\n    highlightVoronoi(index) {\r\n        this.svg.selectAll(\".polygon\")\r\n            .attr(\"fill\", (d, i) => {\r\n                if (i === index && i !== this.environment.selectedPolygonIdx)\r\n                    return \"rgba(255,165,0,0.6)\"; // orange for hover\r\n                if (i === this.environment.selectedPolygonIdx)\r\n                    return \"rgba(145,180,227,0.6)\"; // blue for selected\r\n                return \"rgba(225,225,225,0.7)\";\r\n            });\r\n    }\r\n\r\n    removeHighlightVoronoi(index) {\r\n        this.svg.selectAll(\".polygon\")\r\n            .attr(\"fill\", (d, i) => {\r\n                return i === this.environment.selectedPolygonIdx\r\n                    ? \"rgba(145,180,227,0.6)\"\r\n                    : \"rgba(225,225,225,0.7)\";\r\n            });\r\n    }\r\n\r\n    highlightPolygon(index) {\r\n        this.svg.selectAll(\".edit-polygon\")\r\n            .attr(\"fill\", (d, i) => {\r\n                if (i === index && i !== this.environment.selectedPolygonIdx)\r\n                    return \"rgba(255,165,0,0.6)\"; // orange for hover\r\n                if (i === this.environment.selectedPolygonIdx)\r\n                    return \"rgba(145,180,227,0.6)\"; // blue for selected\r\n                return \"rgba(225,225,225,0.7)\";\r\n            });\r\n    }\r\n\r\n    removeHighlightPolygon(index) {\r\n        this.svg.selectAll(\".edit-polygon\")\r\n            .attr(\"fill\", (d, i) => {\r\n                return i === this.environment.selectedPolygonIdx\r\n                    ? \"rgba(145,180,227,0.6)\"\r\n                    : \"rgba(225,225,225,0.7)\";\r\n            });\r\n    }\r\n\r\n    getContextMenuItems() {\r\n        return [\r\n            {\r\n                context: 'element',\r\n                tab: 'environment',\r\n                condition: true,\r\n                label: 'remove point',\r\n                action: () => this.removePoint()\r\n            },\r\n            {\r\n                context: 'global',\r\n                tab: 'environment',\r\n                condition: (envState.editMode === 'voronoi'),\r\n                label: 'add point',\r\n                action: () => this.addPoint()\r\n            },\r\n            {\r\n                context: 'global',\r\n                tab: 'environment',\r\n                condition: true,\r\n                label: `mode: ${envState.editMode}`,\r\n                action: () => this.switchEditMode()\r\n            },\r\n            {\r\n                context: 'global',\r\n                tab: 'heatmap',\r\n                condition: true,\r\n                label: 'save as PNG',\r\n                action: () => this.saveAsPNG()\r\n            },\r\n            {\r\n                context: 'element',\r\n                tab: 'graph',\r\n                condition: (envState.editMode === 'voronoi'),\r\n                label: 'remove point',\r\n                action: () => this.removePoint()\r\n            },\r\n            {\r\n                context: 'global',\r\n                tab: 'graph',\r\n                condition: (envState.editMode === 'voronoi'),\r\n                label: 'add point',\r\n                action: () => this.addPoint()\r\n            },\r\n            {\r\n                context: 'global',\r\n                tab: 'graph',\r\n                condition: (envState.editMode === 'voronoi'),\r\n                label: 'cluster',\r\n                action: () => this.clusterPoints()\r\n            }\r\n        ];\r\n    }\r\n\r\n    showContextMenu(context, x, y) {\r\n        const menu = this.contextMenu;\r\n\r\n        this.hideContextMenu();\r\n\r\n        menu.style(\"left\", `${x}px`)\r\n            .style(\"top\", `${y}px`)\r\n            .style(\"display\", \"block\");\r\n\r\n        menu.selectAll(\"li\").remove();\r\n\r\n        const items = this.getContextMenuItems();\r\n\r\n        menu.selectAll(\"li\")\r\n            .data(items.filter(item => (item.tab === envState.activeTab && item.context === context && item.condition)))\r\n            .enter()\r\n            .append(\"li\")\r\n            .text(d => d.label)\r\n            .on(\"click\", (event, d) => {\r\n                d.action();\r\n                this.hideContextMenu();\r\n            });\r\n    }\r\n\r\n    hideContextMenu() {\r\n        this.contextMenu.style(\"display\", \"none\");\r\n    }\r\n\r\n    switchEditMode() {\r\n        envState.editMode = envState.editMode === 'voronoi' ? 'polygon' : 'voronoi';\r\n        if (envState.editMode === 'voronoi') this.environment.update();\r\n        renderUtils.renderAll();\r\n    }\r\n\r\n    saveAsSVG() {\r\n        const serializer = new XMLSerializer();\r\n        const svgData = serializer.serializeToString(this.svgCanvas.node());\r\n        const blob = new Blob([svgData], {type: \"image/svg+xml;charset=utf-8\"});\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = \"voronoi_diagram.svg\";\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    }\r\n\r\n    async saveAsPNG() {\r\n        // first, restore zoom\r\n        const t = this.svg.transition();\r\n\r\n        t.call(this.zoom.transform,\r\n                d3.zoomIdentity.scale(1.0)\r\n        );\r\n\r\n        // await until the zoom has been completed before\r\n        // saving to PNG. Otherwise, the environment might not be fully captured\r\n        await t.end();\r\n\r\n        const svgData = new XMLSerializer().serializeToString(this.svg.node());\r\n        const scale = 1.0; // 1.0/cellSize; // each unit is a pixel\r\n\r\n        const viewBox = this.svgCanvas.attr(\"viewBox\").split(\" \").map(Number);\r\n        const vbWidth = viewBox[2];\r\n        const vbHeight = viewBox[3];\r\n\r\n        const canvas = document.createElement(\"canvas\");\r\n        canvas.width = vbWidth * scale;//svg.width.baseVal.value;\r\n        canvas.height = vbHeight * scale;//svg.height.baseVal.value;\r\n\r\n        // Use canvg to render the SVG string onto the canvas\r\n        const ctx = canvas.getContext(\"2d\");\r\n        const v = await canvg.Canvg.fromString(ctx, svgData);\r\n        ctx.scale(scale, scale); // scale canvas context\r\n        await v.render();\r\n\r\n        // Export canvas as PNG\r\n        const pngLink = document.createElement(\"a\");\r\n        pngLink.download = \"heatmap.png\";\r\n        pngLink.href = canvas.toDataURL(\"image/png\");\r\n        pngLink.click();\r\n    }\r\n\r\n    updateVisibility() {\r\n        d3.selectAll(\".crossing-point\").style(\"display\", envState.showCrossings ? \"block\" : \"none\");\r\n        d3.selectAll(\".conflict-crossing-point\").style(\"display\", envState.showCrossings ? \"block\" : \"none\");\r\n        d3.selectAll(\".intersection\").style(\"display\", envState.showIntersections ? \"block\" : \"none\");\r\n        d3.selectAll(\".conflict-vertices\").style(\"display\", envState.showIntersections ? \"block\" : \"none\");\r\n        d3.selectAll(\".voronoi-point\").style(\"display\", envState.showVoronoiPoints ? \"block\" : \"none\");\r\n        d3.selectAll(\".line\").style(\"display\", envState.showLines ? \"block\" : \"none\");\r\n        d3.selectAll(\".conflict-line\").style(\"display\", envState.showLines ? \"block\" : \"none\");\r\n        d3.selectAll(\".delaunay-line\").style(\"display\", envState.showDelaunay ? \"block\" : \"none\");\r\n        d3.selectAll(\".particle-circle\").style(\"display\", envState.showParticles ? \"block\" : \"none\");\r\n        d3.selectAll(\".polygon\").style(\"display\", envState.showPolygons ? \"block\" : \"none\");\r\n        d3.selectAll(\".voronoi-vertex\").style(\"display\", envState.showPolygons ? \"block\" : \"none\");\r\n        d3.selectAll(\".weather\").style(\"display\", envState.showWeather ? \"block\" : \"none\");\r\n        d3.selectAll(\".wind-vector\").style(\"display\", envState.showWindField ? \"block\" : \"none\");\r\n    }\r\n\r\n    render() {\r\n        // first, remove all contents from the D3 canvas\r\n        this.svg.selectAll(\"*\").remove();\r\n\r\n        // note: the order in which things are drawn determine what\r\n        // elements are drawn op top of each other\r\n        if (envState.activeTab === \"graph\")\r\n        {\r\n            this.drawEmptySVG(); // needed to support \"global\" contextmenu when right clicking\r\n            this.drawGraphLineCrossings();\r\n            this.drawDelaunayGraph();\r\n        }\r\n        else if (envState.activeTab === \"heatmap\")\r\n        {\r\n            this.drawHeatMap();\r\n        }\r\n        else if (envState.activeTab === \"environment\")\r\n        {\r\n            this.drawWeatherCells(400, 300, 200, 200);\r\n\r\n            this.drawLines();\r\n            this.drawLineCrossings();\r\n            this.drawParticles();\r\n\r\n            this.drawDelaunayTriangulation();\r\n\r\n            // update clipped voronoi\r\n            envState.editMode === 'voronoi' ? this.drawVoronoi() : this.drawEditablePolygons();\r\n\r\n            this.drawIntersectionPoints();\r\n            this.drawProblematicSegments();\r\n            this.drawProblematicCrossings();\r\n            this.drawProblematicVertices();\r\n            this.drawProblematicParticles(this.environment.calculateParticleSeparationProblems(this.environment.particlePositions));\r\n\r\n            if(envState.editMode === 'voronoi') this.drawClippingPolygon();\r\n\r\n            // draw the grid cells last (when active is CTRL key is pressed)\r\n            this.drawGridCell();\r\n            \r\n            this.drawWindField();\r\n\r\n        }\r\n\r\n        this.updateVisibility();\r\n    }\r\n\r\n} // close class","import * as d3 from 'd3';\r\nimport polygonClipping from 'polygon-clipping';\r\nimport {\r\n    calculateIntersections,\r\n    calculateLineCrossings, doLinesIntersect, getLineSegmentLength, getProblematicLineCrossings, getProblematicVertices,\r\n    getTrackLocationAtDistance,\r\n    getUnitDirectionVector,\r\n    isPointInsidePolygon, pointToLineDistance\r\n} from \"../utility/geometry\";\r\nimport { envState } from \"../settings\";\r\nimport {Perlin, Simplex} from \"../utility/noise\";\r\nimport {renderUtils} from \"../newmain\";\r\n\r\n// pathfinders\r\nconst { Astar } = require('../pathfinder/astar');\r\nconst { Thetastar } = require('../pathfinder/thetastar');\r\n\r\nexport class Environment {\r\n    constructor() {\r\n        this.voronoiPoints = [];\r\n        this.width = 800;\r\n        this.height = 600;\r\n        this.targetPoints = [];\r\n        this.polygons = [];\r\n        this.voronoiVertices = [];\r\n        this.lines = [];\r\n        this.dynamicLines = [];\r\n        this.crossings = [];\r\n        this.particles = [];\r\n        this.particlePositions = [];\r\n        this.numberOfParticles = 10;\r\n        this.numLinePolygonIntersections = [];\r\n        this.selectedPolygon = [];\r\n        this.selectedPolygonIdx = -1;\r\n        this.timeValue = 0;\r\n        this.timeOffset = 0;\r\n        this.voronoiSpeeds = [];\r\n        this.selectedPoint = null;\r\n        this.editPolygonIndices = [];\r\n        this.editPolygons = [];\r\n        this.editVertices = [];\r\n        this.clippingPolygon = [];\r\n        this.cellSize = 0;\r\n        this.gridCells = [];\r\n        this.selectedCells = new Set();\r\n        this.heatmapGrid = [];\r\n\r\n        this.clusterStability = NaN;\r\n        this.startTime = null;\r\n\r\n        this.problemLinePolygonCrossings = [];\r\n        this.intersectionPoints = [];\r\n        this.problemSegments = [];\r\n        this.problemVertices = [];\r\n\r\n        this.wind_type = 'natural';\r\n        this.wind_vectors = [];\r\n        this.wind_loaded = false;\r\n\r\n        //this.initRandom();\r\n    }\r\n\r\n    // init a random environment\r\n    initRandom() {\r\n\r\n        // init dimension of environment\r\n        this.setDimension(800,600);\r\n\r\n        // define a clipping polygon\r\n        this.clippingPolygon = [[\r\n            [25, 25], [425, 25], [775, 25], [775, 300],\r\n            [775, 575], [425, 575], [25, 575], [25, 300]\r\n        ]];\r\n\r\n        // setup the grid (for path-planning and heatmap)\r\n        this.initGrid(20);\r\n\r\n        // generate 10 random lines\r\n        this.generateRandomLines(10);\r\n\r\n        // generate 10 random Voronoi centers\r\n        this.generateRandomPoints(10);\r\n        this.generateRandomSpeeds(this.voronoiPoints.length);\r\n\r\n        // generate random Particles along random lines\r\n        this.generateRandomParticles(this.lines, 10);\r\n\r\n        // init pathfinder\r\n        this.pathFinding();\r\n\r\n        // update environment\r\n        this.update();\r\n    }\r\n\r\n    // generate a random environment\r\n    generateRandom(width, height, numVoronoiPoints, numLines, numLineParticles) {\r\n\r\n        // init dimension of environment\r\n        this.setDimension(width,height);\r\n\r\n        // define a clipping polygon\r\n        this.clippingPolygon = this.generateRandomConvexPolygon(8,width, height);\r\n\r\n        // setup the grid (for path-planning and heatmap)\r\n        this.initGrid(20);\r\n\r\n        // generate 10 random lines\r\n        this.generateRandomLines(numLines);\r\n\r\n        // generate 10 random Voronoi centers\r\n        this.generateRandomPoints(numVoronoiPoints);\r\n        this.generateRandomSpeeds(this.voronoiPoints.length);\r\n\r\n        // generate random Particles along random lines\r\n        this.generateRandomParticles(this.lines, numLineParticles);\r\n\r\n        // init pathfinder\r\n        this.pathFinding();\r\n\r\n        // update environment\r\n        this.update();\r\n    }\r\n\r\n    setDimension(width, height) {\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    initGrid(cellSize) {\r\n        this.cellSize = cellSize;\r\n        this.gridCells = [];\r\n        let cellIndex = 0;\r\n        for (let x = 0; x < this.width; x += cellSize) {\r\n            for (let y = 0; y < this.height; y += cellSize) {\r\n                this.gridCells.push({ x, y, index: cellIndex++ });\r\n            }\r\n        }\r\n    }\r\n\r\n    generateRandomConvexPolygon(numPoints, width, height) {\r\n        const xs = [], ys = [];\r\n        for (let i = 0; i < numPoints; i++) {\r\n            xs.push(Math.random() * width);\r\n            ys.push(Math.random() * height);\r\n        }\r\n\r\n        xs.sort((a, b) => a - b);\r\n        ys.sort((a, b) => a - b);\r\n\r\n        const xVec = [], yVec = [];\r\n        let minX = xs[0], maxX = xs[xs.length - 1];\r\n        let minY = ys[0], maxY = ys[ys.length - 1];\r\n\r\n        let lastTop = minX, lastBottom = minX;\r\n        for (let i = 1; i < numPoints - 1; i++) {\r\n            let x = xs[i];\r\n            if (Math.random() < 0.5) {\r\n                xVec.push(x - lastTop);\r\n                lastTop = x;\r\n            } else {\r\n                xVec.push(lastBottom - x);\r\n                lastBottom = x;\r\n            }\r\n        }\r\n        xVec.push(maxX - lastTop);\r\n        xVec.push(lastBottom - maxX);\r\n\r\n        let lastLeft = minY, lastRight = minY;\r\n        for (let i = 1; i < numPoints - 1; i++) {\r\n            let y = ys[i];\r\n            if (Math.random() < 0.5) {\r\n                yVec.push(y - lastLeft);\r\n                lastLeft = y;\r\n            } else {\r\n                yVec.push(lastRight - y);\r\n                lastRight = y;\r\n            }\r\n        }\r\n        yVec.push(maxY - lastLeft);\r\n        yVec.push(lastRight - maxY);\r\n\r\n        const vectors = [];\r\n        for (let i = 0; i < numPoints; i++) {\r\n            vectors.push({ x: xVec[i], y: yVec[i] });\r\n        }\r\n\r\n        vectors.sort((a, b) => Math.atan2(a.y, a.x) - Math.atan2(b.y, b.x));\r\n\r\n        let x = 0, y = 0;\r\n        let points = [];\r\n        for (const v of vectors) {\r\n            x += v.x;\r\n            y += v.y;\r\n            points.push([x, y]);\r\n        }\r\n\r\n        // Get bounding box of the generated polygon\r\n        let minPX = Math.min(...points.map(p => p[0]));\r\n        let maxPX = Math.max(...points.map(p => p[0]));\r\n        let minPY = Math.min(...points.map(p => p[1]));\r\n        let maxPY = Math.max(...points.map(p => p[1]));\r\n\r\n        let scaleX = width / (maxPX - minPX);\r\n        let scaleY = height / (maxPY - minPY);\r\n        let scale = Math.min(scaleX, scaleY) * 0.95; // 95% to leave slight margin\r\n\r\n        // Scale and center the polygon\r\n        const finalPoints = points.map(([px, py]) => [\r\n            (px - minPX) * scale,\r\n            (py - minPY) * scale\r\n        ]).map(([sx, sy]) => [\r\n            sx + (width - (maxPX - minPX) * scale) / 2,\r\n            sy + (height - (maxPY - minPY) * scale) / 2\r\n        ]);\r\n\r\n        return [finalPoints];\r\n    }\r\n\r\n    generateRandomLines(numLines) {\r\n        const lines = [];\r\n        const half = Math.floor(numLines / 2);\r\n        let alternate = false;\r\n\r\n        for (let i = 0; i < half; i++) {\r\n            const x1 = 0.0; //Math.random() * width;\r\n            const y1 = Math.floor(Math.random() * this.height);\r\n            const x2 = this.width; //Math.random() * width;\r\n            const y2 = Math.floor(Math.random() * this.height);\r\n            if(alternate)\r\n                lines.push([[x2, y2], [x1, y1]]);\r\n            else\r\n                lines.push([[x1, y1], [x2, y2]]);\r\n            alternate = !alternate;\r\n        }\r\n\r\n        alternate = false;\r\n\r\n        for (let i = 0; i < half; i++) {\r\n            const x1 = Math.floor(Math.random() * this.width);\r\n            const y1 = 0.0; //Math.random() * height;\r\n            const x2 = Math.floor(Math.random() * this.width);\r\n            const y2 = this.height; //Math.random() * height;\r\n            if(alternate)\r\n                lines.push([[x2, y2], [x1, y1]]);\r\n            else\r\n                lines.push([[x1, y1], [x2, y2]]);\r\n            alternate = !alternate;\r\n        }\r\n        this.lines = lines;\r\n    }\r\n\r\n    jitterLines(distance) {\r\n        const newlines = [];\r\n        this.lines.forEach(line => {\r\n            //const [lineStart, lineEnd] = line;\r\n            const lineStart = line[0];\r\n            const lineEnd = line[line.length - 1];\r\n            let random_sign = -1 + Math.round(Math.random()) * 2;\r\n            let x1 = lineStart[0];\r\n            let y1 = lineStart[1];\r\n\r\n            if(x1 === 0) {\r\n                x1 = 0;\r\n                y1 += ( random_sign * Math.floor(Math.random() * distance ));\r\n            } else if(x1 === this.width) {\r\n                x1 = this.width;\r\n                y1 += ( random_sign * Math.floor(Math.random() * distance ));\r\n            } else {\r\n                x1 += ( random_sign * Math.floor(Math.random() * distance ));\r\n            }\r\n\r\n            random_sign = -1 + Math.round(Math.random()) * 2;\r\n            let x2 = lineEnd[0];\r\n            let y2 = lineEnd[1];\r\n\r\n            if(x2 === 0) {\r\n                x2 = 0;\r\n                y2 += ( random_sign * Math.floor(Math.random() * distance ));\r\n            } else if(x2 === this.width) {\r\n                x2 = this.width;\r\n                y2 += ( random_sign * Math.floor(Math.random() * distance ));\r\n            } else {\r\n                x2 += ( random_sign * Math.floor(Math.random() * distance ));\r\n            }\r\n\r\n            newlines.push([[x1, y1], [x2, y2]]);\r\n        });\r\n        this.lines = newlines;\r\n    }\r\n\r\n    generateRandomPoints(num) {\r\n        this.voronoiPoints = Array.from({ length: num }, () => [\r\n            Math.random() * this.width,\r\n            Math.random() * this.height\r\n        ]);\r\n    }\r\n\r\n    generateRandomSpeeds(num) {\r\n        this.voronoiSpeeds = Array.from({ length: num }, () => [\r\n            (Math.random() * 4) - 2,\r\n            (Math.random() * 4) - 2\r\n        ]);\r\n    }\r\n\r\n    generateRandomParticles(lines, numParticles) {\r\n        const particles = [];\r\n\r\n        for(let i=0; i<lines.length; i++) {\r\n\r\n            let start = lines[i][0]; // first point is origin\r\n            let end = lines[i][lines[i].length - 1]; // last point is target\r\n\r\n            // each line has a fixed particle speed to reduce number of in-trail conflicts\r\n            const particle_speed = 7.5 + Math.random(); // speed approximate: 450 kts = 7.5 nm / min (slider bar is in \"minutes\")\r\n\r\n            // create a list of random particle start times while ensuring a minimum time separation\r\n            // between particles to further avoid in-trail conflicts and overlapping particles\r\n            let startTimes = this.generateRandomStartTimes(0,120,2,numParticles);\r\n            let randomTime = [];\r\n\r\n            for (let j = 0; j < numParticles; j++) {\r\n\r\n                if (startTimes.length > 0) {\r\n                    const randomIndex = Math.floor(Math.random() * startTimes.length);\r\n                    randomTime = startTimes[randomIndex];\r\n                    startTimes.splice(randomIndex, 1);\r\n                }\r\n                else {\r\n                    randomTime = 122;\r\n                }\r\n\r\n                // create the particle\r\n                const particle = {\r\n                    track: lines[i],\r\n                    pos: start,\r\n                    direction: getUnitDirectionVector(start,end),\r\n                    speed: particle_speed,\r\n                    time: randomTime,\r\n                    offset: 0\r\n                }\r\n                particles.push(particle);\r\n            }\r\n        }\r\n        this.particles = particles;\r\n    }\r\n\r\n    generateRandomStartTimes(min, max, minTimeSeparation, count) {\r\n        const coordinates = [];\r\n\r\n        let attempts = 0;\r\n        const maxAttempts = 1000;\r\n\r\n        while (coordinates.length < count && attempts < maxAttempts) {\r\n            const candidate = Math.round(Math.random() * (max - min + 1)) + min;\r\n\r\n            // Check if it's far enough from all existing coordinates\r\n            const isValid = coordinates.every(coord => Math.abs(coord - candidate) >= minTimeSeparation);\r\n\r\n            if (isValid) {\r\n                coordinates.push(candidate);\r\n            }\r\n\r\n            attempts++;\r\n        }\r\n\r\n        if (coordinates.length < count) {\r\n            console.warn(`Only generated ${coordinates.length} coordinates out of requested ${count}. Try adjusting range or minDistance.`);\r\n        }\r\n\r\n        return coordinates;\r\n    }\r\n\r\n    offsetParticles(offset) {\r\n        this.particles.forEach(particle => {\r\n            particle.offset = -parseInt(offset);\r\n        });\r\n    }\r\n\r\n    pathFinding() {\r\n        const mesh = {\r\n            width: this.width,\r\n            height: this.height,\r\n            size: this.cellSize,\r\n            blockedIndices: [...this.selectedCells]\r\n        };\r\n\r\n        let planner = undefined;\r\n\r\n        if(envState.pathFinder === \"Dijkstra\")\r\n            planner = new Astar(mesh);\r\n        else if(envState.pathFinder === \"Astar\")\r\n            planner = new Astar(mesh, 'euclidean');\r\n        else if(envState.pathFinder === \"Thetastar\")\r\n            planner = new Thetastar(mesh);\r\n\r\n        this.lines = this.findPaths(this.lines, planner);\r\n    }\r\n\r\n    findPaths(lines, planner) {\r\n        let newLines = [];\r\n        lines.forEach((line) => {\r\n            const path = planner.search(line[0], line[line.length - 1]);\r\n            if(path.length)\r\n                newLines.push(path);\r\n        });\r\n       return newLines;\r\n    }\r\n\r\n    computeVoronoi() {\r\n        if(this.voronoiPoints.length === 0 || this.clippingPolygon.length === 0) return;\r\n\r\n        const delaunay = d3.Delaunay.from(this.voronoiPoints);\r\n        const voronoi = delaunay.voronoi([0, 0, this.width, this.height]);\r\n\r\n        let poly = this.voronoiPoints.map((_, i) => voronoi.cellPolygon(i)).filter(p => p);\r\n\r\n        // Convert Voronoi polygons into clipped polygons\r\n        let clippedPolygons = poly.map(p => polygonClipping.intersection([p], this.clippingPolygon)).flat(2).filter(p => p.length > 0);\r\n\r\n        // Collect unique Voronoi vertices\r\n        this.voronoiVertices = new Set();\r\n        clippedPolygons.forEach(poly => poly.forEach(([x, y]) => this.voronoiVertices.add(`${x},${y}`)));\r\n\r\n        this.polygons = clippedPolygons;\r\n\r\n        // Extract unique Voronoi vertices\r\n        const vertexSet = new Set();\r\n        this.polygons.forEach(polygon => {\r\n            polygon.forEach(([x, y]) => {\r\n                vertexSet.add(`${x},${y}`); // Store as string to ensure uniqueness\r\n            });\r\n        });\r\n\r\n        this.voronoiVertices = [...vertexSet].map(v => v.split(\",\").map(Number)); // Convert back to [x, y]\r\n\r\n        // prepare for when switching from Voronoi polygons to normal polygons\r\n        this.editPolygons = [];\r\n        this.editVertices = [];\r\n        this.editPolygonIndices = [];\r\n\r\n        for (let i = 0; i < this.polygons.length; i++) {\r\n            const indices = this.polygons[i].map(pt => this.getEditVertexIndex(pt,this.editVertices));\r\n            this.editPolygonIndices.push(indices);\r\n        }\r\n    }\r\n\r\n    getEditVertexIndex(v, vertices, tolerance = 0.1) {\r\n        for (let i = 0; i < vertices.length; i++) {\r\n            const [x, y] = vertices[i];\r\n            if (Math.abs(x - v[0]) < tolerance && Math.abs(y - v[1]) < tolerance) {\r\n                return i;\r\n            }\r\n        }\r\n        vertices.push(v);\r\n        return vertices.length - 1;\r\n    }\r\n\r\n    updateEditPolygons() {\r\n        this.editPolygons = this.editPolygonIndices.map(polygonIndices =>\r\n            polygonIndices.map(index => {\r\n                const vertex = this.editVertices[index];\r\n                if (!vertex || vertex.length < 2) {\r\n                    throw new Error(`Invalid vertex index: ${index}`);\r\n                }\r\n                return [vertex[0], vertex[1]];\r\n            })\r\n        );\r\n    }\r\n\r\n    getNearestCell(x,y) {\r\n        const gridX = Math.floor(x / this.cellSize) * this.cellSize;\r\n        const gridY = Math.floor(y / this.cellSize) * this.cellSize;\r\n        return this.gridCells.find(c => c.x === gridX && c.y === gridY);\r\n    }\r\n\r\n    updateHeatMap() {\r\n        this.heatmapGrid = new Array(this.gridCells.length).fill(0);\r\n\r\n        for (let i= 0; i < 240; i++) {\r\n            const positions = this.updateParticles(i, false);\r\n\r\n            positions.forEach(pt => {\r\n                let cell = [];\r\n                cell = this.getNearestCell(pt[0],pt[1]);\r\n                if(cell && isPointInsidePolygon(pt,this.clippingPolygon[0])) {\r\n                    this.heatmapGrid[cell.index]++;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    updateParticles(time, includeOffset = true) {\r\n        const part_pos = [];\r\n        this.particles.forEach(particle => {\r\n            if( time >= (particle.time + (includeOffset ? particle.offset : 0)) ) {\r\n                const dt = time - (particle.time + (includeOffset ? particle.offset : 0));\r\n                const travelDist = particle.speed * dt;\r\n                const [x, y] = getTrackLocationAtDistance(particle.track, travelDist);\r\n                part_pos.push([x, y]);\r\n            }\r\n        });\r\n        return part_pos;\r\n    }\r\n\r\n    calculateParticleSeparationProblems(positions) {\r\n        let problemPositions = [];\r\n        for (let i = 0; i < positions.length; i++) {\r\n            for (let j = i + 1; j < positions.length; j++) {\r\n                const p1 = positions[i];\r\n                const p2 = positions[j];\r\n                if (getLineSegmentLength(p1, p2) < 5.0) {\r\n                    problemPositions.push([p1, p2]);\r\n                }\r\n            }\r\n        }\r\n        return problemPositions;\r\n    }\r\n\r\n    getTimeLineData() {\r\n        if(this.selectedPolygonIdx === -1 || !this.selectedPolygon) return;\r\n\r\n        //console.log(\"time line data generation\");\r\n\r\n        // get the up-to-date polygon vertices (which can change, for example, when dragging Voronoi points)\r\n        this.selectedPolygon = (envState.editMode === 'voronoi' ? this.polygons[this.selectedPolygonIdx] : this.editPolygons[this.selectedPolygonIdx]);\r\n\r\n        let timeLine = [];\r\n        for (let i= 0; i < 240; i++) {\r\n            const data = {\r\n                time: i,\r\n                nLIntersections: this.countLineIntersections(this.selectedPolygon),\r\n                nLCrossingPoints: this.crossings.filter(pt => isPointInsidePolygon(pt, this.selectedPolygon)).length,\r\n                nParticles: this.updateParticles(i, false).filter(pt => isPointInsidePolygon(pt, this.selectedPolygon)).length,\r\n                nConflicts: this.countParticleSeparationProblems(this.updateParticles(i, false), this.selectedPolygon),\r\n            };\r\n            timeLine.push(data);\r\n        }\r\n        return timeLine;\r\n    }\r\n\r\n    countLineIntersections(polygon) {\r\n        let intersectionCount = 0;\r\n\r\n        // Get the polygon's edges (pairs of consecutive vertices)\r\n        const polygonEdges = polygon.map((vertex, index) => {\r\n            const nextVertex = polygon[(index + 1) % polygon.length];\r\n            return [vertex, nextVertex];\r\n        });\r\n\r\n        // Check each polyline (+ segments) against all edges of the polygon\r\n        this.lines.forEach(polyline => {\r\n            polygonEdges.forEach(edge => {\r\n                if (doLinesIntersect(polyline, edge)) {\r\n                    intersectionCount++;\r\n                }\r\n            });\r\n        });\r\n\r\n        return intersectionCount;\r\n    }\r\n\r\n    countParticleSeparationProblems(positions, polygon) {\r\n        let conflicts = 0;\r\n        const problems = this.calculateParticleSeparationProblems(positions);\r\n        problems.forEach(problem => {\r\n            if(isPointInsidePolygon(problem[0],polygon) && isPointInsidePolygon(problem[1],polygon)) {\r\n                conflicts++;\r\n            }\r\n        });\r\n\r\n        return conflicts;\r\n    }\r\n\r\n    generateWindSwirlData() {\r\n        const data = [];\r\n        const rows = 20, cols = 30;\r\n        const cx = this.width / 2, cy = this.height / 2;\r\n        for (let x = 0; x <= cols; x++) {\r\n            for (let y = 0; y <= rows; y++) {\r\n                const px = (x / cols) * this.width;\r\n                const py = (y / rows) * this.height;\r\n                const dx = px - cx;\r\n                const dy = py - cy;\r\n                const dist = Math.sqrt(dx * dx + dy * dy);\r\n                const angle = Math.atan2(dy, dx) + Math.PI / 2;\r\n                const speed = 1.5 * Math.exp(-dist * dist / 20000);\r\n                data.push({ x: px, y: py, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, speed: speed });\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n   generateWindWavyData() {\r\n        const data = [];\r\n        const rows = 20, cols = 30;\r\n        for (let x = 0; x <= cols; x++) {\r\n            for (let y = 0; y <= rows; y++) {\r\n                const px = (x / cols) * this.width;\r\n                const py = (y / rows) * this.height;\r\n                const angle = Math.sin(px / 80) * Math.PI + Math.cos(py / 100) * Math.PI / 2;\r\n                const speed = 1 + Math.sin(py / 50);\r\n                data.push({ x: px, y: py, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed , speed: speed});\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    generateWindNaturalData(vortexStrength = 0.3) {\r\n        const data = [];\r\n        const rows = 30, cols = 30;\r\n\r\n        // Base directional flow (30 degrees NE)\r\n        const baseFlowAngle = Math.PI / 6;\r\n        const baseSpeed = 1.5;\r\n\r\n        // Vortex centers\r\n        const vortices = [\r\n            { x: this.width * 0.3, y: this.height * 0.3, direction: -1 },\r\n            { x: this.width * 0.7, y: this.height * 0.6, direction: 1 }\r\n        ];\r\n\r\n        for (let xi = 0; xi <= cols; xi++) {\r\n            for (let yi = 0; yi <= rows; yi++) {\r\n                const px = (xi / cols) * this.width;\r\n                const py = (yi / rows) * this.height;\r\n\r\n                // Base flow vector\r\n                let vx = Math.cos(baseFlowAngle) * baseSpeed;\r\n                let vy = Math.sin(baseFlowAngle) * baseSpeed;\r\n\r\n                // Add vortices with magnitude scaled by vortexStrength\r\n                vortices.forEach(v => {\r\n                    const dx = (px - v.x) * v.direction;\r\n                    const dy = (py - v.y) * v.direction;\r\n                    const distSq = dx * dx + dy * dy + 1e-5;\r\n                    const dist = Math.sqrt(distSq);\r\n                    const angle = Math.atan2(dy, dx) + Math.PI / 2;\r\n                    const strength = vortexStrength * Math.exp(-distSq / 15000);\r\n                    vx += Math.cos(angle) * strength;\r\n                    vy += Math.sin(angle) * strength;\r\n                });\r\n\r\n                const speed = Math.sqrt(vx*vx + vy*vy);\r\n                data.push({ x: px, y: py, vx: vx, vy: vy, speed: speed });\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    generateWindUniformField(speed = 0.8, angle = 0) {\r\n        const data = [];\r\n        const rows = 20, cols = 30;\r\n        const vx = Math.cos(angle) * speed;\r\n        const vy = Math.sin(angle) * speed;\r\n        for (let x = 0; x <= cols; x++) {\r\n            for (let y = 0; y <= rows; y++) {\r\n                const px = (x / cols) * this.width;\r\n                const py = (y / rows) * this.height;\r\n                data.push({ x: px, y: py, vx: vx, vy: vy, speed: speed });\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n   getWindStats(polygon) {\r\n        const points = this.wind_vectors.filter(p =>\r\n           isPointInsidePolygon([p.x, p.y], polygon)\r\n       );\r\n\r\n        if(points.length === 0) {\r\n            return null; // no data in area\r\n        }\r\n\r\n        // Average vx, vy\r\n        let sumVx = 0, sumVy = 0, sumSpeed = 0;\r\n        const speeds = [];\r\n        const directions = []; // in radians\r\n\r\n        points.forEach(p => {\r\n            sumVx += p.vx;\r\n            sumVy += p.vy;\r\n            sumSpeed += p.speed;\r\n            speeds.push(p.speed);\r\n\r\n            // direction from vx, vy\r\n            const angle = Math.atan2(p.vy, p.vx);\r\n            directions.push(angle);\r\n        });\r\n\r\n        const n = points.length;\r\n        const avgVx = sumVx / n;\r\n        const avgVy = sumVy / n;\r\n        const avgSpeed = sumSpeed / n;\r\n\r\n        // Average direction vector to angle\r\n        const avgDirectionRad = Math.atan2(avgVy, avgVx);\r\n\r\n        // Circular mean of directions (alternative, but vector average is good)\r\n        // Here we use vector average for avg direction, which is standard\r\n\r\n        // Calculate std deviation of speed\r\n        const meanSpeed = avgSpeed;\r\n        const varianceSpeed = speeds.reduce((acc, v) => acc + (v - meanSpeed)**2, 0) / n;\r\n        const stdSpeed = Math.sqrt(varianceSpeed);\r\n\r\n        // Calculate circular std deviation of direction\r\n        // Convert angles to unit vectors and find mean resultant length R\r\n        let sumSin = 0, sumCos = 0;\r\n        directions.forEach(a => {\r\n            sumSin += Math.sin(a);\r\n            sumCos += Math.cos(a);\r\n        });\r\n        const meanSin = sumSin / n;\r\n        const meanCos = sumCos / n;\r\n        const R = Math.sqrt(meanSin*meanSin + meanCos*meanCos);\r\n\r\n        // Circular std dev formula: sqrt(-2 * ln(R))\r\n        // Convert to degrees\r\n        const stdDirectionRad = Math.sqrt(-2 * Math.log(R));\r\n        const stdDirectionDeg = stdDirectionRad * 180 / Math.PI;\r\n\r\n        return {\r\n            avgSpeed,\r\n            avgDirectionDeg: (avgDirectionRad * 180 / Math.PI + 360) % 360, // 0-360 degrees\r\n            stdSpeed,\r\n            stdDirectionDeg\r\n        };\r\n    }\r\n\r\n    update_wind() {\r\n\r\n        if(this.wind_loaded && this.wind_vectors.length !== 0) return;\r\n\r\n        this.wind_vectors = [];\r\n        this.wind_loaded = false;\r\n\r\n        this.wind_type = envState.wind;\r\n\r\n        if (this.wind_type === \"swirl\") {this.wind_vectors = this.generateWindSwirlData(); this.wind_loaded = true;}\r\n        else if (this.wind_type === \"wavy\") {this.wind_vectors = this.generateWindWavyData(); this.wind_loaded = true;}\r\n        else if (this.wind_type === \"natural\") {this.wind_vectors = this.generateWindNaturalData(2.0); this.wind_loaded = true;}\r\n        else if (this.wind_type === \"uniform\") {this.wind_vectors = this.generateWindUniformField(2, Math.PI / 4); this.wind_loaded = true;}\r\n        else if (this.wind_type === \"perlin\") {\r\n            const rows = 25, cols = 40;\r\n            for (let x = 0; x <= cols; x++) {\r\n                for (let y = 0; y <= rows; y++) {\r\n                    const px = (x / cols) * this.width;\r\n                    const py = (y / rows) * this.height;\r\n                    // Use Perlin noise to generate angle & magnitude\r\n                    const angle = Perlin.noise(px * 0.01, py * 0.01) * Math.PI * 2;\r\n                    const speed = 2 + Perlin.noise(px * 0.02 + 100, py * 0.02 + 100) * 2;\r\n                    const vx = Math.cos(angle) * speed;\r\n                    const vy = Math.sin(angle) * speed;\r\n                    this.wind_vectors.push({ x: px, y: py, vx: vx, vy: vy, speed: speed });\r\n                    this.wind_loaded = true;\r\n                }\r\n            }\r\n        } else if (this.wind_type === \"simplex\") {\r\n            const rows = 25, cols = 40;\r\n            for (let x = 0; x <= cols; x++) {\r\n                for (let y = 0; y <= rows; y++) {\r\n                    const px = (x / cols) * this.width;\r\n                    const py = (y / rows) * this.height;\r\n                    const angle = Simplex.noise(px * 0.01, py * 0.01) * Math.PI * 2;\r\n                    const speed = 2 + Simplex.noise(px * 0.02 + 100, py * 0.02 + 100) * 2;\r\n                    const vx = Math.cos(angle) * speed;\r\n                    const vy = Math.sin(angle) * speed;\r\n                    this.wind_vectors.push({x: px, y: py, vx: vx, vy: vy, speed: speed});\r\n                    this.wind_loaded = true;\r\n                }\r\n            }\r\n        } else {\r\n            // load from a file\r\n            this.loadWindFieldFromFile(this.wind_type);\r\n        }\r\n    }\r\n\r\n    loadWindFieldFromFile(url) {\r\n        fetch(url)\r\n            .then(response => {\r\n                if (!response.ok) throw new Error(`HTTP error ${response.status}`);\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                // only set the wind \"loaded\" boolean and force a redraw\r\n                // AFTER the wind_vectors are fully loaded and filled with \"data\"\r\n                this.wind_vectors = data;\r\n                this.wind_loaded = true;\r\n                renderUtils.renderAll();\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Failed to load wind field:\", err);\r\n                alert(\"Could not load wind field.\");\r\n            });\r\n    }\r\n\r\n    saveAsJSON() {\r\n        const data = {\r\n            dimension: {width: this.width, height: this.height},\r\n            mode: envState.editMode,\r\n            numVoronoiPoints: this.voronoiPoints.length,\r\n            numLines: this.lines.length,\r\n            numLineParticles: this.numberOfParticles,\r\n            numParticles: this.particles.length,\r\n            pathFinder: envState.pathFinder,\r\n            gridSize: this.cellSize,\r\n            voronoiPoints: this.voronoiPoints,\r\n            voronoiPolygons: this.polygons,\r\n            voronoiVertices: this.voronoiVertices,\r\n            editPolygons: this.editPolygons,\r\n            polygonVertices: this.editVertices,\r\n            polygonIndices: this.editPolygonIndices,\r\n            clippingPolygon: this.clippingPolygon,\r\n            lineCrossings: this.crossings,\r\n            lines: this.lines,\r\n            particles: this.particles,\r\n            blockedCells: [...this.selectedCells]\r\n        };\r\n\r\n        const jsonBlob = new Blob([JSON.stringify(data, null, 2)], {type: \"application/json\"});\r\n        const url = URL.createObjectURL(jsonBlob);\r\n\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        const filename = \"V\" + this.voronoiPoints.length + \"L\" + this.lines.length + \"P\" + this.numberOfParticles + \"_\" + new Date().toISOString() + \".json\";\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n    }\r\n    \r\n    update() {\r\n        if (envState.editMode === 'voronoi') this.computeVoronoi();\r\n        this.updateEditPolygons();\r\n        this.updateHeatMap();\r\n\r\n        this.crossings = calculateLineCrossings(this.lines);\r\n\r\n        // retrieve constraint violations\r\n        this.problemLinePolygonCrossings = getProblematicLineCrossings((envState.editMode === 'voronoi' ? this.polygons : this.editPolygons), this.crossings, envState.distance_threshold);\r\n        [this.intersectionPoints, this.problemSegments] = calculateIntersections(this.lines, (envState.editMode === 'voronoi' ? this.polygons : this.editPolygons), envState.length_threshold);\r\n        this.problemVertices = getProblematicVertices((envState.editMode === 'voronoi' ? this.voronoiVertices : this.editVertices) , this.intersectionPoints, envState.vertex_line_threshold);\r\n        this.numLinePolygonIntersections = this.intersectionPoints.length;\r\n\r\n        this.update_wind();\r\n\r\n    }\r\n\r\n    reset() {\r\n        this.wind_vectors = [];\r\n        this.wind_loaded = false;\r\n    }\r\n\r\n}","import {Environment} from \"./environment/environment\";\r\nimport {Interface} from \"./display/interface\";\r\nimport { HighlightUtils } from './utility/HighlightUtils.js';\r\nimport { RenderUtils } from './utility/RenderUtils.js';\r\nimport { envState, loadEnvSettings } from './settings';\r\nimport * as d3 from \"d3\";\r\nimport {OzAssistant} from \"./assistant/OzAssistant\";\r\n\r\n\r\n// load default initial app state/settings\r\nawait loadEnvSettings('./data/settings/default.json');\r\n\r\n// create environment\r\nconst environment = new Environment();\r\n\r\n// init a quasi random environment (fixed clipping polygon)\r\nenvironment.initRandom();\r\n\r\n// generate a random environment (incl. random clipping polygon)\r\n//environment.generateRandom(800,600,10,10,10);\r\n\r\n\r\n// create a (global singleton) container for highlighting\r\n// IMPORTANT: always do this before the D3 drawing objects are instantiated!!\r\nexport const highlightUtils = new HighlightUtils();\r\n\r\n// create a (global singleton) container for triggering render() across (all) display objects\r\nexport const renderUtils = new RenderUtils();\r\n\r\n// create interfaces (that also setup the highlighting and rendering referencing)\r\nconst display = new Interface(environment);\r\n\r\n// init the display elements (incl. HTML buttons, slider, etc.)\r\n//display.init();\r\n\r\n// misc: when loading different EnvSettings from a JSON file, init visibility conditions,\r\n// update the environment and redraw everything\r\n//display.initVisibility();\r\n//display.initValueSettings();\r\n//environment.update();\r\n//display.render();\r\n\r\n// possibly load an environment from JSON file (which overrides the default environment)\r\n// for example, when loading a new scenario file for a new experiment trial\r\n//display.loadFromJSON('./data/scenarios.json');\r\n\r\n// TODO: create WebSocket bi-directional communication class\r\n\r\n\r\n// TODO: create Logger class for recording (and replaying!?) mouse interactions, (key) clicks, metrics, etc.\r\n\r\n\r\n\r\n// TODO: create ExperimentManager class that implements logic to load and switch scenarios from \"playlist\" JSON files\r\n\r\n\r\n\r\n// TODO: create a Timer class as a global singleton\r\n\r\n\r\n\r\n// Create a scripted AI system for prototyping AI support in sectorization,\r\n// let's call it OzAssistent as in \"wizard of Oz\" ;)\r\n\r\nconst assistant = new OzAssistant(() => envState.assistantTab === 'ai-container');\r\nawait assistant.load(\"./data/oz/defaultOz.json\");\r\nassistant.start();\r\n\r\nlet time = envState.initTime;\r\n\r\n// init the timer\r\nfunction updateTimer() {\r\n\r\n    //time = envState.initTime;\r\n\r\n    const hrs = Math.floor((time) / 3600);\r\n    const mins = Math.floor((time) % 3600 / 60);\r\n    const secs = (time) % 60;\r\n\r\n    document.getElementById(\"timer\").textContent =\r\n        String(hrs).padStart(2, '0') + \":\" +\r\n        String(mins).padStart(2, '0') + \":\" +\r\n        String(secs).padStart(2, '0');\r\n\r\n    time++;\r\n}\r\n\r\n// update the timer every 1 sec (1000 ms)\r\nsetInterval(updateTimer, 1000);\r\n\r\n// As a test, auto-trigger a fake \"AI\" warning after 5 seconds\r\n// this should eventually be done by the \"OzAssistent\"\r\n// setTimeout(() => {\r\n//     envState.warningTab = ['ai-container'];\r\n//     window.alert(\"Please review AI solution\");\r\n//     //window.confirm(\"Accept AI solution?\");\r\n//     window.GlobalEventBus.dispatchEvent(new CustomEvent('sync-tab-state', {\r\n//         detail: envState\r\n//     }));\r\n// }, 5000);\r\n\r\n","const { BinaryHeap } = require(\"./binaryHeap\");\r\n\r\n// Mesh: {width: width, height: height, size: size, blockedIndices: blockedIndices}\r\nclass Astar {\r\n    constructor(mesh, heuristic) {\r\n        this.size = mesh.size;                            // Cell size\r\n        this.heuristicName = heuristic;                   // Heuristic method\r\n        this.graph = new Graph(mesh);                     // Graph-related operations\r\n        this.openHeap = new BinaryHeap(node => node.f);   // Generate binary heap instead of list\r\n    }\r\n\r\n    // search the path\r\n    search(start, end) {\r\n        let startGrid = start.map(e => Math.max(0, e / this.size - 10e-8));\r\n        let endGrid = end.map(e => Math.max(0, e / this.size - 10e-8));\r\n\r\n        // Initialization\r\n        startGrid = [Math.floor(startGrid[0]), Math.floor(startGrid[1])];\r\n        endGrid = [Math.floor(endGrid[0]), Math.floor(endGrid[1])];\r\n\r\n        const startNode = this.graph.grids[startGrid[0]][startGrid[1]];\r\n        const endNode = this.graph.grids[endGrid[0]][endGrid[1]];\r\n\r\n        // Set the start and end coordinates\r\n        [startNode.x, startNode.y] = [start[0] / this.size, start[1] / this.size];\r\n        [endNode.x, endNode.y] = [end[0] / this.size, end[1] / this.size];\r\n\r\n        startNode.h = this.heuristic(startNode, endNode);\r\n        startNode.f = startNode.h;\r\n        this.openHeap.push(startNode);\r\n\r\n        // Search loop\r\n        while (this.openHeap.size() > 0) {\r\n\r\n            // Grab the lowest f(x) to process next.  Heap keeps this sorted.\r\n            const currentNode = this.openHeap.shift();\r\n\r\n            // Normal case -- move currentNode from open to closed, process each of its neighbors.\r\n            currentNode.closed = true;\r\n\r\n            // End case -- result has been found, return the traced path.\r\n            if (currentNode === endNode) {\r\n                const path = this.pathTo(endNode);\r\n                this.resetNodes(startNode, endNode);\r\n                this.openHeap.content = [];\r\n                return path;\r\n            }\r\n\r\n            // Find all neighbors for the current node.\r\n            const neighbors = this.graph.findNeighbors(currentNode);\r\n\r\n            for (let i = 0; i < neighbors.length; i++) {\r\n                const neighbor = neighbors[i];\r\n\r\n                // Not a valid node to process, skip to next neighbor.\r\n                if (neighbor.closed || neighbor.isWall() || this.graph.isStumble(currentNode, neighbor)) continue;\r\n\r\n                // Find the parent of the neighbor\r\n                const parent = this.findNeighborParent(currentNode, neighbor);\r\n\r\n                // The g score is the shortest distance from start to current node.\r\n                // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.\r\n                const gScore = parent.g + this.euclidean(parent, neighbor);\r\n                const beenVisited = neighbor.visited;\r\n\r\n                if (!beenVisited || gScore < neighbor.g) {\r\n\r\n                    // Found an optimal (so far) path to this node.  Take score for node to see how good it is.\r\n                    neighbor.visited = true;\r\n                    neighbor.parent = parent;\r\n                    neighbor.h = this.heuristic(neighbor, endNode);\r\n                    neighbor.g = gScore;\r\n                    neighbor.f = neighbor.g + neighbor.h;\r\n\r\n                    if (!beenVisited) // Pushing to heap will put it in proper place based on the 'f' value.\r\n                        this.openHeap.push(neighbor);\r\n                    else // Already seen the node, but since it has been rescored we need to reorder it in the heap\r\n                        this.openHeap.sortElement(neighbor);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Fail to find a path.\r\n        this.resetNodes(startNode, endNode)\r\n        this.openHeap.content = [];\r\n        return [];\r\n    }\r\n\r\n    resetNodes(startNode, endNode){\r\n        this.graph.nodes.forEach(node=>{\r\n            node.f = 0;\r\n            node.g = 0;\r\n            node.h = 0;\r\n            node.visited = false;\r\n            node.closed = false;\r\n            node.parent = null;\r\n        });\r\n        this.resetNode(startNode);\r\n        this.resetNode(endNode);\r\n    }\r\n\r\n    findNeighborParent(currentNode) {\r\n        return currentNode;\r\n    }\r\n\r\n    pathTo(node, end) {\r\n        let curr = node;\r\n        const path = end ? [end] : [];\r\n        while (curr) {\r\n            path.unshift(curr);\r\n            curr = curr.parent;\r\n        }\r\n        return path.map(n => [n.x * this.size, n.y * this.size]);\r\n    }\r\n\r\n    resetNode(node) {\r\n        [node.x, node.y] = [Math.floor(node.x) + 0.5, Math.floor(node.y) + 0.5];\r\n    }\r\n\r\n    heuristic(node1, node2) {\r\n        if (node1 === node2) return 0;\r\n        if (this.heuristicName === 'euclidean')\r\n            return this.euclidean(node1, node2);\r\n        if (this.heuristicName === 'diagonal') {\r\n            const d1 = Math.abs(node1.x - node2.x);\r\n            const d2 = Math.abs(node1.y - node2.y);\r\n            // -0.585787 = sqrt(2) - 2\r\n            // A litte trick to make the grid path more straight\r\n            const distance = (d1 + d2) - 0.585787 * Math.min(d1, d2);\r\n            return distance;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    euclidean(node1, node2) {\r\n        const d1 = Math.abs(node2.x - node1.x);\r\n        const d2 = Math.abs(node2.y - node1.y);\r\n        return Math.sqrt(d1 * d1 + d2 * d2);\r\n    }\r\n}\r\n\r\nclass Node {\r\n    constructor(point, weight) {\r\n        this.x = point[0];\r\n        this.y = point[1];\r\n        this.weight = weight;\r\n        this.f = 0;\r\n        this.g = 0;\r\n        this.h = 0;\r\n        this.visited = false;\r\n        this.closed = false;\r\n        this.parent = null;\r\n    }\r\n\r\n    isWall() {\r\n        // zero weight means wall\r\n        return this.weight === 0;\r\n    }\r\n}\r\n\r\nclass Graph {\r\n    constructor(mesh) {\r\n        this.mesh = mesh;  // Storing mesh\r\n        this.nodes = [];   // 1D array for storing nodes\r\n        this.grids = [];   // 2D array for storing nodes\r\n        this.init();\r\n    }\r\n\r\n    // Initialize the nodes\r\n    init() {\r\n\r\n        const width = this.mesh.width;\r\n        const height = this.mesh.height;\r\n        const size = this.mesh.size;\r\n        const blockedIndices = this.mesh.blockedIndices;\r\n\r\n        let cellIndex = 0;\r\n        for (let x = 0; x < width / size; x++) {\r\n            this.grids[x] = [];\r\n            for (let y = 0; y < height / size; y++) {\r\n                const weight = blockedIndices.includes(cellIndex++) ? 0 : 1;\r\n                // [x + 0.5, y + 0.5]: the center of the grid\r\n                // like http://playtechs.blogspot.com/2007/03/raytracing-on-grid.html\r\n                // Easy for line-of-sight checks\r\n                const node = new Node([x + 0.5, y + 0.5], weight);\r\n                this.grids[x][y] = node;\r\n                this.nodes.push(node);\r\n            }\r\n        }\r\n    }\r\n\r\n    findNeighbors(node) {\r\n        const neighbors = [];\r\n        const x = Math.floor(node.x);\r\n        const y = Math.floor(node.y);\r\n        const grids = this.grids;\r\n\r\n        // Eight neighbors.\r\n        if (grids[x - 1] && grids[x - 1][y]) neighbors.push(grids[x - 1][y]);\r\n        if (grids[x + 1] && grids[x + 1][y]) neighbors.push(grids[x + 1][y]);\r\n        if (grids[x] && grids[x][y - 1]) neighbors.push(grids[x][y - 1]);\r\n        if (grids[x] && grids[x][y + 1]) neighbors.push(grids[x][y + 1]);\r\n        if (grids[x - 1] && grids[x - 1][y - 1]) neighbors.push(grids[x - 1][y - 1]);\r\n        if (grids[x + 1] && grids[x + 1][y - 1]) neighbors.push(grids[x + 1][y - 1]);\r\n        if (grids[x - 1] && grids[x - 1][y + 1]) neighbors.push(grids[x - 1][y + 1]);\r\n        if (grids[x + 1] && grids[x + 1][y + 1]) neighbors.push(grids[x + 1][y + 1]);\r\n\r\n        return neighbors;\r\n    }\r\n\r\n    isStumble(node, neighbor) {\r\n        // No way to go through the junction of two obstacle\r\n        const [x1, y1] = [Math.floor(node.x), Math.floor(node.y)];\r\n        const [x2, y2] = [Math.floor(neighbor.x), Math.floor(neighbor.y)];\r\n        const grids = this.grids;\r\n        if (Math.abs(x1 - x2) === 1 && Math.abs(y1 - y2) === 1) {\r\n            if ((!grids[x1] || !grids[x1][y2] || grids[x1][y2].isWall()) &&\r\n                (!grids[x2] || !grids[x2][y1] || grids[x2][y1].isWall()))\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Check if the line segment connecting node1 and node2 intersects any obstacle / boundary in the environment\r\n    lineOfSightGrid(node1, node2) {\r\n        if (!node1 || !node2) return false;\r\n        return lineOfSightGrid(node1.x, node1.y, node2.x, node2.y, this.grids);\r\n    }\r\n}\r\n\r\nfunction lineOfSightGrid(x0, y0, x1, y1, grids) {\r\n\r\n    const isBlocked = (x, y) => {\r\n        // if (!grids[x] || !grids[x][y] || !grids[x][y].weight)\r\n        //     return true;\r\n        if (grids[x] && grids[x][y] && !grids[x][y].weight)\r\n            return true;\r\n        return false;\r\n    };\r\n\r\n    const dx = Math.abs(x1 - x0);\r\n    const dy = Math.abs(y1 - y0);\r\n\r\n    let x = Math.floor(x0);\r\n    let y = Math.floor(y0);\r\n\r\n    // The start point is blocked\r\n    if (!Number.isInteger(x0) && !Number.isInteger(y0) && isBlocked(x, y)) return false;\r\n    if (Number.isInteger(x0) && Number.isInteger(y0) && x1 > x0 && y1 > y0 && isBlocked(x0, y0)) return false;\r\n\r\n    let n = 1;         // The number of intersecting grids.\r\n    let x_inc, y_inc;  // The increment (direction) of x and y.\r\n    let error;         // Determine horizontal or vertical expansion.\r\n\r\n    // If the slope is infinity\r\n    if (dx === 0) {\r\n        x_inc = 0;\r\n        error = Infinity;\r\n    }\r\n    else if (x1 > x0) {\r\n        x_inc = 1;\r\n        n += Math.floor(x1) - x;\r\n        error = (x + 1 - x0) * dy;\r\n    }\r\n    else {\r\n        x_inc = -1;\r\n        n += x - Math.floor(x1);\r\n        error = (x0 - x) * dy;\r\n    }\r\n\r\n    if (dy === 0) {\r\n        y_inc = 0;\r\n        error = -Infinity;\r\n    }\r\n    else if (y1 > y0) {\r\n        y_inc = 1;\r\n        n += Math.floor(y1) - y;\r\n        error -= (y + 1 - y0) * dx;\r\n    }\r\n    else {\r\n        y_inc = -1;\r\n        n += y - Math.floor(y1);\r\n        error -= (y0 - y) * dx;\r\n    }\r\n\r\n    while (--n > 0) {\r\n        if (error > 0) {\r\n            y += y_inc;\r\n            error -= dx;\r\n        }\r\n        else if (error < 0) {\r\n            x += x_inc;\r\n            error += dy;\r\n        }\r\n        else {\r\n            if (isBlocked(x + x_inc, y) &&\r\n                isBlocked(x, y + y_inc))\r\n                return false;\r\n            x += x_inc;\r\n            error += dy;\r\n            y += y_inc;\r\n            error -= dx;\r\n            n--;\r\n        }\r\n        if (isBlocked(x, y)) return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nmodule.exports = { Astar };","// More info: https://eloquentjavascript.net/1st_edition/appendix2.html\r\nclass BinaryHeap {\r\n    constructor(scoreFunction) {\r\n        this.content = [];\r\n        this.scoreFunction = scoreFunction;\r\n    }\r\n\r\n    sortElement(node) {\r\n        this.bubbleUp(this.content.indexOf(node));\r\n    }\r\n\r\n    push(element) {\r\n        // Add the new element to the end of the array.\r\n        this.content.push(element);\r\n\r\n        // Allow it to bubble up.\r\n        this.bubbleUp(this.content.length - 1);\r\n    }\r\n\r\n    shift() {\r\n        // Store the first element so we can return it later.\r\n        const result = this.content[0];\r\n        // Get the element at the end of the array.\r\n        const end = this.content.pop();\r\n        // If there are any elements left, put the end element at the\r\n        // start, and let it sink down.\r\n        if (this.content.length > 0) {\r\n            this.content[0] = end;\r\n            this.sinkDown(0);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    remove(node) {\r\n        const i = this.content.indexOf(node);\r\n\r\n        // When it is found, the process seen in 'pop' is repeated\r\n        // to fill up the hole.\r\n        const end = this.content.pop();\r\n\r\n        if (i !== this.content.length - 1) {\r\n            this.content[i] = end;\r\n            this.scoreFunction(end) < this.scoreFunction(node) ? this.bubbleUp(i) : this.sinkDown(i);\r\n        }\r\n    }\r\n\r\n    size() {\r\n        return this.content.length;\r\n    }\r\n\r\n    bubbleUp(n) {\r\n        // Fetch the element that has to be moved.\r\n        const element = this.content[n];\r\n\r\n        // When at 0, an element can not go up any further.\r\n        while (n > 0) {\r\n\r\n            // Compute the parent element's index, and fetch it.\r\n            const parentN = ((n + 1) >> 1) - 1;      // (n + 1) >> 1 equals Math.floor((n + 1) / 2)\r\n            const parent = this.content[parentN];\r\n\r\n            // Found a parent that is less, no need to sink any further.\r\n            if (this.scoreFunction(element) >= this.scoreFunction(parent)) break;\r\n            // Swap the elements if the parent is greater.\r\n            this.content[parentN] = element;\r\n            this.content[n] = parent;\r\n            // Update 'n' to continue at the new position.\r\n            n = parentN;\r\n        }\r\n    }\r\n    sinkDown(n) {\r\n        // Look up the target element and its score.\r\n        const length = this.content.length;\r\n        const element = this.content[n];\r\n        const elemScore = this.scoreFunction(element);\r\n\r\n        while (true) {\r\n            // Compute the indices of the child elements.\r\n            const child2N = (n + 1) << 1;\r\n            const child1N = child2N - 1;\r\n            // This is used to store the new position of the element, if any.\r\n            let child1Score, child2Score, swap = null;\r\n            // If the first child exists (is inside the array)...\r\n            if (child1N < length) {\r\n                // Look it up and compute its score.\r\n                let child1 = this.content[child1N];\r\n                child1Score = this.scoreFunction(child1);\r\n\r\n                // If the score is less than our element's, we need to swap.\r\n                if (child1Score < elemScore) swap = child1N;\r\n            }\r\n\r\n            // Do the same checks for the other child.\r\n            if (child2N < length) {\r\n                const child2 = this.content[child2N];\r\n                child2Score = this.scoreFunction(child2);\r\n                if (child2Score < (swap ? child1Score : elemScore)) swap = child2N;\r\n            }\r\n\r\n            if (!swap) break;\r\n            // If the element needs to be moved, swap it, and continue.\r\n            this.content[n] = this.content[swap];\r\n            this.content[swap] = element;\r\n            n = swap;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = { BinaryHeap };","\r\nconst { Astar } = require(\"./astar\");\r\n\r\nclass Thetastar extends Astar {\r\n    constructor(mesh, options) {\r\n        super(mesh, options);\r\n        this.heuristicName = 'euclidean';\r\n    }\r\n    findNeighborParent(currentNode, neighbor) {\r\n        return this.graph.lineOfSightGrid(currentNode.parent, neighbor) ? currentNode.parent : currentNode;\r\n    }\r\n}\r\nmodule.exports = { Thetastar };","export let envState = {};\r\n\r\n/**\r\n * Default environment values\r\n */\r\nconst defaultEnv = {\r\n    activeTab: \"environment\",\r\n    warningTab: null,\r\n    assistantTab: null,\r\n    editMode: \"voronoi\",\r\n    pathFinder: \"Thetastar\",\r\n    assistant: \"oz\",\r\n    wind: \"uniform\",\r\n    distance_threshold: 10.0,\r\n    length_threshold: 50.0,\r\n    vertex_line_threshold: 20.0,\r\n    complexity_limit: 60.0,\r\n    isCtrlPressed: false,\r\n    isDragging: false,\r\n    isRightDragging: false,\r\n    isPlaying: false,\r\n    hoveredGridCell: null,\r\n    mouseXPos: -1,\r\n    mouseYPos: -1,\r\n    initTime: 46800,\r\n    transitionDuration: 2000,\r\n    showCrossings: false,\r\n    showIntersections: false,\r\n    showVoronoiPoints: true,\r\n    showLines: true,\r\n    showDelaunay: false,\r\n    showParticles: true,\r\n    showPolygons: true,\r\n    showWeather: false,\r\n    showWindField: false,\r\n    showDirectLines: false\r\n};\r\n\r\n/**\r\n * Loads environment settings from a JSON file and falls back to defaults on failure.\r\n *\r\n * @param {string} url - Path to JSON file, e.g., \"./env-dev.json\"\r\n * @returns {Promise<void>}\r\n */\r\nexport async function loadEnvSettings(url = './env.json') {\r\n    try {\r\n        const response = await fetch(url);\r\n        if (!response.ok) throw new Error(`HTTP ${response.status} - ${response.statusText}`);\r\n        const data = await response.json();\r\n        Object.assign(envState, defaultEnv, data);  // Fallback for any missing fields\r\n        console.log(`[env] Loaded settings from ${url}`);\r\n    } catch (err) {\r\n        console.warn(`[env] Failed to load '${url}', using fallback defaults.`, err);\r\n        Object.assign(envState, defaultEnv);\r\n    }\r\n}\r\n","// HighlightUtils.js\r\n\r\nexport class HighlightUtils {\r\n    constructor() {\r\n        this.instances = {};\r\n    }\r\n\r\n    setInstance(name, instance) {\r\n        this.instances[name] = instance;\r\n    }\r\n\r\n    getInstance(name) {\r\n        return this.instances[name];\r\n    }\r\n\r\n    /**\r\n     * Highlights a bar in the registered chart manager.\r\n     * Assumes the chartManager has a method highlightBar(index)\r\n     */\r\n    highlightBar(index) {\r\n        const chart = this.getInstance(\"chart\");\r\n\r\n        if (!chart || typeof chart.highlightBar !== \"function\") {\r\n            console.warn(\"Chart not set or missing highlightBar()\");\r\n            return;\r\n        }\r\n\r\n        chart.highlightBar(index);\r\n    }\r\n\r\n    removeHighlightBar(index) {\r\n        const chart = this.getInstance(\"chart\");\r\n\r\n        if (!chart || typeof chart.removeHighlightBar !== \"function\") {\r\n            console.warn(\"Chart not set or missing removeHighlightBar()\");\r\n            return;\r\n        }\r\n\r\n        chart.removeHighlightBar(index);\r\n    }\r\n\r\n    /**\r\n     * Highlights a polygon in the registered polygon manager.\r\n     * Assumes the polygonManager has a method highlightPolygon(index)\r\n     */\r\n    highlightPolygon(index) {\r\n        const poly = this.getInstance(\"world\");\r\n\r\n        if (!poly || typeof poly.highlightPolygon !== \"function\") {\r\n            console.warn(\"PolygonManager not set or missing highlightPolygon()\");\r\n            return;\r\n        }\r\n\r\n        poly.highlightPolygon(index);\r\n    }\r\n\r\n    removeHighlightPolygon(index) {\r\n        const poly = this.getInstance(\"world\");\r\n\r\n        if (!poly || typeof poly.removeHighlightPolygon !== \"function\") {\r\n            console.warn(\"PolygonManager not set or missing removeHighlightPolygon()\");\r\n            return;\r\n        }\r\n\r\n        poly.removeHighlightPolygon(index);\r\n    }\r\n\r\n    highlightVoronoi(index) {\r\n        const poly = this.getInstance(\"world\");\r\n\r\n        if (!poly || typeof poly.highlightVoronoi !== \"function\") {\r\n            console.warn(\"PolygonManager not set or missing highlightVoronoi()\");\r\n            return;\r\n        }\r\n\r\n        poly.highlightVoronoi(index);\r\n    }\r\n\r\n    removeHighlightVoronoi(index) {\r\n        const poly = this.getInstance(\"world\");\r\n\r\n        if (!poly || typeof poly.removeHighlightVoronoi !== \"function\") {\r\n            console.warn(\"PolygonManager not set or missing removeHighlightVoronoi()\");\r\n            return;\r\n        }\r\n\r\n        poly.removeHighlightVoronoi(index);\r\n    }\r\n}","// RenderUtils.js\r\n\r\nexport class RenderUtils {\r\n    constructor() {\r\n        this.instances = {}; // key: string -> instance\r\n    }\r\n\r\n    /**\r\n     * Registers an instance under a given name\r\n     */\r\n    setInstance(name, instance) {\r\n        this.instances[name] = instance;\r\n    }\r\n\r\n    /**\r\n     * Gets a registered instance\r\n     */\r\n    getInstance(name) {\r\n        return this.instances[name];\r\n    }\r\n\r\n    /**\r\n     * Calls the render method on a registered manager\r\n     */\r\n    render(name, ...args) {\r\n        const instance = this.instances[name];\r\n\r\n        if (!instance || typeof instance.render !== 'function') {\r\n            console.warn(`No renderable instance found for \"${name}\"`);\r\n            return;\r\n        }\r\n\r\n        instance.render(...args);\r\n    }\r\n\r\n    /**\r\n     * render all known instances\r\n     */\r\n    renderAll() {\r\n        for (const [name, instance] of Object.entries(this.instances)) {\r\n            if (typeof instance.render === 'function') {\r\n                instance.render();\r\n            }\r\n        }\r\n    }\r\n}\r\n","// Ease-in-out cubic function\r\nexport function easeInOutCubic(t) {\r\n    return t < 0.5\r\n        ? 4 * t * t * t\r\n        : 1 - Math.pow(-2 * t + 2, 3) / 2;\r\n}","// a collection of geometry utility functions that can be called\r\n// from any class\r\n\r\nexport function getTrackLocationAtDistance(track, distance) {\r\n    let traveled = 0;\r\n    for (let i = 1; i < track.length; i++) {\r\n        const segmentLength = getLineSegmentLength(track[i-1], track[i]);\r\n        if (traveled + segmentLength >= distance) {\r\n            const ratio = (distance - traveled) / segmentLength;\r\n            const x = track[i - 1][0] + ratio * (track[i][0] - track[i - 1][0]); // interpolate x position\r\n            const y = track[i - 1][1] + ratio * (track[i][1] - track[i - 1][1]); // interpolate y position\r\n            return [x,y];\r\n        }\r\n        traveled += segmentLength;\r\n    }\r\n    return track[track.length - 1];\r\n}\r\n\r\nexport function getLineSegmentLength(p1, p2) {\r\n    const x1 = p1[0], y1 = p1[1],\r\n        x2 = p2[0], y2 = p2[1];\r\n    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n}\r\n\r\n// Helper function to check intersection between two line segments using Vector Cross Product\r\nexport function getIntersection(p1, p2, p3, p4) {\r\n    const x1 = p1[0], y1 = p1[1],\r\n        x2 = p2[0], y2 = p2[1],\r\n        x3 = p3[0], y3 = p3[1],\r\n        x4 = p4[0], y4 = p4[1];\r\n\r\n    // Compute determinants\r\n    const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\r\n    if (Math.abs(denom) < 1e-10) return null;  // Parallel or coincident lines\r\n\r\n    const t = ((x1 - x3) * (y3 - y4) - (y1 - y3) * (x3 - x4)) / denom;\r\n    const u = ((x1 - x3) * (y1 - y2) - (y1 - y3) * (x1 - x2)) / denom;\r\n\r\n    // Check if intersection is within both line segments\r\n    if (t >= 0 && t <= 1 && u >= 0 && u <= 1) {\r\n        const ix = x1 + t * (x2 - x1);\r\n        const iy = y1 + t * (y2 - y1);\r\n        return [ix, iy];\r\n    }\r\n\r\n    return null; // No valid intersection\r\n}\r\n\r\n// Check if a point is inside a polygon using ray-casting algorithm\r\nexport function isPointInsidePolygon(point, polygon) {\r\n    let [px, py] = point;\r\n    let inside = false;\r\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\r\n        let [x1, y1] = polygon[i];\r\n        let [x2, y2] = polygon[j];\r\n        let intersect = ((y1 > py) !== (y2 > py)) &&\r\n            (px < (x2 - x1) * (py - y1) / (y2 - y1) + x1);\r\n        if (intersect) inside = !inside;\r\n    }\r\n    return inside;\r\n}\r\n\r\n// Calculate the area of a polygon using Shoelace formula\r\nexport function calculatePolygonArea(polygon) {\r\n    let area = 0;\r\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\r\n        area += (polygon[j][0] + polygon[i][0]) * (polygon[j][1] - polygon[i][1]);\r\n    }\r\n    return Math.abs(area / 2);\r\n}\r\n\r\n// calculate the centroid of a polygon, uses the Shoelace algorithm\r\nexport function polygonCentroid(polygon) {\r\n    let area = 0;\r\n    let cx = 0;\r\n    let cy = 0;\r\n    const n = polygon.length;\r\n\r\n    for (let i = 0; i < n; i++) {\r\n        const [x0, y0] = polygon[i];\r\n        const [x1, y1] = polygon[(i + 1) % n];\r\n        const a = x0 * y1 - x1 * y0;\r\n        area += a;\r\n        cx += (x0 + x1) * a;\r\n        cy += (y0 + y1) * a;\r\n    }\r\n\r\n    area *= 0.5;\r\n    if (area === 0) return polygon[0]; // Degenerate case\r\n\r\n    cx /= (6 * area);\r\n    cy /= (6 * area);\r\n\r\n    return [cx, cy];\r\n}\r\n\r\n// calculate the interaction angle between two line segments\r\nexport function calculateAngleBetweenLineSegments(line1, line2) {\r\n    function getVector(line) {\r\n        let [p1, p2] = line;\r\n        return { x: p2[0] - p1[0], y: p2[1] - p1[1] };\r\n    }\r\n\r\n    let v1 = getVector(line1);\r\n    let v2 = getVector(line2);\r\n\r\n    let magnitude1 = Math.sqrt(v1.x ** 2 + v1.y ** 2);\r\n    let magnitude2 = Math.sqrt(v2.x ** 2 + v2.y ** 2);\r\n\r\n    if (magnitude1 === 0 || magnitude2 === 0) return -1; // Avoid division by zero\r\n\r\n    let dotProduct = v1.x * v2.x + v1.y * v2.y;\r\n    let cosineTheta = dotProduct / (magnitude1 * magnitude2);\r\n    let angleRad = Math.acos(Math.min(1, Math.max(-1, cosineTheta))); // Clamp to avoid precision errors\r\n\r\n    return (angleRad * 180) / Math.PI;\r\n}\r\n\r\n// Calculate crossing points between all polylines\r\nexport function calculateLineCrossings(lines) {\r\n    const crossings = [];\r\n    for (let i = 0; i < lines.length; i++) {\r\n        for (let j = 0; j < lines[i].length - 1; j++) {\r\n            for (let k = i + 1; k < lines.length; k++) {\r\n                for (let l = 0; l < lines[k].length - 1; l++) {\r\n                    const intersection = getIntersection(\r\n                        lines[i][j], lines[i][j + 1],\r\n                        lines[k][l], lines[k][l + 1]\r\n                    );\r\n                    if (intersection) {\r\n                        crossings.push(intersection);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return crossings;\r\n}\r\n\r\n// Function to check if a polyline segment and polygon edge intersect\r\nexport function doLinesIntersect(polyline, edge) {\r\n\r\n    for (let i = 0; i < polyline.length -1 ; i++) {\r\n\r\n        const p1 = polyline[i];\r\n        const p2 = polyline[i+1];\r\n        const [q1, q2] = edge;\r\n\r\n        const cross = (a, b, c) => (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\r\n\r\n        const d1 = cross(p1, p2, q1);\r\n        const d2 = cross(p1, p2, q2);\r\n        const d3 = cross(q1, q2, p1);\r\n        const d4 = cross(q1, q2, p2);\r\n\r\n        // Check general case\r\n        if (d1 * d2 < 0 && d3 * d4 < 0) {\r\n            return true;\r\n        }\r\n\r\n        // Check for special colinear cases (overlapping segments)\r\n        const isOnSegment = (a, b, c) =>\r\n            Math.min(a[0], b[0]) <= c[0] && c[0] <= Math.max(a[0], b[0]) &&\r\n            Math.min(a[1], b[1]) <= c[1] && c[1] <= Math.max(a[1], b[1]);\r\n\r\n        if (d1 === 0 && isOnSegment(p1, p2, q1)) return true;\r\n        if (d2 === 0 && isOnSegment(p1, p2, q2)) return true;\r\n        if (d3 === 0 && isOnSegment(q1, q2, p1)) return true;\r\n        if (d4 === 0 && isOnSegment(q1, q2, p2)) return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\n// calculate the shortest distance between a point and a line\r\nexport function pointToLineDistance(point, line) {\r\n    const [x0, y0] = point;\r\n    const [[x1, y1], [x2, y2]] = line;\r\n\r\n    const dx = x2 - x1;\r\n    const dy = y2 - y1;\r\n    const lengthSquared = dx * dx + dy * dy;\r\n\r\n    if (lengthSquared === 0) {\r\n        // The line segment is actually a point\r\n        return Math.sqrt((x0 - x1) ** 2 + (y0 - y1) ** 2);\r\n    }\r\n\r\n    // Project point onto the line segment\r\n    let t = ((x0 - x1) * dx + (y0 - y1) * dy) / lengthSquared;\r\n    t = Math.max(0, Math.min(1, t)); // Clamp t to the segment range\r\n\r\n    const nearestX = x1 + t * dx;\r\n    const nearestY = y1 + t * dy;\r\n\r\n    // Compute distance from the point to the nearest point on the segment\r\n    return Math.sqrt((x0 - nearestX) ** 2 + (y0 - nearestY) ** 2);\r\n}\r\n\r\n\r\n// calculate the unit direction vector between two points\r\nexport function getUnitDirectionVector(start, end) {\r\n    // Calculate the difference in x and y coordinates\r\n    let dx = end[0] - start[0];\r\n    let dy = end[1] - start[1];\r\n\r\n    // Calculate the magnitude (length) of the vector\r\n    let magnitude = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    // Prevent division by zero\r\n    if (magnitude === 0) {\r\n        throw new Error(\"The two points are the same; direction is undefined.\");\r\n    }\r\n\r\n    // Compute the unit direction vector\r\n    //return { ux: dx / magnitude, uy: dy / magnitude };\r\n    return [ dx/magnitude, dy/magnitude ];\r\n}\r\n\r\n// calculate the additional distance between direct and indirect polylines\r\nexport function calculateAdditionalLineLength(polyLines) {\r\n    const additional_length = [];\r\n    polyLines.forEach(polyline => {\r\n        const start = polyline[0];\r\n        const end = polyline[polyline.length - 1];\r\n        const direct = getLineSegmentLength(start,end);\r\n\r\n        let polyLength = 0;\r\n        for (let i = 0; i < polyline.length - 1; i++) {\r\n            polyLength += getLineSegmentLength(polyline[i],polyline[i+1]);\r\n        }\r\n        additional_length.push(polyLength - direct);\r\n    });\r\n    return additional_length;\r\n}\r\n\r\n// get the vertices of points that are too close to a polygon edge\r\nexport function getProblematicLineCrossings(polygons, points, threshold) {\r\n    const problematicPoints = [];\r\n\r\n    points.forEach(pt => {\r\n        polygons.forEach(polygon => {\r\n            for (let i = 0; i < polygon.length; i++) {\r\n                const segmentStart = polygon[i];\r\n                const segmentEnd = polygon[(i + 1) % polygon.length];\r\n\r\n                if (pointToLineDistance(pt, [segmentStart, segmentEnd]) < threshold) {\r\n                    problematicPoints.push(pt);\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    return problematicPoints;\r\n}\r\n\r\n// Calculate intersections between random lines and Voronoi polygons,\r\n// returns [xpos,ypos,intersectionAngle_deg]\r\nexport function calculateIntersections(lines, polygons, minLength) {\r\n    const allIntersections = [];\r\n    const problematicSegments = [];\r\n\r\n    lines.forEach(line => {\r\n        const lineIntersections = [];\r\n        for (let i = 0; i < line.length - 1; i++) {\r\n            const lineStart = line[i];\r\n            const lineEnd = line[i + 1];\r\n            polygons.forEach(polygon => {\r\n                for (let i = 0; i < polygon.length; i++) {\r\n                    const segmentStart = polygon[i];\r\n                    const segmentEnd = polygon[(i + 1) % polygon.length];\r\n\r\n                    const intersection = getIntersection(lineStart, lineEnd, segmentStart, segmentEnd);\r\n                    if (intersection) {\r\n                        const angle = calculateAngleBetweenLineSegments([lineStart,lineEnd],[segmentStart,segmentEnd]);\r\n                        allIntersections.push([intersection[0], intersection[1], angle]);\r\n                        lineIntersections.push(intersection);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        // determine problematic line lengths\r\n        for (let i = 0; i < lineIntersections.length; i++) {\r\n            const intersectionStart = lineIntersections[i];\r\n            const nextIntersection = lineIntersections[(i + 1) % lineIntersections.length];\r\n            if (getLineSegmentLength(intersectionStart, nextIntersection) < minLength) {\r\n                problematicSegments.push([intersectionStart,nextIntersection]);\r\n            }\r\n        }\r\n    });\r\n\r\n    return [allIntersections, problematicSegments];\r\n}\r\n\r\n// get the problematic line vertex that is too close to a polygon vertex\r\nexport function getProblematicVertices(polygonVertices,points,vertex_line_threshold) {\r\n    const lineVertices = [];\r\n\r\n    polygonVertices.forEach(vertex => {\r\n        points.forEach(pt => {\r\n            if(getLineSegmentLength(vertex,pt) <= vertex_line_threshold) {\r\n                lineVertices.push(pt);\r\n            }\r\n        });\r\n    });\r\n\r\n    return lineVertices;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","// ---- Perlin Noise Generator (Improved) ----\r\n// Source: https://github.com/josephg/noisejs/blob/master/perlin.js (MIT License)\r\n// Slightly simplified for embedding\r\n\r\nexport const Perlin = (function() {\r\n    const perm = new Uint8Array(512);\r\n    const grad3 = [\r\n        [1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],\r\n        [1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],\r\n        [0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]\r\n    ];\r\n    function seed(seed) {\r\n        for(let i=0; i<256; i++) perm[i] = i;\r\n        let n, q;\r\n        for(let i=255; i>0; i--) {\r\n            n = Math.floor((seed = (seed * 16807) % 2147483647) / 2147483647 * (i + 1));\r\n            q = perm[i];\r\n            perm[i] = perm[n];\r\n            perm[n] = q;\r\n        }\r\n        for(let i=0; i<256; i++) perm[i+256] = perm[i];\r\n    }\r\n    seed(1);\r\n\r\n    function dot(g, x, y) { return g[0]*x + g[1]*y; }\r\n    function fade(t) { return t*t*t*(t*(t*6 -15) +10); }\r\n    function lerp(a,b,t) { return (1-t)*a + t*b; }\r\n\r\n    function noise(x, y) {\r\n        const X = Math.floor(x) & 255;\r\n        const Y = Math.floor(y) & 255;\r\n        const xf = x - Math.floor(x);\r\n        const yf = y - Math.floor(y);\r\n\r\n        const u = fade(xf);\r\n        const v = fade(yf);\r\n\r\n        const aa = perm[X+perm[Y]] % 12;\r\n        const ab = perm[X+perm[Y+1]] % 12;\r\n        const ba = perm[X+1+perm[Y]] % 12;\r\n        const bb = perm[X+1+perm[Y+1]] % 12;\r\n\r\n        const x1 = lerp(dot(grad3[aa], xf, yf), dot(grad3[ba], xf-1, yf), u);\r\n        const x2 = lerp(dot(grad3[ab], xf, yf-1), dot(grad3[bb], xf-1, yf-1), u);\r\n        return lerp(x1, x2, v);\r\n    }\r\n\r\n    return { noise };\r\n})();\r\n\r\n// ---- Simplex Noise Generator (2D) ----\r\n// Source: https://github.com/jwagner/simplex-noise.js (MIT License)\r\n// Minimal embedded version adapted for demo\r\n\r\nclass SimplexNoise {\r\n    constructor() {\r\n        this.grad3 = [\r\n            [1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],\r\n            [1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],\r\n            [0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]\r\n        ];\r\n        this.p = [];\r\n        for(let i=0; i<256; i++) this.p[i] = Math.floor(Math.random()*256);\r\n        this.perm = new Uint8Array(512);\r\n        for(let i=0; i<512; i++) this.perm[i] = this.p[i & 255];\r\n    }\r\n    dot(g, x, y) { return g[0]*x + g[1]*y; }\r\n    noise(xin, yin) {\r\n        const F2 = 0.5*(Math.sqrt(3)-1);\r\n        const G2 = (3-Math.sqrt(3))/6;\r\n        let n0=0,n1=0,n2=0;\r\n        let s = (xin+yin)*F2;\r\n        let i = Math.floor(xin+s);\r\n        let j = Math.floor(yin+s);\r\n        let t = (i+j)*G2;\r\n        let X0 = i-t;\r\n        let Y0 = j-t;\r\n        let x0 = xin - X0;\r\n        let y0 = yin - Y0;\r\n        let i1, j1;\r\n        if(x0>y0){ i1=1; j1=0;} else {i1=0; j1=1;}\r\n        let x1 = x0 - i1 + G2;\r\n        let y1 = y0 - j1 + G2;\r\n        let x2 = x0 - 1 + 2*G2;\r\n        let y2 = y0 - 1 + 2*G2;\r\n        let ii = i & 255;\r\n        let jj = j & 255;\r\n        let gi0 = this.perm[ii+this.perm[jj]] % 12;\r\n        let gi1 = this.perm[ii+i1+this.perm[jj+j1]] % 12;\r\n        let gi2 = this.perm[ii+1+this.perm[jj+1]] % 12;\r\n        let t0 = 0.5 - x0*x0 - y0*y0;\r\n        if(t0>=0) {\r\n            t0 *= t0;\r\n            n0 = t0*t0*this.dot(this.grad3[gi0], x0, y0);\r\n        }\r\n        let t1 = 0.5 - x1*x1 - y1*y1;\r\n        if(t1>=0) {\r\n            t1 *= t1;\r\n            n1 = t1*t1*this.dot(this.grad3[gi1], x1, y1);\r\n        }\r\n        let t2 = 0.5 - x2*x2 - y2*y2;\r\n        if(t2>=0) {\r\n            t2 *= t2;\r\n            n2 = t2*t2*this.dot(this.grad3[gi2], x2, y2);\r\n        }\r\n        return 70*(n0 + n1 + n2);\r\n    }\r\n}\r\n\r\nexport const Simplex = new SimplexNoise();","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};function r(r,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function i(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function e(t){var r=\"\";Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.type===_.CLOSE_PATH)r+=\"z\";else if(i.type===_.HORIZ_LINE_TO)r+=(i.relative?\"h\":\"H\")+i.x;else if(i.type===_.VERT_LINE_TO)r+=(i.relative?\"v\":\"V\")+i.y;else if(i.type===_.MOVE_TO)r+=(i.relative?\"m\":\"M\")+i.x+\" \"+i.y;else if(i.type===_.LINE_TO)r+=(i.relative?\"l\":\"L\")+i.x+\" \"+i.y;else if(i.type===_.CURVE_TO)r+=(i.relative?\"c\":\"C\")+i.x1+\" \"+i.y1+\" \"+i.x2+\" \"+i.y2+\" \"+i.x+\" \"+i.y;else if(i.type===_.SMOOTH_CURVE_TO)r+=(i.relative?\"s\":\"S\")+i.x2+\" \"+i.y2+\" \"+i.x+\" \"+i.y;else if(i.type===_.QUAD_TO)r+=(i.relative?\"q\":\"Q\")+i.x1+\" \"+i.y1+\" \"+i.x+\" \"+i.y;else if(i.type===_.SMOOTH_QUAD_TO)r+=(i.relative?\"t\":\"T\")+i.x+\" \"+i.y;else{if(i.type!==_.ARC)throw new Error('Unexpected command type \"'+i.type+'\" at index '+e+\".\");r+=(i.relative?\"a\":\"A\")+i.rX+\" \"+i.rY+\" \"+i.xRot+\" \"+ +i.lArcFlag+\" \"+ +i.sweepFlag+\" \"+i.x+\" \"+i.y}}return r}function i(t,r){var e=t[0],i=t[1];return[e*Math.cos(r)-i*Math.sin(r),e*Math.sin(r)+i*Math.cos(r)]}function a(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=0;e<t.length;e++)if(\"number\"!=typeof t[e])throw new Error(\"assertNumbers arguments[\"+e+\"] is not a number. \"+typeof t[e]+\" == typeof \"+t[e]);return!0}var n=Math.PI;function o(t,r,e){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var a=t.rX,o=t.rY,s=t.x,u=t.y;a=Math.abs(t.rX),o=Math.abs(t.rY);var h=i([(r-s)/2,(e-u)/2],-t.xRot/180*n),c=h[0],y=h[1],p=Math.pow(c,2)/Math.pow(a,2)+Math.pow(y,2)/Math.pow(o,2);1<p&&(a*=Math.sqrt(p),o*=Math.sqrt(p)),t.rX=a,t.rY=o;var m=Math.pow(a,2)*Math.pow(y,2)+Math.pow(o,2)*Math.pow(c,2),O=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(a,2)*Math.pow(o,2)-m)/m)),l=a*y/o*O,T=-o*c/a*O,v=i([l,T],t.xRot/180*n);t.cX=v[0]+(r+s)/2,t.cY=v[1]+(e+u)/2,t.phi1=Math.atan2((y-T)/o,(c-l)/a),t.phi2=Math.atan2((-y-T)/o,(-c-l)/a),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*n),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*n),t.phi1*=180/n,t.phi2*=180/n}function s(t,r,e){a(t,r,e);var i=t*t+r*r-e*e;if(0>i)return[];if(0===i)return[[t*e/(t*t+r*r),r*e/(t*t+r*r)]];var n=Math.sqrt(i);return[[(t*e+r*n)/(t*t+r*r),(r*e-t*n)/(t*t+r*r)],[(t*e-r*n)/(t*t+r*r),(r*e+t*n)/(t*t+r*r)]]}var u,h=Math.PI/180;function c(t,r,e){return(1-e)*t+e*r}function y(t,r,e,i){return t+Math.cos(i/180*n)*r+Math.sin(i/180*n)*e}function p(t,r,e,i){var a=1e-6,n=r-t,o=e-r,s=3*n+3*(i-e)-6*o,u=6*(o-n),h=3*n;return Math.abs(s)<a?[-h/u]:function(t,r,e){void 0===e&&(e=1e-6);var i=t*t/4-r;if(i<-e)return[];if(i<=e)return[-t/2];var a=Math.sqrt(i);return[-t/2-a,-t/2+a]}(u/s,h/s,a)}function m(t,r,e,i,a){var n=1-a;return t*(n*n*n)+r*(3*n*n*a)+e*(3*n*a*a)+i*(a*a*a)}!function(t){function r(){return u((function(t,r,e){return t.relative&&(void 0!==t.x1&&(t.x1+=r),void 0!==t.y1&&(t.y1+=e),void 0!==t.x2&&(t.x2+=r),void 0!==t.y2&&(t.y2+=e),void 0!==t.x&&(t.x+=r),void 0!==t.y&&(t.y+=e),t.relative=!1),t}))}function e(){var t=NaN,r=NaN,e=NaN,i=NaN;return u((function(a,n,o){return a.type&_.SMOOTH_CURVE_TO&&(a.type=_.CURVE_TO,t=isNaN(t)?n:t,r=isNaN(r)?o:r,a.x1=a.relative?n-t:2*n-t,a.y1=a.relative?o-r:2*o-r),a.type&_.CURVE_TO?(t=a.relative?n+a.x2:a.x2,r=a.relative?o+a.y2:a.y2):(t=NaN,r=NaN),a.type&_.SMOOTH_QUAD_TO&&(a.type=_.QUAD_TO,e=isNaN(e)?n:e,i=isNaN(i)?o:i,a.x1=a.relative?n-e:2*n-e,a.y1=a.relative?o-i:2*o-i),a.type&_.QUAD_TO?(e=a.relative?n+a.x1:a.x1,i=a.relative?o+a.y1:a.y1):(e=NaN,i=NaN),a}))}function n(){var t=NaN,r=NaN;return u((function(e,i,a){if(e.type&_.SMOOTH_QUAD_TO&&(e.type=_.QUAD_TO,t=isNaN(t)?i:t,r=isNaN(r)?a:r,e.x1=e.relative?i-t:2*i-t,e.y1=e.relative?a-r:2*a-r),e.type&_.QUAD_TO){t=e.relative?i+e.x1:e.x1,r=e.relative?a+e.y1:e.y1;var n=e.x1,o=e.y1;e.type=_.CURVE_TO,e.x1=((e.relative?0:i)+2*n)/3,e.y1=((e.relative?0:a)+2*o)/3,e.x2=(e.x+2*n)/3,e.y2=(e.y+2*o)/3}else t=NaN,r=NaN;return e}))}function u(t){var r=0,e=0,i=NaN,a=NaN;return function(n){if(isNaN(i)&&!(n.type&_.MOVE_TO))throw new Error(\"path must start with moveto\");var o=t(n,r,e,i,a);return n.type&_.CLOSE_PATH&&(r=i,e=a),void 0!==n.x&&(r=n.relative?r+n.x:n.x),void 0!==n.y&&(e=n.relative?e+n.y:n.y),n.type&_.MOVE_TO&&(i=r,a=e),o}}function O(t,r,e,i,n,o){return a(t,r,e,i,n,o),u((function(a,s,u,h){var c=a.x1,y=a.x2,p=a.relative&&!isNaN(h),m=void 0!==a.x?a.x:p?0:s,O=void 0!==a.y?a.y:p?0:u;function l(t){return t*t}a.type&_.HORIZ_LINE_TO&&0!==r&&(a.type=_.LINE_TO,a.y=a.relative?0:u),a.type&_.VERT_LINE_TO&&0!==e&&(a.type=_.LINE_TO,a.x=a.relative?0:s),void 0!==a.x&&(a.x=a.x*t+O*e+(p?0:n)),void 0!==a.y&&(a.y=m*r+a.y*i+(p?0:o)),void 0!==a.x1&&(a.x1=a.x1*t+a.y1*e+(p?0:n)),void 0!==a.y1&&(a.y1=c*r+a.y1*i+(p?0:o)),void 0!==a.x2&&(a.x2=a.x2*t+a.y2*e+(p?0:n)),void 0!==a.y2&&(a.y2=y*r+a.y2*i+(p?0:o));var T=t*i-r*e;if(void 0!==a.xRot&&(1!==t||0!==r||0!==e||1!==i))if(0===T)delete a.rX,delete a.rY,delete a.xRot,delete a.lArcFlag,delete a.sweepFlag,a.type=_.LINE_TO;else{var v=a.xRot*Math.PI/180,f=Math.sin(v),N=Math.cos(v),x=1/l(a.rX),d=1/l(a.rY),E=l(N)*x+l(f)*d,A=2*f*N*(x-d),C=l(f)*x+l(N)*d,M=E*i*i-A*r*i+C*r*r,R=A*(t*i+r*e)-2*(E*e*i+C*t*r),g=E*e*e-A*t*e+C*t*t,I=(Math.atan2(R,M-g)+Math.PI)%Math.PI/2,S=Math.sin(I),L=Math.cos(I);a.rX=Math.abs(T)/Math.sqrt(M*l(L)+R*S*L+g*l(S)),a.rY=Math.abs(T)/Math.sqrt(M*l(S)-R*S*L+g*l(L)),a.xRot=180*I/Math.PI}return void 0!==a.sweepFlag&&0>T&&(a.sweepFlag=+!a.sweepFlag),a}))}function l(){return function(t){var r={};for(var e in t)r[e]=t[e];return r}}t.ROUND=function(t){function r(r){return Math.round(r*t)/t}return void 0===t&&(t=1e13),a(t),function(t){return void 0!==t.x1&&(t.x1=r(t.x1)),void 0!==t.y1&&(t.y1=r(t.y1)),void 0!==t.x2&&(t.x2=r(t.x2)),void 0!==t.y2&&(t.y2=r(t.y2)),void 0!==t.x&&(t.x=r(t.x)),void 0!==t.y&&(t.y=r(t.y)),void 0!==t.rX&&(t.rX=r(t.rX)),void 0!==t.rY&&(t.rY=r(t.rY)),t}},t.TO_ABS=r,t.TO_REL=function(){return u((function(t,r,e){return t.relative||(void 0!==t.x1&&(t.x1-=r),void 0!==t.y1&&(t.y1-=e),void 0!==t.x2&&(t.x2-=r),void 0!==t.y2&&(t.y2-=e),void 0!==t.x&&(t.x-=r),void 0!==t.y&&(t.y-=e),t.relative=!0),t}))},t.NORMALIZE_HVZ=function(t,r,e){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===e&&(e=!0),u((function(i,a,n,o,s){if(isNaN(o)&&!(i.type&_.MOVE_TO))throw new Error(\"path must start with moveto\");return r&&i.type&_.HORIZ_LINE_TO&&(i.type=_.LINE_TO,i.y=i.relative?0:n),e&&i.type&_.VERT_LINE_TO&&(i.type=_.LINE_TO,i.x=i.relative?0:a),t&&i.type&_.CLOSE_PATH&&(i.type=_.LINE_TO,i.x=i.relative?o-a:o,i.y=i.relative?s-n:s),i.type&_.ARC&&(0===i.rX||0===i.rY)&&(i.type=_.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},t.NORMALIZE_ST=e,t.QT_TO_C=n,t.INFO=u,t.SANITIZE=function(t){void 0===t&&(t=0),a(t);var r=NaN,e=NaN,i=NaN,n=NaN;return u((function(a,o,s,u,h){var c=Math.abs,y=!1,p=0,m=0;if(a.type&_.SMOOTH_CURVE_TO&&(p=isNaN(r)?0:o-r,m=isNaN(e)?0:s-e),a.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(r=a.relative?o+a.x2:a.x2,e=a.relative?s+a.y2:a.y2):(r=NaN,e=NaN),a.type&_.SMOOTH_QUAD_TO?(i=isNaN(i)?o:2*o-i,n=isNaN(n)?s:2*s-n):a.type&_.QUAD_TO?(i=a.relative?o+a.x1:a.x1,n=a.relative?s+a.y1:a.y2):(i=NaN,n=NaN),a.type&_.LINE_COMMANDS||a.type&_.ARC&&(0===a.rX||0===a.rY||!a.lArcFlag)||a.type&_.CURVE_TO||a.type&_.SMOOTH_CURVE_TO||a.type&_.QUAD_TO||a.type&_.SMOOTH_QUAD_TO){var O=void 0===a.x?0:a.relative?a.x:a.x-o,l=void 0===a.y?0:a.relative?a.y:a.y-s;p=isNaN(i)?void 0===a.x1?p:a.relative?a.x:a.x1-o:i-o,m=isNaN(n)?void 0===a.y1?m:a.relative?a.y:a.y1-s:n-s;var T=void 0===a.x2?0:a.relative?a.x:a.x2-o,v=void 0===a.y2?0:a.relative?a.y:a.y2-s;c(O)<=t&&c(l)<=t&&c(p)<=t&&c(m)<=t&&c(T)<=t&&c(v)<=t&&(y=!0)}return a.type&_.CLOSE_PATH&&c(o-u)<=t&&c(s-h)<=t&&(y=!0),y?[]:a}))},t.MATRIX=O,t.ROTATE=function(t,r,e){void 0===r&&(r=0),void 0===e&&(e=0),a(t,r,e);var i=Math.sin(t),n=Math.cos(t);return O(n,i,-i,n,r-r*n+e*i,e-r*i-e*n)},t.TRANSLATE=function(t,r){return void 0===r&&(r=0),a(t,r),O(1,0,0,1,t,r)},t.SCALE=function(t,r){return void 0===r&&(r=t),a(t,r),O(t,0,0,r,0,0)},t.SKEW_X=function(t){return a(t),O(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return a(t),O(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),a(t),O(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),a(t),O(1,0,0,-1,0,t)},t.A_TO_C=function(){return u((function(t,r,e){return _.ARC===t.type?function(t,r,e){var a,n,s,u;t.cX||o(t,r,e);for(var y=Math.min(t.phi1,t.phi2),p=Math.max(t.phi1,t.phi2)-y,m=Math.ceil(p/90),O=new Array(m),l=r,T=e,v=0;v<m;v++){var f=c(t.phi1,t.phi2,v/m),N=c(t.phi1,t.phi2,(v+1)/m),x=N-f,d=4/3*Math.tan(x*h/4),E=[Math.cos(f*h)-d*Math.sin(f*h),Math.sin(f*h)+d*Math.cos(f*h)],A=E[0],C=E[1],M=[Math.cos(N*h),Math.sin(N*h)],R=M[0],g=M[1],I=[R+d*Math.sin(N*h),g-d*Math.cos(N*h)],S=I[0],L=I[1];O[v]={relative:t.relative,type:_.CURVE_TO};var H=function(r,e){var a=i([r*t.rX,e*t.rY],t.xRot),n=a[0],o=a[1];return[t.cX+n,t.cY+o]};a=H(A,C),O[v].x1=a[0],O[v].y1=a[1],n=H(S,L),O[v].x2=n[0],O[v].y2=n[1],s=H(R,g),O[v].x=s[0],O[v].y=s[1],t.relative&&(O[v].x1-=l,O[v].y1-=T,O[v].x2-=l,O[v].y2-=T,O[v].x-=l,O[v].y-=T),l=(u=[O[v].x,O[v].y])[0],T=u[1]}return O}(t,t.relative?0:r,t.relative?0:e):t}))},t.ANNOTATE_ARCS=function(){return u((function(t,r,e){return t.relative&&(r=0,e=0),_.ARC===t.type&&o(t,r,e),t}))},t.CLONE=l,t.CALCULATE_BOUNDS=function(){var t=function(t){var r={};for(var e in t)r[e]=t[e];return r},i=r(),a=n(),h=e(),c=u((function(r,e,n){var u=h(a(i(t(r))));function O(t){t>c.maxX&&(c.maxX=t),t<c.minX&&(c.minX=t)}function l(t){t>c.maxY&&(c.maxY=t),t<c.minY&&(c.minY=t)}if(u.type&_.DRAWING_COMMANDS&&(O(e),l(n)),u.type&_.HORIZ_LINE_TO&&O(u.x),u.type&_.VERT_LINE_TO&&l(u.y),u.type&_.LINE_TO&&(O(u.x),l(u.y)),u.type&_.CURVE_TO){O(u.x),l(u.y);for(var T=0,v=p(e,u.x1,u.x2,u.x);T<v.length;T++){0<(w=v[T])&&1>w&&O(m(e,u.x1,u.x2,u.x,w))}for(var f=0,N=p(n,u.y1,u.y2,u.y);f<N.length;f++){0<(w=N[f])&&1>w&&l(m(n,u.y1,u.y2,u.y,w))}}if(u.type&_.ARC){O(u.x),l(u.y),o(u,e,n);for(var x=u.xRot/180*Math.PI,d=Math.cos(x)*u.rX,E=Math.sin(x)*u.rX,A=-Math.sin(x)*u.rY,C=Math.cos(x)*u.rY,M=u.phi1<u.phi2?[u.phi1,u.phi2]:-180>u.phi2?[u.phi2+360,u.phi1+360]:[u.phi2,u.phi1],R=M[0],g=M[1],I=function(t){var r=t[0],e=t[1],i=180*Math.atan2(e,r)/Math.PI;return i<R?i+360:i},S=0,L=s(A,-d,0).map(I);S<L.length;S++){(w=L[S])>R&&w<g&&O(y(u.cX,d,A,w))}for(var H=0,U=s(C,-E,0).map(I);H<U.length;H++){var w;(w=U[H])>R&&w<g&&l(y(u.cY,E,C,w))}}return r}));return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}}(u||(u={}));var O,l=function(){function t(){}return t.prototype.round=function(t){return this.transform(u.ROUND(t))},t.prototype.toAbs=function(){return this.transform(u.TO_ABS())},t.prototype.toRel=function(){return this.transform(u.TO_REL())},t.prototype.normalizeHVZ=function(t,r,e){return this.transform(u.NORMALIZE_HVZ(t,r,e))},t.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},t.prototype.aToC=function(){return this.transform(u.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(u.SANITIZE(t))},t.prototype.translate=function(t,r){return this.transform(u.TRANSLATE(t,r))},t.prototype.scale=function(t,r){return this.transform(u.SCALE(t,r))},t.prototype.rotate=function(t,r,e){return this.transform(u.ROTATE(t,r,e))},t.prototype.matrix=function(t,r,e,i,a,n){return this.transform(u.MATRIX(t,r,e,i,a,n))},t.prototype.skewX=function(t){return this.transform(u.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(u.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(u.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(u.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},t}(),T=function(t){return\" \"===t||\"\\t\"===t||\"\\r\"===t||\"\\n\"===t},v=function(t){return\"0\".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<=\"9\".charCodeAt(0)},f=function(t){function e(){var r=t.call(this)||this;return r.curNumber=\"\",r.curCommandType=-1,r.curCommandRelative=!1,r.canParseCommandOrComma=!0,r.curNumberHasExp=!1,r.curNumberHasExpDigits=!1,r.curNumberHasDecimal=!1,r.curArgs=[],r}return r(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(\" \",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError(\"Unterminated command at the path end.\");return t},e.prototype.parse=function(t,r){var e=this;void 0===r&&(r=[]);for(var i=function(t){r.push(t),e.curArgs.length=0,e.canParseCommandOrComma=!0},a=0;a<t.length;a++){var n=t[a],o=!(this.curCommandType!==_.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||\"0\"!==this.curNumber&&\"1\"!==this.curNumber),s=v(n)&&(\"0\"===this.curNumber&&\"0\"===n||o);if(!v(n)||s)if(\"e\"!==n&&\"E\"!==n)if(\"-\"!==n&&\"+\"!==n||!this.curNumberHasExp||this.curNumberHasExpDigits)if(\".\"!==n||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError(\"Invalid number ending at \"+a);if(this.curCommandType===_.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got \"'+u+'\" at index \"'+a+'\"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&\"0\"!==this.curNumber&&\"1\"!==this.curNumber)throw new SyntaxError('Expected a flag, got \"'+this.curNumber+'\" at index \"'+a+'\"');this.curArgs.push(u),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?i({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):_.VERT_LINE_TO===this.curCommandType?i({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?i({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?i({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?i({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&i({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber=\"\",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(n))if(\",\"===n&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(\"+\"!==n&&\"-\"!==n&&\".\"!==n)if(s)this.curNumber=n,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError(\"Unterminated command at index \"+a+\".\");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character \"'+n+'\" at index '+a+\". Command cannot follow comma\");if(this.canParseCommandOrComma=!1,\"z\"!==n&&\"Z\"!==n)if(\"h\"===n||\"H\"===n)this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=\"h\"===n;else if(\"v\"===n||\"V\"===n)this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=\"v\"===n;else if(\"m\"===n||\"M\"===n)this.curCommandType=_.MOVE_TO,this.curCommandRelative=\"m\"===n;else if(\"l\"===n||\"L\"===n)this.curCommandType=_.LINE_TO,this.curCommandRelative=\"l\"===n;else if(\"c\"===n||\"C\"===n)this.curCommandType=_.CURVE_TO,this.curCommandRelative=\"c\"===n;else if(\"s\"===n||\"S\"===n)this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=\"s\"===n;else if(\"q\"===n||\"Q\"===n)this.curCommandType=_.QUAD_TO,this.curCommandRelative=\"q\"===n;else if(\"t\"===n||\"T\"===n)this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=\"t\"===n;else{if(\"a\"!==n&&\"A\"!==n)throw new SyntaxError('Unexpected character \"'+n+'\" at index '+a+\".\");this.curCommandType=_.ARC,this.curCommandRelative=\"a\"===n}else r.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=n,this.curNumberHasDecimal=\".\"===n}else this.curNumber+=n,this.curNumberHasDecimal=!0;else this.curNumber+=n;else this.curNumber+=n,this.curNumberHasExp=!0;else this.curNumber+=n,this.curNumberHasExpDigits=this.curNumberHasExp}return r},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(r,e){void 0===e&&(e=[]);for(var i=0,a=Object.getPrototypeOf(this).parse.call(this,r);i<a.length;i++){var n=a[i],o=t(n);Array.isArray(o)?e.push.apply(e,o):e.push(o)}return e}}})},e}(l),_=function(t){function i(r){var e=t.call(this)||this;return e.commands=\"string\"==typeof r?i.parse(r):r,e}return r(i,t),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var t=u.CALCULATE_BOUNDS();return this.transform(t),t},i.prototype.transform=function(t){for(var r=[],e=0,i=this.commands;e<i.length;e++){var a=t(i[e]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return this.commands=r,this},i.encode=function(t){return e(t)},i.parse=function(t){var r=new f,e=[];return r.parse(t,e),r.finish(e),e},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O);export{N as COMMAND_ARG_COUNTS,_ as SVGPathData,f as SVGPathDataParser,u as SVGPathDataTransformer,e as encodeSVGPath};\n//# sourceMappingURL=SVGPathData.module.js.map\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/* eslint-disable no-bitwise -- used for calculations */\n\n/* eslint-disable unicorn/prefer-query-selector -- aiming at\n  backward-compatibility */\n\n/**\n* StackBlur - a fast almost Gaussian Blur For Canvas\n*\n* In case you find this class useful - especially in commercial projects -\n* I am not totally unhappy for a small donation to my PayPal account\n* mario@quasimondo.de\n*\n* Or support me on flattr:\n* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.\n*\n* @module StackBlur\n* @author Mario Klingemann\n* Contact: mario@quasimondo.com\n* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}\n* Twitter: @quasimondo\n*\n* @copyright (c) 2010 Mario Klingemann\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\nvar mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n/**\n * @param {string|HTMLImageElement} img\n * @param {string|HTMLCanvasElement} canvas\n * @param {Float} radius\n * @param {boolean} blurAlphaChannel\n * @param {boolean} useOffset\n * @param {boolean} skipStyles\n * @returns {undefined}\n */\n\nfunction processImage(img, canvas, radius, blurAlphaChannel, useOffset, skipStyles) {\n  if (typeof img === 'string') {\n    img = document.getElementById(img);\n  }\n\n  if (!img || Object.prototype.toString.call(img).slice(8, -1) === 'HTMLImageElement' && !('naturalWidth' in img)) {\n    return;\n  }\n\n  var dimensionType = useOffset ? 'offset' : 'natural';\n  var w = img[dimensionType + 'Width'];\n  var h = img[dimensionType + 'Height']; // add ImageBitmap support,can blur texture source\n\n  if (Object.prototype.toString.call(img).slice(8, -1) === 'ImageBitmap') {\n    w = img.width;\n    h = img.height;\n  }\n\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || !('getContext' in canvas)) {\n    return;\n  }\n\n  if (!skipStyles) {\n    canvas.style.width = w + 'px';\n    canvas.style.height = h + 'px';\n  }\n\n  canvas.width = w;\n  canvas.height = h;\n  var context = canvas.getContext('2d');\n  context.clearRect(0, 0, w, h);\n  context.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, w, h);\n\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  if (blurAlphaChannel) {\n    processCanvasRGBA(canvas, 0, 0, w, h, radius);\n  } else {\n    processCanvasRGB(canvas, 0, 0, w, h, radius);\n  }\n}\n/**\n * @param {string|HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @throws {Error|TypeError}\n * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}\n */\n\n\nfunction getImageDataFromCanvas(canvas, topX, topY, width, height) {\n  if (typeof canvas === 'string') {\n    canvas = document.getElementById(canvas);\n  }\n\n  if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) {\n    throw new TypeError('Expecting canvas with `getContext` method ' + 'in processCanvasRGB(A) calls!');\n  }\n\n  var context = canvas.getContext('2d');\n\n  try {\n    return context.getImageData(topX, topY, width, height);\n  } catch (e) {\n    throw new Error('unable to access image data: ' + e);\n  }\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGBA(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGBA(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null,\n      stackOut = null,\n      yw = 0,\n      yi = 0;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n\n  for (var y = 0; y < height; y++) {\n    stack = stackStart;\n    var pr = pixels[yi],\n        pg = pixels[yi + 1],\n        pb = pixels[yi + 2],\n        pa = pixels[yi + 3];\n\n    for (var _i = 0; _i < radiusPlus1; _i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    var rInSum = 0,\n        gInSum = 0,\n        bInSum = 0,\n        aInSum = 0,\n        rOutSum = radiusPlus1 * pr,\n        gOutSum = radiusPlus1 * pg,\n        bOutSum = radiusPlus1 * pb,\n        aOutSum = radiusPlus1 * pa,\n        rSum = sumFactor * pr,\n        gSum = sumFactor * pg,\n        bSum = sumFactor * pb,\n        aSum = sumFactor * pa;\n\n    for (var _i2 = 1; _i2 < radiusPlus1; _i2++) {\n      var p = yi + ((widthMinus1 < _i2 ? widthMinus1 : _i2) << 2);\n      var r = pixels[p],\n          g = pixels[p + 1],\n          b = pixels[p + 2],\n          a = pixels[p + 3];\n      var rbs = radiusPlus1 - _i2;\n      rSum += (stack.r = r) * rbs;\n      gSum += (stack.g = g) * rbs;\n      bSum += (stack.b = b) * rbs;\n      aSum += (stack.a = a) * rbs;\n      rInSum += r;\n      gInSum += g;\n      bInSum += b;\n      aInSum += a;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var x = 0; x < width; x++) {\n      var paInitial = aSum * mulSum >>> shgSum;\n      pixels[yi + 3] = paInitial;\n\n      if (paInitial !== 0) {\n        var _a2 = 255 / paInitial;\n\n        pixels[yi] = (rSum * mulSum >>> shgSum) * _a2;\n        pixels[yi + 1] = (gSum * mulSum >>> shgSum) * _a2;\n        pixels[yi + 2] = (bSum * mulSum >>> shgSum) * _a2;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      aSum -= aOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      aOutSum -= stackIn.a;\n\n      var _p = x + radius + 1;\n\n      _p = yw + (_p < widthMinus1 ? _p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[_p];\n      gInSum += stackIn.g = pixels[_p + 1];\n      bInSum += stackIn.b = pixels[_p + 2];\n      aInSum += stackIn.a = pixels[_p + 3];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      aSum += aInSum;\n      stackIn = stackIn.next;\n      var _stackOut = stackOut,\n          _r = _stackOut.r,\n          _g = _stackOut.g,\n          _b = _stackOut.b,\n          _a = _stackOut.a;\n      rOutSum += _r;\n      gOutSum += _g;\n      bOutSum += _b;\n      aOutSum += _a;\n      rInSum -= _r;\n      gInSum -= _g;\n      bInSum -= _b;\n      aInSum -= _a;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (var _x = 0; _x < width; _x++) {\n    yi = _x << 2;\n\n    var _pr = pixels[yi],\n        _pg = pixels[yi + 1],\n        _pb = pixels[yi + 2],\n        _pa = pixels[yi + 3],\n        _rOutSum = radiusPlus1 * _pr,\n        _gOutSum = radiusPlus1 * _pg,\n        _bOutSum = radiusPlus1 * _pb,\n        _aOutSum = radiusPlus1 * _pa,\n        _rSum = sumFactor * _pr,\n        _gSum = sumFactor * _pg,\n        _bSum = sumFactor * _pb,\n        _aSum = sumFactor * _pa;\n\n    stack = stackStart;\n\n    for (var _i3 = 0; _i3 < radiusPlus1; _i3++) {\n      stack.r = _pr;\n      stack.g = _pg;\n      stack.b = _pb;\n      stack.a = _pa;\n      stack = stack.next;\n    }\n\n    var yp = width;\n    var _gInSum = 0,\n        _bInSum = 0,\n        _aInSum = 0,\n        _rInSum = 0;\n\n    for (var _i4 = 1; _i4 <= radius; _i4++) {\n      yi = yp + _x << 2;\n\n      var _rbs = radiusPlus1 - _i4;\n\n      _rSum += (stack.r = _pr = pixels[yi]) * _rbs;\n      _gSum += (stack.g = _pg = pixels[yi + 1]) * _rbs;\n      _bSum += (stack.b = _pb = pixels[yi + 2]) * _rbs;\n      _aSum += (stack.a = _pa = pixels[yi + 3]) * _rbs;\n      _rInSum += _pr;\n      _gInSum += _pg;\n      _bInSum += _pb;\n      _aInSum += _pa;\n      stack = stack.next;\n\n      if (_i4 < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = _x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var _y = 0; _y < height; _y++) {\n      var _p2 = yi << 2;\n\n      pixels[_p2 + 3] = _pa = _aSum * mulSum >>> shgSum;\n\n      if (_pa > 0) {\n        _pa = 255 / _pa;\n        pixels[_p2] = (_rSum * mulSum >>> shgSum) * _pa;\n        pixels[_p2 + 1] = (_gSum * mulSum >>> shgSum) * _pa;\n        pixels[_p2 + 2] = (_bSum * mulSum >>> shgSum) * _pa;\n      } else {\n        pixels[_p2] = pixels[_p2 + 1] = pixels[_p2 + 2] = 0;\n      }\n\n      _rSum -= _rOutSum;\n      _gSum -= _gOutSum;\n      _bSum -= _bOutSum;\n      _aSum -= _aOutSum;\n      _rOutSum -= stackIn.r;\n      _gOutSum -= stackIn.g;\n      _bOutSum -= stackIn.b;\n      _aOutSum -= stackIn.a;\n      _p2 = _x + ((_p2 = _y + radiusPlus1) < heightMinus1 ? _p2 : heightMinus1) * width << 2;\n      _rSum += _rInSum += stackIn.r = pixels[_p2];\n      _gSum += _gInSum += stackIn.g = pixels[_p2 + 1];\n      _bSum += _bInSum += stackIn.b = pixels[_p2 + 2];\n      _aSum += _aInSum += stackIn.a = pixels[_p2 + 3];\n      stackIn = stackIn.next;\n      _rOutSum += _pr = stackOut.r;\n      _gOutSum += _pg = stackOut.g;\n      _bOutSum += _pb = stackOut.b;\n      _aOutSum += _pa = stackOut.a;\n      _rInSum -= _pr;\n      _gInSum -= _pg;\n      _bInSum -= _pb;\n      _aInSum -= _pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {undefined}\n */\n\n\nfunction processCanvasRGB(canvas, topX, topY, width, height, radius) {\n  if (isNaN(radius) || radius < 1) {\n    return;\n  }\n\n  radius |= 0;\n  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);\n  imageData = processImageDataRGB(imageData, topX, topY, width, height, radius);\n  canvas.getContext('2d').putImageData(imageData, topX, topY);\n}\n/**\n * @param {ImageData} imageData\n * @param {Integer} topX\n * @param {Integer} topY\n * @param {Integer} width\n * @param {Integer} height\n * @param {Float} radius\n * @returns {ImageData}\n */\n\n\nfunction processImageDataRGB(imageData, topX, topY, width, height, radius) {\n  var pixels = imageData.data;\n  var div = 2 * radius + 1; // const w4 = width << 2;\n\n  var widthMinus1 = width - 1;\n  var heightMinus1 = height - 1;\n  var radiusPlus1 = radius + 1;\n  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n  var stackStart = new BlurStack();\n  var stack = stackStart;\n  var stackEnd;\n\n  for (var i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  var stackIn = null;\n  var stackOut = null;\n  var mulSum = mulTable[radius];\n  var shgSum = shgTable[radius];\n  var p, rbs;\n  var yw = 0,\n      yi = 0;\n\n  for (var y = 0; y < height; y++) {\n    var pr = pixels[yi],\n        pg = pixels[yi + 1],\n        pb = pixels[yi + 2],\n        rOutSum = radiusPlus1 * pr,\n        gOutSum = radiusPlus1 * pg,\n        bOutSum = radiusPlus1 * pb,\n        rSum = sumFactor * pr,\n        gSum = sumFactor * pg,\n        bSum = sumFactor * pb;\n    stack = stackStart;\n\n    for (var _i5 = 0; _i5 < radiusPlus1; _i5++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack = stack.next;\n    }\n\n    var rInSum = 0,\n        gInSum = 0,\n        bInSum = 0;\n\n    for (var _i6 = 1; _i6 < radiusPlus1; _i6++) {\n      p = yi + ((widthMinus1 < _i6 ? widthMinus1 : _i6) << 2);\n      rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - _i6);\n      gSum += (stack.g = pg = pixels[p + 1]) * rbs;\n      bSum += (stack.b = pb = pixels[p + 2]) * rbs;\n      rInSum += pr;\n      gInSum += pg;\n      bInSum += pb;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var x = 0; x < width; x++) {\n      pixels[yi] = rSum * mulSum >>> shgSum;\n      pixels[yi + 1] = gSum * mulSum >>> shgSum;\n      pixels[yi + 2] = bSum * mulSum >>> shgSum;\n      rSum -= rOutSum;\n      gSum -= gOutSum;\n      bSum -= bOutSum;\n      rOutSum -= stackIn.r;\n      gOutSum -= stackIn.g;\n      bOutSum -= stackIn.b;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      rInSum += stackIn.r = pixels[p];\n      gInSum += stackIn.g = pixels[p + 1];\n      bInSum += stackIn.b = pixels[p + 2];\n      rSum += rInSum;\n      gSum += gInSum;\n      bSum += bInSum;\n      stackIn = stackIn.next;\n      rOutSum += pr = stackOut.r;\n      gOutSum += pg = stackOut.g;\n      bOutSum += pb = stackOut.b;\n      rInSum -= pr;\n      gInSum -= pg;\n      bInSum -= pb;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (var _x2 = 0; _x2 < width; _x2++) {\n    yi = _x2 << 2;\n\n    var _pr2 = pixels[yi],\n        _pg2 = pixels[yi + 1],\n        _pb2 = pixels[yi + 2],\n        _rOutSum2 = radiusPlus1 * _pr2,\n        _gOutSum2 = radiusPlus1 * _pg2,\n        _bOutSum2 = radiusPlus1 * _pb2,\n        _rSum2 = sumFactor * _pr2,\n        _gSum2 = sumFactor * _pg2,\n        _bSum2 = sumFactor * _pb2;\n\n    stack = stackStart;\n\n    for (var _i7 = 0; _i7 < radiusPlus1; _i7++) {\n      stack.r = _pr2;\n      stack.g = _pg2;\n      stack.b = _pb2;\n      stack = stack.next;\n    }\n\n    var _rInSum2 = 0,\n        _gInSum2 = 0,\n        _bInSum2 = 0;\n\n    for (var _i8 = 1, yp = width; _i8 <= radius; _i8++) {\n      yi = yp + _x2 << 2;\n      _rSum2 += (stack.r = _pr2 = pixels[yi]) * (rbs = radiusPlus1 - _i8);\n      _gSum2 += (stack.g = _pg2 = pixels[yi + 1]) * rbs;\n      _bSum2 += (stack.b = _pb2 = pixels[yi + 2]) * rbs;\n      _rInSum2 += _pr2;\n      _gInSum2 += _pg2;\n      _bInSum2 += _pb2;\n      stack = stack.next;\n\n      if (_i8 < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = _x2;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (var _y2 = 0; _y2 < height; _y2++) {\n      p = yi << 2;\n      pixels[p] = _rSum2 * mulSum >>> shgSum;\n      pixels[p + 1] = _gSum2 * mulSum >>> shgSum;\n      pixels[p + 2] = _bSum2 * mulSum >>> shgSum;\n      _rSum2 -= _rOutSum2;\n      _gSum2 -= _gOutSum2;\n      _bSum2 -= _bOutSum2;\n      _rOutSum2 -= stackIn.r;\n      _gOutSum2 -= stackIn.g;\n      _bOutSum2 -= stackIn.b;\n      p = _x2 + ((p = _y2 + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      _rSum2 += _rInSum2 += stackIn.r = pixels[p];\n      _gSum2 += _gInSum2 += stackIn.g = pixels[p + 1];\n      _bSum2 += _bInSum2 += stackIn.b = pixels[p + 2];\n      stackIn = stackIn.next;\n      _rOutSum2 += _pr2 = stackOut.r;\n      _gOutSum2 += _pg2 = stackOut.g;\n      _bOutSum2 += _pb2 = stackOut.b;\n      _rInSum2 -= _pr2;\n      _gInSum2 -= _pg2;\n      _bInSum2 -= _pb2;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n\n  return imageData;\n}\n/**\n *\n */\n\n\nvar BlurStack =\n/**\n * Set properties.\n */\nfunction BlurStack() {\n  _classCallCheck(this, BlurStack);\n\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n};\n\nexport { BlurStack, processCanvasRGB as canvasRGB, processCanvasRGBA as canvasRGBA, processImage as image, processImageDataRGB as imageDataRGB, processImageDataRGBA as imageDataRGBA };\n","import requestAnimationFrame from 'raf';\nimport RGBColor from 'rgbcolor';\nimport { SVGPathData } from 'svg-pathdata';\nimport { canvasRGBA } from 'stackblur-canvas';\n\n/**\n * Options preset for `OffscreenCanvas`.\n * @param config - Preset requirements.\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\n * @returns Preset object.\n */ function offscreen() {\n    let { DOMParser: DOMParserFallback  } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    const preset = {\n        window: null,\n        ignoreAnimation: true,\n        ignoreMouse: true,\n        DOMParser: DOMParserFallback,\n        createCanvas (width, height) {\n            return new OffscreenCanvas(width, height);\n        },\n        async createImage (url) {\n            const response = await fetch(url);\n            const blob = await response.blob();\n            const img = await createImageBitmap(blob);\n            return img;\n        }\n    };\n    if (typeof globalThis.DOMParser !== 'undefined' || typeof DOMParserFallback === 'undefined') {\n        Reflect.deleteProperty(preset, 'DOMParser');\n    }\n    return preset;\n}\n\n/**\n * Options preset for `node-canvas`.\n * @param config - Preset requirements.\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\n * @param config.canvas - `node-canvas` exports.\n * @param config.fetch - WHATWG-compatible `fetch` function.\n * @returns Preset object.\n */ function node(param) {\n    let { DOMParser , canvas , fetch  } = param;\n    return {\n        window: null,\n        ignoreAnimation: true,\n        ignoreMouse: true,\n        DOMParser,\n        fetch,\n        createCanvas: canvas.createCanvas,\n        createImage: canvas.loadImage\n    };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  offscreen: offscreen,\n  node: node\n});\n\n/**\n * HTML-safe compress white-spaces.\n * @param str - String to compress.\n * @returns String.\n */ function compressSpaces(str) {\n    return str.replace(/(?!\\u3000)\\s+/gm, ' ');\n}\n/**\n * HTML-safe left trim.\n * @param str - String to trim.\n * @returns String.\n */ function trimLeft(str) {\n    return str.replace(/^[\\n \\t]+/, '');\n}\n/**\n * HTML-safe right trim.\n * @param str - String to trim.\n * @returns String.\n */ function trimRight(str) {\n    return str.replace(/[\\n \\t]+$/, '');\n}\n/**\n * String to numbers array.\n * @param str - Numbers string.\n * @returns Numbers array.\n */ function toNumbers(str) {\n    const matches = str.match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm);\n    return matches ? matches.map(parseFloat) : [];\n}\n/**\n * String to matrix value.\n * @param str - Numbers string.\n * @returns Matrix value.\n */ function toMatrixValue(str) {\n    const numbers = toNumbers(str);\n    const matrix = [\n        numbers[0] || 0,\n        numbers[1] || 0,\n        numbers[2] || 0,\n        numbers[3] || 0,\n        numbers[4] || 0,\n        numbers[5] || 0\n    ];\n    return matrix;\n}\n// Microsoft Edge fix\nconst allUppercase = /^[A-Z-]+$/;\n/**\n * Normalize attribute name.\n * @param name - Attribute name.\n * @returns Normalized attribute name.\n */ function normalizeAttributeName(name) {\n    if (allUppercase.test(name)) {\n        return name.toLowerCase();\n    }\n    return name;\n}\n/**\n * Parse external URL.\n * @param url - CSS url string.\n * @returns Parsed URL.\n */ function parseExternalUrl(url) {\n    //                      single quotes [2]\n    //                      v         double quotes [3]\n    //                      v         v         no quotes [4]\n    //                      v         v         v\n    const urlMatch = /url\\(('([^']+)'|\"([^\"]+)\"|([^'\")]+))\\)/.exec(url);\n    if (!urlMatch) {\n        return '';\n    }\n    return urlMatch[2] || urlMatch[3] || urlMatch[4] || '';\n}\n/**\n * Transform floats to integers in rgb colors.\n * @param color - Color to normalize.\n * @returns Normalized color.\n */ function normalizeColor(color) {\n    if (!color.startsWith('rgb')) {\n        return color;\n    }\n    let rgbParts = 3;\n    const normalizedColor = color.replace(/\\d+(\\.\\d+)?/g, (num, isFloat)=>(rgbParts--) && isFloat ? String(Math.round(parseFloat(num))) : num\n    );\n    return normalizedColor;\n}\n\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nconst attributeRegex = /(\\[[^\\]]+\\])/g;\nconst idRegex = /(#[^\\s+>~.[:]+)/g;\nconst classRegex = /(\\.[^\\s+>~.[:]+)/g;\nconst pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi;\nconst pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi;\nconst pseudoClassRegex = /(:[^\\s+>~.[:]+)/g;\nconst elementRegex = /([^\\s+>~.[:]+)/g;\nfunction findSelectorMatch(selector, regex) {\n    const matches = regex.exec(selector);\n    if (!matches) {\n        return [\n            selector,\n            0\n        ];\n    }\n    return [\n        selector.replace(regex, ' '),\n        matches.length\n    ];\n}\n/**\n * Measure selector specificity.\n * @param selector - Selector to measure.\n * @returns Specificity.\n */ function getSelectorSpecificity(selector) {\n    const specificity = [\n        0,\n        0,\n        0\n    ];\n    let currentSelector = selector.replace(/:not\\(([^)]*)\\)/g, '     $1 ').replace(/{[\\s\\S]*/gm, ' ');\n    let delta = 0;\n    [currentSelector, delta] = findSelectorMatch(currentSelector, attributeRegex);\n    specificity[1] += delta;\n    [currentSelector, delta] = findSelectorMatch(currentSelector, idRegex);\n    specificity[0] += delta;\n    [currentSelector, delta] = findSelectorMatch(currentSelector, classRegex);\n    specificity[1] += delta;\n    [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoElementRegex);\n    specificity[2] += delta;\n    [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);\n    specificity[1] += delta;\n    [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassRegex);\n    specificity[1] += delta;\n    currentSelector = currentSelector.replace(/[*\\s+>~]/g, ' ').replace(/[#.]/g, ' ');\n    [currentSelector, delta] = findSelectorMatch(currentSelector, elementRegex) // lgtm [js/useless-assignment-to-local]\n    ;\n    specificity[2] += delta;\n    return specificity.join('');\n}\n\nconst PSEUDO_ZERO = 0.00000001;\n/**\n * Vector magnitude.\n * @param v\n * @returns Number result.\n */ function vectorMagnitude(v) {\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n/**\n * Ratio between two vectors.\n * @param u\n * @param v\n * @returns Number result.\n */ function vectorsRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v));\n}\n/**\n * Angle between two vectors.\n * @param u\n * @param v\n * @returns Number result.\n */ function vectorsAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v));\n}\nfunction CB1(t) {\n    return t * t * t;\n}\nfunction CB2(t) {\n    return 3 * t * t * (1 - t);\n}\nfunction CB3(t) {\n    return 3 * t * (1 - t) * (1 - t);\n}\nfunction CB4(t) {\n    return (1 - t) * (1 - t) * (1 - t);\n}\nfunction QB1(t) {\n    return t * t;\n}\nfunction QB2(t) {\n    return 2 * t * (1 - t);\n}\nfunction QB3(t) {\n    return (1 - t) * (1 - t);\n}\n\nclass Property {\n    static empty(document) {\n        return new Property(document, 'EMPTY', '');\n    }\n    split() {\n        let separator = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ' ';\n        const { document , name  } = this;\n        return compressSpaces(this.getString()).trim().split(separator).map((value)=>new Property(document, name, value)\n        );\n    }\n    hasValue(zeroIsValue) {\n        const value = this.value;\n        return value !== null && value !== '' && (zeroIsValue || value !== 0) && typeof value !== 'undefined';\n    }\n    isString(regexp) {\n        const { value  } = this;\n        const result = typeof value === 'string';\n        if (!result || !regexp) {\n            return result;\n        }\n        return regexp.test(value);\n    }\n    isUrlDefinition() {\n        return this.isString(/^url\\(/);\n    }\n    isPixels() {\n        if (!this.hasValue()) {\n            return false;\n        }\n        const asString = this.getString();\n        switch(true){\n            case asString.endsWith('px'):\n            case /^[0-9]+$/.test(asString):\n                return true;\n            default:\n                return false;\n        }\n    }\n    setValue(value) {\n        this.value = value;\n        return this;\n    }\n    getValue(def) {\n        if (typeof def === 'undefined' || this.hasValue()) {\n            return this.value;\n        }\n        return def;\n    }\n    getNumber(def) {\n        if (!this.hasValue()) {\n            if (typeof def === 'undefined') {\n                return 0;\n            }\n            // @ts-expect-error Parse unknown value.\n            return parseFloat(def);\n        }\n        const { value  } = this;\n        // @ts-expect-error Parse unknown value.\n        let n = parseFloat(value);\n        if (this.isString(/%$/)) {\n            n /= 100;\n        }\n        return n;\n    }\n    getString(def) {\n        if (typeof def === 'undefined' || this.hasValue()) {\n            return typeof this.value === 'undefined' ? '' : String(this.value);\n        }\n        return String(def);\n    }\n    getColor(def) {\n        let color = this.getString(def);\n        if (this.isNormalizedColor) {\n            return color;\n        }\n        this.isNormalizedColor = true;\n        color = normalizeColor(color);\n        this.value = color;\n        return color;\n    }\n    getDpi() {\n        return 96 // TODO: compute?\n        ;\n    }\n    getRem() {\n        return this.document.rootEmSize;\n    }\n    getEm() {\n        return this.document.emSize;\n    }\n    getUnits() {\n        return this.getString().replace(/[0-9.-]/g, '');\n    }\n    getPixels(axisOrIsFontSize) {\n        let processPercent = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        if (!this.hasValue()) {\n            return 0;\n        }\n        const [axis, isFontSize] = typeof axisOrIsFontSize === 'boolean' ? [\n            undefined,\n            axisOrIsFontSize\n        ] : [\n            axisOrIsFontSize\n        ];\n        const { viewPort  } = this.document.screen;\n        switch(true){\n            case this.isString(/vmin$/):\n                return this.getNumber() / 100 * Math.min(viewPort.computeSize('x'), viewPort.computeSize('y'));\n            case this.isString(/vmax$/):\n                return this.getNumber() / 100 * Math.max(viewPort.computeSize('x'), viewPort.computeSize('y'));\n            case this.isString(/vw$/):\n                return this.getNumber() / 100 * viewPort.computeSize('x');\n            case this.isString(/vh$/):\n                return this.getNumber() / 100 * viewPort.computeSize('y');\n            case this.isString(/rem$/):\n                return this.getNumber() * this.getRem();\n            case this.isString(/em$/):\n                return this.getNumber() * this.getEm();\n            case this.isString(/ex$/):\n                return this.getNumber() * this.getEm() / 2;\n            case this.isString(/px$/):\n                return this.getNumber();\n            case this.isString(/pt$/):\n                return this.getNumber() * this.getDpi() * (1 / 72);\n            case this.isString(/pc$/):\n                return this.getNumber() * 15;\n            case this.isString(/cm$/):\n                return this.getNumber() * this.getDpi() / 2.54;\n            case this.isString(/mm$/):\n                return this.getNumber() * this.getDpi() / 25.4;\n            case this.isString(/in$/):\n                return this.getNumber() * this.getDpi();\n            case this.isString(/%$/) && isFontSize:\n                return this.getNumber() * this.getEm();\n            case this.isString(/%$/):\n                return this.getNumber() * viewPort.computeSize(axis);\n            default:\n                {\n                    const n = this.getNumber();\n                    if (processPercent && n < 1) {\n                        return n * viewPort.computeSize(axis);\n                    }\n                    return n;\n                }\n        }\n    }\n    getMilliseconds() {\n        if (!this.hasValue()) {\n            return 0;\n        }\n        if (this.isString(/ms$/)) {\n            return this.getNumber();\n        }\n        return this.getNumber() * 1000;\n    }\n    getRadians() {\n        if (!this.hasValue()) {\n            return 0;\n        }\n        switch(true){\n            case this.isString(/deg$/):\n                return this.getNumber() * (Math.PI / 180);\n            case this.isString(/grad$/):\n                return this.getNumber() * (Math.PI / 200);\n            case this.isString(/rad$/):\n                return this.getNumber();\n            default:\n                return this.getNumber() * (Math.PI / 180);\n        }\n    }\n    getDefinition() {\n        const asString = this.getString();\n        const match = /#([^)'\"]+)/.exec(asString);\n        const name = (match === null || match === void 0 ? void 0 : match[1]) || asString;\n        return this.document.definitions.get(name);\n    }\n    getFillStyleDefinition(element, opacity) {\n        let def = this.getDefinition();\n        if (!def) {\n            return null;\n        }\n        // gradient\n        if (typeof def.createGradient === 'function' && 'getBoundingBox' in element) {\n            return def.createGradient(this.document.ctx, element, opacity);\n        }\n        // pattern\n        if (typeof def.createPattern === 'function') {\n            if (def.getHrefAttribute().hasValue()) {\n                const patternTransform = def.getAttribute('patternTransform');\n                def = def.getHrefAttribute().getDefinition();\n                if (def && patternTransform.hasValue()) {\n                    def.getAttribute('patternTransform', true).setValue(patternTransform.value);\n                }\n            }\n            if (def) {\n                return def.createPattern(this.document.ctx, element, opacity);\n            }\n        }\n        return null;\n    }\n    getTextBaseline() {\n        if (!this.hasValue()) {\n            return null;\n        }\n        const key = this.getString();\n        return Property.textBaselineMapping[key] || null;\n    }\n    addOpacity(opacity) {\n        let value = this.getColor();\n        const len = value.length;\n        let commas = 0;\n        // Simulate old RGBColor version, which can't parse rgba.\n        for(let i = 0; i < len; i++){\n            if (value[i] === ',') {\n                commas++;\n            }\n            if (commas === 3) {\n                break;\n            }\n        }\n        if (opacity.hasValue() && this.isString() && commas !== 3) {\n            const color = new RGBColor(value);\n            if (color.ok) {\n                color.alpha = opacity.getNumber();\n                value = color.toRGBA();\n            }\n        }\n        return new Property(this.document, this.name, value);\n    }\n    constructor(document, name, value){\n        this.document = document;\n        this.name = name;\n        this.value = value;\n        this.isNormalizedColor = false;\n    }\n}\nProperty.textBaselineMapping = {\n    'baseline': 'alphabetic',\n    'before-edge': 'top',\n    'text-before-edge': 'top',\n    'middle': 'middle',\n    'central': 'middle',\n    'after-edge': 'bottom',\n    'text-after-edge': 'bottom',\n    'ideographic': 'ideographic',\n    'alphabetic': 'alphabetic',\n    'hanging': 'hanging',\n    'mathematical': 'alphabetic'\n};\n\nclass ViewPort {\n    clear() {\n        this.viewPorts = [];\n    }\n    setCurrent(width, height) {\n        this.viewPorts.push({\n            width,\n            height\n        });\n    }\n    removeCurrent() {\n        this.viewPorts.pop();\n    }\n    getRoot() {\n        const [root] = this.viewPorts;\n        if (!root) {\n            return getDefault();\n        }\n        return root;\n    }\n    getCurrent() {\n        const { viewPorts  } = this;\n        const current = viewPorts[viewPorts.length - 1];\n        if (!current) {\n            return getDefault();\n        }\n        return current;\n    }\n    get width() {\n        return this.getCurrent().width;\n    }\n    get height() {\n        return this.getCurrent().height;\n    }\n    computeSize(d) {\n        if (typeof d === 'number') {\n            return d;\n        }\n        if (d === 'x') {\n            return this.width;\n        }\n        if (d === 'y') {\n            return this.height;\n        }\n        return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);\n    }\n    constructor(){\n        this.viewPorts = [];\n    }\n}\nViewPort.DEFAULT_VIEWPORT_WIDTH = 800;\nViewPort.DEFAULT_VIEWPORT_HEIGHT = 600;\nfunction getDefault() {\n    return {\n        width: ViewPort.DEFAULT_VIEWPORT_WIDTH,\n        height: ViewPort.DEFAULT_VIEWPORT_HEIGHT\n    };\n}\n\nclass Point {\n    static parse(point) {\n        let defaultValue = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;\n        const [x = defaultValue, y = defaultValue] = toNumbers(point);\n        return new Point(x, y);\n    }\n    static parseScale(scale) {\n        let defaultValue = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;\n        const [x = defaultValue, y = x] = toNumbers(scale);\n        return new Point(x, y);\n    }\n    static parsePath(path) {\n        const points = toNumbers(path);\n        const len = points.length;\n        const pathPoints = [];\n        for(let i = 0; i < len; i += 2){\n            pathPoints.push(new Point(points[i], points[i + 1]));\n        }\n        return pathPoints;\n    }\n    angleTo(point) {\n        return Math.atan2(point.y - this.y, point.x - this.x);\n    }\n    applyTransform(transform) {\n        const { x , y  } = this;\n        const xp = x * transform[0] + y * transform[2] + transform[4];\n        const yp = x * transform[1] + y * transform[3] + transform[5];\n        this.x = xp;\n        this.y = yp;\n    }\n    constructor(x, y){\n        this.x = x;\n        this.y = y;\n    }\n}\n\nclass Mouse {\n    isWorking() {\n        return this.working;\n    }\n    start() {\n        if (this.working) {\n            return;\n        }\n        const { screen , onClick , onMouseMove  } = this;\n        const canvas = screen.ctx.canvas;\n        canvas.onclick = onClick;\n        canvas.onmousemove = onMouseMove;\n        this.working = true;\n    }\n    stop() {\n        if (!this.working) {\n            return;\n        }\n        const canvas = this.screen.ctx.canvas;\n        this.working = false;\n        canvas.onclick = null;\n        canvas.onmousemove = null;\n    }\n    hasEvents() {\n        return this.working && this.events.length > 0;\n    }\n    runEvents() {\n        if (!this.working) {\n            return;\n        }\n        const { screen: document , events , eventElements  } = this;\n        const { style  } = document.ctx.canvas;\n        let element;\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (style) {\n            style.cursor = '';\n        }\n        events.forEach((param, i)=>{\n            let { run  } = param;\n            element = eventElements[i];\n            while(element){\n                run(element);\n                element = element.parent;\n            }\n        });\n        // done running, clear\n        this.events = [];\n        this.eventElements = [];\n    }\n    checkPath(element, ctx) {\n        if (!this.working || !ctx) {\n            return;\n        }\n        const { events , eventElements  } = this;\n        events.forEach((param, i)=>{\n            let { x , y  } = param;\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n                eventElements[i] = element;\n            }\n        });\n    }\n    checkBoundingBox(element, boundingBox) {\n        if (!this.working || !boundingBox) {\n            return;\n        }\n        const { events , eventElements  } = this;\n        events.forEach((param, i)=>{\n            let { x , y  } = param;\n            if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n                eventElements[i] = element;\n            }\n        });\n    }\n    mapXY(x, y) {\n        const { window , ctx  } = this.screen;\n        const point = new Point(x, y);\n        let element = ctx.canvas;\n        while(element){\n            point.x -= element.offsetLeft;\n            point.y -= element.offsetTop;\n            element = element.offsetParent;\n        }\n        if (window === null || window === void 0 ? void 0 : window.scrollX) {\n            point.x += window.scrollX;\n        }\n        if (window === null || window === void 0 ? void 0 : window.scrollY) {\n            point.y += window.scrollY;\n        }\n        return point;\n    }\n    onClick(event) {\n        const { x , y  } = this.mapXY(event.clientX, event.clientY);\n        this.events.push({\n            type: 'onclick',\n            x,\n            y,\n            run (eventTarget) {\n                if (eventTarget.onClick) {\n                    eventTarget.onClick();\n                }\n            }\n        });\n    }\n    onMouseMove(event) {\n        const { x , y  } = this.mapXY(event.clientX, event.clientY);\n        this.events.push({\n            type: 'onmousemove',\n            x,\n            y,\n            run (eventTarget) {\n                if (eventTarget.onMouseMove) {\n                    eventTarget.onMouseMove();\n                }\n            }\n        });\n    }\n    constructor(screen){\n        this.screen = screen;\n        this.working = false;\n        this.events = [];\n        this.eventElements = [];\n        this.onClick = this.onClick.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n    }\n}\n\nconst defaultWindow = typeof window !== 'undefined' ? window : null;\nconst defaultFetch$1 = typeof fetch !== 'undefined' ? fetch.bind(undefined) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n : undefined;\nclass Screen {\n    wait(checker) {\n        this.waits.push(checker);\n    }\n    ready() {\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        if (!this.readyPromise) {\n            return Promise.resolve();\n        }\n        return this.readyPromise;\n    }\n    isReady() {\n        if (this.isReadyLock) {\n            return true;\n        }\n        const isReadyLock = this.waits.every((_)=>_()\n        );\n        if (isReadyLock) {\n            this.waits = [];\n            if (this.resolveReady) {\n                this.resolveReady();\n            }\n        }\n        this.isReadyLock = isReadyLock;\n        return isReadyLock;\n    }\n    setDefaults(ctx) {\n        // initial values and defaults\n        ctx.strokeStyle = 'rgba(0,0,0,0)';\n        ctx.lineCap = 'butt';\n        ctx.lineJoin = 'miter';\n        ctx.miterLimit = 4;\n    }\n    setViewBox(param) {\n        let { document , ctx , aspectRatio , width , desiredWidth , height , desiredHeight , minX =0 , minY =0 , refX , refY , clip =false , clipX =0 , clipY =0  } = param;\n        // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n        const cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, '') // ignore defer\n        ;\n        const [aspectRatioAlign, aspectRatioMeetOrSlice] = cleanAspectRatio.split(' ');\n        const align = aspectRatioAlign || 'xMidYMid';\n        const meetOrSlice = aspectRatioMeetOrSlice || 'meet';\n        // calculate scale\n        const scaleX = width / desiredWidth;\n        const scaleY = height / desiredHeight;\n        const scaleMin = Math.min(scaleX, scaleY);\n        const scaleMax = Math.max(scaleX, scaleY);\n        let finalDesiredWidth = desiredWidth;\n        let finalDesiredHeight = desiredHeight;\n        if (meetOrSlice === 'meet') {\n            finalDesiredWidth *= scaleMin;\n            finalDesiredHeight *= scaleMin;\n        }\n        if (meetOrSlice === 'slice') {\n            finalDesiredWidth *= scaleMax;\n            finalDesiredHeight *= scaleMax;\n        }\n        const refXProp = new Property(document, 'refX', refX);\n        const refYProp = new Property(document, 'refY', refY);\n        const hasRefs = refXProp.hasValue() && refYProp.hasValue();\n        if (hasRefs) {\n            ctx.translate(-scaleMin * refXProp.getPixels('x'), -scaleMin * refYProp.getPixels('y'));\n        }\n        if (clip) {\n            const scaledClipX = scaleMin * clipX;\n            const scaledClipY = scaleMin * clipY;\n            ctx.beginPath();\n            ctx.moveTo(scaledClipX, scaledClipY);\n            ctx.lineTo(width, scaledClipY);\n            ctx.lineTo(width, height);\n            ctx.lineTo(scaledClipX, height);\n            ctx.closePath();\n            ctx.clip();\n        }\n        if (!hasRefs) {\n            const isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY;\n            const isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY;\n            const isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX;\n            const isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX;\n            if (align.startsWith('xMid') && (isMeetMinY || isSliceMaxY)) {\n                ctx.translate(width / 2 - finalDesiredWidth / 2, 0);\n            }\n            if (align.endsWith('YMid') && (isMeetMinX || isSliceMaxX)) {\n                ctx.translate(0, height / 2 - finalDesiredHeight / 2);\n            }\n            if (align.startsWith('xMax') && (isMeetMinY || isSliceMaxY)) {\n                ctx.translate(width - finalDesiredWidth, 0);\n            }\n            if (align.endsWith('YMax') && (isMeetMinX || isSliceMaxX)) {\n                ctx.translate(0, height - finalDesiredHeight);\n            }\n        }\n        // scale\n        switch(true){\n            case align === 'none':\n                ctx.scale(scaleX, scaleY);\n                break;\n            case meetOrSlice === 'meet':\n                ctx.scale(scaleMin, scaleMin);\n                break;\n            case meetOrSlice === 'slice':\n                ctx.scale(scaleMax, scaleMax);\n                break;\n        }\n        // translate\n        ctx.translate(-minX, -minY);\n    }\n    start(element) {\n        let { enableRedraw =false , ignoreMouse =false , ignoreAnimation =false , ignoreDimensions =false , ignoreClear =false , forceRedraw , scaleWidth , scaleHeight , offsetX , offsetY  } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n        const { mouse  } = this;\n        const frameDuration = 1000 / Screen.FRAMERATE;\n        this.isReadyLock = false;\n        this.frameDuration = frameDuration;\n        this.readyPromise = new Promise((resolve)=>{\n            this.resolveReady = resolve;\n        });\n        if (this.isReady()) {\n            this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n        }\n        if (!enableRedraw) {\n            return;\n        }\n        let now = Date.now();\n        let then = now;\n        let delta = 0;\n        const tick = ()=>{\n            now = Date.now();\n            delta = now - then;\n            if (delta >= frameDuration) {\n                then = now - delta % frameDuration;\n                if (this.shouldUpdate(ignoreAnimation, forceRedraw)) {\n                    this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n                    mouse.runEvents();\n                }\n            }\n            this.intervalId = requestAnimationFrame(tick);\n        };\n        if (!ignoreMouse) {\n            mouse.start();\n        }\n        this.intervalId = requestAnimationFrame(tick);\n    }\n    stop() {\n        if (this.intervalId) {\n            requestAnimationFrame.cancel(this.intervalId);\n            this.intervalId = null;\n        }\n        this.mouse.stop();\n    }\n    shouldUpdate(ignoreAnimation, forceRedraw) {\n        // need update from animations?\n        if (!ignoreAnimation) {\n            const { frameDuration  } = this;\n            const shouldUpdate1 = this.animations.reduce((shouldUpdate, animation)=>animation.update(frameDuration) || shouldUpdate\n            , false);\n            if (shouldUpdate1) {\n                return true;\n            }\n        }\n        // need update from redraw?\n        if (typeof forceRedraw === 'function' && forceRedraw()) {\n            return true;\n        }\n        if (!this.isReadyLock && this.isReady()) {\n            return true;\n        }\n        // need update from mouse events?\n        if (this.mouse.hasEvents()) {\n            return true;\n        }\n        return false;\n    }\n    render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {\n        const { viewPort , ctx , isFirstRender  } = this;\n        const canvas = ctx.canvas;\n        viewPort.clear();\n        if (canvas.width && canvas.height) {\n            viewPort.setCurrent(canvas.width, canvas.height);\n        }\n        const widthStyle = element.getStyle('width');\n        const heightStyle = element.getStyle('height');\n        if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number')) {\n            // set canvas size\n            if (widthStyle.hasValue()) {\n                canvas.width = widthStyle.getPixels('x');\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n                if (canvas.style) {\n                    canvas.style.width = \"\".concat(canvas.width, \"px\");\n                }\n            }\n            if (heightStyle.hasValue()) {\n                canvas.height = heightStyle.getPixels('y');\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n                if (canvas.style) {\n                    canvas.style.height = \"\".concat(canvas.height, \"px\");\n                }\n            }\n        }\n        let cWidth = canvas.clientWidth || canvas.width;\n        let cHeight = canvas.clientHeight || canvas.height;\n        if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n            cWidth = widthStyle.getPixels('x');\n            cHeight = heightStyle.getPixels('y');\n        }\n        viewPort.setCurrent(cWidth, cHeight);\n        if (typeof offsetX === 'number') {\n            element.getAttribute('x', true).setValue(offsetX);\n        }\n        if (typeof offsetY === 'number') {\n            element.getAttribute('y', true).setValue(offsetY);\n        }\n        if (typeof scaleWidth === 'number' || typeof scaleHeight === 'number') {\n            const viewBox = toNumbers(element.getAttribute('viewBox').getString());\n            let xRatio = 0;\n            let yRatio = 0;\n            if (typeof scaleWidth === 'number') {\n                const widthStyle = element.getStyle('width');\n                if (widthStyle.hasValue()) {\n                    xRatio = widthStyle.getPixels('x') / scaleWidth;\n                } else if (viewBox[2] && !isNaN(viewBox[2])) {\n                    xRatio = viewBox[2] / scaleWidth;\n                }\n            }\n            if (typeof scaleHeight === 'number') {\n                const heightStyle = element.getStyle('height');\n                if (heightStyle.hasValue()) {\n                    yRatio = heightStyle.getPixels('y') / scaleHeight;\n                } else if (viewBox[3] && !isNaN(viewBox[3])) {\n                    yRatio = viewBox[3] / scaleHeight;\n                }\n            }\n            if (!xRatio) {\n                xRatio = yRatio;\n            }\n            if (!yRatio) {\n                yRatio = xRatio;\n            }\n            element.getAttribute('width', true).setValue(scaleWidth);\n            element.getAttribute('height', true).setValue(scaleHeight);\n            const transformStyle = element.getStyle('transform', true, true);\n            transformStyle.setValue(\"\".concat(transformStyle.getString(), \" scale(\").concat(1 / xRatio, \", \").concat(1 / yRatio, \")\"));\n        }\n        // clear and render\n        if (!ignoreClear) {\n            ctx.clearRect(0, 0, cWidth, cHeight);\n        }\n        element.render(ctx);\n        if (isFirstRender) {\n            this.isFirstRender = false;\n        }\n    }\n    constructor(ctx, { fetch =defaultFetch$1 , window =defaultWindow  } = {}){\n        this.ctx = ctx;\n        this.viewPort = new ViewPort();\n        this.mouse = new Mouse(this);\n        this.animations = [];\n        this.waits = [];\n        this.frameDuration = 0;\n        this.isReadyLock = false;\n        this.isFirstRender = true;\n        this.intervalId = null;\n        this.window = window;\n        if (!fetch) {\n            throw new Error(\"Can't find 'fetch' in 'globalThis', please provide it via options\");\n        }\n        this.fetch = fetch;\n    }\n}\nScreen.defaultWindow = defaultWindow;\nScreen.defaultFetch = defaultFetch$1;\nScreen.FRAMERATE = 30;\nScreen.MAX_VIRTUAL_PIXELS = 30000;\n\nconst { defaultFetch  } = Screen;\nconst DefaultDOMParser = typeof DOMParser !== 'undefined' ? DOMParser : undefined;\nclass Parser {\n    async parse(resource) {\n        if (resource.startsWith('<')) {\n            return this.parseFromString(resource);\n        }\n        return this.load(resource);\n    }\n    parseFromString(xml) {\n        const parser = new this.DOMParser();\n        try {\n            return this.checkDocument(parser.parseFromString(xml, 'image/svg+xml'));\n        } catch (err) {\n            return this.checkDocument(parser.parseFromString(xml, 'text/xml'));\n        }\n    }\n    checkDocument(document) {\n        const parserError = document.getElementsByTagName('parsererror')[0];\n        if (parserError) {\n            throw new Error(parserError.textContent || 'Unknown parse error');\n        }\n        return document;\n    }\n    async load(url) {\n        const response = await this.fetch(url);\n        const xml = await response.text();\n        return this.parseFromString(xml);\n    }\n    constructor({ fetch =defaultFetch , DOMParser =DefaultDOMParser  } = {}){\n        if (!fetch) {\n            throw new Error(\"Can't find 'fetch' in 'globalThis', please provide it via options\");\n        }\n        if (!DOMParser) {\n            throw new Error(\"Can't find 'DOMParser' in 'globalThis', please provide it via options\");\n        }\n        this.fetch = fetch;\n        this.DOMParser = DOMParser;\n    }\n}\n\nclass Translate {\n    apply(ctx) {\n        const { x , y  } = this.point;\n        ctx.translate(x || 0, y || 0);\n    }\n    unapply(ctx) {\n        const { x , y  } = this.point;\n        ctx.translate(-1 * x || 0, -1 * y || 0);\n    }\n    applyToPoint(point) {\n        const { x , y  } = this.point;\n        point.applyTransform([\n            1,\n            0,\n            0,\n            1,\n            x || 0,\n            y || 0\n        ]);\n    }\n    constructor(_, point){\n        this.type = 'translate';\n        this.point = Point.parse(point);\n    }\n}\n\nclass Rotate {\n    apply(ctx) {\n        const { cx , cy , originX , originY , angle  } = this;\n        const tx = cx + originX.getPixels('x');\n        const ty = cy + originY.getPixels('y');\n        ctx.translate(tx, ty);\n        ctx.rotate(angle.getRadians());\n        ctx.translate(-tx, -ty);\n    }\n    unapply(ctx) {\n        const { cx , cy , originX , originY , angle  } = this;\n        const tx = cx + originX.getPixels('x');\n        const ty = cy + originY.getPixels('y');\n        ctx.translate(tx, ty);\n        ctx.rotate(-1 * angle.getRadians());\n        ctx.translate(-tx, -ty);\n    }\n    applyToPoint(point) {\n        const { cx , cy , angle  } = this;\n        const rad = angle.getRadians();\n        point.applyTransform([\n            1,\n            0,\n            0,\n            1,\n            cx || 0,\n            cy || 0 // this.p.y\n        ]);\n        point.applyTransform([\n            Math.cos(rad),\n            Math.sin(rad),\n            -Math.sin(rad),\n            Math.cos(rad),\n            0,\n            0\n        ]);\n        point.applyTransform([\n            1,\n            0,\n            0,\n            1,\n            -cx || 0,\n            -cy || 0 // -this.p.y\n        ]);\n    }\n    constructor(document, rotate, transformOrigin){\n        this.type = 'rotate';\n        const numbers = toNumbers(rotate);\n        this.angle = new Property(document, 'angle', numbers[0]);\n        this.originX = transformOrigin[0];\n        this.originY = transformOrigin[1];\n        this.cx = numbers[1] || 0;\n        this.cy = numbers[2] || 0;\n    }\n}\n\nclass Scale {\n    apply(ctx) {\n        const { scale: { x , y  } , originX , originY  } = this;\n        const tx = originX.getPixels('x');\n        const ty = originY.getPixels('y');\n        ctx.translate(tx, ty);\n        ctx.scale(x, y || x);\n        ctx.translate(-tx, -ty);\n    }\n    unapply(ctx) {\n        const { scale: { x , y  } , originX , originY  } = this;\n        const tx = originX.getPixels('x');\n        const ty = originY.getPixels('y');\n        ctx.translate(tx, ty);\n        ctx.scale(1 / x, 1 / y || x);\n        ctx.translate(-tx, -ty);\n    }\n    applyToPoint(point) {\n        const { x , y  } = this.scale;\n        point.applyTransform([\n            x || 0,\n            0,\n            0,\n            y || 0,\n            0,\n            0\n        ]);\n    }\n    constructor(_, scale, transformOrigin){\n        this.type = 'scale';\n        const scaleSize = Point.parseScale(scale);\n        // Workaround for node-canvas\n        if (scaleSize.x === 0 || scaleSize.y === 0) {\n            scaleSize.x = PSEUDO_ZERO;\n            scaleSize.y = PSEUDO_ZERO;\n        }\n        this.scale = scaleSize;\n        this.originX = transformOrigin[0];\n        this.originY = transformOrigin[1];\n    }\n}\n\nclass Matrix {\n    apply(ctx) {\n        const { originX , originY , matrix  } = this;\n        const tx = originX.getPixels('x');\n        const ty = originY.getPixels('y');\n        ctx.translate(tx, ty);\n        ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n        ctx.translate(-tx, -ty);\n    }\n    unapply(ctx) {\n        const { originX , originY , matrix  } = this;\n        const a = matrix[0];\n        const b = matrix[2];\n        const c = matrix[4];\n        const d = matrix[1];\n        const e = matrix[3];\n        const f = matrix[5];\n        const g = 0;\n        const h = 0;\n        const i = 1;\n        const det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g));\n        const tx = originX.getPixels('x');\n        const ty = originY.getPixels('y');\n        ctx.translate(tx, ty);\n        ctx.transform(det * (e * i - f * h), det * (f * g - d * i), det * (c * h - b * i), det * (a * i - c * g), det * (b * f - c * e), det * (c * d - a * f));\n        ctx.translate(-tx, -ty);\n    }\n    applyToPoint(point) {\n        point.applyTransform(this.matrix);\n    }\n    constructor(_, matrix, transformOrigin){\n        this.type = 'matrix';\n        this.matrix = toMatrixValue(matrix);\n        this.originX = transformOrigin[0];\n        this.originY = transformOrigin[1];\n    }\n}\n\nclass Skew extends Matrix {\n    constructor(document, skew, transformOrigin){\n        super(document, skew, transformOrigin);\n        this.type = 'skew';\n        this.angle = new Property(document, 'angle', skew);\n    }\n}\n\nclass SkewX extends Skew {\n    constructor(document, skew, transformOrigin){\n        super(document, skew, transformOrigin);\n        this.type = 'skewX';\n        this.matrix = [\n            1,\n            0,\n            Math.tan(this.angle.getRadians()),\n            1,\n            0,\n            0\n        ];\n    }\n}\n\nclass SkewY extends Skew {\n    constructor(document, skew, transformOrigin){\n        super(document, skew, transformOrigin);\n        this.type = 'skewY';\n        this.matrix = [\n            1,\n            Math.tan(this.angle.getRadians()),\n            0,\n            1,\n            0,\n            0\n        ];\n    }\n}\n\nfunction parseTransforms(transform) {\n    return compressSpaces(transform).trim().replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n}\nfunction parseTransform(transform) {\n    const [type = '', value = ''] = transform.split('(');\n    return [\n        type.trim(),\n        value.trim().replace(')', '')\n    ];\n}\nclass Transform {\n    static fromElement(document, element) {\n        const transformStyle = element.getStyle('transform', false, true);\n        if (transformStyle.hasValue()) {\n            const [transformOriginXProperty, transformOriginYProperty = transformOriginXProperty] = element.getStyle('transform-origin', false, true).split();\n            if (transformOriginXProperty && transformOriginYProperty) {\n                const transformOrigin = [\n                    transformOriginXProperty,\n                    transformOriginYProperty\n                ];\n                return new Transform(document, transformStyle.getString(), transformOrigin);\n            }\n        }\n        return null;\n    }\n    apply(ctx) {\n        this.transforms.forEach((transform)=>transform.apply(ctx)\n        );\n    }\n    unapply(ctx) {\n        this.transforms.forEach((transform)=>transform.unapply(ctx)\n        );\n    }\n    // TODO: applyToPoint unused ... remove?\n    applyToPoint(point) {\n        this.transforms.forEach((transform)=>transform.applyToPoint(point)\n        );\n    }\n    constructor(document, transform1, transformOrigin){\n        this.document = document;\n        this.transforms = [];\n        const data = parseTransforms(transform1);\n        data.forEach((transform)=>{\n            if (transform === 'none') {\n                return;\n            }\n            const [type, value] = parseTransform(transform);\n            const TransformType = Transform.transformTypes[type];\n            if (TransformType) {\n                this.transforms.push(new TransformType(this.document, value, transformOrigin));\n            }\n        });\n    }\n}\nTransform.transformTypes = {\n    translate: Translate,\n    rotate: Rotate,\n    scale: Scale,\n    matrix: Matrix,\n    skewX: SkewX,\n    skewY: SkewY\n};\n\nclass Element {\n    getAttribute(name) {\n        let createIfNotExists = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        const attr = this.attributes.get(name);\n        if (!attr && createIfNotExists) {\n            const attr = new Property(this.document, name, '');\n            this.attributes.set(name, attr);\n            return attr;\n        }\n        return attr || Property.empty(this.document);\n    }\n    getHrefAttribute() {\n        let href;\n        for (const [key, value] of this.attributes){\n            if (key === 'href' || key.endsWith(':href')) {\n                href = value;\n                break;\n            }\n        }\n        return href || Property.empty(this.document);\n    }\n    getStyle(name) {\n        let createIfNotExists = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false, skipAncestors = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;\n        const style = this.styles.get(name);\n        if (style) {\n            return style;\n        }\n        const attr = this.getAttribute(name);\n        if (attr.hasValue()) {\n            this.styles.set(name, attr) // move up to me to cache\n            ;\n            return attr;\n        }\n        if (!skipAncestors) {\n            const { parent  } = this;\n            if (parent) {\n                const parentStyle = parent.getStyle(name);\n                if (parentStyle.hasValue()) {\n                    return parentStyle;\n                }\n            }\n        }\n        if (createIfNotExists) {\n            const style = new Property(this.document, name, '');\n            this.styles.set(name, style);\n            return style;\n        }\n        return Property.empty(this.document);\n    }\n    render(ctx) {\n        // don't render display=none\n        // don't render visibility=hidden\n        if (this.getStyle('display').getString() === 'none' || this.getStyle('visibility').getString() === 'hidden') {\n            return;\n        }\n        ctx.save();\n        if (this.getStyle('mask').hasValue()) {\n            const mask = this.getStyle('mask').getDefinition();\n            if (mask) {\n                this.applyEffects(ctx);\n                mask.apply(ctx, this);\n            }\n        } else if (this.getStyle('filter').getValue('none') !== 'none') {\n            const filter = this.getStyle('filter').getDefinition();\n            if (filter) {\n                this.applyEffects(ctx);\n                filter.apply(ctx, this);\n            }\n        } else {\n            this.setContext(ctx);\n            this.renderChildren(ctx);\n            this.clearContext(ctx);\n        }\n        ctx.restore();\n    }\n    setContext(_) {\n    // NO RENDER\n    }\n    applyEffects(ctx) {\n        // transform\n        const transform = Transform.fromElement(this.document, this);\n        if (transform) {\n            transform.apply(ctx);\n        }\n        // clip\n        const clipPathStyleProp = this.getStyle('clip-path', false, true);\n        if (clipPathStyleProp.hasValue()) {\n            const clip = clipPathStyleProp.getDefinition();\n            if (clip) {\n                clip.apply(ctx);\n            }\n        }\n    }\n    clearContext(_) {\n    // NO RENDER\n    }\n    renderChildren(ctx) {\n        this.children.forEach((child)=>{\n            child.render(ctx);\n        });\n    }\n    addChild(childNode) {\n        const child = childNode instanceof Element ? childNode : this.document.createElement(childNode);\n        child.parent = this;\n        if (!Element.ignoreChildTypes.includes(child.type)) {\n            this.children.push(child);\n        }\n    }\n    matchesSelector(selector) {\n        var ref;\n        const { node  } = this;\n        if (typeof node.matches === 'function') {\n            return node.matches(selector);\n        }\n        const styleClasses = (ref = node.getAttribute) === null || ref === void 0 ? void 0 : ref.call(node, 'class');\n        if (!styleClasses || styleClasses === '') {\n            return false;\n        }\n        return styleClasses.split(' ').some((styleClass)=>\".\".concat(styleClass) === selector\n        );\n    }\n    addStylesFromStyleDefinition() {\n        const { styles , stylesSpecificity  } = this.document;\n        for (const [selector, style] of styles){\n            if (!selector.startsWith('@') && this.matchesSelector(selector)) {\n                const specificity = stylesSpecificity.get(selector);\n                if (style) {\n                    for (const [name, styleProp] of style){\n                        let existingSpecificity = this.stylesSpecificity.get(name);\n                        if (typeof existingSpecificity === 'undefined') {\n                            existingSpecificity = '000';\n                        }\n                        if (specificity && specificity >= existingSpecificity) {\n                            if (styleProp) {\n                                this.styles.set(name, styleProp);\n                            }\n                            this.stylesSpecificity.set(name, specificity);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    removeStyles(element, ignoreStyles) {\n        const toRestore1 = ignoreStyles.reduce((toRestore, name)=>{\n            const styleProp = element.getStyle(name);\n            if (!styleProp.hasValue()) {\n                return toRestore;\n            }\n            const value = styleProp.getString();\n            styleProp.setValue('');\n            return [\n                ...toRestore,\n                [\n                    name,\n                    value\n                ]\n            ];\n        }, []);\n        return toRestore1;\n    }\n    restoreStyles(element, styles) {\n        styles.forEach((param)=>{\n            let [name, value] = param;\n            element.getStyle(name, true).setValue(value);\n        });\n    }\n    isFirstChild() {\n        var ref;\n        return ((ref = this.parent) === null || ref === void 0 ? void 0 : ref.children.indexOf(this)) === 0;\n    }\n    constructor(document, node, captureTextNodes = false){\n        this.document = document;\n        this.node = node;\n        this.captureTextNodes = captureTextNodes;\n        this.type = '';\n        this.attributes = new Map();\n        this.styles = new Map();\n        this.stylesSpecificity = new Map();\n        this.animationFrozen = false;\n        this.animationFrozenValue = '';\n        this.parent = null;\n        this.children = [];\n        if (!node || node.nodeType !== 1) {\n            return;\n        }\n        // add attributes\n        Array.from(node.attributes).forEach((attribute)=>{\n            const nodeName = normalizeAttributeName(attribute.nodeName);\n            this.attributes.set(nodeName, new Property(document, nodeName, attribute.value));\n        });\n        this.addStylesFromStyleDefinition();\n        // add inline styles\n        if (this.getAttribute('style').hasValue()) {\n            const styles = this.getAttribute('style').getString().split(';').map((_)=>_.trim()\n            );\n            styles.forEach((style)=>{\n                if (!style) {\n                    return;\n                }\n                const [name, value] = style.split(':').map((_)=>_.trim()\n                );\n                if (name) {\n                    this.styles.set(name, new Property(document, name, value));\n                }\n            });\n        }\n        const { definitions  } = document;\n        const id = this.getAttribute('id');\n        // add id\n        if (id.hasValue()) {\n            if (!definitions.has(id.getString())) {\n                definitions.set(id.getString(), this);\n            }\n        }\n        Array.from(node.childNodes).forEach((childNode)=>{\n            if (childNode.nodeType === 1) {\n                this.addChild(childNode) // ELEMENT_NODE\n                ;\n            } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {\n                const textNode = document.createTextNode(childNode);\n                if (textNode.getText().length > 0) {\n                    this.addChild(textNode) // TEXT_NODE\n                    ;\n                }\n            }\n        });\n    }\n}\nElement.ignoreChildTypes = [\n    'title'\n];\n\nclass UnknownElement extends Element {\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n    }\n}\n\nfunction wrapFontFamily(fontFamily) {\n    const trimmed = fontFamily.trim();\n    return /^('|\")/.test(trimmed) ? trimmed : \"\\\"\".concat(trimmed, \"\\\"\");\n}\nfunction prepareFontFamily(fontFamily) {\n    return typeof process === 'undefined' ? fontFamily : fontFamily.trim().split(',').map(wrapFontFamily).join(',');\n}\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\n * @param fontStyle\n * @returns CSS font style.\n */ function prepareFontStyle(fontStyle) {\n    if (!fontStyle) {\n        return '';\n    }\n    const targetFontStyle = fontStyle.trim().toLowerCase();\n    switch(targetFontStyle){\n        case 'normal':\n        case 'italic':\n        case 'oblique':\n        case 'inherit':\n        case 'initial':\n        case 'unset':\n            return targetFontStyle;\n        default:\n            if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n                return targetFontStyle;\n            }\n            return '';\n    }\n}\n/**\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n * @param fontWeight\n * @returns CSS font weight.\n */ function prepareFontWeight(fontWeight) {\n    if (!fontWeight) {\n        return '';\n    }\n    const targetFontWeight = fontWeight.trim().toLowerCase();\n    switch(targetFontWeight){\n        case 'normal':\n        case 'bold':\n        case 'lighter':\n        case 'bolder':\n        case 'inherit':\n        case 'initial':\n        case 'unset':\n            return targetFontWeight;\n        default:\n            if (/^[\\d.]+$/.test(targetFontWeight)) {\n                return targetFontWeight;\n            }\n            return '';\n    }\n}\nclass Font {\n    static parse() {\n        let font = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : '', inherit = arguments.length > 1 ? arguments[1] : void 0;\n        let fontStyle = '';\n        let fontVariant = '';\n        let fontWeight = '';\n        let fontSize = '';\n        let fontFamily = '';\n        const parts = compressSpaces(font).trim().split(' ');\n        const set = {\n            fontSize: false,\n            fontStyle: false,\n            fontWeight: false,\n            fontVariant: false\n        };\n        parts.forEach((part)=>{\n            switch(true){\n                case !set.fontStyle && Font.styles.includes(part):\n                    if (part !== 'inherit') {\n                        fontStyle = part;\n                    }\n                    set.fontStyle = true;\n                    break;\n                case !set.fontVariant && Font.variants.includes(part):\n                    if (part !== 'inherit') {\n                        fontVariant = part;\n                    }\n                    set.fontStyle = true;\n                    set.fontVariant = true;\n                    break;\n                case !set.fontWeight && Font.weights.includes(part):\n                    if (part !== 'inherit') {\n                        fontWeight = part;\n                    }\n                    set.fontStyle = true;\n                    set.fontVariant = true;\n                    set.fontWeight = true;\n                    break;\n                case !set.fontSize:\n                    if (part !== 'inherit') {\n                        fontSize = part.split('/')[0] || '';\n                    }\n                    set.fontStyle = true;\n                    set.fontVariant = true;\n                    set.fontWeight = true;\n                    set.fontSize = true;\n                    break;\n                default:\n                    if (part !== 'inherit') {\n                        fontFamily += part;\n                    }\n            }\n        });\n        return new Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);\n    }\n    toString() {\n        return [\n            prepareFontStyle(this.fontStyle),\n            this.fontVariant,\n            prepareFontWeight(this.fontWeight),\n            this.fontSize,\n            // Wrap fontFamily only on nodejs and only for canvas.ctx\n            prepareFontFamily(this.fontFamily)\n        ].join(' ').trim();\n    }\n    constructor(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit){\n        const inheritFont = inherit ? typeof inherit === 'string' ? Font.parse(inherit) : inherit : {};\n        this.fontFamily = fontFamily || inheritFont.fontFamily;\n        this.fontSize = fontSize || inheritFont.fontSize;\n        this.fontStyle = fontStyle || inheritFont.fontStyle;\n        this.fontWeight = fontWeight || inheritFont.fontWeight;\n        this.fontVariant = fontVariant || inheritFont.fontVariant;\n    }\n}\nFont.styles = 'normal|italic|oblique|inherit';\nFont.variants = 'normal|small-caps|inherit';\nFont.weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\n\nclass BoundingBox {\n    get x() {\n        return this.x1;\n    }\n    get y() {\n        return this.y1;\n    }\n    get width() {\n        return this.x2 - this.x1;\n    }\n    get height() {\n        return this.y2 - this.y1;\n    }\n    addPoint(x, y) {\n        if (typeof x !== 'undefined') {\n            if (isNaN(this.x1) || isNaN(this.x2)) {\n                this.x1 = x;\n                this.x2 = x;\n            }\n            if (x < this.x1) {\n                this.x1 = x;\n            }\n            if (x > this.x2) {\n                this.x2 = x;\n            }\n        }\n        if (typeof y !== 'undefined') {\n            if (isNaN(this.y1) || isNaN(this.y2)) {\n                this.y1 = y;\n                this.y2 = y;\n            }\n            if (y < this.y1) {\n                this.y1 = y;\n            }\n            if (y > this.y2) {\n                this.y2 = y;\n            }\n        }\n    }\n    addX(x) {\n        this.addPoint(x, 0);\n    }\n    addY(y) {\n        this.addPoint(0, y);\n    }\n    addBoundingBox(boundingBox) {\n        if (!boundingBox) {\n            return;\n        }\n        const { x1 , y1 , x2 , y2  } = boundingBox;\n        this.addPoint(x1, y1);\n        this.addPoint(x2, y2);\n    }\n    sumCubic(t, p0, p1, p2, p3) {\n        return Math.pow(1 - t, 3) * p0 + 3 * Math.pow(1 - t, 2) * t * p1 + 3 * (1 - t) * Math.pow(t, 2) * p2 + Math.pow(t, 3) * p3;\n    }\n    bezierCurveAdd(forX, p0, p1, p2, p3) {\n        const b = 6 * p0 - 12 * p1 + 6 * p2;\n        const a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n        const c = 3 * p1 - 3 * p0;\n        if (a === 0) {\n            if (b === 0) {\n                return;\n            }\n            const t = -c / b;\n            if (0 < t && t < 1) {\n                if (forX) {\n                    this.addX(this.sumCubic(t, p0, p1, p2, p3));\n                } else {\n                    this.addY(this.sumCubic(t, p0, p1, p2, p3));\n                }\n            }\n            return;\n        }\n        const b2ac = Math.pow(b, 2) - 4 * c * a;\n        if (b2ac < 0) {\n            return;\n        }\n        const t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n        if (0 < t1 && t1 < 1) {\n            if (forX) {\n                this.addX(this.sumCubic(t1, p0, p1, p2, p3));\n            } else {\n                this.addY(this.sumCubic(t1, p0, p1, p2, p3));\n            }\n        }\n        const t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n        if (0 < t2 && t2 < 1) {\n            if (forX) {\n                this.addX(this.sumCubic(t2, p0, p1, p2, p3));\n            } else {\n                this.addY(this.sumCubic(t2, p0, p1, p2, p3));\n            }\n        }\n    }\n    // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n    addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n        this.addPoint(p0x, p0y);\n        this.addPoint(p3x, p3y);\n        this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);\n        this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);\n    }\n    addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {\n        const cp1x = p0x + 2 / 3 * (p1x - p0x) // CP1 = QP0 + 2/3 *(QP1-QP0)\n        ;\n        const cp1y = p0y + 2 / 3 * (p1y - p0y) // CP1 = QP0 + 2/3 *(QP1-QP0)\n        ;\n        const cp2x = cp1x + 1 / 3 * (p2x - p0x) // CP2 = CP1 + 1/3 *(QP2-QP0)\n        ;\n        const cp2y = cp1y + 1 / 3 * (p2y - p0y) // CP2 = CP1 + 1/3 *(QP2-QP0)\n        ;\n        this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n    }\n    isPointInBox(x, y) {\n        const { x1 , y1 , x2 , y2  } = this;\n        return x1 <= x && x <= x2 && y1 <= y && y <= y2;\n    }\n    constructor(x1 = Number.NaN, y1 = Number.NaN, x2 = Number.NaN, y2 = Number.NaN){\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.addPoint(x1, y1);\n        this.addPoint(x2, y2);\n    }\n}\n\nclass RenderedElement extends Element {\n    calculateOpacity() {\n        let opacity = 1;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n        let element = this;\n        while(element){\n            const opacityStyle = element.getStyle('opacity', false, true) // no ancestors on style call\n            ;\n            if (opacityStyle.hasValue(true)) {\n                opacity *= opacityStyle.getNumber();\n            }\n            element = element.parent;\n        }\n        return opacity;\n    }\n    setContext(ctx) {\n        let fromMeasure = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        if (!fromMeasure) {\n            // fill\n            const fillStyleProp = this.getStyle('fill');\n            const fillOpacityStyleProp = this.getStyle('fill-opacity');\n            const strokeStyleProp = this.getStyle('stroke');\n            const strokeOpacityProp = this.getStyle('stroke-opacity');\n            if (fillStyleProp.isUrlDefinition()) {\n                const fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);\n                if (fillStyle) {\n                    ctx.fillStyle = fillStyle;\n                }\n            } else if (fillStyleProp.hasValue()) {\n                if (fillStyleProp.getString() === 'currentColor') {\n                    fillStyleProp.setValue(this.getStyle('color').getColor());\n                }\n                const fillStyle = fillStyleProp.getColor();\n                if (fillStyle !== 'inherit') {\n                    ctx.fillStyle = fillStyle === 'none' ? 'rgba(0,0,0,0)' : fillStyle;\n                }\n            }\n            if (fillOpacityStyleProp.hasValue()) {\n                const fillStyle = new Property(this.document, 'fill', ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();\n                ctx.fillStyle = fillStyle;\n            }\n            // stroke\n            if (strokeStyleProp.isUrlDefinition()) {\n                const strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);\n                if (strokeStyle) {\n                    ctx.strokeStyle = strokeStyle;\n                }\n            } else if (strokeStyleProp.hasValue()) {\n                if (strokeStyleProp.getString() === 'currentColor') {\n                    strokeStyleProp.setValue(this.getStyle('color').getColor());\n                }\n                const strokeStyle = strokeStyleProp.getString();\n                if (strokeStyle !== 'inherit') {\n                    ctx.strokeStyle = strokeStyle === 'none' ? 'rgba(0,0,0,0)' : strokeStyle;\n                }\n            }\n            if (strokeOpacityProp.hasValue()) {\n                const strokeStyle = new Property(this.document, 'stroke', ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();\n                ctx.strokeStyle = strokeStyle;\n            }\n            const strokeWidthStyleProp = this.getStyle('stroke-width');\n            if (strokeWidthStyleProp.hasValue()) {\n                const newLineWidth = strokeWidthStyleProp.getPixels();\n                ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n                 : newLineWidth;\n            }\n            const strokeLinecapStyleProp = this.getStyle('stroke-linecap');\n            const strokeLinejoinStyleProp = this.getStyle('stroke-linejoin');\n            const strokeMiterlimitProp = this.getStyle('stroke-miterlimit');\n            // NEED TEST\n            // const pointOrderStyleProp = this.getStyle('paint-order');\n            const strokeDasharrayStyleProp = this.getStyle('stroke-dasharray');\n            const strokeDashoffsetProp = this.getStyle('stroke-dashoffset');\n            if (strokeLinecapStyleProp.hasValue()) {\n                ctx.lineCap = strokeLinecapStyleProp.getString();\n            }\n            if (strokeLinejoinStyleProp.hasValue()) {\n                ctx.lineJoin = strokeLinejoinStyleProp.getString();\n            }\n            if (strokeMiterlimitProp.hasValue()) {\n                ctx.miterLimit = strokeMiterlimitProp.getNumber();\n            }\n            // NEED TEST\n            // if (pointOrderStyleProp.hasValue()) {\n            //   // ?\n            //   ctx.paintOrder = pointOrderStyleProp.getValue();\n            // }\n            if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n                const gaps = toNumbers(strokeDasharrayStyleProp.getString());\n                if (typeof ctx.setLineDash !== 'undefined') {\n                    ctx.setLineDash(gaps);\n                } else // @ts-expect-error Handle browser prefix.\n                if (typeof ctx.webkitLineDash !== 'undefined') {\n                    // @ts-expect-error Handle browser prefix.\n                    ctx.webkitLineDash = gaps;\n                } else // @ts-expect-error Handle browser prefix.\n                if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n                    // @ts-expect-error Handle browser prefix.\n                    ctx.mozDash = gaps;\n                }\n                const offset = strokeDashoffsetProp.getPixels();\n                if (typeof ctx.lineDashOffset !== 'undefined') {\n                    ctx.lineDashOffset = offset;\n                } else // @ts-expect-error Handle browser prefix.\n                if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n                    // @ts-expect-error Handle browser prefix.\n                    ctx.webkitLineDashOffset = offset;\n                } else // @ts-expect-error Handle browser prefix.\n                if (typeof ctx.mozDashOffset !== 'undefined') {\n                    // @ts-expect-error Handle browser prefix.\n                    ctx.mozDashOffset = offset;\n                }\n            }\n        }\n        // font\n        this.modifiedEmSizeStack = false;\n        if (typeof ctx.font !== 'undefined') {\n            const fontStyleProp = this.getStyle('font');\n            const fontStyleStyleProp = this.getStyle('font-style');\n            const fontVariantStyleProp = this.getStyle('font-variant');\n            const fontWeightStyleProp = this.getStyle('font-weight');\n            const fontSizeStyleProp = this.getStyle('font-size');\n            const fontFamilyStyleProp = this.getStyle('font-family');\n            const font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? \"\".concat(fontSizeStyleProp.getPixels(true), \"px\") : '', fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));\n            fontStyleStyleProp.setValue(font.fontStyle);\n            fontVariantStyleProp.setValue(font.fontVariant);\n            fontWeightStyleProp.setValue(font.fontWeight);\n            fontSizeStyleProp.setValue(font.fontSize);\n            fontFamilyStyleProp.setValue(font.fontFamily);\n            ctx.font = font.toString();\n            if (fontSizeStyleProp.isPixels()) {\n                this.document.emSize = fontSizeStyleProp.getPixels();\n                this.modifiedEmSizeStack = true;\n            }\n        }\n        if (!fromMeasure) {\n            // effects\n            this.applyEffects(ctx);\n            // opacity\n            ctx.globalAlpha = this.calculateOpacity();\n        }\n    }\n    clearContext(ctx) {\n        super.clearContext(ctx);\n        if (this.modifiedEmSizeStack) {\n            this.document.popEmSize();\n        }\n    }\n    constructor(...args){\n        super(...args);\n        this.modifiedEmSizeStack = false;\n    }\n}\n\nclass TextElement extends RenderedElement {\n    setContext(ctx) {\n        let fromMeasure = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        super.setContext(ctx, fromMeasure);\n        const textBaseline = this.getStyle('dominant-baseline').getTextBaseline() || this.getStyle('alignment-baseline').getTextBaseline();\n        if (textBaseline) {\n            ctx.textBaseline = textBaseline;\n        }\n    }\n    initializeCoordinates() {\n        this.x = 0;\n        this.y = 0;\n        this.leafTexts = [];\n        this.textChunkStart = 0;\n        this.minX = Number.POSITIVE_INFINITY;\n        this.maxX = Number.NEGATIVE_INFINITY;\n    }\n    getBoundingBox(ctx) {\n        if (this.type !== 'text') {\n            return this.getTElementBoundingBox(ctx);\n        }\n        // first, calculate child positions\n        this.initializeCoordinates();\n        this.adjustChildCoordinatesRecursive(ctx);\n        let boundingBox = null;\n        // then calculate bounding box\n        this.children.forEach((_, i)=>{\n            const childBoundingBox = this.getChildBoundingBox(ctx, this, this, i);\n            if (!boundingBox) {\n                boundingBox = childBoundingBox;\n            } else {\n                boundingBox.addBoundingBox(childBoundingBox);\n            }\n        });\n        return boundingBox;\n    }\n    getFontSize() {\n        const { document , parent  } = this;\n        const inheritFontSize = Font.parse(document.ctx.font).fontSize;\n        const fontSize = parent.getStyle('font-size').getNumber(inheritFontSize);\n        return fontSize;\n    }\n    getTElementBoundingBox(ctx) {\n        const fontSize = this.getFontSize();\n        return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);\n    }\n    getGlyph(font, text, i) {\n        const char = text[i];\n        let glyph;\n        if (font.isArabic) {\n            var ref;\n            const len = text.length;\n            const prevChar = text[i - 1];\n            const nextChar = text[i + 1];\n            let arabicForm = 'isolated';\n            if ((i === 0 || prevChar === ' ') && i < len - 1 && nextChar !== ' ') {\n                arabicForm = 'terminal';\n            }\n            if (i > 0 && prevChar !== ' ' && i < len - 1 && nextChar !== ' ') {\n                arabicForm = 'medial';\n            }\n            if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n                arabicForm = 'initial';\n            }\n            glyph = ((ref = font.arabicGlyphs.get(char)) === null || ref === void 0 ? void 0 : ref.get(arabicForm)) || font.glyphs.get(char);\n        } else {\n            glyph = font.glyphs.get(char);\n        }\n        if (!glyph) {\n            glyph = font.missingGlyph;\n        }\n        return glyph;\n    }\n    getText() {\n        return '';\n    }\n    getTextFromNode(node) {\n        const textNode = node || this.node;\n        const childNodes = Array.from(textNode.parentNode.childNodes);\n        const index = childNodes.indexOf(textNode);\n        const lastIndex = childNodes.length - 1;\n        let text = compressSpaces(// textNode.value\n        // || textNode.text\n        textNode.textContent || '');\n        if (index === 0) {\n            text = trimLeft(text);\n        }\n        if (index === lastIndex) {\n            text = trimRight(text);\n        }\n        return text;\n    }\n    renderChildren(ctx) {\n        if (this.type !== 'text') {\n            this.renderTElementChildren(ctx);\n            return;\n        }\n        // first, calculate child positions\n        this.initializeCoordinates();\n        this.adjustChildCoordinatesRecursive(ctx);\n        // then render\n        this.children.forEach((_, i)=>{\n            this.renderChild(ctx, this, this, i);\n        });\n        const { mouse  } = this.document.screen;\n        // Do not calc bounding box if mouse is not working.\n        if (mouse.isWorking()) {\n            mouse.checkBoundingBox(this, this.getBoundingBox(ctx));\n        }\n    }\n    renderTElementChildren(ctx) {\n        const { document , parent  } = this;\n        const renderText = this.getText();\n        const customFont = parent.getStyle('font-family').getDefinition();\n        if (customFont) {\n            const { unitsPerEm  } = customFont.fontFace;\n            const ctxFont = Font.parse(document.ctx.font);\n            const fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize);\n            const fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle);\n            const scale = fontSize / unitsPerEm;\n            const text = customFont.isRTL ? renderText.split('').reverse().join('') : renderText;\n            const dx = toNumbers(parent.getAttribute('dx').getString());\n            const len = text.length;\n            for(let i = 0; i < len; i++){\n                const glyph = this.getGlyph(customFont, text, i);\n                ctx.translate(this.x, this.y);\n                ctx.scale(scale, -scale);\n                const lw = ctx.lineWidth;\n                ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;\n                if (fontStyle === 'italic') {\n                    ctx.transform(1, 0, 0.4, 1, 0, 0);\n                }\n                glyph.render(ctx);\n                if (fontStyle === 'italic') {\n                    ctx.transform(1, 0, -0.4, 1, 0, 0);\n                }\n                ctx.lineWidth = lw;\n                ctx.scale(1 / scale, -1 / scale);\n                ctx.translate(-this.x, -this.y);\n                this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;\n                if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n                    this.x += dx[i];\n                }\n            }\n            return;\n        }\n        const { x , y  } = this;\n        // NEED TEST\n        // if (ctx.paintOrder === 'stroke') {\n        //   if (ctx.strokeStyle) {\n        //     ctx.strokeText(renderText, x, y);\n        //   }\n        //   if (ctx.fillStyle) {\n        //     ctx.fillText(renderText, x, y);\n        //   }\n        // } else {\n        if (ctx.fillStyle) {\n            ctx.fillText(renderText, x, y);\n        }\n        if (ctx.strokeStyle) {\n            ctx.strokeText(renderText, x, y);\n        }\n    // }\n    }\n    applyAnchoring() {\n        if (this.textChunkStart >= this.leafTexts.length) {\n            return;\n        }\n        // This is basically the \"Apply anchoring\" part of https://www.w3.org/TR/SVG2/text.html#TextLayoutAlgorithm.\n        // The difference is that we apply the anchoring as soon as a chunk is finished. This saves some extra looping.\n        // Vertical text is not supported.\n        const firstElement = this.leafTexts[this.textChunkStart];\n        const textAnchor = firstElement.getStyle('text-anchor').getString('start');\n        const isRTL = false // we treat RTL like LTR\n        ;\n        let shift = 0;\n        if (textAnchor === 'start' && !isRTL || textAnchor === 'end' && isRTL) {\n            shift = firstElement.x - this.minX;\n        } else if (textAnchor === 'end' && !isRTL || textAnchor === 'start' && isRTL) {\n            shift = firstElement.x - this.maxX;\n        } else {\n            shift = firstElement.x - (this.minX + this.maxX) / 2;\n        }\n        for(let i = this.textChunkStart; i < this.leafTexts.length; i++){\n            this.leafTexts[i].x += shift;\n        }\n        // start new chunk\n        this.minX = Number.POSITIVE_INFINITY;\n        this.maxX = Number.NEGATIVE_INFINITY;\n        this.textChunkStart = this.leafTexts.length;\n    }\n    adjustChildCoordinatesRecursive(ctx) {\n        this.children.forEach((_, i)=>{\n            this.adjustChildCoordinatesRecursiveCore(ctx, this, this, i);\n        });\n        this.applyAnchoring();\n    }\n    adjustChildCoordinatesRecursiveCore(ctx, textParent, parent, i1) {\n        const child = parent.children[i1];\n        if (child.children.length > 0) {\n            child.children.forEach((_, i)=>{\n                textParent.adjustChildCoordinatesRecursiveCore(ctx, textParent, child, i);\n            });\n        } else {\n            // only leafs are relevant\n            this.adjustChildCoordinates(ctx, textParent, parent, i1);\n        }\n    }\n    adjustChildCoordinates(ctx, textParent, parent, i) {\n        const child = parent.children[i];\n        if (typeof child.measureText !== 'function') {\n            return child;\n        }\n        ctx.save();\n        child.setContext(ctx, true);\n        const xAttr = child.getAttribute('x');\n        const yAttr = child.getAttribute('y');\n        const dxAttr = child.getAttribute('dx');\n        const dyAttr = child.getAttribute('dy');\n        const customFont = child.getStyle('font-family').getDefinition();\n        const isRTL = Boolean(customFont === null || customFont === void 0 ? void 0 : customFont.isRTL);\n        if (i === 0) {\n            // First children inherit attributes from parent(s). Positional attributes\n            // are only inherited from a parent to it's first child.\n            if (!xAttr.hasValue()) {\n                xAttr.setValue(child.getInheritedAttribute('x'));\n            }\n            if (!yAttr.hasValue()) {\n                yAttr.setValue(child.getInheritedAttribute('y'));\n            }\n            if (!dxAttr.hasValue()) {\n                dxAttr.setValue(child.getInheritedAttribute('dx'));\n            }\n            if (!dyAttr.hasValue()) {\n                dyAttr.setValue(child.getInheritedAttribute('dy'));\n            }\n        }\n        const width = child.measureText(ctx);\n        if (isRTL) {\n            textParent.x -= width;\n        }\n        if (xAttr.hasValue()) {\n            // an \"x\" attribute marks the start of a new chunk\n            textParent.applyAnchoring();\n            child.x = xAttr.getPixels('x');\n            if (dxAttr.hasValue()) {\n                child.x += dxAttr.getPixels('x');\n            }\n        } else {\n            if (dxAttr.hasValue()) {\n                textParent.x += dxAttr.getPixels('x');\n            }\n            child.x = textParent.x;\n        }\n        textParent.x = child.x;\n        if (!isRTL) {\n            textParent.x += width;\n        }\n        if (yAttr.hasValue()) {\n            child.y = yAttr.getPixels('y');\n            if (dyAttr.hasValue()) {\n                child.y += dyAttr.getPixels('y');\n            }\n        } else {\n            if (dyAttr.hasValue()) {\n                textParent.y += dyAttr.getPixels('y');\n            }\n            child.y = textParent.y;\n        }\n        textParent.y = child.y;\n        // update the current chunk and it's bounds\n        textParent.leafTexts.push(child);\n        textParent.minX = Math.min(textParent.minX, child.x, child.x + width);\n        textParent.maxX = Math.max(textParent.maxX, child.x, child.x + width);\n        child.clearContext(ctx);\n        ctx.restore();\n        return child;\n    }\n    getChildBoundingBox(ctx, textParent, parent, i2) {\n        const child = parent.children[i2];\n        // not a text node?\n        if (typeof child.getBoundingBox !== 'function') {\n            return null;\n        }\n        const boundingBox = child.getBoundingBox(ctx);\n        if (boundingBox) {\n            child.children.forEach((_, i)=>{\n                const childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i);\n                boundingBox.addBoundingBox(childBoundingBox);\n            });\n        }\n        return boundingBox;\n    }\n    renderChild(ctx, textParent, parent, i3) {\n        const child = parent.children[i3];\n        child.render(ctx);\n        child.children.forEach((_, i)=>{\n            textParent.renderChild(ctx, textParent, child, i);\n        });\n    }\n    measureText(ctx) {\n        const { measureCache  } = this;\n        if (~measureCache) {\n            return measureCache;\n        }\n        const renderText = this.getText();\n        const measure = this.measureTargetText(ctx, renderText);\n        this.measureCache = measure;\n        return measure;\n    }\n    measureTargetText(ctx, targetText) {\n        if (!targetText.length) {\n            return 0;\n        }\n        const { parent  } = this;\n        const customFont = parent.getStyle('font-family').getDefinition();\n        if (customFont) {\n            const fontSize = this.getFontSize();\n            const text = customFont.isRTL ? targetText.split('').reverse().join('') : targetText;\n            const dx = toNumbers(parent.getAttribute('dx').getString());\n            const len = text.length;\n            let measure = 0;\n            for(let i = 0; i < len; i++){\n                const glyph = this.getGlyph(customFont, text, i);\n                measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n                if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n                    measure += dx[i];\n                }\n            }\n            return measure;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (!ctx.measureText) {\n            return targetText.length * 10;\n        }\n        ctx.save();\n        this.setContext(ctx, true);\n        const { width: measure  } = ctx.measureText(targetText);\n        this.clearContext(ctx);\n        ctx.restore();\n        return measure;\n    }\n    /**\n   * Inherits positional attributes from {@link TextElement} parent(s). Attributes\n   * are only inherited from a parent to its first child.\n   * @param name - The attribute name.\n   * @returns The attribute value or null.\n   */ getInheritedAttribute(name) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias,consistent-this\n        let current = this;\n        while(current instanceof TextElement && current.isFirstChild() && current.parent){\n            const parentAttr = current.parent.getAttribute(name);\n            if (parentAttr.hasValue(true)) {\n                return parentAttr.getString('0');\n            }\n            current = current.parent;\n        }\n        return null;\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, new.target === TextElement ? true : captureTextNodes);\n        this.type = 'text';\n        this.x = 0;\n        this.y = 0;\n        this.leafTexts = [];\n        this.textChunkStart = 0;\n        this.minX = Number.POSITIVE_INFINITY;\n        this.maxX = Number.NEGATIVE_INFINITY;\n        this.measureCache = -1;\n    }\n}\n\nclass TSpanElement extends TextElement {\n    getText() {\n        return this.text;\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, new.target === TSpanElement ? true : captureTextNodes);\n        this.type = 'tspan';\n        // if this node has children, then they own the text\n        this.text = this.children.length > 0 ? '' : this.getTextFromNode();\n    }\n}\n\nclass TextNode extends TSpanElement {\n    constructor(...args){\n        super(...args);\n        this.type = 'textNode';\n    }\n}\n\nclass PathParser extends SVGPathData {\n    reset() {\n        this.i = -1;\n        this.command = null;\n        this.previousCommand = null;\n        this.start = new Point(0, 0);\n        this.control = new Point(0, 0);\n        this.current = new Point(0, 0);\n        this.points = [];\n        this.angles = [];\n    }\n    isEnd() {\n        const { i , commands  } = this;\n        return i >= commands.length - 1;\n    }\n    next() {\n        const command = this.commands[++this.i];\n        this.previousCommand = this.command;\n        this.command = command;\n        return command;\n    }\n    getPoint() {\n        let xProp = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 'x', yProp = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'y';\n        const point = new Point(this.command[xProp], this.command[yProp]);\n        return this.makeAbsolute(point);\n    }\n    getAsControlPoint(xProp, yProp) {\n        const point = this.getPoint(xProp, yProp);\n        this.control = point;\n        return point;\n    }\n    getAsCurrentPoint(xProp, yProp) {\n        const point = this.getPoint(xProp, yProp);\n        this.current = point;\n        return point;\n    }\n    getReflectedControlPoint() {\n        const previousCommand = this.previousCommand.type;\n        if (previousCommand !== SVGPathData.CURVE_TO && previousCommand !== SVGPathData.SMOOTH_CURVE_TO && previousCommand !== SVGPathData.QUAD_TO && previousCommand !== SVGPathData.SMOOTH_QUAD_TO) {\n            return this.current;\n        }\n        // reflect point\n        const { current: { x: cx , y: cy  } , control: { x: ox , y: oy  }  } = this;\n        const point = new Point(2 * cx - ox, 2 * cy - oy);\n        return point;\n    }\n    makeAbsolute(point) {\n        if (this.command.relative) {\n            const { x , y  } = this.current;\n            point.x += x;\n            point.y += y;\n        }\n        return point;\n    }\n    addMarker(point, from, priorTo) {\n        const { points , angles  } = this;\n        // if the last angle isn't filled in because we didn't have this point yet ...\n        if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n            angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);\n        }\n        this.addMarkerAngle(point, from ? from.angleTo(point) : null);\n    }\n    addMarkerAngle(point, angle) {\n        this.points.push(point);\n        this.angles.push(angle);\n    }\n    getMarkerPoints() {\n        return this.points;\n    }\n    getMarkerAngles() {\n        const { angles  } = this;\n        const len = angles.length;\n        for(let i = 0; i < len; i++){\n            if (!angles[i]) {\n                for(let j = i + 1; j < len; j++){\n                    if (angles[j]) {\n                        angles[i] = angles[j];\n                        break;\n                    }\n                }\n            }\n        }\n        return angles;\n    }\n    constructor(path){\n        super(path// Fix spaces after signs.\n        .replace(/([+\\-.])\\s+/gm, '$1')// Remove invalid part.\n        .replace(/[^MmZzLlHhVvCcSsQqTtAae\\d\\s.,+-].*/g, ''));\n        this.control = new Point(0, 0);\n        this.start = new Point(0, 0);\n        this.current = new Point(0, 0);\n        this.command = null;\n        this.commands = this.commands;\n        this.i = -1;\n        this.previousCommand = null;\n        this.points = [];\n        this.angles = [];\n    }\n}\n\nclass PathElement extends RenderedElement {\n    path(ctx) {\n        const { pathParser  } = this;\n        const boundingBox = new BoundingBox();\n        pathParser.reset();\n        if (ctx) {\n            ctx.beginPath();\n        }\n        while(!pathParser.isEnd()){\n            switch(pathParser.next().type){\n                case PathParser.MOVE_TO:\n                    this.pathM(ctx, boundingBox);\n                    break;\n                case PathParser.LINE_TO:\n                    this.pathL(ctx, boundingBox);\n                    break;\n                case PathParser.HORIZ_LINE_TO:\n                    this.pathH(ctx, boundingBox);\n                    break;\n                case PathParser.VERT_LINE_TO:\n                    this.pathV(ctx, boundingBox);\n                    break;\n                case PathParser.CURVE_TO:\n                    this.pathC(ctx, boundingBox);\n                    break;\n                case PathParser.SMOOTH_CURVE_TO:\n                    this.pathS(ctx, boundingBox);\n                    break;\n                case PathParser.QUAD_TO:\n                    this.pathQ(ctx, boundingBox);\n                    break;\n                case PathParser.SMOOTH_QUAD_TO:\n                    this.pathT(ctx, boundingBox);\n                    break;\n                case PathParser.ARC:\n                    this.pathA(ctx, boundingBox);\n                    break;\n                case PathParser.CLOSE_PATH:\n                    this.pathZ(ctx, boundingBox);\n                    break;\n            }\n        }\n        return boundingBox;\n    }\n    getBoundingBox(_ctx) {\n        return this.path();\n    }\n    getMarkers() {\n        const { pathParser  } = this;\n        const points = pathParser.getMarkerPoints();\n        const angles = pathParser.getMarkerAngles();\n        const markers = points.map((point, i)=>[\n                point,\n                angles[i]\n            ]\n        );\n        return markers;\n    }\n    renderChildren(ctx) {\n        this.path(ctx);\n        this.document.screen.mouse.checkPath(this, ctx);\n        const fillRuleStyleProp = this.getStyle('fill-rule');\n        if (ctx.fillStyle !== '') {\n            if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n                ctx.fill(fillRuleStyleProp.getString());\n            } else {\n                ctx.fill();\n            }\n        }\n        if (ctx.strokeStyle !== '') {\n            if (this.getAttribute('vector-effect').getString() === 'non-scaling-stroke') {\n                ctx.save();\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                ctx.stroke();\n                ctx.restore();\n            } else {\n                ctx.stroke();\n            }\n        }\n        const markers = this.getMarkers();\n        if (markers) {\n            const markersLastIndex = markers.length - 1;\n            const markerStartStyleProp = this.getStyle('marker-start');\n            const markerMidStyleProp = this.getStyle('marker-mid');\n            const markerEndStyleProp = this.getStyle('marker-end');\n            if (markerStartStyleProp.isUrlDefinition()) {\n                const marker = markerStartStyleProp.getDefinition();\n                const [point, angle] = markers[0];\n                marker.render(ctx, point, angle);\n            }\n            if (markerMidStyleProp.isUrlDefinition()) {\n                const marker = markerMidStyleProp.getDefinition();\n                for(let i = 1; i < markersLastIndex; i++){\n                    const [point, angle] = markers[i];\n                    marker.render(ctx, point, angle);\n                }\n            }\n            if (markerEndStyleProp.isUrlDefinition()) {\n                const marker = markerEndStyleProp.getDefinition();\n                const [point, angle] = markers[markersLastIndex];\n                marker.render(ctx, point, angle);\n            }\n        }\n    }\n    static pathM(pathParser) {\n        const point = pathParser.getAsCurrentPoint();\n        pathParser.start = pathParser.current;\n        return {\n            point\n        };\n    }\n    pathM(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { point  } = PathElement.pathM(pathParser);\n        const { x , y  } = point;\n        pathParser.addMarker(point);\n        boundingBox.addPoint(x, y);\n        if (ctx) {\n            ctx.moveTo(x, y);\n        }\n    }\n    static pathL(pathParser) {\n        const { current  } = pathParser;\n        const point = pathParser.getAsCurrentPoint();\n        return {\n            current,\n            point\n        };\n    }\n    pathL(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , point  } = PathElement.pathL(pathParser);\n        const { x , y  } = point;\n        pathParser.addMarker(point, current);\n        boundingBox.addPoint(x, y);\n        if (ctx) {\n            ctx.lineTo(x, y);\n        }\n    }\n    static pathH(pathParser) {\n        const { current , command  } = pathParser;\n        const point = new Point((command.relative ? current.x : 0) + command.x, current.y);\n        pathParser.current = point;\n        return {\n            current,\n            point\n        };\n    }\n    pathH(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , point  } = PathElement.pathH(pathParser);\n        const { x , y  } = point;\n        pathParser.addMarker(point, current);\n        boundingBox.addPoint(x, y);\n        if (ctx) {\n            ctx.lineTo(x, y);\n        }\n    }\n    static pathV(pathParser) {\n        const { current , command  } = pathParser;\n        const point = new Point(current.x, (command.relative ? current.y : 0) + command.y);\n        pathParser.current = point;\n        return {\n            current,\n            point\n        };\n    }\n    pathV(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , point  } = PathElement.pathV(pathParser);\n        const { x , y  } = point;\n        pathParser.addMarker(point, current);\n        boundingBox.addPoint(x, y);\n        if (ctx) {\n            ctx.lineTo(x, y);\n        }\n    }\n    static pathC(pathParser) {\n        const { current  } = pathParser;\n        const point = pathParser.getPoint('x1', 'y1');\n        const controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n        const currentPoint = pathParser.getAsCurrentPoint();\n        return {\n            current,\n            point,\n            controlPoint,\n            currentPoint\n        };\n    }\n    pathC(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , point , controlPoint , currentPoint  } = PathElement.pathC(pathParser);\n        pathParser.addMarker(currentPoint, controlPoint, point);\n        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n            ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n    }\n    static pathS(pathParser) {\n        const { current  } = pathParser;\n        const point = pathParser.getReflectedControlPoint();\n        const controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n        const currentPoint = pathParser.getAsCurrentPoint();\n        return {\n            current,\n            point,\n            controlPoint,\n            currentPoint\n        };\n    }\n    pathS(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , point , controlPoint , currentPoint  } = PathElement.pathS(pathParser);\n        pathParser.addMarker(currentPoint, controlPoint, point);\n        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n            ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n    }\n    static pathQ(pathParser) {\n        const { current  } = pathParser;\n        const controlPoint = pathParser.getAsControlPoint('x1', 'y1');\n        const currentPoint = pathParser.getAsCurrentPoint();\n        return {\n            current,\n            controlPoint,\n            currentPoint\n        };\n    }\n    pathQ(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , controlPoint , currentPoint  } = PathElement.pathQ(pathParser);\n        pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n            ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n    }\n    static pathT(pathParser) {\n        const { current  } = pathParser;\n        const controlPoint = pathParser.getReflectedControlPoint();\n        pathParser.control = controlPoint;\n        const currentPoint = pathParser.getAsCurrentPoint();\n        return {\n            current,\n            controlPoint,\n            currentPoint\n        };\n    }\n    pathT(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { current , controlPoint , currentPoint  } = PathElement.pathT(pathParser);\n        pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        if (ctx) {\n            ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        }\n    }\n    static pathA(pathParser) {\n        const { current , command  } = pathParser;\n        let { rX , rY , xRot , lArcFlag , sweepFlag  } = command;\n        const xAxisRotation = xRot * (Math.PI / 180);\n        const currentPoint = pathParser.getAsCurrentPoint();\n        // Conversion from endpoint to center parameterization\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        // x1', y1'\n        const currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2);\n        // adjust radii\n        const l = Math.pow(currp.x, 2) / Math.pow(rX, 2) + Math.pow(currp.y, 2) / Math.pow(rY, 2);\n        if (l > 1) {\n            rX *= Math.sqrt(l);\n            rY *= Math.sqrt(l);\n        }\n        // cx', cy'\n        let s = (lArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rX, 2) * Math.pow(rY, 2) - Math.pow(rX, 2) * Math.pow(currp.y, 2) - Math.pow(rY, 2) * Math.pow(currp.x, 2)) / (Math.pow(rX, 2) * Math.pow(currp.y, 2) + Math.pow(rY, 2) * Math.pow(currp.x, 2)));\n        if (isNaN(s)) {\n            s = 0;\n        }\n        const cpp = new Point(s * rX * currp.y / rY, s * -rY * currp.x / rX);\n        // cx, cy\n        const centp = new Point((current.x + currentPoint.x) / 2 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y);\n        // initial angle\n        const a1 = vectorsAngle([\n            1,\n            0\n        ], [\n            (currp.x - cpp.x) / rX,\n            (currp.y - cpp.y) / rY\n        ]) // 1\n        ;\n        // angle delta\n        const u = [\n            (currp.x - cpp.x) / rX,\n            (currp.y - cpp.y) / rY\n        ];\n        const v = [\n            (-currp.x - cpp.x) / rX,\n            (-currp.y - cpp.y) / rY\n        ];\n        let ad = vectorsAngle(u, v) // \n        ;\n        if (vectorsRatio(u, v) <= -1) {\n            ad = Math.PI;\n        }\n        if (vectorsRatio(u, v) >= 1) {\n            ad = 0;\n        }\n        return {\n            currentPoint,\n            rX,\n            rY,\n            sweepFlag,\n            xAxisRotation,\n            centp,\n            a1,\n            ad\n        };\n    }\n    pathA(ctx, boundingBox) {\n        const { pathParser  } = this;\n        const { currentPoint , rX , rY , sweepFlag , xAxisRotation , centp , a1 , ad  } = PathElement.pathA(pathParser);\n        // for markers\n        const dir = 1 - sweepFlag ? 1 : -1;\n        const ah = a1 + dir * (ad / 2);\n        const halfWay = new Point(centp.x + rX * Math.cos(ah), centp.y + rY * Math.sin(ah));\n        pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n        pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);\n        boundingBox.addPoint(currentPoint.x, currentPoint.y) // TODO: this is too naive, make it better\n        ;\n        if (ctx && !isNaN(a1) && !isNaN(ad)) {\n            const r = rX > rY ? rX : rY;\n            const sx = rX > rY ? 1 : rX / rY;\n            const sy = rX > rY ? rY / rX : 1;\n            ctx.translate(centp.x, centp.y);\n            ctx.rotate(xAxisRotation);\n            ctx.scale(sx, sy);\n            ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag));\n            ctx.scale(1 / sx, 1 / sy);\n            ctx.rotate(-xAxisRotation);\n            ctx.translate(-centp.x, -centp.y);\n        }\n    }\n    static pathZ(pathParser) {\n        pathParser.current = pathParser.start;\n    }\n    pathZ(ctx, boundingBox) {\n        PathElement.pathZ(this.pathParser);\n        if (ctx) {\n            // only close path if it is not a straight line\n            if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {\n                ctx.closePath();\n            }\n        }\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'path';\n        this.pathParser = new PathParser(this.getAttribute('d').getString());\n    }\n}\n\nclass SVGElement extends RenderedElement {\n    setContext(ctx) {\n        var ref;\n        const { document  } = this;\n        const { screen , window  } = document;\n        const canvas = ctx.canvas;\n        screen.setDefaults(ctx);\n        if ('style' in canvas && typeof ctx.font !== 'undefined' && window && typeof window.getComputedStyle !== 'undefined') {\n            ctx.font = window.getComputedStyle(canvas).getPropertyValue('font');\n            const fontSizeProp = new Property(document, 'fontSize', Font.parse(ctx.font).fontSize);\n            if (fontSizeProp.hasValue()) {\n                document.rootEmSize = fontSizeProp.getPixels('y');\n                document.emSize = document.rootEmSize;\n            }\n        }\n        // create new view port\n        if (!this.getAttribute('x').hasValue()) {\n            this.getAttribute('x', true).setValue(0);\n        }\n        if (!this.getAttribute('y').hasValue()) {\n            this.getAttribute('y', true).setValue(0);\n        }\n        let { width , height  } = screen.viewPort;\n        if (!this.getStyle('width').hasValue()) {\n            this.getStyle('width', true).setValue('100%');\n        }\n        if (!this.getStyle('height').hasValue()) {\n            this.getStyle('height', true).setValue('100%');\n        }\n        if (!this.getStyle('color').hasValue()) {\n            this.getStyle('color', true).setValue('black');\n        }\n        const refXAttr = this.getAttribute('refX');\n        const refYAttr = this.getAttribute('refY');\n        const viewBoxAttr = this.getAttribute('viewBox');\n        const viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;\n        const clip = !this.root && this.getStyle('overflow').getValue('hidden') !== 'visible';\n        let minX = 0;\n        let minY = 0;\n        let clipX = 0;\n        let clipY = 0;\n        if (viewBox) {\n            minX = viewBox[0];\n            minY = viewBox[1];\n        }\n        if (!this.root) {\n            width = this.getStyle('width').getPixels('x');\n            height = this.getStyle('height').getPixels('y');\n            if (this.type === 'marker') {\n                clipX = minX;\n                clipY = minY;\n                minX = 0;\n                minY = 0;\n            }\n        }\n        screen.viewPort.setCurrent(width, height);\n        // Default value of transform-origin is center only for root SVG elements\n        // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform-origin\n        if (this.node // is not temporary SVGElement\n         && (!this.parent || ((ref = this.node.parentNode) === null || ref === void 0 ? void 0 : ref.nodeName) === 'foreignObject') && this.getStyle('transform', false, true).hasValue() && !this.getStyle('transform-origin', false, true).hasValue()) {\n            this.getStyle('transform-origin', true, true).setValue('50% 50%');\n        }\n        super.setContext(ctx);\n        ctx.translate(this.getAttribute('x').getPixels('x'), this.getAttribute('y').getPixels('y'));\n        if (viewBox) {\n            width = viewBox[2];\n            height = viewBox[3];\n        }\n        document.setViewBox({\n            ctx,\n            aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n            width: screen.viewPort.width,\n            desiredWidth: width,\n            height: screen.viewPort.height,\n            desiredHeight: height,\n            minX,\n            minY,\n            refX: refXAttr.getValue(),\n            refY: refYAttr.getValue(),\n            clip,\n            clipX,\n            clipY\n        });\n        if (viewBox) {\n            screen.viewPort.removeCurrent();\n            screen.viewPort.setCurrent(width, height);\n        }\n    }\n    clearContext(ctx) {\n        super.clearContext(ctx);\n        this.document.screen.viewPort.removeCurrent();\n    }\n    /**\n   * Resize SVG to fit in given size.\n   * @param width\n   * @param height\n   * @param preserveAspectRatio\n   */ resize(width) {\n        let height = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : width, preserveAspectRatio = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;\n        const widthAttr = this.getAttribute('width', true);\n        const heightAttr = this.getAttribute('height', true);\n        const viewBoxAttr = this.getAttribute('viewBox');\n        const styleAttr = this.getAttribute('style');\n        const originWidth = widthAttr.getNumber(0);\n        const originHeight = heightAttr.getNumber(0);\n        if (preserveAspectRatio) {\n            if (typeof preserveAspectRatio === 'string') {\n                this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio);\n            } else {\n                const preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio');\n                if (preserveAspectRatioAttr.hasValue()) {\n                    preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'));\n                }\n            }\n        }\n        widthAttr.setValue(width);\n        heightAttr.setValue(height);\n        if (!viewBoxAttr.hasValue()) {\n            viewBoxAttr.setValue(\"0 0 \".concat(originWidth || width, \" \").concat(originHeight || height));\n        }\n        if (styleAttr.hasValue()) {\n            const widthStyle = this.getStyle('width');\n            const heightStyle = this.getStyle('height');\n            if (widthStyle.hasValue()) {\n                widthStyle.setValue(\"\".concat(width, \"px\"));\n            }\n            if (heightStyle.hasValue()) {\n                heightStyle.setValue(\"\".concat(height, \"px\"));\n            }\n        }\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'svg';\n        this.root = false;\n    }\n}\n\nclass RectElement extends PathElement {\n    path(ctx) {\n        const x = this.getAttribute('x').getPixels('x');\n        const y = this.getAttribute('y').getPixels('y');\n        const width = this.getStyle('width', false, true).getPixels('x');\n        const height = this.getStyle('height', false, true).getPixels('y');\n        const rxAttr = this.getAttribute('rx');\n        const ryAttr = this.getAttribute('ry');\n        let rx = rxAttr.getPixels('x');\n        let ry = ryAttr.getPixels('y');\n        if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n            ry = rx;\n        }\n        if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n            rx = ry;\n        }\n        rx = Math.min(rx, width / 2);\n        ry = Math.min(ry, height / 2);\n        if (ctx) {\n            const KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n            ctx.beginPath() // always start the path so we don't fill prior paths\n            ;\n            if (height > 0 && width > 0) {\n                ctx.moveTo(x + rx, y);\n                ctx.lineTo(x + width - rx, y);\n                ctx.bezierCurveTo(x + width - rx + KAPPA * rx, y, x + width, y + ry - KAPPA * ry, x + width, y + ry);\n                ctx.lineTo(x + width, y + height - ry);\n                ctx.bezierCurveTo(x + width, y + height - ry + KAPPA * ry, x + width - rx + KAPPA * rx, y + height, x + width - rx, y + height);\n                ctx.lineTo(x + rx, y + height);\n                ctx.bezierCurveTo(x + rx - KAPPA * rx, y + height, x, y + height - ry + KAPPA * ry, x, y + height - ry);\n                ctx.lineTo(x, y + ry);\n                ctx.bezierCurveTo(x, y + ry - KAPPA * ry, x + rx - KAPPA * rx, y, x + rx, y);\n                ctx.closePath();\n            }\n        }\n        return new BoundingBox(x, y, x + width, y + height);\n    }\n    getMarkers() {\n        return null;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'rect';\n    }\n}\n\nclass CircleElement extends PathElement {\n    path(ctx) {\n        const cx = this.getAttribute('cx').getPixels('x');\n        const cy = this.getAttribute('cy').getPixels('y');\n        const r = this.getAttribute('r').getPixels();\n        if (ctx && r > 0) {\n            ctx.beginPath();\n            ctx.arc(cx, cy, r, 0, Math.PI * 2, false);\n            ctx.closePath();\n        }\n        return new BoundingBox(cx - r, cy - r, cx + r, cy + r);\n    }\n    getMarkers() {\n        return null;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'circle';\n    }\n}\n\nclass EllipseElement extends PathElement {\n    path(ctx) {\n        const KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n        const rx = this.getAttribute('rx').getPixels('x');\n        const ry = this.getAttribute('ry').getPixels('y');\n        const cx = this.getAttribute('cx').getPixels('x');\n        const cy = this.getAttribute('cy').getPixels('y');\n        if (ctx && rx > 0 && ry > 0) {\n            ctx.beginPath();\n            ctx.moveTo(cx + rx, cy);\n            ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);\n            ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);\n            ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);\n            ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);\n            ctx.closePath();\n        }\n        return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n    }\n    getMarkers() {\n        return null;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'ellipse';\n    }\n}\n\nclass LineElement extends PathElement {\n    getPoints() {\n        return [\n            new Point(this.getAttribute('x1').getPixels('x'), this.getAttribute('y1').getPixels('y')),\n            new Point(this.getAttribute('x2').getPixels('x'), this.getAttribute('y2').getPixels('y'))\n        ];\n    }\n    path(ctx) {\n        const [{ x: x0 , y: y0  }, { x: x1 , y: y1  }] = this.getPoints();\n        if (ctx) {\n            ctx.beginPath();\n            ctx.moveTo(x0, y0);\n            ctx.lineTo(x1, y1);\n        }\n        return new BoundingBox(x0, y0, x1, y1);\n    }\n    getMarkers() {\n        const [p0, p1] = this.getPoints();\n        const a = p0.angleTo(p1);\n        return [\n            [\n                p0,\n                a\n            ],\n            [\n                p1,\n                a\n            ]\n        ];\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'line';\n    }\n}\n\nclass PolylineElement extends PathElement {\n    path(ctx) {\n        const { points  } = this;\n        const [{ x: x0 , y: y0  }] = points;\n        const boundingBox = new BoundingBox(x0, y0);\n        if (ctx) {\n            ctx.beginPath();\n            ctx.moveTo(x0, y0);\n        }\n        points.forEach((param)=>{\n            let { x , y  } = param;\n            boundingBox.addPoint(x, y);\n            if (ctx) {\n                ctx.lineTo(x, y);\n            }\n        });\n        return boundingBox;\n    }\n    getMarkers() {\n        const { points  } = this;\n        const lastIndex = points.length - 1;\n        const markers = [];\n        points.forEach((point, i)=>{\n            if (i === lastIndex) {\n                return;\n            }\n            markers.push([\n                point,\n                point.angleTo(points[i + 1])\n            ]);\n        });\n        if (markers.length > 0) {\n            markers.push([\n                points[points.length - 1],\n                markers[markers.length - 1][1]\n            ]);\n        }\n        return markers;\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'polyline';\n        this.points = [];\n        this.points = Point.parsePath(this.getAttribute('points').getString());\n    }\n}\n\nclass PolygonElement extends PolylineElement {\n    path(ctx) {\n        const boundingBox = super.path(ctx);\n        const [{ x , y  }] = this.points;\n        if (ctx) {\n            ctx.lineTo(x, y);\n            ctx.closePath();\n        }\n        return boundingBox;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'polygon';\n    }\n}\n\nclass PatternElement extends Element {\n    createPattern(ctx, _, parentOpacityProp) {\n        const width = this.getStyle('width').getPixels('x', true);\n        const height = this.getStyle('height').getPixels('y', true);\n        // render me using a temporary svg element\n        const patternSvg = new SVGElement(this.document, null);\n        patternSvg.attributes.set('viewBox', new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue()));\n        patternSvg.attributes.set('width', new Property(this.document, 'width', \"\".concat(width, \"px\")));\n        patternSvg.attributes.set('height', new Property(this.document, 'height', \"\".concat(height, \"px\")));\n        patternSvg.attributes.set('transform', new Property(this.document, 'transform', this.getAttribute('patternTransform').getValue()));\n        patternSvg.children = this.children;\n        const patternCanvas = this.document.createCanvas(width, height);\n        const patternCtx = patternCanvas.getContext('2d');\n        const xAttr = this.getAttribute('x');\n        const yAttr = this.getAttribute('y');\n        if (xAttr.hasValue() && yAttr.hasValue()) {\n            patternCtx.translate(xAttr.getPixels('x', true), yAttr.getPixels('y', true));\n        }\n        if (parentOpacityProp.hasValue()) {\n            this.styles.set('fill-opacity', parentOpacityProp);\n        } else {\n            this.styles.delete('fill-opacity');\n        }\n        // render 3x3 grid so when we transform there's no white space on edges\n        for(let x = -1; x <= 1; x++){\n            for(let y = -1; y <= 1; y++){\n                patternCtx.save();\n                patternSvg.attributes.set('x', new Property(this.document, 'x', x * patternCanvas.width));\n                patternSvg.attributes.set('y', new Property(this.document, 'y', y * patternCanvas.height));\n                patternSvg.render(patternCtx);\n                patternCtx.restore();\n            }\n        }\n        const pattern = ctx.createPattern(patternCanvas, 'repeat');\n        return pattern;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'pattern';\n    }\n}\n\nclass MarkerElement extends Element {\n    render(ctx, point, angle) {\n        if (!point) {\n            return;\n        }\n        const { x , y  } = point;\n        const orient = this.getAttribute('orient').getString('auto');\n        const markerUnits = this.getAttribute('markerUnits').getString('strokeWidth');\n        ctx.translate(x, y);\n        if (orient === 'auto') {\n            ctx.rotate(angle);\n        }\n        if (markerUnits === 'strokeWidth') {\n            ctx.scale(ctx.lineWidth, ctx.lineWidth);\n        }\n        ctx.save();\n        // render me using a temporary svg element\n        const markerSvg = new SVGElement(this.document);\n        markerSvg.type = this.type;\n        markerSvg.attributes.set('viewBox', new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue()));\n        markerSvg.attributes.set('refX', new Property(this.document, 'refX', this.getAttribute('refX').getValue()));\n        markerSvg.attributes.set('refY', new Property(this.document, 'refY', this.getAttribute('refY').getValue()));\n        markerSvg.attributes.set('width', new Property(this.document, 'width', this.getAttribute('markerWidth').getValue()));\n        markerSvg.attributes.set('height', new Property(this.document, 'height', this.getAttribute('markerHeight').getValue()));\n        markerSvg.attributes.set('overflow', new Property(this.document, 'overflow', this.getAttribute('overflow').getValue()));\n        markerSvg.attributes.set('fill', new Property(this.document, 'fill', this.getAttribute('fill').getColor('black')));\n        markerSvg.attributes.set('stroke', new Property(this.document, 'stroke', this.getAttribute('stroke').getValue('none')));\n        markerSvg.children = this.children;\n        markerSvg.render(ctx);\n        ctx.restore();\n        if (markerUnits === 'strokeWidth') {\n            ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n        }\n        if (orient === 'auto') {\n            ctx.rotate(-angle);\n        }\n        ctx.translate(-x, -y);\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'marker';\n    }\n}\n\nclass DefsElement extends Element {\n    render() {\n    // NOOP\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'defs';\n    }\n}\n\nclass GElement extends RenderedElement {\n    getBoundingBox(ctx) {\n        const boundingBox = new BoundingBox();\n        this.children.forEach((child)=>{\n            boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n        });\n        return boundingBox;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'g';\n    }\n}\n\nclass GradientElement extends Element {\n    getGradientUnits() {\n        return this.getAttribute('gradientUnits').getString('objectBoundingBox');\n    }\n    createGradient(ctx, element, parentOpacityProp) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n        let stopsContainer = this;\n        if (this.getHrefAttribute().hasValue()) {\n            stopsContainer = this.getHrefAttribute().getDefinition();\n            this.inheritStopContainer(stopsContainer);\n        }\n        const { stops  } = stopsContainer;\n        const gradient = this.getGradient(ctx, element);\n        if (!gradient) {\n            return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);\n        }\n        stops.forEach((stop)=>{\n            gradient.addColorStop(stop.offset, this.addParentOpacity(parentOpacityProp, stop.color));\n        });\n        if (this.getAttribute('gradientTransform').hasValue()) {\n            // render as transformed pattern on temporary canvas\n            const { document  } = this;\n            const { MAX_VIRTUAL_PIXELS  } = Screen;\n            const { viewPort  } = document.screen;\n            const rootView = viewPort.getRoot();\n            const rect = new RectElement(document);\n            rect.attributes.set('x', new Property(document, 'x', -MAX_VIRTUAL_PIXELS / 3));\n            rect.attributes.set('y', new Property(document, 'y', -MAX_VIRTUAL_PIXELS / 3));\n            rect.attributes.set('width', new Property(document, 'width', MAX_VIRTUAL_PIXELS));\n            rect.attributes.set('height', new Property(document, 'height', MAX_VIRTUAL_PIXELS));\n            const group = new GElement(document);\n            group.attributes.set('transform', new Property(document, 'transform', this.getAttribute('gradientTransform').getValue()));\n            group.children = [\n                rect\n            ];\n            const patternSvg = new SVGElement(document);\n            patternSvg.attributes.set('x', new Property(document, 'x', 0));\n            patternSvg.attributes.set('y', new Property(document, 'y', 0));\n            patternSvg.attributes.set('width', new Property(document, 'width', rootView.width));\n            patternSvg.attributes.set('height', new Property(document, 'height', rootView.height));\n            patternSvg.children = [\n                group\n            ];\n            const patternCanvas = document.createCanvas(rootView.width, rootView.height);\n            const patternCtx = patternCanvas.getContext('2d');\n            patternCtx.fillStyle = gradient;\n            patternSvg.render(patternCtx);\n            return patternCtx.createPattern(patternCanvas, 'no-repeat');\n        }\n        return gradient;\n    }\n    inheritStopContainer(stopsContainer) {\n        this.attributesToInherit.forEach((attributeToInherit)=>{\n            if (!this.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {\n                this.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());\n            }\n        });\n    }\n    addParentOpacity(parentOpacityProp, color) {\n        if (parentOpacityProp.hasValue()) {\n            const colorProp = new Property(this.document, 'color', color);\n            return colorProp.addOpacity(parentOpacityProp).getColor();\n        }\n        return color;\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.attributesToInherit = [\n            'gradientUnits'\n        ];\n        this.stops = [];\n        const { stops , children  } = this;\n        children.forEach((child)=>{\n            if (child.type === 'stop') {\n                stops.push(child);\n            }\n        });\n    }\n}\n\nclass LinearGradientElement extends GradientElement {\n    getGradient(ctx, element) {\n        const isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n        const boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;\n        if (isBoundingBoxUnits && !boundingBox) {\n            return null;\n        }\n        if (!this.getAttribute('x1').hasValue() && !this.getAttribute('y1').hasValue() && !this.getAttribute('x2').hasValue() && !this.getAttribute('y2').hasValue()) {\n            this.getAttribute('x1', true).setValue(0);\n            this.getAttribute('y1', true).setValue(0);\n            this.getAttribute('x2', true).setValue(1);\n            this.getAttribute('y2', true).setValue(0);\n        }\n        const x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber() : this.getAttribute('x1').getPixels('x');\n        const y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber() : this.getAttribute('y1').getPixels('y');\n        const x2 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber() : this.getAttribute('x2').getPixels('x');\n        const y2 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber() : this.getAttribute('y2').getPixels('y');\n        if (x1 === x2 && y1 === y2) {\n            return null;\n        }\n        return ctx.createLinearGradient(x1, y1, x2, y2);\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'linearGradient';\n        this.attributesToInherit.push('x1', 'y1', 'x2', 'y2');\n    }\n}\n\nclass RadialGradientElement extends GradientElement {\n    getGradient(ctx, element) {\n        const isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n        const boundingBox = element.getBoundingBox(ctx);\n        if (isBoundingBoxUnits && !boundingBox) {\n            return null;\n        }\n        if (!this.getAttribute('cx').hasValue()) {\n            this.getAttribute('cx', true).setValue('50%');\n        }\n        if (!this.getAttribute('cy').hasValue()) {\n            this.getAttribute('cy', true).setValue('50%');\n        }\n        if (!this.getAttribute('r').hasValue()) {\n            this.getAttribute('r', true).setValue('50%');\n        }\n        const cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber() : this.getAttribute('cx').getPixels('x');\n        const cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber() : this.getAttribute('cy').getPixels('y');\n        let fx = cx;\n        let fy = cy;\n        if (this.getAttribute('fx').hasValue()) {\n            fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber() : this.getAttribute('fx').getPixels('x');\n        }\n        if (this.getAttribute('fy').hasValue()) {\n            fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber() : this.getAttribute('fy').getPixels('y');\n        }\n        const r = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2 * this.getAttribute('r').getNumber() : this.getAttribute('r').getPixels();\n        const fr = this.getAttribute('fr').getPixels();\n        return ctx.createRadialGradient(fx, fy, fr, cx, cy, r);\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'radialGradient';\n        this.attributesToInherit.push('cx', 'cy', 'r', 'fx', 'fy', 'fr');\n    }\n}\n\nclass StopElement extends Element {\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'stop';\n        const offset = Math.max(0, Math.min(1, this.getAttribute('offset').getNumber()));\n        const stopOpacity = this.getStyle('stop-opacity');\n        let stopColor = this.getStyle('stop-color', true);\n        if (stopColor.getString() === '') {\n            stopColor.setValue('#000');\n        }\n        if (stopOpacity.hasValue()) {\n            stopColor = stopColor.addOpacity(stopOpacity);\n        }\n        this.offset = offset;\n        this.color = stopColor.getColor();\n    }\n}\n\nclass AnimateElement extends Element {\n    getProperty() {\n        const attributeType = this.getAttribute('attributeType').getString();\n        const attributeName = this.getAttribute('attributeName').getString();\n        if (attributeType === 'CSS') {\n            return this.parent.getStyle(attributeName, true);\n        }\n        return this.parent.getAttribute(attributeName, true);\n    }\n    calcValue() {\n        const { initialUnits  } = this;\n        const { progress , from , to  } = this.getProgress();\n        // tween value linearly\n        let newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;\n        if (initialUnits === '%') {\n            newValue *= 100 // numValue() returns 0-1 whereas properties are 0-100\n            ;\n        }\n        return \"\".concat(newValue).concat(initialUnits);\n    }\n    update(delta) {\n        const { parent  } = this;\n        const prop = this.getProperty();\n        // set initial value\n        if (!this.initialValue) {\n            this.initialValue = prop.getString();\n            this.initialUnits = prop.getUnits();\n        }\n        // if we're past the end time\n        if (this.duration > this.maxDuration) {\n            const fill = this.getAttribute('fill').getString('remove');\n            // loop for indefinitely repeating animations\n            if (this.getAttribute('repeatCount').getString() === 'indefinite' || this.getAttribute('repeatDur').getString() === 'indefinite') {\n                this.duration = 0;\n            } else if (fill === 'freeze' && !this.frozen) {\n                this.frozen = true;\n                if (parent && prop) {\n                    parent.animationFrozen = true;\n                    parent.animationFrozenValue = prop.getString();\n                }\n            } else if (fill === 'remove' && !this.removed) {\n                this.removed = true;\n                if (parent && prop) {\n                    prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);\n                }\n                return true;\n            }\n            return false;\n        }\n        this.duration += delta;\n        // if we're past the begin time\n        let updated = false;\n        if (this.begin < this.duration) {\n            let newValue = this.calcValue() // tween\n            ;\n            const typeAttr = this.getAttribute('type');\n            if (typeAttr.hasValue()) {\n                // for transform, etc.\n                const type = typeAttr.getString();\n                newValue = \"\".concat(type, \"(\").concat(newValue, \")\");\n            }\n            prop.setValue(newValue);\n            updated = true;\n        }\n        return updated;\n    }\n    getProgress() {\n        const { document , values  } = this;\n        let progress = (this.duration - this.begin) / (this.maxDuration - this.begin);\n        let from;\n        let to;\n        if (values.hasValue()) {\n            const p = progress * (values.getValue().length - 1);\n            const lb = Math.floor(p);\n            const ub = Math.ceil(p);\n            let value;\n            value = values.getValue()[lb];\n            from = new Property(document, 'from', value ? parseFloat(value) : 0);\n            value = values.getValue()[ub];\n            to = new Property(document, 'to', value ? parseFloat(value) : 0);\n            progress = (p - lb) / (ub - lb);\n        } else {\n            from = this.from;\n            to = this.to;\n        }\n        return {\n            progress,\n            from,\n            to\n        };\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'animate';\n        this.duration = 0;\n        this.initialUnits = '';\n        this.removed = false;\n        this.frozen = false;\n        document.screen.animations.push(this);\n        this.begin = this.getAttribute('begin').getMilliseconds();\n        this.maxDuration = this.begin + this.getAttribute('dur').getMilliseconds();\n        this.from = this.getAttribute('from');\n        this.to = this.getAttribute('to');\n        this.values = new Property(document, 'values', null);\n        const valuesAttr = this.getAttribute('values');\n        if (valuesAttr.hasValue()) {\n            this.values.setValue(valuesAttr.getString().split(';'));\n        }\n    }\n}\n\nclass AnimateColorElement extends AnimateElement {\n    calcValue() {\n        const { progress , from , to  } = this.getProgress();\n        const colorFrom = new RGBColor(from.getColor());\n        const colorTo = new RGBColor(to.getColor());\n        if (colorFrom.ok && colorTo.ok) {\n            // tween color linearly\n            const r = colorFrom.r + (colorTo.r - colorFrom.r) * progress;\n            const g = colorFrom.g + (colorTo.g - colorFrom.g) * progress;\n            const b = colorFrom.b + (colorTo.b - colorFrom.b) * progress;\n            // ? alpha\n            return \"rgb(\".concat(Math.floor(r), \", \").concat(Math.floor(g), \", \").concat(Math.floor(b), \")\");\n        }\n        return this.getAttribute('from').getColor();\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'animateColor';\n    }\n}\n\nclass AnimateTransformElement extends AnimateElement {\n    calcValue() {\n        const { progress , from: from1 , to: to1  } = this.getProgress();\n        // tween value linearly\n        const transformFrom = toNumbers(from1.getString());\n        const transformTo = toNumbers(to1.getString());\n        const newValue = transformFrom.map((from, i)=>{\n            const to = transformTo[i];\n            return from + (to - from) * progress;\n        }).join(' ');\n        return newValue;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'animateTransform';\n    }\n}\n\nclass FontFaceElement extends Element {\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'font-face';\n        this.ascent = this.getAttribute('ascent').getNumber();\n        this.descent = this.getAttribute('descent').getNumber();\n        this.unitsPerEm = this.getAttribute('units-per-em').getNumber();\n    }\n}\n\nclass GlyphElement extends PathElement {\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'glyph';\n        this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n        this.unicode = this.getAttribute('unicode').getString();\n        this.arabicForm = this.getAttribute('arabic-form').getString();\n    }\n}\n\nclass MissingGlyphElement extends GlyphElement {\n    constructor(...args){\n        super(...args);\n        this.type = 'missing-glyph';\n        this.horizAdvX = 0;\n    }\n}\n\nclass FontElement extends Element {\n    render() {\n    // NO RENDER\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'font';\n        this.isArabic = false;\n        this.glyphs = new Map();\n        this.arabicGlyphs = new Map();\n        this.isRTL = false;\n        this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n        const { definitions  } = document;\n        const { children  } = this;\n        for (const child of children){\n            if (child instanceof FontFaceElement) {\n                this.fontFace = child;\n                const fontFamilyStyle = child.getStyle('font-family');\n                if (fontFamilyStyle.hasValue()) {\n                    definitions.set(fontFamilyStyle.getString(), this);\n                }\n            } else if (child instanceof MissingGlyphElement) {\n                this.missingGlyph = child;\n            } else if (child instanceof GlyphElement) {\n                if (child.arabicForm) {\n                    this.isRTL = true;\n                    this.isArabic = true;\n                    let arabicGlyph = this.arabicGlyphs.get(child.unicode);\n                    if (typeof arabicGlyph === 'undefined') {\n                        arabicGlyph = new Map();\n                        this.arabicGlyphs.set(child.unicode, arabicGlyph);\n                    }\n                    arabicGlyph.set(child.arabicForm, child);\n                } else {\n                    this.glyphs.set(child.unicode, child);\n                }\n            }\n        }\n    }\n}\n\nclass TRefElement extends TextElement {\n    getText() {\n        const element = this.getHrefAttribute().getDefinition();\n        if (element) {\n            const firstChild = element.children[0];\n            if (firstChild) {\n                return firstChild.getText();\n            }\n        }\n        return '';\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'tref';\n    }\n}\n\nclass AElement extends TextElement {\n    getText() {\n        return this.text;\n    }\n    renderChildren(ctx) {\n        if (this.hasText) {\n            // render as text element\n            super.renderChildren(ctx);\n            const { document , x , y  } = this;\n            const { mouse  } = document.screen;\n            const fontSize = new Property(document, 'fontSize', Font.parse(document.ctx.font).fontSize);\n            // Do not calc bounding box if mouse is not working.\n            if (mouse.isWorking()) {\n                mouse.checkBoundingBox(this, new BoundingBox(x, y - fontSize.getPixels('y'), x + this.measureText(ctx), y));\n            }\n        } else if (this.children.length > 0) {\n            // render as temporary group\n            const g = new GElement(this.document);\n            g.children = this.children;\n            g.parent = this;\n            g.render(ctx);\n        }\n    }\n    onClick() {\n        const { window  } = this.document;\n        if (window) {\n            window.open(this.getHrefAttribute().getString());\n        }\n    }\n    onMouseMove() {\n        const ctx = this.document.ctx;\n        ctx.canvas.style.cursor = 'pointer';\n    }\n    constructor(document, node1, captureTextNodes){\n        super(document, node1, captureTextNodes);\n        this.type = 'a';\n        const { childNodes  } = node1;\n        const firstChild = childNodes[0];\n        const hasText = childNodes.length > 0 && Array.from(childNodes).every((node)=>node.nodeType === 3\n        );\n        this.hasText = hasText;\n        this.text = hasText ? this.getTextFromNode(firstChild) : '';\n    }\n}\n\nclass TextPathElement extends TextElement {\n    getText() {\n        return this.text;\n    }\n    path(ctx) {\n        const { dataArray  } = this;\n        if (ctx) {\n            ctx.beginPath();\n        }\n        dataArray.forEach((param)=>{\n            let { type , points  } = param;\n            switch(type){\n                case PathParser.LINE_TO:\n                    if (ctx) {\n                        ctx.lineTo(points[0], points[1]);\n                    }\n                    break;\n                case PathParser.MOVE_TO:\n                    if (ctx) {\n                        ctx.moveTo(points[0], points[1]);\n                    }\n                    break;\n                case PathParser.CURVE_TO:\n                    if (ctx) {\n                        ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);\n                    }\n                    break;\n                case PathParser.QUAD_TO:\n                    if (ctx) {\n                        ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);\n                    }\n                    break;\n                case PathParser.ARC:\n                    {\n                        const [cx, cy, rx, ry, theta, dTheta, psi, fs] = points;\n                        const r = rx > ry ? rx : ry;\n                        const scaleX = rx > ry ? 1 : rx / ry;\n                        const scaleY = rx > ry ? ry / rx : 1;\n                        if (ctx) {\n                            ctx.translate(cx, cy);\n                            ctx.rotate(psi);\n                            ctx.scale(scaleX, scaleY);\n                            ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs));\n                            ctx.scale(1 / scaleX, 1 / scaleY);\n                            ctx.rotate(-psi);\n                            ctx.translate(-cx, -cy);\n                        }\n                        break;\n                    }\n                case PathParser.CLOSE_PATH:\n                    if (ctx) {\n                        ctx.closePath();\n                    }\n                    break;\n            }\n        });\n    }\n    renderChildren(ctx) {\n        this.setTextData(ctx);\n        ctx.save();\n        const textDecoration = this.parent.getStyle('text-decoration').getString();\n        const fontSize = this.getFontSize();\n        const { glyphInfo  } = this;\n        const fill = ctx.fillStyle;\n        if (textDecoration === 'underline') {\n            ctx.beginPath();\n        }\n        glyphInfo.forEach((glyph, i)=>{\n            const { p0 , p1 , rotation , text: partialText  } = glyph;\n            ctx.save();\n            ctx.translate(p0.x, p0.y);\n            ctx.rotate(rotation);\n            if (ctx.fillStyle) {\n                ctx.fillText(partialText, 0, 0);\n            }\n            if (ctx.strokeStyle) {\n                ctx.strokeText(partialText, 0, 0);\n            }\n            ctx.restore();\n            if (textDecoration === 'underline') {\n                if (i === 0) {\n                    ctx.moveTo(p0.x, p0.y + fontSize / 8);\n                }\n                ctx.lineTo(p1.x, p1.y + fontSize / 5);\n            }\n        // // To assist with debugging visually, uncomment following\n        //\n        // ctx.beginPath();\n        // if (i % 2)\n        //   ctx.strokeStyle = 'red';\n        // else\n        //   ctx.strokeStyle = 'green';\n        // ctx.moveTo(p0.x, p0.y);\n        // ctx.lineTo(p1.x, p1.y);\n        // ctx.stroke();\n        // ctx.closePath();\n        });\n        if (textDecoration === 'underline') {\n            ctx.lineWidth = fontSize / 20;\n            ctx.strokeStyle = fill;\n            ctx.stroke();\n            ctx.closePath();\n        }\n        ctx.restore();\n    }\n    getLetterSpacingAt() {\n        let idx = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;\n        return this.letterSpacingCache[idx] || 0;\n    }\n    findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, dy, c, charI) {\n        let offset = inputOffset;\n        let glyphWidth = this.measureText(ctx, c);\n        if (c === ' ' && anchor === 'justify' && textFullWidth < fullPathWidth) {\n            glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n        }\n        if (charI > -1) {\n            offset += this.getLetterSpacingAt(charI);\n        }\n        const splineStep = this.textHeight / 20;\n        const p0 = this.getEquidistantPointOnPath(offset, splineStep, 0);\n        const p1 = this.getEquidistantPointOnPath(offset + glyphWidth, splineStep, 0);\n        const segment = {\n            p0,\n            p1\n        };\n        const rotation = p0 && p1 ? Math.atan2(p1.y - p0.y, p1.x - p0.x) : 0;\n        if (dy) {\n            const dyX = Math.cos(Math.PI / 2 + rotation) * dy;\n            const dyY = Math.cos(-rotation) * dy;\n            segment.p0 = {\n                ...p0,\n                x: p0.x + dyX,\n                y: p0.y + dyY\n            };\n            segment.p1 = {\n                ...p1,\n                x: p1.x + dyX,\n                y: p1.y + dyY\n            };\n        }\n        offset += glyphWidth;\n        return {\n            offset,\n            segment,\n            rotation\n        };\n    }\n    measureText(ctx, text) {\n        const { measuresCache  } = this;\n        const targetText = text || this.getText();\n        if (measuresCache.has(targetText)) {\n            return measuresCache.get(targetText);\n        }\n        const measure = this.measureTargetText(ctx, targetText);\n        measuresCache.set(targetText, measure);\n        return measure;\n    }\n    // This method supposes what all custom fonts already loaded.\n    // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n    // You need to call this method manually to update glyphs cache.\n    setTextData(ctx) {\n        if (this.glyphInfo) {\n            return;\n        }\n        const renderText = this.getText();\n        const chars = renderText.split('');\n        const spacesNumber = renderText.split(' ').length - 1;\n        const dx = this.parent.getAttribute('dx').split().map((_)=>_.getPixels('x')\n        );\n        const dy = this.parent.getAttribute('dy').getPixels('y');\n        const anchor = this.parent.getStyle('text-anchor').getString('start');\n        const thisSpacing = this.getStyle('letter-spacing');\n        const parentSpacing = this.parent.getStyle('letter-spacing');\n        let letterSpacing = 0;\n        if (!thisSpacing.hasValue() || thisSpacing.getValue() === 'inherit') {\n            letterSpacing = parentSpacing.getPixels();\n        } else if (thisSpacing.hasValue()) {\n            if (thisSpacing.getValue() !== 'initial' && thisSpacing.getValue() !== 'unset') {\n                letterSpacing = thisSpacing.getPixels();\n            }\n        }\n        // fill letter-spacing cache\n        const letterSpacingCache = [];\n        const textLen = renderText.length;\n        this.letterSpacingCache = letterSpacingCache;\n        for(let i1 = 0; i1 < textLen; i1++){\n            letterSpacingCache.push(typeof dx[i1] !== 'undefined' ? dx[i1] : letterSpacing);\n        }\n        const dxSum = letterSpacingCache.reduce((acc, cur, i)=>i === 0 ? 0 : acc + cur || 0\n        , 0);\n        const textWidth = this.measureText(ctx);\n        const textFullWidth = Math.max(textWidth + dxSum, 0);\n        this.textWidth = textWidth;\n        this.textHeight = this.getFontSize();\n        this.glyphInfo = [];\n        const fullPathWidth = this.getPathLength();\n        const startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth;\n        let offset = 0;\n        if (anchor === 'middle' || anchor === 'center') {\n            offset = -textFullWidth / 2;\n        }\n        if (anchor === 'end' || anchor === 'right') {\n            offset = -textFullWidth;\n        }\n        offset += startOffset;\n        chars.forEach((char, i)=>{\n            // Find such segment what distance between p0 and p1 is approx. width of glyph\n            const { offset: nextOffset , segment , rotation  } = this.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, dy, char, i);\n            offset = nextOffset;\n            if (!segment.p0 || !segment.p1) {\n                return;\n            }\n            // const width = this.getLineLength(\n            //   segment.p0.x,\n            //   segment.p0.y,\n            //   segment.p1.x,\n            //   segment.p1.y\n            // );\n            // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n            // Can foresee having a rough pair table built in that the developer can override as needed.\n            // Or use \"dx\" attribute of the <text> node as a naive replacement\n            // const kern = 0;\n            // placeholder for future implementation\n            // const midpoint = this.getPointOnLine(\n            //   kern + width / 2.0,\n            //   segment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y\n            // );\n            this.glyphInfo.push({\n                // transposeX: midpoint.x,\n                // transposeY: midpoint.y,\n                text: chars[i],\n                p0: segment.p0,\n                p1: segment.p1,\n                rotation\n            });\n        });\n    }\n    parsePathData(path) {\n        this.pathLength = -1 // reset path length\n        ;\n        if (!path) {\n            return [];\n        }\n        const pathCommands = [];\n        const { pathParser  } = path;\n        pathParser.reset();\n        // convert l, H, h, V, and v to L\n        while(!pathParser.isEnd()){\n            const { current  } = pathParser;\n            const startX = current ? current.x : 0;\n            const startY = current ? current.y : 0;\n            const command = pathParser.next();\n            let nextCommandType = command.type;\n            let points = [];\n            switch(command.type){\n                case PathParser.MOVE_TO:\n                    this.pathM(pathParser, points);\n                    break;\n                case PathParser.LINE_TO:\n                    nextCommandType = this.pathL(pathParser, points);\n                    break;\n                case PathParser.HORIZ_LINE_TO:\n                    nextCommandType = this.pathH(pathParser, points);\n                    break;\n                case PathParser.VERT_LINE_TO:\n                    nextCommandType = this.pathV(pathParser, points);\n                    break;\n                case PathParser.CURVE_TO:\n                    this.pathC(pathParser, points);\n                    break;\n                case PathParser.SMOOTH_CURVE_TO:\n                    nextCommandType = this.pathS(pathParser, points);\n                    break;\n                case PathParser.QUAD_TO:\n                    this.pathQ(pathParser, points);\n                    break;\n                case PathParser.SMOOTH_QUAD_TO:\n                    nextCommandType = this.pathT(pathParser, points);\n                    break;\n                case PathParser.ARC:\n                    points = this.pathA(pathParser);\n                    break;\n                case PathParser.CLOSE_PATH:\n                    PathElement.pathZ(pathParser);\n                    break;\n            }\n            if (command.type !== PathParser.CLOSE_PATH) {\n                pathCommands.push({\n                    type: nextCommandType,\n                    points,\n                    start: {\n                        x: startX,\n                        y: startY\n                    },\n                    pathLength: this.calcLength(startX, startY, nextCommandType, points)\n                });\n            } else {\n                pathCommands.push({\n                    type: PathParser.CLOSE_PATH,\n                    points: [],\n                    pathLength: 0\n                });\n            }\n        }\n        return pathCommands;\n    }\n    pathM(pathParser, points) {\n        const { x , y  } = PathElement.pathM(pathParser).point;\n        points.push(x, y);\n    }\n    pathL(pathParser, points) {\n        const { x , y  } = PathElement.pathL(pathParser).point;\n        points.push(x, y);\n        return PathParser.LINE_TO;\n    }\n    pathH(pathParser, points) {\n        const { x , y  } = PathElement.pathH(pathParser).point;\n        points.push(x, y);\n        return PathParser.LINE_TO;\n    }\n    pathV(pathParser, points) {\n        const { x , y  } = PathElement.pathV(pathParser).point;\n        points.push(x, y);\n        return PathParser.LINE_TO;\n    }\n    pathC(pathParser, points) {\n        const { point , controlPoint , currentPoint  } = PathElement.pathC(pathParser);\n        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n    pathS(pathParser, points) {\n        const { point , controlPoint , currentPoint  } = PathElement.pathS(pathParser);\n        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        return PathParser.CURVE_TO;\n    }\n    pathQ(pathParser, points) {\n        const { controlPoint , currentPoint  } = PathElement.pathQ(pathParser);\n        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n    pathT(pathParser, points) {\n        const { controlPoint , currentPoint  } = PathElement.pathT(pathParser);\n        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n        return PathParser.QUAD_TO;\n    }\n    pathA(pathParser) {\n        let { rX , rY , sweepFlag , xAxisRotation , centp , a1 , ad  } = PathElement.pathA(pathParser);\n        if (sweepFlag === 0 && ad > 0) {\n            ad -= 2 * Math.PI;\n        }\n        if (sweepFlag === 1 && ad < 0) {\n            ad += 2 * Math.PI;\n        }\n        return [\n            centp.x,\n            centp.y,\n            rX,\n            rY,\n            a1,\n            ad,\n            xAxisRotation,\n            sweepFlag\n        ];\n    }\n    calcLength(x, y, commandType, points) {\n        let len = 0;\n        let p1 = null;\n        let p2 = null;\n        let t = 0;\n        switch(commandType){\n            case PathParser.LINE_TO:\n                return this.getLineLength(x, y, points[0], points[1]);\n            case PathParser.CURVE_TO:\n                // Approximates by breaking curve into 100 line segments\n                len = 0;\n                p1 = this.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for(t = 0.01; t <= 1; t += 0.01){\n                    p2 = this.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case PathParser.QUAD_TO:\n                // Approximates by breaking curve into 100 line segments\n                len = 0;\n                p1 = this.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for(t = 0.01; t <= 1; t += 0.01){\n                    p2 = this.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case PathParser.ARC:\n                {\n                    // Approximates by breaking curve into line segments\n                    len = 0;\n                    const start = points[4];\n                    // 4 = theta\n                    const dTheta = points[5];\n                    // 5 = dTheta\n                    const end = points[4] + dTheta;\n                    let inc = Math.PI / 180;\n                    // 1 degree resolution\n                    if (Math.abs(start - end) < inc) {\n                        inc = Math.abs(start - end);\n                    }\n                    // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n                    p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                    if (dTheta < 0) {\n                        for(t = start - inc; t > end; t -= inc){\n                            p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                            p1 = p2;\n                        }\n                    } else {\n                        for(t = start + inc; t < end; t += inc){\n                            p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                            len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                            p1 = p2;\n                        }\n                    }\n                    p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                    len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    return len;\n                }\n        }\n        return 0;\n    }\n    getPointOnLine(dist, p1x, p1y, p2x, p2y) {\n        let fromX = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : p1x, fromY = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : p1y;\n        const m = (p2y - p1y) / (p2x - p1x + PSEUDO_ZERO);\n        let run = Math.sqrt(dist * dist / (1 + m * m));\n        if (p2x < p1x) {\n            run *= -1;\n        }\n        let rise = m * run;\n        let pt = null;\n        if (p2x === p1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise\n            };\n        } else if ((fromY - p1y) / (fromX - p1x + PSEUDO_ZERO) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise\n            };\n        } else {\n            let ix = 0;\n            let iy = 0;\n            const len = this.getLineLength(p1x, p1y, p2x, p2y);\n            if (len < PSEUDO_ZERO) {\n                return null;\n            }\n            let u = (fromX - p1x) * (p2x - p1x) + (fromY - p1y) * (p2y - p1y);\n            u /= len * len;\n            ix = p1x + u * (p2x - p1x);\n            iy = p1y + u * (p2y - p1y);\n            const pRise = this.getLineLength(fromX, fromY, ix, iy);\n            const pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt(pRun * pRun / (1 + m * m));\n            if (p2x < p1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise\n            };\n        }\n        return pt;\n    }\n    getPointOnPath(distance) {\n        const fullLen = this.getPathLength();\n        let cumulativePathLength = 0;\n        let p = null;\n        if (distance < -0.00005 || distance - 0.00005 > fullLen) {\n            return null;\n        }\n        const { dataArray  } = this;\n        for (const command of dataArray){\n            if (command && (command.pathLength < 0.00005 || cumulativePathLength + command.pathLength + 0.00005 < distance)) {\n                cumulativePathLength += command.pathLength;\n                continue;\n            }\n            const delta = distance - cumulativePathLength;\n            let currentT = 0;\n            switch(command.type){\n                case PathParser.LINE_TO:\n                    p = this.getPointOnLine(delta, command.start.x, command.start.y, command.points[0], command.points[1], command.start.x, command.start.y);\n                    break;\n                case PathParser.ARC:\n                    {\n                        const start = command.points[4];\n                        // 4 = theta\n                        const dTheta = command.points[5];\n                        // 5 = dTheta\n                        const end = command.points[4] + dTheta;\n                        currentT = start + delta / command.pathLength * dTheta;\n                        if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n                            break;\n                        }\n                        p = this.getPointOnEllipticalArc(command.points[0], command.points[1], command.points[2], command.points[3], currentT, command.points[6]);\n                        break;\n                    }\n                case PathParser.CURVE_TO:\n                    currentT = delta / command.pathLength;\n                    if (currentT > 1) {\n                        currentT = 1;\n                    }\n                    p = this.getPointOnCubicBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3], command.points[4], command.points[5]);\n                    break;\n                case PathParser.QUAD_TO:\n                    currentT = delta / command.pathLength;\n                    if (currentT > 1) {\n                        currentT = 1;\n                    }\n                    p = this.getPointOnQuadraticBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3]);\n                    break;\n            }\n            if (p) {\n                return p;\n            }\n            break;\n        }\n        return null;\n    }\n    getLineLength(x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n    getPathLength() {\n        if (this.pathLength === -1) {\n            this.pathLength = this.dataArray.reduce((length, command)=>command.pathLength > 0 ? length + command.pathLength : length\n            , 0);\n        }\n        return this.pathLength;\n    }\n    getPointOnCubicBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n        const x = p4x * CB1(pct) + p3x * CB2(pct) + p2x * CB3(pct) + p1x * CB4(pct);\n        const y = p4y * CB1(pct) + p3y * CB2(pct) + p2y * CB3(pct) + p1y * CB4(pct);\n        return {\n            x,\n            y\n        };\n    }\n    getPointOnQuadraticBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y) {\n        const x = p3x * QB1(pct) + p2x * QB2(pct) + p1x * QB3(pct);\n        const y = p3y * QB1(pct) + p2y * QB2(pct) + p1y * QB3(pct);\n        return {\n            x,\n            y\n        };\n    }\n    getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n        const cosPsi = Math.cos(psi);\n        const sinPsi = Math.sin(psi);\n        const pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta)\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n        };\n    }\n    // TODO need some optimisations. possibly build cache only for curved segments?\n    buildEquidistantCache(inputStep, inputPrecision) {\n        const fullLen = this.getPathLength();\n        const precision = inputPrecision || 0.25 // accuracy vs performance\n        ;\n        const step = inputStep || fullLen / 100;\n        if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {\n            // Prepare cache\n            this.equidistantCache = {\n                step,\n                precision,\n                points: []\n            };\n            // Calculate points\n            let s = 0;\n            for(let l = 0; l <= fullLen; l += precision){\n                const p0 = this.getPointOnPath(l);\n                const p1 = this.getPointOnPath(l + precision);\n                if (!p0 || !p1) {\n                    continue;\n                }\n                s += this.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                if (s >= step) {\n                    this.equidistantCache.points.push({\n                        x: p0.x,\n                        y: p0.y,\n                        distance: l\n                    });\n                    s -= step;\n                }\n            }\n        }\n    }\n    getEquidistantPointOnPath(targetDistance, step, precision) {\n        this.buildEquidistantCache(step, precision);\n        if (targetDistance < 0 || targetDistance - this.getPathLength() > 0.00005) {\n            return null;\n        }\n        const idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));\n        return this.equidistantCache.points[idx] || null;\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'textPath';\n        this.textWidth = 0;\n        this.textHeight = 0;\n        this.pathLength = -1;\n        this.glyphInfo = null;\n        this.letterSpacingCache = [];\n        this.measuresCache = new Map([\n            [\n                '',\n                0\n            ]\n        ]);\n        const pathElement = this.getHrefAttribute().getDefinition();\n        this.text = this.getTextFromNode();\n        this.dataArray = this.parsePathData(pathElement);\n    }\n}\n\n// groups: 1: mime-type (+ charset), 2: mime-type (w/o charset), 3: charset, 4: base64?, 5: body\nconst dataUriRegex = /^\\s*data:(([^/,;]+\\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;\nclass ImageElement extends RenderedElement {\n    async loadImage(href) {\n        try {\n            const image = await this.document.createImage(href);\n            this.image = image;\n        } catch (err) {\n            console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n        }\n        this.loaded = true;\n    }\n    async loadSvg(href) {\n        const match = dataUriRegex.exec(href);\n        if (match) {\n            const data = match[5];\n            if (data) {\n                if (match[4] === 'base64') {\n                    this.image = atob(data);\n                } else {\n                    this.image = decodeURIComponent(data);\n                }\n            }\n        } else {\n            try {\n                const response = await this.document.fetch(href);\n                const svg = await response.text();\n                this.image = svg;\n            } catch (err) {\n                console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n            }\n        }\n        this.loaded = true;\n    }\n    renderChildren(ctx) {\n        const { document , image , loaded  } = this;\n        const x = this.getAttribute('x').getPixels('x');\n        const y = this.getAttribute('y').getPixels('y');\n        const width = this.getStyle('width').getPixels('x');\n        const height = this.getStyle('height').getPixels('y');\n        if (!loaded || !image || !width || !height) {\n            return;\n        }\n        ctx.save();\n        ctx.translate(x, y);\n        if (typeof image === 'string') {\n            const subDocument = document.canvg.forkString(ctx, image, {\n                ignoreMouse: true,\n                ignoreAnimation: true,\n                ignoreDimensions: true,\n                ignoreClear: true,\n                offsetX: 0,\n                offsetY: 0,\n                scaleWidth: width,\n                scaleHeight: height\n            });\n            const { documentElement  } = subDocument.document;\n            if (documentElement) {\n                documentElement.parent = this;\n            }\n            void subDocument.render();\n        } else {\n            document.setViewBox({\n                ctx,\n                aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n                width,\n                desiredWidth: image.width,\n                height,\n                desiredHeight: image.height\n            });\n            if (this.loaded) {\n                if (!('complete' in image) || image.complete) {\n                    ctx.drawImage(image, 0, 0);\n                }\n            }\n        }\n        ctx.restore();\n    }\n    getBoundingBox() {\n        const x = this.getAttribute('x').getPixels('x');\n        const y = this.getAttribute('y').getPixels('y');\n        const width = this.getStyle('width').getPixels('x');\n        const height = this.getStyle('height').getPixels('y');\n        return new BoundingBox(x, y, x + width, y + height);\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'image';\n        this.loaded = false;\n        const href = this.getHrefAttribute().getString();\n        if (!href) {\n            return;\n        }\n        const isSvg = href.endsWith('.svg') || /^\\s*data:image\\/svg\\+xml/i.test(href);\n        document.images.push(this);\n        if (!isSvg) {\n            void this.loadImage(href);\n        } else {\n            void this.loadSvg(href);\n        }\n    }\n}\n\nclass SymbolElement extends RenderedElement {\n    render(_) {\n    // NO RENDER\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'symbol';\n    }\n}\n\nclass SVGFontLoader {\n    async load(fontFamily, url) {\n        try {\n            const { document  } = this;\n            const svgDocument = await document.canvg.parser.load(url);\n            const fonts = svgDocument.getElementsByTagName('font');\n            Array.from(fonts).forEach((fontNode)=>{\n                const font = document.createElement(fontNode);\n                document.definitions.set(fontFamily, font);\n            });\n        } catch (err) {\n            console.error(\"Error while loading font \\\"\".concat(url, \"\\\":\"), err);\n        }\n        this.loaded = true;\n    }\n    constructor(document){\n        this.document = document;\n        this.loaded = false;\n        document.fonts.push(this);\n    }\n}\n\nclass StyleElement extends Element {\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'style';\n        const css = compressSpaces(Array.from(node.childNodes)// NEED TEST\n        .map((_)=>_.textContent\n        ).join('').replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n        .replace(/@import.*;/g, '') // remove imports\n        );\n        const cssDefs = css.split('}');\n        cssDefs.forEach((_1)=>{\n            const def = _1.trim();\n            if (!def) {\n                return;\n            }\n            const cssParts = def.split('{');\n            const cssClasses = cssParts[0].split(',');\n            const cssProps = cssParts[1].split(';');\n            cssClasses.forEach((_)=>{\n                const cssClass = _.trim();\n                if (!cssClass) {\n                    return;\n                }\n                const props = document.styles.get(cssClass) || new Map();\n                cssProps.forEach((cssProp)=>{\n                    const prop = cssProp.indexOf(':');\n                    const name = cssProp.substr(0, prop).trim();\n                    const value = cssProp.substr(prop + 1, cssProp.length - prop).trim();\n                    if (name && value) {\n                        props.set(name, new Property(document, name, value));\n                    }\n                });\n                document.styles.set(cssClass, props);\n                document.stylesSpecificity.set(cssClass, getSelectorSpecificity(cssClass));\n                if (cssClass === '@font-face') {\n                    const fontFamily = props.get('font-family').getString().replace(/\"|'/g, '');\n                    const srcs = props.get('src').getString().split(',');\n                    srcs.forEach((src)=>{\n                        if (src.indexOf('format(\"svg\")') > 0) {\n                            const url = parseExternalUrl(src);\n                            if (url) {\n                                void new SVGFontLoader(document).load(fontFamily, url);\n                            }\n                        }\n                    });\n                }\n            });\n        });\n    }\n}\nStyleElement.parseExternalUrl = parseExternalUrl;\n\nclass UseElement extends RenderedElement {\n    setContext(ctx) {\n        super.setContext(ctx);\n        const xAttr = this.getAttribute('x');\n        const yAttr = this.getAttribute('y');\n        if (xAttr.hasValue()) {\n            ctx.translate(xAttr.getPixels('x'), 0);\n        }\n        if (yAttr.hasValue()) {\n            ctx.translate(0, yAttr.getPixels('y'));\n        }\n    }\n    path(ctx) {\n        const { element  } = this;\n        if (element) {\n            element.path(ctx);\n        }\n    }\n    renderChildren(ctx) {\n        const { document , element  } = this;\n        if (element) {\n            let tempSvg = element;\n            if (element.type === 'symbol') {\n                // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n                tempSvg = new SVGElement(document);\n                tempSvg.attributes.set('viewBox', new Property(document, 'viewBox', element.getAttribute('viewBox').getString()));\n                tempSvg.attributes.set('preserveAspectRatio', new Property(document, 'preserveAspectRatio', element.getAttribute('preserveAspectRatio').getString()));\n                tempSvg.attributes.set('overflow', new Property(document, 'overflow', element.getAttribute('overflow').getString()));\n                tempSvg.children = element.children;\n                // element is still the parent of the children\n                element.styles.set('opacity', new Property(document, 'opacity', this.calculateOpacity()));\n            }\n            if (tempSvg.type === 'svg') {\n                const widthStyle = this.getStyle('width', false, true);\n                const heightStyle = this.getStyle('height', false, true);\n                // if symbol or svg, inherit width/height from me\n                if (widthStyle.hasValue()) {\n                    tempSvg.attributes.set('width', new Property(document, 'width', widthStyle.getString()));\n                }\n                if (heightStyle.hasValue()) {\n                    tempSvg.attributes.set('height', new Property(document, 'height', heightStyle.getString()));\n                }\n            }\n            const oldParent = tempSvg.parent;\n            tempSvg.parent = this;\n            tempSvg.render(ctx);\n            tempSvg.parent = oldParent;\n        }\n    }\n    getBoundingBox(ctx) {\n        const { element  } = this;\n        if (element) {\n            return element.getBoundingBox(ctx);\n        }\n        return null;\n    }\n    elementTransform() {\n        const { document , element  } = this;\n        if (!element) {\n            return null;\n        }\n        return Transform.fromElement(document, element);\n    }\n    get element() {\n        if (!this.cachedElement) {\n            this.cachedElement = this.getHrefAttribute().getDefinition();\n        }\n        return this.cachedElement;\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'use';\n    }\n}\n\nfunction imGet(img, x, y, width, _height, rgba) {\n    return img[y * width * 4 + x * 4 + rgba];\n}\nfunction imSet(img, x, y, width, _height, rgba, val) {\n    img[y * width * 4 + x * 4 + rgba] = val;\n}\nfunction m(matrix, i, v) {\n    const mi = matrix[i];\n    return mi * v;\n}\nfunction c(a, m1, m2, m3) {\n    return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n}\nclass FeColorMatrixElement extends Element {\n    apply(ctx, _x, _y, width, height) {\n        // assuming x==0 && y==0 for now\n        const { includeOpacity , matrix  } = this;\n        const srcData = ctx.getImageData(0, 0, width, height);\n        for(let y = 0; y < height; y++){\n            for(let x = 0; x < width; x++){\n                const r = imGet(srcData.data, x, y, width, height, 0);\n                const g = imGet(srcData.data, x, y, width, height, 1);\n                const b = imGet(srcData.data, x, y, width, height, 2);\n                const a = imGet(srcData.data, x, y, width, height, 3);\n                let nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1);\n                let ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1);\n                let nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1);\n                let na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1);\n                if (includeOpacity) {\n                    nr = 0;\n                    ng = 0;\n                    nb = 0;\n                    na *= a / 255;\n                }\n                imSet(srcData.data, x, y, width, height, 0, nr);\n                imSet(srcData.data, x, y, width, height, 1, ng);\n                imSet(srcData.data, x, y, width, height, 2, nb);\n                imSet(srcData.data, x, y, width, height, 3, na);\n            }\n        }\n        ctx.clearRect(0, 0, width, height);\n        ctx.putImageData(srcData, 0, 0);\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'feColorMatrix';\n        let matrix = toNumbers(this.getAttribute('values').getString());\n        switch(this.getAttribute('type').getString('matrix')){\n            case 'saturate':\n                {\n                    const s = matrix[0];\n                    /* eslint-disable array-element-newline */ matrix = [\n                        0.213 + 0.787 * s,\n                        0.715 - 0.715 * s,\n                        0.072 - 0.072 * s,\n                        0,\n                        0,\n                        0.213 - 0.213 * s,\n                        0.715 + 0.285 * s,\n                        0.072 - 0.072 * s,\n                        0,\n                        0,\n                        0.213 - 0.213 * s,\n                        0.715 - 0.715 * s,\n                        0.072 + 0.928 * s,\n                        0,\n                        0,\n                        0,\n                        0,\n                        0,\n                        1,\n                        0,\n                        0,\n                        0,\n                        0,\n                        0,\n                        1\n                    ];\n                    break;\n                }\n            case 'hueRotate':\n                {\n                    const a = matrix[0] * Math.PI / 180;\n                    /* eslint-disable array-element-newline */ matrix = [\n                        c(a, 0.213, 0.787, -0.213),\n                        c(a, 0.715, -0.715, -0.715),\n                        c(a, 0.072, -0.072, 0.928),\n                        0,\n                        0,\n                        c(a, 0.213, -0.213, 0.143),\n                        c(a, 0.715, 0.285, 0.14),\n                        c(a, 0.072, -0.072, -0.283),\n                        0,\n                        0,\n                        c(a, 0.213, -0.213, -0.787),\n                        c(a, 0.715, -0.715, 0.715),\n                        c(a, 0.072, 0.928, 0.072),\n                        0,\n                        0,\n                        0,\n                        0,\n                        0,\n                        1,\n                        0,\n                        0,\n                        0,\n                        0,\n                        0,\n                        1\n                    ];\n                    break;\n                }\n            case 'luminanceToAlpha':\n                /* eslint-disable array-element-newline */ matrix = [\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0.2125,\n                    0.7154,\n                    0.0721,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    0,\n                    1\n                ];\n                break;\n        }\n        this.matrix = matrix;\n        this.includeOpacity = this.getAttribute('includeOpacity').hasValue();\n    }\n}\n\nclass MaskElement extends Element {\n    apply(ctx, element) {\n        const { document  } = this;\n        // render as temp svg\n        let x = this.getAttribute('x').getPixels('x');\n        let y = this.getAttribute('y').getPixels('y');\n        let width = this.getStyle('width').getPixels('x');\n        let height = this.getStyle('height').getPixels('y');\n        if (!width && !height) {\n            const boundingBox = new BoundingBox();\n            this.children.forEach((child)=>{\n                boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n            });\n            x = Math.floor(boundingBox.x1);\n            y = Math.floor(boundingBox.y1);\n            width = Math.floor(boundingBox.width);\n            height = Math.floor(boundingBox.height);\n        }\n        const ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles);\n        const maskCanvas = document.createCanvas(x + width, y + height);\n        const maskCtx = maskCanvas.getContext('2d');\n        document.screen.setDefaults(maskCtx);\n        this.renderChildren(maskCtx);\n        // convert mask to alpha with a fake node\n        // TODO: refactor out apply from feColorMatrix\n        new FeColorMatrixElement(document, {\n            nodeType: 1,\n            childNodes: [],\n            attributes: [\n                {\n                    nodeName: 'type',\n                    value: 'luminanceToAlpha'\n                },\n                {\n                    nodeName: 'includeOpacity',\n                    value: 'true'\n                }\n            ]\n        }).apply(maskCtx, 0, 0, x + width, y + height);\n        const tmpCanvas = document.createCanvas(x + width, y + height);\n        const tmpCtx = tmpCanvas.getContext('2d');\n        document.screen.setDefaults(tmpCtx);\n        element.render(tmpCtx);\n        tmpCtx.globalCompositeOperation = 'destination-in';\n        tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, 'no-repeat');\n        tmpCtx.fillRect(0, 0, x + width, y + height);\n        ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, 'no-repeat');\n        ctx.fillRect(0, 0, x + width, y + height);\n        // reassign mask\n        this.restoreStyles(element, ignoredStyles);\n    }\n    render(_) {\n    // NO RENDER\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'mask';\n    }\n}\nMaskElement.ignoreStyles = [\n    'mask',\n    'transform',\n    'clip-path'\n];\n\nconst noop = ()=>{\n// NOOP\n};\nclass ClipPathElement extends Element {\n    apply(ctx) {\n        const { document  } = this;\n        const contextProto = Reflect.getPrototypeOf(ctx);\n        const { beginPath , closePath  } = ctx;\n        if (contextProto) {\n            contextProto.beginPath = noop;\n            contextProto.closePath = noop;\n        }\n        Reflect.apply(beginPath, ctx, []);\n        this.children.forEach((child)=>{\n            if (!('path' in child)) {\n                return;\n            }\n            let transform = 'elementTransform' in child ? child.elementTransform() : null // handle <use />\n            ;\n            if (!transform) {\n                transform = Transform.fromElement(document, child);\n            }\n            if (transform) {\n                transform.apply(ctx);\n            }\n            child.path(ctx);\n            if (contextProto) {\n                contextProto.closePath = closePath;\n            }\n            if (transform) {\n                transform.unapply(ctx);\n            }\n        });\n        Reflect.apply(closePath, ctx, []);\n        ctx.clip();\n        if (contextProto) {\n            contextProto.beginPath = beginPath;\n            contextProto.closePath = closePath;\n        }\n    }\n    render(_) {\n    // NO RENDER\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'clipPath';\n    }\n}\n\nclass FilterElement extends Element {\n    apply(ctx, element) {\n        // render as temp svg\n        const { document , children  } = this;\n        const boundingBox = 'getBoundingBox' in element ? element.getBoundingBox(ctx) : null;\n        if (!boundingBox) {\n            return;\n        }\n        let px = 0;\n        let py = 0;\n        children.forEach((child)=>{\n            const efd = child.extraFilterDistance || 0;\n            px = Math.max(px, efd);\n            py = Math.max(py, efd);\n        });\n        const width = Math.floor(boundingBox.width);\n        const height = Math.floor(boundingBox.height);\n        const tmpCanvasWidth = width + 2 * px;\n        const tmpCanvasHeight = height + 2 * py;\n        if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n            return;\n        }\n        const x = Math.floor(boundingBox.x);\n        const y = Math.floor(boundingBox.y);\n        const ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles);\n        const tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight);\n        const tmpCtx = tmpCanvas.getContext('2d');\n        document.screen.setDefaults(tmpCtx);\n        tmpCtx.translate(-x + px, -y + py);\n        element.render(tmpCtx);\n        // apply filters\n        children.forEach((child)=>{\n            if (typeof child.apply === 'function') {\n                child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);\n            }\n        });\n        // render on me\n        ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x - px, y - py, tmpCanvasWidth, tmpCanvasHeight);\n        this.restoreStyles(element, ignoredStyles);\n    }\n    render(_) {\n    // NO RENDER\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'filter';\n    }\n}\nFilterElement.ignoreStyles = [\n    'filter',\n    'transform',\n    'clip-path'\n];\n\nclass FeDropShadowElement extends Element {\n    apply(_, _x, _y, _width, _height) {\n    // TODO: implement\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'feDropShadow';\n        this.addStylesFromStyleDefinition();\n    }\n}\n\nclass FeMorphologyElement extends Element {\n    apply(_, _x, _y, _width, _height) {\n    // TODO: implement\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'feMorphology';\n    }\n}\n\nclass FeCompositeElement extends Element {\n    apply(_, _x, _y, _width, _height) {\n    // TODO: implement\n    }\n    constructor(...args){\n        super(...args);\n        this.type = 'feComposite';\n    }\n}\n\nclass FeGaussianBlurElement extends Element {\n    apply(ctx, x, y, width, height) {\n        const { document , blurRadius  } = this;\n        const body = document.window ? document.window.document.body : null;\n        const canvas = ctx.canvas;\n        // StackBlur requires canvas be on document\n        canvas.id = document.getUniqueId();\n        if (body) {\n            canvas.style.display = 'none';\n            body.appendChild(canvas);\n        }\n        canvasRGBA(canvas, x, y, width, height, blurRadius);\n        if (body) {\n            body.removeChild(canvas);\n        }\n    }\n    constructor(document, node, captureTextNodes){\n        super(document, node, captureTextNodes);\n        this.type = 'feGaussianBlur';\n        this.blurRadius = Math.floor(this.getAttribute('stdDeviation').getNumber());\n        this.extraFilterDistance = this.blurRadius;\n    }\n}\n\nclass TitleElement extends Element {\n    constructor(...args){\n        super(...args);\n        this.type = 'title';\n    }\n}\n\nclass DescElement extends Element {\n    constructor(...args){\n        super(...args);\n        this.type = 'desc';\n    }\n}\n\nconst elements = {\n    'svg': SVGElement,\n    'rect': RectElement,\n    'circle': CircleElement,\n    'ellipse': EllipseElement,\n    'line': LineElement,\n    'polyline': PolylineElement,\n    'polygon': PolygonElement,\n    'path': PathElement,\n    'pattern': PatternElement,\n    'marker': MarkerElement,\n    'defs': DefsElement,\n    'linearGradient': LinearGradientElement,\n    'radialGradient': RadialGradientElement,\n    'stop': StopElement,\n    'animate': AnimateElement,\n    'animateColor': AnimateColorElement,\n    'animateTransform': AnimateTransformElement,\n    'font': FontElement,\n    'font-face': FontFaceElement,\n    'missing-glyph': MissingGlyphElement,\n    'glyph': GlyphElement,\n    'text': TextElement,\n    'tspan': TSpanElement,\n    'tref': TRefElement,\n    'a': AElement,\n    'textPath': TextPathElement,\n    'image': ImageElement,\n    'g': GElement,\n    'symbol': SymbolElement,\n    'style': StyleElement,\n    'use': UseElement,\n    'mask': MaskElement,\n    'clipPath': ClipPathElement,\n    'filter': FilterElement,\n    'feDropShadow': FeDropShadowElement,\n    'feMorphology': FeMorphologyElement,\n    'feComposite': FeCompositeElement,\n    'feColorMatrix': FeColorMatrixElement,\n    'feGaussianBlur': FeGaussianBlurElement,\n    'title': TitleElement,\n    'desc': DescElement\n};\n\nfunction createCanvas(width, height) {\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\nasync function createImage(src) {\n    let anonymousCrossOrigin = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n    const image = document.createElement('img');\n    if (anonymousCrossOrigin) {\n        image.crossOrigin = 'Anonymous';\n    }\n    return new Promise((resolve, reject)=>{\n        image.onload = ()=>{\n            resolve(image);\n        };\n        image.onerror = (_event, _source, _lineno, _colno, error)=>{\n            reject(error);\n        };\n        image.src = src;\n    });\n}\nconst DEFAULT_EM_SIZE = 12;\nclass Document {\n    bindCreateImage(createImage1, anonymousCrossOrigin) {\n        if (typeof anonymousCrossOrigin === 'boolean') {\n            return (source, forceAnonymousCrossOrigin)=>createImage1(source, typeof forceAnonymousCrossOrigin === 'boolean' ? forceAnonymousCrossOrigin : anonymousCrossOrigin)\n            ;\n        }\n        return createImage1;\n    }\n    get window() {\n        return this.screen.window;\n    }\n    get fetch() {\n        return this.screen.fetch;\n    }\n    get ctx() {\n        return this.screen.ctx;\n    }\n    get emSize() {\n        const { emSizeStack  } = this;\n        return emSizeStack[emSizeStack.length - 1] || DEFAULT_EM_SIZE;\n    }\n    set emSize(value) {\n        const { emSizeStack  } = this;\n        emSizeStack.push(value);\n    }\n    popEmSize() {\n        const { emSizeStack  } = this;\n        emSizeStack.pop();\n    }\n    getUniqueId() {\n        return \"canvg\".concat(++this.uniqueId);\n    }\n    isImagesLoaded() {\n        return this.images.every((_)=>_.loaded\n        );\n    }\n    isFontsLoaded() {\n        return this.fonts.every((_)=>_.loaded\n        );\n    }\n    createDocumentElement(document) {\n        const documentElement = this.createElement(document.documentElement);\n        documentElement.root = true;\n        documentElement.addStylesFromStyleDefinition();\n        this.documentElement = documentElement;\n        return documentElement;\n    }\n    createElement(node) {\n        const elementType = node.nodeName.replace(/^[^:]+:/, '');\n        const ElementType = Document.elementTypes[elementType];\n        if (ElementType) {\n            return new ElementType(this, node);\n        }\n        return new UnknownElement(this, node);\n    }\n    createTextNode(node) {\n        return new TextNode(this, node);\n    }\n    setViewBox(config) {\n        this.screen.setViewBox({\n            document: this,\n            ...config\n        });\n    }\n    constructor(canvg, { rootEmSize =DEFAULT_EM_SIZE , emSize =DEFAULT_EM_SIZE , createCanvas: createCanvas1 = Document.createCanvas , createImage: createImage2 = Document.createImage , anonymousCrossOrigin  } = {}){\n        this.canvg = canvg;\n        this.definitions = new Map();\n        this.styles = new Map();\n        this.stylesSpecificity = new Map();\n        this.images = [];\n        this.fonts = [];\n        this.emSizeStack = [];\n        this.uniqueId = 0;\n        this.screen = canvg.screen;\n        this.rootEmSize = rootEmSize;\n        this.emSize = emSize;\n        this.createCanvas = createCanvas1;\n        this.createImage = this.bindCreateImage(createImage2, anonymousCrossOrigin);\n        this.screen.wait(()=>this.isImagesLoaded()\n        );\n        this.screen.wait(()=>this.isFontsLoaded()\n        );\n    }\n}\nDocument.createCanvas = createCanvas;\nDocument.createImage = createImage;\nDocument.elementTypes = elements;\n\n/**\n * SVG renderer on canvas.\n */ class Canvg {\n    /**\n   * Create Canvg instance from SVG source string or URL.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string or URL.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */ static async from(ctx, svg) {\n        let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n        const parser = new Parser(options);\n        const svgDocument = await parser.parse(svg);\n        return new Canvg(ctx, svgDocument, options);\n    }\n    /**\n   * Create Canvg instance from SVG source string.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */ static fromString(ctx, svg) {\n        let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n        const parser = new Parser(options);\n        const svgDocument = parser.parseFromString(svg);\n        return new Canvg(ctx, svgDocument, options);\n    }\n    /**\n   * Create new Canvg instance with inherited options.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string or URL.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */ fork(ctx, svg) {\n        let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n        return Canvg.from(ctx, svg, {\n            ...this.options,\n            ...options\n        });\n    }\n    /**\n   * Create new Canvg instance with inherited options.\n   * @param ctx - Rendering context.\n   * @param svg - SVG source string.\n   * @param options - Rendering options.\n   * @returns Canvg instance.\n   */ forkString(ctx, svg) {\n        let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n        return Canvg.fromString(ctx, svg, {\n            ...this.options,\n            ...options\n        });\n    }\n    /**\n   * Document is ready promise.\n   * @returns Ready promise.\n   */ ready() {\n        return this.screen.ready();\n    }\n    /**\n   * Document is ready value.\n   * @returns Is ready or not.\n   */ isReady() {\n        return this.screen.isReady();\n    }\n    /**\n   * Render only first frame, ignoring animations and mouse.\n   * @param options - Rendering options.\n   */ async render() {\n        let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n        this.start({\n            enableRedraw: true,\n            ignoreAnimation: true,\n            ignoreMouse: true,\n            ...options\n        });\n        await this.ready();\n        this.stop();\n    }\n    /**\n   * Start rendering.\n   * @param options - Render options.\n   */ start() {\n        let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n        const { documentElement , screen , options: baseOptions  } = this;\n        screen.start(documentElement, {\n            enableRedraw: true,\n            ...baseOptions,\n            ...options\n        });\n    }\n    /**\n   * Stop rendering.\n   */ stop() {\n        this.screen.stop();\n    }\n    /**\n   * Resize SVG to fit in given size.\n   * @param width\n   * @param height\n   * @param preserveAspectRatio\n   */ resize(width) {\n        let height = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : width, preserveAspectRatio = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;\n        this.documentElement.resize(width, height, preserveAspectRatio);\n    }\n    /**\n   * Main constructor.\n   * @param ctx - Rendering context.\n   * @param svg - SVG Document.\n   * @param options - Rendering options.\n   */ constructor(ctx, svg, options = {}){\n        this.parser = new Parser(options);\n        this.screen = new Screen(ctx, options);\n        this.options = options;\n        const document = new Document(this, options);\n        const documentElement = document.createDocumentElement(svg);\n        this.document = document;\n        this.documentElement = documentElement;\n    }\n}\n\nexport { AElement, AnimateColorElement, AnimateElement, AnimateTransformElement, BoundingBox, CB1, CB2, CB3, CB4, Canvg, CircleElement, ClipPathElement, DefsElement, DescElement, Document, Element, EllipseElement, FeColorMatrixElement, FeCompositeElement, FeDropShadowElement, FeGaussianBlurElement, FeMorphologyElement, FilterElement, Font, FontElement, FontFaceElement, GElement, GlyphElement, GradientElement, ImageElement, LineElement, LinearGradientElement, MarkerElement, MaskElement, Matrix, MissingGlyphElement, Mouse, PSEUDO_ZERO, Parser, PathElement, PathParser, PatternElement, Point, PolygonElement, PolylineElement, Property, QB1, QB2, QB3, RadialGradientElement, RectElement, RenderedElement, Rotate, SVGElement, SVGFontLoader, Scale, Screen, Skew, SkewX, SkewY, StopElement, StyleElement, SymbolElement, TRefElement, TSpanElement, TextElement, TextPathElement, TitleElement, Transform, Translate, UnknownElement, UseElement, ViewPort, compressSpaces, elements, getSelectorSpecificity, normalizeAttributeName, normalizeColor, parseExternalUrl, index as presets, toMatrixValue, toNumbers, trimLeft, trimRight, vectorMagnitude, vectorsAngle, vectorsRatio };\n//# sourceMappingURL=index.js.map\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export function blur(values, r) {\n  if (!((r = +r) >= 0)) throw new RangeError(\"invalid r\");\n  let length = values.length;\n  if (!((length = Math.floor(length)) >= 0)) throw new RangeError(\"invalid length\");\n  if (!length || !r) return values;\n  const blur = blurf(r);\n  const temp = values.slice();\n  blur(values, temp, 0, length, 1);\n  blur(temp, values, 0, length, 1);\n  blur(values, temp, 0, length, 1);\n  return values;\n}\n\nexport const blur2 = Blur2(blurf);\n\nexport const blurImage = Blur2(blurfImage);\n\nfunction Blur2(blur) {\n  return function(data, rx, ry = rx) {\n    if (!((rx = +rx) >= 0)) throw new RangeError(\"invalid rx\");\n    if (!((ry = +ry) >= 0)) throw new RangeError(\"invalid ry\");\n    let {data: values, width, height} = data;\n    if (!((width = Math.floor(width)) >= 0)) throw new RangeError(\"invalid width\");\n    if (!((height = Math.floor(height !== undefined ? height : values.length / width)) >= 0)) throw new RangeError(\"invalid height\");\n    if (!width || !height || (!rx && !ry)) return data;\n    const blurx = rx && blur(rx);\n    const blury = ry && blur(ry);\n    const temp = values.slice();\n    if (blurx && blury) {\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    } else if (blurx) {\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n    } else if (blury) {\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    }\n    return data;\n  };\n}\n\nfunction blurh(blur, T, S, w, h) {\n  for (let y = 0, n = w * h; y < n;) {\n    blur(T, S, y, y += w, 1);\n  }\n}\n\nfunction blurv(blur, T, S, w, h) {\n  for (let x = 0, n = w * h; x < w; ++x) {\n    blur(T, S, x, x + n, w);\n  }\n}\n\nfunction blurfImage(radius) {\n  const blur = blurf(radius);\n  return (T, S, start, stop, step) => {\n    start <<= 2, stop <<= 2, step <<= 2;\n    blur(T, S, start + 0, stop + 0, step);\n    blur(T, S, start + 1, stop + 1, step);\n    blur(T, S, start + 2, stop + 2, step);\n    blur(T, S, start + 3, stop + 3, step);\n  };\n}\n\n// Given a target array T, a source array S, sets each value T[i] to the average\n// of {S[i - r], , S[i], , S[i + r]}, where r = radius, start <= i < stop,\n// for each i, i + step, i + 2 * step, etc., and where S[j] is clamped between\n// S[start] (inclusive) and S[stop] (exclusive). If the given radius is not an\n// integer, S[i - r - 1] and S[i + r + 1] are added to the sum, each weighted\n// according to r - radius.\nfunction blurf(radius) {\n  const radius0 = Math.floor(radius);\n  if (radius0 === radius) return bluri(radius);\n  const t = radius - radius0;\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius0 * S[start];\n    const s0 = step * radius0;\n    const s1 = s0 + step;\n    for (let i = start, j = start + s0; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s0)];\n      T[i] = (sum + t * (S[Math.max(start, i - s1)] + S[Math.min(stop, i + s1)])) / w;\n      sum -= S[Math.max(start, i - s0)];\n    }\n  };\n}\n\n// Like blurf, but optimized for integer radius.\nfunction bluri(radius) {\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius * S[start];\n    const s = step * radius;\n    for (let i = start, j = start + s; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s)];\n      T[i] = sum / w;\n      sum -= S[Math.max(start, i - s)];\n    }\n  };\n}\n","export default function count(values, valueof) {\n  let count = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  }\n  return count;\n}\n","function length(array) {\n  return array.length | 0;\n}\n\nfunction empty(length) {\n  return !(length > 0);\n}\n\nfunction arrayify(values) {\n  return typeof values !== \"object\" || \"length\" in values ? values : Array.from(values);\n}\n\nfunction reducer(reduce) {\n  return values => reduce(...values);\n}\n\nexport default function cross(...values) {\n  const reduce = typeof values[values.length - 1] === \"function\" && reducer(values.pop());\n  values = values.map(arrayify);\n  const lengths = values.map(length);\n  const j = values.length - 1;\n  const index = new Array(j + 1).fill(0);\n  const product = [];\n  if (j < 0 || lengths.some(empty)) return product;\n  while (true) {\n    product.push(index.map((j, i) => values[i][j]));\n    let i = j;\n    while (++index[i] === lengths[i]) {\n      if (i === 0) return reduce ? product.map(reduce) : product;\n      index[i--] = 0;\n    }\n  }\n}\n","export default function cumsum(values, valueof) {\n  var sum = 0, index = 0;\n  return Float64Array.from(values, valueof === undefined\n    ? v => (sum += +v || 0)\n    : v => (sum += +valueof(v, index++, values) || 0));\n}","export default function variance(values, valueof) {\n  let count = 0;\n  let delta;\n  let mean = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n  if (count > 1) return sum / (count - 1);\n}\n","import variance from \"./variance.js\";\n\nexport default function deviation(values, valueof) {\n  const v = variance(values, valueof);\n  return v ? Math.sqrt(v) : v;\n}\n","export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function identity(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nfunction flatten(groups, keys) {\n  for (let i = 1, n = keys.length; i < n; ++i) {\n    groups = groups.flatMap(g => g.pop().map(([key, value]) => [...g, key, value]));\n  }\n  return groups;\n}\n\nexport function flatGroup(values, ...keys) {\n  return flatten(groups(values, ...keys), keys);\n}\n\nexport function flatRollup(values, reduce, ...keys) {\n  return flatten(rollups(values, reduce, ...keys), keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","export default function permute(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f] = F;\n  if ((f && f.length !== 2) || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascendingDefined(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascendingDefined(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(compareDefined(f));\n}\n\nexport function compareDefined(compare = ascending) {\n  if (compare === ascending) return ascendingDefined;\n  if (typeof compare !== \"function\") throw new TypeError(\"compare is not a function\");\n  return (a, b) => {\n    const x = compare(a, b);\n    if (x || x === 0) return x;\n    return (compare(b, b) === 0) - (compare(a, a) === 0);\n  };\n}\n\nexport function ascendingDefined(a, b) {\n  return (a == null || !(a >= a)) - (b == null || !(b >= b)) || (a < b ? -1 : a > b ? 1 : 0);\n}\n","import ascending from \"./ascending.js\";\nimport group, {rollup} from \"./group.js\";\nimport sort from \"./sort.js\";\n\nexport default function groupSort(values, reduce, key) {\n  return (reduce.length !== 2\n    ? sort(rollup(values, reduce, key), (([ak, av], [bk, bv]) => ascending(av, bv) || ascending(ak, bk)))\n    : sort(group(values, key), (([ak, av], [bk, bv]) => reduce(av, bv) || ascending(ak, bk))))\n    .map(([key]) => key);\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","export default function constant(x) {\n  return () => x;\n}\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","import {tickIncrement} from \"./ticks.js\";\n\nexport default function nice(start, stop, count) {\n  let prestep;\n  while (true) {\n    const step = tickIncrement(start, stop, count);\n    if (step === prestep || step === 0 || !isFinite(step)) {\n      return [start, stop];\n    } else if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n    }\n    prestep = step;\n  }\n}\n","import count from \"../count.js\";\n\nexport default function thresholdSturges(values) {\n  return Math.max(1, Math.ceil(Math.log(count(values)) / Math.LN2) + 1);\n}\n","import {slice} from \"./array.js\";\nimport bisect from \"./bisect.js\";\nimport constant from \"./constant.js\";\nimport extent from \"./extent.js\";\nimport identity from \"./identity.js\";\nimport nice from \"./nice.js\";\nimport ticks, {tickIncrement} from \"./ticks.js\";\nimport sturges from \"./threshold/sturges.js\";\n\nexport default function bin() {\n  var value = identity,\n      domain = extent,\n      threshold = sturges;\n\n  function histogram(data) {\n    if (!Array.isArray(data)) data = Array.from(data);\n\n    var i,\n        n = data.length,\n        x,\n        step,\n        values = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      values[i] = value(data[i], i, data);\n    }\n\n    var xz = domain(values),\n        x0 = xz[0],\n        x1 = xz[1],\n        tz = threshold(values, x0, x1);\n\n    // Convert number of thresholds into uniform thresholds, and nice the\n    // default domain accordingly.\n    if (!Array.isArray(tz)) {\n      const max = x1, tn = +tz;\n      if (domain === extent) [x0, x1] = nice(x0, x1, tn);\n      tz = ticks(x0, x1, tn);\n\n      // If the domain is aligned with the first tick (which it will by\n      // default), then we can use quantization rather than bisection to bin\n      // values, which is substantially faster.\n      if (tz[0] <= x0) step = tickIncrement(x0, x1, tn);\n\n      // If the last threshold is coincident with the domains upper bound, the\n      // last bin will be zero-width. If the default domain is used, and this\n      // last threshold is coincident with the maximum input value, we can\n      // extend the niced upper bound by one tick to ensure uniform bin widths;\n      // otherwise, we simply remove the last threshold. Note that we dont\n      // coerce values or the domain to numbers, and thus must be careful to\n      // compare order (>=) rather than strict equality (===)!\n      if (tz[tz.length - 1] >= x1) {\n        if (max >= x1 && domain === extent) {\n          const step = tickIncrement(x0, x1, tn);\n          if (isFinite(step)) {\n            if (step > 0) {\n              x1 = (Math.floor(x1 / step) + 1) * step;\n            } else if (step < 0) {\n              x1 = (Math.ceil(x1 * -step) + 1) / -step;\n            }\n          }\n        } else {\n          tz.pop();\n        }\n      }\n    }\n\n    // Remove any thresholds outside the domain.\n    // Be careful not to mutate an array owned by the user!\n    var m = tz.length, a = 0, b = m;\n    while (tz[a] <= x0) ++a;\n    while (tz[b - 1] > x1) --b;\n    if (a || b < m) tz = tz.slice(a, b), m = b - a;\n\n    var bins = new Array(m + 1),\n        bin;\n\n    // Initialize bins.\n    for (i = 0; i <= m; ++i) {\n      bin = bins[i] = [];\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\n      bin.x1 = i < m ? tz[i] : x1;\n    }\n\n    // Assign data to bins by value, ignoring any outside the domain.\n    if (isFinite(step)) {\n      if (step > 0) {\n        for (i = 0; i < n; ++i) {\n          if ((x = values[i]) != null && x0 <= x && x <= x1) {\n            bins[Math.min(m, Math.floor((x - x0) / step))].push(data[i]);\n          }\n        }\n      } else if (step < 0) {\n        for (i = 0; i < n; ++i) {\n          if ((x = values[i]) != null && x0 <= x && x <= x1) {\n            const j = Math.floor((x0 - x) * step);\n            bins[Math.min(m, j + (tz[j] <= x))].push(data[i]); // handle off-by-one due to rounding\n          }\n        }\n      }\n    } else {\n      for (i = 0; i < n; ++i) {\n        if ((x = values[i]) != null && x0 <= x && x <= x1) {\n          bins[bisect(tz, x, 0, m)].push(data[i]);\n        }\n      }\n    }\n\n    return bins;\n  }\n\n  histogram.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n  };\n\n  histogram.domain = function(_) {\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n  };\n\n  histogram.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : constant(Array.isArray(_) ? slice.call(_) : _), histogram) : threshold;\n  };\n\n  return histogram;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function maxIndex(values, valueof) {\n  let max;\n  let maxIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  }\n  return maxIndex;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function minIndex(values, valueof) {\n  let min;\n  let minIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  }\n  return minIndex;\n}\n","import {ascendingDefined, compareDefined} from \"./sort.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = Infinity, compare) {\n  k = Math.floor(k);\n  left = Math.floor(Math.max(0, left));\n  right = Math.floor(Math.min(array.length - 1, right));\n\n  if (!(left <= k && k <= right)) return array;\n\n  compare = compare === undefined ? ascendingDefined : compareDefined(compare);\n\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function greatest(values, compare = ascending) {\n  let max;\n  let defined = false;\n  if (compare.length === 1) {\n    let maxValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, maxValue) > 0\n          : ascending(value, value) === 0) {\n        max = element;\n        maxValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, max) > 0\n          : compare(value, value) === 0) {\n        max = value;\n        defined = true;\n      }\n    }\n  }\n  return max;\n}\n","import max from \"./max.js\";\nimport maxIndex from \"./maxIndex.js\";\nimport min from \"./min.js\";\nimport minIndex from \"./minIndex.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\nimport {ascendingDefined} from \"./sort.js\";\nimport greatest from \"./greatest.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileIndex(values, p, valueof = number) {\n  if (isNaN(p = +p)) return;\n  numbers = Float64Array.from(values, (_, i) => number(valueof(values[i], i, values)));\n  if (p <= 0) return minIndex(numbers);\n  if (p >= 1) return maxIndex(numbers);\n  var numbers,\n      index = Uint32Array.from(values, (_, i) => i),\n      j = numbers.length - 1,\n      i = Math.floor(j * p);\n  quickselect(index, i, 0, j, (i, j) => ascendingDefined(numbers[i], numbers[j]));\n  i = greatest(index.subarray(0, i + 1), (i) => numbers[i]);\n  return i >= 0 ? i : -1;\n}\n","import count from \"../count.js\";\nimport quantile from \"../quantile.js\";\n\nexport default function thresholdFreedmanDiaconis(values, min, max) {\n  const c = count(values), d = quantile(values, 0.75) - quantile(values, 0.25);\n  return c && d ? Math.ceil((max - min) / (2 * d * Math.pow(c, -1 / 3))) : 1;\n}\n","import count from \"../count.js\";\nimport deviation from \"../deviation.js\";\n\nexport default function thresholdScott(values, min, max) {\n  const c = count(values), d = deviation(values);\n  return c && d ? Math.ceil((max - min) * Math.cbrt(c) / (3.49 * d)) : 1;\n}\n","export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n","import quantile, {quantileIndex} from \"./quantile.js\";\n\nexport default function median(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n\nexport function medianIndex(values, valueof) {\n  return quantileIndex(values, 0.5, valueof);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","import {InternMap} from \"internmap\";\n\nexport default function mode(values, valueof) {\n  const counts = new InternMap();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && value >= value) {\n        counts.set(value, (counts.get(value) || 0) + 1);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && value >= value) {\n        counts.set(value, (counts.get(value) || 0) + 1);\n      }\n    }\n  }\n  let modeValue;\n  let modeCount = 0;\n  for (const [value, count] of counts) {\n    if (count > modeCount) {\n      modeCount = count;\n      modeValue = value;\n    }\n  }\n  return modeValue;\n}\n","export default function pairs(values, pairof = pair) {\n  const pairs = [];\n  let previous;\n  let first = false;\n  for (const value of values) {\n    if (first) pairs.push(pairof(previous, value));\n    previous = value;\n    first = true;\n  }\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import ascending from \"./ascending.js\";\nimport {ascendingDefined, compareDefined} from \"./sort.js\";\n\nexport default function rank(values, valueof = ascending) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  let V = Array.from(values);\n  const R = new Float64Array(V.length);\n  if (valueof.length !== 2) V = V.map(valueof), valueof = ascending;\n  const compareIndex = (i, j) => valueof(V[i], V[j]);\n  let k, r;\n  values = Uint32Array.from(V, (_, i) => i);\n  // Risky chaining due to Safari 14 https://github.com/d3/d3-array/issues/123\n  values.sort(valueof === ascending ? (i, j) => ascendingDefined(V[i], V[j]) : compareDefined(compareIndex));\n  values.forEach((j, i) => {\n      const c = compareIndex(j, k === undefined ? j : k);\n      if (c >= 0) {\n        if (k === undefined || c > 0) k = j, r = i;\n        R[j] = r;\n      } else {\n        R[j] = NaN;\n      }\n    });\n  return R;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function least(values, compare = ascending) {\n  let min;\n  let defined = false;\n  if (compare.length === 1) {\n    let minValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, minValue) < 0\n          : ascending(value, value) === 0) {\n        min = element;\n        minValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, min) < 0\n          : compare(value, value) === 0) {\n        min = value;\n        defined = true;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\nimport minIndex from \"./minIndex.js\";\n\nexport default function leastIndex(values, compare = ascending) {\n  if (compare.length === 1) return minIndex(values, compare);\n  let minValue;\n  let min = -1;\n  let index = -1;\n  for (const value of values) {\n    ++index;\n    if (min < 0\n        ? compare(value, value) === 0\n        : compare(value, minValue) < 0) {\n      minValue = value;\n      min = index;\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\nimport maxIndex from \"./maxIndex.js\";\n\nexport default function greatestIndex(values, compare = ascending) {\n  if (compare.length === 1) return maxIndex(values, compare);\n  let maxValue;\n  let max = -1;\n  let index = -1;\n  for (const value of values) {\n    ++index;\n    if (max < 0\n        ? compare(value, value) === 0\n        : compare(value, maxValue) > 0) {\n      maxValue = value;\n      max = index;\n    }\n  }\n  return max;\n}\n","import leastIndex from \"./leastIndex.js\";\n\nexport default function scan(values, compare) {\n  const index = leastIndex(values, compare);\n  return index < 0 ? undefined : index;\n}\n","export default shuffler(Math.random);\n\nexport function shuffler(random) {\n  return function shuffle(array, i0 = 0, i1 = array.length) {\n    let m = i1 - (i0 = +i0);\n    while (m) {\n      const i = random() * m-- | 0, t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n    return array;\n  };\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","import min from \"./min.js\";\n\nexport default function transpose(matrix) {\n  if (!(n = matrix.length)) return [];\n  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n      row[j] = matrix[j][i];\n    }\n  }\n  return transpose;\n}\n\nfunction length(d) {\n  return d.length;\n}\n","import transpose from \"./transpose.js\";\n\nexport default function zip() {\n  return transpose(arguments);\n}\n","export default function every(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  let index = -1;\n  for (const value of values) {\n    if (!test(value, ++index, values)) {\n      return false;\n    }\n  }\n  return true;\n}\n","export default function some(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  let index = -1;\n  for (const value of values) {\n    if (test(value, ++index, values)) {\n      return true;\n    }\n  }\n  return false;\n}\n","export default function filter(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  const array = [];\n  let index = -1;\n  for (const value of values) {\n    if (test(value, ++index, values)) {\n      array.push(value);\n    }\n  }\n  return array;\n}\n","export default function map(values, mapper) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  if (typeof mapper !== \"function\") throw new TypeError(\"mapper is not a function\");\n  return Array.from(values, (value, index) => mapper(value, index, values));\n}\n","export default function reduce(values, reducer, value) {\n  if (typeof reducer !== \"function\") throw new TypeError(\"reducer is not a function\");\n  const iterator = values[Symbol.iterator]();\n  let done, next, index = -1;\n  if (arguments.length < 3) {\n    ({done, value} = iterator.next());\n    if (done) return;\n    ++index;\n  }\n  while (({done, value: next} = iterator.next()), !done) {\n    value = reducer(value, next, ++index, values);\n  }\n  return value;\n}\n","export default function reverse(values) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  return Array.from(values).reverse();\n}\n","import {InternSet} from \"internmap\";\n\nexport default function difference(values, ...others) {\n  values = new InternSet(values);\n  for (const other of others) {\n    for (const value of other) {\n      values.delete(value);\n    }\n  }\n  return values;\n}\n","import {InternSet} from \"internmap\";\n\nexport default function disjoint(values, other) {\n  const iterator = other[Symbol.iterator](), set = new InternSet();\n  for (const v of values) {\n    if (set.has(v)) return false;\n    let value, done;\n    while (({value, done} = iterator.next())) {\n      if (done) break;\n      if (Object.is(v, value)) return false;\n      set.add(value);\n    }\n  }\n  return true;\n}\n","import {InternSet} from \"internmap\";\n\nexport default function intersection(values, ...others) {\n  values = new InternSet(values);\n  others = others.map(set);\n  out: for (const value of values) {\n    for (const other of others) {\n      if (!other.has(value)) {\n        values.delete(value);\n        continue out;\n      }\n    }\n  }\n  return values;\n}\n\nfunction set(values) {\n  return values instanceof InternSet ? values : new InternSet(values);\n}\n","export default function superset(values, other) {\n  const iterator = values[Symbol.iterator](), set = new Set();\n  for (const o of other) {\n    const io = intern(o);\n    if (set.has(io)) continue;\n    let value, done;\n    while (({value, done} = iterator.next())) {\n      if (done) return false;\n      const ivalue = intern(value);\n      set.add(ivalue);\n      if (Object.is(io, ivalue)) break;\n    }\n  }\n  return true;\n}\n\nfunction intern(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","import superset from \"./superset.js\";\n\nexport default function subset(values, other) {\n  return superset(other, values);\n}\n","import {InternSet} from \"internmap\";\n\nexport default function union(...others) {\n  const set = new InternSet();\n  for (const other of others) {\n    for (const o of other) {\n      set.add(o);\n    }\n  }\n  return set;\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {Transition} from \"./transition/index.js\";\nimport {SCHEDULED} from \"./transition/schedule.js\";\n\nvar root = [null];\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}\n","export default x => () => x;\n","export default function BrushEvent(type, {\n  sourceEvent,\n  target,\n  selection,\n  mode,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    selection: {value: selection, enumerable: true, configurable: true},\n    mode: {value: mode, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","export var abs = Math.abs;\nexport var cos = Math.cos;\nexport var sin = Math.sin;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = pi * 2;\nexport var max = Math.max;\nexport var epsilon = 1e-12;\n","import {max, tau} from \"./math.js\";\n\nfunction range(i, j) {\n  return Array.from({length: j - i}, (_, k) => i + k);\n}\n\nfunction compareValue(compare) {\n  return function(a, b) {\n    return compare(\n      a.source.value + a.target.value,\n      b.source.value + b.target.value\n    );\n  };\n}\n\nexport default function() {\n  return chord(false, false);\n}\n\nexport function chordTranspose() {\n  return chord(false, true);\n}\n\nexport function chordDirected() {\n  return chord(true, false);\n}\n\nfunction chord(directed, transpose) {\n  var padAngle = 0,\n      sortGroups = null,\n      sortSubgroups = null,\n      sortChords = null;\n\n  function chord(matrix) {\n    var n = matrix.length,\n        groupSums = new Array(n),\n        groupIndex = range(0, n),\n        chords = new Array(n * n),\n        groups = new Array(n),\n        k = 0, dx;\n\n    matrix = Float64Array.from({length: n * n}, transpose\n        ? (_, i) => matrix[i % n][i / n | 0]\n        : (_, i) => matrix[i / n | 0][i % n]);\n\n    // Compute the scaling factor from value to angle in [0, 2pi].\n    for (let i = 0; i < n; ++i) {\n      let x = 0;\n      for (let j = 0; j < n; ++j) x += matrix[i * n + j] + directed * matrix[j * n + i];\n      k += groupSums[i] = x;\n    }\n    k = max(0, tau - padAngle * n) / k;\n    dx = k ? padAngle : tau / n;\n\n    // Compute the angles for each group and constituent chord.\n    {\n      let x = 0;\n      if (sortGroups) groupIndex.sort((a, b) => sortGroups(groupSums[a], groupSums[b]));\n      for (const i of groupIndex) {\n        const x0 = x;\n        if (directed) {\n          const subgroupIndex = range(~n + 1, n).filter(j => j < 0 ? matrix[~j * n + i] : matrix[i * n + j]);\n          if (sortSubgroups) subgroupIndex.sort((a, b) => sortSubgroups(a < 0 ? -matrix[~a * n + i] : matrix[i * n + a], b < 0 ? -matrix[~b * n + i] : matrix[i * n + b]));\n          for (const j of subgroupIndex) {\n            if (j < 0) {\n              const chord = chords[~j * n + i] || (chords[~j * n + i] = {source: null, target: null});\n              chord.target = {index: i, startAngle: x, endAngle: x += matrix[~j * n + i] * k, value: matrix[~j * n + i]};\n            } else {\n              const chord = chords[i * n + j] || (chords[i * n + j] = {source: null, target: null});\n              chord.source = {index: i, startAngle: x, endAngle: x += matrix[i * n + j] * k, value: matrix[i * n + j]};\n            }\n          }\n          groups[i] = {index: i, startAngle: x0, endAngle: x, value: groupSums[i]};\n        } else {\n          const subgroupIndex = range(0, n).filter(j => matrix[i * n + j] || matrix[j * n + i]);\n          if (sortSubgroups) subgroupIndex.sort((a, b) => sortSubgroups(matrix[i * n + a], matrix[i * n + b]));\n          for (const j of subgroupIndex) {\n            let chord;\n            if (i < j) {\n              chord = chords[i * n + j] || (chords[i * n + j] = {source: null, target: null});\n              chord.source = {index: i, startAngle: x, endAngle: x += matrix[i * n + j] * k, value: matrix[i * n + j]};\n            } else {\n              chord = chords[j * n + i] || (chords[j * n + i] = {source: null, target: null});\n              chord.target = {index: i, startAngle: x, endAngle: x += matrix[i * n + j] * k, value: matrix[i * n + j]};\n              if (i === j) chord.source = chord.target;\n            }\n            if (chord.source && chord.target && chord.source.value < chord.target.value) {\n              const source = chord.source;\n              chord.source = chord.target;\n              chord.target = source;\n            }\n          }\n          groups[i] = {index: i, startAngle: x0, endAngle: x, value: groupSums[i]};\n        }\n        x += dx;\n      }\n    }\n\n    // Remove empty chords.\n    chords = Object.values(chords);\n    chords.groups = groups;\n    return sortChords ? chords.sort(sortChords) : chords;\n  }\n\n  chord.padAngle = function(_) {\n    return arguments.length ? (padAngle = max(0, _), chord) : padAngle;\n  };\n\n  chord.sortGroups = function(_) {\n    return arguments.length ? (sortGroups = _, chord) : sortGroups;\n  };\n\n  chord.sortSubgroups = function(_) {\n    return arguments.length ? (sortSubgroups = _, chord) : sortSubgroups;\n  };\n\n  chord.sortChords = function(_) {\n    return arguments.length ? (_ == null ? sortChords = null : (sortChords = compareValue(_))._ = _, chord) : sortChords && sortChords._;\n  };\n\n  return chord;\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {abs, cos, epsilon, halfPi, sin} from \"./math.js\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction defaultPadAngle() {\n  return 0;\n}\n\nfunction defaultArrowheadRadius() {\n  return 10;\n}\n\nfunction ribbon(headRadius) {\n  var source = defaultSource,\n      target = defaultTarget,\n      sourceRadius = defaultRadius,\n      targetRadius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      padAngle = defaultPadAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        s = source.apply(this, arguments),\n        t = target.apply(this, arguments),\n        ap = padAngle.apply(this, arguments) / 2,\n        argv = slice.call(arguments),\n        sr = +sourceRadius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        tr = +targetRadius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n\n    if (!context) context = buffer = path();\n\n    if (ap > epsilon) {\n      if (abs(sa1 - sa0) > ap * 2 + epsilon) sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);\n      else sa0 = sa1 = (sa0 + sa1) / 2;\n      if (abs(ta1 - ta0) > ap * 2 + epsilon) ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);\n      else ta0 = ta1 = (ta0 + ta1) / 2;\n    }\n\n    context.moveTo(sr * cos(sa0), sr * sin(sa0));\n    context.arc(0, 0, sr, sa0, sa1);\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      if (headRadius) {\n        var hr = +headRadius.apply(this, arguments), tr2 = tr - hr, ta2 = (ta0 + ta1) / 2;\n        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));\n        context.lineTo(tr * cos(ta2), tr * sin(ta2));\n        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));\n      } else {\n        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n        context.arc(0, 0, tr, ta0, ta1);\n      }\n    }\n    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  if (headRadius) ribbon.headRadius = function(_) {\n    return arguments.length ? (headRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : headRadius;\n  };\n\n  ribbon.radius = function(_) {\n    return arguments.length ? (sourceRadius = targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.sourceRadius = function(_) {\n    return arguments.length ? (sourceRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.targetRadius = function(_) {\n    return arguments.length ? (targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : targetRadius;\n  };\n\n  ribbon.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : padAngle;\n  };\n\n  ribbon.source = function(_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function(_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), ribbon) : context;\n  };\n\n  return ribbon;\n}\n\nexport default function() {\n  return ribbon();\n}\n\nexport function ribbonArrow() {\n  return ribbon(defaultArrowheadRadius);\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","var array = Array.prototype;\n\nexport var slice = array.slice;\n","export default function(a, b) {\n  return a - b;\n}\n","export default x => () => x;\n","export default function(ring, hole) {\n  var i = -1, n = hole.length, c;\n  while (++i < n) if (c = ringContains(ring, hole[i])) return c;\n  return 0;\n}\n\nfunction ringContains(ring, point) {\n  var x = point[0], y = point[1], contains = -1;\n  for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\n    var pi = ring[i], xi = pi[0], yi = pi[1], pj = ring[j], xj = pj[0], yj = pj[1];\n    if (segmentContains(pi, pj, point)) return 0;\n    if (((yi > y) !== (yj > y)) && ((x < (xj - xi) * (y - yi) / (yj - yi) + xi))) contains = -contains;\n  }\n  return contains;\n}\n\nfunction segmentContains(a, b, c) {\n  var i; return collinear(a, b, c) && within(a[i = +(a[0] === b[0])], c[i], b[i]);\n}\n\nfunction collinear(a, b, c) {\n  return (b[0] - a[0]) * (c[1] - a[1]) === (c[0] - a[0]) * (b[1] - a[1]);\n}\n\nfunction within(p, q, r) {\n  return p <= q && q <= r || r <= q && q <= p;\n}\n","export default function() {}\n","import {extent, nice, thresholdSturges, ticks} from \"d3-array\";\nimport {slice} from \"./array.js\";\nimport ascending from \"./ascending.js\";\nimport area from \"./area.js\";\nimport constant from \"./constant.js\";\nimport contains from \"./contains.js\";\nimport noop from \"./noop.js\";\n\nvar cases = [\n  [],\n  [[[1.0, 1.5], [0.5, 1.0]]],\n  [[[1.5, 1.0], [1.0, 1.5]]],\n  [[[1.5, 1.0], [0.5, 1.0]]],\n  [[[1.0, 0.5], [1.5, 1.0]]],\n  [[[1.0, 1.5], [0.5, 1.0]], [[1.0, 0.5], [1.5, 1.0]]],\n  [[[1.0, 0.5], [1.0, 1.5]]],\n  [[[1.0, 0.5], [0.5, 1.0]]],\n  [[[0.5, 1.0], [1.0, 0.5]]],\n  [[[1.0, 1.5], [1.0, 0.5]]],\n  [[[0.5, 1.0], [1.0, 0.5]], [[1.5, 1.0], [1.0, 1.5]]],\n  [[[1.5, 1.0], [1.0, 0.5]]],\n  [[[0.5, 1.0], [1.5, 1.0]]],\n  [[[1.0, 1.5], [1.5, 1.0]]],\n  [[[0.5, 1.0], [1.0, 1.5]]],\n  []\n];\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      threshold = thresholdSturges,\n      smooth = smoothLinear;\n\n  function contours(values) {\n    var tz = threshold(values);\n\n    // Convert number of thresholds into uniform thresholds.\n    if (!Array.isArray(tz)) {\n      const e = extent(values, finite);\n      tz = ticks(...nice(e[0], e[1], tz), tz);\n      while (tz[tz.length - 1] >= e[1]) tz.pop();\n      while (tz[1] < e[0]) tz.shift();\n    } else {\n      tz = tz.slice().sort(ascending);\n    }\n\n    return tz.map(value => contour(values, value));\n  }\n\n  // Accumulate, smooth contour rings, assign holes to exterior rings.\n  // Based on https://github.com/mbostock/shapefile/blob/v0.6.2/shp/polygon.js\n  function contour(values, value) {\n    const v = value == null ? NaN : +value;\n    if (isNaN(v)) throw new Error(`invalid value: ${value}`);\n\n    var polygons = [],\n        holes = [];\n\n    isorings(values, v, function(ring) {\n      smooth(ring, values, v);\n      if (area(ring) > 0) polygons.push([ring]);\n      else holes.push(ring);\n    });\n\n    holes.forEach(function(hole) {\n      for (var i = 0, n = polygons.length, polygon; i < n; ++i) {\n        if (contains((polygon = polygons[i])[0], hole) !== -1) {\n          polygon.push(hole);\n          return;\n        }\n      }\n    });\n\n    return {\n      type: \"MultiPolygon\",\n      value: value,\n      coordinates: polygons\n    };\n  }\n\n  // Marching squares with isolines stitched into rings.\n  // Based on https://github.com/topojson/topojson-client/blob/v3.0.0/src/stitch.js\n  function isorings(values, value, callback) {\n    var fragmentByStart = new Array,\n        fragmentByEnd = new Array,\n        x, y, t0, t1, t2, t3;\n\n    // Special case for the first row (y = -1, t2 = t3 = 0).\n    x = y = -1;\n    t1 = above(values[0], value);\n    cases[t1 << 1].forEach(stitch);\n    while (++x < dx - 1) {\n      t0 = t1, t1 = above(values[x + 1], value);\n      cases[t0 | t1 << 1].forEach(stitch);\n    }\n    cases[t1 << 0].forEach(stitch);\n\n    // General case for the intermediate rows.\n    while (++y < dy - 1) {\n      x = -1;\n      t1 = above(values[y * dx + dx], value);\n      t2 = above(values[y * dx], value);\n      cases[t1 << 1 | t2 << 2].forEach(stitch);\n      while (++x < dx - 1) {\n        t0 = t1, t1 = above(values[y * dx + dx + x + 1], value);\n        t3 = t2, t2 = above(values[y * dx + x + 1], value);\n        cases[t0 | t1 << 1 | t2 << 2 | t3 << 3].forEach(stitch);\n      }\n      cases[t1 | t2 << 3].forEach(stitch);\n    }\n\n    // Special case for the last row (y = dy - 1, t0 = t1 = 0).\n    x = -1;\n    t2 = values[y * dx] >= value;\n    cases[t2 << 2].forEach(stitch);\n    while (++x < dx - 1) {\n      t3 = t2, t2 = above(values[y * dx + x + 1], value);\n      cases[t2 << 2 | t3 << 3].forEach(stitch);\n    }\n    cases[t2 << 3].forEach(stitch);\n\n    function stitch(line) {\n      var start = [line[0][0] + x, line[0][1] + y],\n          end = [line[1][0] + x, line[1][1] + y],\n          startIndex = index(start),\n          endIndex = index(end),\n          f, g;\n      if (f = fragmentByEnd[startIndex]) {\n        if (g = fragmentByStart[endIndex]) {\n          delete fragmentByEnd[f.end];\n          delete fragmentByStart[g.start];\n          if (f === g) {\n            f.ring.push(end);\n            callback(f.ring);\n          } else {\n            fragmentByStart[f.start] = fragmentByEnd[g.end] = {start: f.start, end: g.end, ring: f.ring.concat(g.ring)};\n          }\n        } else {\n          delete fragmentByEnd[f.end];\n          f.ring.push(end);\n          fragmentByEnd[f.end = endIndex] = f;\n        }\n      } else if (f = fragmentByStart[endIndex]) {\n        if (g = fragmentByEnd[startIndex]) {\n          delete fragmentByStart[f.start];\n          delete fragmentByEnd[g.end];\n          if (f === g) {\n            f.ring.push(end);\n            callback(f.ring);\n          } else {\n            fragmentByStart[g.start] = fragmentByEnd[f.end] = {start: g.start, end: f.end, ring: g.ring.concat(f.ring)};\n          }\n        } else {\n          delete fragmentByStart[f.start];\n          f.ring.unshift(start);\n          fragmentByStart[f.start = startIndex] = f;\n        }\n      } else {\n        fragmentByStart[startIndex] = fragmentByEnd[endIndex] = {start: startIndex, end: endIndex, ring: [start, end]};\n      }\n    }\n  }\n\n  function index(point) {\n    return point[0] * 2 + point[1] * (dx + 1) * 4;\n  }\n\n  function smoothLinear(ring, values, value) {\n    ring.forEach(function(point) {\n      var x = point[0],\n          y = point[1],\n          xt = x | 0,\n          yt = y | 0,\n          v1 = valid(values[yt * dx + xt]);\n      if (x > 0 && x < dx && xt === x) {\n        point[0] = smooth1(x, valid(values[yt * dx + xt - 1]), v1, value);\n      }\n      if (y > 0 && y < dy && yt === y) {\n        point[1] = smooth1(y, valid(values[(yt - 1) * dx + xt]), v1, value);\n      }\n    });\n  }\n\n  contours.contour = contour;\n\n  contours.size = function(_) {\n    if (!arguments.length) return [dx, dy];\n    var _0 = Math.floor(_[0]), _1 = Math.floor(_[1]);\n    if (!(_0 >= 0 && _1 >= 0)) throw new Error(\"invalid size\");\n    return dx = _0, dy = _1, contours;\n  };\n\n  contours.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), contours) : threshold;\n  };\n\n  contours.smooth = function(_) {\n    return arguments.length ? (smooth = _ ? smoothLinear : noop, contours) : smooth === smoothLinear;\n  };\n\n  return contours;\n}\n\n// When computing the extent, ignore infinite values (as well as invalid ones).\nfunction finite(x) {\n  return isFinite(x) ? x : NaN;\n}\n\n// Is the (possibly invalid) x greater than or equal to the (known valid) value?\n// Treat any invalid value as below negative infinity.\nfunction above(x, value) {\n  return x == null ? false : +x >= value;\n}\n\n// During smoothing, treat any invalid value as negative infinity.\nfunction valid(v) {\n  return v == null || isNaN(v = +v) ? -Infinity : v;\n}\n\nfunction smooth1(x, v0, v1, value) {\n  const a = value - v0;\n  const b = v1 - v0;\n  const d = isFinite(a) || isFinite(b) ? a / b : Math.sign(a) / Math.sign(b);\n  return isNaN(d) ? x : x + d - 0.5;\n}\n","export default function(ring) {\n  var i = 0, n = ring.length, area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\n  while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\n  return area;\n}\n","import {blur2, max, ticks} from \"d3-array\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport Contours from \"./contours.js\";\n\nfunction defaultX(d) {\n  return d[0];\n}\n\nfunction defaultY(d) {\n  return d[1];\n}\n\nfunction defaultWeight() {\n  return 1;\n}\n\nexport default function() {\n  var x = defaultX,\n      y = defaultY,\n      weight = defaultWeight,\n      dx = 960,\n      dy = 500,\n      r = 20, // blur radius\n      k = 2, // log2(grid cell size)\n      o = r * 3, // grid offset, to pad for blur\n      n = (dx + o * 2) >> k, // grid width\n      m = (dy + o * 2) >> k, // grid height\n      threshold = constant(20);\n\n  function grid(data) {\n    var values = new Float32Array(n * m),\n        pow2k = Math.pow(2, -k),\n        i = -1;\n\n    for (const d of data) {\n      var xi = (x(d, ++i, data) + o) * pow2k,\n          yi = (y(d, i, data) + o) * pow2k,\n          wi = +weight(d, i, data);\n      if (wi && xi >= 0 && xi < n && yi >= 0 && yi < m) {\n        var x0 = Math.floor(xi),\n            y0 = Math.floor(yi),\n            xt = xi - x0 - 0.5,\n            yt = yi - y0 - 0.5;\n        values[x0 + y0 * n] += (1 - xt) * (1 - yt) * wi;\n        values[x0 + 1 + y0 * n] += xt * (1 - yt) * wi;\n        values[x0 + 1 + (y0 + 1) * n] += xt * yt * wi;\n        values[x0 + (y0 + 1) * n] += (1 - xt) * yt * wi;\n      }\n    }\n\n    blur2({data: values, width: n, height: m}, r * pow2k);\n    return values;\n  }\n\n  function density(data) {\n    var values = grid(data),\n        tz = threshold(values),\n        pow4k = Math.pow(2, 2 * k);\n\n    // Convert number of thresholds into uniform thresholds.\n    if (!Array.isArray(tz)) {\n      tz = ticks(Number.MIN_VALUE, max(values) / pow4k, tz);\n    }\n\n    return Contours()\n        .size([n, m])\n        .thresholds(tz.map(d => d * pow4k))\n      (values)\n        .map((c, i) => (c.value = +tz[i], transform(c)));\n  }\n\n  density.contours = function(data) {\n    var values = grid(data),\n        contours = Contours().size([n, m]),\n        pow4k = Math.pow(2, 2 * k),\n        contour = value => {\n          value = +value;\n          var c = transform(contours.contour(values, value * pow4k));\n          c.value = value; // preserve exact threshold value\n          return c;\n        };\n    Object.defineProperty(contour, \"max\", {get: () => max(values) / pow4k});\n    return contour;\n  };\n\n  function transform(geometry) {\n    geometry.coordinates.forEach(transformPolygon);\n    return geometry;\n  }\n\n  function transformPolygon(coordinates) {\n    coordinates.forEach(transformRing);\n  }\n\n  function transformRing(coordinates) {\n    coordinates.forEach(transformPoint);\n  }\n\n  // TODO Optimize.\n  function transformPoint(coordinates) {\n    coordinates[0] = coordinates[0] * Math.pow(2, k) - o;\n    coordinates[1] = coordinates[1] * Math.pow(2, k) - o;\n  }\n\n  function resize() {\n    o = r * 3;\n    n = (dx + o * 2) >> k;\n    m = (dy + o * 2) >> k;\n    return density;\n  }\n\n  density.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), density) : x;\n  };\n\n  density.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), density) : y;\n  };\n\n  density.weight = function(_) {\n    return arguments.length ? (weight = typeof _ === \"function\" ? _ : constant(+_), density) : weight;\n  };\n\n  density.size = function(_) {\n    if (!arguments.length) return [dx, dy];\n    var _0 = +_[0], _1 = +_[1];\n    if (!(_0 >= 0 && _1 >= 0)) throw new Error(\"invalid size\");\n    return dx = _0, dy = _1, resize();\n  };\n\n  density.cellSize = function(_) {\n    if (!arguments.length) return 1 << k;\n    if (!((_ = +_) >= 1)) throw new Error(\"invalid cell size\");\n    return k = Math.floor(Math.log(_) / Math.LN2), resize();\n  };\n\n  density.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), density) : threshold;\n  };\n\n  density.bandwidth = function(_) {\n    if (!arguments.length) return Math.sqrt(r * (r + 1));\n    if (!((_ = +_) >= 0)) throw new Error(\"invalid bandwidth\");\n    return r = (Math.sqrt(4 * _ * _ + 1) - 1) / 2, resize();\n  };\n\n  return density;\n}\n","export const epsilon = 1.1102230246251565e-16;\nexport const splitter = 134217729;\nexport const resulterrbound = (3 + 8 * epsilon) * epsilon;\n\n// fast_expansion_sum_zeroelim routine from oritinal code\nexport function sum(elen, e, flen, f, h) {\n    let Q, Qnew, hh, bvirt;\n    let enow = e[0];\n    let fnow = f[0];\n    let eindex = 0;\n    let findex = 0;\n    if ((fnow > enow) === (fnow > -enow)) {\n        Q = enow;\n        enow = e[++eindex];\n    } else {\n        Q = fnow;\n        fnow = f[++findex];\n    }\n    let hindex = 0;\n    if (eindex < elen && findex < flen) {\n        if ((fnow > enow) === (fnow > -enow)) {\n            Qnew = enow + Q;\n            hh = Q - (Qnew - enow);\n            enow = e[++eindex];\n        } else {\n            Qnew = fnow + Q;\n            hh = Q - (Qnew - fnow);\n            fnow = f[++findex];\n        }\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        while (eindex < elen && findex < flen) {\n            if ((fnow > enow) === (fnow > -enow)) {\n                Qnew = Q + enow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (enow - bvirt);\n                enow = e[++eindex];\n            } else {\n                Qnew = Q + fnow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n                fnow = f[++findex];\n            }\n            Q = Qnew;\n            if (hh !== 0) {\n                h[hindex++] = hh;\n            }\n        }\n    }\n    while (eindex < elen) {\n        Qnew = Q + enow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (enow - bvirt);\n        enow = e[++eindex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    while (findex < flen) {\n        Qnew = Q + fnow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n        fnow = f[++findex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function sum_three(alen, a, blen, b, clen, c, tmp, out) {\n    return sum(sum(alen, a, blen, b, tmp), tmp, clen, c, out);\n}\n\n// scale_expansion_zeroelim routine from oritinal code\nexport function scale(elen, e, b, h) {\n    let Q, sum, hh, product1, product0;\n    let bvirt, c, ahi, alo, bhi, blo;\n\n    c = splitter * b;\n    bhi = c - (c - b);\n    blo = b - bhi;\n    let enow = e[0];\n    Q = enow * b;\n    c = splitter * enow;\n    ahi = c - (c - enow);\n    alo = enow - ahi;\n    hh = alo * blo - (Q - ahi * bhi - alo * bhi - ahi * blo);\n    let hindex = 0;\n    if (hh !== 0) {\n        h[hindex++] = hh;\n    }\n    for (let i = 1; i < elen; i++) {\n        enow = e[i];\n        product1 = enow * b;\n        c = splitter * enow;\n        ahi = c - (c - enow);\n        alo = enow - ahi;\n        product0 = alo * blo - (product1 - ahi * bhi - alo * bhi - ahi * blo);\n        sum = Q + product0;\n        bvirt = sum - Q;\n        hh = Q - (sum - bvirt) + (product0 - bvirt);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        Q = product1 + sum;\n        hh = sum - (Q - product1);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function negate(elen, e) {\n    for (let i = 0; i < elen; i++) e[i] = -e[i];\n    return elen;\n}\n\nexport function estimate(elen, e) {\n    let Q = e[0];\n    for (let i = 1; i < elen; i++) Q += e[i];\n    return Q;\n}\n\nexport function vec(n) {\n    return new Float64Array(n);\n}\n","import {epsilon, splitter, resulterrbound, estimate, vec, sum} from './util.js';\n\nconst ccwerrboundA = (3 + 16 * epsilon) * epsilon;\nconst ccwerrboundB = (2 + 12 * epsilon) * epsilon;\nconst ccwerrboundC = (9 + 64 * epsilon) * epsilon * epsilon;\n\nconst B = vec(4);\nconst C1 = vec(8);\nconst C2 = vec(12);\nconst D = vec(16);\nconst u = vec(4);\n\nfunction orient2dadapt(ax, ay, bx, by, cx, cy, detsum) {\n    let acxtail, acytail, bcxtail, bcytail;\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    const acx = ax - cx;\n    const bcx = bx - cx;\n    const acy = ay - cy;\n    const bcy = by - cy;\n\n    s1 = acx * bcy;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcx;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    B[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    B[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    B[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    B[3] = u3;\n\n    let det = estimate(4, B);\n    let errbound = ccwerrboundB * detsum;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - acx;\n    acxtail = ax - (acx + bvirt) + (bvirt - cx);\n    bvirt = bx - bcx;\n    bcxtail = bx - (bcx + bvirt) + (bvirt - cx);\n    bvirt = ay - acy;\n    acytail = ay - (acy + bvirt) + (bvirt - cy);\n    bvirt = by - bcy;\n    bcytail = by - (bcy + bvirt) + (bvirt - cy);\n\n    if (acxtail === 0 && acytail === 0 && bcxtail === 0 && bcytail === 0) {\n        return det;\n    }\n\n    errbound = ccwerrboundC * detsum + resulterrbound * Math.abs(det);\n    det += (acx * bcytail + bcy * acxtail) - (acy * bcxtail + bcx * acytail);\n    if (det >= errbound || -det >= errbound) return det;\n\n    s1 = acxtail * bcy;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcx;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C1len = sum(4, B, 4, u, C1);\n\n    s1 = acx * bcytail;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcxtail;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C2len = sum(C1len, C1, 4, u, C2);\n\n    s1 = acxtail * bcytail;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcxtail;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const Dlen = sum(C2len, C2, 4, u, D);\n\n    return D[Dlen - 1];\n}\n\nexport function orient2d(ax, ay, bx, by, cx, cy) {\n    const detleft = (ay - cy) * (bx - cx);\n    const detright = (ax - cx) * (by - cy);\n    const det = detleft - detright;\n\n    const detsum = Math.abs(detleft + detright);\n    if (Math.abs(det) >= ccwerrboundA * detsum) return det;\n\n    return -orient2dadapt(ax, ay, bx, by, cx, cy, detsum);\n}\n\nexport function orient2dfast(ax, ay, bx, by, cx, cy) {\n    return (ay - cy) * (bx - cx) - (ax - cx) * (by - cy);\n}\n","import {epsilon, splitter, resulterrbound, estimate, vec, sum, scale} from './util.js';\n\nconst o3derrboundA = (7 + 56 * epsilon) * epsilon;\nconst o3derrboundB = (3 + 28 * epsilon) * epsilon;\nconst o3derrboundC = (26 + 288 * epsilon) * epsilon * epsilon;\n\nconst bc = vec(4);\nconst ca = vec(4);\nconst ab = vec(4);\nconst at_b = vec(4);\nconst at_c = vec(4);\nconst bt_c = vec(4);\nconst bt_a = vec(4);\nconst ct_a = vec(4);\nconst ct_b = vec(4);\nconst bct = vec(8);\nconst cat = vec(8);\nconst abt = vec(8);\nconst u = vec(4);\n\nconst _8 = vec(8);\nconst _8b = vec(8);\nconst _16 = vec(8);\nconst _12 = vec(12);\n\nlet fin = vec(192);\nlet fin2 = vec(192);\n\nfunction finadd(finlen, alen, a) {\n    finlen = sum(finlen, fin, alen, a, fin2);\n    const tmp = fin; fin = fin2; fin2 = tmp;\n    return finlen;\n}\n\nfunction tailinit(xtail, ytail, ax, ay, bx, by, a, b) {\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, t1, t0, u3, negate;\n    if (xtail === 0) {\n        if (ytail === 0) {\n            a[0] = 0;\n            b[0] = 0;\n            return 1;\n        } else {\n            negate = -ytail;\n            s1 = negate * ax;\n            c = splitter * negate;\n            ahi = c - (c - negate);\n            alo = negate - ahi;\n            c = splitter * ax;\n            bhi = c - (c - ax);\n            blo = ax - bhi;\n            a[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            a[1] = s1;\n            s1 = ytail * bx;\n            c = splitter * ytail;\n            ahi = c - (c - ytail);\n            alo = ytail - ahi;\n            c = splitter * bx;\n            bhi = c - (c - bx);\n            blo = bx - bhi;\n            b[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            b[1] = s1;\n            return 2;\n        }\n    } else {\n        if (ytail === 0) {\n            s1 = xtail * ay;\n            c = splitter * xtail;\n            ahi = c - (c - xtail);\n            alo = xtail - ahi;\n            c = splitter * ay;\n            bhi = c - (c - ay);\n            blo = ay - bhi;\n            a[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            a[1] = s1;\n            negate = -xtail;\n            s1 = negate * by;\n            c = splitter * negate;\n            ahi = c - (c - negate);\n            alo = negate - ahi;\n            c = splitter * by;\n            bhi = c - (c - by);\n            blo = by - bhi;\n            b[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            b[1] = s1;\n            return 2;\n        } else {\n            s1 = xtail * ay;\n            c = splitter * xtail;\n            ahi = c - (c - xtail);\n            alo = xtail - ahi;\n            c = splitter * ay;\n            bhi = c - (c - ay);\n            blo = ay - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = ytail * ax;\n            c = splitter * ytail;\n            ahi = c - (c - ytail);\n            alo = ytail - ahi;\n            c = splitter * ax;\n            bhi = c - (c - ax);\n            blo = ax - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            a[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            a[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            a[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            a[3] = u3;\n            s1 = ytail * bx;\n            c = splitter * ytail;\n            ahi = c - (c - ytail);\n            alo = ytail - ahi;\n            c = splitter * bx;\n            bhi = c - (c - bx);\n            blo = bx - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = xtail * by;\n            c = splitter * xtail;\n            ahi = c - (c - xtail);\n            alo = xtail - ahi;\n            c = splitter * by;\n            bhi = c - (c - by);\n            blo = by - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            b[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            b[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            b[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            b[3] = u3;\n            return 4;\n        }\n    }\n}\n\nfunction tailadd(finlen, a, b, k, z) {\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, u3;\n    s1 = a * b;\n    c = splitter * a;\n    ahi = c - (c - a);\n    alo = a - ahi;\n    c = splitter * b;\n    bhi = c - (c - b);\n    blo = b - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    c = splitter * k;\n    bhi = c - (c - k);\n    blo = k - bhi;\n    _i = s0 * k;\n    c = splitter * s0;\n    ahi = c - (c - s0);\n    alo = s0 - ahi;\n    u[0] = alo * blo - (_i - ahi * bhi - alo * bhi - ahi * blo);\n    _j = s1 * k;\n    c = splitter * s1;\n    ahi = c - (c - s1);\n    alo = s1 - ahi;\n    _0 = alo * blo - (_j - ahi * bhi - alo * bhi - ahi * blo);\n    _k = _i + _0;\n    bvirt = _k - _i;\n    u[1] = _i - (_k - bvirt) + (_0 - bvirt);\n    u3 = _j + _k;\n    u[2] = _k - (u3 - _j);\n    u[3] = u3;\n    finlen = finadd(finlen, 4, u);\n    if (z !== 0) {\n        c = splitter * z;\n        bhi = c - (c - z);\n        blo = z - bhi;\n        _i = s0 * z;\n        c = splitter * s0;\n        ahi = c - (c - s0);\n        alo = s0 - ahi;\n        u[0] = alo * blo - (_i - ahi * bhi - alo * bhi - ahi * blo);\n        _j = s1 * z;\n        c = splitter * s1;\n        ahi = c - (c - s1);\n        alo = s1 - ahi;\n        _0 = alo * blo - (_j - ahi * bhi - alo * bhi - ahi * blo);\n        _k = _i + _0;\n        bvirt = _k - _i;\n        u[1] = _i - (_k - bvirt) + (_0 - bvirt);\n        u3 = _j + _k;\n        u[2] = _k - (u3 - _j);\n        u[3] = u3;\n        finlen = finadd(finlen, 4, u);\n    }\n    return finlen;\n}\n\nfunction orient3dadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, permanent) {\n    let finlen;\n    let adxtail, bdxtail, cdxtail;\n    let adytail, bdytail, cdytail;\n    let adztail, bdztail, cdztail;\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, t1, t0, u3;\n\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n    const adz = az - dz;\n    const bdz = bz - dz;\n    const cdz = cz - dz;\n\n    s1 = bdx * cdy;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cdx * bdy;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bc[3] = u3;\n    s1 = cdx * ady;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = adx * cdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ca[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ca[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ca[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ca[3] = u3;\n    s1 = adx * bdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bdx * ady;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ab[3] = u3;\n\n    finlen = sum(\n        sum(\n            scale(4, bc, adz, _8), _8,\n            scale(4, ca, bdz, _8b), _8b, _16), _16,\n        scale(4, ab, cdz, _8), _8, fin);\n\n    let det = estimate(finlen, fin);\n    let errbound = o3derrboundB * permanent;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - adx;\n    adxtail = ax - (adx + bvirt) + (bvirt - dx);\n    bvirt = bx - bdx;\n    bdxtail = bx - (bdx + bvirt) + (bvirt - dx);\n    bvirt = cx - cdx;\n    cdxtail = cx - (cdx + bvirt) + (bvirt - dx);\n    bvirt = ay - ady;\n    adytail = ay - (ady + bvirt) + (bvirt - dy);\n    bvirt = by - bdy;\n    bdytail = by - (bdy + bvirt) + (bvirt - dy);\n    bvirt = cy - cdy;\n    cdytail = cy - (cdy + bvirt) + (bvirt - dy);\n    bvirt = az - adz;\n    adztail = az - (adz + bvirt) + (bvirt - dz);\n    bvirt = bz - bdz;\n    bdztail = bz - (bdz + bvirt) + (bvirt - dz);\n    bvirt = cz - cdz;\n    cdztail = cz - (cdz + bvirt) + (bvirt - dz);\n\n    if (adxtail === 0 && bdxtail === 0 && cdxtail === 0 &&\n        adytail === 0 && bdytail === 0 && cdytail === 0 &&\n        adztail === 0 && bdztail === 0 && cdztail === 0) {\n        return det;\n    }\n\n    errbound = o3derrboundC * permanent + resulterrbound * Math.abs(det);\n    det +=\n        adz * (bdx * cdytail + cdy * bdxtail - (bdy * cdxtail + cdx * bdytail)) + adztail * (bdx * cdy - bdy * cdx) +\n        bdz * (cdx * adytail + ady * cdxtail - (cdy * adxtail + adx * cdytail)) + bdztail * (cdx * ady - cdy * adx) +\n        cdz * (adx * bdytail + bdy * adxtail - (ady * bdxtail + bdx * adytail)) + cdztail * (adx * bdy - ady * bdx);\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    const at_len = tailinit(adxtail, adytail, bdx, bdy, cdx, cdy, at_b, at_c);\n    const bt_len = tailinit(bdxtail, bdytail, cdx, cdy, adx, ady, bt_c, bt_a);\n    const ct_len = tailinit(cdxtail, cdytail, adx, ady, bdx, bdy, ct_a, ct_b);\n\n    const bctlen = sum(bt_len, bt_c, ct_len, ct_b, bct);\n    finlen = finadd(finlen, scale(bctlen, bct, adz, _16), _16);\n\n    const catlen = sum(ct_len, ct_a, at_len, at_c, cat);\n    finlen = finadd(finlen, scale(catlen, cat, bdz, _16), _16);\n\n    const abtlen = sum(at_len, at_b, bt_len, bt_a, abt);\n    finlen = finadd(finlen, scale(abtlen, abt, cdz, _16), _16);\n\n    if (adztail !== 0) {\n        finlen = finadd(finlen, scale(4, bc, adztail, _12), _12);\n        finlen = finadd(finlen, scale(bctlen, bct, adztail, _16), _16);\n    }\n    if (bdztail !== 0) {\n        finlen = finadd(finlen, scale(4, ca, bdztail, _12), _12);\n        finlen = finadd(finlen, scale(catlen, cat, bdztail, _16), _16);\n    }\n    if (cdztail !== 0) {\n        finlen = finadd(finlen, scale(4, ab, cdztail, _12), _12);\n        finlen = finadd(finlen, scale(abtlen, abt, cdztail, _16), _16);\n    }\n\n    if (adxtail !== 0) {\n        if (bdytail !== 0) {\n            finlen = tailadd(finlen, adxtail, bdytail, cdz, cdztail);\n        }\n        if (cdytail !== 0) {\n            finlen = tailadd(finlen, -adxtail, cdytail, bdz, bdztail);\n        }\n    }\n    if (bdxtail !== 0) {\n        if (cdytail !== 0) {\n            finlen = tailadd(finlen, bdxtail, cdytail, adz, adztail);\n        }\n        if (adytail !== 0) {\n            finlen = tailadd(finlen, -bdxtail, adytail, cdz, cdztail);\n        }\n    }\n    if (cdxtail !== 0) {\n        if (adytail !== 0) {\n            finlen = tailadd(finlen, cdxtail, adytail, bdz, bdztail);\n        }\n        if (bdytail !== 0) {\n            finlen = tailadd(finlen, -cdxtail, bdytail, adz, adztail);\n        }\n    }\n\n    return fin[finlen - 1];\n}\n\nexport function orient3d(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz) {\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n    const adz = az - dz;\n    const bdz = bz - dz;\n    const cdz = cz - dz;\n\n    const bdxcdy = bdx * cdy;\n    const cdxbdy = cdx * bdy;\n\n    const cdxady = cdx * ady;\n    const adxcdy = adx * cdy;\n\n    const adxbdy = adx * bdy;\n    const bdxady = bdx * ady;\n\n    const det =\n        adz * (bdxcdy - cdxbdy) +\n        bdz * (cdxady - adxcdy) +\n        cdz * (adxbdy - bdxady);\n\n    const permanent =\n        (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz) +\n        (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz) +\n        (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz);\n\n    const errbound = o3derrboundA * permanent;\n    if (det > errbound || -det > errbound) {\n        return det;\n    }\n\n    return orient3dadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, permanent);\n}\n\nexport function orient3dfast(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz) {\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n    const adz = az - dz;\n    const bdz = bz - dz;\n    const cdz = cz - dz;\n\n    return adx * (bdy * cdz - bdz * cdy) +\n        bdx * (cdy * adz - cdz * ady) +\n        cdx * (ady * bdz - adz * bdy);\n}\n","import {epsilon, splitter, resulterrbound, estimate, vec, sum, sum_three, scale} from './util.js';\n\nconst iccerrboundA = (10 + 96 * epsilon) * epsilon;\nconst iccerrboundB = (4 + 48 * epsilon) * epsilon;\nconst iccerrboundC = (44 + 576 * epsilon) * epsilon * epsilon;\n\nconst bc = vec(4);\nconst ca = vec(4);\nconst ab = vec(4);\nconst aa = vec(4);\nconst bb = vec(4);\nconst cc = vec(4);\nconst u = vec(4);\nconst v = vec(4);\nconst axtbc = vec(8);\nconst aytbc = vec(8);\nconst bxtca = vec(8);\nconst bytca = vec(8);\nconst cxtab = vec(8);\nconst cytab = vec(8);\nconst abt = vec(8);\nconst bct = vec(8);\nconst cat = vec(8);\nconst abtt = vec(4);\nconst bctt = vec(4);\nconst catt = vec(4);\n\nconst _8 = vec(8);\nconst _16 = vec(16);\nconst _16b = vec(16);\nconst _16c = vec(16);\nconst _32 = vec(32);\nconst _32b = vec(32);\nconst _48 = vec(48);\nconst _64 = vec(64);\n\nlet fin = vec(1152);\nlet fin2 = vec(1152);\n\nfunction finadd(finlen, a, alen) {\n    finlen = sum(finlen, fin, a, alen, fin2);\n    const tmp = fin; fin = fin2; fin2 = tmp;\n    return finlen;\n}\n\nfunction incircleadapt(ax, ay, bx, by, cx, cy, dx, dy, permanent) {\n    let finlen;\n    let adxtail, bdxtail, cdxtail, adytail, bdytail, cdytail;\n    let axtbclen, aytbclen, bxtcalen, bytcalen, cxtablen, cytablen;\n    let abtlen, bctlen, catlen;\n    let abttlen, bcttlen, cattlen;\n    let n1, n0;\n\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n\n    s1 = bdx * cdy;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cdx * bdy;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bc[3] = u3;\n    s1 = cdx * ady;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = adx * cdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * cdy;\n    bhi = c - (c - cdy);\n    blo = cdy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ca[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ca[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ca[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ca[3] = u3;\n    s1 = adx * bdy;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    c = splitter * bdy;\n    bhi = c - (c - bdy);\n    blo = bdy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bdx * ady;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    c = splitter * ady;\n    bhi = c - (c - ady);\n    blo = ady - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ab[3] = u3;\n\n    finlen = sum(\n        sum(\n            sum(\n                scale(scale(4, bc, adx, _8), _8, adx, _16), _16,\n                scale(scale(4, bc, ady, _8), _8, ady, _16b), _16b, _32), _32,\n            sum(\n                scale(scale(4, ca, bdx, _8), _8, bdx, _16), _16,\n                scale(scale(4, ca, bdy, _8), _8, bdy, _16b), _16b, _32b), _32b, _64), _64,\n        sum(\n            scale(scale(4, ab, cdx, _8), _8, cdx, _16), _16,\n            scale(scale(4, ab, cdy, _8), _8, cdy, _16b), _16b, _32), _32, fin);\n\n    let det = estimate(finlen, fin);\n    let errbound = iccerrboundB * permanent;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - adx;\n    adxtail = ax - (adx + bvirt) + (bvirt - dx);\n    bvirt = ay - ady;\n    adytail = ay - (ady + bvirt) + (bvirt - dy);\n    bvirt = bx - bdx;\n    bdxtail = bx - (bdx + bvirt) + (bvirt - dx);\n    bvirt = by - bdy;\n    bdytail = by - (bdy + bvirt) + (bvirt - dy);\n    bvirt = cx - cdx;\n    cdxtail = cx - (cdx + bvirt) + (bvirt - dx);\n    bvirt = cy - cdy;\n    cdytail = cy - (cdy + bvirt) + (bvirt - dy);\n    if (adxtail === 0 && bdxtail === 0 && cdxtail === 0 && adytail === 0 && bdytail === 0 && cdytail === 0) {\n        return det;\n    }\n\n    errbound = iccerrboundC * permanent + resulterrbound * Math.abs(det);\n    det += ((adx * adx + ady * ady) * ((bdx * cdytail + cdy * bdxtail) - (bdy * cdxtail + cdx * bdytail)) +\n        2 * (adx * adxtail + ady * adytail) * (bdx * cdy - bdy * cdx)) +\n        ((bdx * bdx + bdy * bdy) * ((cdx * adytail + ady * cdxtail) - (cdy * adxtail + adx * cdytail)) +\n        2 * (bdx * bdxtail + bdy * bdytail) * (cdx * ady - cdy * adx)) +\n        ((cdx * cdx + cdy * cdy) * ((adx * bdytail + bdy * adxtail) - (ady * bdxtail + bdx * adytail)) +\n        2 * (cdx * cdxtail + cdy * cdytail) * (adx * bdy - ady * bdx));\n\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    if (bdxtail !== 0 || bdytail !== 0 || cdxtail !== 0 || cdytail !== 0) {\n        s1 = adx * adx;\n        c = splitter * adx;\n        ahi = c - (c - adx);\n        alo = adx - ahi;\n        s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n        t1 = ady * ady;\n        c = splitter * ady;\n        ahi = c - (c - ady);\n        alo = ady - ahi;\n        t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n        _i = s0 + t0;\n        bvirt = _i - s0;\n        aa[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n        _j = s1 + _i;\n        bvirt = _j - s1;\n        _0 = s1 - (_j - bvirt) + (_i - bvirt);\n        _i = _0 + t1;\n        bvirt = _i - _0;\n        aa[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n        u3 = _j + _i;\n        bvirt = u3 - _j;\n        aa[2] = _j - (u3 - bvirt) + (_i - bvirt);\n        aa[3] = u3;\n    }\n    if (cdxtail !== 0 || cdytail !== 0 || adxtail !== 0 || adytail !== 0) {\n        s1 = bdx * bdx;\n        c = splitter * bdx;\n        ahi = c - (c - bdx);\n        alo = bdx - ahi;\n        s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n        t1 = bdy * bdy;\n        c = splitter * bdy;\n        ahi = c - (c - bdy);\n        alo = bdy - ahi;\n        t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n        _i = s0 + t0;\n        bvirt = _i - s0;\n        bb[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n        _j = s1 + _i;\n        bvirt = _j - s1;\n        _0 = s1 - (_j - bvirt) + (_i - bvirt);\n        _i = _0 + t1;\n        bvirt = _i - _0;\n        bb[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n        u3 = _j + _i;\n        bvirt = u3 - _j;\n        bb[2] = _j - (u3 - bvirt) + (_i - bvirt);\n        bb[3] = u3;\n    }\n    if (adxtail !== 0 || adytail !== 0 || bdxtail !== 0 || bdytail !== 0) {\n        s1 = cdx * cdx;\n        c = splitter * cdx;\n        ahi = c - (c - cdx);\n        alo = cdx - ahi;\n        s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n        t1 = cdy * cdy;\n        c = splitter * cdy;\n        ahi = c - (c - cdy);\n        alo = cdy - ahi;\n        t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n        _i = s0 + t0;\n        bvirt = _i - s0;\n        cc[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n        _j = s1 + _i;\n        bvirt = _j - s1;\n        _0 = s1 - (_j - bvirt) + (_i - bvirt);\n        _i = _0 + t1;\n        bvirt = _i - _0;\n        cc[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n        u3 = _j + _i;\n        bvirt = u3 - _j;\n        cc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n        cc[3] = u3;\n    }\n\n    if (adxtail !== 0) {\n        axtbclen = scale(4, bc, adxtail, axtbc);\n        finlen = finadd(finlen, sum_three(\n            scale(axtbclen, axtbc, 2 * adx, _16), _16,\n            scale(scale(4, cc, adxtail, _8), _8, bdy, _16b), _16b,\n            scale(scale(4, bb, adxtail, _8), _8, -cdy, _16c), _16c, _32, _48), _48);\n    }\n    if (adytail !== 0) {\n        aytbclen = scale(4, bc, adytail, aytbc);\n        finlen = finadd(finlen, sum_three(\n            scale(aytbclen, aytbc, 2 * ady, _16), _16,\n            scale(scale(4, bb, adytail, _8), _8, cdx, _16b), _16b,\n            scale(scale(4, cc, adytail, _8), _8, -bdx, _16c), _16c, _32, _48), _48);\n    }\n    if (bdxtail !== 0) {\n        bxtcalen = scale(4, ca, bdxtail, bxtca);\n        finlen = finadd(finlen, sum_three(\n            scale(bxtcalen, bxtca, 2 * bdx, _16), _16,\n            scale(scale(4, aa, bdxtail, _8), _8, cdy, _16b), _16b,\n            scale(scale(4, cc, bdxtail, _8), _8, -ady, _16c), _16c, _32, _48), _48);\n    }\n    if (bdytail !== 0) {\n        bytcalen = scale(4, ca, bdytail, bytca);\n        finlen = finadd(finlen, sum_three(\n            scale(bytcalen, bytca, 2 * bdy, _16), _16,\n            scale(scale(4, cc, bdytail, _8), _8, adx, _16b), _16b,\n            scale(scale(4, aa, bdytail, _8), _8, -cdx, _16c), _16c, _32, _48), _48);\n    }\n    if (cdxtail !== 0) {\n        cxtablen = scale(4, ab, cdxtail, cxtab);\n        finlen = finadd(finlen, sum_three(\n            scale(cxtablen, cxtab, 2 * cdx, _16), _16,\n            scale(scale(4, bb, cdxtail, _8), _8, ady, _16b), _16b,\n            scale(scale(4, aa, cdxtail, _8), _8, -bdy, _16c), _16c, _32, _48), _48);\n    }\n    if (cdytail !== 0) {\n        cytablen = scale(4, ab, cdytail, cytab);\n        finlen = finadd(finlen, sum_three(\n            scale(cytablen, cytab, 2 * cdy, _16), _16,\n            scale(scale(4, aa, cdytail, _8), _8, bdx, _16b), _16b,\n            scale(scale(4, bb, cdytail, _8), _8, -adx, _16c), _16c, _32, _48), _48);\n    }\n\n    if (adxtail !== 0 || adytail !== 0) {\n        if (bdxtail !== 0 || bdytail !== 0 || cdxtail !== 0 || cdytail !== 0) {\n            s1 = bdxtail * cdy;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * cdy;\n            bhi = c - (c - cdy);\n            blo = cdy - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = bdx * cdytail;\n            c = splitter * bdx;\n            ahi = c - (c - bdx);\n            alo = bdx - ahi;\n            c = splitter * cdytail;\n            bhi = c - (c - cdytail);\n            blo = cdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            u[3] = u3;\n            s1 = cdxtail * -bdy;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * -bdy;\n            bhi = c - (c - -bdy);\n            blo = -bdy - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = cdx * -bdytail;\n            c = splitter * cdx;\n            ahi = c - (c - cdx);\n            alo = cdx - ahi;\n            c = splitter * -bdytail;\n            bhi = c - (c - -bdytail);\n            blo = -bdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            v[3] = u3;\n            bctlen = sum(4, u, 4, v, bct);\n            s1 = bdxtail * cdytail;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * cdytail;\n            bhi = c - (c - cdytail);\n            blo = cdytail - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = cdxtail * bdytail;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * bdytail;\n            bhi = c - (c - bdytail);\n            blo = bdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            bctt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            bctt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            bctt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            bctt[3] = u3;\n            bcttlen = 4;\n        } else {\n            bct[0] = 0;\n            bctlen = 1;\n            bctt[0] = 0;\n            bcttlen = 1;\n        }\n        if (adxtail !== 0) {\n            const len = scale(bctlen, bct, adxtail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(axtbclen, axtbc, adxtail, _16), _16,\n                scale(len, _16c, 2 * adx, _32), _32, _48), _48);\n\n            const len2 = scale(bcttlen, bctt, adxtail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * adx, _16), _16,\n                scale(len2, _8, adxtail, _16b), _16b,\n                scale(len, _16c, adxtail, _32), _32, _32b, _64), _64);\n\n            if (bdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, cc, adxtail, _8), _8, bdytail, _16), _16);\n            }\n            if (cdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, bb, -adxtail, _8), _8, cdytail, _16), _16);\n            }\n        }\n        if (adytail !== 0) {\n            const len = scale(bctlen, bct, adytail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(aytbclen, aytbc, adytail, _16), _16,\n                scale(len, _16c, 2 * ady, _32), _32, _48), _48);\n\n            const len2 = scale(bcttlen, bctt, adytail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * ady, _16), _16,\n                scale(len2, _8, adytail, _16b), _16b,\n                scale(len, _16c, adytail, _32), _32, _32b, _64), _64);\n        }\n    }\n    if (bdxtail !== 0 || bdytail !== 0) {\n        if (cdxtail !== 0 || cdytail !== 0 || adxtail !== 0 || adytail !== 0) {\n            s1 = cdxtail * ady;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * ady;\n            bhi = c - (c - ady);\n            blo = ady - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = cdx * adytail;\n            c = splitter * cdx;\n            ahi = c - (c - cdx);\n            alo = cdx - ahi;\n            c = splitter * adytail;\n            bhi = c - (c - adytail);\n            blo = adytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            u[3] = u3;\n            n1 = -cdy;\n            n0 = -cdytail;\n            s1 = adxtail * n1;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * n1;\n            bhi = c - (c - n1);\n            blo = n1 - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = adx * n0;\n            c = splitter * adx;\n            ahi = c - (c - adx);\n            alo = adx - ahi;\n            c = splitter * n0;\n            bhi = c - (c - n0);\n            blo = n0 - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            v[3] = u3;\n            catlen = sum(4, u, 4, v, cat);\n            s1 = cdxtail * adytail;\n            c = splitter * cdxtail;\n            ahi = c - (c - cdxtail);\n            alo = cdxtail - ahi;\n            c = splitter * adytail;\n            bhi = c - (c - adytail);\n            blo = adytail - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = adxtail * cdytail;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * cdytail;\n            bhi = c - (c - cdytail);\n            blo = cdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            catt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            catt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            catt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            catt[3] = u3;\n            cattlen = 4;\n        } else {\n            cat[0] = 0;\n            catlen = 1;\n            catt[0] = 0;\n            cattlen = 1;\n        }\n        if (bdxtail !== 0) {\n            const len = scale(catlen, cat, bdxtail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(bxtcalen, bxtca, bdxtail, _16), _16,\n                scale(len, _16c, 2 * bdx, _32), _32, _48), _48);\n\n            const len2 = scale(cattlen, catt, bdxtail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * bdx, _16), _16,\n                scale(len2, _8, bdxtail, _16b), _16b,\n                scale(len, _16c, bdxtail, _32), _32, _32b, _64), _64);\n\n            if (cdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, aa, bdxtail, _8), _8, cdytail, _16), _16);\n            }\n            if (adytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, cc, -bdxtail, _8), _8, adytail, _16), _16);\n            }\n        }\n        if (bdytail !== 0) {\n            const len = scale(catlen, cat, bdytail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(bytcalen, bytca, bdytail, _16), _16,\n                scale(len, _16c, 2 * bdy, _32), _32, _48), _48);\n\n            const len2 = scale(cattlen, catt, bdytail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * bdy, _16), _16,\n                scale(len2, _8, bdytail, _16b), _16b,\n                scale(len, _16c, bdytail, _32), _32,  _32b, _64), _64);\n        }\n    }\n    if (cdxtail !== 0 || cdytail !== 0) {\n        if (adxtail !== 0 || adytail !== 0 || bdxtail !== 0 || bdytail !== 0) {\n            s1 = adxtail * bdy;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * bdy;\n            bhi = c - (c - bdy);\n            blo = bdy - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = adx * bdytail;\n            c = splitter * adx;\n            ahi = c - (c - adx);\n            alo = adx - ahi;\n            c = splitter * bdytail;\n            bhi = c - (c - bdytail);\n            blo = bdytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            u[3] = u3;\n            n1 = -ady;\n            n0 = -adytail;\n            s1 = bdxtail * n1;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * n1;\n            bhi = c - (c - n1);\n            blo = n1 - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = bdx * n0;\n            c = splitter * bdx;\n            ahi = c - (c - bdx);\n            alo = bdx - ahi;\n            c = splitter * n0;\n            bhi = c - (c - n0);\n            blo = n0 - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 + t0;\n            bvirt = _i - s0;\n            v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 + t1;\n            bvirt = _i - _0;\n            v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            v[3] = u3;\n            abtlen = sum(4, u, 4, v, abt);\n            s1 = adxtail * bdytail;\n            c = splitter * adxtail;\n            ahi = c - (c - adxtail);\n            alo = adxtail - ahi;\n            c = splitter * bdytail;\n            bhi = c - (c - bdytail);\n            blo = bdytail - bhi;\n            s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n            t1 = bdxtail * adytail;\n            c = splitter * bdxtail;\n            ahi = c - (c - bdxtail);\n            alo = bdxtail - ahi;\n            c = splitter * adytail;\n            bhi = c - (c - adytail);\n            blo = adytail - bhi;\n            t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n            _i = s0 - t0;\n            bvirt = s0 - _i;\n            abtt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n            _j = s1 + _i;\n            bvirt = _j - s1;\n            _0 = s1 - (_j - bvirt) + (_i - bvirt);\n            _i = _0 - t1;\n            bvirt = _0 - _i;\n            abtt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n            u3 = _j + _i;\n            bvirt = u3 - _j;\n            abtt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n            abtt[3] = u3;\n            abttlen = 4;\n        } else {\n            abt[0] = 0;\n            abtlen = 1;\n            abtt[0] = 0;\n            abttlen = 1;\n        }\n        if (cdxtail !== 0) {\n            const len = scale(abtlen, abt, cdxtail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(cxtablen, cxtab, cdxtail, _16), _16,\n                scale(len, _16c, 2 * cdx, _32), _32, _48), _48);\n\n            const len2 = scale(abttlen, abtt, cdxtail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * cdx, _16), _16,\n                scale(len2, _8, cdxtail, _16b), _16b,\n                scale(len, _16c, cdxtail, _32), _32, _32b, _64), _64);\n\n            if (adytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, bb, cdxtail, _8), _8, adytail, _16), _16);\n            }\n            if (bdytail !== 0) {\n                finlen = finadd(finlen, scale(scale(4, aa, -cdxtail, _8), _8, bdytail, _16), _16);\n            }\n        }\n        if (cdytail !== 0) {\n            const len = scale(abtlen, abt, cdytail, _16c);\n            finlen = finadd(finlen, sum(\n                scale(cytablen, cytab, cdytail, _16), _16,\n                scale(len, _16c, 2 * cdy, _32), _32, _48), _48);\n\n            const len2 = scale(abttlen, abtt, cdytail, _8);\n            finlen = finadd(finlen, sum_three(\n                scale(len2, _8, 2 * cdy, _16), _16,\n                scale(len2, _8, cdytail, _16b), _16b,\n                scale(len, _16c, cdytail, _32), _32, _32b, _64), _64);\n        }\n    }\n\n    return fin[finlen - 1];\n}\n\nexport function incircle(ax, ay, bx, by, cx, cy, dx, dy) {\n    const adx = ax - dx;\n    const bdx = bx - dx;\n    const cdx = cx - dx;\n    const ady = ay - dy;\n    const bdy = by - dy;\n    const cdy = cy - dy;\n\n    const bdxcdy = bdx * cdy;\n    const cdxbdy = cdx * bdy;\n    const alift = adx * adx + ady * ady;\n\n    const cdxady = cdx * ady;\n    const adxcdy = adx * cdy;\n    const blift = bdx * bdx + bdy * bdy;\n\n    const adxbdy = adx * bdy;\n    const bdxady = bdx * ady;\n    const clift = cdx * cdx + cdy * cdy;\n\n    const det =\n        alift * (bdxcdy - cdxbdy) +\n        blift * (cdxady - adxcdy) +\n        clift * (adxbdy - bdxady);\n\n    const permanent =\n        (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * alift +\n        (Math.abs(cdxady) + Math.abs(adxcdy)) * blift +\n        (Math.abs(adxbdy) + Math.abs(bdxady)) * clift;\n\n    const errbound = iccerrboundA * permanent;\n\n    if (det > errbound || -det > errbound) {\n        return det;\n    }\n    return incircleadapt(ax, ay, bx, by, cx, cy, dx, dy, permanent);\n}\n\nexport function incirclefast(ax, ay, bx, by, cx, cy, dx, dy) {\n    const adx = ax - dx;\n    const ady = ay - dy;\n    const bdx = bx - dx;\n    const bdy = by - dy;\n    const cdx = cx - dx;\n    const cdy = cy - dy;\n\n    const abdet = adx * bdy - bdx * ady;\n    const bcdet = bdx * cdy - cdx * bdy;\n    const cadet = cdx * ady - adx * cdy;\n    const alift = adx * adx + ady * ady;\n    const blift = bdx * bdx + bdy * bdy;\n    const clift = cdx * cdx + cdy * cdy;\n\n    return alift * bcdet + blift * cadet + clift * abdet;\n}\n","import {epsilon, splitter, resulterrbound, estimate, vec, sum, sum_three, scale, negate} from './util.js';\n\nconst isperrboundA = (16 + 224 * epsilon) * epsilon;\nconst isperrboundB = (5 + 72 * epsilon) * epsilon;\nconst isperrboundC = (71 + 1408 * epsilon) * epsilon * epsilon;\n\nconst ab = vec(4);\nconst bc = vec(4);\nconst cd = vec(4);\nconst de = vec(4);\nconst ea = vec(4);\nconst ac = vec(4);\nconst bd = vec(4);\nconst ce = vec(4);\nconst da = vec(4);\nconst eb = vec(4);\n\nconst abc = vec(24);\nconst bcd = vec(24);\nconst cde = vec(24);\nconst dea = vec(24);\nconst eab = vec(24);\nconst abd = vec(24);\nconst bce = vec(24);\nconst cda = vec(24);\nconst deb = vec(24);\nconst eac = vec(24);\n\nconst adet = vec(1152);\nconst bdet = vec(1152);\nconst cdet = vec(1152);\nconst ddet = vec(1152);\nconst edet = vec(1152);\nconst abdet = vec(2304);\nconst cddet = vec(2304);\nconst cdedet = vec(3456);\nconst deter = vec(5760);\n\nconst _8 = vec(8);\nconst _8b = vec(8);\nconst _8c = vec(8);\nconst _16 = vec(16);\nconst _24 = vec(24);\nconst _48 = vec(48);\nconst _48b = vec(48);\nconst _96 = vec(96);\nconst _192 = vec(192);\nconst _384x = vec(384);\nconst _384y = vec(384);\nconst _384z = vec(384);\nconst _768 = vec(768);\n\nfunction sum_three_scale(a, b, c, az, bz, cz, out) {\n    return sum_three(\n        scale(4, a, az, _8), _8,\n        scale(4, b, bz, _8b), _8b,\n        scale(4, c, cz, _8c), _8c, _16, out);\n}\n\nfunction liftexact(alen, a, blen, b, clen, c, dlen, d, x, y, z, out) {\n    const len = sum(\n        sum(alen, a, blen, b, _48), _48,\n        negate(sum(clen, c, dlen, d, _48b), _48b), _48b, _96);\n\n    return sum_three(\n        scale(scale(len, _96, x, _192), _192, x, _384x), _384x,\n        scale(scale(len, _96, y, _192), _192, y, _384y), _384y,\n        scale(scale(len, _96, z, _192), _192, z, _384z), _384z, _768, out);\n}\n\nfunction insphereexact(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez) {\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    s1 = ax * by;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bx * ay;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ab[3] = u3;\n    s1 = bx * cy;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cx * by;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bc[3] = u3;\n    s1 = cx * dy;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dx * cy;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    cd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    cd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    cd[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    cd[3] = u3;\n    s1 = dx * ey;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ex * dy;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    de[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    de[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    de[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    de[3] = u3;\n    s1 = ex * ay;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ax * ey;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ea[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ea[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ea[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ea[3] = u3;\n    s1 = ax * cy;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cx * ay;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ac[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ac[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ac[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ac[3] = u3;\n    s1 = bx * dy;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dx * by;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bd[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bd[3] = u3;\n    s1 = cx * ey;\n    c = splitter * cx;\n    ahi = c - (c - cx);\n    alo = cx - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ex * cy;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * cy;\n    bhi = c - (c - cy);\n    blo = cy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ce[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ce[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    ce[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    ce[3] = u3;\n    s1 = dx * ay;\n    c = splitter * dx;\n    ahi = c - (c - dx);\n    alo = dx - ahi;\n    c = splitter * ay;\n    bhi = c - (c - ay);\n    blo = ay - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = ax * dy;\n    c = splitter * ax;\n    ahi = c - (c - ax);\n    alo = ax - ahi;\n    c = splitter * dy;\n    bhi = c - (c - dy);\n    blo = dy - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    da[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    da[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    da[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    da[3] = u3;\n    s1 = ex * by;\n    c = splitter * ex;\n    ahi = c - (c - ex);\n    alo = ex - ahi;\n    c = splitter * by;\n    bhi = c - (c - by);\n    blo = by - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bx * ey;\n    c = splitter * bx;\n    ahi = c - (c - bx);\n    alo = bx - ahi;\n    c = splitter * ey;\n    bhi = c - (c - ey);\n    blo = ey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    eb[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    eb[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    eb[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    eb[3] = u3;\n\n    const abclen = sum_three_scale(ab, bc, ac, cz, az, -bz, abc);\n    const bcdlen = sum_three_scale(bc, cd, bd, dz, bz, -cz, bcd);\n    const cdelen = sum_three_scale(cd, de, ce, ez, cz, -dz, cde);\n    const dealen = sum_three_scale(de, ea, da, az, dz, -ez, dea);\n    const eablen = sum_three_scale(ea, ab, eb, bz, ez, -az, eab);\n    const abdlen = sum_three_scale(ab, bd, da, dz, az, bz, abd);\n    const bcelen = sum_three_scale(bc, ce, eb, ez, bz, cz, bce);\n    const cdalen = sum_three_scale(cd, da, ac, az, cz, dz, cda);\n    const deblen = sum_three_scale(de, eb, bd, bz, dz, ez, deb);\n    const eaclen = sum_three_scale(ea, ac, ce, cz, ez, az, eac);\n\n    const deterlen = sum_three(\n        liftexact(cdelen, cde, bcelen, bce, deblen, deb, bcdlen, bcd, ax, ay, az, adet), adet,\n        liftexact(dealen, dea, cdalen, cda, eaclen, eac, cdelen, cde, bx, by, bz, bdet), bdet,\n        sum_three(\n            liftexact(eablen, eab, deblen, deb, abdlen, abd, dealen, dea, cx, cy, cz, cdet), cdet,\n            liftexact(abclen, abc, eaclen, eac, bcelen, bce, eablen, eab, dx, dy, dz, ddet), ddet,\n            liftexact(bcdlen, bcd, abdlen, abd, cdalen, cda, abclen, abc, ex, ey, ez, edet), edet, cddet, cdedet), cdedet, abdet, deter);\n\n    return deter[deterlen - 1];\n}\n\nconst xdet = vec(96);\nconst ydet = vec(96);\nconst zdet = vec(96);\nconst fin = vec(1152);\n\nfunction liftadapt(a, b, c, az, bz, cz, x, y, z, out) {\n    const len = sum_three_scale(a, b, c, az, bz, cz, _24);\n    return sum_three(\n        scale(scale(len, _24, x, _48), _48, x, xdet), xdet,\n        scale(scale(len, _24, y, _48), _48, y, ydet), ydet,\n        scale(scale(len, _24, z, _48), _48, z, zdet), zdet, _192, out);\n}\n\nfunction insphereadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez, permanent) {\n    let ab3, bc3, cd3, da3, ac3, bd3;\n\n    let aextail, bextail, cextail, dextail;\n    let aeytail, beytail, ceytail, deytail;\n    let aeztail, beztail, ceztail, deztail;\n\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0;\n\n    const aex = ax - ex;\n    const bex = bx - ex;\n    const cex = cx - ex;\n    const dex = dx - ex;\n    const aey = ay - ey;\n    const bey = by - ey;\n    const cey = cy - ey;\n    const dey = dy - ey;\n    const aez = az - ez;\n    const bez = bz - ez;\n    const cez = cz - ez;\n    const dez = dz - ez;\n\n    s1 = aex * bey;\n    c = splitter * aex;\n    ahi = c - (c - aex);\n    alo = aex - ahi;\n    c = splitter * bey;\n    bhi = c - (c - bey);\n    blo = bey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = bex * aey;\n    c = splitter * bex;\n    ahi = c - (c - bex);\n    alo = bex - ahi;\n    c = splitter * aey;\n    bhi = c - (c - aey);\n    blo = aey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    ab3 = _j + _i;\n    bvirt = ab3 - _j;\n    ab[2] = _j - (ab3 - bvirt) + (_i - bvirt);\n    ab[3] = ab3;\n    s1 = bex * cey;\n    c = splitter * bex;\n    ahi = c - (c - bex);\n    alo = bex - ahi;\n    c = splitter * cey;\n    bhi = c - (c - cey);\n    blo = cey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cex * bey;\n    c = splitter * cex;\n    ahi = c - (c - cex);\n    alo = cex - ahi;\n    c = splitter * bey;\n    bhi = c - (c - bey);\n    blo = bey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    bc3 = _j + _i;\n    bvirt = bc3 - _j;\n    bc[2] = _j - (bc3 - bvirt) + (_i - bvirt);\n    bc[3] = bc3;\n    s1 = cex * dey;\n    c = splitter * cex;\n    ahi = c - (c - cex);\n    alo = cex - ahi;\n    c = splitter * dey;\n    bhi = c - (c - dey);\n    blo = dey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dex * cey;\n    c = splitter * dex;\n    ahi = c - (c - dex);\n    alo = dex - ahi;\n    c = splitter * cey;\n    bhi = c - (c - cey);\n    blo = cey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    cd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    cd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    cd3 = _j + _i;\n    bvirt = cd3 - _j;\n    cd[2] = _j - (cd3 - bvirt) + (_i - bvirt);\n    cd[3] = cd3;\n    s1 = dex * aey;\n    c = splitter * dex;\n    ahi = c - (c - dex);\n    alo = dex - ahi;\n    c = splitter * aey;\n    bhi = c - (c - aey);\n    blo = aey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = aex * dey;\n    c = splitter * aex;\n    ahi = c - (c - aex);\n    alo = aex - ahi;\n    c = splitter * dey;\n    bhi = c - (c - dey);\n    blo = dey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    da[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    da[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    da3 = _j + _i;\n    bvirt = da3 - _j;\n    da[2] = _j - (da3 - bvirt) + (_i - bvirt);\n    da[3] = da3;\n    s1 = aex * cey;\n    c = splitter * aex;\n    ahi = c - (c - aex);\n    alo = aex - ahi;\n    c = splitter * cey;\n    bhi = c - (c - cey);\n    blo = cey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = cex * aey;\n    c = splitter * cex;\n    ahi = c - (c - cex);\n    alo = cex - ahi;\n    c = splitter * aey;\n    bhi = c - (c - aey);\n    blo = aey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    ac[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    ac[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    ac3 = _j + _i;\n    bvirt = ac3 - _j;\n    ac[2] = _j - (ac3 - bvirt) + (_i - bvirt);\n    ac[3] = ac3;\n    s1 = bex * dey;\n    c = splitter * bex;\n    ahi = c - (c - bex);\n    alo = bex - ahi;\n    c = splitter * dey;\n    bhi = c - (c - dey);\n    blo = dey - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = dex * bey;\n    c = splitter * dex;\n    ahi = c - (c - dex);\n    alo = dex - ahi;\n    c = splitter * bey;\n    bhi = c - (c - bey);\n    blo = bey - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    bd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    bd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    bd3 = _j + _i;\n    bvirt = bd3 - _j;\n    bd[2] = _j - (bd3 - bvirt) + (_i - bvirt);\n    bd[3] = bd3;\n\n    const finlen = sum(\n        sum(\n            negate(liftadapt(bc, cd, bd, dez, bez, -cez, aex, aey, aez, adet), adet), adet,\n            liftadapt(cd, da, ac, aez, cez, dez, bex, bey, bez, bdet), bdet, abdet), abdet,\n        sum(\n            negate(liftadapt(da, ab, bd, bez, dez, aez, cex, cey, cez, cdet), cdet), cdet,\n            liftadapt(ab, bc, ac, cez, aez, -bez, dex, dey, dez, ddet), ddet, cddet), cddet, fin);\n\n    let det = estimate(finlen, fin);\n    let errbound = isperrboundB * permanent;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - aex;\n    aextail = ax - (aex + bvirt) + (bvirt - ex);\n    bvirt = ay - aey;\n    aeytail = ay - (aey + bvirt) + (bvirt - ey);\n    bvirt = az - aez;\n    aeztail = az - (aez + bvirt) + (bvirt - ez);\n    bvirt = bx - bex;\n    bextail = bx - (bex + bvirt) + (bvirt - ex);\n    bvirt = by - bey;\n    beytail = by - (bey + bvirt) + (bvirt - ey);\n    bvirt = bz - bez;\n    beztail = bz - (bez + bvirt) + (bvirt - ez);\n    bvirt = cx - cex;\n    cextail = cx - (cex + bvirt) + (bvirt - ex);\n    bvirt = cy - cey;\n    ceytail = cy - (cey + bvirt) + (bvirt - ey);\n    bvirt = cz - cez;\n    ceztail = cz - (cez + bvirt) + (bvirt - ez);\n    bvirt = dx - dex;\n    dextail = dx - (dex + bvirt) + (bvirt - ex);\n    bvirt = dy - dey;\n    deytail = dy - (dey + bvirt) + (bvirt - ey);\n    bvirt = dz - dez;\n    deztail = dz - (dez + bvirt) + (bvirt - ez);\n    if (aextail === 0 && aeytail === 0 && aeztail === 0 &&\n        bextail === 0 && beytail === 0 && beztail === 0 &&\n        cextail === 0 && ceytail === 0 && ceztail === 0 &&\n        dextail === 0 && deytail === 0 && deztail === 0) {\n        return det;\n    }\n\n    errbound = isperrboundC * permanent + resulterrbound * Math.abs(det);\n\n    const abeps = (aex * beytail + bey * aextail) - (aey * bextail + bex * aeytail);\n    const bceps = (bex * ceytail + cey * bextail) - (bey * cextail + cex * beytail);\n    const cdeps = (cex * deytail + dey * cextail) - (cey * dextail + dex * ceytail);\n    const daeps = (dex * aeytail + aey * dextail) - (dey * aextail + aex * deytail);\n    const aceps = (aex * ceytail + cey * aextail) - (aey * cextail + cex * aeytail);\n    const bdeps = (bex * deytail + dey * bextail) - (bey * dextail + dex * beytail);\n    det +=\n        (((bex * bex + bey * bey + bez * bez) * ((cez * daeps + dez * aceps + aez * cdeps) +\n        (ceztail * da3 + deztail * ac3 + aeztail * cd3)) + (dex * dex + dey * dey + dez * dez) *\n        ((aez * bceps - bez * aceps + cez * abeps) + (aeztail * bc3 - beztail * ac3 + ceztail * ab3))) -\n        ((aex * aex + aey * aey + aez * aez) * ((bez * cdeps - cez * bdeps + dez * bceps) +\n        (beztail * cd3 - ceztail * bd3 + deztail * bc3)) + (cex * cex + cey * cey + cez * cez) *\n        ((dez * abeps + aez * bdeps + bez * daeps) + (deztail * ab3 + aeztail * bd3 + beztail * da3)))) +\n        2 * (((bex * bextail + bey * beytail + bez * beztail) * (cez * da3 + dez * ac3 + aez * cd3) +\n        (dex * dextail + dey * deytail + dez * deztail) * (aez * bc3 - bez * ac3 + cez * ab3)) -\n        ((aex * aextail + aey * aeytail + aez * aeztail) * (bez * cd3 - cez * bd3 + dez * bc3) +\n        (cex * cextail + cey * ceytail + cez * ceztail) * (dez * ab3 + aez * bd3 + bez * da3)));\n\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    return insphereexact(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez);\n}\n\nexport function insphere(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez) {\n    const aex = ax - ex;\n    const bex = bx - ex;\n    const cex = cx - ex;\n    const dex = dx - ex;\n    const aey = ay - ey;\n    const bey = by - ey;\n    const cey = cy - ey;\n    const dey = dy - ey;\n    const aez = az - ez;\n    const bez = bz - ez;\n    const cez = cz - ez;\n    const dez = dz - ez;\n\n    const aexbey = aex * bey;\n    const bexaey = bex * aey;\n    const ab = aexbey - bexaey;\n    const bexcey = bex * cey;\n    const cexbey = cex * bey;\n    const bc = bexcey - cexbey;\n    const cexdey = cex * dey;\n    const dexcey = dex * cey;\n    const cd = cexdey - dexcey;\n    const dexaey = dex * aey;\n    const aexdey = aex * dey;\n    const da = dexaey - aexdey;\n    const aexcey = aex * cey;\n    const cexaey = cex * aey;\n    const ac = aexcey - cexaey;\n    const bexdey = bex * dey;\n    const dexbey = dex * bey;\n    const bd = bexdey - dexbey;\n\n    const alift = aex * aex + aey * aey + aez * aez;\n    const blift = bex * bex + bey * bey + bez * bez;\n    const clift = cex * cex + cey * cey + cez * cez;\n    const dlift = dex * dex + dey * dey + dez * dez;\n\n    const det =\n        (clift * (dez * ab + aez * bd + bez * da) - dlift * (aez * bc - bez * ac + cez * ab)) +\n        (alift * (bez * cd - cez * bd + dez * bc) - blift * (cez * da + dez * ac + aez * cd));\n\n    const aezplus = Math.abs(aez);\n    const bezplus = Math.abs(bez);\n    const cezplus = Math.abs(cez);\n    const dezplus = Math.abs(dez);\n    const aexbeyplus = Math.abs(aexbey) + Math.abs(bexaey);\n    const bexceyplus = Math.abs(bexcey) + Math.abs(cexbey);\n    const cexdeyplus = Math.abs(cexdey) + Math.abs(dexcey);\n    const dexaeyplus = Math.abs(dexaey) + Math.abs(aexdey);\n    const aexceyplus = Math.abs(aexcey) + Math.abs(cexaey);\n    const bexdeyplus = Math.abs(bexdey) + Math.abs(dexbey);\n    const permanent =\n        (cexdeyplus * bezplus + bexdeyplus * cezplus + bexceyplus * dezplus) * alift +\n        (dexaeyplus * cezplus + aexceyplus * dezplus + cexdeyplus * aezplus) * blift +\n        (aexbeyplus * dezplus + bexdeyplus * aezplus + dexaeyplus * bezplus) * clift +\n        (bexceyplus * aezplus + aexceyplus * bezplus + aexbeyplus * cezplus) * dlift;\n\n    const errbound = isperrboundA * permanent;\n    if (det > errbound || -det > errbound) {\n        return det;\n    }\n    return -insphereadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez, permanent);\n}\n\nexport function inspherefast(pax, pay, paz, pbx, pby, pbz, pcx, pcy, pcz, pdx, pdy, pdz, pex, pey, pez) {\n    const aex = pax - pex;\n    const bex = pbx - pex;\n    const cex = pcx - pex;\n    const dex = pdx - pex;\n    const aey = pay - pey;\n    const bey = pby - pey;\n    const cey = pcy - pey;\n    const dey = pdy - pey;\n    const aez = paz - pez;\n    const bez = pbz - pez;\n    const cez = pcz - pez;\n    const dez = pdz - pez;\n\n    const ab = aex * bey - bex * aey;\n    const bc = bex * cey - cex * bey;\n    const cd = cex * dey - dex * cey;\n    const da = dex * aey - aex * dey;\n    const ac = aex * cey - cex * aey;\n    const bd = bex * dey - dex * bey;\n\n    const abc = aez * bc - bez * ac + cez * ab;\n    const bcd = bez * cd - cez * bd + dez * bc;\n    const cda = cez * da + dez * ac + aez * cd;\n    const dab = dez * ab + aez * bd + bez * da;\n\n    const alift = aex * aex + aey * aey + aez * aez;\n    const blift = bex * bex + bey * bey + bez * bez;\n    const clift = cex * cex + cey * cey + cez * cez;\n    const dlift = dex * dex + dey * dey + dez * dez;\n\n    return (clift * dab - dlift * abc) + (alift * bcd - blift * cda);\n}\n","\nconst EPSILON = Math.pow(2, -52);\nconst EDGE_STACK = new Uint32Array(512);\n\nimport {orient2d} from 'robust-predicates';\n\nexport default class Delaunator {\n\n    static from(points, getX = defaultGetX, getY = defaultGetY) {\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        const n = coords.length >> 1;\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        // arrays that will store the triangulation graph\n        const maxTriangles = Math.max(2 * n - 5, 0);\n        this._triangles = new Uint32Array(maxTriangles * 3);\n        this._halfedges = new Int32Array(maxTriangles * 3);\n\n        // temporary arrays for tracking the edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hullPrev = new Uint32Array(n); // edge to prev edge\n        this._hullNext = new Uint32Array(n); // edge to next edge\n        this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n        this._hullHash = new Int32Array(this._hashSize); // angular edge hash\n\n        // temporary arrays for sorting points\n        this._ids = new Uint32Array(n);\n        this._dists = new Float64Array(n);\n\n        this.update();\n    }\n\n    update() {\n        const {coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash} =  this;\n        const n = coords.length >> 1;\n\n        // populate an array of point indices; calculate input data bbox\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            this._ids[i] = i;\n        }\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let i0, i1, i2;\n\n        // pick a seed point close to the center\n        for (let i = 0, minDist = Infinity; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        // find the point closest to the seed\n        for (let i = 0, minDist = Infinity; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            // order collinear points by dx (or dy if all x are identical)\n            // and return the list as a hull\n            for (let i = 0; i < n; i++) {\n                this._dists[i] = (coords[2 * i] - coords[0]) || (coords[2 * i + 1] - coords[1]);\n            }\n            quicksort(this._ids, this._dists, 0, n - 1);\n            const hull = new Uint32Array(n);\n            let j = 0;\n            for (let i = 0, d0 = -Infinity; i < n; i++) {\n                const id = this._ids[i];\n                const d = this._dists[id];\n                if (d > d0) {\n                    hull[j++] = id;\n                    d0 = d;\n                }\n            }\n            this.hull = hull.subarray(0, j);\n            this.triangles = new Uint32Array(0);\n            this.halfedges = new Uint32Array(0);\n            return;\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient2d(i0x, i0y, i1x, i1y, i2x, i2y) < 0) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        for (let i = 0; i < n; i++) {\n            this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center.x, center.y);\n        }\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(this._ids, this._dists, 0, n - 1);\n\n        // set up the seed triangle as the starting hull\n        this._hullStart = i0;\n        let hullSize = 3;\n\n        hullNext[i0] = hullPrev[i2] = i1;\n        hullNext[i1] = hullPrev[i0] = i2;\n        hullNext[i2] = hullPrev[i1] = i0;\n\n        hullTri[i0] = 0;\n        hullTri[i1] = 1;\n        hullTri[i2] = 2;\n\n        hullHash.fill(-1);\n        hullHash[this._hashKey(i0x, i0y)] = i0;\n        hullHash[this._hashKey(i1x, i1y)] = i1;\n        hullHash[this._hashKey(i2x, i2y)] = i2;\n\n        this.trianglesLen = 0;\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < this._ids.length; k++) {\n            const i = this._ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            let start = 0;\n            for (let j = 0, key = this._hashKey(x, y); j < this._hashSize; j++) {\n                start = hullHash[(key + j) % this._hashSize];\n                if (start !== -1 && start !== hullNext[start]) break;\n            }\n\n            start = hullPrev[start];\n            let e = start, q;\n            while (q = hullNext[e], orient2d(x, y, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1]) >= 0) {\n                e = q;\n                if (e === start) {\n                    e = -1;\n                    break;\n                }\n            }\n            if (e === -1) continue; // likely a near-duplicate point; skip it\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            hullTri[i] = this._legalize(t + 2);\n            hullTri[e] = t; // keep track of boundary triangles on the hull\n            hullSize++;\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let n = hullNext[e];\n            while (q = hullNext[n], orient2d(x, y, coords[2 * n], coords[2 * n + 1], coords[2 * q], coords[2 * q + 1]) < 0) {\n                t = this._addTriangle(n, i, q, hullTri[i], -1, hullTri[n]);\n                hullTri[i] = this._legalize(t + 2);\n                hullNext[n] = n; // mark as removed\n                hullSize--;\n                n = q;\n            }\n\n            // walk backward from the other side, adding more triangles and flipping\n            if (e === start) {\n                while (q = hullPrev[e], orient2d(x, y, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1]) < 0) {\n                    t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);\n                    this._legalize(t + 2);\n                    hullTri[q] = t;\n                    hullNext[e] = e; // mark as removed\n                    hullSize--;\n                    e = q;\n                }\n            }\n\n            // update the hull indices\n            this._hullStart = hullPrev[i] = e;\n            hullNext[e] = hullPrev[n] = i;\n            hullNext[i] = n;\n\n            // save the two new edges in the hash table\n            hullHash[this._hashKey(x, y)] = i;\n            hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n        }\n\n        this.hull = new Uint32Array(hullSize);\n        for (let i = 0, e = this._hullStart; i < hullSize; i++) {\n            this.hull[i] = e;\n            e = hullNext[e];\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = this._triangles.subarray(0, this.trianglesLen);\n        this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {_triangles: triangles, _halfedges: halfedges, coords} = this;\n\n        let i = 0;\n        let ar = 0;\n\n        // recursion eliminated with a fixed-size stack\n        while (true) {\n            const b = halfedges[a];\n\n            /* if the pair of triangles doesn't satisfy the Delaunay condition\n             * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n             * then do the same check/flip recursively for the new pair of triangles\n             *\n             *           pl                    pl\n             *          /||\\                  /  \\\n             *       al/ || \\bl            al/    \\a\n             *        /  ||  \\              /      \\\n             *       /  a||b  \\    flip    /___ar___\\\n             *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n             *        \\  ||  /              \\      /\n             *       ar\\ || /br             b\\    /br\n             *          \\||/                  \\  /\n             *           pr                    pr\n             */\n            const a0 = a - a % 3;\n            ar = a0 + (a + 2) % 3;\n\n            if (b === -1) { // convex hull edge\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n                continue;\n            }\n\n            const b0 = b - b % 3;\n            const al = a0 + (a + 1) % 3;\n            const bl = b0 + (b + 2) % 3;\n\n            const p0 = triangles[ar];\n            const pr = triangles[a];\n            const pl = triangles[al];\n            const p1 = triangles[bl];\n\n            const illegal = inCircle(\n                coords[2 * p0], coords[2 * p0 + 1],\n                coords[2 * pr], coords[2 * pr + 1],\n                coords[2 * pl], coords[2 * pl + 1],\n                coords[2 * p1], coords[2 * p1 + 1]);\n\n            if (illegal) {\n                triangles[a] = p1;\n                triangles[b] = p0;\n\n                const hbl = halfedges[bl];\n\n                // edge swapped on the other side of the hull (rare); fix the halfedge reference\n                if (hbl === -1) {\n                    let e = this._hullStart;\n                    do {\n                        if (this._hullTri[e] === bl) {\n                            this._hullTri[e] = a;\n                            break;\n                        }\n                        e = this._hullPrev[e];\n                    } while (e !== this._hullStart);\n                }\n                this._link(a, hbl);\n                this._link(b, halfedges[ar]);\n                this._link(ar, bl);\n\n                const br = b0 + (b + 1) % 3;\n\n                // don't worry about hitting the cap: it can only happen on extremely degenerate input\n                if (i < EDGE_STACK.length) {\n                    EDGE_STACK[i++] = br;\n                }\n            } else {\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n            }\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this._halfedges[a] = b;\n        if (b !== -1) this._halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this._triangles[t] = i0;\n        this._triangles[t + 1] = i1;\n        this._triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = (ey * bl - dy * cl) * d;\n    const y = (dx * cl - ex * bl) * d;\n\n    return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = ax + (ey * bl - dy * cl) * d;\n    const y = ay + (dx * cl - ex * bl) * d;\n\n    return {x, y};\n}\n\nfunction quicksort(ids, dists, left, right) {\n    if (right - left <= 20) {\n        for (let i = left + 1; i <= right; i++) {\n            const temp = ids[i];\n            const tempDist = dists[temp];\n            let j = i - 1;\n            while (j >= left && dists[ids[j]] > tempDist) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        let i = left + 1;\n        let j = right;\n        swap(ids, median, i);\n        if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n        if (dists[ids[i]] > dists[ids[right]]) swap(ids, i, right);\n        if (dists[ids[left]] > dists[ids[i]]) swap(ids, left, i);\n\n        const temp = ids[i];\n        const tempDist = dists[temp];\n        while (true) {\n            do i++; while (dists[ids[i]] < tempDist);\n            do j--; while (dists[ids[j]] > tempDist);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, dists, i, right);\n            quicksort(ids, dists, left, j - 1);\n        } else {\n            quicksort(ids, dists, left, j - 1);\n            quicksort(ids, dists, i, right);\n        }\n    }\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","const epsilon = 1e-6;\n\nexport default class Path {\n  constructor() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n  }\n  moveTo(x, y) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  }\n  lineTo(x, y) {\n    this._ += `L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arc(x, y, r) {\n    x = +x, y = +y, r = +r;\n    const x0 = x + r;\n    const y0 = y;\n    if (r < 0) throw new Error(\"negative radius\");\n    if (this._x1 === null) this._ += `M${x0},${y0}`;\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n    if (!r) return;\n    this._ += `A${r},${r},0,1,1,${x - r},${y}A${r},${r},0,1,1,${this._x1 = x0},${this._y1 = y0}`;\n  }\n  rect(x, y, w, h) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${+w}v${+h}h${-w}Z`;\n  }\n  value() {\n    return this._ || null;\n  }\n}\n","export default class Polygon {\n  constructor() {\n    this._ = [];\n  }\n  moveTo(x, y) {\n    this._.push([x, y]);\n  }\n  closePath() {\n    this._.push(this._[0].slice());\n  }\n  lineTo(x, y) {\n    this._.push([x, y]);\n  }\n  value() {\n    return this._.length ? this._ : null;\n  }\n}\n","import Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nexport default class Voronoi {\n  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    this.delaunay = delaunay;\n    this._circumcenters = new Float64Array(delaunay.points.length * 2);\n    this.vectors = new Float64Array(delaunay.points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n    this._init();\n  }\n  update() {\n    this.delaunay.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const {delaunay: {points, hull, triangles}, vectors} = this;\n    let bx, by; // lazily computed barycenter of the hull\n\n    // Compute circumcenters.\n    const circumcenters = this.circumcenters = this._circumcenters.subarray(0, triangles.length / 3 * 2);\n    for (let i = 0, j = 0, n = triangles.length, x, y; i < n; i += 3, j += 2) {\n      const t1 = triangles[i] * 2;\n      const t2 = triangles[i + 1] * 2;\n      const t3 = triangles[i + 2] * 2;\n      const x1 = points[t1];\n      const y1 = points[t1 + 1];\n      const x2 = points[t2];\n      const y2 = points[t2 + 1];\n      const x3 = points[t3];\n      const y3 = points[t3 + 1];\n\n      const dx = x2 - x1;\n      const dy = y2 - y1;\n      const ex = x3 - x1;\n      const ey = y3 - y1;\n      const ab = (dx * ey - dy * ex) * 2;\n\n      if (Math.abs(ab) < 1e-9) {\n        // For a degenerate triangle, the circumcenter is at the infinity, in a\n        // direction orthogonal to the halfedge and away from the center of\n        // the diagram <bx, by>, defined as the hulls barycenter.\n        if (bx === undefined) {\n          bx = by = 0;\n          for (const i of hull) bx += points[i * 2], by += points[i * 2 + 1];\n          bx /= hull.length, by /= hull.length;\n        }\n        const a = 1e9 * Math.sign((bx - x1) * ey - (by - y1) * ex);\n        x = (x1 + x3) / 2 - a * ey;\n        y = (y1 + y3) / 2 + a * ex;\n      } else {\n        const d = 1 / ab;\n        const bl = dx * dx + dy * dy;\n        const cl = ex * ex + ey * ey;\n        x = x1 + (ey * bl - dy * cl) * d;\n        y = y1 + (dx * cl - ex * bl) * d;\n      }\n      circumcenters[j] = x;\n      circumcenters[j + 1] = y;\n    }\n\n    // Compute exterior cell rays.\n    let h = hull[hull.length - 1];\n    let p0, p1 = h * 4;\n    let x0, x1 = points[2 * h];\n    let y0, y1 = points[2 * h + 1];\n    vectors.fill(0);\n    for (let i = 0; i < hull.length; ++i) {\n      h = hull[i];\n      p0 = p1, x0 = x1, y0 = y1;\n      p1 = h * 4, x1 = points[2 * h], y1 = points[2 * h + 1];\n      vectors[p0 + 2] = vectors[p1] = y0 - y1;\n      vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n    }\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {delaunay: {halfedges, inedges, hull}, circumcenters, vectors} = this;\n    if (hull.length <= 1) return null;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = Math.floor(i / 3) * 2;\n      const tj = Math.floor(j / 3) * 2;\n      const xi = circumcenters[ti];\n      const yi = circumcenters[ti + 1];\n      const xj = circumcenters[tj];\n      const yj = circumcenters[tj + 1];\n      this._renderSegment(xi, yi, xj, yj, context);\n    }\n    let h0, h1 = hull[hull.length - 1];\n    for (let i = 0; i < hull.length; ++i) {\n      h0 = h1, h1 = hull[i];\n      const t = Math.floor(inedges[h1] / 3) * 2;\n      const x = circumcenters[t];\n      const y = circumcenters[t + 1];\n      const v = h0 * 4;\n      const p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n      if (p) this._renderSegment(x, y, p[0], p[1], context);\n    }\n    return buffer && buffer.value();\n  }\n  renderBounds(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n    return buffer && buffer.value();\n  }\n  renderCell(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const points = this._clip(i);\n    if (points === null || !points.length) return;\n    context.moveTo(points[0], points[1]);\n    let n = points.length;\n    while (points[0] === points[n-2] && points[1] === points[n-1] && n > 1) n -= 2;\n    for (let i = 2; i < n; i += 2) {\n      if (points[i] !== points[i-2] || points[i+1] !== points[i-1])\n        context.lineTo(points[i], points[i + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *cellPolygons() {\n    const {delaunay: {points}} = this;\n    for (let i = 0, n = points.length / 2; i < n; ++i) {\n      const cell = this.cellPolygon(i);\n      if (cell) cell.index = i, yield cell;\n    }\n  }\n  cellPolygon(i) {\n    const polygon = new Polygon;\n    this.renderCell(i, polygon);\n    return polygon.value();\n  }\n  _renderSegment(x0, y0, x1, y1, context) {\n    let S;\n    const c0 = this._regioncode(x0, y0);\n    const c1 = this._regioncode(x1, y1);\n    if (c0 === 0 && c1 === 0) {\n      context.moveTo(x0, y0);\n      context.lineTo(x1, y1);\n    } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n      context.moveTo(S[0], S[1]);\n      context.lineTo(S[2], S[3]);\n    }\n  }\n  contains(i, x, y) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n    return this.delaunay._step(i, x, y) === i;\n  }\n  *neighbors(i) {\n    const ci = this._clip(i);\n    if (ci) for (const j of this.delaunay.neighbors(i)) {\n      const cj = this._clip(j);\n      // find the common edge\n      if (cj) loop: for (let ai = 0, li = ci.length; ai < li; ai += 2) {\n        for (let aj = 0, lj = cj.length; aj < lj; aj += 2) {\n          if (ci[ai] === cj[aj]\n              && ci[ai + 1] === cj[aj + 1]\n              && ci[(ai + 2) % li] === cj[(aj + lj - 2) % lj]\n              && ci[(ai + 3) % li] === cj[(aj + lj - 1) % lj]) {\n            yield j;\n            break loop;\n          }\n        }\n      }\n    }\n  }\n  _cell(i) {\n    const {circumcenters, delaunay: {inedges, halfedges, triangles}} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return null; // coincident point\n    const points = [];\n    let e = e0;\n    do {\n      const t = Math.floor(e / 3);\n      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n    } while (e !== e0 && e !== -1);\n    return points;\n  }\n  _clip(i) {\n    // degenerate case (1 valid point: return the box)\n    if (i === 0 && this.delaunay.hull.length === 1) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    const points = this._cell(i);\n    if (points === null) return null;\n    const {vectors: V} = this;\n    const v = i * 4;\n    return this._simplify(V[v] || V[v + 1]\n        ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3])\n        : this._clipFinite(i, points));\n  }\n  _clipFinite(i, points) {\n    const n = points.length;\n    let P = null;\n    let x0, y0, x1 = points[n - 2], y1 = points[n - 1];\n    let c0, c1 = this._regioncode(x1, y1);\n    let e0, e1 = 0;\n    for (let j = 0; j < n; j += 2) {\n      x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n      c0 = c1, c1 = this._regioncode(x1, y1);\n      if (c0 === 0 && c1 === 0) {\n        e0 = e1, e1 = 0;\n        if (P) P.push(x1, y1);\n        else P = [x1, y1];\n      } else {\n        let S, sx0, sy0, sx1, sy1;\n        if (c0 === 0) {\n          if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n          [sx0, sy0, sx1, sy1] = S;\n        } else {\n          if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n          [sx1, sy1, sx0, sy0] = S;\n          e0 = e1, e1 = this._edgecode(sx0, sy0);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx0, sy0);\n          else P = [sx0, sy0];\n        }\n        e0 = e1, e1 = this._edgecode(sx1, sy1);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n        if (P) P.push(sx1, sy1);\n        else P = [sx1, sy1];\n      }\n    }\n    if (P) {\n      e0 = e1, e1 = this._edgecode(P[0], P[1]);\n      if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    return P;\n  }\n  _clipSegment(x0, y0, x1, y1, c0, c1) {\n    // for more robustness, always consider the segment in the same order\n    const flip = c0 < c1;\n    if (flip) [x0, y0, x1, y1, c0, c1] = [x1, y1, x0, y0, c1, c0];\n    while (true) {\n      if (c0 === 0 && c1 === 0) return flip ? [x1, y1, x0, y0] : [x0, y0, x1, y1];\n      if (c0 & c1) return null;\n      let x, y, c = c0 || c1;\n      if (c & 0b1000) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;\n      else if (c & 0b0100) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;\n      else if (c & 0b0010) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;\n      else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n      if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);\n      else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n    }\n  }\n  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n    let P = Array.from(points), p;\n    if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n    if (P = this._clipFinite(i, P)) {\n      for (let j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n        if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n      }\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n    }\n    return P;\n  }\n  _edge(i, e0, e1, P, j) {\n    while (e0 !== e1) {\n      let x, y;\n      switch (e0) {\n        case 0b0101: e0 = 0b0100; continue; // top-left\n        case 0b0100: e0 = 0b0110, x = this.xmax, y = this.ymin; break; // top\n        case 0b0110: e0 = 0b0010; continue; // top-right\n        case 0b0010: e0 = 0b1010, x = this.xmax, y = this.ymax; break; // right\n        case 0b1010: e0 = 0b1000; continue; // bottom-right\n        case 0b1000: e0 = 0b1001, x = this.xmin, y = this.ymax; break; // bottom\n        case 0b1001: e0 = 0b0001; continue; // bottom-left\n        case 0b0001: e0 = 0b0101, x = this.xmin, y = this.ymin; break; // left\n      }\n      // Note: this implicitly checks for out of bounds: if P[j] or P[j+1] are\n      // undefined, the conditional statement will be executed.\n      if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n        P.splice(j, 0, x, y), j += 2;\n      }\n    }\n    return j;\n  }\n  _project(x0, y0, vx, vy) {\n    let t = Infinity, c, x, y;\n    if (vy < 0) { // top\n      if (y0 <= this.ymin) return null;\n      if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n    } else if (vy > 0) { // bottom\n      if (y0 >= this.ymax) return null;\n      if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n    }\n    if (vx > 0) { // right\n      if (x0 >= this.xmax) return null;\n      if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n    } else if (vx < 0) { // left\n      if (x0 <= this.xmin) return null;\n      if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n    }\n    return [x, y];\n  }\n  _edgecode(x, y) {\n    return (x === this.xmin ? 0b0001\n        : x === this.xmax ? 0b0010 : 0b0000)\n        | (y === this.ymin ? 0b0100\n        : y === this.ymax ? 0b1000 : 0b0000);\n  }\n  _regioncode(x, y) {\n    return (x < this.xmin ? 0b0001\n        : x > this.xmax ? 0b0010 : 0b0000)\n        | (y < this.ymin ? 0b0100\n        : y > this.ymax ? 0b1000 : 0b0000);\n  }\n  _simplify(P) {\n    if (P && P.length > 4) {\n      for (let i = 0; i < P.length; i+= 2) {\n        const j = (i + 2) % P.length, k = (i + 4) % P.length;\n        if (P[i] === P[j] && P[j] === P[k] || P[i + 1] === P[j + 1] && P[j + 1] === P[k + 1]) {\n          P.splice(j, 2), i -= 2;\n        }\n      }\n      if (!P.length) P = null;\n    }\n    return P;\n  }\n}\n","import Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\n\nconst tau = 2 * Math.PI, pow = Math.pow;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n}\n\n// A triangulation is collinear if all its triangles have a non-null area\nfunction collinear(d) {\n  const {triangles, coords} = d;\n  for (let i = 0; i < triangles.length; i += 3) {\n    const a = 2 * triangles[i],\n          b = 2 * triangles[i + 1],\n          c = 2 * triangles[i + 2],\n          cross = (coords[c] - coords[a]) * (coords[b + 1] - coords[a + 1])\n                - (coords[b] - coords[a]) * (coords[c + 1] - coords[a + 1]);\n    if (cross > 1e-10) return false;\n  }\n  return true;\n}\n\nfunction jitter(x, y, r) {\n  return [x + Math.sin(x + y) * r, y + Math.cos(x - y) * r];\n}\n\nexport default class Delaunay {\n  static from(points, fx = pointX, fy = pointY, that) {\n    return new Delaunay(\"length\" in points\n        ? flatArray(points, fx, fy, that)\n        : Float64Array.from(flatIterable(points, fx, fy, that)));\n  }\n  constructor(points) {\n    this._delaunator = new Delaunator(points);\n    this.inedges = new Int32Array(points.length / 2);\n    this._hullIndex = new Int32Array(points.length / 2);\n    this.points = this._delaunator.coords;\n    this._init();\n  }\n  update() {\n    this._delaunator.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const d = this._delaunator, points = this.points;\n\n    // check for collinear\n    if (d.hull && d.hull.length > 2 && collinear(d)) {\n      this.collinear = Int32Array.from({length: points.length/2}, (_,i) => i)\n        .sort((i, j) => points[2 * i] - points[2 * j] || points[2 * i + 1] - points[2 * j + 1]); // for exact neighbors\n      const e = this.collinear[0], f = this.collinear[this.collinear.length - 1],\n        bounds = [ points[2 * e], points[2 * e + 1], points[2 * f], points[2 * f + 1] ],\n        r = 1e-8 * Math.hypot(bounds[3] - bounds[1], bounds[2] - bounds[0]);\n      for (let i = 0, n = points.length / 2; i < n; ++i) {\n        const p = jitter(points[2 * i], points[2 * i + 1], r);\n        points[2 * i] = p[0];\n        points[2 * i + 1] = p[1];\n      }\n      this._delaunator = new Delaunator(points);\n    } else {\n      delete this.collinear;\n    }\n\n    const halfedges = this.halfedges = this._delaunator.halfedges;\n    const hull = this.hull = this._delaunator.hull;\n    const triangles = this.triangles = this._delaunator.triangles;\n    const inedges = this.inedges.fill(-1);\n    const hullIndex = this._hullIndex.fill(-1);\n\n    // Compute an index from each point to an (arbitrary) incoming halfedge\n    // Used to give the first neighbor of each point; for this reason,\n    // on the hull we give priority to exterior halfedges\n    for (let e = 0, n = halfedges.length; e < n; ++e) {\n      const p = triangles[e % 3 === 2 ? e - 2 : e + 1];\n      if (halfedges[e] === -1 || inedges[p] === -1) inedges[p] = e;\n    }\n    for (let i = 0, n = hull.length; i < n; ++i) {\n      hullIndex[hull[i]] = i;\n    }\n\n    // degenerate case: 1 or 2 (distinct) points\n    if (hull.length <= 2 && hull.length > 0) {\n      this.triangles = new Int32Array(3).fill(-1);\n      this.halfedges = new Int32Array(3).fill(-1);\n      this.triangles[0] = hull[0];\n      inedges[hull[0]] = 1;\n      if (hull.length === 2) {\n        inedges[hull[1]] = 0;\n        this.triangles[1] = hull[1];\n        this.triangles[2] = hull[1];\n      }\n    }\n  }\n  voronoi(bounds) {\n    return new Voronoi(this, bounds);\n  }\n  *neighbors(i) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, collinear} = this;\n\n    // degenerate case with several collinear points\n    if (collinear) {\n      const l = collinear.indexOf(i);\n      if (l > 0) yield collinear[l - 1];\n      if (l < collinear.length - 1) yield collinear[l + 1];\n      return;\n    }\n\n    const e0 = inedges[i];\n    if (e0 === -1) return; // coincident point\n    let e = e0, p0 = -1;\n    do {\n      yield p0 = triangles[e];\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) return; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        const p = hull[(_hullIndex[i] + 1) % hull.length];\n        if (p !== p0) yield p;\n        return;\n      }\n    } while (e !== e0);\n  }\n  find(x, y, i = 0) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n    const i0 = i;\n    let c;\n    while ((c = this._step(i, x, y)) >= 0 && c !== i && c !== i0) i = c;\n    return c;\n  }\n  _step(i, x, y) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, points} = this;\n    if (inedges[i] === -1 || !points.length) return (i + 1) % (points.length >> 1);\n    let c = i;\n    let dc = pow(x - points[i * 2], 2) + pow(y - points[i * 2 + 1], 2);\n    const e0 = inedges[i];\n    let e = e0;\n    do {\n      let t = triangles[e];\n      const dt = pow(x - points[t * 2], 2) + pow(y - points[t * 2 + 1], 2);\n      if (dt < dc) dc = dt, c = t;\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        e = hull[(_hullIndex[i] + 1) % hull.length];\n        if (e !== t) {\n          if (pow(x - points[e * 2], 2) + pow(y - points[e * 2 + 1], 2) < dc) return e;\n        }\n        break;\n      }\n    } while (e !== e0);\n    return c;\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, halfedges, triangles} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = triangles[i] * 2;\n      const tj = triangles[j] * 2;\n      context.moveTo(points[ti], points[ti + 1]);\n      context.lineTo(points[tj], points[tj + 1]);\n    }\n    this.renderHull(context);\n    return buffer && buffer.value();\n  }\n  renderPoints(context, r) {\n    if (r === undefined && (!context || typeof context.moveTo !== \"function\")) r = context, context = null;\n    r = r == undefined ? 2 : +r;\n    const buffer = context == null ? context = new Path : undefined;\n    const {points} = this;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i], y = points[i + 1];\n      context.moveTo(x + r, y);\n      context.arc(x, y, r, 0, tau);\n    }\n    return buffer && buffer.value();\n  }\n  renderHull(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {hull, points} = this;\n    const h = hull[0] * 2, n = hull.length;\n    context.moveTo(points[h], points[h + 1]);\n    for (let i = 1; i < n; ++i) {\n      const h = 2 * hull[i];\n      context.lineTo(points[h], points[h + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  hullPolygon() {\n    const polygon = new Polygon;\n    this.renderHull(polygon);\n    return polygon.value();\n  }\n  renderTriangle(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, triangles} = this;\n    const t0 = triangles[i *= 3] * 2;\n    const t1 = triangles[i + 1] * 2;\n    const t2 = triangles[i + 2] * 2;\n    context.moveTo(points[t0], points[t0 + 1]);\n    context.lineTo(points[t1], points[t1 + 1]);\n    context.lineTo(points[t2], points[t2 + 1]);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *trianglePolygons() {\n    const {triangles} = this;\n    for (let i = 0, n = triangles.length / 3; i < n; ++i) {\n      yield this.trianglePolygon(i);\n    }\n  }\n  trianglePolygon(i) {\n    const polygon = new Polygon;\n    this.renderTriangle(i, polygon);\n    return polygon.value();\n  }\n}\n\nfunction flatArray(points, fx, fy, that) {\n  const n = points.length;\n  const array = new Float64Array(n * 2);\n  for (let i = 0; i < n; ++i) {\n    const p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n  return array;\n}\n\nfunction* flatIterable(points, fx, fy, that) {\n  let i = 0;\n  for (const p of points) {\n    yield fx.call(that, p, i, points);\n    yield fy.call(that, p, i, points);\n    ++i;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n","import dsv from \"./dsv.js\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\nexport var csvFormatRow = csv.formatRow;\nexport var csvFormatValue = csv.formatValue;\n","import dsv from \"./dsv.js\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\nexport var tsvFormatRow = tsv.formatRow;\nexport var tsvFormatValue = tsv.formatValue;\n","export default function autoType(object) {\n  for (var key in object) {\n    var value = object[key].trim(), number, m;\n    if (!value) value = null;\n    else if (value === \"true\") value = true;\n    else if (value === \"false\") value = false;\n    else if (value === \"NaN\") value = NaN;\n    else if (!isNaN(number = +value)) value = number;\n    else if (m = value.match(/^([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2})?)?(T\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/)) {\n      if (fixtz && !!m[4] && !m[7]) value = value.replace(/-/g, \"/\").replace(/T/, \" \");\n      value = new Date(value);\n    }\n    else continue;\n    object[key] = value;\n  }\n  return object;\n}\n\n// https://github.com/d3/d3-dsv/issues/45\nconst fixtz = new Date(\"2019-01-01T00:00\").getHours() || new Date(\"2019-07-01T00:00\").getHours();","export const linear = t => +t;\n","export function quadIn(t) {\n  return t * t;\n}\n\nexport function quadOut(t) {\n  return t * (2 - t);\n}\n\nexport function quadInOut(t) {\n  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\n}\n","var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","// tpmt is two power minus ten times t scaled to [0,1]\nexport function tpmt(x) {\n  return (Math.pow(2, -10 * x) - 0.0009765625) * 1.0009775171065494;\n}\n","import {tpmt} from \"./math.js\";\n\nexport function expIn(t) {\n  return tpmt(1 - +t);\n}\n\nexport function expOut(t) {\n  return 1 - tpmt(t);\n}\n\nexport function expInOut(t) {\n  return ((t *= 2) <= 1 ? tpmt(1 - t) : 2 - tpmt(t - 1)) / 2;\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","var b1 = 4 / 11,\n    b2 = 6 / 11,\n    b3 = 8 / 11,\n    b4 = 3 / 4,\n    b5 = 9 / 11,\n    b6 = 10 / 11,\n    b7 = 15 / 16,\n    b8 = 21 / 22,\n    b9 = 63 / 64,\n    b0 = 1 / b1 / b1;\n\nexport function bounceIn(t) {\n  return 1 - bounceOut(1 - t);\n}\n\nexport function bounceOut(t) {\n  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\n}\n\nexport function bounceInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\n}\n","var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return (t = +t) * t * (s * (t - 1) + t);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((t + 1) * s + t) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n","import {tpmt} from \"./math.js\";\n\nvar tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * tpmt(-(--t)) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * tpmt(t = +t) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * tpmt(-t) * Math.sin((s - t) / p)\n        : 2 - a * tpmt(t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n","function responseBlob(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.blob();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseBlob);\n}\n","function responseArrayBuffer(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.arrayBuffer();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseArrayBuffer);\n}\n","function responseText(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.text();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseText);\n}\n","import {csvParse, dsvFormat, tsvParse} from \"d3-dsv\";\nimport text from \"./text.js\";\n\nfunction dsvParse(parse) {\n  return function(input, init, row) {\n    if (arguments.length === 2 && typeof init === \"function\") row = init, init = undefined;\n    return text(input, init).then(function(response) {\n      return parse(response, row);\n    });\n  };\n}\n\nexport default function dsv(delimiter, input, init, row) {\n  if (arguments.length === 3 && typeof init === \"function\") row = init, init = undefined;\n  var format = dsvFormat(delimiter);\n  return text(input, init).then(function(response) {\n    return format.parse(response, row);\n  });\n}\n\nexport var csv = dsvParse(csvParse);\nexport var tsv = dsvParse(tsvParse);\n","export default function(input, init) {\n  return new Promise(function(resolve, reject) {\n    var image = new Image;\n    for (var key in init) image[key] = init[key];\n    image.onerror = reject;\n    image.onload = function() { resolve(image); };\n    image.src = input;\n  });\n}\n","function responseJson(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  if (response.status === 204 || response.status === 205) return;\n  return response.json();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseJson);\n}\n","import text from \"./text.js\";\n\nfunction parser(type) {\n  return (input, init) => text(input, init)\n    .then(text => (new DOMParser).parseFromString(text, type));\n}\n\nexport default parser(\"application/xml\");\n\nexport var html = parser(\"text/html\");\n\nexport var svg = parser(\"image/svg+xml\");\n","export default function(x, y) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function(radius) {\n  var nodes,\n      radii,\n      random,\n      strength = 1,\n      iterations = 1;\n\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i, n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data, rj = quad.r, r = ri + rj;\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n          if (l < r * r) {\n            if (x === 0) x = jiggle(random), l += x * x;\n            if (y === 0) y = jiggle(random), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n        return;\n      }\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    radii = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(radius, x, y) {\n  var nodes,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = node.y - y || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      node.vy += dy * k;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _, initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import {Adder} from \"d3-array\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = new Adder();\n\n// hello?\n\nvar areaSum = new Adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum = new Adder();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnolis\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum = new Adder();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {Adder} from \"d3-array\";\nimport {areaStream, areaRingSum} from \"./area.js\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport {abs, degrees, epsilon, radians} from \"./math.js\";\nimport stream from \"./stream.js\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum,\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum = new Adder();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  },\n  sphere: function() {\n    lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360) % 360, except that we want\n// the distance between 180 to be 360.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import {Adder} from \"d3-array\";\nimport {asin, atan2, cos, degrees, epsilon, epsilon2, hypot, radians, sin, sqrt} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nvar W0, W1,\n    X0, Y0, Z0,\n    X1, Y1, Z1,\n    X2, Y2, Z2,\n    lambda00, phi00, // first point\n    x0, y0, z0; // previous point\n\nvar centroidStream = {\n  sphere: noop,\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  }\n};\n\n// Arithmetic mean of Cartesian vectors.\nfunction centroidPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  centroidPointCartesian(cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi));\n}\n\nfunction centroidPointCartesian(x, y, z) {\n  ++W0;\n  X0 += (x - X0) / W0;\n  Y0 += (y - Y0) / W0;\n  Z0 += (z - Z0) / W0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidLinePointFirst;\n}\n\nfunction centroidLinePointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidStream.point = centroidLinePoint;\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLinePoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      w = atan2(sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\n// See J. E. Brock, The Inertia Tensor for a Spherical Triangle,\n// J. Applied Mechanics 42, 239 (1975).\nfunction centroidRingStart() {\n  centroidStream.point = centroidRingPointFirst;\n}\n\nfunction centroidRingEnd() {\n  centroidRingPoint(lambda00, phi00);\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingPointFirst(lambda, phi) {\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  centroidStream.point = centroidRingPoint;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidRingPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      cx = y0 * z - z0 * y,\n      cy = z0 * x - x0 * z,\n      cz = x0 * y - y0 * x,\n      m = hypot(cx, cy, cz),\n      w = asin(m), // line weight = angle\n      v = m && -w / m; // area weight multiplier\n  X2.add(v * cx);\n  Y2.add(v * cy);\n  Z2.add(v * cz);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nexport default function(object) {\n  W0 = W1 =\n  X0 = Y0 = Z0 =\n  X1 = Y1 = Z1 = 0;\n  X2 = new Adder();\n  Y2 = new Adder();\n  Z2 = new Adder();\n  stream(object, centroidStream);\n\n  var x = +X2,\n      y = +Y2,\n      z = +Z2,\n      m = hypot(x, y, z);\n\n  // If the area-weighted ccentroid is undefined, fall back to length-weighted ccentroid.\n  if (m < epsilon2) {\n    x = X1, y = Y1, z = Z1;\n    // If the feature has zero length, fall back to arithmetic mean of point vectors.\n    if (W1 < epsilon) x = X0, y = Y0, z = Z0;\n    m = hypot(x, y, z);\n    // If the feature still has an undefined ccentroid, then return.\n    if (m < epsilon2) return [NaN, NaN];\n  }\n\n  return [atan2(y, x) * degrees, asin(z / m) * degrees];\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","import {Adder} from \"d3-array\";\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nvar lengthSum,\n    lambda0,\n    sinPhi0,\n    cosPhi0;\n\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\n\nexport default function(object) {\n  lengthSum = new Adder();\n  stream(object, lengthStream);\n  return +lengthSum;\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import clipRectangle from \"./rectangle.js\";\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 960,\n      y1 = 500,\n      cache,\n      cacheStream,\n      clip;\n\n  return clip = {\n    stream: function(stream) {\n      return cache && cacheStream === stream ? cache : cache = clipRectangle(x0, y0, x1, y1)(cacheStream = stream);\n    },\n    extent: function(_) {\n      return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], cache = cacheStream = null, clip) : [[x0, y0], [x1, y1]];\n    }\n  };\n}\n","import length from \"./length.js\";\n\nvar coordinates = [null, null],\n    object = {type: \"LineString\", coordinates: coordinates};\n\nexport default function(a, b) {\n  coordinates[0] = a;\n  coordinates[1] = b;\n  return length(object);\n}\n","import {default as polygonContains} from \"./polygonContains.js\";\nimport {default as distance} from \"./distance.js\";\nimport {epsilon2, radians} from \"./math.js\";\n\nvar containsObjectType = {\n  Feature: function(object, point) {\n    return containsGeometry(object.geometry, point);\n  },\n  FeatureCollection: function(object, point) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) if (containsGeometry(features[i].geometry, point)) return true;\n    return false;\n  }\n};\n\nvar containsGeometryType = {\n  Sphere: function() {\n    return true;\n  },\n  Point: function(object, point) {\n    return containsPoint(object.coordinates, point);\n  },\n  MultiPoint: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPoint(coordinates[i], point)) return true;\n    return false;\n  },\n  LineString: function(object, point) {\n    return containsLine(object.coordinates, point);\n  },\n  MultiLineString: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsLine(coordinates[i], point)) return true;\n    return false;\n  },\n  Polygon: function(object, point) {\n    return containsPolygon(object.coordinates, point);\n  },\n  MultiPolygon: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPolygon(coordinates[i], point)) return true;\n    return false;\n  },\n  GeometryCollection: function(object, point) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) if (containsGeometry(geometries[i], point)) return true;\n    return false;\n  }\n};\n\nfunction containsGeometry(geometry, point) {\n  return geometry && containsGeometryType.hasOwnProperty(geometry.type)\n      ? containsGeometryType[geometry.type](geometry, point)\n      : false;\n}\n\nfunction containsPoint(coordinates, point) {\n  return distance(coordinates, point) === 0;\n}\n\nfunction containsLine(coordinates, point) {\n  var ao, bo, ab;\n  for (var i = 0, n = coordinates.length; i < n; i++) {\n    bo = distance(coordinates[i], point);\n    if (bo === 0) return true;\n    if (i > 0) {\n      ab = distance(coordinates[i], coordinates[i - 1]);\n      if (\n        ab > 0 &&\n        ao <= ab &&\n        bo <= ab &&\n        (ao + bo - ab) * (1 - Math.pow((ao - bo) / ab, 2)) < epsilon2 * ab\n      )\n        return true;\n    }\n    ao = bo;\n  }\n  return false;\n}\n\nfunction containsPolygon(coordinates, point) {\n  return !!polygonContains(coordinates.map(ringRadians), pointRadians(point));\n}\n\nfunction ringRadians(ring) {\n  return ring = ring.map(pointRadians), ring.pop(), ring;\n}\n\nfunction pointRadians(point) {\n  return [point[0] * radians, point[1] * radians];\n}\n\nexport default function(object, point) {\n  return (object && containsObjectType.hasOwnProperty(object.type)\n      ? containsObjectType[object.type]\n      : containsGeometry)(object, point);\n}\n","import {range} from \"d3-array\";\nimport {abs, ceil, epsilon} from \"./math.js\";\n\nfunction graticuleX(y0, y1, dy) {\n  var y = range(y0, y1 - epsilon, dy).concat(y1);\n  return function(x) { return y.map(function(y) { return [x, y]; }); };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = range(x0, x1 - epsilon, dx).concat(x1);\n  return function(y) { return x.map(function(x) { return [x, y]; }); };\n}\n\nexport default function graticule() {\n  var x1, x0, X1, X0,\n      y1, y0, Y1, Y0,\n      dx = 10, dy = dx, DX = 90, DY = 360,\n      x, y, X, Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {type: \"MultiLineString\", coordinates: lines()};\n  }\n\n  function lines() {\n    return range(ceil(X0 / DX) * DX, X1, DX).map(X)\n        .concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y))\n        .concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function(x) { return abs(x % DX) > epsilon; }).map(x))\n        .concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function(y) { return abs(y % DY) > epsilon; }).map(y));\n  }\n\n  graticule.lines = function() {\n    return lines().map(function(coordinates) { return {type: \"LineString\", coordinates: coordinates}; });\n  };\n\n  graticule.outline = function() {\n    return {\n      type: \"Polygon\",\n      coordinates: [\n        X(X0).concat(\n        Y(Y1).slice(1),\n        X(X1).reverse().slice(1),\n        Y(Y0).reverse().slice(1))\n      ]\n    };\n  };\n\n  graticule.extent = function(_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function(_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function(_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function(_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function(_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function(_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function(_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule\n      .extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]])\n      .extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\n\nexport function graticule10() {\n  return graticule()();\n}\n","import {asin, atan2, cos, degrees, haversin, radians, sin, sqrt} from \"./math.js\";\n\nexport default function(a, b) {\n  var x0 = a[0] * radians,\n      y0 = a[1] * radians,\n      x1 = b[0] * radians,\n      y1 = b[1] * radians,\n      cy0 = cos(y0),\n      sy0 = sin(y0),\n      cy1 = cos(y1),\n      sy1 = sin(y1),\n      kx0 = cy0 * cos(x0),\n      ky0 = cy0 * sin(x0),\n      kx1 = cy1 * cos(x1),\n      ky1 = cy1 * sin(x1),\n      d = 2 * asin(sqrt(haversin(y1 - y0) + cy0 * cy1 * haversin(x1 - x0))),\n      k = sin(d);\n\n  var interpolate = d ? function(t) {\n    var B = sin(t *= d) / k,\n        A = sin(d - t) / k,\n        x = A * kx0 + B * kx1,\n        y = A * ky0 + B * ky1,\n        z = A * sy0 + B * sy1;\n    return [\n      atan2(y, x) * degrees,\n      atan2(z, sqrt(x * x + y * y)) * degrees\n    ];\n  } : function() {\n    return [x0 * degrees, y0 * degrees];\n  };\n\n  interpolate.distance = d;\n\n  return interpolate;\n}\n","export default x => x;\n","import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {degrees, pi, radians} from \"../math.js\";\nimport {projectionMutator} from \"./index.js\";\n\nexport function conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n","import {abs, asin, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\n\nexport function conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0), n = (sy0 + sin(y1)) / 2;\n\n  // Are the parallels symmetrical around the Equator?\n  if (abs(n) < epsilon) return cylindricalEqualAreaRaw(y0);\n\n  var c = 1 + sy0 * (2 * n - sy0), r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y,\n        l = atan2(x, abs(r0y)) * sign(r0y);\n    if (r0y * n < 0)\n      l -= pi * sign(x) * sign(r0y);\n    return [l / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n","import {asin, cos, sin} from \"../math.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n","import conicEqualArea from \"./conicEqualArea.js\";\n\nexport default function() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n","import {epsilon} from \"../math.js\";\nimport albers from \"./albers.js\";\nimport conicEqualArea from \"./conicEqualArea.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960500. The projection also works quite well at 960600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nexport default function() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return reset();\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return reset();\n  };\n\n  albersUsa.fitExtent = function(extent, object) {\n    return fitExtent(albersUsa, extent, object);\n  };\n\n  albersUsa.fitSize = function(size, object) {\n    return fitSize(albersUsa, size, object);\n  };\n\n  albersUsa.fitWidth = function(width, object) {\n    return fitWidth(albersUsa, width, object);\n  };\n\n  albersUsa.fitHeight = function(height, object) {\n    return fitHeight(albersUsa, height, object);\n  };\n\n  function reset() {\n    cache = cacheStream = null;\n    return albersUsa;\n  }\n\n  return albersUsa.scale(1070);\n}\n","import {asin, atan2, cos, sin, sqrt} from \"../math.js\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n        if (k === Infinity) return [2, 0];\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n","import {asin, sqrt} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n","import {acos, sin} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n","import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n","import {abs, atan, atan2, cos, epsilon, halfPi, log, pi, pow, sign, sin, sqrt, tan} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {mercatorRaw} from \"./mercator.js\";\n\nfunction tany(y) {\n  return tan((halfPi + y) / 2);\n}\n\nexport function conicConformalRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : log(cy0 / cos(y1)) / log(tany(y1) / tany(y0)),\n      f = cy0 * pow(tany(y0), n) / n;\n\n  if (!n) return mercatorRaw;\n\n  function project(x, y) {\n    if (f > 0) { if (y < -halfPi + epsilon) y = -halfPi + epsilon; }\n    else { if (y > halfPi - epsilon) y = halfPi - epsilon; }\n    var r = f / pow(tany(y), n);\n    return [r * sin(n * x), f - r * cos(n * x)];\n  }\n\n  project.invert = function(x, y) {\n    var fy = f - y, r = sign(n) * sqrt(x * x + fy * fy),\n      l = atan2(x, abs(fy)) * sign(fy);\n    if (fy * n < 0)\n      l -= pi * sign(x) * sign(fy);\n    return [l / n, 2 * atan(pow(f / r, 1 / n)) - halfPi];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicConformalRaw)\n      .scale(109.5)\n      .parallels([30, 30]);\n}\n","import projection from \"./index.js\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n","import {abs, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {equirectangularRaw} from \"./equirectangular.js\";\n\nexport function conicEquidistantRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : (cy0 - cos(y1)) / (y1 - y0),\n      g = cy0 / n + y0;\n\n  if (abs(n) < epsilon) return equirectangularRaw;\n\n  function project(x, y) {\n    var gy = g - y, nx = n * x;\n    return [gy * sin(nx), g - gy * cos(nx)];\n  }\n\n  project.invert = function(x, y) {\n    var gy = g - y,\n        l = atan2(x, abs(gy)) * sign(gy);\n    if (gy * n < 0)\n      l -= pi * sign(x) * sign(gy);\n    return [l / n, g - sign(n) * sqrt(x * x + gy * gy)];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEquidistantRaw)\n      .scale(131.154)\n      .center([0, 13.9389]);\n}\n","import projection from \"./index.js\";\nimport {abs, asin, cos, epsilon2, sin, sqrt} from \"../math.js\";\n\nvar A1 = 1.340264,\n    A2 = -0.081106,\n    A3 = 0.000893,\n    A4 = 0.003796,\n    M = sqrt(3) / 2,\n    iterations = 12;\n\nexport function equalEarthRaw(lambda, phi) {\n  var l = asin(M * sin(phi)), l2 = l * l, l6 = l2 * l2 * l2;\n  return [\n    lambda * cos(l) / (M * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2))),\n    l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2))\n  ];\n}\n\nequalEarthRaw.invert = function(x, y) {\n  var l = y, l2 = l * l, l6 = l2 * l2 * l2;\n  for (var i = 0, delta, fy, fpy; i < iterations; ++i) {\n    fy = l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2)) - y;\n    fpy = A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2);\n    l -= delta = fy / fpy, l2 = l * l, l6 = l2 * l2 * l2;\n    if (abs(delta) < epsilon2) break;\n  }\n  return [\n    M * x * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2)) / cos(l),\n    asin(sin(l) / M)\n  ];\n};\n\nexport default function() {\n  return projection(equalEarthRaw)\n      .scale(177.158);\n}\n","import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function gnomonicRaw(x, y) {\n  var cy = cos(y), k = cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\ngnomonicRaw.invert = azimuthalInvert(atan);\n\nexport default function() {\n  return projection(gnomonicRaw)\n      .scale(144.049)\n      .clipAngle(60);\n}\n","import clipRectangle from \"../clip/rectangle.js\";\nimport identity from \"../identity.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport {cos, degrees, radians, sin} from \"../math.js\";\n\nexport default function() {\n  var k = 1, tx = 0, ty = 0, sx = 1, sy = 1, // scale, translate and reflect\n      alpha = 0, ca, sa, // angle\n      x0 = null, y0, x1, y1, // clip extent\n      kx = 1, ky = 1,\n      transform = transformer({\n        point: function(x, y) {\n          var p = projection([x, y])\n          this.stream.point(p[0], p[1]);\n        }\n      }),\n      postclip = identity,\n      cache,\n      cacheStream;\n\n  function reset() {\n    kx = k * sx;\n    ky = k * sy;\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  function projection (p) {\n    var x = p[0] * kx, y = p[1] * ky;\n    if (alpha) {\n      var t = y * ca - x * sa;\n      x = x * ca + y * sa;\n      y = t;\n    }    \n    return [x + tx, y + ty];\n  }\n  projection.invert = function(p) {\n    var x = p[0] - tx, y = p[1] - ty;\n    if (alpha) {\n      var t = y * ca + x * sa;\n      x = x * ca - y * sa;\n      y = t;\n    }\n    return [x / kx, y / ky];\n  };\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transform(postclip(cacheStream = stream));\n  };\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, reset()) : k;\n  };\n  projection.translate = function(_) {\n    return arguments.length ? (tx = +_[0], ty = +_[1], reset()) : [tx, ty];\n  }\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, sa = sin(alpha), ca = cos(alpha), reset()) : alpha * degrees;\n  };\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, reset()) : sx < 0;\n  };\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, reset()) : sy < 0;\n  };\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  return projection;\n}\n","import projection from \"./index.js\";\nimport {abs, epsilon} from \"../math.js\";\n\nexport function naturalEarth1Raw(lambda, phi) {\n  var phi2 = phi * phi, phi4 = phi2 * phi2;\n  return [\n    lambda * (0.8707 - 0.131979 * phi2 + phi4 * (-0.013791 + phi4 * (0.003971 * phi2 - 0.001529 * phi4))),\n    phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4)))\n  ];\n}\n\nnaturalEarth1Raw.invert = function(x, y) {\n  var phi = y, i = 25, delta;\n  do {\n    var phi2 = phi * phi, phi4 = phi2 * phi2;\n    phi -= delta = (phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4))) - y) /\n        (1.007226 + phi2 * (0.015085 * 3 + phi4 * (-0.044475 * 7 + 0.028874 * 9 * phi2 - 0.005916 * 11 * phi4)));\n  } while (abs(delta) > epsilon && --i > 0);\n  return [\n    x / (0.8707 + (phi2 = phi * phi) * (-0.131979 + phi2 * (-0.013791 + phi2 * phi2 * phi2 * (0.003971 - 0.001529 * phi2)))),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(naturalEarth1Raw)\n      .scale(175.295);\n}\n","import {asin, cos, epsilon, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nexport default function() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n","import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function stereographicRaw(x, y) {\n  var cy = cos(y), k = 1 + cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\nstereographicRaw.invert = azimuthalInvert(function(z) {\n  return 2 * atan(z);\n});\n\nexport default function() {\n  return projection(stereographicRaw)\n      .scale(250)\n      .clipAngle(142);\n}\n","import {atan, exp, halfPi, log, tan} from \"../math.js\";\nimport {mercatorProjection} from \"./mercator.js\";\n\nexport function transverseMercatorRaw(lambda, phi) {\n  return [log(tan((halfPi + phi) / 2)), -lambda];\n}\n\ntransverseMercatorRaw.invert = function(x, y) {\n  return [-y, 2 * atan(exp(x)) - halfPi];\n};\n\nexport default function() {\n  var m = mercatorProjection(transverseMercatorRaw),\n      center = m.center,\n      rotate = m.rotate;\n\n  m.center = function(_) {\n    return arguments.length ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n  };\n\n  m.rotate = function(_) {\n    return arguments.length ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n  };\n\n  return rotate([0, 0, 90])\n      .scale(159.155);\n}\n","function defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\nfunction meanX(children) {\n  return children.reduce(meanXReduce, 0) / children.length;\n}\n\nfunction meanXReduce(x, c) {\n  return x + c.x;\n}\n\nfunction maxY(children) {\n  return 1 + children.reduce(maxYReduce, 0);\n}\n\nfunction maxYReduce(y, c) {\n  return Math.max(y, c.y);\n}\n\nfunction leafLeft(node) {\n  var children;\n  while (children = node.children) node = children[0];\n  return node;\n}\n\nfunction leafRight(node) {\n  var children;\n  while (children = node.children) node = children[children.length - 1];\n  return node;\n}\n\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = false;\n\n  function cluster(root) {\n    var previousNode,\n        x = 0;\n\n    // First walk, computing the initial x & y values.\n    root.eachAfter(function(node) {\n      var children = node.children;\n      if (children) {\n        node.x = meanX(children);\n        node.y = maxY(children);\n      } else {\n        node.x = previousNode ? x += separation(node, previousNode) : 0;\n        node.y = 0;\n        previousNode = node;\n      }\n    });\n\n    var left = leafLeft(root),\n        right = leafRight(root),\n        x0 = left.x - separation(left, right) / 2,\n        x1 = right.x + separation(right, left) / 2;\n\n    // Second walk, normalizing x & y to the desired size.\n    return root.eachAfter(nodeSize ? function(node) {\n      node.x = (node.x - root.x) * dx;\n      node.y = (root.y - node.y) * dy;\n    } : function(node) {\n      node.x = (node.x - x0) / (x1 - x0) * dx;\n      node.y = (1 - (root.y ? node.y / root.y : 1)) * dy;\n    });\n  }\n\n  cluster.separation = function(x) {\n    return arguments.length ? (separation = x, cluster) : separation;\n  };\n\n  cluster.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? null : [dx, dy]);\n  };\n\n  cluster.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return cluster;\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n","export function constantZero() {\n  return 0;\n}\n\nexport default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {shuffle} from \"../array.js\";\nimport lcg from \"../lcg.js\";\n\nexport default function(circles) {\n  return packEncloseRandom(circles, lcg());\n}\n\nexport function packEncloseRandom(circles, random) {\n  var i = 0, n = (circles = shuffle(Array.from(circles), random)).length, B = [], p, e;\n\n  while (i < n) {\n    p = circles[i];\n    if (e && enclosesWeak(e, p)) ++i;\n    else e = encloseBasis(B = extendBasis(B, p)), i = 0;\n  }\n\n  return e;\n}\n\nfunction extendBasis(B, p) {\n  var i, j;\n\n  if (enclosesWeakAll(p, B)) return [p];\n\n  // If we get here then B must have at least one element.\n  for (i = 0; i < B.length; ++i) {\n    if (enclosesNot(p, B[i])\n        && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\n      return [B[i], p];\n    }\n  }\n\n  // If we get here then B must have at least two elements.\n  for (i = 0; i < B.length - 1; ++i) {\n    for (j = i + 1; j < B.length; ++j) {\n      if (enclosesNot(encloseBasis2(B[i], B[j]), p)\n          && enclosesNot(encloseBasis2(B[i], p), B[j])\n          && enclosesNot(encloseBasis2(B[j], p), B[i])\n          && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {\n        return [B[i], B[j], p];\n      }\n    }\n  }\n\n  // If we get here then something is very wrong.\n  throw new Error;\n}\n\nfunction enclosesNot(a, b) {\n  var dr = a.r - b.r, dx = b.x - a.x, dy = b.y - a.y;\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\n}\n\nfunction enclosesWeak(a, b) {\n  var dr = a.r - b.r + Math.max(a.r, b.r, 1) * 1e-9, dx = b.x - a.x, dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction enclosesWeakAll(a, B) {\n  for (var i = 0; i < B.length; ++i) {\n    if (!enclosesWeak(a, B[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction encloseBasis(B) {\n  switch (B.length) {\n    case 1: return encloseBasis1(B[0]);\n    case 2: return encloseBasis2(B[0], B[1]);\n    case 3: return encloseBasis3(B[0], B[1], B[2]);\n  }\n}\n\nfunction encloseBasis1(a) {\n  return {\n    x: a.x,\n    y: a.y,\n    r: a.r\n  };\n}\n\nfunction encloseBasis2(a, b) {\n  var x1 = a.x, y1 = a.y, r1 = a.r,\n      x2 = b.x, y2 = b.y, r2 = b.r,\n      x21 = x2 - x1, y21 = y2 - y1, r21 = r2 - r1,\n      l = Math.sqrt(x21 * x21 + y21 * y21);\n  return {\n    x: (x1 + x2 + x21 / l * r21) / 2,\n    y: (y1 + y2 + y21 / l * r21) / 2,\n    r: (l + r1 + r2) / 2\n  };\n}\n\nfunction encloseBasis3(a, b, c) {\n  var x1 = a.x, y1 = a.y, r1 = a.r,\n      x2 = b.x, y2 = b.y, r2 = b.r,\n      x3 = c.x, y3 = c.y, r3 = c.r,\n      a2 = x1 - x2,\n      a3 = x1 - x3,\n      b2 = y1 - y2,\n      b3 = y1 - y3,\n      c2 = r2 - r1,\n      c3 = r3 - r1,\n      d1 = x1 * x1 + y1 * y1 - r1 * r1,\n      d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\n      d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\n      ab = a3 * b2 - a2 * b3,\n      xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\n      xb = (b3 * c2 - b2 * c3) / ab,\n      ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\n      yb = (a2 * c3 - a3 * c2) / ab,\n      A = xb * xb + yb * yb - 1,\n      B = 2 * (r1 + xa * xb + ya * yb),\n      C = xa * xa + ya * ya - r1 * r1,\n      r = -(Math.abs(A) > 1e-6 ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\n  return {\n    x: x1 + xa + xb * r,\n    y: y1 + ya + yb * r,\n    r: r\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n\nexport function shuffle(array, random) {\n  let m = array.length,\n      t,\n      i;\n\n  while (m) {\n    i = random() * m-- | 0;\n    t = array[m];\n    array[m] = array[i];\n    array[i] = t;\n  }\n\n  return array;\n}\n","import array from \"../array.js\";\nimport lcg from \"../lcg.js\";\nimport {packEncloseRandom} from \"./enclose.js\";\n\nfunction place(b, a, c) {\n  var dx = b.x - a.x, x, a2,\n      dy = b.y - a.y, y, b2,\n      d2 = dx * dx + dy * dy;\n  if (d2) {\n    a2 = a.r + c.r, a2 *= a2;\n    b2 = b.r + c.r, b2 *= b2;\n    if (a2 > b2) {\n      x = (d2 + b2 - a2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, b2 / d2 - x * x));\n      c.x = b.x - x * dx - y * dy;\n      c.y = b.y - x * dy + y * dx;\n    } else {\n      x = (d2 + a2 - b2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, a2 / d2 - x * x));\n      c.x = a.x + x * dx - y * dy;\n      c.y = a.y + x * dy + y * dx;\n    }\n  } else {\n    c.x = a.x + c.r;\n    c.y = a.y;\n  }\n}\n\nfunction intersects(a, b) {\n  var dr = a.r + b.r - 1e-6, dx = b.x - a.x, dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction score(node) {\n  var a = node._,\n      b = node.next._,\n      ab = a.r + b.r,\n      dx = (a.x * b.r + b.x * a.r) / ab,\n      dy = (a.y * b.r + b.y * a.r) / ab;\n  return dx * dx + dy * dy;\n}\n\nfunction Node(circle) {\n  this._ = circle;\n  this.next = null;\n  this.previous = null;\n}\n\nexport function packSiblingsRandom(circles, random) {\n  if (!(n = (circles = array(circles)).length)) return 0;\n\n  var a, b, c, n, aa, ca, i, j, k, sj, sk;\n\n  // Place the first circle.\n  a = circles[0], a.x = 0, a.y = 0;\n  if (!(n > 1)) return a.r;\n\n  // Place the second circle.\n  b = circles[1], a.x = -b.r, b.x = a.r, b.y = 0;\n  if (!(n > 2)) return a.r + b.r;\n\n  // Place the third circle.\n  place(b, a, c = circles[2]);\n\n  // Initialize the front-chain using the first three circles a, b and c.\n  a = new Node(a), b = new Node(b), c = new Node(c);\n  a.next = c.previous = b;\n  b.next = a.previous = c;\n  c.next = b.previous = a;\n\n  // Attempt to place each remaining circle\n  pack: for (i = 3; i < n; ++i) {\n    place(a._, b._, c = circles[i]), c = new Node(c);\n\n    // Find the closest intersecting circle on the front-chain, if any.\n    // Closeness is determined by linear distance along the front-chain.\n    // Ahead or behind is likewise determined by linear distance.\n    j = b.next, k = a.previous, sj = b._.r, sk = a._.r;\n    do {\n      if (sj <= sk) {\n        if (intersects(j._, c._)) {\n          b = j, a.next = b, b.previous = a, --i;\n          continue pack;\n        }\n        sj += j._.r, j = j.next;\n      } else {\n        if (intersects(k._, c._)) {\n          a = k, a.next = b, b.previous = a, --i;\n          continue pack;\n        }\n        sk += k._.r, k = k.previous;\n      }\n    } while (j !== k.next);\n\n    // Success! Insert the new circle c between a and b.\n    c.previous = a, c.next = b, a.next = b.previous = b = c;\n\n    // Compute the new closest circle pair to the centroid.\n    aa = score(a);\n    while ((c = c.next) !== b) {\n      if ((ca = score(c)) < aa) {\n        a = c, aa = ca;\n      }\n    }\n    b = a.next;\n  }\n\n  // Compute the enclosing circle of the front chain.\n  a = [b._], c = b; while ((c = c.next) !== b) a.push(c._); c = packEncloseRandom(a, random);\n\n  // Translate the circles to put the enclosing circle around the origin.\n  for (i = 0; i < n; ++i) a = circles[i], a.x -= c.x, a.y -= c.y;\n\n  return c.r;\n}\n\nexport default function(circles) {\n  packSiblingsRandom(circles, lcg());\n  return circles;\n}\n","import {optional} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\nimport lcg from \"../lcg.js\";\nimport {packSiblingsRandom} from \"./siblings.js\";\n\nfunction defaultRadius(d) {\n  return Math.sqrt(d.value);\n}\n\nexport default function() {\n  var radius = null,\n      dx = 1,\n      dy = 1,\n      padding = constantZero;\n\n  function pack(root) {\n    const random = lcg();\n    root.x = dx / 2, root.y = dy / 2;\n    if (radius) {\n      root.eachBefore(radiusLeaf(radius))\n          .eachAfter(packChildrenRandom(padding, 0.5, random))\n          .eachBefore(translateChild(1));\n    } else {\n      root.eachBefore(radiusLeaf(defaultRadius))\n          .eachAfter(packChildrenRandom(constantZero, 1, random))\n          .eachAfter(packChildrenRandom(padding, root.r / Math.min(dx, dy), random))\n          .eachBefore(translateChild(Math.min(dx, dy) / (2 * root.r)));\n    }\n    return root;\n  }\n\n  pack.radius = function(x) {\n    return arguments.length ? (radius = optional(x), pack) : radius;\n  };\n\n  pack.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], pack) : [dx, dy];\n  };\n\n  pack.padding = function(x) {\n    return arguments.length ? (padding = typeof x === \"function\" ? x : constant(+x), pack) : padding;\n  };\n\n  return pack;\n}\n\nfunction radiusLeaf(radius) {\n  return function(node) {\n    if (!node.children) {\n      node.r = Math.max(0, +radius(node) || 0);\n    }\n  };\n}\n\nfunction packChildrenRandom(padding, k, random) {\n  return function(node) {\n    if (children = node.children) {\n      var children,\n          i,\n          n = children.length,\n          r = padding(node) * k || 0,\n          e;\n\n      if (r) for (i = 0; i < n; ++i) children[i].r += r;\n      e = packSiblingsRandom(children, random);\n      if (r) for (i = 0; i < n; ++i) children[i].r -= r;\n      node.r = e + r;\n    }\n  };\n}\n\nfunction translateChild(k) {\n  return function(node) {\n    var parent = node.parent;\n    node.r *= k;\n    if (parent) {\n      node.x = parent.x + k * node.x;\n      node.y = parent.y + k * node.y;\n    }\n  };\n}\n","export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n","import roundNode from \"./treemap/round.js\";\nimport treemapDice from \"./treemap/dice.js\";\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      padding = 0,\n      round = false;\n\n  function partition(root) {\n    var n = root.height + 1;\n    root.x0 =\n    root.y0 = padding;\n    root.x1 = dx;\n    root.y1 = dy / n;\n    root.eachBefore(positionNode(dy, n));\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(dy, n) {\n    return function(node) {\n      if (node.children) {\n        treemapDice(node, node.x0, dy * (node.depth + 1) / n, node.x1, dy * (node.depth + 2) / n);\n      }\n      var x0 = node.x0,\n          y0 = node.y0,\n          x1 = node.x1 - padding,\n          y1 = node.y1 - padding;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      node.x0 = x0;\n      node.y0 = y0;\n      node.x1 = x1;\n      node.y1 = y1;\n    };\n  }\n\n  partition.round = function(x) {\n    return arguments.length ? (round = !!x, partition) : round;\n  };\n\n  partition.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], partition) : [dx, dy];\n  };\n\n  partition.padding = function(x) {\n    return arguments.length ? (padding = +x, partition) : padding;\n  };\n\n  return partition;\n}\n","import {optional} from \"./accessors.js\";\nimport {Node, computeHeight} from \"./hierarchy/index.js\";\n\nvar preroot = {depth: -1},\n    ambiguous = {},\n    imputed = {};\n\nfunction defaultId(d) {\n  return d.id;\n}\n\nfunction defaultParentId(d) {\n  return d.parentId;\n}\n\nexport default function() {\n  var id = defaultId,\n      parentId = defaultParentId,\n      path;\n\n  function stratify(data) {\n    var nodes = Array.from(data),\n        currentId = id,\n        currentParentId = parentId,\n        n,\n        d,\n        i,\n        root,\n        parent,\n        node,\n        nodeId,\n        nodeKey,\n        nodeByKey = new Map;\n\n    if (path != null) {\n      const I = nodes.map((d, i) => normalize(path(d, i, data)));\n      const P = I.map(parentof);\n      const S = new Set(I).add(\"\");\n      for (const i of P) {\n        if (!S.has(i)) {\n          S.add(i);\n          I.push(i);\n          P.push(parentof(i));\n          nodes.push(imputed);\n        }\n      }\n      currentId = (_, i) => I[i];\n      currentParentId = (_, i) => P[i];\n    }\n\n    for (i = 0, n = nodes.length; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = currentId(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = currentParentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);\n        else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n\n    if (!root) throw new Error(\"no root\");\n\n    // When imputing internal nodes, only introduce roots if needed.\n    // Then replace the imputed marker data with null.\n    if (path != null) {\n      while (root.data === imputed && root.children.length === 1) {\n        root = root.children[0], --n;\n      }\n      for (let i = nodes.length - 1; i >= 0; --i) {\n        node = nodes[i];\n        if (node.data !== imputed) break;\n        node.data = null;\n      }\n    }\n\n    root.parent = preroot;\n    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n\n    return root;\n  }\n\n  stratify.id = function(x) {\n    return arguments.length ? (id = optional(x), stratify) : id;\n  };\n\n  stratify.parentId = function(x) {\n    return arguments.length ? (parentId = optional(x), stratify) : parentId;\n  };\n\n  stratify.path = function(x) {\n    return arguments.length ? (path = optional(x), stratify) : path;\n  };\n\n  return stratify;\n}\n\n// To normalize a path, we coerce to a string, strip the trailing slash if any\n// (as long as the trailing slash is not immediately preceded by another slash),\n// and add leading slash if missing.\nfunction normalize(path) {\n  path = `${path}`;\n  let i = path.length;\n  if (slash(path, i - 1) && !slash(path, i - 2)) path = path.slice(0, -1);\n  return path[0] === \"/\" ? path : `/${path}`;\n}\n\n// Walk backwards to find the first slash that is not the leading slash, e.g.:\n// \"/foo/bar\"  \"/foo\", \"/foo\"  \"/\", \"/\"  \"\". (The root is special-cased\n// because the id of the root must be a truthy value.)\nfunction parentof(path) {\n  let i = path.length;\n  if (i < 2) return \"\";\n  while (--i > 1) if (slash(path, i)) break;\n  return path.slice(0, i);\n}\n\n// Slashes can be escaped; to determine whether a slash is a path delimiter, we\n// count the number of preceding backslashes escaping the forward slash: an odd\n// number indicates an escaped forward slash.\nfunction slash(path, i) {\n  if (path[i] === \"/\") {\n    let k = 0;\n    while (i > 0 && path[--i] === \"\\\\\") ++k;\n    if ((k & 1) === 0) return true;\n  }\n  return false;\n}\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n","import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n","import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      i, n = nodes.length,\n      sum, sums = new Array(n + 1);\n\n  for (sums[0] = sum = i = 0; i < n; ++i) {\n    sums[i + 1] = sum += nodes[i].value;\n  }\n\n  partition(0, n, parent.value, x0, y0, x1, y1);\n\n  function partition(i, j, value, x0, y0, x1, y1) {\n    if (i >= j - 1) {\n      var node = nodes[i];\n      node.x0 = x0, node.y0 = y0;\n      node.x1 = x1, node.y1 = y1;\n      return;\n    }\n\n    var valueOffset = sums[i],\n        valueTarget = (value / 2) + valueOffset,\n        k = i + 1,\n        hi = j - 1;\n\n    while (k < hi) {\n      var mid = k + hi >>> 1;\n      if (sums[mid] < valueTarget) k = mid + 1;\n      else hi = mid;\n    }\n\n    if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) --k;\n\n    var valueLeft = sums[k] - valueOffset,\n        valueRight = value - valueLeft;\n\n    if ((x1 - x0) > (y1 - y0)) {\n      var xk = value ? (x0 * valueRight + x1 * valueLeft) / value : x1;\n      partition(i, k, valueLeft, x0, y0, xk, y1);\n      partition(k, j, valueRight, xk, y0, x1, y1);\n    } else {\n      var yk = value ? (y0 * valueRight + y1 * valueLeft) / value : y1;\n      partition(i, k, valueLeft, x0, y0, x1, yk);\n      partition(k, j, valueRight, x0, yk, x1, y1);\n    }\n  }\n}\n","import dice from \"./dice.js\";\nimport slice from \"./slice.js\";\n\nexport default function(parent, x0, y0, x1, y1) {\n  (parent.depth & 1 ? slice : dice)(parent, x0, y0, x1, y1);\n}\n","import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\nimport {phi, squarifyRatio} from \"./squarify.js\";\n\nexport default (function custom(ratio) {\n\n  function resquarify(parent, x0, y0, x1, y1) {\n    if ((rows = parent._squarify) && (rows.ratio === ratio)) {\n      var rows,\n          row,\n          nodes,\n          i,\n          j = -1,\n          n,\n          m = rows.length,\n          value = parent.value;\n\n      while (++j < m) {\n        row = rows[j], nodes = row.children;\n        for (i = row.value = 0, n = nodes.length; i < n; ++i) row.value += nodes[i].value;\n        if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += (y1 - y0) * row.value / value : y1);\n        else treemapSlice(row, x0, y0, value ? x0 += (x1 - x0) * row.value / value : x1, y1);\n        value -= row.value;\n      }\n    } else {\n      parent._squarify = rows = squarifyRatio(ratio, parent, x0, y0, x1, y1);\n      rows.ratio = ratio;\n    }\n  }\n\n  resquarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return resquarify;\n})(phi);\n","export default function(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n","import {hue} from \"./color.js\";\n\nexport default function(a, b) {\n  var i = hue(+a, +b);\n  return function(t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {lab as colorLab} from \"d3-color\";\nimport color from \"./color.js\";\n\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {default as value} from \"./value.js\";\n\nexport default function piecewise(interpolate, values) {\n  if (values === undefined) values = interpolate, interpolate = value;\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n","export default function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n}\n","export default function(polygon) {\n  var i = -1,\n      n = polygon.length,\n      a,\n      b = polygon[n - 1],\n      area = 0;\n\n  while (++i < n) {\n    a = b;\n    b = polygon[i];\n    area += a[1] * b[0] - a[0] * b[1];\n  }\n\n  return area / 2;\n}\n","export default function(polygon) {\n  var i = -1,\n      n = polygon.length,\n      x = 0,\n      y = 0,\n      a,\n      b = polygon[n - 1],\n      c,\n      k = 0;\n\n  while (++i < n) {\n    a = b;\n    b = polygon[i];\n    k += c = a[0] * b[1] - b[0] * a[1];\n    x += (a[0] + b[0]) * c;\n    y += (a[1] + b[1]) * c;\n  }\n\n  return k *= 3, [x / k, y / k];\n}\n","// Returns the 2D cross product of AB and AC vectors, i.e., the z-component of\n// the 3D cross product in a quadrant I Cartesian coordinate system (+x is\n// right, +y is up). Returns a positive value if ABC is counter-clockwise,\n// negative if clockwise, and zero if the points are collinear.\nexport default function(a, b, c) {\n  return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\n}\n","import cross from \"./cross.js\";\n\nfunction lexicographicOrder(a, b) {\n  return a[0] - b[0] || a[1] - b[1];\n}\n\n// Computes the upper convex hull per the monotone chain algorithm.\n// Assumes points.length >= 3, is sorted by x, unique in y.\n// Returns an array of indices into points in left-to-right order.\nfunction computeUpperHullIndexes(points) {\n  const n = points.length,\n      indexes = [0, 1];\n  let size = 2, i;\n\n  for (i = 2; i < n; ++i) {\n    while (size > 1 && cross(points[indexes[size - 2]], points[indexes[size - 1]], points[i]) <= 0) --size;\n    indexes[size++] = i;\n  }\n\n  return indexes.slice(0, size); // remove popped points\n}\n\nexport default function(points) {\n  if ((n = points.length) < 3) return null;\n\n  var i,\n      n,\n      sortedPoints = new Array(n),\n      flippedPoints = new Array(n);\n\n  for (i = 0; i < n; ++i) sortedPoints[i] = [+points[i][0], +points[i][1], i];\n  sortedPoints.sort(lexicographicOrder);\n  for (i = 0; i < n; ++i) flippedPoints[i] = [sortedPoints[i][0], -sortedPoints[i][1]];\n\n  var upperIndexes = computeUpperHullIndexes(sortedPoints),\n      lowerIndexes = computeUpperHullIndexes(flippedPoints);\n\n  // Construct the hull polygon, removing possible duplicate endpoints.\n  var skipLeft = lowerIndexes[0] === upperIndexes[0],\n      skipRight = lowerIndexes[lowerIndexes.length - 1] === upperIndexes[upperIndexes.length - 1],\n      hull = [];\n\n  // Add upper hull in right-to-l order.\n  // Then add lower hull in left-to-right order.\n  for (i = upperIndexes.length - 1; i >= 0; --i) hull.push(points[sortedPoints[upperIndexes[i]][2]]);\n  for (i = +skipLeft; i < lowerIndexes.length - skipRight; ++i) hull.push(points[sortedPoints[lowerIndexes[i]][2]]);\n\n  return hull;\n}\n","export default function(polygon, point) {\n  var n = polygon.length,\n      p = polygon[n - 1],\n      x = point[0], y = point[1],\n      x0 = p[0], y0 = p[1],\n      x1, y1,\n      inside = false;\n\n  for (var i = 0; i < n; ++i) {\n    p = polygon[i], x1 = p[0], y1 = p[1];\n    if (((y1 > y) !== (y0 > y)) && (x < (x0 - x1) * (y - y1) / (y0 - y1) + x1)) inside = !inside;\n    x0 = x1, y0 = y1;\n  }\n\n  return inside;\n}\n","export default function(polygon) {\n  var i = -1,\n      n = polygon.length,\n      b = polygon[n - 1],\n      xa,\n      ya,\n      xb = b[0],\n      yb = b[1],\n      perimeter = 0;\n\n  while (++i < n) {\n    xa = xb;\n    ya = yb;\n    b = polygon[i];\n    xb = b[0];\n    yb = b[1];\n    xa -= xb;\n    ya -= yb;\n    perimeter += Math.hypot(xa, ya);\n  }\n\n  return perimeter;\n}\n","export default Math.random;\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomUniform(source) {\n  function randomUniform(min, max) {\n    min = min == null ? 0 : +min;\n    max = max == null ? 1 : +max;\n    if (arguments.length === 1) max = min, min = 0;\n    else max -= min;\n    return function() {\n      return source() * max + min;\n    };\n  }\n\n  randomUniform.source = sourceRandomUniform;\n\n  return randomUniform;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomInt(source) {\n  function randomInt(min, max) {\n    if (arguments.length < 2) max = min, min = 0;\n    min = Math.floor(min);\n    max = Math.floor(max) - min;\n    return function() {\n      return Math.floor(source() * max + min);\n    };\n  }\n\n  randomInt.source = sourceRandomInt;\n\n  return randomInt;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomNormal(source) {\n  function randomNormal(mu, sigma) {\n    var x, r;\n    mu = mu == null ? 0 : +mu;\n    sigma = sigma == null ? 1 : +sigma;\n    return function() {\n      var y;\n\n      // If available, use the second previously-generated uniform random.\n      if (x != null) y = x, x = null;\n\n      // Otherwise, generate a new x and y.\n      else do {\n        x = source() * 2 - 1;\n        y = source() * 2 - 1;\n        r = x * x + y * y;\n      } while (!r || r > 1);\n\n      return mu + sigma * y * Math.sqrt(-2 * Math.log(r) / r);\n    };\n  }\n\n  randomNormal.source = sourceRandomNormal;\n\n  return randomNormal;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\nimport normal from \"./normal.js\";\n\nexport default (function sourceRandomLogNormal(source) {\n  var N = normal.source(source);\n\n  function randomLogNormal() {\n    var randomNormal = N.apply(this, arguments);\n    return function() {\n      return Math.exp(randomNormal());\n    };\n  }\n\n  randomLogNormal.source = sourceRandomLogNormal;\n\n  return randomLogNormal;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomIrwinHall(source) {\n  function randomIrwinHall(n) {\n    if ((n = +n) <= 0) return () => 0;\n    return function() {\n      for (var sum = 0, i = n; i > 1; --i) sum += source();\n      return sum + i * source();\n    };\n  }\n\n  randomIrwinHall.source = sourceRandomIrwinHall;\n\n  return randomIrwinHall;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\nimport irwinHall from \"./irwinHall.js\";\n\nexport default (function sourceRandomBates(source) {\n  var I = irwinHall.source(source);\n\n  function randomBates(n) {\n    // use limiting distribution at n === 0\n    if ((n = +n) === 0) return source;\n    var randomIrwinHall = I(n);\n    return function() {\n      return randomIrwinHall() / n;\n    };\n  }\n\n  randomBates.source = sourceRandomBates;\n\n  return randomBates;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomExponential(source) {\n  function randomExponential(lambda) {\n    return function() {\n      return -Math.log1p(-source()) / lambda;\n    };\n  }\n\n  randomExponential.source = sourceRandomExponential;\n\n  return randomExponential;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomPareto(source) {\n  function randomPareto(alpha) {\n    if ((alpha = +alpha) < 0) throw new RangeError(\"invalid alpha\");\n    alpha = 1 / -alpha;\n    return function() {\n      return Math.pow(1 - source(), alpha);\n    };\n  }\n\n  randomPareto.source = sourceRandomPareto;\n\n  return randomPareto;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomBernoulli(source) {\n  function randomBernoulli(p) {\n    if ((p = +p) < 0 || p > 1) throw new RangeError(\"invalid p\");\n    return function() {\n      return Math.floor(source() + p);\n    };\n  }\n\n  randomBernoulli.source = sourceRandomBernoulli;\n\n  return randomBernoulli;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomGeometric(source) {\n  function randomGeometric(p) {\n    if ((p = +p) < 0 || p > 1) throw new RangeError(\"invalid p\");\n    if (p === 0) return () => Infinity;\n    if (p === 1) return () => 1;\n    p = Math.log1p(-p);\n    return function() {\n      return 1 + Math.floor(Math.log1p(-source()) / p);\n    };\n  }\n\n  randomGeometric.source = sourceRandomGeometric;\n\n  return randomGeometric;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\nimport normal from \"./normal.js\";\n\nexport default (function sourceRandomGamma(source) {\n  var randomNormal = normal.source(source)();\n\n  function randomGamma(k, theta) {\n    if ((k = +k) < 0) throw new RangeError(\"invalid k\");\n    // degenerate distribution if k === 0\n    if (k === 0) return () => 0;\n    theta = theta == null ? 1 : +theta;\n    // exponential distribution if k === 1\n    if (k === 1) return () => -Math.log1p(-source()) * theta;\n\n    var d = (k < 1 ? k + 1 : k) - 1 / 3,\n        c = 1 / (3 * Math.sqrt(d)),\n        multiplier = k < 1 ? () => Math.pow(source(), 1 / k) : () => 1;\n    return function() {\n      do {\n        do {\n          var x = randomNormal(),\n              v = 1 + c * x;\n        } while (v <= 0);\n        v *= v * v;\n        var u = 1 - source();\n      } while (u >= 1 - 0.0331 * x * x * x * x && Math.log(u) >= 0.5 * x * x + d * (1 - v + Math.log(v)));\n      return d * v * multiplier() * theta;\n    };\n  }\n\n  randomGamma.source = sourceRandomGamma;\n\n  return randomGamma;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\nimport gamma from \"./gamma.js\";\n\nexport default (function sourceRandomBeta(source) {\n  var G = gamma.source(source);\n\n  function randomBeta(alpha, beta) {\n    var X = G(alpha),\n        Y = G(beta);\n    return function() {\n      var x = X();\n      return x === 0 ? 0 : x / (x + Y());\n    };\n  }\n\n  randomBeta.source = sourceRandomBeta;\n\n  return randomBeta;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\nimport beta from \"./beta.js\";\nimport geometric from \"./geometric.js\";\n\nexport default (function sourceRandomBinomial(source) {\n  var G = geometric.source(source),\n      B = beta.source(source);\n\n  function randomBinomial(n, p) {\n    n = +n;\n    if ((p = +p) >= 1) return () => n;\n    if (p <= 0) return () => 0;\n    return function() {\n      var acc = 0, nn = n, pp = p;\n      while (nn * pp > 16 && nn * (1 - pp) > 16) {\n        var i = Math.floor((nn + 1) * pp),\n            y = B(i, nn - i + 1)();\n        if (y <= pp) {\n          acc += i;\n          nn -= i;\n          pp = (pp - y) / (1 - y);\n        } else {\n          nn = i - 1;\n          pp /= y;\n        }\n      }\n      var sign = pp < 0.5,\n          pFinal = sign ? pp : 1 - pp,\n          g = G(pFinal);\n      for (var s = g(), k = 0; s <= nn; ++k) s += g();\n      return acc + (sign ? k : nn - k);\n    };\n  }\n\n  randomBinomial.source = sourceRandomBinomial;\n\n  return randomBinomial;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomWeibull(source) {\n  function randomWeibull(k, a, b) {\n    var outerFunc;\n    if ((k = +k) === 0) {\n      outerFunc = x => -Math.log(x);\n    } else {\n      k = 1 / k;\n      outerFunc = x => Math.pow(x, k);\n    }\n    a = a == null ? 0 : +a;\n    b = b == null ? 1 : +b;\n    return function() {\n      return a + b * outerFunc(-Math.log1p(-source()));\n    };\n  }\n\n  randomWeibull.source = sourceRandomWeibull;\n\n  return randomWeibull;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomCauchy(source) {\n  function randomCauchy(a, b) {\n    a = a == null ? 0 : +a;\n    b = b == null ? 1 : +b;\n    return function() {\n      return a + b * Math.tan(Math.PI * source());\n    };\n  }\n\n  randomCauchy.source = sourceRandomCauchy;\n\n  return randomCauchy;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\n\nexport default (function sourceRandomLogistic(source) {\n  function randomLogistic(a, b) {\n    a = a == null ? 0 : +a;\n    b = b == null ? 1 : +b;\n    return function() {\n      var u = source();\n      return a + b * Math.log(u / (1 - u));\n    };\n  }\n\n  randomLogistic.source = sourceRandomLogistic;\n\n  return randomLogistic;\n})(defaultSource);\n","import defaultSource from \"./defaultSource.js\";\nimport binomial from \"./binomial.js\";\nimport gamma from \"./gamma.js\";\n\nexport default (function sourceRandomPoisson(source) {\n  var G = gamma.source(source),\n      B = binomial.source(source);\n\n  function randomPoisson(lambda) {\n    return function() {\n      var acc = 0, l = lambda;\n      while (l > 16) {\n        var n = Math.floor(0.875 * l),\n            t = G(n)();\n        if (t > l) return acc + B(n - 1, l / t)();\n        acc += n;\n        l -= t;\n      }\n      for (var s = -Math.log1p(-source()), k = 0; s <= l; ++k) s -= Math.log1p(-source());\n      return acc + k;\n    };\n  }\n\n  randomPoisson.source = sourceRandomPoisson;\n\n  return randomPoisson;\n})(defaultSource);\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst mul = 0x19660D;\nconst inc = 0x3C6EF35F;\nconst eps = 1 / 0x100000000;\n\nexport default function lcg(seed = Math.random()) {\n  let state = (0 <= seed && seed < 1 ? seed / eps : Math.abs(seed)) | 0;\n  return () => (state = mul * state + inc | 0, eps * (state >>> 0));\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {linearish} from \"./linear.js\";\nimport number from \"./number.js\";\n\nexport default function identity(domain) {\n  var unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : x;\n  }\n\n  scale.invert = scale;\n\n  scale.domain = scale.range = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), scale) : domain.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return identity(domain).unknown(unknown);\n  };\n\n  domain = arguments.length ? Array.from(domain, number) : [0, 1];\n\n  return linearish(scale);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format, formatSpecifier} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : x => Math.pow(base, x);\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), x => Math.log(x) / base);\n}\n\nfunction reflect(f) {\n  return (x, k) => -f(-x, k);\n}\n\nexport function loggish(transform) {\n  const scale = transform(transformLog, transformExp);\n  const domain = scale.domain;\n  let base = 10;\n  let logs;\n  let pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = count => {\n    const d = domain();\n    let u = d[0];\n    let v = d[d.length - 1];\n    const r = v < u;\n\n    if (r) ([u, v] = [v, u]);\n\n    let i = logs(u);\n    let j = logs(v);\n    let k;\n    let t;\n    const n = count == null ? 10 : +count;\n    let z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1; k < base; ++k) {\n          t = i < 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1; k >= 1; --k) {\n          t = i > 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = (count, specifier) => {\n    if (count == null) count = 10;\n    if (specifier == null) specifier = base === 10 ? \"s\" : \",\";\n    if (typeof specifier !== \"function\") {\n      if (!(base % 1) && (specifier = formatSpecifier(specifier)).precision == null) specifier.trim = true;\n      specifier = format(specifier);\n    }\n    if (count === Infinity) return specifier;\n    const k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return d => {\n      let i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = () => {\n    return domain(nice(domain(), {\n      floor: x => pows(Math.floor(logs(x))),\n      ceil: x => pows(Math.ceil(logs(x)))\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  const scale = loggish(transformer()).domain([1, 10]);\n  scale.copy = () => copy(scale, log()).base(scale.base());\n  initRange.apply(scale, arguments);\n  return scale;\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformSymlog(c) {\n  return function(x) {\n    return Math.sign(x) * Math.log1p(Math.abs(x / c));\n  };\n}\n\nfunction transformSymexp(c) {\n  return function(x) {\n    return Math.sign(x) * Math.expm1(Math.abs(x)) * c;\n  };\n}\n\nexport function symlogish(transform) {\n  var c = 1, scale = transform(transformSymlog(c), transformSymexp(c));\n\n  scale.constant = function(_) {\n    return arguments.length ? transform(transformSymlog(c = +_), transformSymexp(c)) : c;\n  };\n\n  return linearish(scale);\n}\n\nexport default function symlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, symlog()).constant(scale.constant());\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import continuous from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport number from \"./number.js\";\n\nfunction square(x) {\n  return Math.sign(x) * x * x;\n}\n\nfunction unsquare(x) {\n  return Math.sign(x) * Math.sqrt(Math.abs(x));\n}\n\nexport default function radial() {\n  var squared = continuous(),\n      range = [0, 1],\n      round = false,\n      unknown;\n\n  function scale(x) {\n    var y = unsquare(squared(x));\n    return isNaN(y) ? unknown : round ? Math.round(y) : y;\n  }\n\n  scale.invert = function(y) {\n    return squared.invert(square(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (squared.domain(_), scale) : squared.domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (squared.range((range = Array.from(_, number)).map(square)), scale) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return scale.range(_).round(true);\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, scale) : round;\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (squared.clamp(_), scale) : squared.clamp();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return radial(squared.domain(), range)\n        .round(round)\n        .clamp(squared.clamp())\n        .unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {ascending, bisect, quantileSorted as threshold} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [],\n      unknown;\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import {bisect} from \"d3-array\";\nimport {linearish} from \"./linear.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantize() {\n  var x0 = 0,\n      x1 = 1,\n      n = 1,\n      domain = [0.5],\n      range = [0, 1],\n      unknown;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  function rescale() {\n    var i = -1;\n    domain = new Array(n);\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n    return scale;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, x0 = +x0, x1 = +x1, rescale()) : [x0, x1];\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (n = (range = Array.from(_)).length - 1, rescale()) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN]\n        : i < 1 ? [x0, domain[0]]\n        : i >= n ? [domain[n - 1], x1]\n        : [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : scale;\n  };\n\n  scale.thresholds = function() {\n    return domain.slice();\n  };\n\n  scale.copy = function() {\n    return quantize()\n        .domain([x0, x1])\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(linearish(scale), arguments);\n}\n","import {bisect} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n","import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n","import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n","import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcTicks, utcTickInterval} from \"d3-time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {calendar} from \"./time.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function utcTime() {\n  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n","import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import {ascending, bisect, quantile} from \"d3-array\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\n\nexport default function sequentialQuantile() {\n  var domain = [],\n      interpolator = identity;\n\n  function scale(x) {\n    if (x != null && !isNaN(x = +x)) return interpolator((bisect(domain, x, 1) - 1) / (domain.length - 1));\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return scale;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  scale.range = function() {\n    return domain.map((d, i) => interpolator(i / (domain.length - 1)));\n  };\n\n  scale.quantiles = function(n) {\n    return Array.from({length: n + 1}, (_, i) => quantile(domain, i / n));\n  };\n\n  scale.copy = function() {\n    return sequentialQuantile(interpolator).domain(domain);\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n","import {interpolate, interpolateRound, piecewise} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {copy} from \"./sequential.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 0.5,\n      x2 = 1,\n      s = 1,\n      t0,\n      t1,\n      t2,\n      k10,\n      k21,\n      interpolator = identity,\n      transform,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (s * x < s * t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1, x2] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), t2 = transform(x2 = +x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1, scale) : [x0, x1, x2];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1, r2;\n      return arguments.length ? ([r0, r1, r2] = _, interpolator = piecewise(interpolate, [r0, r1, r2]), scale) : [interpolator(0), interpolator(0.5), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1;\n    return scale;\n  };\n}\n\nexport default function diverging() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, diverging());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingLog() {\n  var scale = loggish(transformer()).domain([0.1, 1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, divergingLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSqrt() {\n  return divergingPow.apply(null, arguments).exponent(0.5);\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import creator from \"./creator.js\";\nimport select from \"./select.js\";\n\nexport default function(name) {\n  return select(creator(name).call(document.documentElement));\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","import pointer from \"./pointer.js\";\nimport sourceEvent from \"./sourceEvent.js\";\n\nexport default function(events, node) {\n  if (events.target) { // i.e., instanceof Event, not TouchList or iterable\n    events = sourceEvent(events);\n    if (node === undefined) node = events.currentTarget;\n    events = events.touches || [events];\n  }\n  return Array.from(events, event => pointer(event, node));\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n","import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n","import constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\nimport {withPath} from \"./path.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null,\n      path = withPath(arc);\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1  r0, da1  da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle. If this\n        // intersection fails, its probably because the arc is too small, so\n        // disable the corner radius entirely.\n        if (da < pi) {\n          if (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10)) {\n            var ax = x01 - oc[0],\n                ay = y01 - oc[1],\n                bx = x11 - oc[0],\n                by = y11 - oc[1],\n                kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n            rc0 = min(rc, (r0 - lc) / (kc - 1));\n            rc1 = min(rc, (r1 - lc) / (kc + 1));\n          } else {\n            rc0 = rc1 = 0;\n          }\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sectors outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and its a circular sector?\n      // Or perhaps its an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sectors inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function(d) {\n  return d;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = (data = array(data)).length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n","import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport line from \"./line.js\";\n\nexport function lineRadial(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nexport default function() {\n  return lineRadial(line().curve(curveRadialLinear));\n}\n","import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport area from \"./area.js\";\nimport {lineRadial} from \"./lineRadial.js\";\n\nexport default function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n}\n","export default function(x, y) {\n  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];\n}\n","import pointRadial from \"../pointRadial.js\";\n\nclass Bump {\n  constructor(context, x) {\n    this._context = context;\n    this._x = x;\n  }\n  areaStart() {\n    this._line = 0;\n  }\n  areaEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  }\n  point(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: {\n        this._point = 1;\n        if (this._line) this._context.lineTo(x, y);\n        else this._context.moveTo(x, y);\n        break;\n      }\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._x) this._context.bezierCurveTo(this._x0 = (this._x0 + x) / 2, this._y0, this._x0, y, x, y);\n        else this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + y) / 2, x, this._y0, x, y);\n        break;\n      }\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nclass BumpRadial {\n  constructor(context) {\n    this._context = context;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {}\n  point(x, y) {\n    x = +x, y = +y;\n    if (this._point === 0) {\n      this._point = 1;\n    } else {\n      const p0 = pointRadial(this._x0, this._y0);\n      const p1 = pointRadial(this._x0, this._y0 = (this._y0 + y) / 2);\n      const p2 = pointRadial(x, this._y0);\n      const p3 = pointRadial(x, y);\n      this._context.moveTo(...p0);\n      this._context.bezierCurveTo(...p1, ...p2, ...p3);\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nexport function bumpX(context) {\n  return new Bump(context, true);\n}\n\nexport function bumpY(context) {\n  return new Bump(context, false);\n}\n\nexport function bumpRadial(context) {\n  return new BumpRadial(context);\n}\n","import {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {bumpX, bumpY, bumpRadial} from \"./curve/bump.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nexport function link(curve) {\n  let source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null,\n      output = null,\n      path = withPath(link);\n\n  function link() {\n    let buffer;\n    const argv = slice.call(arguments);\n    const s = source.apply(this, argv);\n    const t = target.apply(this, argv);\n    if (context == null) output = curve(buffer = path());\n    output.lineStart();\n    argv[0] = s, output.point(+x.apply(this, argv), +y.apply(this, argv));\n    argv[0] = t, output.point(+x.apply(this, argv), +y.apply(this, argv));\n    output.lineEnd();\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), link) : context;\n  };\n\n  return link;\n}\n\nexport function linkHorizontal() {\n  return link(bumpX);\n}\n\nexport function linkVertical() {\n  return link(bumpY);\n}\n\nexport function linkRadial() {\n  const l = link(bumpRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","import {min, sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size + min(size / 28, 0.75)) * 0.59436;\n    const t = r / 2;\n    const u = t * sqrt3;\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n    context.moveTo(-u, -t);\n    context.lineTo(u, t);\n    context.moveTo(-u, t);\n    context.lineTo(u, -t);\n  }\n};\n","import {pi, sqrt, tau} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size) * 0.62625;\n    context.moveTo(0, -r);\n    context.lineTo(r, 0);\n    context.lineTo(0, r);\n    context.lineTo(-r, 0);\n    context.closePath();\n  }\n};\n","import {min, sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size - min(size / 7, 2)) * 0.87559;\n    context.moveTo(-r, 0);\n    context.lineTo(r, 0);\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const w = sqrt(size);\n    const x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size) * 0.4431;\n    context.moveTo(r, r);\n    context.lineTo(r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, r);\n    context.closePath();\n  }\n};\n","import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const s = sqrt(size) * 0.6824;\n    const t = s  / 2;\n    const u = (s * sqrt3) / 2; // cos(Math.PI / 6)\n    context.moveTo(0, -s);\n    context.lineTo(u, t);\n    context.lineTo(-u, t);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","import {min, sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size - min(size / 6, 1.7)) * 0.6189;\n    context.moveTo(-r, -r);\n    context.lineTo(r, r);\n    context.moveTo(-r, r);\n    context.lineTo(r, -r);\n  }\n};\n","import constant from \"./constant.js\";\nimport {withPath} from \"./path.js\";\nimport asterisk from \"./symbol/asterisk.js\";\nimport circle from \"./symbol/circle.js\";\nimport cross from \"./symbol/cross.js\";\nimport diamond from \"./symbol/diamond.js\";\nimport diamond2 from \"./symbol/diamond2.js\";\nimport plus from \"./symbol/plus.js\";\nimport square from \"./symbol/square.js\";\nimport square2 from \"./symbol/square2.js\";\nimport star from \"./symbol/star.js\";\nimport triangle from \"./symbol/triangle.js\";\nimport triangle2 from \"./symbol/triangle2.js\";\nimport wye from \"./symbol/wye.js\";\nimport times from \"./symbol/times.js\";\n\n// These symbols are designed to be filled.\nexport const symbolsFill = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\n// These symbols are designed to be stroked (with a width of 1.5px and round caps).\nexport const symbolsStroke = [\n  circle,\n  plus,\n  times,\n  triangle2,\n  asterisk,\n  square2,\n  diamond2\n];\n\nexport default function Symbol(type, size) {\n  let context = null,\n      path = withPath(symbol);\n\n  type = typeof type === \"function\" ? type : constant(type || circle);\n  size = typeof size === \"function\" ? size : constant(size === undefined ? 64 : +size);\n\n  function symbol() {\n    let buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n","import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n","import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nfunction stackSeries(key) {\n  const series = [];\n  series.key = key;\n  return series;\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var sz = Array.from(keys.apply(this, arguments), stackSeries),\n        i, n = sz.length, j = -1,\n        oz;\n\n    for (const d of data) {\n      for (i = 0, ++j; i < n; ++i) {\n        (sz[i][j] = [0, +value(d, sz[i].key, j, data)]).data = d;\n      }\n    }\n\n    for (i = 0, oz = array(order(sz)); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {\n    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;\n    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;\n  }\n  none(series, order);\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) > 0) {\n        d[0] = yp, d[1] = yp += dy;\n      } else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      } else {\n        d[0] = 0, d[1] = dy;\n      }\n    }\n  }\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0)) return;\n  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {\n    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;\n    s0[j][1] += s0[j][0] = -y / 2;\n  }\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series, order) {\n  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;\n  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {\n    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {\n      var si = series[order[i]],\n          sij0 = si[j][1] || 0,\n          sij1 = si[j - 1][1] || 0,\n          s3 = (sij0 - sij1) / 2;\n      for (var k = 0; k < i; ++k) {\n        var sk = series[order[k]],\n            skj0 = sk[j][1] || 0,\n            skj1 = sk[j - 1][1] || 0;\n        s3 += skj0 - skj1;\n      }\n      s1 += sij0, s2 += s3 * sij0;\n    }\n    s0[j - 1][1] += s0[j - 1][0] = y;\n    if (s1) y -= s2 / s1;\n  }\n  s0[j - 1][1] += s0[j - 1][0] = y;\n  none(series, order);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var peaks = series.map(peak);\n  return none(series).sort(function(a, b) { return peaks[a] - peaks[b]; });\n}\n\nfunction peak(series) {\n  var i = -1, j = 0, n = series.length, vi, vj = -Infinity;\n  while (++i < n) if ((vi = +series[i][1]) > vj) vj = vi, j = i;\n  return j;\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  var sums = series.map(sum);\n  return none(series).sort(function(a, b) { return sums[a] - sums[b]; });\n}\n\nexport function sum(series) {\n  var s = 0, i = -1, n = series.length, v;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(series) {\n  return ascending(series).reverse();\n}\n","import appearance from \"./appearance.js\";\nimport {sum} from \"./ascending.js\";\n\nexport default function(series) {\n  var n = series.length,\n      i,\n      j,\n      sums = series.map(sum),\n      order = appearance(series),\n      top = 0,\n      bottom = 0,\n      tops = [],\n      bottoms = [];\n\n  for (i = 0; i < n; ++i) {\n    j = order[i];\n    if (top < bottom) {\n      top += sums[j];\n      tops.push(j);\n    } else {\n      bottom += sums[j];\n      bottoms.push(j);\n    }\n  }\n\n  return bottoms.reverse().concat(tops);\n}\n","import none from \"./none.js\";\n\nexport default function(series) {\n  return none(series).reverse();\n}\n","import {utcFormat} from \"./defaultLocale.js\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat.js\";\nimport {utcParse} from \"./defaultLocale.js\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import {Timer, now} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  t._restart = t.restart;\n  t.restart = function(callback, delay, time) {\n    delay = +delay, time = time == null ? now() : +time;\n    t._restart(function tick(elapsed) {\n      elapsed += total;\n      t._restart(tick, total += delay, time);\n      callback(elapsed);\n    }, delay, time);\n  }\n  t.restart(callback, delay, time);\n  return t;\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(791);\n"],"names":["webpackQueues","webpackExports","webpackError","resolveQueue","___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","process","hr","uptime","Date","getTime","call","__generator","thisArg","body","f","y","t","g","_","label","sent","trys","ops","next","verb","Symbol","iterator","n","v","op","TypeError","done","value","pop","e","step","Node","key","left","right","DEFAULT_COMPARE","a","b","splay","comparator","N","l","r","cmp","insert","node","split","printRow","root","prefix","isTail","out","printNode","indent","Tree","_root","_size","_comparator","prototype","add","remove","_remove","x","findStatic","current","compare","find","contains","forEach","visitor","ctx","Q","range","low","high","fn","keys","_a","values","min","minNode","max","maxNode","at","index","d","successor","prev","predecessor","clear","toList","head","p","load","presort","size","sort","loadRecursive","mergedList","l1","l2","p1","p2","mergeLists","createList","sortedListToBST","isEmpty","Object","defineProperty","get","enumerable","configurable","String","update","newKey","newData","merge","start","end","middle","Math","floor","pivot","j","tmp","isInBbox","bbox","point","ll","ur","getBboxOverlap","b1","b2","lowerX","upperX","epsilon$1","Number","EPSILON","pow","EPSILON_SQ","ab","CoordRounder","constructor","tree","round","coord","prevNode","nextNode","rounder","reset","xRounder","yRounder","epsilon","splitter","resulterrbound","sum","elen","flen","h","Qnew","hh","bvirt","enow","fnow","eindex","findex","hindex","vec","Float64Array","B","C1","C2","D","u","orient2d","ax","ay","bx","by","cx","cy","detleft","detright","det","detsum","abs","acxtail","acytail","bcxtail","bcytail","c","ahi","alo","bhi","blo","_i","_j","_0","s1","s0","t1","t0","u3","acx","bcx","acy","bcy","estimate","errbound","C1len","C2len","Dlen","orient2dadapt","crossProduct","dotProduct","compareVectorAngles","basePt","endPt1","endPt2","res","sqrt","sineOfAngle","pShared","pBase","pAngle","vBase","vAngle","cosineOfAngle","horizontalIntersection","pt","verticalIntersection","SweepEvent","ptCmp","comparePoints","link","isLeft","Segment","segment","aPt","bPt","events","other","Error","otherEvents","iMax","evt","checkForConsuming","numEvents","evt1","consumedBy","evt2","otherSE","consume","getAvailableLinkedEvents","ringOut","isInResult","getLeftmostComparator","baseEvent","cache","Map","fillCache","linkedEvent","nextEvent","set","sine","cosine","has","asine","acosine","bsine","bcosine","segmentId","alx","leftSE","blx","arx","rightSE","brx","aly","bly","ary","bry","aCmpBLeft","comparePoint","bCmpARight","bCmpALeft","aCmpBRight","rings","windings","fromRing","pt1","pt2","ring","leftPt","rightPt","winding","cmpPts","replaceRightSE","newRightSE","y1","y2","vector","isAnEndpoint","lPt","rPt","yDist","xFromYDist","xDist","yFromXDist","getIntersection","tBbox","oBbox","bboxOverlap","tlp","trp","olp","orp","touchesOtherLSE","touchesThisLSE","touchesOtherRSE","touchesThisRSE","v1","v2","kross","ve","d1","d2","intersection$1","newEvents","alreadyLinked","newLeftSE","oldRightSE","newSeg","slice","swapEvents","tmpEvt","consumer","consumee","indexOf","prevInResult","_prevInResult","beforeState","_beforeState","seg","afterState","multiPolys","_afterState","ringsAfter","windingsAfter","mpsAfter","polysAfter","polysExclude","poly","isExterior","splice","mp","multiPoly","_isInResult","mpsBefore","operation","type","noBefores","noAfters","least","most","numMultiPolys","diff","isJustSubject","mps","isSubject","RingIn","geomRing","Array","isArray","segments","firstPoint","prevPoint","getSweepEvents","sweepEvents","PolyIn","geomPoly","exteriorRing","interiorRings","ringSweepEvents","jMax","MultiPolyIn","geom","ex","polys","POSITIVE_INFINITY","NEGATIVE_INFINITY","polySweepEvents","RingOut","factory","allSegments","ringsOut","prevEvent","event","startingPoint","intersectionLEs","availableLEs","firstPt","lastPt","indexLE","intersectionLE","ringEvents","unshift","reverse","getGeom","prevPt","points","nextPt","shift","isExteriorRing","iStart","iEnd","orderedPoints","_isExteriorRing","enclosing","enclosingRing","_enclosingRing","_calcEnclosingRing","leftMostEvt","prevSeg","prevPrevSeg","PolyOut","addInterior","ringGeom","MultiPolyOut","_composePolys","polyGeom","SweepLine","queue","arguments","nextSeg","prevMySplitter","prevInter","newEventsFromSplit","_splitSafely","nextMySplitter","nextInter","mySplitter","inter","POLYGON_CLIPPING_MAX_QUEUE_SIZE","env","POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS","run","moreGeoms","multipolys","subject","mpA","sweepLine","prevQueueSize","union","_len","_key","intersection","_len2","_key2","xor","_len3","_key3","difference","subjectGeom","_len4","clippingGeoms","_key4","window","vendors","suffix","raf","caf","last","frameDuration","callback","_now","setTimeout","cp","cancelled","handle","cancel","apply","polyfill","object","requestAnimationFrame","cancelAnimationFrame","color_string","ok","alpha","charAt","substr","replace","toLowerCase","simple_colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","feldspar","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslateblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","violetred","wheat","white","whitesmoke","yellow","yellowgreen","color_defs","re","example","bits","parseInt","parseFloat","processor","exec","channels","isNaN","toRGB","toRGBA","toHex","getHelpXML","examples","sc","xml","document","createElement","setAttribute","list_item","list_color","RGBColor","example_div","style","cssText","appendChild","createTextNode","list_item_value","options","styleTagTransform","setAttributes","domAPI","insertStyleElement","locals","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","memo","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","getTarget","element","attributes","styleElement","nonce","parentNode","removeChild","removeStyleElement","styleSheet","firstChild","Typewriter","textboxId","speed","cursorChar","textbox","getElementById","cursorVisible","message","onComplete","resolve","setInterval","updateText","typed","substring","scrollTop","scrollHeight","typeMessage","newMessage","resolveCallback","typeCharacter","OzAssistant","conditionFn","typewriter","schedule","commandRegistry","previewRegistry","timers","intervals","paused","stopped","scheduledItems","confirmationStats","approved","denied","confirmationLog","scriptStartTime","init","addPoint","jsonUrl","response","fetch","json","sequential","items","error","console","scheduleItem","time","repeat","interval","infiniteTimer","repeatIndefinitely","log","runSequentialScript","clearTimeout","clearInterval","stop","pause","sched","timeoutId","elapsed","startTime","remaining","delay","resume","newTimeoutId","waitAndType","waitAndExecute","sleep","ms","Promise","checkResume","stepDelay","intervalId","command","maxRuntime","maxTimer","warningTab","GlobalEventBus","dispatchEvent","CustomEvent","detail","commandName","args","requiresConfirmation","explanation","previewable","fromUser","async","triggeredAt","commandFn","warn","confirmedAt","previewedAt","postPreviewDelay","proceedToExecute","confirmExecution","triggeredSinceStart","confirmedSinceStart","previewedSinceStart","source","table","getConfirmationStats","entries","entry","triggeredMs","confirmedMs","previewedMs","dialog","yesBtn","noBtn","previewBtn","textContent","classList","display","offsetWidth","cleanup","removeEventListener","onYes","onNo","onPreview","addEventListener","totalApproved","filter","totalDenied","triggerCommand","color","MAX_ITERATIONS","calcMeanCentroid","dataSet","features","mean","getRandomCentroids","dataset","numSamples","centroidsIndex","random","centroids","centroid","compareCentroids","shouldStop","oldCentroids","iterations","sameCount","getDistanceSQ","diffs","reduce","getLabels","labels","closestCentroid","closestCentroidIndex","prevDistance","distance","getPointsMean","pointList","totalPoints","means","val","recalculateCentroids","newCentroid","newCentroidList","centroidGroup","kmeans","useNaiveSharding","weights","scale","weightedDataset","amount","ceil","createWeightedDataset","getRandomCentroidsNaiveSharding","clusters","lab","cluster","fill","converged","adjustedRandIndex","labels1","labels2","contingency","aCounts","bCounts","comb2","aSum","bSum","expectedIndex","kmeansStability","runs","clusterings","totalARI","comparisons","stability","Chart","environment","chartWidth","chartHeight","showLineChart","chartSvg","barChartSvg","lineChartSvg","legend","categories","colorScale","variance","peak","std","avg","lineData","setInstance","append","attr","domain","legendItem","text","toUpperCase","initEventHandlers","on","selectedPolygonIdx","selectedPolygon","updateLineChart","selectAll","getTimeLineData","xScale","padding","yScale","lines","particles","crossings","numLinePolygonIntersections","voronoiPoints","nice","stack","tickValues","tickSizeOuter","y0","timeValue","complexity_limit","updateBarChart","self","editMode","polygons","editPolygons","polygon","num_particles","particlePositions","numCrossings","category","nLIntersections","countLineIntersections","nLCrossingPoints","nParticles","nConflicts","countParticleSeparationProblems","enter","bandwidth","highlightBar","highlightVoronoi","highlightPolygon","removeHighlightBar","removeHighlightVoronoi","removeHighlightPolygon","stopPropagation","render","calculateVariance","calculatePeak","calculateStandardDeviation","calculateAverage","meanBars","total","toFixed","clusterStability","Interface","tabcontainer","tabComponents","world","chart","animationInterval","EventTarget","querySelectorAll","container","tabs","TabComponent","activeId","getAttribute","controls","inputBox","numLines","generateRandomLines","dynamicLines","pathFinding","resetSlider","renderAll","dist","inputBox4","jitterLines","generateRandomParticles","numberOfParticles","inputBox3","inputBox2","numPoints","generateRandomPoints","generateRandomSpeeds","clusterPoints","isPlaying","animatePoints","saveAsSVG","saveAsJSON","loadFromJSON","isCtrlPressed","pathFinder","activeTab","innerText","sliderChanged","file","files","reader","FileReader","onload","jsonData","parse","width","dimension","height","initWorld","initGrid","gridSize","clippingPolygon","editVertices","polygonVertices","editPolygonIndices","polygonIndices","numLineParticles","selectedCells","Set","blockedCells","numVoronoiPoints","mode","alert","readAsText","updateVisibility","updateValueSettings","updateParticleOffset","initVisibility","initValueSettings","initChart","updateParticles","timeOffset","offsetValue","offsetParticles","filename","loadJSON","click","vx","vy","voronoiSpeeds","checked","showCrossings","showIntersections","showVoronoiPoints","showLines","showDelaunay","showParticles","showPolygons","showWeather","showWindField","showDirectLines","length_threshold","distance_threshold","vertex_line_threshold","onTabChange","contents","tab","activateTab","syncWithExternalState","selectedTab","targetId","targetContent","disabled","assistantTab","highlightTabIfNeeded","externalState","tabId","isInWarningList","includes","isActive","World","svgCanvas","svg","zoom","tooltip","contextMenu","svgWidth","svgHeight","draggingPoint","draggingPolygonPoint","selectedPoint","hoveredGridCell","translateExtent","scaleExtent","transform","hideContextMenu","mouseX","mouseY","cell","getNearestCell","drawGridCell","isDragging","isRightDragging","delete","button","mouseXPos","mouseYPos","preventDefault","showContextMenu","pageX","pageY","zoomToPoint","viewBox","translateX","translateY","transition","duration","translate","zoomToArea","drawEmptySVG","drawDelaunayGraph","triangles","from","trianglePolygons","findIndex","drawVoronoi","voronoiVertices","drawEditablePolygons","drawLines","polylinePoints","drawParticles","drawClippingPolygon","visibleCells","gridCells","cellSize","drawHeatMap","maxDensity","heatmapGrid","colorScaleHM","drawGraphLineCrossings","drawWeatherCells","drawLineCrossings","drawDelaunayTriangulation","delaunay","halfedges","edges","links","drawIntersectionPoints","intersectionPoints","drawProblematicSegments","problemSegments","drawProblematicCrossings","problemLinePolygonCrossings","drawProblematicVertices","problemVertices","drawProblematicParticles","problem_particles","problems","flatMap","row","drawWindField","wind_loaded","select","defs","empty","wind_vectors","removePoint","clustering","targetPoints","timestamp","transitionPoints","transitionDuration","easedT","getContextMenuItems","context","condition","action","switchEditMode","saveAsPNG","menu","svgData","XMLSerializer","serializeToString","blob","Blob","url","URL","createObjectURL","href","download","revokeObjectURL","vbWidth","vbHeight","canvas","getContext","fromString","pngLink","toDataURL","calculateParticleSeparationProblems","Astar","Thetastar","Environment","NaN","wind_type","initRandom","setDimension","generateRandom","generateRandomConvexPolygon","cellIndex","xs","ys","xVec","yVec","minX","maxX","minY","maxY","lastTop","lastBottom","lastLeft","lastRight","vectors","atan2","minPX","maxPX","minPY","maxPY","scaleX","scaleY","px","py","sx","sy","half","alternate","x1","x2","newlines","line","lineStart","lineEnd","random_sign","num","numParticles","particle_speed","startTimes","generateRandomStartTimes","randomTime","randomIndex","particle","track","pos","direction","offset","minTimeSeparation","coordinates","attempts","candidate","every","mesh","blockedIndices","planner","findPaths","newLines","path","search","computeVoronoi","voronoi","clippedPolygons","cellPolygon","flat","vertexSet","indices","getEditVertexIndex","vertices","tolerance","updateEditPolygons","vertex","gridX","gridY","updateHeatMap","includeOffset","part_pos","dt","travelDist","positions","problemPositions","timeLine","intersectionCount","polygonEdges","polyline","edge","conflicts","problem","generateWindSwirlData","dx","dy","angle","PI","exp","cos","sin","generateWindWavyData","generateWindNaturalData","vortexStrength","baseFlowAngle","vortices","xi","yi","distSq","strength","generateWindUniformField","getWindStats","sumVx","sumVy","sumSpeed","speeds","directions","avgVx","avgVy","avgSpeed","avgDirectionRad","meanSpeed","varianceSpeed","acc","stdSpeed","sumSin","sumCos","meanSin","meanCos","R","stdDirectionDeg","avgDirectionDeg","update_wind","wind","rows","cols","noise","loadWindFieldFromFile","then","status","catch","err","voronoiPolygons","lineCrossings","jsonBlob","toISOString","highlightUtils","renderUtils","assistant","initTime","updateTimer","hrs","mins","secs","padStart","BinaryHeap","weight","visited","closed","parent","isWall","Graph","nodes","grids","findNeighbors","neighbors","isStumble","neighbor","lineOfSightGrid","node1","node2","x0","isBlocked","isInteger","x_inc","y_inc","Infinity","heuristic","heuristicName","graph","openHeap","startGrid","endGrid","startNode","endNode","currentNode","pathTo","resetNodes","findNeighborParent","gScore","euclidean","beenVisited","sortElement","resetNode","curr","scoreFunction","bubbleUp","sinkDown","parentN","elemScore","child2N","child1N","child1Score","child2Score","swap","child1","child2","super","envState","defaultEnv","loadEnvSettings","statusText","assign","HighlightUtils","instances","name","instance","getInstance","RenderUtils","easeInOutCubic","getTrackLocationAtDistance","traveled","segmentLength","getLineSegmentLength","ratio","p3","p4","x3","y3","x4","y4","denom","isPointInsidePolygon","inside","calculateAngleBetweenLineSegments","line1","line2","getVector","magnitude1","magnitude2","cosineTheta","acos","calculateLineCrossings","doLinesIntersect","q1","q2","cross","d3","d4","isOnSegment","pointToLineDistance","lengthSquared","nearestX","nearestY","getUnitDirectionVector","magnitude","getProblematicLineCrossings","threshold","problematicPoints","segmentStart","segmentEnd","calculateIntersections","minLength","allIntersections","problematicSegments","lineIntersections","intersectionStart","nextIntersection","getProblematicVertices","lineVertices","Perlin","perm","Uint8Array","grad3","dot","fade","lerp","seed","q","X","Y","xf","yf","aa","ba","bb","Simplex","xin","yin","F2","G2","i1","j1","n0","n1","n2","s","ii","jj","gi0","gi1","gi2","t2","setPrototypeOf","__proto__","hasOwnProperty","create","o","lArcFlag","sweepFlag","rX","rY","xRot","m","O","T","cX","cY","phi1","phi2","relative","SMOOTH_CURVE_TO","CURVE_TO","SMOOTH_QUAD_TO","QUAD_TO","MOVE_TO","CLOSE_PATH","HORIZ_LINE_TO","LINE_TO","VERT_LINE_TO","E","A","C","M","I","S","L","ROUND","TO_ABS","TO_REL","NORMALIZE_HVZ","ARC","NORMALIZE_ST","QT_TO_C","INFO","SANITIZE","LINE_COMMANDS","MATRIX","ROTATE","TRANSLATE","SCALE","SKEW_X","atan","SKEW_Y","X_AXIS_SYMMETRY","Y_AXIS_SYMMETRY","A_TO_C","H","ANNOTATE_ARCS","CLONE","CALCULATE_BOUNDS","DRAWING_COMMANDS","w","U","toAbs","toRel","normalizeHVZ","normalizeST","qtToC","aToC","sanitize","rotate","matrix","skewX","skewY","xSymmetry","ySymmetry","annotateArcs","charCodeAt","curNumber","curCommandType","curCommandRelative","canParseCommandOrComma","curNumberHasExp","curNumberHasExpDigits","curNumberHasDecimal","curArgs","finish","SyntaxError","getPrototypeOf","commands","encode","getBounds","_typeof","mulTable","shgTable","processCanvasRGBA","topX","topY","radius","imageData","getImageData","getImageDataFromCanvas","stackEnd","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","BlurStack","stackIn","stackOut","yw","mulSum","shgSum","pr","pg","pb","pa","rInSum","gInSum","bInSum","aInSum","rOutSum","gOutSum","bOutSum","aOutSum","rSum","gSum","_i2","rbs","paInitial","_a2","_p","_stackOut","_r","_g","_b","_x","_pr","_pg","_pb","_pa","_rOutSum","_gOutSum","_bOutSum","_aOutSum","_rSum","_gSum","_bSum","_aSum","_i3","yp","_gInSum","_bInSum","_aInSum","_rInSum","_i4","_rbs","_y","_p2","processImageDataRGBA","putImageData","Constructor","_classCallCheck","compressSpaces","str","toNumbers","matches","match","allUppercase","parseExternalUrl","urlMatch","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","findSelectorMatch","selector","regex","PSEUDO_ZERO","vectorMagnitude","vectorsRatio","vectorsAngle","CB1","CB2","CB3","CB4","QB1","QB2","QB3","Property","separator","getString","trim","hasValue","zeroIsValue","isString","regexp","test","isUrlDefinition","isPixels","asString","endsWith","setValue","getValue","def","getNumber","getColor","isNormalizedColor","startsWith","rgbParts","isFloat","normalizeColor","getDpi","getRem","rootEmSize","getEm","emSize","getUnits","getPixels","axisOrIsFontSize","processPercent","axis","isFontSize","viewPort","screen","computeSize","getMilliseconds","getRadians","getDefinition","definitions","getFillStyleDefinition","opacity","createGradient","createPattern","getHrefAttribute","patternTransform","getTextBaseline","textBaselineMapping","addOpacity","len","commas","ViewPort","viewPorts","setCurrent","removeCurrent","getRoot","getDefault","getCurrent","DEFAULT_VIEWPORT_WIDTH","DEFAULT_VIEWPORT_HEIGHT","Point","defaultValue","parseScale","parsePath","pathPoints","angleTo","applyTransform","xp","Mouse","isWorking","working","onClick","onMouseMove","onclick","onmousemove","hasEvents","runEvents","eventElements","cursor","param","checkPath","isPointInPath","checkBoundingBox","boundingBox","isPointInBox","mapXY","offsetLeft","offsetTop","offsetParent","scrollX","scrollY","clientX","clientY","eventTarget","bind","defaultWindow","defaultFetch$1","Screen","wait","checker","waits","ready","readyPromise","isReady","isReadyLock","resolveReady","setDefaults","strokeStyle","lineCap","lineJoin","miterLimit","setViewBox","aspectRatio","desiredWidth","desiredHeight","refX","refY","clip","clipX","clipY","cleanAspectRatio","aspectRatioAlign","aspectRatioMeetOrSlice","align","meetOrSlice","scaleMin","scaleMax","finalDesiredWidth","finalDesiredHeight","refXProp","refYProp","hasRefs","scaledClipX","scaledClipY","beginPath","moveTo","lineTo","closePath","isMeetMinY","isSliceMaxY","isMeetMinX","isSliceMaxX","enableRedraw","ignoreMouse","ignoreAnimation","ignoreDimensions","ignoreClear","forceRedraw","scaleWidth","scaleHeight","offsetX","offsetY","mouse","FRAMERATE","delta","tick","shouldUpdate","animations","animation","isFirstRender","widthStyle","getStyle","heightStyle","cWidth","clientWidth","cHeight","clientHeight","xRatio","yRatio","transformStyle","clearRect","defaultFetch","MAX_VIRTUAL_PIXELS","DefaultDOMParser","DOMParser","Parser","resource","parseFromString","parser","checkDocument","parserError","getElementsByTagName","Matrix","originX","originY","tx","ty","unapply","applyToPoint","transformOrigin","numbers","toMatrixValue","Skew","skew","Transform","fromElement","transformOriginXProperty","transformOriginYProperty","transforms","transform1","parseTransform","TransformType","transformTypes","rad","scaleSize","Element","createIfNotExists","skipAncestors","styles","parentStyle","save","mask","applyEffects","setContext","renderChildren","clearContext","restore","clipPathStyleProp","children","child","addChild","childNode","ignoreChildTypes","matchesSelector","ref","styleClasses","some","styleClass","addStylesFromStyleDefinition","stylesSpecificity","specificity","styleProp","existingSpecificity","removeStyles","ignoreStyles","toRestore","restoreStyles","isFirstChild","captureTextNodes","animationFrozen","animationFrozenValue","nodeType","attribute","nodeName","childNodes","textNode","getText","UnknownElement","wrapFontFamily","fontFamily","trimmed","prepareFontStyle","fontStyle","targetFontStyle","prepareFontWeight","fontWeight","targetFontWeight","Font","inherit","fontVariant","fontSize","parts","part","variants","inheritFont","BoundingBox","addX","addY","addBoundingBox","sumCubic","p0","bezierCurveAdd","forX","b2ac","addBezierCurve","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","addQuadraticCurve","cp1x","cp1y","cp2x","cp2y","RenderedElement","calculateOpacity","opacityStyle","fromMeasure","fillStyleProp","fillOpacityStyleProp","strokeStyleProp","strokeOpacityProp","fillStyle","strokeWidthStyleProp","newLineWidth","lineWidth","strokeLinecapStyleProp","strokeLinejoinStyleProp","strokeMiterlimitProp","strokeDasharrayStyleProp","strokeDashoffsetProp","gaps","setLineDash","webkitLineDash","mozDash","lineDashOffset","webkitLineDashOffset","mozDashOffset","modifiedEmSizeStack","font","fontStyleProp","fontStyleStyleProp","fontVariantStyleProp","fontWeightStyleProp","fontSizeStyleProp","fontFamilyStyleProp","globalAlpha","popEmSize","TextElement","textBaseline","initializeCoordinates","leafTexts","textChunkStart","getBoundingBox","getTElementBoundingBox","adjustChildCoordinatesRecursive","childBoundingBox","getChildBoundingBox","getFontSize","inheritFontSize","measureText","getGlyph","char","glyph","isArabic","prevChar","nextChar","arabicForm","arabicGlyphs","glyphs","missingGlyph","getTextFromNode","lastIndex","renderTElementChildren","renderChild","renderText","customFont","unitsPerEm","fontFace","ctxFont","isRTL","lw","horizAdvX","fillText","strokeText","applyAnchoring","firstElement","textAnchor","adjustChildCoordinatesRecursiveCore","textParent","adjustChildCoordinates","xAttr","yAttr","dxAttr","dyAttr","Boolean","getInheritedAttribute","i2","i3","measureCache","measure","measureTargetText","targetText","parentAttr","TSpanElement","TextNode","PathParser","previousCommand","control","angles","isEnd","getPoint","xProp","yProp","makeAbsolute","getAsControlPoint","getAsCurrentPoint","getReflectedControlPoint","ox","oy","addMarker","priorTo","addMarkerAngle","getMarkerPoints","getMarkerAngles","PathElement","pathParser","pathM","pathL","pathH","pathV","pathC","pathS","pathQ","pathT","pathA","pathZ","_ctx","getMarkers","markers","fillRuleStyleProp","setTransform","stroke","markersLastIndex","markerStartStyleProp","markerMidStyleProp","markerEndStyleProp","marker","controlPoint","currentPoint","bezierCurveTo","quadraticCurveTo","xAxisRotation","currp","cpp","centp","a1","ad","dir","ah","halfWay","arc","SVGElement","getComputedStyle","getPropertyValue","fontSizeProp","refXAttr","refYAttr","viewBoxAttr","resize","preserveAspectRatio","widthAttr","heightAttr","styleAttr","originWidth","originHeight","preserveAspectRatioAttr","RectElement","rxAttr","ryAttr","rx","ry","KAPPA","PolylineElement","GElement","GradientElement","getGradientUnits","parentOpacityProp","stopsContainer","inheritStopContainer","stops","gradient","getGradient","addParentOpacity","addColorStop","rootView","rect","group","patternSvg","patternCanvas","createCanvas","patternCtx","attributesToInherit","attributeToInherit","AnimateElement","getProperty","attributeType","attributeName","calcValue","initialUnits","progress","to","getProgress","newValue","prop","initialValue","maxDuration","frozen","removed","updated","begin","typeAttr","lb","ub","valuesAttr","FontFaceElement","ascent","descent","GlyphElement","unicode","MissingGlyphElement","dataUriRegex","SVGFontLoader","fonts","canvg","fontNode","loaded","StyleElement","_1","cssParts","cssClasses","cssProps","cssClass","props","cssProp","currentSelector","getSelectorSpecificity","src","imGet","img","_height","rgba","imSet","m1","m2","m3","FeColorMatrixElement","includeOpacity","srcData","nr","ng","nb","na","MaskElement","ignoredStyles","maskCanvas","maskCtx","tmpCanvas","tmpCtx","globalCompositeOperation","fillRect","noop","FilterElement","efd","extraFilterDistance","tmpCanvasWidth","tmpCanvasHeight","drawImage","getPoints","orient","markerUnits","markerSvg","isBoundingBoxUnits","createLinearGradient","fx","fy","fr","createRadialGradient","stopOpacity","stopColor","colorFrom","colorTo","from1","to1","transformFrom","transformTo","fontFamilyStyle","arabicGlyph","hasText","open","dataArray","theta","dTheta","psi","fs","setTextData","textDecoration","glyphInfo","rotation","partialText","getLetterSpacingAt","idx","letterSpacingCache","findSegmentToFitChar","anchor","textFullWidth","fullPathWidth","spacesNumber","inputOffset","charI","glyphWidth","splineStep","textHeight","getEquidistantPointOnPath","dyX","dyY","measuresCache","chars","thisSpacing","parentSpacing","letterSpacing","textLen","dxSum","cur","textWidth","getPathLength","startOffset","nextOffset","parsePathData","pathLength","pathCommands","startX","startY","nextCommandType","calcLength","commandType","getLineLength","getPointOnCubicBezier","getPointOnQuadraticBezier","inc","getPointOnEllipticalArc","getPointOnLine","fromX","fromY","rise","ix","iy","pRise","pRun","getPointOnPath","fullLen","cumulativePathLength","currentT","pct","p4x","p4y","cosPsi","sinPsi","buildEquidistantCache","inputStep","inputPrecision","precision","equidistantCache","targetDistance","pathElement","loadImage","image","createImage","loadSvg","atob","decodeURIComponent","subDocument","forkString","documentElement","complete","isSvg","images","tempSvg","oldParent","elementTransform","cachedElement","contextProto","Reflect","_width","blurRadius","getUniqueId","Document","bindCreateImage","createImage1","anonymousCrossOrigin","forceAnonymousCrossOrigin","emSizeStack","uniqueId","isImagesLoaded","isFontsLoaded","createDocumentElement","elementType","ElementType","elementTypes","config","createCanvas1","createImage2","crossOrigin","reject","onerror","_event","_source","_lineno","_colno","Canvg","svgDocument","fork","baseOptions","ascending","descending","bisector","compare1","compare2","lo","hi","mid","zero","center","number","ascendingBisect","bisectRight","bisectLeft","bisectCenter","RangeError","blur","blurf","temp","blur2","Blur2","blurImage","blurx","blury","blurh","blurv","radius0","bluri","valueof","array","arrayify","reducer","lengths","product","cumsum","deviation","extent","Adder","_partials","_n","valueOf","fsum","adder","fcumsum","InternMap","keyof","defineProperties","_intern","intern_get","intern_set","intern_delete","InternSet","identity","nest","groups","flatten","flatGroup","flatRollup","rollups","rollup","unique","indexes","regroup","permute","F","Uint32Array","ascendingDefined","compareDefined","groupSort","ak","av","bk","bv","constant","e10","e5","e2","tickSpec","power","log10","factor","ticks","tickIncrement","tickStep","prestep","isFinite","thresholdSturges","LN2","bin","histogram","xz","tz","tn","bins","bisect","thresholds","maxIndex","minIndex","quickselect","z","sd","greatest","defined","maxValue","quantile","i0","value0","subarray","quantileSorted","quantileIndex","thresholdFreedmanDiaconis","thresholdScott","cbrt","median","medianIndex","arrays","counts","modeValue","modeCount","pairs","pairof","pair","previous","first","rank","V","compareIndex","minValue","leastIndex","greatestIndex","scan","shuffler","transpose","zip","mapper","others","disjoint","is","superset","io","intern","ivalue","subset","bottom","entering","__axis","tickArguments","tickFormat","tickSizeInner","tickPadding","devicePixelRatio","format","spacing","range0","range1","position","copy","selection","order","tickExit","exit","tickEnter","each","tickSize","axisTop","axisRight","axisBottom","axisLeft","dispatch","Dispatch","typename","types","that","none","childMatcher","childFirst","firstElementChild","EnterNode","datum","ownerDocument","namespaceURI","_next","_parent","__data__","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","insertBefore","xhtml","xlink","xmlns","namespaces","space","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","propertyRemove","propertyConstant","propertyFunction","classArray","string","ClassList","_node","_names","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","creatorInherit","uri","createElementNS","creatorFixed","namespace","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","__on","listener","onAdd","contextListener","params","createEvent","initEvent","bubbles","cancelable","dispatchConstant","dispatchFunction","Selection","parents","_groups","_parents","subgroups","subnode","subgroup","arrayAll","selectorAll","selectChild","childFind","selectChildren","childrenFilter","matcher","enterGroup","updateGroup","_enter","_exit","sparse","onenter","onupdate","onexit","groups0","groups1","m0","merges","group0","group1","compareDocumentPosition","compareNode","sortgroups","sortgroup","getAttributeNS","property","classed","html","creator","before","deep","typenames","nonpassive","passive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","darkgrey","darkslategrey","dimgrey","grey","lightgray","lightslategrey","slategrey","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","rgbn","Rgb","hsla","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","Hsl","hslConvert","hsl","clamph","clampt","hsl2rgb","basis","v0","v3","t3","displayable","formatHex8","formatHsl","clamp","linear","hue","nogamma","rgbGamma","exponential","gamma","rgbSpline","spline","colors","rgbBasis","rgbBasisClosed","basisClosed","isNumberArray","ArrayBuffer","isView","DataView","numberArray","genericArray","setTime","reA","reB","am","bm","bs","bi","one","date","sourceEvent","currentTarget","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","clientLeft","top","clientTop","taskHead","taskTail","timeout","clockLast","clockNow","clockSkew","clock","setFrame","clearNow","Timer","_call","_time","timer","restart","timerFlush","wake","nap","poke","emptyOn","emptyTween","SCHEDULED","STARTING","ENDING","ENDED","timing","schedules","__transition","tween","state","ease","active","svgNode","degrees","interpolateTransform","pxComma","pxParen","degParen","xa","ya","xb","yb","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","baseVal","consolidate","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","interpolate","value1","string00","interpolate0","string1","string0","string10","attrTweenNS","attrInterpolateNS","_value","attrTween","attrInterpolate","delayFunction","delayConstant","durationFunction","durationConstant","Transition","_name","newId","selection_prototype","cubicIn","cubicOut","cubicInOut","id0","id1","on0","on1","sit","onFunction","styleTween","styleNull","listener0","styleMaybeRemove","styleInterpolate","textTween","textInterpolate","removeFunction","easeConstant","easeVarying","interrupt","defaultTiming","BrushEvent","MODE_DRAG","MODE_SPACE","MODE_HANDLE","MODE_CENTER","number1","number2","handles","input","output","xy","XY","cursors","overlay","nw","ne","se","sw","flipX","flipY","signsX","signsY","defaultFilter","ctrlKey","defaultExtent","hasAttribute","defaultTouchable","navigator","maxTouchPoints","__brush","brushSelection","dim","brushX","brushY","touchending","touchable","listeners","handleSize","brush","initialize","redraw","started","touchmoved","touchended","emitter","clean","emit","Emitter","touches","w0","w1","e0","e1","moving","lockX","lockY","metaKey","altKey","signX","signY","W","shifting","shiftKey","pointer","point0","beforestart","pts","move","moved","ended","keyCode","changedTouches","selection0","selection1","starting","keyModifiers","pi","halfPi","tau","chordTranspose","chordDirected","directed","padAngle","sortGroups","sortSubgroups","sortChords","chord","groupSums","groupIndex","chords","subgroupIndex","startAngle","endAngle","tauEpsilon","strings","Path","digits","_x0","_y0","_x1","_y1","_append","appendRound","arcTo","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","t01","t21","a0","ccw","cw","da","pathRound","defaultSource","defaultTarget","defaultRadius","defaultStartAngle","defaultEndAngle","defaultPadAngle","defaultArrowheadRadius","ribbon","headRadius","sourceRadius","targetRadius","buffer","ap","argv","sr","sa0","sa1","tr","ta0","ta1","tr2","ta2","ribbonArrow","radians","Xn","Yn","Zn","labConvert","Lab","Hcl","hcl2lab","rgb2lrgb","xyz2lab","lab2xyz","lrgb2rgb","hclConvert","lch","hcl","ED","EB","BC_DA","Cubehelix","bl","cubehelixConvert","cosh","sinh","hole","ringContains","pj","xj","yj","segmentContains","collinear","cases","smooth","smoothLinear","contours","finite","contour","holes","fragmentByStart","fragmentByEnd","above","stitch","startIndex","endIndex","isorings","area","xt","yt","valid","smooth1","sign","defaultX","defaultY","defaultWeight","grid","Float32Array","pow2k","wi","density","pow4k","MIN_VALUE","geometry","transformPolygon","transformRing","transformPoint","EDGE_STACK","Delaunator","getX","defaultGetX","getY","defaultGetY","coords","maxTriangles","_triangles","_halfedges","Int32Array","_hashSize","_hullPrev","_hullNext","_hullTri","_hullHash","_ids","_dists","hullPrev","hullNext","hullTri","hullHash","minDist","i0x","i0y","i1x","i1y","minRadius","circumradius","i2x","i2y","quicksort","hull","d0","ey","cl","circumcenter","_cx","_cy","_hullStart","hullSize","_hashKey","trianglesLen","_addTriangle","_legalize","pseudoAngle","ar","b0","al","pl","inCircle","hbl","_link","br","bp","ids","dists","tempDist","arr","Polygon","Voronoi","xmin","ymin","xmax","ymax","_circumcenters","_init","circumcenters","inedges","ti","tj","_renderSegment","h0","h1","_project","renderBounds","renderCell","_clip","cellPolygons","c0","_regioncode","c1","_clipSegment","_step","ci","cj","loop","ai","li","aj","lj","_cell","_simplify","_clipInfinite","_clipFinite","P","sx0","sy0","sx1","sy1","_edgecode","_edge","flip","vx0","vy0","vxn","vyn","pointX","pointY","jitter","Delaunay","flatArray","flatIterable","_delaunator","_hullIndex","bounds","hypot","hullIndex","dc","renderHull","renderPoints","hullPolygon","renderTriangle","trianglePolygon","DragEvent","defaultContainer","defaultSubject","mousedownx","mousedowny","mousemoving","gestures","clickDistance2","drag","mousedowned","touchstarted","gesture","mousemoved","mouseupped","nodrag","touch","clickDistance","EOL","EOF","QUOTE","NEWLINE","RETURN","objectConverter","columns","Function","inferColumns","columnSet","column","pad","delimiter","reFormat","DELIMITER","parseRows","eof","eol","token","preformatBody","formatValue","formatRow","year","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","getUTCFullYear","getUTCMonth","getUTCDate","formatDate","convert","customConverter","formatBody","formatRows","csv","dsv","csvParse","csvParseRows","csvFormat","csvFormatBody","csvFormatRows","csvFormatRow","csvFormatValue","tsv","tsvParse","tsvParseRows","tsvFormat","tsvFormatBody","tsvFormatRows","tsvFormatRow","tsvFormatValue","autoType","fixtz","getHours","quadIn","quadOut","quadInOut","polyIn","custom","exponent","polyOut","polyInOut","sinIn","sinOut","sinInOut","tpmt","expIn","expOut","expInOut","circleIn","circleOut","circleInOut","b3","b4","b5","b6","b7","b8","b9","bounceIn","bounceOut","bounceInOut","overshoot","backIn","backOut","backInOut","elasticIn","asin","amplitude","period","elasticOut","elasticInOut","responseBlob","responseArrayBuffer","arrayBuffer","responseText","dsvParse","Image","responseJson","force","xm","ym","leaf","quadtree","Quadtree","addAll","leaf_copy","treeProto","radii","ri","ri2","visitAfter","prepare","visit","quad","rj","jiggle","_nodes","_random","nodeById","nodeId","strengths","distances","bias","initializeStrength","initializeDistance","cover","yz","quads","retainer","removeAll","initialRadius","initialAngle","simulation","alphaMin","alphaDecay","alphaTarget","velocityDecay","forces","stepper","lcg","initializeNodes","initializeForce","randomSource","closest","distanceMin2","distanceMax2","theta2","accumulate","distanceMin","distanceMax","radiuses","formatDecimalParts","toExponential","coefficient","prefixExponent","formatSpecifier","specifier","FormatSpecifier","symbol","comma","toLocaleString","toPrecision","formatRounded","formatPrefix","prefixes","locale","grouping","thousands","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","percent","minus","nan","newFormat","formatTypes","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatTrim","defaultLocale","epsilon2","quarterPi","haversin","streamGeometry","stream","streamGeometryType","streamObjectType","Feature","FeatureCollection","Sphere","sphere","MultiPoint","LineString","streamLine","MultiLineString","streamPolygon","MultiPolygon","GeometryCollection","geometries","coordinate","polygonStart","polygonEnd","lambda00","phi00","lambda0","cosPhi0","sinPhi0","phi0","lambda1","lambda2","deltaSum","ranges","areaRingSum","areaSum","areaStream","areaRingStart","areaRingEnd","areaRing","areaPointFirst","areaPoint","lambda","phi","dLambda","sdLambda","adLambda","cosPhi","sinPhi","spherical","cartesian","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","cartesianNormalizeInPlace","W0","W1","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","z0","boundsStream","boundsPoint","boundsLineStart","boundsLineEnd","boundsRingPoint","boundsRingStart","boundsRingEnd","linePoint","normal","inflection","phii","lambdai","antimeridian","rangeCompare","rangeContains","feature","merged","deltaMax","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroidPointCartesian","centroidLinePointFirst","centroidLinePoint","centroidRingPointFirst","centroidRingPoint","cz","compose","invert","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","forward","circleStream","cosRadius","sinRadius","circleRadius","circle","rejoin","Intersection","compareIntersection","startInside","pointEqual","longitude","sinPhi1","cosPhi1","point1","absDelta","phiArc","pointVisible","clipLine","sink","ringBuffer","ringSink","polygonStarted","pointRing","ringStart","ringEnd","polygonContains","pointLine","ringSegments","validSegment","sign0","sign1","sinLambda0Lambda1","clipAntimeridianIntersect","cr","smallRadius","notHemisphere","visible","intersect","two","n2n2","n1n2","determinant","c2","n1xn2","uu","polar","code","v00","point2","lengthSum","clipMax","clipMin","clipRectangle","corner","ca","cb","x__","y__","v__","x_","y_","v_","activeStream","bufferStream","clipStream","polygonInside","cleanInside","cacheStream","lengthStream","lengthPointFirst","lengthLineEnd","lengthPoint","cosDelta","containsObjectType","containsGeometry","containsGeometryType","containsPoint","containsLine","containsPolygon","ao","bo","ringRadians","pointRadians","graticuleX","graticuleY","graticule","DX","DY","outline","extentMajor","extentMinor","stepMajor","stepMinor","graticule10","cy0","cy1","kx0","ky0","kx1","ky1","x00","y00","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","lengthRing","cacheDigits","cacheAppend","cacheRadius","cacheCircle","PathString","projection","projectionStream","contextStream","methods","transformer","TransformStream","fit","fitBounds","clipExtent","fitExtent","fitSize","fitWidth","fitHeight","maxDepth","cosMinDistance","project","delta2","resampleLineTo","depth","dx2","dy2","dz","a00","b00","c00","resampleStream","ringPoint","resampleNone","transformRadians","scaleTranslateRotate","scaleTranslate","cosAlpha","sinAlpha","fi","projectionMutator","projectAt","projectResample","projectTransform","projectRotateTransform","preclip","postclip","recenter","resample","transformRotate","clipAngle","reflectX","reflectY","conicProjection","parallels","conicEqualAreaRaw","cylindricalEqualAreaRaw","r0","r0y","conicEqualArea","lower48Point","alaskaPoint","hawaiiPoint","lower48","albers","alaska","hawaii","pointStream","albersUsa","streams","azimuthalRaw","azimuthalInvert","cc","azimuthalEqualAreaRaw","cxcy","azimuthalEquidistantRaw","mercatorRaw","mercatorProjection","reclip","tany","conicConformalRaw","equirectangularRaw","conicEquidistantRaw","gy","nx","A1","A2","A3","A4","equalEarthRaw","l6","gnomonicRaw","sa","kx","ky","naturalEarth1Raw","phi4","orthographicRaw","stereographicRaw","transverseMercatorRaw","defaultSeparation","meanXReduce","maxYReduce","separation","nodeSize","previousNode","eachAfter","meanX","leafLeft","leafRight","hierarchy","mapChildren","objectChildren","childs","eachBefore","computeHeight","copyData","optional","required","constantZero","ancestor","aNodes","ancestors","bNodes","leastCommonAncestor","descendants","leaves","circles","packEncloseRandom","enclosesWeak","encloseBasis","extendBasis","enclosesWeakAll","enclosesNot","encloseBasis2","encloseBasis3","dr","encloseBasis1","r1","r2","r21","r3","a2","a3","c3","place","intersects","score","packSiblingsRandom","sj","sk","pack","radiusLeaf","packChildrenRandom","translateChild","partition","positionNode","preroot","ambiguous","imputed","defaultId","defaultParentId","parentId","stratify","nodeKey","currentId","currentParentId","nodeByKey","slash","normalize","parentof","nextLeft","nextRight","moveSubtree","wm","wp","change","nextAncestor","vim","TreeNode","treeRoot","firstWalk","secondWalk","sizeNode","siblings","executeShifts","midpoint","vip","vop","vom","sip","sop","sim","som","apportion","squarifyRatio","nodeValue","sumValue","newRatio","minRatio","beta","dice","squarify","tile","paddingStack","paddingInner","paddingTop","paddingRight","paddingBottom","paddingLeft","treemap","paddingOuter","sums","valueOffset","valueTarget","valueLeft","valueRight","xk","yk","resquarify","_squarify","zoomRho","rho","rho2","rho4","ux0","uy0","ux1","uy1","coshr0","SQRT2","_2","hslLong","hclLong","cubehelix","cubehelixGamma","cubehelixLong","piecewise","interpolator","samples","lexicographicOrder","computeUpperHullIndexes","sortedPoints","flippedPoints","upperIndexes","lowerIndexes","skipLeft","skipRight","perimeter","sourceRandomUniform","randomUniform","sourceRandomInt","randomInt","sourceRandomNormal","randomNormal","mu","sigma","sourceRandomLogNormal","randomLogNormal","sourceRandomIrwinHall","randomIrwinHall","sourceRandomBates","irwinHall","randomBates","sourceRandomExponential","randomExponential","log1p","sourceRandomPareto","randomPareto","sourceRandomBernoulli","randomBernoulli","sourceRandomGeometric","randomGeometric","sourceRandomGamma","randomGamma","multiplier","sourceRandomBeta","G","randomBeta","sourceRandomBinomial","geometric","randomBinomial","nn","pp","sourceRandomWeibull","randomWeibull","outerFunc","sourceRandomCauchy","randomCauchy","sourceRandomLogistic","randomLogistic","sourceRandomPoisson","binomial","randomPoisson","mul","eps","initRange","initInterpolator","implicit","ordinal","unknown","band","ordinalRange","rescale","rangeRound","pointish","unit","bimap","polymap","untransform","clamper","continuous","precisionPrefix","precisionRound","precisionFixed","linearish","maxIter","transformLog","transformExp","transformLogn","transformExpn","pow10","reflect","loggish","logs","pows","log2","logp","powp","transformSymlog","transformSymexp","expm1","symlogish","symlog","transformPow","transformSqrt","transformSquare","powish","square","squared","unsquare","invertExtent","quantiles","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationYear","timeInterval","floori","offseti","field","millisecond","second","timeMinute","getSeconds","getMinutes","timeMinutes","utcMinute","setUTCSeconds","utcMinutes","timeHour","timeHours","utcHour","setUTCMinutes","utcHours","timeDay","setHours","setDate","getDate","getTimezoneOffset","timeDays","utcDay","setUTCHours","setUTCDate","utcDays","unixDay","unixDays","timeWeekday","getDay","timeSunday","timeMonday","timeTuesday","timeWednesday","timeThursday","timeFriday","timeSaturday","timeSundays","timeMondays","timeTuesdays","timeWednesdays","timeThursdays","timeFridays","timeSaturdays","utcWeekday","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcSundays","utcMondays","utcTuesdays","utcWednesdays","utcThursdays","utcFridays","utcSaturdays","timeMonth","setMonth","getMonth","getFullYear","timeMonths","utcMonth","setUTCMonth","utcMonths","timeYear","setFullYear","timeYears","utcYear","setUTCFullYear","utcYears","ticker","month","week","day","hour","minute","tickIntervals","tickInterval","utcTicks","utcTickInterval","timeTicks","timeTickInterval","localDate","utcDate","UTC","newDate","formatLocale","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatDayOfMonth","formatMicroseconds","formatYearISO","formatFullYearISO","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCYearISO","formatUTCFullYearISO","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseSpecifier","parseDayOfMonth","parseMicroseconds","parseYear","parseFullYear","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parseQuarter","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseZone","parseLiteralPercent","pads","newParse","Z","utcFormat","utcParse","timeFormat","timeParse","numberRe","percentRe","requoteRe","requote","dISO","dow","UTCdISO","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","utcTime","k10","sequentialLog","sequentialSymlog","sequentialPow","sequentialSqrt","sequentialQuantile","k21","diverging","divergingLog","divergingSymlog","divergingPow","divergingSqrt","scheme","ramp","warm","cool","ts","pi_1_3","pi_2_3","magma","inferno","plasma","nextId","Local","withPath","shape","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","arcEndAngle","arcPadAngle","cornerTangents","rc","x11","y11","x10","y10","cx0","cx1","dx0","dy0","dx1","dy1","cornerRadius","padRadius","a01","a11","a10","da0","da1","rp","rc0","rc1","oc","x32","y32","kc","lc","Linear","curve","defined0","x0z","y0z","areaStart","areaEnd","arealine","lineX0","lineY0","lineY1","lineX1","sortValues","pie","arcs","curveRadialLinear","curveRadial","Radial","_curve","radial","lineRadial","lineStartAngle","lineEndAngle","lineInnerRadius","lineOuterRadius","Bump","BumpRadial","pointRadial","bumpX","bumpY","bumpRadial","linkSource","linkTarget","linkHorizontal","linkVertical","linkRadial","sqrt3","draw","tan30","tan30_2","kr","symbolsFill","diamond","star","triangle","wye","symbolsStroke","plus","times","triangle2","asterisk","square2","diamond2","Basis","BasisClosed","BasisOpen","Bundle","_basis","_beta","_x2","_x3","_x4","_y2","_y3","_y4","bundle","Cardinal","tension","cardinal","CardinalClosed","_x5","_y5","CardinalOpen","_l01_a","_l01_2a","_l12_a","_l12_2a","_l23_a","_l23_2a","CatmullRom","_alpha","x23","y23","catmullRom","CatmullRomClosed","CatmullRomOpen","LinearClosed","slope3","slope2","MonotoneX","MonotoneY","ReflectContext","monotoneX","monotoneY","Natural","controlPoints","Step","_t","stepBefore","stepAfter","series","stackValue","stackSeries","oz","sz","yn","s2","si","sij0","s3","peaks","vi","vj","appearance","tops","bottoms","_t0","isoSpecifier","formatIso","parseIso","_restart","ZoomEvent","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","__zoom","defaultTransform","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","touchstarting","touchfirst","constrain","wheelDelta","tapDistance","wheeled","dblclicked","__zooming","Gesture","taps","wheel","k1","touch0","touch1","l0","dp","dl","collection","scaleBy","scaleTo","translateBy","translateTo","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","hasAwait","currentDeps","outerResolve","depQueues","promise","rej","deps","dep","ret","wrapDeps","getResult","fnQueue","getter","__esModule","globalThis","toStringTag","nc"],"sourceRoot":""}